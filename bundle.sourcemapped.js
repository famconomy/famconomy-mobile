function fI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var hI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ea(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var NN={exports:{}},Ah={},jN={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eu=Symbol.for("react.element"),mI=Symbol.for("react.portal"),gI=Symbol.for("react.fragment"),yI=Symbol.for("react.strict_mode"),xI=Symbol.for("react.profiler"),vI=Symbol.for("react.provider"),bI=Symbol.for("react.context"),wI=Symbol.for("react.forward_ref"),kI=Symbol.for("react.suspense"),SI=Symbol.for("react.memo"),EI=Symbol.for("react.lazy"),xb=Symbol.iterator;function NI(e){return e===null||typeof e!="object"?null:(e=xb&&e[xb]||e["@@iterator"],typeof e=="function"?e:null)}var CN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TN=Object.assign,AN={};function hl(e,t,r){this.props=e,this.context=t,this.refs=AN,this.updater=r||CN}hl.prototype.isReactComponent={};hl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function DN(){}DN.prototype=hl.prototype;function Fy(e,t,r){this.props=e,this.context=t,this.refs=AN,this.updater=r||CN}var By=Fy.prototype=new DN;By.constructor=Fy;TN(By,hl.prototype);By.isPureReactComponent=!0;var vb=Array.isArray,RN=Object.prototype.hasOwnProperty,zy={current:null},_N={key:!0,ref:!0,__self:!0,__source:!0};function IN(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)RN.call(t,n)&&!_N.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Eu,type:e,key:i,ref:a,props:s,_owner:zy.current}}function jI(e,t){return{$$typeof:Eu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Uy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Eu}function CI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var bb=/\/+/g;function Wp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?CI(""+e.key):t.toString(36)}function Md(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Eu:case mI:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Wp(a,0):n,vb(s)?(r="",e!=null&&(r=e.replace(bb,"$&/")+"/"),Md(s,t,r,"",function(u){return u})):s!=null&&(Uy(s)&&(s=jI(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(bb,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",vb(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Wp(i,l);a+=Md(i,t,r,c,s)}else if(c=NI(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Wp(i,l++),a+=Md(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Xu(e,t,r){if(e==null)return e;var n=[],s=0;return Md(e,n,"","",function(i){return t.call(r,i,s++)}),n}function TI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Kr={current:null},Od={transition:null},AI={ReactCurrentDispatcher:Kr,ReactCurrentBatchConfig:Od,ReactCurrentOwner:zy};function MN(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:Xu,forEach:function(e,t,r){Xu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Xu(e,function(){t++}),t},toArray:function(e){return Xu(e,function(t){return t})||[]},only:function(e){if(!Uy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=hl;tt.Fragment=gI;tt.Profiler=xI;tt.PureComponent=Fy;tt.StrictMode=yI;tt.Suspense=kI;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AI;tt.act=MN;tt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=TN({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=zy.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)RN.call(t,c)&&!_N.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Eu,type:e.type,key:s,ref:i,props:n,_owner:a}};tt.createContext=function(e){return e={$$typeof:bI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vI,_context:e},e.Consumer=e};tt.createElement=IN;tt.createFactory=function(e){var t=IN.bind(null,e);return t.type=e,t};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:wI,render:e}};tt.isValidElement=Uy;tt.lazy=function(e){return{$$typeof:EI,_payload:{_status:-1,_result:e},_init:TI}};tt.memo=function(e,t){return{$$typeof:SI,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=Od.transition;Od.transition={};try{e()}finally{Od.transition=t}};tt.unstable_act=MN;tt.useCallback=function(e,t){return Kr.current.useCallback(e,t)};tt.useContext=function(e){return Kr.current.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e){return Kr.current.useDeferredValue(e)};tt.useEffect=function(e,t){return Kr.current.useEffect(e,t)};tt.useId=function(){return Kr.current.useId()};tt.useImperativeHandle=function(e,t,r){return Kr.current.useImperativeHandle(e,t,r)};tt.useInsertionEffect=function(e,t){return Kr.current.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return Kr.current.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return Kr.current.useMemo(e,t)};tt.useReducer=function(e,t,r){return Kr.current.useReducer(e,t,r)};tt.useRef=function(e){return Kr.current.useRef(e)};tt.useState=function(e){return Kr.current.useState(e)};tt.useSyncExternalStore=function(e,t,r){return Kr.current.useSyncExternalStore(e,t,r)};tt.useTransition=function(){return Kr.current.useTransition()};tt.version="18.3.1";jN.exports=tt;var m=jN.exports;const re=ea(m),DI=fI({__proto__:null,default:re},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=m,_I=Symbol.for("react.element"),II=Symbol.for("react.fragment"),MI=Object.prototype.hasOwnProperty,OI=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PI={key:!0,ref:!0,__self:!0,__source:!0};function ON(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)MI.call(t,n)&&!PI.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:_I,type:e,key:i,ref:a,props:s,_owner:OI.current}}Ah.Fragment=II;Ah.jsx=ON;Ah.jsxs=ON;NN.exports=Ah;var o=NN.exports,PN={exports:{}},jn={},LN={exports:{}},FN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,W){var se=B.length;B.push(W);e:for(;0<se;){var X=se-1>>>1,de=B[X];if(0<s(de,W))B[X]=W,B[se]=de,se=X;else break e}}function r(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var W=B[0],se=B.pop();if(se!==W){B[0]=se;e:for(var X=0,de=B.length,fe=de>>>1;X<fe;){var ye=2*(X+1)-1,ie=B[ye],M=ye+1,J=B[M];if(0>s(ie,se))M<de&&0>s(J,ie)?(B[X]=J,B[M]=se,X=M):(B[X]=ie,B[ye]=se,X=ye);else if(M<de&&0>s(J,se))B[X]=J,B[M]=se,X=M;else break e}}return W}function s(B,W){var se=B.sortIndex-W.sortIndex;return se!==0?se:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=B)n(u),W.sortIndex=W.expirationTime,t(c,W);else break;W=r(u)}}function k(B){if(y=!1,w(B),!g)if(r(c)!==null)g=!0,O(S);else{var W=r(u);W!==null&&z(k,W.startTime-B)}}function S(B,W){g=!1,y&&(y=!1,v(j),j=-1),p=!0;var se=h;try{for(w(W),f=r(c);f!==null&&(!(f.expirationTime>W)||B&&!_());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var de=X(f.expirationTime<=W);W=e.unstable_now(),typeof de=="function"?f.callback=de:f===r(c)&&n(c),w(W)}else n(c);f=r(c)}if(f!==null)var fe=!0;else{var ye=r(u);ye!==null&&z(k,ye.startTime-W),fe=!1}return fe}finally{f=null,h=se,p=!1}}var E=!1,N=null,j=-1,T=5,C=-1;function _(){return!(e.unstable_now()-C<T)}function V(){if(N!==null){var B=e.unstable_now();C=B;var W=!0;try{W=N(!0,B)}finally{W?F():(E=!1,N=null)}}else E=!1}var F;if(typeof x=="function")F=function(){x(V)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,L=R.port2;R.port1.onmessage=V,F=function(){L.postMessage(null)}}else F=function(){b(V,0)};function O(B){N=B,E||(E=!0,F())}function z(B,W){j=b(function(){B(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,O(S))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(B){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var se=h;h=W;try{return B()}finally{h=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var se=h;h=B;try{return W()}finally{h=se}},e.unstable_scheduleCallback=function(B,W,se){var X=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?X+se:X):se=X,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=se+de,B={id:d++,callback:W,priorityLevel:B,startTime:se,expirationTime:de,sortIndex:-1},se>X?(B.sortIndex=se,t(u,B),r(c)===null&&B===r(u)&&(y?(v(j),j=-1):y=!0,z(k,se-X))):(B.sortIndex=de,t(c,B),g||p||(g=!0,O(S))),B},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(B){var W=h;return function(){var se=h;h=W;try{return B.apply(this,arguments)}finally{h=se}}}})(FN);LN.exports=FN;var LI=LN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI=m,Sn=LI;function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BN=new Set,Fc={};function Xa(e,t){Go(e,t),Go(e+"Capture",t)}function Go(e,t){for(Fc[e]=t,e=0;e<t.length;e++)BN.add(t[e])}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cg=Object.prototype.hasOwnProperty,BI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wb={},kb={};function zI(e){return Cg.call(kb,e)?!0:Cg.call(wb,e)?!1:BI.test(e)?kb[e]=!0:(wb[e]=!0,!1)}function UI(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function HI(e,t,r,n){if(t===null||typeof t>"u"||UI(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qr(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Sr[e]=new Qr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Sr[t]=new Qr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Sr[e]=new Qr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Sr[e]=new Qr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Sr[e]=new Qr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Sr[e]=new Qr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Sr[e]=new Qr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Sr[e]=new Qr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Sr[e]=new Qr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hy=/[\-:]([a-z])/g;function Vy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hy,Vy);Sr[t]=new Qr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hy,Vy);Sr[t]=new Qr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hy,Vy);Sr[t]=new Qr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Sr[e]=new Qr(e,1,!1,e.toLowerCase(),null,!1,!1)});Sr.xlinkHref=new Qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Sr[e]=new Qr(e,1,!1,e.toLowerCase(),null,!0,!0)});function $y(e,t,r,n){var s=Sr.hasOwnProperty(t)?Sr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(HI(t,r,s,n)&&(r=null),n||s===null?zI(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ai=FI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),go=Symbol.for("react.portal"),yo=Symbol.for("react.fragment"),Wy=Symbol.for("react.strict_mode"),Tg=Symbol.for("react.profiler"),zN=Symbol.for("react.provider"),UN=Symbol.for("react.context"),Yy=Symbol.for("react.forward_ref"),Ag=Symbol.for("react.suspense"),Dg=Symbol.for("react.suspense_list"),Gy=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),HN=Symbol.for("react.offscreen"),Sb=Symbol.iterator;function Rl(e){return e===null||typeof e!="object"?null:(e=Sb&&e[Sb]||e["@@iterator"],typeof e=="function"?e:null)}var Vt=Object.assign,Yp;function nc(e){if(Yp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Yp=t&&t[1]||""}return`
`+Yp+e}var Gp=!1;function qp(e,t){if(!e||Gp)return"";Gp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Gp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?nc(e):""}function VI(e){switch(e.tag){case 5:return nc(e.type);case 16:return nc("Lazy");case 13:return nc("Suspense");case 19:return nc("SuspenseList");case 0:case 2:case 15:return e=qp(e.type,!1),e;case 11:return e=qp(e.type.render,!1),e;case 1:return e=qp(e.type,!0),e;default:return""}}function Rg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yo:return"Fragment";case go:return"Portal";case Tg:return"Profiler";case Wy:return"StrictMode";case Ag:return"Suspense";case Dg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case UN:return(e.displayName||"Context")+".Consumer";case zN:return(e._context.displayName||"Context")+".Provider";case Yy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gy:return t=e.displayName||null,t!==null?t:Rg(e.type)||"Memo";case xi:t=e._payload,e=e._init;try{return Rg(e(t))}catch{}}return null}function $I(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rg(t);case 8:return t===Wy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function VN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function WI(e){var t=VN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ed(e){e._valueTracker||(e._valueTracker=WI(e))}function $N(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=VN(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function mf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _g(e,t){var r=t.checked;return Vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Eb(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Yi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WN(e,t){t=t.checked,t!=null&&$y(e,"checked",t,!1)}function Ig(e,t){WN(e,t);var r=Yi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Mg(e,t.type,Yi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Mg(e,t,r){(t!=="number"||mf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var sc=Array.isArray;function Oo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Yi(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Og(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ue(91));return Vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ue(92));if(sc(r)){if(1<r.length)throw Error(ue(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Yi(r)}}function YN(e,t){var r=Yi(t.value),n=Yi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Cb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function GN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?GN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var td,qN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(td=td||document.createElement("div"),td.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=td.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var hc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YI=["Webkit","ms","Moz","O"];Object.keys(hc).forEach(function(e){YI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hc[t]=hc[e]})});function KN(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||hc.hasOwnProperty(e)&&hc[e]?(""+t).trim():t+"px"}function QN(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=KN(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var GI=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lg(e,t){if(t){if(GI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ue(62))}}function Fg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bg=null;function qy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zg=null,Po=null,Lo=null;function Tb(e){if(e=Cu(e)){if(typeof zg!="function")throw Error(ue(280));var t=e.stateNode;t&&(t=Mh(t),zg(e.stateNode,e.type,t))}}function ZN(e){Po?Lo?Lo.push(e):Lo=[e]:Po=e}function XN(){if(Po){var e=Po,t=Lo;if(Lo=Po=null,Tb(e),t)for(e=0;e<t.length;e++)Tb(t[e])}}function JN(e,t){return e(t)}function ej(){}var Kp=!1;function tj(e,t,r){if(Kp)return e(t,r);Kp=!0;try{return JN(e,t,r)}finally{Kp=!1,(Po!==null||Lo!==null)&&(ej(),XN())}}function zc(e,t){var r=e.stateNode;if(r===null)return null;var n=Mh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ue(231,t,typeof r));return r}var Ug=!1;if(Xs)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){Ug=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{Ug=!1}function qI(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var pc=!1,gf=null,yf=!1,Hg=null,KI={onError:function(e){pc=!0,gf=e}};function QI(e,t,r,n,s,i,a,l,c){pc=!1,gf=null,qI.apply(KI,arguments)}function ZI(e,t,r,n,s,i,a,l,c){if(QI.apply(this,arguments),pc){if(pc){var u=gf;pc=!1,gf=null}else throw Error(ue(198));yf||(yf=!0,Hg=u)}}function Ja(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function rj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ab(e){if(Ja(e)!==e)throw Error(ue(188))}function XI(e){var t=e.alternate;if(!t){if(t=Ja(e),t===null)throw Error(ue(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ab(s),e;if(i===n)return Ab(s),t;i=i.sibling}throw Error(ue(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(ue(189))}}if(r.alternate!==n)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?e:t}function nj(e){return e=XI(e),e!==null?sj(e):null}function sj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sj(e);if(t!==null)return t;e=e.sibling}return null}var ij=Sn.unstable_scheduleCallback,Db=Sn.unstable_cancelCallback,JI=Sn.unstable_shouldYield,eM=Sn.unstable_requestPaint,Xt=Sn.unstable_now,tM=Sn.unstable_getCurrentPriorityLevel,Ky=Sn.unstable_ImmediatePriority,aj=Sn.unstable_UserBlockingPriority,xf=Sn.unstable_NormalPriority,rM=Sn.unstable_LowPriority,oj=Sn.unstable_IdlePriority,Dh=null,js=null;function nM(e){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(Dh,e,void 0,(e.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:aM,sM=Math.log,iM=Math.LN2;function aM(e){return e>>>=0,e===0?32:31-(sM(e)/iM|0)|0}var rd=64,nd=4194304;function ic(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=ic(l):(i&=a,i!==0&&(n=ic(i)))}else a=r&~s,a!==0?n=ic(a):i!==0&&(n=ic(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-es(t),s=1<<r,n|=e[r],t&=~s;return n}function oM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-es(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=oM(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Vg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lj(){var e=rd;return rd<<=1,!(rd&4194240)&&(rd=64),e}function Qp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Nu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-es(t),e[t]=r}function cM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-es(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Qy(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-es(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var wt=0;function cj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uj,Zy,dj,fj,hj,$g=!1,sd=[],Mi=null,Oi=null,Pi=null,Uc=new Map,Hc=new Map,wi=[],uM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rb(e,t){switch(e){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Uc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(t.pointerId)}}function Il(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Cu(t),t!==null&&Zy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function dM(e,t,r,n,s){switch(t){case"focusin":return Mi=Il(Mi,e,t,r,n,s),!0;case"dragenter":return Oi=Il(Oi,e,t,r,n,s),!0;case"mouseover":return Pi=Il(Pi,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Uc.set(i,Il(Uc.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Hc.set(i,Il(Hc.get(i)||null,e,t,r,n,s)),!0}return!1}function pj(e){var t=Ea(e.target);if(t!==null){var r=Ja(t);if(r!==null){if(t=r.tag,t===13){if(t=rj(r),t!==null){e.blockedOn=t,hj(e.priority,function(){dj(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Bg=n,r.target.dispatchEvent(n),Bg=null}else return t=Cu(r),t!==null&&Zy(t),e.blockedOn=r,!1;t.shift()}return!0}function _b(e,t,r){Pd(e)&&r.delete(t)}function fM(){$g=!1,Mi!==null&&Pd(Mi)&&(Mi=null),Oi!==null&&Pd(Oi)&&(Oi=null),Pi!==null&&Pd(Pi)&&(Pi=null),Uc.forEach(_b),Hc.forEach(_b)}function Ml(e,t){e.blockedOn===t&&(e.blockedOn=null,$g||($g=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,fM)))}function Vc(e){function t(s){return Ml(s,e)}if(0<sd.length){Ml(sd[0],e);for(var r=1;r<sd.length;r++){var n=sd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Mi!==null&&Ml(Mi,e),Oi!==null&&Ml(Oi,e),Pi!==null&&Ml(Pi,e),Uc.forEach(t),Hc.forEach(t),r=0;r<wi.length;r++)n=wi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<wi.length&&(r=wi[0],r.blockedOn===null);)pj(r),r.blockedOn===null&&wi.shift()}var Fo=ai.ReactCurrentBatchConfig,bf=!0;function hM(e,t,r,n){var s=wt,i=Fo.transition;Fo.transition=null;try{wt=1,Xy(e,t,r,n)}finally{wt=s,Fo.transition=i}}function pM(e,t,r,n){var s=wt,i=Fo.transition;Fo.transition=null;try{wt=4,Xy(e,t,r,n)}finally{wt=s,Fo.transition=i}}function Xy(e,t,r,n){if(bf){var s=Wg(e,t,r,n);if(s===null)am(e,t,n,wf,r),Rb(e,n);else if(dM(s,e,t,r,n))n.stopPropagation();else if(Rb(e,n),t&4&&-1<uM.indexOf(e)){for(;s!==null;){var i=Cu(s);if(i!==null&&uj(i),i=Wg(e,t,r,n),i===null&&am(e,t,n,wf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else am(e,t,n,null,r)}}var wf=null;function Wg(e,t,r,n){if(wf=null,e=qy(n),e=Ea(e),e!==null)if(t=Ja(e),t===null)e=null;else if(r=t.tag,r===13){if(e=rj(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wf=e,null}function mj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tM()){case Ky:return 1;case aj:return 4;case xf:case rM:return 16;case oj:return 536870912;default:return 16}default:return 16}}var Ni=null,Jy=null,Ld=null;function gj(){if(Ld)return Ld;var e,t=Jy,r=t.length,n,s="value"in Ni?Ni.value:Ni.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return Ld=s.slice(e,1<n?1-n:void 0)}function Fd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function id(){return!0}function Ib(){return!1}function Cn(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?id:Ib,this.isPropagationStopped=Ib,this}return Vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=id)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=id)},persist:function(){},isPersistent:id}),t}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ex=Cn(pl),ju=Vt({},pl,{view:0,detail:0}),mM=Cn(ju),Zp,Xp,Ol,Rh=Vt({},ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ol&&(Ol&&e.type==="mousemove"?(Zp=e.screenX-Ol.screenX,Xp=e.screenY-Ol.screenY):Xp=Zp=0,Ol=e),Zp)},movementY:function(e){return"movementY"in e?e.movementY:Xp}}),Mb=Cn(Rh),gM=Vt({},Rh,{dataTransfer:0}),yM=Cn(gM),xM=Vt({},ju,{relatedTarget:0}),Jp=Cn(xM),vM=Vt({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),bM=Cn(vM),wM=Vt({},pl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kM=Cn(wM),SM=Vt({},pl,{data:0}),Ob=Cn(SM),EM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jM[e])?!!t[e]:!1}function tx(){return CM}var TM=Vt({},ju,{key:function(e){if(e.key){var t=EM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?NM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tx,charCode:function(e){return e.type==="keypress"?Fd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),AM=Cn(TM),DM=Vt({},Rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pb=Cn(DM),RM=Vt({},ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tx}),_M=Cn(RM),IM=Vt({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),MM=Cn(IM),OM=Vt({},Rh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PM=Cn(OM),LM=[9,13,27,32],rx=Xs&&"CompositionEvent"in window,mc=null;Xs&&"documentMode"in document&&(mc=document.documentMode);var FM=Xs&&"TextEvent"in window&&!mc,yj=Xs&&(!rx||mc&&8<mc&&11>=mc),Lb=" ",Fb=!1;function xj(e,t){switch(e){case"keyup":return LM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xo=!1;function BM(e,t){switch(e){case"compositionend":return vj(t);case"keypress":return t.which!==32?null:(Fb=!0,Lb);case"textInput":return e=t.data,e===Lb&&Fb?null:e;default:return null}}function zM(e,t){if(xo)return e==="compositionend"||!rx&&xj(e,t)?(e=gj(),Ld=Jy=Ni=null,xo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yj&&t.locale!=="ko"?null:t.data;default:return null}}var UM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!UM[e.type]:t==="textarea"}function bj(e,t,r,n){ZN(n),t=kf(t,"onChange"),0<t.length&&(r=new ex("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var gc=null,$c=null;function HM(e){Rj(e,0)}function _h(e){var t=wo(e);if($N(t))return e}function VM(e,t){if(e==="change")return t}var wj=!1;if(Xs){var em;if(Xs){var tm="oninput"in document;if(!tm){var zb=document.createElement("div");zb.setAttribute("oninput","return;"),tm=typeof zb.oninput=="function"}em=tm}else em=!1;wj=em&&(!document.documentMode||9<document.documentMode)}function Ub(){gc&&(gc.detachEvent("onpropertychange",kj),$c=gc=null)}function kj(e){if(e.propertyName==="value"&&_h($c)){var t=[];bj(t,$c,e,qy(e)),tj(HM,t)}}function $M(e,t,r){e==="focusin"?(Ub(),gc=t,$c=r,gc.attachEvent("onpropertychange",kj)):e==="focusout"&&Ub()}function WM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _h($c)}function YM(e,t){if(e==="click")return _h(t)}function GM(e,t){if(e==="input"||e==="change")return _h(t)}function qM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var is=typeof Object.is=="function"?Object.is:qM;function Wc(e,t){if(is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Cg.call(t,s)||!is(e[s],t[s]))return!1}return!0}function Hb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vb(e,t){var r=Hb(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hb(r)}}function Sj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ej(){for(var e=window,t=mf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=mf(e.document)}return t}function nx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function KM(e){var t=Ej(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Sj(r.ownerDocument.documentElement,r)){if(n!==null&&nx(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Vb(r,i);var a=Vb(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var QM=Xs&&"documentMode"in document&&11>=document.documentMode,vo=null,Yg=null,yc=null,Gg=!1;function $b(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gg||vo==null||vo!==mf(n)||(n=vo,"selectionStart"in n&&nx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yc&&Wc(yc,n)||(yc=n,n=kf(Yg,"onSelect"),0<n.length&&(t=new ex("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vo)))}function ad(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var bo={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionend:ad("Transition","TransitionEnd")},rm={},Nj={};Xs&&(Nj=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Ih(e){if(rm[e])return rm[e];if(!bo[e])return e;var t=bo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Nj)return rm[e]=t[r];return e}var jj=Ih("animationend"),Cj=Ih("animationiteration"),Tj=Ih("animationstart"),Aj=Ih("transitionend"),Dj=new Map,Wb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ta(e,t){Dj.set(e,t),Xa(t,[e])}for(var nm=0;nm<Wb.length;nm++){var sm=Wb[nm],ZM=sm.toLowerCase(),XM=sm[0].toUpperCase()+sm.slice(1);ta(ZM,"on"+XM)}ta(jj,"onAnimationEnd");ta(Cj,"onAnimationIteration");ta(Tj,"onAnimationStart");ta("dblclick","onDoubleClick");ta("focusin","onFocus");ta("focusout","onBlur");ta(Aj,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JM=new Set("cancel close invalid load scroll toggle".split(" ").concat(ac));function Yb(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ZI(n,t,void 0,e),e.currentTarget=null}function Rj(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Yb(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Yb(s,l,u),i=c}}}if(yf)throw e=Hg,yf=!1,Hg=null,e}function At(e,t){var r=t[Xg];r===void 0&&(r=t[Xg]=new Set);var n=e+"__bubble";r.has(n)||(_j(t,e,2,!1),r.add(n))}function im(e,t,r){var n=0;t&&(n|=4),_j(r,e,n,t)}var od="_reactListening"+Math.random().toString(36).slice(2);function Yc(e){if(!e[od]){e[od]=!0,BN.forEach(function(r){r!=="selectionchange"&&(JM.has(r)||im(r,!1,e),im(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[od]||(t[od]=!0,im("selectionchange",!1,t))}}function _j(e,t,r,n){switch(mj(t)){case 1:var s=hM;break;case 4:s=pM;break;default:s=Xy}r=s.bind(null,t,r,e),s=void 0,!Ug||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function am(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ea(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}tj(function(){var u=i,d=qy(r),f=[];e:{var h=Dj.get(e);if(h!==void 0){var p=ex,g=e;switch(e){case"keypress":if(Fd(r)===0)break e;case"keydown":case"keyup":p=AM;break;case"focusin":g="focus",p=Jp;break;case"focusout":g="blur",p=Jp;break;case"beforeblur":case"afterblur":p=Jp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Mb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=yM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=_M;break;case jj:case Cj:case Tj:p=bM;break;case Aj:p=MM;break;case"scroll":p=mM;break;case"wheel":p=PM;break;case"copy":case"cut":case"paste":p=kM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Pb}var y=(t&4)!==0,b=!y&&e==="scroll",v=y?h!==null?h+"Capture":null:h;y=[];for(var x=u,w;x!==null;){w=x;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,v!==null&&(k=zc(x,v),k!=null&&y.push(Gc(x,k,w)))),b)break;x=x.return}0<y.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Bg&&(g=r.relatedTarget||r.fromElement)&&(Ea(g)||g[Js]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?Ea(g):null,g!==null&&(b=Ja(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=Mb,k="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=Pb,k="onPointerLeave",v="onPointerEnter",x="pointer"),b=p==null?h:wo(p),w=g==null?h:wo(g),h=new y(k,x+"leave",p,r,d),h.target=b,h.relatedTarget=w,k=null,Ea(d)===u&&(y=new y(v,x+"enter",g,r,d),y.target=w,y.relatedTarget=b,k=y),b=k,p&&g)t:{for(y=p,v=g,x=0,w=y;w;w=fo(w))x++;for(w=0,k=v;k;k=fo(k))w++;for(;0<x-w;)y=fo(y),x--;for(;0<w-x;)v=fo(v),w--;for(;x--;){if(y===v||v!==null&&y===v.alternate)break t;y=fo(y),v=fo(v)}y=null}else y=null;p!==null&&Gb(f,h,p,y,!1),g!==null&&b!==null&&Gb(f,b,g,y,!0)}}e:{if(h=u?wo(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=VM;else if(Bb(h))if(wj)S=GM;else{S=WM;var E=$M}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=YM);if(S&&(S=S(e,u))){bj(f,S,r,d);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Mg(h,"number",h.value)}switch(E=u?wo(u):window,e){case"focusin":(Bb(E)||E.contentEditable==="true")&&(vo=E,Yg=u,yc=null);break;case"focusout":yc=Yg=vo=null;break;case"mousedown":Gg=!0;break;case"contextmenu":case"mouseup":case"dragend":Gg=!1,$b(f,r,d);break;case"selectionchange":if(QM)break;case"keydown":case"keyup":$b(f,r,d)}var N;if(rx)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else xo?xj(e,r)&&(j="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(yj&&r.locale!=="ko"&&(xo||j!=="onCompositionStart"?j==="onCompositionEnd"&&xo&&(N=gj()):(Ni=d,Jy="value"in Ni?Ni.value:Ni.textContent,xo=!0)),E=kf(u,j),0<E.length&&(j=new Ob(j,e,null,r,d),f.push({event:j,listeners:E}),N?j.data=N:(N=vj(r),N!==null&&(j.data=N)))),(N=FM?BM(e,r):zM(e,r))&&(u=kf(u,"onBeforeInput"),0<u.length&&(d=new Ob("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}Rj(f,t)})}function Gc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function kf(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zc(e,r),i!=null&&n.unshift(Gc(e,i,s)),i=zc(e,t),i!=null&&n.push(Gc(e,i,s))),e=e.return}return n}function fo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gb(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=zc(r,i),c!=null&&a.unshift(Gc(r,c,l))):s||(c=zc(r,i),c!=null&&a.push(Gc(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var eO=/\r\n?/g,tO=/\u0000|\uFFFD/g;function qb(e){return(typeof e=="string"?e:""+e).replace(eO,`
`).replace(tO,"")}function ld(e,t,r){if(t=qb(t),qb(e)!==t&&r)throw Error(ue(425))}function Sf(){}var qg=null,Kg=null;function Qg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zg=typeof setTimeout=="function"?setTimeout:void 0,rO=typeof clearTimeout=="function"?clearTimeout:void 0,Kb=typeof Promise=="function"?Promise:void 0,nO=typeof queueMicrotask=="function"?queueMicrotask:typeof Kb<"u"?function(e){return Kb.resolve(null).then(e).catch(sO)}:Zg;function sO(e){setTimeout(function(){throw e})}function om(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Vc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Vc(t)}function Li(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ml=Math.random().toString(36).slice(2),ks="__reactFiber$"+ml,qc="__reactProps$"+ml,Js="__reactContainer$"+ml,Xg="__reactEvents$"+ml,iO="__reactListeners$"+ml,aO="__reactHandles$"+ml;function Ea(e){var t=e[ks];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Js]||r[ks]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Qb(e);e!==null;){if(r=e[ks])return r;e=Qb(e)}return t}e=r,r=e.parentNode}return null}function Cu(e){return e=e[ks]||e[Js],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ue(33))}function Mh(e){return e[qc]||null}var Jg=[],ko=-1;function ra(e){return{current:e}}function Rt(e){0>ko||(e.current=Jg[ko],Jg[ko]=null,ko--)}function jt(e,t){ko++,Jg[ko]=e.current,e.current=t}var Gi={},Br=ra(Gi),an=ra(!1),Ba=Gi;function qo(e,t){var r=e.type.contextTypes;if(!r)return Gi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function on(e){return e=e.childContextTypes,e!=null}function Ef(){Rt(an),Rt(Br)}function Zb(e,t,r){if(Br.current!==Gi)throw Error(ue(168));jt(Br,t),jt(an,r)}function Ij(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(ue(108,$I(e)||"Unknown",s));return Vt({},r,n)}function Nf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gi,Ba=Br.current,jt(Br,e),jt(an,an.current),!0}function Xb(e,t,r){var n=e.stateNode;if(!n)throw Error(ue(169));r?(e=Ij(e,t,Ba),n.__reactInternalMemoizedMergedChildContext=e,Rt(an),Rt(Br),jt(Br,e)):Rt(an),jt(an,r)}var Vs=null,Oh=!1,lm=!1;function Mj(e){Vs===null?Vs=[e]:Vs.push(e)}function oO(e){Oh=!0,Mj(e)}function na(){if(!lm&&Vs!==null){lm=!0;var e=0,t=wt;try{var r=Vs;for(wt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Vs=null,Oh=!1}catch(s){throw Vs!==null&&(Vs=Vs.slice(e+1)),ij(Ky,na),s}finally{wt=t,lm=!1}}return null}var So=[],Eo=0,jf=null,Cf=0,In=[],Mn=0,za=null,$s=1,Ws="";function ma(e,t){So[Eo++]=Cf,So[Eo++]=jf,jf=e,Cf=t}function Oj(e,t,r){In[Mn++]=$s,In[Mn++]=Ws,In[Mn++]=za,za=e;var n=$s;e=Ws;var s=32-es(n)-1;n&=~(1<<s),r+=1;var i=32-es(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,$s=1<<32-es(t)+s|r<<s|n,Ws=i+e}else $s=1<<i|r<<s|n,Ws=e}function sx(e){e.return!==null&&(ma(e,1),Oj(e,1,0))}function ix(e){for(;e===jf;)jf=So[--Eo],So[Eo]=null,Cf=So[--Eo],So[Eo]=null;for(;e===za;)za=In[--Mn],In[Mn]=null,Ws=In[--Mn],In[Mn]=null,$s=In[--Mn],In[Mn]=null}var vn=null,yn=null,Ot=!1,Zn=null;function Pj(e,t){var r=Ln(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Jb(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vn=e,yn=Li(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vn=e,yn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=za!==null?{id:$s,overflow:Ws}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ln(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,vn=e,yn=null,!0):!1;default:return!1}}function e0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function t0(e){if(Ot){var t=yn;if(t){var r=t;if(!Jb(e,t)){if(e0(e))throw Error(ue(418));t=Li(r.nextSibling);var n=vn;t&&Jb(e,t)?Pj(n,r):(e.flags=e.flags&-4097|2,Ot=!1,vn=e)}}else{if(e0(e))throw Error(ue(418));e.flags=e.flags&-4097|2,Ot=!1,vn=e}}}function ew(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vn=e}function cd(e){if(e!==vn)return!1;if(!Ot)return ew(e),Ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qg(e.type,e.memoizedProps)),t&&(t=yn)){if(e0(e))throw Lj(),Error(ue(418));for(;t;)Pj(e,t),t=Li(t.nextSibling)}if(ew(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){yn=Li(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}yn=null}}else yn=vn?Li(e.stateNode.nextSibling):null;return!0}function Lj(){for(var e=yn;e;)e=Li(e.nextSibling)}function Ko(){yn=vn=null,Ot=!1}function ax(e){Zn===null?Zn=[e]:Zn.push(e)}var lO=ai.ReactCurrentBatchConfig;function Pl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var n=r.stateNode}if(!n)throw Error(ue(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,e))}return e}function ud(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tw(e){var t=e._init;return t(e._payload)}function Fj(e){function t(v,x){if(e){var w=v.deletions;w===null?(v.deletions=[x],v.flags|=16):w.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Ui(v,x),v.index=0,v.sibling=null,v}function i(v,x,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<x?(v.flags|=2,x):w):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,w,k){return x===null||x.tag!==6?(x=mm(w,v.mode,k),x.return=v,x):(x=s(x,w),x.return=v,x)}function c(v,x,w,k){var S=w.type;return S===yo?d(v,x,w.props.children,k,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xi&&tw(S)===x.type)?(k=s(x,w.props),k.ref=Pl(v,x,w),k.return=v,k):(k=Wd(w.type,w.key,w.props,null,v.mode,k),k.ref=Pl(v,x,w),k.return=v,k)}function u(v,x,w,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=gm(w,v.mode,k),x.return=v,x):(x=s(x,w.children||[]),x.return=v,x)}function d(v,x,w,k,S){return x===null||x.tag!==7?(x=Ma(w,v.mode,k,S),x.return=v,x):(x=s(x,w),x.return=v,x)}function f(v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=mm(""+x,v.mode,w),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ju:return w=Wd(x.type,x.key,x.props,null,v.mode,w),w.ref=Pl(v,null,x),w.return=v,w;case go:return x=gm(x,v.mode,w),x.return=v,x;case xi:var k=x._init;return f(v,k(x._payload),w)}if(sc(x)||Rl(x))return x=Ma(x,v.mode,w,null),x.return=v,x;ud(v,x)}return null}function h(v,x,w,k){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(v,x,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ju:return w.key===S?c(v,x,w,k):null;case go:return w.key===S?u(v,x,w,k):null;case xi:return S=w._init,h(v,x,S(w._payload),k)}if(sc(w)||Rl(w))return S!==null?null:d(v,x,w,k,null);ud(v,w)}return null}function p(v,x,w,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(w)||null,l(x,v,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ju:return v=v.get(k.key===null?w:k.key)||null,c(x,v,k,S);case go:return v=v.get(k.key===null?w:k.key)||null,u(x,v,k,S);case xi:var E=k._init;return p(v,x,w,E(k._payload),S)}if(sc(k)||Rl(k))return v=v.get(w)||null,d(x,v,k,S,null);ud(x,k)}return null}function g(v,x,w,k){for(var S=null,E=null,N=x,j=x=0,T=null;N!==null&&j<w.length;j++){N.index>j?(T=N,N=null):T=N.sibling;var C=h(v,N,w[j],k);if(C===null){N===null&&(N=T);break}e&&N&&C.alternate===null&&t(v,N),x=i(C,x,j),E===null?S=C:E.sibling=C,E=C,N=T}if(j===w.length)return r(v,N),Ot&&ma(v,j),S;if(N===null){for(;j<w.length;j++)N=f(v,w[j],k),N!==null&&(x=i(N,x,j),E===null?S=N:E.sibling=N,E=N);return Ot&&ma(v,j),S}for(N=n(v,N);j<w.length;j++)T=p(N,v,j,w[j],k),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?j:T.key),x=i(T,x,j),E===null?S=T:E.sibling=T,E=T);return e&&N.forEach(function(_){return t(v,_)}),Ot&&ma(v,j),S}function y(v,x,w,k){var S=Rl(w);if(typeof S!="function")throw Error(ue(150));if(w=S.call(w),w==null)throw Error(ue(151));for(var E=S=null,N=x,j=x=0,T=null,C=w.next();N!==null&&!C.done;j++,C=w.next()){N.index>j?(T=N,N=null):T=N.sibling;var _=h(v,N,C.value,k);if(_===null){N===null&&(N=T);break}e&&N&&_.alternate===null&&t(v,N),x=i(_,x,j),E===null?S=_:E.sibling=_,E=_,N=T}if(C.done)return r(v,N),Ot&&ma(v,j),S;if(N===null){for(;!C.done;j++,C=w.next())C=f(v,C.value,k),C!==null&&(x=i(C,x,j),E===null?S=C:E.sibling=C,E=C);return Ot&&ma(v,j),S}for(N=n(v,N);!C.done;j++,C=w.next())C=p(N,v,j,C.value,k),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?j:C.key),x=i(C,x,j),E===null?S=C:E.sibling=C,E=C);return e&&N.forEach(function(V){return t(v,V)}),Ot&&ma(v,j),S}function b(v,x,w,k){if(typeof w=="object"&&w!==null&&w.type===yo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ju:e:{for(var S=w.key,E=x;E!==null;){if(E.key===S){if(S=w.type,S===yo){if(E.tag===7){r(v,E.sibling),x=s(E,w.props.children),x.return=v,v=x;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xi&&tw(S)===E.type){r(v,E.sibling),x=s(E,w.props),x.ref=Pl(v,E,w),x.return=v,v=x;break e}r(v,E);break}else t(v,E);E=E.sibling}w.type===yo?(x=Ma(w.props.children,v.mode,k,w.key),x.return=v,v=x):(k=Wd(w.type,w.key,w.props,null,v.mode,k),k.ref=Pl(v,x,w),k.return=v,v=k)}return a(v);case go:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){r(v,x.sibling),x=s(x,w.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=gm(w,v.mode,k),x.return=v,v=x}return a(v);case xi:return E=w._init,b(v,x,E(w._payload),k)}if(sc(w))return g(v,x,w,k);if(Rl(w))return y(v,x,w,k);ud(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(r(v,x.sibling),x=s(x,w),x.return=v,v=x):(r(v,x),x=mm(w,v.mode,k),x.return=v,v=x),a(v)):r(v,x)}return b}var Qo=Fj(!0),Bj=Fj(!1),Tf=ra(null),Af=null,No=null,ox=null;function lx(){ox=No=Af=null}function cx(e){var t=Tf.current;Rt(Tf),e._currentValue=t}function r0(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Bo(e,t){Af=e,ox=No=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rn=!0),e.firstContext=null)}function Hn(e){var t=e._currentValue;if(ox!==e)if(e={context:e,memoizedValue:t,next:null},No===null){if(Af===null)throw Error(ue(308));No=e,Af.dependencies={lanes:0,firstContext:e}}else No=No.next=e;return t}var Na=null;function ux(e){Na===null?Na=[e]:Na.push(e)}function zj(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ux(t)):(r.next=s.next,s.next=r),t.interleaved=r,ei(e,n)}function ei(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vi=!1;function dx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ut&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ei(e,r)}return s=n.interleaved,s===null?(t.next=t,ux(n)):(t.next=s.next,s.next=t),n.interleaved=t,ei(e,r)}function Bd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Qy(e,r)}}function rw(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Df(e,t,r,n){var s=e.updateQueue;vi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,y=l;switch(h=t,p=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=Vt({},f,h);break e;case 2:vi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Ha|=a,e.lanes=a,e.memoizedState=f}}function nw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ue(191,s));s.call(n)}}}var Tu={},Cs=ra(Tu),Kc=ra(Tu),Qc=ra(Tu);function ja(e){if(e===Tu)throw Error(ue(174));return e}function fx(e,t){switch(jt(Qc,t),jt(Kc,e),jt(Cs,Tu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pg(t,e)}Rt(Cs),jt(Cs,t)}function Zo(){Rt(Cs),Rt(Kc),Rt(Qc)}function Hj(e){ja(Qc.current);var t=ja(Cs.current),r=Pg(t,e.type);t!==r&&(jt(Kc,e),jt(Cs,r))}function hx(e){Kc.current===e&&(Rt(Cs),Rt(Kc))}var Bt=ra(0);function Rf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cm=[];function px(){for(var e=0;e<cm.length;e++)cm[e]._workInProgressVersionPrimary=null;cm.length=0}var zd=ai.ReactCurrentDispatcher,um=ai.ReactCurrentBatchConfig,Ua=0,Ut=null,dr=null,pr=null,_f=!1,xc=!1,Zc=0,cO=0;function Nr(){throw Error(ue(321))}function mx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!is(e[r],t[r]))return!1;return!0}function gx(e,t,r,n,s,i){if(Ua=i,Ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zd.current=e===null||e.memoizedState===null?hO:pO,e=r(n,s),xc){i=0;do{if(xc=!1,Zc=0,25<=i)throw Error(ue(301));i+=1,pr=dr=null,t.updateQueue=null,zd.current=mO,e=r(n,s)}while(xc)}if(zd.current=If,t=dr!==null&&dr.next!==null,Ua=0,pr=dr=Ut=null,_f=!1,t)throw Error(ue(300));return e}function yx(){var e=Zc!==0;return Zc=0,e}function ms(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Ut.memoizedState=pr=e:pr=pr.next=e,pr}function Vn(){if(dr===null){var e=Ut.alternate;e=e!==null?e.memoizedState:null}else e=dr.next;var t=pr===null?Ut.memoizedState:pr.next;if(t!==null)pr=t,dr=e;else{if(e===null)throw Error(ue(310));dr=e,e={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},pr===null?Ut.memoizedState=pr=e:pr=pr.next=e}return pr}function Xc(e,t){return typeof t=="function"?t(e):t}function dm(e){var t=Vn(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=dr,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Ua&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,Ut.lanes|=d,Ha|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,is(n,t.memoizedState)||(rn=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Ut.lanes|=i,Ha|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function fm(e){var t=Vn(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);is(i,t.memoizedState)||(rn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Vj(){}function $j(e,t){var r=Ut,n=Vn(),s=t(),i=!is(n.memoizedState,s);if(i&&(n.memoizedState=s,rn=!0),n=n.queue,xx(Gj.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||pr!==null&&pr.memoizedState.tag&1){if(r.flags|=2048,Jc(9,Yj.bind(null,r,n,s,t),void 0,null),yr===null)throw Error(ue(349));Ua&30||Wj(r,t,s)}return s}function Wj(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Yj(e,t,r,n){t.value=r,t.getSnapshot=n,qj(t)&&Kj(e)}function Gj(e,t,r){return r(function(){qj(t)&&Kj(e)})}function qj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!is(e,r)}catch{return!0}}function Kj(e){var t=ei(e,1);t!==null&&ts(t,e,1,-1)}function sw(e){var t=ms();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:e},t.queue=e,e=e.dispatch=fO.bind(null,Ut,e),[t.memoizedState,e]}function Jc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Qj(){return Vn().memoizedState}function Ud(e,t,r,n){var s=ms();Ut.flags|=e,s.memoizedState=Jc(1|t,r,void 0,n===void 0?null:n)}function Ph(e,t,r,n){var s=Vn();n=n===void 0?null:n;var i=void 0;if(dr!==null){var a=dr.memoizedState;if(i=a.destroy,n!==null&&mx(n,a.deps)){s.memoizedState=Jc(t,r,i,n);return}}Ut.flags|=e,s.memoizedState=Jc(1|t,r,i,n)}function iw(e,t){return Ud(8390656,8,e,t)}function xx(e,t){return Ph(2048,8,e,t)}function Zj(e,t){return Ph(4,2,e,t)}function Xj(e,t){return Ph(4,4,e,t)}function Jj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eC(e,t,r){return r=r!=null?r.concat([e]):null,Ph(4,4,Jj.bind(null,t,e),r)}function vx(){}function tC(e,t){var r=Vn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function rC(e,t){var r=Vn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function nC(e,t,r){return Ua&21?(is(r,t)||(r=lj(),Ut.lanes|=r,Ha|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rn=!0),e.memoizedState=r)}function uO(e,t){var r=wt;wt=r!==0&&4>r?r:4,e(!0);var n=um.transition;um.transition={};try{e(!1),t()}finally{wt=r,um.transition=n}}function sC(){return Vn().memoizedState}function dO(e,t,r){var n=zi(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},iC(e))aC(t,r);else if(r=zj(e,t,r,n),r!==null){var s=qr();ts(r,e,n,s),oC(r,t,n)}}function fO(e,t,r){var n=zi(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(iC(e))aC(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,is(l,a)){var c=t.interleaved;c===null?(s.next=s,ux(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=zj(e,t,s,n),r!==null&&(s=qr(),ts(r,e,n,s),oC(r,t,n))}}function iC(e){var t=e.alternate;return e===Ut||t!==null&&t===Ut}function aC(e,t){xc=_f=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function oC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Qy(e,r)}}var If={readContext:Hn,useCallback:Nr,useContext:Nr,useEffect:Nr,useImperativeHandle:Nr,useInsertionEffect:Nr,useLayoutEffect:Nr,useMemo:Nr,useReducer:Nr,useRef:Nr,useState:Nr,useDebugValue:Nr,useDeferredValue:Nr,useTransition:Nr,useMutableSource:Nr,useSyncExternalStore:Nr,useId:Nr,unstable_isNewReconciler:!1},hO={readContext:Hn,useCallback:function(e,t){return ms().memoizedState=[e,t===void 0?null:t],e},useContext:Hn,useEffect:iw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ud(4194308,4,Jj.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ud(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ud(4,2,e,t)},useMemo:function(e,t){var r=ms();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ms();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=dO.bind(null,Ut,e),[n.memoizedState,e]},useRef:function(e){var t=ms();return e={current:e},t.memoizedState=e},useState:sw,useDebugValue:vx,useDeferredValue:function(e){return ms().memoizedState=e},useTransition:function(){var e=sw(!1),t=e[0];return e=uO.bind(null,e[1]),ms().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ut,s=ms();if(Ot){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=t(),yr===null)throw Error(ue(349));Ua&30||Wj(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,iw(Gj.bind(null,n,i,e),[e]),n.flags|=2048,Jc(9,Yj.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ms(),t=yr.identifierPrefix;if(Ot){var r=Ws,n=$s;r=(n&~(1<<32-es(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=cO++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pO={readContext:Hn,useCallback:tC,useContext:Hn,useEffect:xx,useImperativeHandle:eC,useInsertionEffect:Zj,useLayoutEffect:Xj,useMemo:rC,useReducer:dm,useRef:Qj,useState:function(){return dm(Xc)},useDebugValue:vx,useDeferredValue:function(e){var t=Vn();return nC(t,dr.memoizedState,e)},useTransition:function(){var e=dm(Xc)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:Vj,useSyncExternalStore:$j,useId:sC,unstable_isNewReconciler:!1},mO={readContext:Hn,useCallback:tC,useContext:Hn,useEffect:xx,useImperativeHandle:eC,useInsertionEffect:Zj,useLayoutEffect:Xj,useMemo:rC,useReducer:fm,useRef:Qj,useState:function(){return fm(Xc)},useDebugValue:vx,useDeferredValue:function(e){var t=Vn();return dr===null?t.memoizedState=e:nC(t,dr.memoizedState,e)},useTransition:function(){var e=fm(Xc)[0],t=Vn().memoizedState;return[e,t]},useMutableSource:Vj,useSyncExternalStore:$j,useId:sC,unstable_isNewReconciler:!1};function Gn(e,t){if(e&&e.defaultProps){t=Vt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function n0(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Vt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Lh={isMounted:function(e){return(e=e._reactInternals)?Ja(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=qr(),s=zi(e),i=Ks(n,s);i.payload=t,r!=null&&(i.callback=r),t=Fi(e,i,s),t!==null&&(ts(t,e,s,n),Bd(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=qr(),s=zi(e),i=Ks(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Fi(e,i,s),t!==null&&(ts(t,e,s,n),Bd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=qr(),n=zi(e),s=Ks(r,n);s.tag=2,t!=null&&(s.callback=t),t=Fi(e,s,n),t!==null&&(ts(t,e,n,r),Bd(t,e,n))}};function aw(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!Wc(r,n)||!Wc(s,i):!0}function lC(e,t,r){var n=!1,s=Gi,i=t.contextType;return typeof i=="object"&&i!==null?i=Hn(i):(s=on(t)?Ba:Br.current,n=t.contextTypes,i=(n=n!=null)?qo(e,s):Gi),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ow(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Lh.enqueueReplaceState(t,t.state,null)}function s0(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},dx(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Hn(i):(i=on(t)?Ba:Br.current,s.context=qo(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(n0(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Lh.enqueueReplaceState(s,s.state,null),Df(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Xo(e,t){try{var r="",n=t;do r+=VI(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function hm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function i0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var gO=typeof WeakMap=="function"?WeakMap:Map;function cC(e,t,r){r=Ks(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Of||(Of=!0,m0=n),i0(e,t)},r}function uC(e,t,r){r=Ks(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){i0(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){i0(e,t),typeof n!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function lw(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new gO;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=DO.bind(null,e,t,r),t.then(e,e))}function cw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uw(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ks(-1,1),t.tag=2,Fi(r,t,1))),r.lanes|=1),e)}var yO=ai.ReactCurrentOwner,rn=!1;function Wr(e,t,r,n){t.child=e===null?Bj(t,null,r,n):Qo(t,e.child,r,n)}function dw(e,t,r,n,s){r=r.render;var i=t.ref;return Bo(t,s),n=gx(e,t,r,n,i,s),r=yx(),e!==null&&!rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ti(e,t,s)):(Ot&&r&&sx(t),t.flags|=1,Wr(e,t,n,s),t.child)}function fw(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Cx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,dC(e,t,i,n,s)):(e=Wd(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Wc,r(a,n)&&e.ref===t.ref)return ti(e,t,s)}return t.flags|=1,e=Ui(i,n),e.ref=t.ref,e.return=t,t.child=e}function dC(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Wc(i,n)&&e.ref===t.ref)if(rn=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(rn=!0);else return t.lanes=e.lanes,ti(e,t,s)}return a0(e,t,r,n,s)}function fC(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(Co,mn),mn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jt(Co,mn),mn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,jt(Co,mn),mn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,jt(Co,mn),mn|=n;return Wr(e,t,s,r),t.child}function hC(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function a0(e,t,r,n,s){var i=on(r)?Ba:Br.current;return i=qo(t,i),Bo(t,s),r=gx(e,t,r,n,i,s),n=yx(),e!==null&&!rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ti(e,t,s)):(Ot&&n&&sx(t),t.flags|=1,Wr(e,t,r,s),t.child)}function hw(e,t,r,n,s){if(on(r)){var i=!0;Nf(t)}else i=!1;if(Bo(t,s),t.stateNode===null)Hd(e,t),lC(t,r,n),s0(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Hn(u):(u=on(r)?Ba:Br.current,u=qo(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&ow(t,a,n,u),vi=!1;var h=t.memoizedState;a.state=h,Df(t,n,a,s),c=t.memoizedState,l!==n||h!==c||an.current||vi?(typeof d=="function"&&(n0(t,r,d,n),c=t.memoizedState),(l=vi||aw(t,r,l,n,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Uj(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Gn(t.type,l),a.props=u,f=t.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Hn(c):(c=on(r)?Ba:Br.current,c=qo(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&ow(t,a,n,c),vi=!1,h=t.memoizedState,a.state=h,Df(t,n,a,s);var g=t.memoizedState;l!==f||h!==g||an.current||vi?(typeof p=="function"&&(n0(t,r,p,n),g=t.memoizedState),(u=vi||aw(t,r,u,n,h,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return o0(e,t,r,n,i,s)}function o0(e,t,r,n,s,i){hC(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Xb(t,r,!1),ti(e,t,i);n=t.stateNode,yO.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Qo(t,e.child,null,i),t.child=Qo(t,null,l,i)):Wr(e,t,l,i),t.memoizedState=n.state,s&&Xb(t,r,!0),t.child}function pC(e){var t=e.stateNode;t.pendingContext?Zb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zb(e,t.context,!1),fx(e,t.containerInfo)}function pw(e,t,r,n,s){return Ko(),ax(s),t.flags|=256,Wr(e,t,r,n),t.child}var l0={dehydrated:null,treeContext:null,retryLane:0};function c0(e){return{baseLanes:e,cachePool:null,transitions:null}}function mC(e,t,r){var n=t.pendingProps,s=Bt.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),jt(Bt,s&1),e===null)return t0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=zh(a,n,0,null),e=Ma(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=c0(r),t.memoizedState=l0,e):bx(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return xO(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ui(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ui(l,i):(i=Ma(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?c0(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=l0,n}return i=e.child,e=i.sibling,n=Ui(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function bx(e,t){return t=zh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function dd(e,t,r,n){return n!==null&&ax(n),Qo(t,e.child,null,r),e=bx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xO(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=hm(Error(ue(422))),dd(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=zh({mode:"visible",children:n.children},s,0,null),i=Ma(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Qo(t,e.child,null,a),t.child.memoizedState=c0(a),t.memoizedState=l0,i);if(!(t.mode&1))return dd(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ue(419)),n=hm(i,n,void 0),dd(e,t,a,n)}if(l=(a&e.childLanes)!==0,rn||l){if(n=yr,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ei(e,s),ts(n,e,s,-1))}return jx(),n=hm(Error(ue(421))),dd(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=RO.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,yn=Li(s.nextSibling),vn=t,Ot=!0,Zn=null,e!==null&&(In[Mn++]=$s,In[Mn++]=Ws,In[Mn++]=za,$s=e.id,Ws=e.overflow,za=t),t=bx(t,n.children),t.flags|=4096,t)}function mw(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),r0(e.return,t,r)}function pm(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function gC(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Wr(e,t,n.children,r),n=Bt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mw(e,r,t);else if(e.tag===19)mw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(jt(Bt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Rf(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),pm(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Rf(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}pm(t,!0,r,null,i);break;case"together":pm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ti(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ha|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ue(153));if(t.child!==null){for(e=t.child,r=Ui(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ui(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function vO(e,t,r){switch(t.tag){case 3:pC(t),Ko();break;case 5:Hj(t);break;case 1:on(t.type)&&Nf(t);break;case 4:fx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;jt(Tf,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(jt(Bt,Bt.current&1),t.flags|=128,null):r&t.child.childLanes?mC(e,t,r):(jt(Bt,Bt.current&1),e=ti(e,t,r),e!==null?e.sibling:null);jt(Bt,Bt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return gC(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jt(Bt,Bt.current),n)break;return null;case 22:case 23:return t.lanes=0,fC(e,t,r)}return ti(e,t,r)}var yC,u0,xC,vC;yC=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};u0=function(){};xC=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ja(Cs.current);var i=null;switch(r){case"input":s=_g(e,s),n=_g(e,n),i=[];break;case"select":s=Vt({},s,{value:void 0}),n=Vt({},n,{value:void 0}),i=[];break;case"textarea":s=Og(e,s),n=Og(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Sf)}Lg(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&At("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};vC=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ll(e,t){if(!Ot)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function jr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function bO(e,t,r){var n=t.pendingProps;switch(ix(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(t),null;case 1:return on(t.type)&&Ef(),jr(t),null;case 3:return n=t.stateNode,Zo(),Rt(an),Rt(Br),px(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(cd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zn!==null&&(x0(Zn),Zn=null))),u0(e,t),jr(t),null;case 5:hx(t);var s=ja(Qc.current);if(r=t.type,e!==null&&t.stateNode!=null)xC(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ue(166));return jr(t),null}if(e=ja(Cs.current),cd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ks]=t,n[qc]=i,e=(t.mode&1)!==0,r){case"dialog":At("cancel",n),At("close",n);break;case"iframe":case"object":case"embed":At("load",n);break;case"video":case"audio":for(s=0;s<ac.length;s++)At(ac[s],n);break;case"source":At("error",n);break;case"img":case"image":case"link":At("error",n),At("load",n);break;case"details":At("toggle",n);break;case"input":Eb(n,i),At("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},At("invalid",n);break;case"textarea":jb(n,i),At("invalid",n)}Lg(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ld(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ld(n.textContent,l,e),s=["children",""+l]):Fc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&At("scroll",n)}switch(r){case"input":ed(n),Nb(n,i,!0);break;case"textarea":ed(n),Cb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Sf)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=GN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[ks]=t,e[qc]=n,yC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Fg(r,n),r){case"dialog":At("cancel",e),At("close",e),s=n;break;case"iframe":case"object":case"embed":At("load",e),s=n;break;case"video":case"audio":for(s=0;s<ac.length;s++)At(ac[s],e);s=n;break;case"source":At("error",e),s=n;break;case"img":case"image":case"link":At("error",e),At("load",e),s=n;break;case"details":At("toggle",e),s=n;break;case"input":Eb(e,n),s=_g(e,n),At("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Vt({},n,{value:void 0}),At("invalid",e);break;case"textarea":jb(e,n),s=Og(e,n),At("invalid",e);break;default:s=n}Lg(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?QN(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qN(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Bc(e,c):typeof c=="number"&&Bc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&At("scroll",e):c!=null&&$y(e,i,c,a))}switch(r){case"input":ed(e),Nb(e,n,!1);break;case"textarea":ed(e),Cb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Yi(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Oo(e,!!n.multiple,i,!1):n.defaultValue!=null&&Oo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Sf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jr(t),null;case 6:if(e&&t.stateNode!=null)vC(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ue(166));if(r=ja(Qc.current),ja(Cs.current),cd(t)){if(n=t.stateNode,r=t.memoizedProps,n[ks]=t,(i=n.nodeValue!==r)&&(e=vn,e!==null))switch(e.tag){case 3:ld(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ld(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ks]=t,t.stateNode=n}return jr(t),null;case 13:if(Rt(Bt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ot&&yn!==null&&t.mode&1&&!(t.flags&128))Lj(),Ko(),t.flags|=98560,i=!1;else if(i=cd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ue(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ue(317));i[ks]=t}else Ko(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jr(t),i=!1}else Zn!==null&&(x0(Zn),Zn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Bt.current&1?hr===0&&(hr=3):jx())),t.updateQueue!==null&&(t.flags|=4),jr(t),null);case 4:return Zo(),u0(e,t),e===null&&Yc(t.stateNode.containerInfo),jr(t),null;case 10:return cx(t.type._context),jr(t),null;case 17:return on(t.type)&&Ef(),jr(t),null;case 19:if(Rt(Bt),i=t.memoizedState,i===null)return jr(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)Ll(i,!1);else{if(hr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Rf(e),a!==null){for(t.flags|=128,Ll(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return jt(Bt,Bt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Xt()>Jo&&(t.flags|=128,n=!0,Ll(i,!1),t.lanes=4194304)}else{if(!n)if(e=Rf(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ll(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ot)return jr(t),null}else 2*Xt()-i.renderingStartTime>Jo&&r!==1073741824&&(t.flags|=128,n=!0,Ll(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xt(),t.sibling=null,r=Bt.current,jt(Bt,n?r&1|2:r&1),t):(jr(t),null);case 22:case 23:return Nx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?mn&1073741824&&(jr(t),t.subtreeFlags&6&&(t.flags|=8192)):jr(t),null;case 24:return null;case 25:return null}throw Error(ue(156,t.tag))}function wO(e,t){switch(ix(t),t.tag){case 1:return on(t.type)&&Ef(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zo(),Rt(an),Rt(Br),px(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hx(t),null;case 13:if(Rt(Bt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ue(340));Ko()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Bt),null;case 4:return Zo(),null;case 10:return cx(t.type._context),null;case 22:case 23:return Nx(),null;case 24:return null;default:return null}}var fd=!1,Mr=!1,kO=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function jo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Gt(e,t,n)}else r.current=null}function d0(e,t,r){try{r()}catch(n){Gt(e,t,n)}}var gw=!1;function SO(e,t){if(qg=bf,e=Ej(),nx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==i||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=a),h===i&&++d===n&&(c=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kg={focusedElem:e,selectionRange:r},bf=!1,Ne=t;Ne!==null;)if(t=Ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ne=e;else for(;Ne!==null;){t=Ne;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,b=g.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:Gn(t.type,y),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(k){Gt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Ne=e;break}Ne=t.return}return g=gw,gw=!1,g}function vc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&d0(t,r,i)}s=s.next}while(s!==n)}}function Fh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function f0(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function bC(e){var t=e.alternate;t!==null&&(e.alternate=null,bC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ks],delete t[qc],delete t[Xg],delete t[iO],delete t[aO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wC(e){return e.tag===5||e.tag===3||e.tag===4}function yw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function h0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Sf));else if(n!==4&&(e=e.child,e!==null))for(h0(e,t,r),e=e.sibling;e!==null;)h0(e,t,r),e=e.sibling}function p0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(p0(e,t,r),e=e.sibling;e!==null;)p0(e,t,r),e=e.sibling}var vr=null,qn=!1;function pi(e,t,r){for(r=r.child;r!==null;)kC(e,t,r),r=r.sibling}function kC(e,t,r){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(Dh,r)}catch{}switch(r.tag){case 5:Mr||jo(r,t);case 6:var n=vr,s=qn;vr=null,pi(e,t,r),vr=n,qn=s,vr!==null&&(qn?(e=vr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):vr.removeChild(r.stateNode));break;case 18:vr!==null&&(qn?(e=vr,r=r.stateNode,e.nodeType===8?om(e.parentNode,r):e.nodeType===1&&om(e,r),Vc(e)):om(vr,r.stateNode));break;case 4:n=vr,s=qn,vr=r.stateNode.containerInfo,qn=!0,pi(e,t,r),vr=n,qn=s;break;case 0:case 11:case 14:case 15:if(!Mr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&d0(r,t,a),s=s.next}while(s!==n)}pi(e,t,r);break;case 1:if(!Mr&&(jo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Gt(r,t,l)}pi(e,t,r);break;case 21:pi(e,t,r);break;case 22:r.mode&1?(Mr=(n=Mr)||r.memoizedState!==null,pi(e,t,r),Mr=n):pi(e,t,r);break;default:pi(e,t,r)}}function xw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new kO),t.forEach(function(n){var s=_O.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Wn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:vr=l.stateNode,qn=!1;break e;case 3:vr=l.stateNode.containerInfo,qn=!0;break e;case 4:vr=l.stateNode.containerInfo,qn=!0;break e}l=l.return}if(vr===null)throw Error(ue(160));kC(i,a,s),vr=null,qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Gt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)SC(t,e),t=t.sibling}function SC(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wn(t,e),hs(e),n&4){try{vc(3,e,e.return),Fh(3,e)}catch(y){Gt(e,e.return,y)}try{vc(5,e,e.return)}catch(y){Gt(e,e.return,y)}}break;case 1:Wn(t,e),hs(e),n&512&&r!==null&&jo(r,r.return);break;case 5:if(Wn(t,e),hs(e),n&512&&r!==null&&jo(r,r.return),e.flags&32){var s=e.stateNode;try{Bc(s,"")}catch(y){Gt(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&WN(s,i),Fg(l,a);var u=Fg(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?QN(s,f):d==="dangerouslySetInnerHTML"?qN(s,f):d==="children"?Bc(s,f):$y(s,d,f,u)}switch(l){case"input":Ig(s,i);break;case"textarea":YN(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Oo(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Oo(s,!!i.multiple,i.defaultValue,!0):Oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[qc]=i}catch(y){Gt(e,e.return,y)}}break;case 6:if(Wn(t,e),hs(e),n&4){if(e.stateNode===null)throw Error(ue(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){Gt(e,e.return,y)}}break;case 3:if(Wn(t,e),hs(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vc(t.containerInfo)}catch(y){Gt(e,e.return,y)}break;case 4:Wn(t,e),hs(e);break;case 13:Wn(t,e),hs(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Sx=Xt())),n&4&&xw(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Mr=(u=Mr)||d,Wn(t,e),Mr=u):Wn(t,e),hs(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ne=e,d=e.child;d!==null;){for(f=Ne=d;Ne!==null;){switch(h=Ne,p=h.child,h.tag){case 0:case 11:case 14:case 15:vc(4,h,h.return);break;case 1:jo(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Gt(n,r,y)}}break;case 5:jo(h,h.return);break;case 22:if(h.memoizedState!==null){bw(f);continue}}p!==null?(p.return=h,Ne=p):bw(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=KN("display",a))}catch(y){Gt(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){Gt(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Wn(t,e),hs(e),n&4&&xw(e);break;case 21:break;default:Wn(t,e),hs(e)}}function hs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(wC(r)){var n=r;break e}r=r.return}throw Error(ue(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Bc(s,""),n.flags&=-33);var i=yw(e);p0(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=yw(e);h0(e,l,a);break;default:throw Error(ue(161))}}catch(c){Gt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function EO(e,t,r){Ne=e,EC(e)}function EC(e,t,r){for(var n=(e.mode&1)!==0;Ne!==null;){var s=Ne,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||fd;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Mr;l=fd;var u=Mr;if(fd=a,(Mr=c)&&!u)for(Ne=s;Ne!==null;)a=Ne,c=a.child,a.tag===22&&a.memoizedState!==null?ww(s):c!==null?(c.return=a,Ne=c):ww(s);for(;i!==null;)Ne=i,EC(i),i=i.sibling;Ne=s,fd=l,Mr=u}vw(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ne=i):vw(e)}}function vw(e){for(;Ne!==null;){var t=Ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mr||Fh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Mr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Gn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&nw(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}nw(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Vc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}Mr||t.flags&512&&f0(t)}catch(h){Gt(t,t.return,h)}}if(t===e){Ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ne=r;break}Ne=t.return}}function bw(e){for(;Ne!==null;){var t=Ne;if(t===e){Ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ne=r;break}Ne=t.return}}function ww(e){for(;Ne!==null;){var t=Ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Fh(4,t)}catch(c){Gt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Gt(t,s,c)}}var i=t.return;try{f0(t)}catch(c){Gt(t,i,c)}break;case 5:var a=t.return;try{f0(t)}catch(c){Gt(t,a,c)}}}catch(c){Gt(t,t.return,c)}if(t===e){Ne=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ne=l;break}Ne=t.return}}var NO=Math.ceil,Mf=ai.ReactCurrentDispatcher,wx=ai.ReactCurrentOwner,Un=ai.ReactCurrentBatchConfig,ut=0,yr=null,or=null,wr=0,mn=0,Co=ra(0),hr=0,eu=null,Ha=0,Bh=0,kx=0,bc=null,en=null,Sx=0,Jo=1/0,Hs=null,Of=!1,m0=null,Bi=null,hd=!1,ji=null,Pf=0,wc=0,g0=null,Vd=-1,$d=0;function qr(){return ut&6?Xt():Vd!==-1?Vd:Vd=Xt()}function zi(e){return e.mode&1?ut&2&&wr!==0?wr&-wr:lO.transition!==null?($d===0&&($d=lj()),$d):(e=wt,e!==0||(e=window.event,e=e===void 0?16:mj(e.type)),e):1}function ts(e,t,r,n){if(50<wc)throw wc=0,g0=null,Error(ue(185));Nu(e,r,n),(!(ut&2)||e!==yr)&&(e===yr&&(!(ut&2)&&(Bh|=r),hr===4&&ki(e,wr)),ln(e,n),r===1&&ut===0&&!(t.mode&1)&&(Jo=Xt()+500,Oh&&na()))}function ln(e,t){var r=e.callbackNode;lM(e,t);var n=vf(e,e===yr?wr:0);if(n===0)r!==null&&Db(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Db(r),t===1)e.tag===0?oO(kw.bind(null,e)):Mj(kw.bind(null,e)),nO(function(){!(ut&6)&&na()}),r=null;else{switch(cj(n)){case 1:r=Ky;break;case 4:r=aj;break;case 16:r=xf;break;case 536870912:r=oj;break;default:r=xf}r=_C(r,NC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function NC(e,t){if(Vd=-1,$d=0,ut&6)throw Error(ue(327));var r=e.callbackNode;if(zo()&&e.callbackNode!==r)return null;var n=vf(e,e===yr?wr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Lf(e,n);else{t=n;var s=ut;ut|=2;var i=CC();(yr!==e||wr!==t)&&(Hs=null,Jo=Xt()+500,Ia(e,t));do try{TO();break}catch(l){jC(e,l)}while(!0);lx(),Mf.current=i,ut=s,or!==null?t=0:(yr=null,wr=0,t=hr)}if(t!==0){if(t===2&&(s=Vg(e),s!==0&&(n=s,t=y0(e,s))),t===1)throw r=eu,Ia(e,0),ki(e,n),ln(e,Xt()),r;if(t===6)ki(e,n);else{if(s=e.current.alternate,!(n&30)&&!jO(s)&&(t=Lf(e,n),t===2&&(i=Vg(e),i!==0&&(n=i,t=y0(e,i))),t===1))throw r=eu,Ia(e,0),ki(e,n),ln(e,Xt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(ue(345));case 2:ga(e,en,Hs);break;case 3:if(ki(e,n),(n&130023424)===n&&(t=Sx+500-Xt(),10<t)){if(vf(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){qr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Zg(ga.bind(null,e,en,Hs),t);break}ga(e,en,Hs);break;case 4:if(ki(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-es(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=Xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*NO(n/1960))-n,10<n){e.timeoutHandle=Zg(ga.bind(null,e,en,Hs),n);break}ga(e,en,Hs);break;case 5:ga(e,en,Hs);break;default:throw Error(ue(329))}}}return ln(e,Xt()),e.callbackNode===r?NC.bind(null,e):null}function y0(e,t){var r=bc;return e.current.memoizedState.isDehydrated&&(Ia(e,t).flags|=256),e=Lf(e,t),e!==2&&(t=en,en=r,t!==null&&x0(t)),e}function x0(e){en===null?en=e:en.push.apply(en,e)}function jO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!is(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ki(e,t){for(t&=~kx,t&=~Bh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-es(t),n=1<<r;e[r]=-1,t&=~n}}function kw(e){if(ut&6)throw Error(ue(327));zo();var t=vf(e,0);if(!(t&1))return ln(e,Xt()),null;var r=Lf(e,t);if(e.tag!==0&&r===2){var n=Vg(e);n!==0&&(t=n,r=y0(e,n))}if(r===1)throw r=eu,Ia(e,0),ki(e,t),ln(e,Xt()),r;if(r===6)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ga(e,en,Hs),ln(e,Xt()),null}function Ex(e,t){var r=ut;ut|=1;try{return e(t)}finally{ut=r,ut===0&&(Jo=Xt()+500,Oh&&na())}}function Va(e){ji!==null&&ji.tag===0&&!(ut&6)&&zo();var t=ut;ut|=1;var r=Un.transition,n=wt;try{if(Un.transition=null,wt=1,e)return e()}finally{wt=n,Un.transition=r,ut=t,!(ut&6)&&na()}}function Nx(){mn=Co.current,Rt(Co)}function Ia(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rO(r)),or!==null)for(r=or.return;r!==null;){var n=r;switch(ix(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ef();break;case 3:Zo(),Rt(an),Rt(Br),px();break;case 5:hx(n);break;case 4:Zo();break;case 13:Rt(Bt);break;case 19:Rt(Bt);break;case 10:cx(n.type._context);break;case 22:case 23:Nx()}r=r.return}if(yr=e,or=e=Ui(e.current,null),wr=mn=t,hr=0,eu=null,kx=Bh=Ha=0,en=bc=null,Na!==null){for(t=0;t<Na.length;t++)if(r=Na[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Na=null}return e}function jC(e,t){do{var r=or;try{if(lx(),zd.current=If,_f){for(var n=Ut.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}_f=!1}if(Ua=0,pr=dr=Ut=null,xc=!1,Zc=0,wx.current=null,r===null||r.return===null){hr=1,eu=t,or=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=wr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=cw(a);if(p!==null){p.flags&=-257,uw(p,a,l,i,t),p.mode&1&&lw(i,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){lw(i,u,t),jx();break e}c=Error(ue(426))}}else if(Ot&&l.mode&1){var b=cw(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),uw(b,a,l,i,t),ax(Xo(c,l));break e}}i=c=Xo(c,l),hr!==4&&(hr=2),bc===null?bc=[i]:bc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=cC(i,c,t);rw(i,v);break e;case 1:l=c;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Bi===null||!Bi.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=uC(i,l,t);rw(i,k);break e}}i=i.return}while(i!==null)}AC(r)}catch(S){t=S,or===r&&r!==null&&(or=r=r.return);continue}break}while(!0)}function CC(){var e=Mf.current;return Mf.current=If,e===null?If:e}function jx(){(hr===0||hr===3||hr===2)&&(hr=4),yr===null||!(Ha&268435455)&&!(Bh&268435455)||ki(yr,wr)}function Lf(e,t){var r=ut;ut|=2;var n=CC();(yr!==e||wr!==t)&&(Hs=null,Ia(e,t));do try{CO();break}catch(s){jC(e,s)}while(!0);if(lx(),ut=r,Mf.current=n,or!==null)throw Error(ue(261));return yr=null,wr=0,hr}function CO(){for(;or!==null;)TC(or)}function TO(){for(;or!==null&&!JI();)TC(or)}function TC(e){var t=RC(e.alternate,e,mn);e.memoizedProps=e.pendingProps,t===null?AC(e):or=t,wx.current=null}function AC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=wO(r,t),r!==null){r.flags&=32767,or=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hr=6,or=null;return}}else if(r=bO(r,t,mn),r!==null){or=r;return}if(t=t.sibling,t!==null){or=t;return}or=t=e}while(t!==null);hr===0&&(hr=5)}function ga(e,t,r){var n=wt,s=Un.transition;try{Un.transition=null,wt=1,AO(e,t,r,n)}finally{Un.transition=s,wt=n}return null}function AO(e,t,r,n){do zo();while(ji!==null);if(ut&6)throw Error(ue(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(cM(e,i),e===yr&&(or=yr=null,wr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||hd||(hd=!0,_C(xf,function(){return zo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Un.transition,Un.transition=null;var a=wt;wt=1;var l=ut;ut|=4,wx.current=null,SO(e,r),SC(r,e),KM(Kg),bf=!!qg,Kg=qg=null,e.current=r,EO(r),eM(),ut=l,wt=a,Un.transition=i}else e.current=r;if(hd&&(hd=!1,ji=e,Pf=s),i=e.pendingLanes,i===0&&(Bi=null),nM(r.stateNode),ln(e,Xt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Of)throw Of=!1,e=m0,m0=null,e;return Pf&1&&e.tag!==0&&zo(),i=e.pendingLanes,i&1?e===g0?wc++:(wc=0,g0=e):wc=0,na(),null}function zo(){if(ji!==null){var e=cj(Pf),t=Un.transition,r=wt;try{if(Un.transition=null,wt=16>e?16:e,ji===null)var n=!1;else{if(e=ji,ji=null,Pf=0,ut&6)throw Error(ue(331));var s=ut;for(ut|=4,Ne=e.current;Ne!==null;){var i=Ne,a=i.child;if(Ne.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ne=u;Ne!==null;){var d=Ne;switch(d.tag){case 0:case 11:case 15:vc(8,d,i)}var f=d.child;if(f!==null)f.return=d,Ne=f;else for(;Ne!==null;){d=Ne;var h=d.sibling,p=d.return;if(bC(d),d===u){Ne=null;break}if(h!==null){h.return=p,Ne=h;break}Ne=p}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Ne=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Ne=a;else e:for(;Ne!==null;){if(i=Ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ne=v;break e}Ne=i.return}}var x=e.current;for(Ne=x;Ne!==null;){a=Ne;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Ne=w;else e:for(a=x;Ne!==null;){if(l=Ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fh(9,l)}}catch(S){Gt(l,l.return,S)}if(l===a){Ne=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Ne=k;break e}Ne=l.return}}if(ut=s,na(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(Dh,e)}catch{}n=!0}return n}finally{wt=r,Un.transition=t}}return!1}function Sw(e,t,r){t=Xo(r,t),t=cC(e,t,1),e=Fi(e,t,1),t=qr(),e!==null&&(Nu(e,1,t),ln(e,t))}function Gt(e,t,r){if(e.tag===3)Sw(e,e,r);else for(;t!==null;){if(t.tag===3){Sw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Bi===null||!Bi.has(n))){e=Xo(r,e),e=uC(t,e,1),t=Fi(t,e,1),e=qr(),t!==null&&(Nu(t,1,e),ln(t,e));break}}t=t.return}}function DO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=qr(),e.pingedLanes|=e.suspendedLanes&r,yr===e&&(wr&r)===r&&(hr===4||hr===3&&(wr&130023424)===wr&&500>Xt()-Sx?Ia(e,0):kx|=r),ln(e,t)}function DC(e,t){t===0&&(e.mode&1?(t=nd,nd<<=1,!(nd&130023424)&&(nd=4194304)):t=1);var r=qr();e=ei(e,t),e!==null&&(Nu(e,t,r),ln(e,r))}function RO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),DC(e,r)}function _O(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(t),DC(e,r)}var RC;RC=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||an.current)rn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return rn=!1,vO(e,t,r);rn=!!(e.flags&131072)}else rn=!1,Ot&&t.flags&1048576&&Oj(t,Cf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Hd(e,t),e=t.pendingProps;var s=qo(t,Br.current);Bo(t,r),s=gx(null,t,n,e,s,r);var i=yx();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,on(n)?(i=!0,Nf(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dx(t),s.updater=Lh,t.stateNode=s,s._reactInternals=t,s0(t,n,e,r),t=o0(null,t,n,!0,i,r)):(t.tag=0,Ot&&i&&sx(t),Wr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Hd(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=MO(n),e=Gn(n,e),s){case 0:t=a0(null,t,n,e,r);break e;case 1:t=hw(null,t,n,e,r);break e;case 11:t=dw(null,t,n,e,r);break e;case 14:t=fw(null,t,n,Gn(n.type,e),r);break e}throw Error(ue(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Gn(n,s),a0(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Gn(n,s),hw(e,t,n,s,r);case 3:e:{if(pC(t),e===null)throw Error(ue(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Uj(e,t),Df(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Xo(Error(ue(423)),t),t=pw(e,t,n,r,s);break e}else if(n!==s){s=Xo(Error(ue(424)),t),t=pw(e,t,n,r,s);break e}else for(yn=Li(t.stateNode.containerInfo.firstChild),vn=t,Ot=!0,Zn=null,r=Bj(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ko(),n===s){t=ti(e,t,r);break e}Wr(e,t,n,r)}t=t.child}return t;case 5:return Hj(t),e===null&&t0(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Qg(n,s)?a=null:i!==null&&Qg(n,i)&&(t.flags|=32),hC(e,t),Wr(e,t,a,r),t.child;case 6:return e===null&&t0(t),null;case 13:return mC(e,t,r);case 4:return fx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Qo(t,null,n,r):Wr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Gn(n,s),dw(e,t,n,s,r);case 7:return Wr(e,t,t.pendingProps,r),t.child;case 8:return Wr(e,t,t.pendingProps.children,r),t.child;case 12:return Wr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,jt(Tf,n._currentValue),n._currentValue=a,i!==null)if(is(i.value,a)){if(i.children===s.children&&!an.current){t=ti(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ks(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),r0(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ue(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),r0(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Wr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Bo(t,r),s=Hn(s),n=n(s),t.flags|=1,Wr(e,t,n,r),t.child;case 14:return n=t.type,s=Gn(n,t.pendingProps),s=Gn(n.type,s),fw(e,t,n,s,r);case 15:return dC(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Gn(n,s),Hd(e,t),t.tag=1,on(n)?(e=!0,Nf(t)):e=!1,Bo(t,r),lC(t,n,s),s0(t,n,s,r),o0(null,t,n,!0,e,r);case 19:return gC(e,t,r);case 22:return fC(e,t,r)}throw Error(ue(156,t.tag))};function _C(e,t){return ij(e,t)}function IO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(e,t,r,n){return new IO(e,t,r,n)}function Cx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function MO(e){if(typeof e=="function")return Cx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yy)return 11;if(e===Gy)return 14}return 2}function Ui(e,t){var r=e.alternate;return r===null?(r=Ln(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Wd(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")Cx(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case yo:return Ma(r.children,s,i,t);case Wy:a=8,s|=8;break;case Tg:return e=Ln(12,r,t,s|2),e.elementType=Tg,e.lanes=i,e;case Ag:return e=Ln(13,r,t,s),e.elementType=Ag,e.lanes=i,e;case Dg:return e=Ln(19,r,t,s),e.elementType=Dg,e.lanes=i,e;case HN:return zh(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zN:a=10;break e;case UN:a=9;break e;case Yy:a=11;break e;case Gy:a=14;break e;case xi:a=16,n=null;break e}throw Error(ue(130,e==null?e:typeof e,""))}return t=Ln(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Ma(e,t,r,n){return e=Ln(7,e,n,t),e.lanes=r,e}function zh(e,t,r,n){return e=Ln(22,e,n,t),e.elementType=HN,e.lanes=r,e.stateNode={isHidden:!1},e}function mm(e,t,r){return e=Ln(6,e,null,t),e.lanes=r,e}function gm(e,t,r){return t=Ln(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function OO(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qp(0),this.expirationTimes=Qp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tx(e,t,r,n,s,i,a,l,c){return e=new OO(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ln(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},dx(i),e}function PO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:go,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function IC(e){if(!e)return Gi;e=e._reactInternals;e:{if(Ja(e)!==e||e.tag!==1)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(on(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ue(171))}if(e.tag===1){var r=e.type;if(on(r))return Ij(e,r,t)}return t}function MC(e,t,r,n,s,i,a,l,c){return e=Tx(r,n,!0,e,s,i,a,l,c),e.context=IC(null),r=e.current,n=qr(),s=zi(r),i=Ks(n,s),i.callback=t??null,Fi(r,i,s),e.current.lanes=s,Nu(e,s,n),ln(e,n),e}function Uh(e,t,r,n){var s=t.current,i=qr(),a=zi(s);return r=IC(r),t.context===null?t.context=r:t.pendingContext=r,t=Ks(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Fi(s,t,a),e!==null&&(ts(e,s,a,i),Bd(e,s,a)),a}function Ff(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ew(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ax(e,t){Ew(e,t),(e=e.alternate)&&Ew(e,t)}function LO(){return null}var OC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dx(e){this._internalRoot=e}Hh.prototype.render=Dx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ue(409));Uh(e,t,null,null)};Hh.prototype.unmount=Dx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Va(function(){Uh(null,e,null,null)}),t[Js]=null}};function Hh(e){this._internalRoot=e}Hh.prototype.unstable_scheduleHydration=function(e){if(e){var t=fj();e={blockedOn:null,target:e,priority:t};for(var r=0;r<wi.length&&t!==0&&t<wi[r].priority;r++);wi.splice(r,0,e),r===0&&pj(e)}};function Rx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nw(){}function FO(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Ff(a);i.call(u)}}var a=MC(t,n,e,0,null,!1,!1,"",Nw);return e._reactRootContainer=a,e[Js]=a.current,Yc(e.nodeType===8?e.parentNode:e),Va(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Ff(c);l.call(u)}}var c=Tx(e,0,!1,null,null,!1,!1,"",Nw);return e._reactRootContainer=c,e[Js]=c.current,Yc(e.nodeType===8?e.parentNode:e),Va(function(){Uh(t,c,r,n)}),c}function $h(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Ff(a);l.call(c)}}Uh(t,a,e,s)}else a=FO(r,t,e,s,n);return Ff(a)}uj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ic(t.pendingLanes);r!==0&&(Qy(t,r|1),ln(t,Xt()),!(ut&6)&&(Jo=Xt()+500,na()))}break;case 13:Va(function(){var n=ei(e,1);if(n!==null){var s=qr();ts(n,e,1,s)}}),Ax(e,1)}};Zy=function(e){if(e.tag===13){var t=ei(e,134217728);if(t!==null){var r=qr();ts(t,e,134217728,r)}Ax(e,134217728)}};dj=function(e){if(e.tag===13){var t=zi(e),r=ei(e,t);if(r!==null){var n=qr();ts(r,e,t,n)}Ax(e,t)}};fj=function(){return wt};hj=function(e,t){var r=wt;try{return wt=e,t()}finally{wt=r}};zg=function(e,t,r){switch(t){case"input":if(Ig(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Mh(n);if(!s)throw Error(ue(90));$N(n),Ig(n,s)}}}break;case"textarea":YN(e,r);break;case"select":t=r.value,t!=null&&Oo(e,!!r.multiple,t,!1)}};JN=Ex;ej=Va;var BO={usingClientEntryPoint:!1,Events:[Cu,wo,Mh,ZN,XN,Ex]},Fl={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zO={bundleType:Fl.bundleType,version:Fl.version,rendererPackageName:Fl.rendererPackageName,rendererConfig:Fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nj(e),e===null?null:e.stateNode},findFiberByHostInstance:Fl.findFiberByHostInstance||LO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{Dh=pd.inject(zO),js=pd}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BO;jn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rx(t))throw Error(ue(200));return PO(e,t,null,r)};jn.createRoot=function(e,t){if(!Rx(e))throw Error(ue(299));var r=!1,n="",s=OC;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Tx(e,1,!1,null,null,r,!1,n,s),e[Js]=t.current,Yc(e.nodeType===8?e.parentNode:e),new Dx(t)};jn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ue(188)):(e=Object.keys(e).join(","),Error(ue(268,e)));return e=nj(t),e=e===null?null:e.stateNode,e};jn.flushSync=function(e){return Va(e)};jn.hydrate=function(e,t,r){if(!Vh(t))throw Error(ue(200));return $h(null,e,t,!0,r)};jn.hydrateRoot=function(e,t,r){if(!Rx(e))throw Error(ue(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=OC;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=MC(t,null,e,1,r??null,s,!1,i,a),e[Js]=t.current,Yc(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Hh(t)};jn.render=function(e,t,r){if(!Vh(t))throw Error(ue(200));return $h(null,e,t,!1,r)};jn.unmountComponentAtNode=function(e){if(!Vh(e))throw Error(ue(40));return e._reactRootContainer?(Va(function(){$h(null,null,e,!1,function(){e._reactRootContainer=null,e[Js]=null})}),!0):!1};jn.unstable_batchedUpdates=Ex;jn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Vh(r))throw Error(ue(200));if(e==null||e._reactInternals===void 0)throw Error(ue(38));return $h(e,t,r,!1,n)};jn.version="18.3.1-next-f1338f8080-20240426";function PC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PC)}catch(e){console.error(e)}}PC(),PN.exports=jn;var rs=PN.exports;const kc=ea(rs);var LC,jw=rs;LC=jw.createRoot,jw.hydrateRoot;const UO=e=>e.trim()?e.split(",").map(t=>t.trim().toLowerCase()).filter(Boolean):[],FC=e=>(e==null?void 0:e.trim().toLowerCase())??"",HO=(e,t)=>{if(!e)return!1;if(e==="*"||e==="all")return!0;if(e.endsWith("*"))return t.startsWith(e.slice(0,-1));if(e.startsWith("*"))return t.endsWith(e.slice(1));if(e.includes("*")){const[r,n]=e.split("*");return t.startsWith(r)&&t.endsWith(n)}return t===e||t.includes(e)},VO="linz-chat,onboarding-tour,notifications,auth,onboarding-stream,onboarding,onboarding-stream",ym="true".toLowerCase(),$O=ym==="true"||ym==="1"||ym==="yes",_x=UO(VO),WO=_x.some(e=>e==="*"||e==="all"),YO=_x.length>0,GO=$O,BC=(e,t)=>!GO||!YO?!1:WO?!0:e?_x.some(r=>HO(r,e)):!1,qO=(e,t)=>e?["["+e+"]",...t]:t,md=(e,t,r)=>{const n=FC(t);if(!BC(n))return;const s=qO(t,r);(console[e]??console.log)(...s)},xr=e=>{const t=FC(e);return{element:e,enabled:BC(t),log:(...r)=>md("log",e,r),info:(...r)=>md("info",e,r),warn:(...r)=>md("warn",e,r),error:(...r)=>md("error",e,r)}};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tu(){return tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tu.apply(this,arguments)}var Ci;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ci||(Ci={}));const Cw="popstate";function KO(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:a,hash:l}=n.location;return v0("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Bf(s)}return ZO(t,r,null,e)}function Ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QO(){return Math.random().toString(36).substr(2,8)}function Tw(e,t){return{usr:e.state,key:e.key,idx:t}}function v0(e,t,r,n){return r===void 0&&(r=null),tu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?gl(t):t,{state:r,key:t&&t.key||n||QO()})}function Bf(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function gl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function ZO(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=Ci.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(tu({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=Ci.Pop;let b=d(),v=b==null?null:b-u;u=b,c&&c({action:l,location:y.location,delta:v})}function h(b,v){l=Ci.Push;let x=v0(y.location,b,v);u=d()+1;let w=Tw(x,u),k=y.createHref(x);try{a.pushState(w,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(k)}i&&c&&c({action:l,location:y.location,delta:1})}function p(b,v){l=Ci.Replace;let x=v0(y.location,b,v);u=d();let w=Tw(x,u),k=y.createHref(x);a.replaceState(w,"",k),i&&c&&c({action:l,location:y.location,delta:0})}function g(b){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof b=="string"?b:Bf(b);return x=x.replace(/ $/,"%20"),Ht(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let y={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Cw,f),c=b,()=>{s.removeEventListener(Cw,f),c=null}},createHref(b){return t(s,b)},createURL:g,encodeLocation(b){let v=g(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(b){return a.go(b)}};return y}var Aw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Aw||(Aw={}));function XO(e,t,r){return r===void 0&&(r="/"),JO(e,t,r)}function JO(e,t,r,n){let s=typeof t=="string"?gl(t):t,i=el(s.pathname||"/",r);if(i==null)return null;let a=UC(e);eP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=dP(i);l=cP(a[c],u)}return l}function UC(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Ht(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Hi([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Ht(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),UC(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:oP(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of HC(i.path))s(i,a,c)}),t}function HC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=HC(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function eP(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:lP(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const tP=/^:[\w-]+$/,rP=3,nP=2,sP=1,iP=10,aP=-2,Dw=e=>e==="*";function oP(e,t){let r=e.split("/"),n=r.length;return r.some(Dw)&&(n+=aP),t&&(n+=nP),r.filter(s=>!Dw(s)).reduce((s,i)=>s+(tP.test(i)?rP:i===""?sP:iP),n)}function lP(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function cP(e,t,r){let{routesMeta:n}=e,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=b0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Hi([i,f.pathname]),pathnameBase:mP(Hi([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Hi([i,f.pathnameBase]))}return a}function b0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=uP(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let y=l[f]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=l[f];return p&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function uP(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),zC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function dP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function el(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function fP(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?gl(e):e;return{pathname:r?r.startsWith("/")?r:hP(r,t):t,search:gP(n),hash:yP(s)}}function hP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function xm(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pP(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ix(e,t){let r=pP(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Mx(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=gl(e):(s=tu({},e),Ht(!s.pathname||!s.pathname.includes("?"),xm("?","pathname","search",s)),Ht(!s.pathname||!s.pathname.includes("#"),xm("#","pathname","hash",s)),Ht(!s.search||!s.search.includes("#"),xm("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let f=t.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=fP(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Hi=e=>e.join("/").replace(/\/\/+/g,"/"),mP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function xP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const VC=["post","put","patch","delete"];new Set(VC);const vP=["get",...VC];new Set(vP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ru.apply(this,arguments)}const Wh=m.createContext(null),$C=m.createContext(null),oi=m.createContext(null),Yh=m.createContext(null),_s=m.createContext({outlet:null,matches:[],isDataRoute:!1}),WC=m.createContext(null);function bP(e,t){let{relative:r}=t===void 0?{}:t;yl()||Ht(!1);let{basename:n,navigator:s}=m.useContext(oi),{hash:i,pathname:a,search:l}=Gh(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:Hi([n,a])),s.createHref({pathname:c,search:l,hash:i})}function yl(){return m.useContext(Yh)!=null}function Tn(){return yl()||Ht(!1),m.useContext(Yh).location}function YC(e){m.useContext(oi).static||m.useLayoutEffect(e)}function $n(){let{isDataRoute:e}=m.useContext(_s);return e?OP():wP()}function wP(){yl()||Ht(!1);let e=m.useContext(Wh),{basename:t,future:r,navigator:n}=m.useContext(oi),{matches:s}=m.useContext(_s),{pathname:i}=Tn(),a=JSON.stringify(Ix(s,r.v7_relativeSplatPath)),l=m.useRef(!1);return YC(()=>{l.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=Mx(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Hi([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,a,i,e])}const kP=m.createContext(null);function SP(e){let t=m.useContext(_s).outlet;return t&&m.createElement(kP.Provider,{value:e},t)}function GC(){let{matches:e}=m.useContext(_s),t=e[e.length-1];return t?t.params:{}}function Gh(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=m.useContext(oi),{matches:s}=m.useContext(_s),{pathname:i}=Tn(),a=JSON.stringify(Ix(s,n.v7_relativeSplatPath));return m.useMemo(()=>Mx(e,JSON.parse(a),i,r==="path"),[e,a,i,r])}function EP(e,t){return NP(e,t)}function NP(e,t,r,n){yl()||Ht(!1);let{navigator:s}=m.useContext(oi),{matches:i}=m.useContext(_s),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Tn(),d;if(t){var f;let b=typeof t=="string"?gl(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Ht(!1),d=b}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=XO(e,{pathname:p}),y=DP(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Hi([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Hi([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&y?m.createElement(Yh.Provider,{value:{location:ru({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ci.Pop}},y):y}function jP(){let e=MP(),t=xP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:s},r):null,null)}const CP=m.createElement(jP,null);class TP extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?m.createElement(_s.Provider,{value:this.props.routeContext},m.createElement(WC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AP(e){let{routeContext:t,match:r,children:n}=e,s=m.useContext(Wh);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(_s.Provider,{value:t},n)}function DP(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Ht(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,h)=>{let p,g=!1,y=null,b=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||CP,c&&(u<0&&h===0?(PP("route-fallback"),g=!0,b=null):u===h&&(g=!0,b=f.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,h+1)),x=()=>{let w;return p?w=y:g?w=b:f.route.Component?w=m.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,m.createElement(AP,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?m.createElement(TP,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var qC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qC||{}),KC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(KC||{});function RP(e){let t=m.useContext(Wh);return t||Ht(!1),t}function _P(e){let t=m.useContext($C);return t||Ht(!1),t}function IP(e){let t=m.useContext(_s);return t||Ht(!1),t}function QC(e){let t=IP(),r=t.matches[t.matches.length-1];return r.route.id||Ht(!1),r.route.id}function MP(){var e;let t=m.useContext(WC),r=_P(),n=QC();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function OP(){let{router:e}=RP(qC.UseNavigateStable),t=QC(KC.UseNavigateStable),r=m.useRef(!1);return YC(()=>{r.current=!0}),m.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ru({fromRouteId:t},i)))},[e,t])}const Rw={};function PP(e,t,r){Rw[e]||(Rw[e]=!0)}function LP(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function _w(e){let{to:t,replace:r,state:n,relative:s}=e;yl()||Ht(!1);let{future:i,static:a}=m.useContext(oi),{matches:l}=m.useContext(_s),{pathname:c}=Tn(),u=$n(),d=Mx(t,Ix(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function FP(e){return SP(e.context)}function Ge(e){Ht(!1)}function BP(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ci.Pop,navigator:i,static:a=!1,future:l}=e;yl()&&Ht(!1);let c=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:a,future:ru({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=gl(n));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:g="default"}=n,y=m.useMemo(()=>{let b=el(d,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:p,key:g},navigationType:s}},[c,d,f,h,p,g,s]);return y==null?null:m.createElement(oi.Provider,{value:u},m.createElement(Yh.Provider,{children:r,value:y}))}function zP(e){let{children:t,location:r}=e;return EP(w0(t),r)}new Promise(()=>{});function w0(e,t){t===void 0&&(t=[]);let r=[];return m.Children.forEach(e,(n,s)=>{if(!m.isValidElement(n))return;let i=[...t,s];if(n.type===m.Fragment){r.push.apply(r,w0(n.props.children,i));return}n.type!==Ge&&Ht(!1),!n.props.index||!n.props.children||Ht(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=w0(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zf(){return zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zf.apply(this,arguments)}function ZC(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function UP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function HP(e,t){return e.button===0&&(!t||t==="_self")&&!UP(e)}function k0(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function VP(e,t){let r=k0(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const $P=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],WP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],YP="6";try{window.__reactRouterVersion=YP}catch{}const GP=m.createContext({isTransitioning:!1}),qP="startTransition",Iw=DI[qP];function KP(e){let{basename:t,children:r,future:n,window:s}=e,i=m.useRef();i.current==null&&(i.current=KO({window:s,v5Compat:!0}));let a=i.current,[l,c]=m.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=m.useCallback(f=>{u&&Iw?Iw(()=>c(f)):c(f)},[c,u]);return m.useLayoutEffect(()=>a.listen(d),[a,d]),m.useEffect(()=>LP(n),[n]),m.createElement(BP,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const QP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kr=m.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=ZC(t,$P),{basename:p}=m.useContext(oi),g,y=!1;if(typeof u=="string"&&ZP.test(u)&&(g=u,QP))try{let w=new URL(window.location.href),k=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=el(k.pathname,p);k.origin===w.origin&&S!=null?u=S+k.search+k.hash:y=!0}catch{}let b=bP(u,{relative:s}),v=e3(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function x(w){n&&n(w),w.defaultPrevented||v(w)}return m.createElement("a",zf({},h,{href:g||b,onClick:y||i?n:x,ref:r,target:c}))}),XP=m.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=t,f=ZC(t,WP),h=Gh(c,{relative:f.relative}),p=Tn(),g=m.useContext($C),{navigator:y,basename:b}=m.useContext(oi),v=g!=null&&t3(h)&&u===!0,x=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,w=p.pathname,k=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(w=w.toLowerCase(),k=k?k.toLowerCase():null,x=x.toLowerCase()),k&&b&&(k=el(k,b)||k);const S=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let E=w===x||!a&&w.startsWith(x)&&w.charAt(S)==="/",N=k!=null&&(k===x||!a&&k.startsWith(x)&&k.charAt(x.length)==="/"),j={isActive:E,isPending:N,isTransitioning:v},T=E?n:void 0,C;typeof i=="function"?C=i(j):C=[i,E?"active":null,N?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let _=typeof l=="function"?l(j):l;return m.createElement(kr,zf({},f,{"aria-current":T,className:C,ref:r,style:_,to:c,viewTransition:u}),typeof d=="function"?d(j):d)});var S0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(S0||(S0={}));var Mw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Mw||(Mw={}));function JP(e){let t=m.useContext(Wh);return t||Ht(!1),t}function e3(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=$n(),u=Tn(),d=Gh(e,{relative:a});return m.useCallback(f=>{if(HP(f,r)){f.preventDefault();let h=n!==void 0?n:Bf(u)===Bf(d);c(e,{replace:h,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,n,s,r,e,i,a,l])}function qh(e){let t=m.useRef(k0(e)),r=m.useRef(!1),n=Tn(),s=m.useMemo(()=>VP(n.search,r.current?null:t.current),[n.search]),i=$n(),a=m.useCallback((l,c)=>{const u=k0(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,a]}function t3(e,t){t===void 0&&(t={});let r=m.useContext(GP);r==null&&Ht(!1);let{basename:n}=JP(S0.useViewTransitionState),s=Gh(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=el(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=el(r.nextLocation.pathname,n)||r.nextLocation.pathname;return b0(s.pathname,a)!=null||b0(s.pathname,i)!=null}function XC(e,t){return function(){return e.apply(t,arguments)}}const{toString:r3}=Object.prototype,{getPrototypeOf:Ox}=Object,{iterator:Kh,toStringTag:JC}=Symbol,Qh=(e=>t=>{const r=r3.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ls=e=>(e=e.toLowerCase(),t=>Qh(t)===e),Zh=e=>t=>typeof t===e,{isArray:xl}=Array,nu=Zh("undefined");function Au(e){return e!==null&&!nu(e)&&e.constructor!==null&&!nu(e.constructor)&&cn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const eT=ls("ArrayBuffer");function n3(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&eT(e.buffer),t}const s3=Zh("string"),cn=Zh("function"),tT=Zh("number"),Du=e=>e!==null&&typeof e=="object",i3=e=>e===!0||e===!1,Yd=e=>{if(Qh(e)!=="object")return!1;const t=Ox(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(JC in e)&&!(Kh in e)},a3=e=>{if(!Du(e)||Au(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},o3=ls("Date"),l3=ls("File"),c3=ls("Blob"),u3=ls("FileList"),d3=e=>Du(e)&&cn(e.pipe),f3=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||cn(e.append)&&((t=Qh(e))==="formdata"||t==="object"&&cn(e.toString)&&e.toString()==="[object FormData]"))},h3=ls("URLSearchParams"),[p3,m3,g3,y3]=["ReadableStream","Request","Response","Headers"].map(ls),x3=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ru(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),xl(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(Au(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(n=0;n<a;n++)l=i[n],t.call(null,e[l],l,e)}}function rT(e,t){if(Au(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const Ca=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nT=e=>!nu(e)&&e!==Ca;function E0(){const{caseless:e}=nT(this)&&this||{},t={},r=(n,s)=>{const i=e&&rT(t,s)||s;Yd(t[i])&&Yd(n)?t[i]=E0(t[i],n):Yd(n)?t[i]=E0({},n):xl(n)?t[i]=n.slice():t[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Ru(arguments[n],r);return t}const v3=(e,t,r,{allOwnKeys:n}={})=>(Ru(t,(s,i)=>{r&&cn(s)?e[i]=XC(s,r):e[i]=s},{allOwnKeys:n}),e),b3=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),w3=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},k3=(e,t,r,n)=>{let s,i,a;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],(!n||n(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=r!==!1&&Ox(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},S3=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},E3=e=>{if(!e)return null;if(xl(e))return e;let t=e.length;if(!tT(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},N3=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ox(Uint8Array)),j3=(e,t)=>{const n=(e&&e[Kh]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},C3=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},T3=ls("HTMLFormElement"),A3=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Ow=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),D3=ls("RegExp"),sT=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Ru(r,(s,i)=>{let a;(a=t(s,i,e))!==!1&&(n[i]=a||s)}),Object.defineProperties(e,n)},R3=e=>{sT(e,(t,r)=>{if(cn(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(cn(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},_3=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return xl(e)?n(e):n(String(e).split(t)),r},I3=()=>{},M3=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function O3(e){return!!(e&&cn(e.append)&&e[JC]==="FormData"&&e[Kh])}const P3=e=>{const t=new Array(10),r=(n,s)=>{if(Du(n)){if(t.indexOf(n)>=0)return;if(Au(n))return n;if(!("toJSON"in n)){t[s]=n;const i=xl(n)?[]:{};return Ru(n,(a,l)=>{const c=r(a,s+1);!nu(c)&&(i[l]=c)}),t[s]=void 0,i}}return n};return r(e,0)},L3=ls("AsyncFunction"),F3=e=>e&&(Du(e)||cn(e))&&cn(e.then)&&cn(e.catch),iT=((e,t)=>e?setImmediate:t?((r,n)=>(Ca.addEventListener("message",({source:s,data:i})=>{s===Ca&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),Ca.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",cn(Ca.postMessage)),B3=typeof queueMicrotask<"u"?queueMicrotask.bind(Ca):typeof process<"u"&&process.nextTick||iT,z3=e=>e!=null&&cn(e[Kh]),G={isArray:xl,isArrayBuffer:eT,isBuffer:Au,isFormData:f3,isArrayBufferView:n3,isString:s3,isNumber:tT,isBoolean:i3,isObject:Du,isPlainObject:Yd,isEmptyObject:a3,isReadableStream:p3,isRequest:m3,isResponse:g3,isHeaders:y3,isUndefined:nu,isDate:o3,isFile:l3,isBlob:c3,isRegExp:D3,isFunction:cn,isStream:d3,isURLSearchParams:h3,isTypedArray:N3,isFileList:u3,forEach:Ru,merge:E0,extend:v3,trim:x3,stripBOM:b3,inherits:w3,toFlatObject:k3,kindOf:Qh,kindOfTest:ls,endsWith:S3,toArray:E3,forEachEntry:j3,matchAll:C3,isHTMLForm:T3,hasOwnProperty:Ow,hasOwnProp:Ow,reduceDescriptors:sT,freezeMethods:R3,toObjectSet:_3,toCamelCase:A3,noop:I3,toFiniteNumber:M3,findKey:rT,global:Ca,isContextDefined:nT,isSpecCompliantForm:O3,toJSONObject:P3,isAsyncFn:L3,isThenable:F3,setImmediate:iT,asap:B3,isIterable:z3};function qe(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}G.inherits(qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const aT=qe.prototype,oT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{oT[e]={value:e}});Object.defineProperties(qe,oT);Object.defineProperty(aT,"isAxiosError",{value:!0});qe.from=(e,t,r,n,s,i)=>{const a=Object.create(aT);return G.toFlatObject(e,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),qe.call(a,e.message,t,r,n,s),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const U3=null;function N0(e){return G.isPlainObject(e)||G.isArray(e)}function lT(e){return G.endsWith(e,"[]")?e.slice(0,-2):e}function Pw(e,t,r){return e?e.concat(t).map(function(s,i){return s=lT(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function H3(e){return G.isArray(e)&&!e.some(N0)}const V3=G.toFlatObject(G,{},null,function(t){return/^is[A-Z]/.test(t)});function Xh(e,t,r){if(!G.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=G.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!G.isUndefined(b[y])});const n=r.metaTokens,s=r.visitor||d,i=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(t);if(!G.isFunction(s))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(G.isDate(g))return g.toISOString();if(G.isBoolean(g))return g.toString();if(!c&&G.isBlob(g))throw new qe("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(g)||G.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,y,b){let v=g;if(g&&!b&&typeof g=="object"){if(G.endsWith(y,"{}"))y=n?y:y.slice(0,-2),g=JSON.stringify(g);else if(G.isArray(g)&&H3(g)||(G.isFileList(g)||G.endsWith(y,"[]"))&&(v=G.toArray(g)))return y=lT(y),v.forEach(function(w,k){!(G.isUndefined(w)||w===null)&&t.append(a===!0?Pw([y],k,i):a===null?y:y+"[]",u(w))}),!1}return N0(g)?!0:(t.append(Pw(b,y,i),u(g)),!1)}const f=[],h=Object.assign(V3,{defaultVisitor:d,convertValue:u,isVisitable:N0});function p(g,y){if(!G.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(g),G.forEach(g,function(v,x){(!(G.isUndefined(v)||v===null)&&s.call(t,v,G.isString(x)?x.trim():x,y,h))===!0&&p(v,y?y.concat(x):[x])}),f.pop()}}if(!G.isObject(e))throw new TypeError("data must be an object");return p(e),t}function Lw(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Px(e,t){this._pairs=[],e&&Xh(e,this,t)}const cT=Px.prototype;cT.append=function(t,r){this._pairs.push([t,r])};cT.toString=function(t){const r=t?function(n){return t.call(this,n,Lw)}:Lw;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function $3(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function uT(e,t,r){if(!t)return e;const n=r&&r.encode||$3;G.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=G.isURLSearchParams(t)?t.toString():new Px(t,r).toString(n),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Fw{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){G.forEach(this.handlers,function(n){n!==null&&t(n)})}}const dT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},W3=typeof URLSearchParams<"u"?URLSearchParams:Px,Y3=typeof FormData<"u"?FormData:null,G3=typeof Blob<"u"?Blob:null,q3={isBrowser:!0,classes:{URLSearchParams:W3,FormData:Y3,Blob:G3},protocols:["http","https","file","blob","url","data"]},Lx=typeof window<"u"&&typeof document<"u",j0=typeof navigator=="object"&&navigator||void 0,K3=Lx&&(!j0||["ReactNative","NativeScript","NS"].indexOf(j0.product)<0),Q3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Z3=Lx&&window.location.href||"http://localhost",X3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Lx,hasStandardBrowserEnv:K3,hasStandardBrowserWebWorkerEnv:Q3,navigator:j0,origin:Z3},Symbol.toStringTag,{value:"Module"})),Or={...X3,...q3};function J3(e,t){return Xh(e,new Or.classes.URLSearchParams,{visitor:function(r,n,s,i){return Or.isNode&&G.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function eL(e){return G.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function tL(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function fT(e){function t(r,n,s,i){let a=r[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=r.length;return a=!a&&G.isArray(s)?s.length:a,c?(G.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!l):((!s[a]||!G.isObject(s[a]))&&(s[a]=[]),t(r,n,s[a],i)&&G.isArray(s[a])&&(s[a]=tL(s[a])),!l)}if(G.isFormData(e)&&G.isFunction(e.entries)){const r={};return G.forEachEntry(e,(n,s)=>{t(eL(n),s,r,0)}),r}return null}function rL(e,t,r){if(G.isString(e))try{return(t||JSON.parse)(e),G.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const _u={transitional:dT,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=G.isObject(t);if(i&&G.isHTMLForm(t)&&(t=new FormData(t)),G.isFormData(t))return s?JSON.stringify(fT(t)):t;if(G.isArrayBuffer(t)||G.isBuffer(t)||G.isStream(t)||G.isFile(t)||G.isBlob(t)||G.isReadableStream(t))return t;if(G.isArrayBufferView(t))return t.buffer;if(G.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return J3(t,this.formSerializer).toString();if((l=G.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Xh(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),rL(t)):t}],transformResponse:[function(t){const r=this.transitional||_u.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(G.isResponse(t)||G.isReadableStream(t))return t;if(t&&G.isString(t)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?qe.from(l,qe.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Or.classes.FormData,Blob:Or.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],e=>{_u.headers[e]={}});const nL=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sL=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||t[r]&&nL[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Bw=Symbol("internals");function Bl(e){return e&&String(e).trim().toLowerCase()}function Gd(e){return e===!1||e==null?e:G.isArray(e)?e.map(Gd):String(e)}function iL(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const aL=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function vm(e,t,r,n,s){if(G.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!G.isString(t)){if(G.isString(n))return t.indexOf(n)!==-1;if(G.isRegExp(n))return n.test(t)}}function oL(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function lL(e,t){const r=G.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,a){return this[n].call(this,t,s,i,a)},configurable:!0})})}let un=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(l,c,u){const d=Bl(c);if(!d)throw new Error("header name must be a non-empty string");const f=G.findKey(s,d);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=Gd(l))}const a=(l,c)=>G.forEach(l,(u,d)=>i(u,d,c));if(G.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(G.isString(t)&&(t=t.trim())&&!aL(t))a(sL(t),r);else if(G.isObject(t)&&G.isIterable(t)){let l={},c,u;for(const d of t){if(!G.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?G.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}a(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=Bl(t),t){const n=G.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return iL(s);if(G.isFunction(r))return r.call(this,s,n);if(G.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Bl(t),t){const n=G.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||vm(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(a){if(a=Bl(a),a){const l=G.findKey(n,a);l&&(!r||vm(n,n[l],l,r))&&(delete n[l],s=!0)}}return G.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||vm(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return G.forEach(this,(s,i)=>{const a=G.findKey(n,i);if(a){r[a]=Gd(s),delete r[i];return}const l=t?oL(i):String(i).trim();l!==i&&delete r[i],r[l]=Gd(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return G.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&G.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[Bw]=this[Bw]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=Bl(a);n[l]||(lL(s,a),n[l]=!0)}return G.isArray(t)?t.forEach(i):i(t),this}};un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(un.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});G.freezeMethods(un);function bm(e,t){const r=this||_u,n=t||r,s=un.from(n.headers);let i=n.data;return G.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function hT(e){return!!(e&&e.__CANCEL__)}function vl(e,t,r){qe.call(this,e??"canceled",qe.ERR_CANCELED,t,r),this.name="CanceledError"}G.inherits(vl,qe,{__CANCEL__:!0});function pT(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new qe("Request failed with status code "+r.status,[qe.ERR_BAD_REQUEST,qe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function cL(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function uL(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,a;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=n[i];a||(a=u),r[s]=c,n[s]=u;let f=i,h=0;for(;f!==s;)h+=r[f++],f=f%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-a<t)return;const p=d&&u-d;return p?Math.round(h*1e3/p):void 0}}function dL(e,t){let r=0,n=1e3/t,s,i;const a=(u,d=Date.now())=>{r=d,s=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),f=d-r;f>=n?a(u,d):(s=u,i||(i=setTimeout(()=>{i=null,a(s)},n-f)))},()=>s&&a(s)]}const Uf=(e,t,r=3)=>{let n=0;const s=uL(50,250);return dL(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-n,u=s(c),d=a<=l;n=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},r)},zw=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Uw=e=>(...t)=>G.asap(()=>e(...t)),fL=Or.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Or.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Or.origin),Or.navigator&&/(msie|trident)/i.test(Or.navigator.userAgent)):()=>!0,hL=Or.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const a=[e+"="+encodeURIComponent(t)];G.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),G.isString(n)&&a.push("path="+n),G.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function mL(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function mT(e,t,r){let n=!pL(t);return e&&(n||r==!1)?mL(e,t):t}const Hw=e=>e instanceof un?{...e}:e;function $a(e,t){t=t||{};const r={};function n(u,d,f,h){return G.isPlainObject(u)&&G.isPlainObject(d)?G.merge.call({caseless:h},u,d):G.isPlainObject(d)?G.merge({},d):G.isArray(d)?d.slice():d}function s(u,d,f,h){if(G.isUndefined(d)){if(!G.isUndefined(u))return n(void 0,u,f,h)}else return n(u,d,f,h)}function i(u,d){if(!G.isUndefined(d))return n(void 0,d)}function a(u,d){if(G.isUndefined(d)){if(!G.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,f){if(f in t)return n(u,d);if(f in e)return n(void 0,u)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,f)=>s(Hw(u),Hw(d),f,!0)};return G.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||s,h=f(e[d],t[d],d);G.isUndefined(h)&&f!==l||(r[d]=h)}),r}const gT=e=>{const t=$a({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=t;t.headers=a=un.from(a),t.url=uT(mT(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(G.isFormData(r)){if(Or.hasStandardBrowserEnv||Or.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Or.hasStandardBrowserEnv&&(n&&G.isFunction(n)&&(n=n(t)),n||n!==!1&&fL(t.url))){const u=s&&i&&hL.read(i);u&&a.set(s,u)}return t},gL=typeof XMLHttpRequest<"u",yL=gL&&function(e){return new Promise(function(r,n){const s=gT(e);let i=s.data;const a=un.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,f,h,p,g;function y(){p&&p(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function v(){if(!b)return;const w=un.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:e,request:b};pT(function(N){r(N),y()},function(N){n(N),y()},S),b=null}"onloadend"in b?b.onloadend=v:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(v)},b.onabort=function(){b&&(n(new qe("Request aborted",qe.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new qe("Network Error",qe.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||dT;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new qe(k,S.clarifyTimeoutError?qe.ETIMEDOUT:qe.ECONNABORTED,e,b)),b=null},i===void 0&&a.setContentType(null),"setRequestHeader"in b&&G.forEach(a.toJSON(),function(k,S){b.setRequestHeader(S,k)}),G.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),u&&([h,g]=Uf(u,!0),b.addEventListener("progress",h)),c&&b.upload&&([f,p]=Uf(c),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(d=w=>{b&&(n(!w||w.type?new vl(null,e,b):w),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const x=cL(s.url);if(x&&Or.protocols.indexOf(x)===-1){n(new qe("Unsupported protocol "+x+":",qe.ERR_BAD_REQUEST,e));return}b.send(i||null)})},xL=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof qe?d:new vl(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,i(new qe(`timeout ${t} of ms exceeded`,qe.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>G.asap(l),c}},vL=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},bL=async function*(e,t){for await(const r of wL(e))yield*vL(r,t)},wL=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Vw=(e,t,r,n)=>{const s=bL(e,t);let i=0,a,l=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let f=d.byteLength;if(r){let h=i+=f;r(h)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},Jh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yT=Jh&&typeof ReadableStream=="function",kL=Jh&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),xT=(e,...t)=>{try{return!!e(...t)}catch{return!1}},SL=yT&&xT(()=>{let e=!1;const t=new Request(Or.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),$w=64*1024,C0=yT&&xT(()=>G.isReadableStream(new Response("").body)),Hf={stream:C0&&(e=>e.body)};Jh&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Hf[t]&&(Hf[t]=G.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new qe(`Response type '${t}' is not supported`,qe.ERR_NOT_SUPPORT,n)})})})(new Response);const EL=async e=>{if(e==null)return 0;if(G.isBlob(e))return e.size;if(G.isSpecCompliantForm(e))return(await new Request(Or.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(G.isArrayBufferView(e)||G.isArrayBuffer(e))return e.byteLength;if(G.isURLSearchParams(e)&&(e=e+""),G.isString(e))return(await kL(e)).byteLength},NL=async(e,t)=>{const r=G.toFiniteNumber(e.getContentLength());return r??EL(t)},jL=Jh&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:h}=gT(e);u=u?(u+"").toLowerCase():"text";let p=xL([s,i&&i.toAbortSignal()],a),g;const y=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&SL&&r!=="get"&&r!=="head"&&(b=await NL(d,n))!==0){let S=new Request(t,{method:"POST",body:n,duplex:"half"}),E;if(G.isFormData(n)&&(E=S.headers.get("content-type"))&&d.setContentType(E),S.body){const[N,j]=zw(b,Uf(Uw(c)));n=Vw(S.body,$w,N,j)}}G.isString(f)||(f=f?"include":"omit");const v="credentials"in Request.prototype;g=new Request(t,{...h,signal:p,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:v?f:void 0});let x=await fetch(g,h);const w=C0&&(u==="stream"||u==="response");if(C0&&(l||w&&y)){const S={};["status","statusText","headers"].forEach(T=>{S[T]=x[T]});const E=G.toFiniteNumber(x.headers.get("content-length")),[N,j]=l&&zw(E,Uf(Uw(l),!0))||[];x=new Response(Vw(x.body,$w,N,()=>{j&&j(),y&&y()}),S)}u=u||"text";let k=await Hf[G.findKey(Hf,u)||"text"](x,e);return!w&&y&&y(),await new Promise((S,E)=>{pT(S,E,{data:k,headers:un.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:g})})}catch(v){throw y&&y(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new qe("Network Error",qe.ERR_NETWORK,e,g),{cause:v.cause||v}):qe.from(v,v&&v.code,e,g)}}),T0={http:U3,xhr:yL,fetch:jL};G.forEach(T0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ww=e=>`- ${e}`,CL=e=>G.isFunction(e)||e===null||e===!1,vT={getAdapter:e=>{e=G.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){r=e[i];let a;if(n=r,!CL(r)&&(n=T0[(a=String(r)).toLowerCase()],n===void 0))throw new qe(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+i]=n}if(!n){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(Ww).join(`
`):" "+Ww(i[0]):"as no adapter specified";throw new qe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:T0};function wm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vl(null,e)}function Yw(e){return wm(e),e.headers=un.from(e.headers),e.data=bm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vT.getAdapter(e.adapter||_u.adapter)(e).then(function(n){return wm(e),n.data=bm.call(e,e.transformResponse,n),n.headers=un.from(n.headers),n},function(n){return hT(n)||(wm(e),n&&n.response&&(n.response.data=bm.call(e,e.transformResponse,n.response),n.response.headers=un.from(n.response.headers))),Promise.reject(n)})}const bT="1.11.0",ep={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ep[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Gw={};ep.transitional=function(t,r,n){function s(i,a){return"[Axios v"+bT+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,l)=>{if(t===!1)throw new qe(s(a," has been removed"+(r?" in "+r:"")),qe.ERR_DEPRECATED);return r&&!Gw[a]&&(Gw[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,l):!0}};ep.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function TL(e,t,r){if(typeof e!="object")throw new qe("options must be an object",qe.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],a=t[i];if(a){const l=e[i],c=l===void 0||a(l,i,e);if(c!==!0)throw new qe("option "+i+" must be "+c,qe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new qe("Unknown option "+i,qe.ERR_BAD_OPTION)}}const qd={assertOptions:TL,validators:ep},ps=qd.validators;let Oa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Fw,response:new Fw}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=$a(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&qd.assertOptions(n,{silentJSONParsing:ps.transitional(ps.boolean),forcedJSONParsing:ps.transitional(ps.boolean),clarifyTimeoutError:ps.transitional(ps.boolean)},!1),s!=null&&(G.isFunction(s)?r.paramsSerializer={serialize:s}:qd.assertOptions(s,{encode:ps.function,serialize:ps.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),qd.assertOptions(r,{baseUrl:ps.spelling("baseURL"),withXsrfToken:ps.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&G.merge(i.common,i[r.method]);i&&G.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=un.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,f=0,h;if(!c){const g=[Yw.bind(this),void 0];for(g.unshift(...l),g.push(...u),h=g.length,d=Promise.resolve(r);f<h;)d=d.then(g[f++],g[f++]);return d}h=l.length;let p=r;for(f=0;f<h;){const g=l[f++],y=l[f++];try{p=g(p)}catch(b){y.call(this,b);break}}try{d=Yw.call(this,p)}catch(g){return Promise.reject(g)}for(f=0,h=u.length;f<h;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=$a(this.defaults,t);const r=mT(t.baseURL,t.url,t.allowAbsoluteUrls);return uT(r,t.params,t.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(t){Oa.prototype[t]=function(r,n){return this.request($a(n||{},{method:t,url:r,data:(n||{}).data}))}});G.forEach(["post","put","patch"],function(t){function r(n){return function(i,a,l){return this.request($a(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Oa.prototype[t]=r(),Oa.prototype[t+"Form"]=r(!0)});let AL=class wT{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{n.subscribe(l),i=l}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},t(function(i,a,l){n.reason||(n.reason=new vl(i,a,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new wT(function(s){t=s}),cancel:t}}};function DL(e){return function(r){return e.apply(null,r)}}function RL(e){return G.isObject(e)&&e.isAxiosError===!0}const A0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(A0).forEach(([e,t])=>{A0[t]=e});function kT(e){const t=new Oa(e),r=XC(Oa.prototype.request,t);return G.extend(r,Oa.prototype,t,{allOwnKeys:!0}),G.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return kT($a(e,s))},r}const rr=kT(_u);rr.Axios=Oa;rr.CanceledError=vl;rr.CancelToken=AL;rr.isCancel=hT;rr.VERSION=bT;rr.toFormData=Xh;rr.AxiosError=qe;rr.Cancel=rr.CanceledError;rr.all=function(t){return Promise.all(t)};rr.spread=DL;rr.isAxiosError=RL;rr.mergeConfig=$a;rr.AxiosHeaders=un;rr.formToJSON=e=>fT(G.isHTMLForm(e)?new FormData(e):e);rr.getAdapter=vT.getAdapter;rr.HttpStatusCode=A0;rr.default=rr;const{Axios:kte,AxiosError:Ste,CanceledError:Ete,isCancel:Nte,CancelToken:jte,VERSION:Cte,all:Tte,Cancel:Ate,isAxiosError:Dte,spread:Rte,toFormData:_te,AxiosHeaders:Ite,HttpStatusCode:Mte,formToJSON:Ote,getAdapter:Pte,mergeConfig:Lte}=rr,_L="/api",IL=e=>e.endsWith("/")?e.slice(0,-1):e,ML=IL(_L),q=rr.create({baseURL:ML,withCredentials:!0,timeout:1e4}),Vf="famconomy.activeFamilyId",D0="famconomy:active-family-change",tp=typeof window<"u"&&typeof window.localStorage<"u",OL=(e,t)=>{if(!tp)return;const r=new CustomEvent(D0,{detail:{familyId:e}});window.dispatchEvent(r)},qw=()=>{if(!tp)return null;const e=window.localStorage.getItem(Vf);if(!e)return null;const t=Number(e);return Number.isFinite(t)?t:null},Fx=(e,t)=>{tp&&(e===null?window.localStorage.removeItem(Vf):window.localStorage.setItem(Vf,String(e)),OL(e))},ka=e=>{Fx(null)},PL=e=>{if(!tp)return()=>{};const t=n=>{var i;e(((i=n.detail)==null?void 0:i.familyId)??null)};window.addEventListener(D0,t);const r=n=>{if(n.key!==Vf)return;const s=n.newValue;if(s===null){e(null);return}const i=Number(s);e(Number.isFinite(i)?i:null)};return window.addEventListener("storage",r),()=>{window.removeEventListener(D0,t),window.removeEventListener("storage",r)}},ST=m.createContext(null),LL="/api",FL=e=>e.endsWith("/")?e.slice(0,-1):e,Kw=FL(LL),BL=e=>Kw?`${Kw}/auth/${e}`:`/auth/${e}`,zL=({children:e})=>{const[t,r]=m.useState({user:null,isAuthenticated:!1,isLoading:!0,error:null}),n=xr("auth"),s=async()=>{n.log("checkAuthStatus: Starting..."),r(u=>({...u,isLoading:!0}));try{n.log("checkAuthStatus: Making /auth/me request...");const u=await q.get("/auth/me");n.log("checkAuthStatus: /auth/me successful.",u.data),r({user:u.data,isAuthenticated:!0,isLoading:!1,error:null})}catch(u){n.error("checkAuthStatus: /auth/me failed.",u),ka(),r(d=>({...d,isLoading:!1,isAuthenticated:!1,user:null,error:null}))}};m.useEffect(()=>{s()},[]);const i=async u=>{var d,f;r(h=>({...h,isLoading:!0,error:null}));try{ka(),await q.post("/auth/login",u),await s()}catch(h){const p=((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||h.message||"Login failed";throw r({user:null,isAuthenticated:!1,isLoading:!1,error:p}),new Error(p)}},a=async u=>{var d,f;r(h=>({...h,isLoading:!0,error:null}));try{ka(),await q.post("/auth/register",u),await s()}catch(h){r({user:null,isAuthenticated:!1,isLoading:!1,error:((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||h.message||"Registration failed"})}},l=async u=>{window.location.href=BL(u)},c=async()=>{r(u=>({...u,isLoading:!0}));try{await q.post("/auth/logout"),ka(),r({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch{ka(),r({user:null,isAuthenticated:!1,isLoading:!1,error:null})}};return o.jsx(ST.Provider,{value:{...t,login:i,register:a,loginWithProvider:l,logout:c,checkAuthStatus:s},children:e})},Ft=()=>{const e=m.useContext(ST);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},UL=async e=>(await q.get(`/notifications/user/${e}`)).data.map(r=>({id:r.NotificationID,userId:r.UserID,message:r.Message,readStatus:r.IsRead,createdAt:r.CreatedAt,type:r.Type,link:r.Link})),HL=async e=>{await q.put(`/notifications/${e}/read`)},Ds=Object.create(null);Ds.open="0";Ds.close="1";Ds.ping="2";Ds.pong="3";Ds.message="4";Ds.upgrade="5";Ds.noop="6";const Kd=Object.create(null);Object.keys(Ds).forEach(e=>{Kd[Ds[e]]=e});const R0={type:"error",data:"parser error"},ET=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",NT=typeof ArrayBuffer=="function",jT=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Bx=({type:e,data:t},r,n)=>ET&&t instanceof Blob?r?n(t):Qw(t,n):NT&&(t instanceof ArrayBuffer||jT(t))?r?n(t):Qw(new Blob([t]),n):n(Ds[e]+(t||"")),Qw=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function Zw(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let km;function VL(e,t){if(ET&&e.data instanceof Blob)return e.data.arrayBuffer().then(Zw).then(t);if(NT&&(e.data instanceof ArrayBuffer||jT(e.data)))return t(Zw(e.data));Bx(e,!1,r=>{km||(km=new TextEncoder),t(km.encode(r))})}const Xw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Xw.length;e++)oc[Xw.charCodeAt(e)]=e;const $L=e=>{let t=e.length*.75,r=e.length,n,s=0,i,a,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(n=0;n<r;n+=4)i=oc[e.charCodeAt(n)],a=oc[e.charCodeAt(n+1)],l=oc[e.charCodeAt(n+2)],c=oc[e.charCodeAt(n+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},WL=typeof ArrayBuffer=="function",zx=(e,t)=>{if(typeof e!="string")return{type:"message",data:CT(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:YL(e.substring(1),t)}:Kd[r]?e.length>1?{type:Kd[r],data:e.substring(1)}:{type:Kd[r]}:R0},YL=(e,t)=>{if(WL){const r=$L(e);return CT(r,t)}else return{base64:!0,data:e}},CT=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},TT="",GL=(e,t)=>{const r=e.length,n=new Array(r);let s=0;e.forEach((i,a)=>{Bx(i,!1,l=>{n[a]=l,++s===r&&t(n.join(TT))})})},qL=(e,t)=>{const r=e.split(TT),n=[];for(let s=0;s<r.length;s++){const i=zx(r[s],t);if(n.push(i),i.type==="error")break}return n};function KL(){return new TransformStream({transform(e,t){VL(e,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let Sm;function gd(e){return e.reduce((t,r)=>t+r.length,0)}function yd(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let s=0;s<t;s++)r[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function QL(e,t){Sm||(Sm=new TextDecoder);const r=[];let n=0,s=-1,i=!1;return new TransformStream({transform(a,l){for(r.push(a);;){if(n===0){if(gd(r)<1)break;const c=yd(r,1);i=(c[0]&128)===128,s=c[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(gd(r)<2)break;const c=yd(r,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(gd(r)<8)break;const c=yd(r,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(R0);break}s=d*Math.pow(2,32)+u.getUint32(4),n=3}else{if(gd(r)<s)break;const c=yd(r,s);l.enqueue(zx(i?c:Sm.decode(c),t)),n=0}if(s===0||s>e){l.enqueue(R0);break}}}})}const AT=4;function cr(e){if(e)return ZL(e)}function ZL(e){for(var t in cr.prototype)e[t]=cr.prototype[t];return e}cr.prototype.on=cr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};cr.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};cr.prototype.off=cr.prototype.removeListener=cr.prototype.removeAllListeners=cr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===t||n.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};cr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,t)}return this};cr.prototype.emitReserved=cr.prototype.emit;cr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};cr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const rp=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),On=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),XL="arraybuffer";function DT(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const JL=On.setTimeout,e4=On.clearTimeout;function np(e,t){t.useNativeTimers?(e.setTimeoutFn=JL.bind(On),e.clearTimeoutFn=e4.bind(On)):(e.setTimeoutFn=On.setTimeout.bind(On),e.clearTimeoutFn=On.clearTimeout.bind(On))}const t4=1.33;function r4(e){return typeof e=="string"?n4(e):Math.ceil((e.byteLength||e.size)*t4)}function n4(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function RT(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function s4(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function i4(e){let t={},r=e.split("&");for(let n=0,s=r.length;n<s;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class a4 extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class Ux extends cr{constructor(t){super(),this.writable=!1,np(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new a4(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=zx(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=s4(t);return r.length?"?"+r:""}}class o4 extends Ux{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};qL(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,GL(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=RT()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let _T=!1;try{_T=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const l4=_T;function c4(){}class u4 extends o4{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let Uo=class Qd extends cr{constructor(t,r,n){super(),this.createRequest=t,np(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=DT(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Qd.requestsCount++,Qd.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=c4,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Qd.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Uo.requestsCount=0;Uo.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Jw);else if(typeof addEventListener=="function"){const e="onpagehide"in On?"pagehide":"unload";addEventListener(e,Jw,!1)}}function Jw(){for(let e in Uo.requests)Uo.requests.hasOwnProperty(e)&&Uo.requests[e].abort()}const d4=function(){const e=IT({xdomain:!1});return e&&e.responseType!==null}();class f4 extends u4{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=d4&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Uo(IT,this.uri(),t)}}function IT(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||l4))return new XMLHttpRequest}catch{}if(!t)try{return new On[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const MT=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class h4 extends Ux{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=MT?{}:DT(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;Bx(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}s&&rp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=RT()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Em=On.WebSocket||On.MozWebSocket;class p4 extends h4{createSocket(t,r,n){return MT?new Em(t,r,n):r?new Em(t,r):new Em(t)}doWrite(t,r){this.ws.send(r)}}class m4 extends Ux{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=QL(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),s=KL();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;this._writer.write(n).then(()=>{s&&rp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const g4={websocket:p4,webtransport:m4,polling:f4},y4=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,x4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function _0(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=y4.exec(e||""),i={},a=14;for(;a--;)i[x4[a]]=s[a]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=v4(i,i.path),i.queryKey=b4(i,i.query),i}function v4(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function b4(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(r[s]=i)}),r}const I0=typeof addEventListener=="function"&&typeof removeEventListener=="function",Zd=[];I0&&addEventListener("offline",()=>{Zd.forEach(e=>e())},!1);class Vi extends cr{constructor(t,r){if(super(),this.binaryType=XL,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=_0(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=_0(r.host).host);np(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=i4(this.opts.query)),I0&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Zd.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=AT,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Vi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Vi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=r4(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,rp(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Vi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),I0&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Zd.indexOf(this._offlineEventListener);n!==-1&&Zd.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Vi.protocol=AT;class w4 extends Vi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Vi.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Vi.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function i(){n||(n=!0,d(),r.close(),r=null)}const a=f=>{const h=new Error("probe error: "+f);h.transport=r.name,i(),this.emitReserved("upgradeError",h)};function l(){a("transport closed")}function c(){a("socket closed")}function u(f){r&&f.name!==r.name&&i()}const d=()=>{r.removeListener("open",s),r.removeListener("error",a),r.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};r.once("open",s),r.once("error",a),r.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let k4=class extends w4{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>g4[s]).filter(s=>!!s)),super(t,n)}};function S4(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=_0(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const E4=typeof ArrayBuffer=="function",N4=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,OT=Object.prototype.toString,j4=typeof Blob=="function"||typeof Blob<"u"&&OT.call(Blob)==="[object BlobConstructor]",C4=typeof File=="function"||typeof File<"u"&&OT.call(File)==="[object FileConstructor]";function Hx(e){return E4&&(e instanceof ArrayBuffer||N4(e))||j4&&e instanceof Blob||C4&&e instanceof File}function Xd(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Xd(e[r]))return!0;return!1}if(Hx(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Xd(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Xd(e[r]))return!0;return!1}function T4(e){const t=[],r=e.data,n=e;return n.data=M0(r,t),n.attachments=t.length,{packet:n,buffers:t}}function M0(e,t){if(!e)return e;if(Hx(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=M0(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=M0(e[n],t));return r}return e}function A4(e,t){return e.data=O0(e.data,t),delete e.attachments,e}function O0(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=O0(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=O0(e[r],t));return e}const D4=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],R4=5;var it;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(it||(it={}));class _4{constructor(t){this.replacer=t}encode(t){return(t.type===it.EVENT||t.type===it.ACK)&&Xd(t)?this.encodeAsBinary({type:t.type===it.EVENT?it.BINARY_EVENT:it.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===it.BINARY_EVENT||t.type===it.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=T4(t),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function ek(e){return Object.prototype.toString.call(e)==="[object Object]"}class Vx extends cr{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===it.BINARY_EVENT;n||r.type===it.BINARY_ACK?(r.type=n?it.EVENT:it.ACK,this.reconstructor=new I4(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Hx(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(it[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===it.BINARY_EVENT||n.type===it.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const a=t.substring(i,r);if(a!=Number(a)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const i=r+1;for(;++r;){const a=t.charAt(r);if(a==null||Number(a)!=a){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(Vx.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case it.CONNECT:return ek(r);case it.DISCONNECT:return r===void 0;case it.CONNECT_ERROR:return typeof r=="string"||ek(r);case it.EVENT:case it.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&D4.indexOf(r[0])===-1);case it.ACK:case it.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class I4{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=A4(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const M4=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Vx,Encoder:_4,get PacketType(){return it},protocol:R4},Symbol.toStringTag,{value:"Module"}));function Kn(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const O4=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class PT extends cr{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Kn(t,"open",this.onopen.bind(this)),Kn(t,"packet",this.onpacket.bind(this)),Kn(t,"error",this.onerror.bind(this)),Kn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,s,i;if(O4.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const a={type:it.EVENT,data:r};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,f=r.pop();this._registerAckCallback(d,f),a.id=d}const l=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},s),a=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...r){return new Promise((n,s)=>{const i=(a,l)=>a?s(a):n(l);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:it.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case it.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case it.EVENT:case it.BINARY_EVENT:this.onevent(t);break;case it.ACK:case it.BINARY_ACK:this.onack(t);break;case it.DISCONNECT:this.ondisconnect();break;case it.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:it.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:it.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function bl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}bl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};bl.prototype.reset=function(){this.attempts=0};bl.prototype.setMin=function(e){this.ms=e};bl.prototype.setMax=function(e){this.max=e};bl.prototype.setJitter=function(e){this.jitter=e};class P0 extends cr{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,np(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new bl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||M4;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new k4(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Kn(r,"open",function(){n.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},a=Kn(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Kn(t,"ping",this.onping.bind(this)),Kn(t,"data",this.ondata.bind(this)),Kn(t,"error",this.onerror.bind(this)),Kn(t,"close",this.onclose.bind(this)),Kn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){rp(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new PT(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const zl={};function Jd(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=S4(e,t.path||"/socket.io"),n=r.source,s=r.id,i=r.path,a=zl[s]&&i in zl[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let c;return l?c=new P0(n,t):(zl[s]||(zl[s]=new P0(n,t)),c=zl[s]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Jd,{Manager:P0,Socket:PT,io:Jd,connect:Jd});const LT=m.createContext(null),P4=({children:e})=>{const[t,r]=m.useState([]),[n,s]=m.useState(!1),[i,a]=m.useState(null),{user:l}=Ft(),c=xr("notifications"),u=async()=>{s(!0),a(null);try{if((l==null?void 0:l.id)==="demo-admin")r([{id:"1",userId:"demo-admin",message:"Welcome to the FamConomy demo!",readStatus:!1,timestamp:new Date().toISOString(),type:"system"},{id:"2",userId:"demo-admin",message:"You have a new task assigned.",readStatus:!1,timestamp:new Date().toISOString(),type:"task"}]);else if(l!=null&&l.id){const p=await UL(l.id);c.log("Fetched notifications data:",p),r(p)}else r([])}catch(p){a(p instanceof Error?p.message:"Failed to fetch notifications")}finally{s(!1)}};m.useEffect(()=>{let p;if(l&&(u(),l.id!=="demo-admin")){p=Jd("https://famconomy.com",{query:{userId:l.id},transports:["websocket"]}),p.on("connect",()=>{c.log("Socket.IO connected:",p==null?void 0:p.id)}),p.on("newNotification",y=>{c.log("New notification received via WebSocket:",y),r(b=>[y,...b])}),p.on("disconnect",()=>{c.log("Socket.IO disconnected.")}),p.on("connect_error",y=>{c.error("Socket.IO connection error:",y.message)});const g=setInterval(u,3e4);return()=>{clearInterval(g),p&&p.disconnect()}}},[l]);const d=async p=>{try{(l==null?void 0:l.id)!=="demo-admin"&&await HL(p),r(g=>g.map(y=>y.id===p?{...y,readStatus:!0}:y))}catch(g){a(g instanceof Error?g.message:"Failed to mark notification as read")}},f=async()=>{try{r(p=>p.map(g=>({...g,readStatus:!0})))}catch(p){a(p instanceof Error?p.message:"Failed to mark all notifications as read")}},h=t.filter(p=>!p.readStatus).length;return o.jsx(LT.Provider,{value:{notifications:t,unreadCount:h,isLoading:n,error:i,markAsRead:d,markAllAsRead:f,fetchNotificationData:u},children:e})},FT=()=>{const e=m.useContext(LT);if(!e)throw new Error("useNotifications must be used within a NotificationsProvider");return e},BT=m.createContext(void 0),L4=({children:e})=>{const[t,r]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});m.useEffect(()=>{const i=window.document.documentElement;i.classList.remove(t?"light":"dark"),i.classList.add(t?"dark":"light"),localStorage.setItem("theme",t?"dark":"light")},[t]);const n=m.useCallback(()=>{r(i=>!i)},[]),s=m.useCallback(i=>{r(i==="dark")},[]);return o.jsx(BT.Provider,{value:{isDarkMode:t,toggleTheme:n,setTheme:s},children:e})},zT=()=>{const e=m.useContext(BT);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e};function UT(e){return t=>typeof t===e}var F4=UT("function"),B4=e=>e===null,tk=e=>Object.prototype.toString.call(e).slice(8,-1)==="RegExp",rk=e=>!z4(e)&&!B4(e)&&(F4(e)||typeof e=="object"),z4=UT("undefined");function U4(e,t){const{length:r}=e;if(r!==t.length)return!1;for(let n=r;n--!==0;)if(!Gr(e[n],t[n]))return!1;return!0}function H4(e,t){if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e.buffer),n=new DataView(t.buffer);let s=e.byteLength;for(;s--;)if(r.getUint8(s)!==n.getUint8(s))return!1;return!0}function V4(e,t){if(e.size!==t.size)return!1;for(const r of e.entries())if(!t.has(r[0]))return!1;for(const r of e.entries())if(!Gr(r[1],t.get(r[0])))return!1;return!0}function $4(e,t){if(e.size!==t.size)return!1;for(const r of e.entries())if(!t.has(r[0]))return!1;return!0}function Gr(e,t){if(e===t)return!0;if(e&&rk(e)&&t&&rk(t)){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)&&Array.isArray(t))return U4(e,t);if(e instanceof Map&&t instanceof Map)return V4(e,t);if(e instanceof Set&&t instanceof Set)return $4(e,t);if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return H4(e,t);if(tk(e)&&tk(t))return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=r.length;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[s]))return!1;for(let s=r.length;s--!==0;){const i=r[s];if(!(i==="_owner"&&e.$$typeof)&&!Gr(e[i],t[i]))return!1}return!0}return Number.isNaN(e)&&Number.isNaN(t)?!0:e===t}var W4=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],Y4=["bigint","boolean","null","number","string","symbol","undefined"];function sp(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(/HTML\w+Element/.test(t))return"HTMLElement";if(G4(t))return t}function cs(e){return t=>sp(t)===e}function G4(e){return W4.includes(e)}function wl(e){return t=>typeof t===e}function q4(e){return Y4.includes(e)}var K4=["innerHTML","ownerDocument","style","attributes","nodeValue"];function Se(e){if(e===null)return"null";switch(typeof e){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(Se.array(e))return"Array";if(Se.plainFunction(e))return"Function";const t=sp(e);return t||"Object"}Se.array=Array.isArray;Se.arrayOf=(e,t)=>!Se.array(e)&&!Se.function(t)?!1:e.every(r=>t(r));Se.asyncGeneratorFunction=e=>sp(e)==="AsyncGeneratorFunction";Se.asyncFunction=cs("AsyncFunction");Se.bigint=wl("bigint");Se.boolean=e=>e===!0||e===!1;Se.date=cs("Date");Se.defined=e=>!Se.undefined(e);Se.domElement=e=>Se.object(e)&&!Se.plainObject(e)&&e.nodeType===1&&Se.string(e.nodeName)&&K4.every(t=>t in e);Se.empty=e=>Se.string(e)&&e.length===0||Se.array(e)&&e.length===0||Se.object(e)&&!Se.map(e)&&!Se.set(e)&&Object.keys(e).length===0||Se.set(e)&&e.size===0||Se.map(e)&&e.size===0;Se.error=cs("Error");Se.function=wl("function");Se.generator=e=>Se.iterable(e)&&Se.function(e.next)&&Se.function(e.throw);Se.generatorFunction=cs("GeneratorFunction");Se.instanceOf=(e,t)=>!e||!t?!1:Object.getPrototypeOf(e)===t.prototype;Se.iterable=e=>!Se.nullOrUndefined(e)&&Se.function(e[Symbol.iterator]);Se.map=cs("Map");Se.nan=e=>Number.isNaN(e);Se.null=e=>e===null;Se.nullOrUndefined=e=>Se.null(e)||Se.undefined(e);Se.number=e=>wl("number")(e)&&!Se.nan(e);Se.numericString=e=>Se.string(e)&&e.length>0&&!Number.isNaN(Number(e));Se.object=e=>!Se.nullOrUndefined(e)&&(Se.function(e)||typeof e=="object");Se.oneOf=(e,t)=>Se.array(e)?e.indexOf(t)>-1:!1;Se.plainFunction=cs("Function");Se.plainObject=e=>{if(sp(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.getPrototypeOf({})};Se.primitive=e=>Se.null(e)||q4(typeof e);Se.promise=cs("Promise");Se.propertyOf=(e,t,r)=>{if(!Se.object(e)||!t)return!1;const n=e[t];return Se.function(r)?r(n):Se.defined(n)};Se.regexp=cs("RegExp");Se.set=cs("Set");Se.string=wl("string");Se.symbol=wl("symbol");Se.undefined=wl("undefined");Se.weakMap=cs("WeakMap");Se.weakSet=cs("WeakSet");var Te=Se;function Q4(...e){return e.every(t=>Te.string(t)||Te.array(t)||Te.plainObject(t))}function Z4(e,t,r){return HT(e,t)?[e,t].every(Te.array)?!e.some(ok(r))&&t.some(ok(r)):[e,t].every(Te.plainObject)?!Object.entries(e).some(ak(r))&&Object.entries(t).some(ak(r)):t===r:!1}function nk(e,t,r){const{actual:n,key:s,previous:i,type:a}=r,l=Ss(e,s),c=Ss(t,s);let u=[l,c].every(Te.number)&&(a==="increased"?l<c:l>c);return Te.undefined(n)||(u=u&&c===n),Te.undefined(i)||(u=u&&l===i),u}function sk(e,t,r){const{key:n,type:s,value:i}=r,a=Ss(e,n),l=Ss(t,n),c=s==="added"?a:l,u=s==="added"?l:a;if(!Te.nullOrUndefined(i)){if(Te.defined(c)){if(Te.array(c)||Te.plainObject(c))return Z4(c,u,i)}else return Gr(u,i);return!1}return[a,l].every(Te.array)?!u.every($x(c)):[a,l].every(Te.plainObject)?X4(Object.keys(c),Object.keys(u)):![a,l].every(d=>Te.primitive(d)&&Te.defined(d))&&(s==="added"?!Te.defined(a)&&Te.defined(l):Te.defined(a)&&!Te.defined(l))}function ik(e,t,{key:r}={}){let n=Ss(e,r),s=Ss(t,r);if(!HT(n,s))throw new TypeError("Inputs have different types");if(!Q4(n,s))throw new TypeError("Inputs don't have length");return[n,s].every(Te.plainObject)&&(n=Object.keys(n),s=Object.keys(s)),[n,s]}function ak(e){return([t,r])=>Te.array(e)?Gr(e,r)||e.some(n=>Gr(n,r)||Te.array(r)&&$x(r)(n)):Te.plainObject(e)&&e[t]?!!e[t]&&Gr(e[t],r):Gr(e,r)}function X4(e,t){return t.some(r=>!e.includes(r))}function ok(e){return t=>Te.array(e)?e.some(r=>Gr(r,t)||Te.array(t)&&$x(t)(r)):Gr(e,t)}function Ul(e,t){return Te.array(e)?e.some(r=>Gr(r,t)):Gr(e,t)}function $x(e){return t=>e.some(r=>Gr(r,t))}function HT(...e){return e.every(Te.array)||e.every(Te.number)||e.every(Te.plainObject)||e.every(Te.string)}function Ss(e,t){return Te.plainObject(e)||Te.array(e)?Te.string(t)?t.split(".").reduce((n,s)=>n&&n[s],e):Te.number(t)?e[t]:e:e}function $f(e,t){if([e,t].some(Te.nullOrUndefined))throw new Error("Missing required parameters");if(![e,t].every(d=>Te.plainObject(d)||Te.array(d)))throw new Error("Expected plain objects or array");return{added:(d,f)=>{try{return sk(e,t,{key:d,type:"added",value:f})}catch{return!1}},changed:(d,f,h)=>{try{const p=Ss(e,d),g=Ss(t,d),y=Te.defined(f),b=Te.defined(h);if(y||b){const v=b?Ul(h,p):!Ul(f,p),x=Ul(f,g);return v&&x}return[p,g].every(Te.array)||[p,g].every(Te.plainObject)?!Gr(p,g):p!==g}catch{return!1}},changedFrom:(d,f,h)=>{if(!Te.defined(d))return!1;try{const p=Ss(e,d),g=Ss(t,d),y=Te.defined(h);return Ul(f,p)&&(y?Ul(h,g):!y)}catch{return!1}},decreased:(d,f,h)=>{if(!Te.defined(d))return!1;try{return nk(e,t,{key:d,actual:f,previous:h,type:"decreased"})}catch{return!1}},emptied:d=>{try{const[f,h]=ik(e,t,{key:d});return!!f.length&&!h.length}catch{return!1}},filled:d=>{try{const[f,h]=ik(e,t,{key:d});return!f.length&&!!h.length}catch{return!1}},increased:(d,f,h)=>{if(!Te.defined(d))return!1;try{return nk(e,t,{key:d,actual:f,previous:h,type:"increased"})}catch{return!1}},removed:(d,f)=>{try{return sk(e,t,{key:d,type:"removed",value:f})}catch{return!1}}}}var J4=new Error("Element already at target scroll position"),e5=new Error("Scroll cancelled"),t5=Math.min,lk=Date.now,r5={left:ck("scrollLeft"),top:ck("scrollTop")};function ck(e){return function(r,n,s,i){s=s||{},typeof s=="function"&&(i=s,s={}),typeof i!="function"&&(i=s5);var a=lk(),l=r[e],c=s.ease||n5,u=isNaN(s.duration)?350:+s.duration,d=!1;return l===n?i(J4,r[e]):requestAnimationFrame(h),f;function f(){d=!0}function h(p){if(d)return i(e5,r[e]);var g=lk(),y=t5(1,(g-a)/u),b=c(y);r[e]=b*(n-l)+l,y<1?requestAnimationFrame(h):requestAnimationFrame(function(){i(null,r[e])})}}}function n5(e){return .5*(1-Math.cos(Math.PI*e))}function s5(){}const i5=ea(r5);var VT={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.Scrollparent=r()})(hI,function(){function t(n){var s=getComputedStyle(n,null).getPropertyValue("overflow");return s.indexOf("scroll")>-1||s.indexOf("auto")>-1}function r(n){if(n instanceof HTMLElement||n instanceof SVGElement){for(var s=n.parentNode;s.parentNode;){if(t(s))return s;s=s.parentNode}return document.scrollingElement||document.documentElement}}return r})})(VT);var a5=VT.exports;const $T=ea(a5);var o5=function(e){return Object.prototype.hasOwnProperty.call(e,"props")},l5=function(e,t){return e+su(t)},su=function(e){return e===null||typeof e=="boolean"||typeof e>"u"?"":typeof e=="number"?e.toString():typeof e=="string"?e:Array.isArray(e)?e.reduce(l5,""):o5(e)&&Object.prototype.hasOwnProperty.call(e.props,"children")?su(e.props.children):""};su.default=su;var c5=su;const uk=ea(c5);var u5=function(t){return d5(t)&&!f5(t)};function d5(e){return!!e&&typeof e=="object"}function f5(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||m5(e)}var h5=typeof Symbol=="function"&&Symbol.for,p5=h5?Symbol.for("react.element"):60103;function m5(e){return e.$$typeof===p5}function g5(e){return Array.isArray(e)?[]:{}}function iu(e,t){return t.clone!==!1&&t.isMergeableObject(e)?tl(g5(e),e,t):e}function y5(e,t,r){return e.concat(t).map(function(n){return iu(n,r)})}function x5(e,t){if(!t.customMerge)return tl;var r=t.customMerge(e);return typeof r=="function"?r:tl}function v5(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function dk(e){return Object.keys(e).concat(v5(e))}function WT(e,t){try{return t in e}catch{return!1}}function b5(e,t){return WT(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function w5(e,t,r){var n={};return r.isMergeableObject(e)&&dk(e).forEach(function(s){n[s]=iu(e[s],r)}),dk(t).forEach(function(s){b5(e,s)||(WT(e,s)&&r.isMergeableObject(t[s])?n[s]=x5(s,r)(e[s],t[s],r):n[s]=iu(t[s],r))}),n}function tl(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||y5,r.isMergeableObject=r.isMergeableObject||u5,r.cloneUnlessOtherwiseSpecified=iu;var n=Array.isArray(t),s=Array.isArray(e),i=n===s;return i?n?r.arrayMerge(e,t,r):w5(e,t,r):iu(t,r)}tl.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,s){return tl(n,s,r)},{})};var k5=tl,S5=k5;const Jn=ea(S5);var YT={exports:{}},E5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",N5=E5,j5=N5;function GT(){}function qT(){}qT.resetWarningCache=GT;var C5=function(){function e(n,s,i,a,l,c){if(c!==j5){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:qT,resetWarningCache:GT};return r.PropTypes=r,r};YT.exports=C5();var Wx=YT.exports;const me=ea(Wx);/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var Iu=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",T5=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(Iu&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();function A5(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}function D5(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},T5))}}var R5=Iu&&window.Promise,_5=R5?A5:D5;function KT(e){var t={};return e&&t.toString.call(e)==="[object Function]"}function eo(e,t){if(e.nodeType!==1)return[];var r=e.ownerDocument.defaultView,n=r.getComputedStyle(e,null);return t?n[t]:n}function Yx(e){return e.nodeName==="HTML"?e:e.parentNode||e.host}function Mu(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=eo(e),r=t.overflow,n=t.overflowX,s=t.overflowY;return/(auto|scroll|overlay)/.test(r+s+n)?e:Mu(Yx(e))}function QT(e){return e&&e.referenceNode?e.referenceNode:e}var fk=Iu&&!!(window.MSInputMethodContext&&document.documentMode),hk=Iu&&/MSIE 10/.test(navigator.userAgent);function kl(e){return e===11?fk:e===10?hk:fk||hk}function rl(e){if(!e)return document.documentElement;for(var t=kl(10)?document.body:null,r=e.offsetParent||null;r===t&&e.nextElementSibling;)r=(e=e.nextElementSibling).offsetParent;var n=r&&r.nodeName;return!n||n==="BODY"||n==="HTML"?e?e.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(r.nodeName)!==-1&&eo(r,"position")==="static"?rl(r):r}function I5(e){var t=e.nodeName;return t==="BODY"?!1:t==="HTML"||rl(e.firstElementChild)===e}function L0(e){return e.parentNode!==null?L0(e.parentNode):e}function Wf(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var r=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=r?e:t,s=r?t:e,i=document.createRange();i.setStart(n,0),i.setEnd(s,0);var a=i.commonAncestorContainer;if(e!==a&&t!==a||n.contains(s))return I5(a)?a:rl(a);var l=L0(e);return l.host?Wf(l.host,t):Wf(e,L0(t).host)}function nl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",r=t==="top"?"scrollTop":"scrollLeft",n=e.nodeName;if(n==="BODY"||n==="HTML"){var s=e.ownerDocument.documentElement,i=e.ownerDocument.scrollingElement||s;return i[r]}return e[r]}function M5(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=nl(t,"top"),s=nl(t,"left"),i=r?-1:1;return e.top+=n*i,e.bottom+=n*i,e.left+=s*i,e.right+=s*i,e}function pk(e,t){var r=t==="x"?"Left":"Top",n=r==="Left"?"Right":"Bottom";return parseFloat(e["border"+r+"Width"])+parseFloat(e["border"+n+"Width"])}function mk(e,t,r,n){return Math.max(t["offset"+e],t["scroll"+e],r["client"+e],r["offset"+e],r["scroll"+e],kl(10)?parseInt(r["offset"+e])+parseInt(n["margin"+(e==="Height"?"Top":"Left")])+parseInt(n["margin"+(e==="Height"?"Bottom":"Right")]):0)}function ZT(e){var t=e.body,r=e.documentElement,n=kl(10)&&getComputedStyle(r);return{height:mk("Height",t,r,n),width:mk("Width",t,r,n)}}var O5=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},P5=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),sl=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function qi(e){return Fn({},e,{right:e.left+e.width,bottom:e.top+e.height})}function F0(e){var t={};try{if(kl(10)){t=e.getBoundingClientRect();var r=nl(e,"top"),n=nl(e,"left");t.top+=r,t.left+=n,t.bottom+=r,t.right+=n}else t=e.getBoundingClientRect()}catch{}var s={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i=e.nodeName==="HTML"?ZT(e.ownerDocument):{},a=i.width||e.clientWidth||s.width,l=i.height||e.clientHeight||s.height,c=e.offsetWidth-a,u=e.offsetHeight-l;if(c||u){var d=eo(e);c-=pk(d,"x"),u-=pk(d,"y"),s.width-=c,s.height-=u}return qi(s)}function Gx(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=kl(10),s=t.nodeName==="HTML",i=F0(e),a=F0(t),l=Mu(e),c=eo(t),u=parseFloat(c.borderTopWidth),d=parseFloat(c.borderLeftWidth);r&&s&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var f=qi({top:i.top-a.top-u,left:i.left-a.left-d,width:i.width,height:i.height});if(f.marginTop=0,f.marginLeft=0,!n&&s){var h=parseFloat(c.marginTop),p=parseFloat(c.marginLeft);f.top-=u-h,f.bottom-=u-h,f.left-=d-p,f.right-=d-p,f.marginTop=h,f.marginLeft=p}return(n&&!r?t.contains(l):t===l&&l.nodeName!=="BODY")&&(f=M5(f,t)),f}function L5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e.ownerDocument.documentElement,n=Gx(e,r),s=Math.max(r.clientWidth,window.innerWidth||0),i=Math.max(r.clientHeight,window.innerHeight||0),a=t?0:nl(r),l=t?0:nl(r,"left"),c={top:a-n.top+n.marginTop,left:l-n.left+n.marginLeft,width:s,height:i};return qi(c)}function XT(e){var t=e.nodeName;if(t==="BODY"||t==="HTML")return!1;if(eo(e,"position")==="fixed")return!0;var r=Yx(e);return r?XT(r):!1}function JT(e){if(!e||!e.parentElement||kl())return document.documentElement;for(var t=e.parentElement;t&&eo(t,"transform")==="none";)t=t.parentElement;return t||document.documentElement}function qx(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,i={top:0,left:0},a=s?JT(e):Wf(e,QT(t));if(n==="viewport")i=L5(a,s);else{var l=void 0;n==="scrollParent"?(l=Mu(Yx(t)),l.nodeName==="BODY"&&(l=e.ownerDocument.documentElement)):n==="window"?l=e.ownerDocument.documentElement:l=n;var c=Gx(l,a,s);if(l.nodeName==="HTML"&&!XT(a)){var u=ZT(e.ownerDocument),d=u.height,f=u.width;i.top+=c.top-c.marginTop,i.bottom=d+c.top,i.left+=c.left-c.marginLeft,i.right=f+c.left}else i=c}r=r||0;var h=typeof r=="number";return i.left+=h?r:r.left||0,i.top+=h?r:r.top||0,i.right-=h?r:r.right||0,i.bottom-=h?r:r.bottom||0,i}function F5(e){var t=e.width,r=e.height;return t*r}function e2(e,t,r,n,s){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(e.indexOf("auto")===-1)return e;var a=qx(r,n,i,s),l={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},c=Object.keys(l).map(function(h){return Fn({key:h},l[h],{area:F5(l[h])})}).sort(function(h,p){return p.area-h.area}),u=c.filter(function(h){var p=h.width,g=h.height;return p>=r.clientWidth&&g>=r.clientHeight}),d=u.length>0?u[0].key:c[0].key,f=e.split("-")[1];return d+(f?"-"+f:"")}function t2(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=n?JT(t):Wf(t,QT(r));return Gx(r,s,n)}function r2(e){var t=e.ownerDocument.defaultView,r=t.getComputedStyle(e),n=parseFloat(r.marginTop||0)+parseFloat(r.marginBottom||0),s=parseFloat(r.marginLeft||0)+parseFloat(r.marginRight||0),i={width:e.offsetWidth+s,height:e.offsetHeight+n};return i}function Yf(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(r){return t[r]})}function n2(e,t,r){r=r.split("-")[0];var n=r2(e),s={width:n.width,height:n.height},i=["right","left"].indexOf(r)!==-1,a=i?"top":"left",l=i?"left":"top",c=i?"height":"width",u=i?"width":"height";return s[a]=t[a]+t[c]/2-n[c]/2,r===l?s[l]=t[l]-n[u]:s[l]=t[Yf(l)],s}function Ou(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function B5(e,t,r){if(Array.prototype.findIndex)return e.findIndex(function(s){return s[t]===r});var n=Ou(e,function(s){return s[t]===r});return e.indexOf(n)}function s2(e,t,r){var n=r===void 0?e:e.slice(0,B5(e,"name",r));return n.forEach(function(s){s.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=s.function||s.fn;s.enabled&&KT(i)&&(t.offsets.popper=qi(t.offsets.popper),t.offsets.reference=qi(t.offsets.reference),t=i(t,s))}),t}function z5(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=t2(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=e2(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=n2(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=s2(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function i2(e,t){return e.some(function(r){var n=r.name,s=r.enabled;return s&&n===t})}function Kx(e){for(var t=[!1,"ms","Webkit","Moz","O"],r=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var s=t[n],i=s?""+s+r:e;if(typeof document.body.style[i]<"u")return i}return null}function U5(){return this.state.isDestroyed=!0,i2(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Kx("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function a2(e){var t=e.ownerDocument;return t?t.defaultView:window}function o2(e,t,r,n){var s=e.nodeName==="BODY",i=s?e.ownerDocument.defaultView:e;i.addEventListener(t,r,{passive:!0}),s||o2(Mu(i.parentNode),t,r,n),n.push(i)}function H5(e,t,r,n){r.updateBound=n,a2(e).addEventListener("resize",r.updateBound,{passive:!0});var s=Mu(e);return o2(s,"scroll",r.updateBound,r.scrollParents),r.scrollElement=s,r.eventsEnabled=!0,r}function V5(){this.state.eventsEnabled||(this.state=H5(this.reference,this.options,this.state,this.scheduleUpdate))}function $5(e,t){return a2(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(r){r.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function W5(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=$5(this.reference,this.state))}function Qx(e){return e!==""&&!isNaN(parseFloat(e))&&isFinite(e)}function B0(e,t){Object.keys(t).forEach(function(r){var n="";["width","height","top","right","bottom","left"].indexOf(r)!==-1&&Qx(t[r])&&(n="px"),e.style[r]=t[r]+n})}function Y5(e,t){Object.keys(t).forEach(function(r){var n=t[r];n!==!1?e.setAttribute(r,t[r]):e.removeAttribute(r)})}function G5(e){return B0(e.instance.popper,e.styles),Y5(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&B0(e.arrowElement,e.arrowStyles),e}function q5(e,t,r,n,s){var i=t2(s,t,e,r.positionFixed),a=e2(r.placement,i,t,e,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return t.setAttribute("x-placement",a),B0(t,{position:r.positionFixed?"fixed":"absolute"}),r}function K5(e,t){var r=e.offsets,n=r.popper,s=r.reference,i=Math.round,a=Math.floor,l=function(v){return v},c=i(s.width),u=i(n.width),d=["left","right"].indexOf(e.placement)!==-1,f=e.placement.indexOf("-")!==-1,h=c%2===u%2,p=c%2===1&&u%2===1,g=t?d||f||h?i:a:l,y=t?i:l;return{left:g(p&&!f&&t?n.left-1:n.left),top:y(n.top),bottom:y(n.bottom),right:g(n.right)}}var Q5=Iu&&/Firefox/i.test(navigator.userAgent);function Z5(e,t){var r=t.x,n=t.y,s=e.offsets.popper,i=Ou(e.instance.modifiers,function(w){return w.name==="applyStyle"}).gpuAcceleration;i!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=i!==void 0?i:t.gpuAcceleration,l=rl(e.instance.popper),c=F0(l),u={position:s.position},d=K5(e,window.devicePixelRatio<2||!Q5),f=r==="bottom"?"top":"bottom",h=n==="right"?"left":"right",p=Kx("transform"),g=void 0,y=void 0;if(f==="bottom"?l.nodeName==="HTML"?y=-l.clientHeight+d.bottom:y=-c.height+d.bottom:y=d.top,h==="right"?l.nodeName==="HTML"?g=-l.clientWidth+d.right:g=-c.width+d.right:g=d.left,a&&p)u[p]="translate3d("+g+"px, "+y+"px, 0)",u[f]=0,u[h]=0,u.willChange="transform";else{var b=f==="bottom"?-1:1,v=h==="right"?-1:1;u[f]=y*b,u[h]=g*v,u.willChange=f+", "+h}var x={"x-placement":e.placement};return e.attributes=Fn({},x,e.attributes),e.styles=Fn({},u,e.styles),e.arrowStyles=Fn({},e.offsets.arrow,e.arrowStyles),e}function l2(e,t,r){var n=Ou(e,function(l){var c=l.name;return c===t}),s=!!n&&e.some(function(l){return l.name===r&&l.enabled&&l.order<n.order});if(!s){var i="`"+t+"`",a="`"+r+"`";console.warn(a+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return s}function X5(e,t){var r;if(!l2(e.instance.modifiers,"arrow","keepTogether"))return e;var n=t.element;if(typeof n=="string"){if(n=e.instance.popper.querySelector(n),!n)return e}else if(!e.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var s=e.placement.split("-")[0],i=e.offsets,a=i.popper,l=i.reference,c=["left","right"].indexOf(s)!==-1,u=c?"height":"width",d=c?"Top":"Left",f=d.toLowerCase(),h=c?"left":"top",p=c?"bottom":"right",g=r2(n)[u];l[p]-g<a[f]&&(e.offsets.popper[f]-=a[f]-(l[p]-g)),l[f]+g>a[p]&&(e.offsets.popper[f]+=l[f]+g-a[p]),e.offsets.popper=qi(e.offsets.popper);var y=l[f]+l[u]/2-g/2,b=eo(e.instance.popper),v=parseFloat(b["margin"+d]),x=parseFloat(b["border"+d+"Width"]),w=y-e.offsets.popper[f]-v-x;return w=Math.max(Math.min(a[u]-g,w),0),e.arrowElement=n,e.offsets.arrow=(r={},sl(r,f,Math.round(w)),sl(r,h,""),r),e}function J5(e){return e==="end"?"start":e==="start"?"end":e}var c2=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Nm=c2.slice(3);function gk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=Nm.indexOf(e),n=Nm.slice(r+1).concat(Nm.slice(0,r));return t?n.reverse():n}var jm={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function eF(e,t){if(i2(e.instance.modifiers,"inner")||e.flipped&&e.placement===e.originalPlacement)return e;var r=qx(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split("-")[0],s=Yf(n),i=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case jm.FLIP:a=[n,s];break;case jm.CLOCKWISE:a=gk(n);break;case jm.COUNTERCLOCKWISE:a=gk(n,!0);break;default:a=t.behavior}return a.forEach(function(l,c){if(n!==l||a.length===c+1)return e;n=e.placement.split("-")[0],s=Yf(n);var u=e.offsets.popper,d=e.offsets.reference,f=Math.floor,h=n==="left"&&f(u.right)>f(d.left)||n==="right"&&f(u.left)<f(d.right)||n==="top"&&f(u.bottom)>f(d.top)||n==="bottom"&&f(u.top)<f(d.bottom),p=f(u.left)<f(r.left),g=f(u.right)>f(r.right),y=f(u.top)<f(r.top),b=f(u.bottom)>f(r.bottom),v=n==="left"&&p||n==="right"&&g||n==="top"&&y||n==="bottom"&&b,x=["top","bottom"].indexOf(n)!==-1,w=!!t.flipVariations&&(x&&i==="start"&&p||x&&i==="end"&&g||!x&&i==="start"&&y||!x&&i==="end"&&b),k=!!t.flipVariationsByContent&&(x&&i==="start"&&g||x&&i==="end"&&p||!x&&i==="start"&&b||!x&&i==="end"&&y),S=w||k;(h||v||S)&&(e.flipped=!0,(h||v)&&(n=a[c+1]),S&&(i=J5(i)),e.placement=n+(i?"-"+i:""),e.offsets.popper=Fn({},e.offsets.popper,n2(e.instance.popper,e.offsets.reference,e.placement)),e=s2(e.instance.modifiers,e,"flip"))}),e}function tF(e){var t=e.offsets,r=t.popper,n=t.reference,s=e.placement.split("-")[0],i=Math.floor,a=["top","bottom"].indexOf(s)!==-1,l=a?"right":"bottom",c=a?"left":"top",u=a?"width":"height";return r[l]<i(n[c])&&(e.offsets.popper[c]=i(n[c])-r[u]),r[c]>i(n[l])&&(e.offsets.popper[c]=i(n[l])),e}function rF(e,t,r,n){var s=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+s[1],a=s[2];if(!i)return e;if(a.indexOf("%")===0){var l=void 0;switch(a){case"%p":l=r;break;case"%":case"%r":default:l=n}var c=qi(l);return c[t]/100*i}else if(a==="vh"||a==="vw"){var u=void 0;return a==="vh"?u=Math.max(document.documentElement.clientHeight,window.innerHeight||0):u=Math.max(document.documentElement.clientWidth,window.innerWidth||0),u/100*i}else return i}function nF(e,t,r,n){var s=[0,0],i=["right","left"].indexOf(n)!==-1,a=e.split(/(\+|\-)/).map(function(d){return d.trim()}),l=a.indexOf(Ou(a,function(d){return d.search(/,|\s/)!==-1}));a[l]&&a[l].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,u=l!==-1?[a.slice(0,l).concat([a[l].split(c)[0]]),[a[l].split(c)[1]].concat(a.slice(l+1))]:[a];return u=u.map(function(d,f){var h=(f===1?!i:i)?"height":"width",p=!1;return d.reduce(function(g,y){return g[g.length-1]===""&&["+","-"].indexOf(y)!==-1?(g[g.length-1]=y,p=!0,g):p?(g[g.length-1]+=y,p=!1,g):g.concat(y)},[]).map(function(g){return rF(g,h,t,r)})}),u.forEach(function(d,f){d.forEach(function(h,p){Qx(h)&&(s[f]+=h*(d[p-1]==="-"?-1:1))})}),s}function sF(e,t){var r=t.offset,n=e.placement,s=e.offsets,i=s.popper,a=s.reference,l=n.split("-")[0],c=void 0;return Qx(+r)?c=[+r,0]:c=nF(r,i,a,l),l==="left"?(i.top+=c[0],i.left-=c[1]):l==="right"?(i.top+=c[0],i.left+=c[1]):l==="top"?(i.left+=c[0],i.top-=c[1]):l==="bottom"&&(i.left+=c[0],i.top+=c[1]),e.popper=i,e}function iF(e,t){var r=t.boundariesElement||rl(e.instance.popper);e.instance.reference===r&&(r=rl(r));var n=Kx("transform"),s=e.instance.popper.style,i=s.top,a=s.left,l=s[n];s.top="",s.left="",s[n]="";var c=qx(e.instance.popper,e.instance.reference,t.padding,r,e.positionFixed);s.top=i,s.left=a,s[n]=l,t.boundaries=c;var u=t.priority,d=e.offsets.popper,f={primary:function(p){var g=d[p];return d[p]<c[p]&&!t.escapeWithReference&&(g=Math.max(d[p],c[p])),sl({},p,g)},secondary:function(p){var g=p==="right"?"left":"top",y=d[g];return d[p]>c[p]&&!t.escapeWithReference&&(y=Math.min(d[g],c[p]-(p==="right"?d.width:d.height))),sl({},g,y)}};return u.forEach(function(h){var p=["left","top"].indexOf(h)!==-1?"primary":"secondary";d=Fn({},d,f[p](h))}),e.offsets.popper=d,e}function aF(e){var t=e.placement,r=t.split("-")[0],n=t.split("-")[1];if(n){var s=e.offsets,i=s.reference,a=s.popper,l=["bottom","top"].indexOf(r)!==-1,c=l?"left":"top",u=l?"width":"height",d={start:sl({},c,i[c]),end:sl({},c,i[c]+i[u]-a[u])};e.offsets.popper=Fn({},a,d[n])}return e}function oF(e){if(!l2(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,r=Ou(e.instance.modifiers,function(n){return n.name==="preventOverflow"}).boundaries;if(t.bottom<r.top||t.left>r.right||t.top>r.bottom||t.right<r.left){if(e.hide===!0)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(e.hide===!1)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}function lF(e){var t=e.placement,r=t.split("-")[0],n=e.offsets,s=n.popper,i=n.reference,a=["left","right"].indexOf(r)!==-1,l=["top","left"].indexOf(r)===-1;return s[a?"left":"top"]=i[r]-(l?s[a?"width":"height"]:0),e.placement=Yf(t),e.offsets.popper=qi(s),e}var cF={shift:{order:100,enabled:!0,fn:aF},offset:{order:200,enabled:!0,fn:sF,offset:0},preventOverflow:{order:300,enabled:!0,fn:iF,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:tF},arrow:{order:500,enabled:!0,fn:X5,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:eF,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:lF},hide:{order:800,enabled:!0,fn:oF},computeStyle:{order:850,enabled:!0,fn:Z5,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:G5,onLoad:q5,gpuAcceleration:void 0}},uF={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:cF},au=function(){function e(t,r){var n=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};O5(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=_5(this.update.bind(this)),this.options=Fn({},e.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(Fn({},e.Defaults.modifiers,s.modifiers)).forEach(function(a){n.options.modifiers[a]=Fn({},e.Defaults.modifiers[a]||{},s.modifiers?s.modifiers[a]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(a){return Fn({name:a},n.options.modifiers[a])}).sort(function(a,l){return a.order-l.order}),this.modifiers.forEach(function(a){a.enabled&&KT(a.onLoad)&&a.onLoad(n.reference,n.popper,n.options,a,n.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return P5(e,[{key:"update",value:function(){return z5.call(this)}},{key:"destroy",value:function(){return U5.call(this)}},{key:"enableEventListeners",value:function(){return V5.call(this)}},{key:"disableEventListeners",value:function(){return W5.call(this)}}]),e}();au.Utils=(typeof window<"u"?window:global).PopperUtils;au.placements=c2;au.Defaults=uF;var dF=["innerHTML","ownerDocument","style","attributes","nodeValue"],fF=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],hF=["bigint","boolean","null","number","string","symbol","undefined"];function ip(e){var t=Object.prototype.toString.call(e).slice(8,-1);if(/HTML\w+Element/.test(t))return"HTMLElement";if(pF(t))return t}function us(e){return function(t){return ip(t)===e}}function pF(e){return fF.includes(e)}function Sl(e){return function(t){return typeof t===e}}function mF(e){return hF.includes(e)}function Z(e){if(e===null)return"null";switch(typeof e){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(Z.array(e))return"Array";if(Z.plainFunction(e))return"Function";var t=ip(e);return t||"Object"}Z.array=Array.isArray;Z.arrayOf=function(e,t){return!Z.array(e)&&!Z.function(t)?!1:e.every(function(r){return t(r)})};Z.asyncGeneratorFunction=function(e){return ip(e)==="AsyncGeneratorFunction"};Z.asyncFunction=us("AsyncFunction");Z.bigint=Sl("bigint");Z.boolean=function(e){return e===!0||e===!1};Z.date=us("Date");Z.defined=function(e){return!Z.undefined(e)};Z.domElement=function(e){return Z.object(e)&&!Z.plainObject(e)&&e.nodeType===1&&Z.string(e.nodeName)&&dF.every(function(t){return t in e})};Z.empty=function(e){return Z.string(e)&&e.length===0||Z.array(e)&&e.length===0||Z.object(e)&&!Z.map(e)&&!Z.set(e)&&Object.keys(e).length===0||Z.set(e)&&e.size===0||Z.map(e)&&e.size===0};Z.error=us("Error");Z.function=Sl("function");Z.generator=function(e){return Z.iterable(e)&&Z.function(e.next)&&Z.function(e.throw)};Z.generatorFunction=us("GeneratorFunction");Z.instanceOf=function(e,t){return!e||!t?!1:Object.getPrototypeOf(e)===t.prototype};Z.iterable=function(e){return!Z.nullOrUndefined(e)&&Z.function(e[Symbol.iterator])};Z.map=us("Map");Z.nan=function(e){return Number.isNaN(e)};Z.null=function(e){return e===null};Z.nullOrUndefined=function(e){return Z.null(e)||Z.undefined(e)};Z.number=function(e){return Sl("number")(e)&&!Z.nan(e)};Z.numericString=function(e){return Z.string(e)&&e.length>0&&!Number.isNaN(Number(e))};Z.object=function(e){return!Z.nullOrUndefined(e)&&(Z.function(e)||typeof e=="object")};Z.oneOf=function(e,t){return Z.array(e)?e.indexOf(t)>-1:!1};Z.plainFunction=us("Function");Z.plainObject=function(e){if(ip(e)!=="Object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.getPrototypeOf({})};Z.primitive=function(e){return Z.null(e)||mF(typeof e)};Z.promise=us("Promise");Z.propertyOf=function(e,t,r){if(!Z.object(e)||!t)return!1;var n=e[t];return Z.function(r)?r(n):Z.defined(n)};Z.regexp=us("RegExp");Z.set=us("Set");Z.string=Sl("string");Z.symbol=Sl("symbol");Z.undefined=Sl("undefined");Z.weakMap=us("WeakMap");Z.weakSet=us("WeakSet");function u2(e){return function(t){return typeof t===e}}var gF=u2("function"),yF=function(e){return e===null},yk=function(e){return Object.prototype.toString.call(e).slice(8,-1)==="RegExp"},xk=function(e){return!xF(e)&&!yF(e)&&(gF(e)||typeof e=="object")},xF=u2("undefined"),z0=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function vF(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=r;n--!==0;)if(!nn(e[n],t[n]))return!1;return!0}function bF(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new DataView(e.buffer),n=new DataView(t.buffer),s=e.byteLength;s--;)if(r.getUint8(s)!==n.getUint8(s))return!1;return!0}function wF(e,t){var r,n,s,i;if(e.size!==t.size)return!1;try{for(var a=z0(e.entries()),l=a.next();!l.done;l=a.next()){var c=l.value;if(!t.has(c[0]))return!1}}catch(f){r={error:f}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}try{for(var u=z0(e.entries()),d=u.next();!d.done;d=u.next()){var c=d.value;if(!nn(c[1],t.get(c[0])))return!1}}catch(f){s={error:f}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(s)throw s.error}}return!0}function kF(e,t){var r,n;if(e.size!==t.size)return!1;try{for(var s=z0(e.entries()),i=s.next();!i.done;i=s.next()){var a=i.value;if(!t.has(a[0]))return!1}}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!0}function nn(e,t){if(e===t)return!0;if(e&&xk(e)&&t&&xk(t)){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)&&Array.isArray(t))return vF(e,t);if(e instanceof Map&&t instanceof Map)return wF(e,t);if(e instanceof Set&&t instanceof Set)return kF(e,t);if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return bF(e,t);if(yk(e)&&yk(t))return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var s=r.length;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[s]))return!1;for(var s=r.length;s--!==0;){var i=r[s];if(!(i==="_owner"&&e.$$typeof)&&!nn(e[i],t[i]))return!1}return!0}return Number.isNaN(e)&&Number.isNaN(t)?!0:e===t}function SF(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every(function(r){return Z.string(r)||Z.array(r)||Z.plainObject(r)})}function EF(e,t,r){return d2(e,t)?[e,t].every(Z.array)?!e.some(Sk(r))&&t.some(Sk(r)):[e,t].every(Z.plainObject)?!Object.entries(e).some(kk(r))&&Object.entries(t).some(kk(r)):t===r:!1}function vk(e,t,r){var n=r.actual,s=r.key,i=r.previous,a=r.type,l=Es(e,s),c=Es(t,s),u=[l,c].every(Z.number)&&(a==="increased"?l<c:l>c);return Z.undefined(n)||(u=u&&c===n),Z.undefined(i)||(u=u&&l===i),u}function bk(e,t,r){var n=r.key,s=r.type,i=r.value,a=Es(e,n),l=Es(t,n),c=s==="added"?a:l,u=s==="added"?l:a;if(!Z.nullOrUndefined(i)){if(Z.defined(c)){if(Z.array(c)||Z.plainObject(c))return EF(c,u,i)}else return nn(u,i);return!1}return[a,l].every(Z.array)?!u.every(Zx(c)):[a,l].every(Z.plainObject)?NF(Object.keys(c),Object.keys(u)):![a,l].every(function(d){return Z.primitive(d)&&Z.defined(d)})&&(s==="added"?!Z.defined(a)&&Z.defined(l):Z.defined(a)&&!Z.defined(l))}function wk(e,t,r){var n=r===void 0?{}:r,s=n.key,i=Es(e,s),a=Es(t,s);if(!d2(i,a))throw new TypeError("Inputs have different types");if(!SF(i,a))throw new TypeError("Inputs don't have length");return[i,a].every(Z.plainObject)&&(i=Object.keys(i),a=Object.keys(a)),[i,a]}function kk(e){return function(t){var r=t[0],n=t[1];return Z.array(e)?nn(e,n)||e.some(function(s){return nn(s,n)||Z.array(n)&&Zx(n)(s)}):Z.plainObject(e)&&e[r]?!!e[r]&&nn(e[r],n):nn(e,n)}}function NF(e,t){return t.some(function(r){return!e.includes(r)})}function Sk(e){return function(t){return Z.array(e)?e.some(function(r){return nn(r,t)||Z.array(t)&&Zx(t)(r)}):nn(e,t)}}function Hl(e,t){return Z.array(e)?e.some(function(r){return nn(r,t)}):nn(e,t)}function Zx(e){return function(t){return e.some(function(r){return nn(r,t)})}}function d2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every(Z.array)||e.every(Z.number)||e.every(Z.plainObject)||e.every(Z.string)}function Es(e,t){if(Z.plainObject(e)||Z.array(e)){if(Z.string(t)){var r=t.split(".");return r.reduce(function(n,s){return n&&n[s]},e)}return Z.number(t)?e[t]:e}return e}function jF(e,t){if([e,t].some(Z.nullOrUndefined))throw new Error("Missing required parameters");if(![e,t].every(function(f){return Z.plainObject(f)||Z.array(f)}))throw new Error("Expected plain objects or array");var r=function(f,h){try{return bk(e,t,{key:f,type:"added",value:h})}catch{return!1}},n=function(f,h,p){try{var g=Es(e,f),y=Es(t,f),b=Z.defined(h),v=Z.defined(p);if(b||v){var x=v?Hl(p,g):!Hl(h,g),w=Hl(h,y);return x&&w}return[g,y].every(Z.array)||[g,y].every(Z.plainObject)?!nn(g,y):g!==y}catch{return!1}},s=function(f,h,p){if(!Z.defined(f))return!1;try{var g=Es(e,f),y=Es(t,f),b=Z.defined(p);return Hl(h,g)&&(b?Hl(p,y):!b)}catch{return!1}},i=function(f,h){return Z.defined(f)?n(f,h):!1},a=function(f,h,p){if(!Z.defined(f))return!1;try{return vk(e,t,{key:f,actual:h,previous:p,type:"decreased"})}catch{return!1}},l=function(f){try{var h=wk(e,t,{key:f}),p=h[0],g=h[1];return!!p.length&&!g.length}catch{return!1}},c=function(f){try{var h=wk(e,t,{key:f}),p=h[0],g=h[1];return!p.length&&!!g.length}catch{return!1}},u=function(f,h,p){if(!Z.defined(f))return!1;try{return vk(e,t,{key:f,actual:h,previous:p,type:"increased"})}catch{return!1}},d=function(f,h){try{return bk(e,t,{key:f,type:"removed",value:h})}catch{return!1}};return{added:r,changed:n,changedFrom:s,changedTo:i,decreased:a,emptied:l,filled:c,increased:u,removed:d}}function Ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ek(Object(r),!0).forEach(function(n){Rr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ek(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h2(n.key),n)}}function Lu(e,t,r){return t&&CF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rr(e,t,r){return t=h2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U0(e,t)}function Gf(e){return Gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gf(e)}function U0(e,t){return U0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},U0(e,t)}function TF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function AF(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function f2(e,t){if(e==null)return{};var r=AF(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Us(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DF(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Us(e)}function Bu(e){var t=TF();return function(){var n=Gf(e),s;if(t){var i=Gf(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return DF(this,s)}}function RF(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h2(e){var t=RF(e,"string");return typeof t=="symbol"?t:String(t)}var _F={flip:{padding:20},preventOverflow:{padding:10}},IF="The typeValidator argument must be a function with the signature function(props, propName, componentName).",MF="The error message is optional, but must be a string if provided.";function OF(e,t,r,n){return typeof e=="boolean"?e:typeof e=="function"?e(t,r,n):e?!!e:!1}function PF(e,t){return Object.hasOwnProperty.call(e,t)}function LF(e,t,r,n){return new Error("Required ".concat(e[t]," `").concat(t,"` was not specified in `").concat(r,"`."))}function FF(e,t){if(typeof e!="function")throw new TypeError(IF);if(t&&typeof t!="string")throw new TypeError(MF)}function Nk(e,t,r){return FF(e,r),function(n,s,i){for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];return OF(t,n,s,i)?PF(n,s)?e.apply(void 0,[n,s,i].concat(l)):LF(n,s,i):e.apply(void 0,[n,s,i].concat(l))}}var lt={INIT:"init",IDLE:"idle",OPENING:"opening",OPEN:"open",CLOSING:"closing"},Vl=kc.createPortal!==void 0;function ys(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Cm(){return"ontouchstart"in window&&/Mobi/.test(navigator.userAgent)}function xd(e){var t=e.title,r=e.data,n=e.warn,s=n===void 0?!1:n,i=e.debug,a=i===void 0?!1:i,l=s?console.warn||console.error:console.log;a&&t&&r&&(console.groupCollapsed("%creact-floater: ".concat(t),"color: #9b00ff; font-weight: bold; font-size: 12px;"),Array.isArray(r)?r.forEach(function(c){Z.plainObject(c)&&c.key?l.apply(console,[c.key,c.value]):l.apply(console,[c])}):l.apply(console,[r]),console.groupEnd())}function BF(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;e.addEventListener(t,r,n)}function zF(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;e.removeEventListener(t,r,n)}function UF(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s;s=function(a){r(a),zF(e,t,s)},BF(e,t,s,n)}function jk(){}var p2=function(e){Fu(r,e);var t=Bu(r);function r(){return Pu(this,r),t.apply(this,arguments)}return Lu(r,[{key:"componentDidMount",value:function(){ys()&&(this.node||this.appendNode(),Vl||this.renderPortal())}},{key:"componentDidUpdate",value:function(){ys()&&(Vl||this.renderPortal())}},{key:"componentWillUnmount",value:function(){!ys()||!this.node||(Vl||kc.unmountComponentAtNode(this.node),this.node&&this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=void 0))}},{key:"appendNode",value:function(){var s=this.props,i=s.id,a=s.zIndex;this.node||(this.node=document.createElement("div"),i&&(this.node.id=i),a&&(this.node.style.zIndex=a),document.body.appendChild(this.node))}},{key:"renderPortal",value:function(){if(!ys())return null;var s=this.props,i=s.children,a=s.setRef;if(this.node||this.appendNode(),Vl)return kc.createPortal(i,this.node);var l=kc.unstable_renderSubtreeIntoContainer(this,i.length>1?re.createElement("div",null,i):i[0],this.node);return a(l),null}},{key:"renderReact16",value:function(){var s=this.props,i=s.hasChildren,a=s.placement,l=s.target;return i?this.renderPortal():l||a==="center"?this.renderPortal():null}},{key:"render",value:function(){return Vl?this.renderReact16():null}}]),r}(re.Component);Rr(p2,"propTypes",{children:me.oneOfType([me.element,me.array]),hasChildren:me.bool,id:me.oneOfType([me.string,me.number]),placement:me.string,setRef:me.func.isRequired,target:me.oneOfType([me.object,me.string]),zIndex:me.number});var m2=function(e){Fu(r,e);var t=Bu(r);function r(){return Pu(this,r),t.apply(this,arguments)}return Lu(r,[{key:"parentStyle",get:function(){var s=this.props,i=s.placement,a=s.styles,l=a.arrow.length,c={pointerEvents:"none",position:"absolute",width:"100%"};return i.startsWith("top")?(c.bottom=0,c.left=0,c.right=0,c.height=l):i.startsWith("bottom")?(c.left=0,c.right=0,c.top=0,c.height=l):i.startsWith("left")?(c.right=0,c.top=0,c.bottom=0):i.startsWith("right")&&(c.left=0,c.top=0),c}},{key:"render",value:function(){var s=this.props,i=s.placement,a=s.setArrowRef,l=s.styles,c=l.arrow,u=c.color,d=c.display,f=c.length,h=c.margin,p=c.position,g=c.spread,y={display:d,position:p},b,v=g,x=f;return i.startsWith("top")?(b="0,0 ".concat(v/2,",").concat(x," ").concat(v,",0"),y.bottom=0,y.marginLeft=h,y.marginRight=h):i.startsWith("bottom")?(b="".concat(v,",").concat(x," ").concat(v/2,",0 0,").concat(x),y.top=0,y.marginLeft=h,y.marginRight=h):i.startsWith("left")?(x=g,v=f,b="0,0 ".concat(v,",").concat(x/2," 0,").concat(x),y.right=0,y.marginTop=h,y.marginBottom=h):i.startsWith("right")&&(x=g,v=f,b="".concat(v,",").concat(x," ").concat(v,",0 0,").concat(x/2),y.left=0,y.marginTop=h,y.marginBottom=h),re.createElement("div",{className:"__floater__arrow",style:this.parentStyle},re.createElement("span",{ref:a,style:y},re.createElement("svg",{width:v,height:x,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},re.createElement("polygon",{points:b,fill:u}))))}}]),r}(re.Component);Rr(m2,"propTypes",{placement:me.string.isRequired,setArrowRef:me.func.isRequired,styles:me.object.isRequired});var HF=["color","height","width"];function g2(e){var t=e.handleClick,r=e.styles,n=r.color,s=r.height,i=r.width,a=f2(r,HF);return re.createElement("button",{"aria-label":"close",onClick:t,style:a,type:"button"},re.createElement("svg",{width:"".concat(i,"px"),height:"".concat(s,"px"),viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},re.createElement("g",null,re.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:n}))))}g2.propTypes={handleClick:me.func.isRequired,styles:me.object.isRequired};function y2(e){var t=e.content,r=e.footer,n=e.handleClick,s=e.open,i=e.positionWrapper,a=e.showCloseButton,l=e.title,c=e.styles,u={content:re.isValidElement(t)?t:re.createElement("div",{className:"__floater__content",style:c.content},t)};return l&&(u.title=re.isValidElement(l)?l:re.createElement("div",{className:"__floater__title",style:c.title},l)),r&&(u.footer=re.isValidElement(r)?r:re.createElement("div",{className:"__floater__footer",style:c.footer},r)),(a||i)&&!Z.boolean(s)&&(u.close=re.createElement(g2,{styles:c.close,handleClick:n})),re.createElement("div",{className:"__floater__container",style:c.container},u.close,u.title,u.content,u.footer)}y2.propTypes={content:me.node.isRequired,footer:me.node,handleClick:me.func.isRequired,open:me.bool,positionWrapper:me.bool.isRequired,showCloseButton:me.bool.isRequired,styles:me.object.isRequired,title:me.node};var x2=function(e){Fu(r,e);var t=Bu(r);function r(){return Pu(this,r),t.apply(this,arguments)}return Lu(r,[{key:"style",get:function(){var s=this.props,i=s.disableAnimation,a=s.component,l=s.placement,c=s.hideArrow,u=s.status,d=s.styles,f=d.arrow.length,h=d.floater,p=d.floaterCentered,g=d.floaterClosing,y=d.floaterOpening,b=d.floaterWithAnimation,v=d.floaterWithComponent,x={};return c||(l.startsWith("top")?x.padding="0 0 ".concat(f,"px"):l.startsWith("bottom")?x.padding="".concat(f,"px 0 0"):l.startsWith("left")?x.padding="0 ".concat(f,"px 0 0"):l.startsWith("right")&&(x.padding="0 0 0 ".concat(f,"px"))),[lt.OPENING,lt.OPEN].indexOf(u)!==-1&&(x=It(It({},x),y)),u===lt.CLOSING&&(x=It(It({},x),g)),u===lt.OPEN&&!i&&(x=It(It({},x),b)),l==="center"&&(x=It(It({},x),p)),a&&(x=It(It({},x),v)),It(It({},h),x)}},{key:"render",value:function(){var s=this.props,i=s.component,a=s.handleClick,l=s.hideArrow,c=s.setFloaterRef,u=s.status,d={},f=["__floater"];return i?re.isValidElement(i)?d.content=re.cloneElement(i,{closeFn:a}):d.content=i({closeFn:a}):d.content=re.createElement(y2,this.props),u===lt.OPEN&&f.push("__floater__open"),l||(d.arrow=re.createElement(m2,this.props)),re.createElement("div",{ref:c,className:f.join(" "),style:this.style},re.createElement("div",{className:"__floater__body"},d.content,d.arrow))}}]),r}(re.Component);Rr(x2,"propTypes",{component:me.oneOfType([me.func,me.element]),content:me.node,disableAnimation:me.bool.isRequired,footer:me.node,handleClick:me.func.isRequired,hideArrow:me.bool.isRequired,open:me.bool,placement:me.string.isRequired,positionWrapper:me.bool.isRequired,setArrowRef:me.func.isRequired,setFloaterRef:me.func.isRequired,showCloseButton:me.bool,status:me.string.isRequired,styles:me.object.isRequired,title:me.node});var v2=function(e){Fu(r,e);var t=Bu(r);function r(){return Pu(this,r),t.apply(this,arguments)}return Lu(r,[{key:"render",value:function(){var s=this.props,i=s.children,a=s.handleClick,l=s.handleMouseEnter,c=s.handleMouseLeave,u=s.setChildRef,d=s.setWrapperRef,f=s.style,h=s.styles,p;if(i)if(re.Children.count(i)===1)if(!re.isValidElement(i))p=re.createElement("span",null,i);else{var g=Z.function(i.type)?"innerRef":"ref";p=re.cloneElement(re.Children.only(i),Rr({},g,u))}else p=i;return p?re.createElement("span",{ref:d,style:It(It({},h),f),onClick:a,onMouseEnter:l,onMouseLeave:c},p):null}}]),r}(re.Component);Rr(v2,"propTypes",{children:me.node,handleClick:me.func.isRequired,handleMouseEnter:me.func.isRequired,handleMouseLeave:me.func.isRequired,setChildRef:me.func.isRequired,setWrapperRef:me.func.isRequired,style:me.object,styles:me.object.isRequired});var VF={zIndex:100};function $F(e){var t=Jn(VF,e.options||{});return{wrapper:{cursor:"help",display:"inline-flex",flexDirection:"column",zIndex:t.zIndex},wrapperPosition:{left:-1e3,position:"absolute",top:-1e3,visibility:"hidden"},floater:{display:"inline-block",filter:"drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))",maxWidth:300,opacity:0,position:"relative",transition:"opacity 0.3s",visibility:"hidden",zIndex:t.zIndex},floaterOpening:{opacity:1,visibility:"visible"},floaterWithAnimation:{opacity:1,transition:"opacity 0.3s, transform 0.2s",visibility:"visible"},floaterWithComponent:{maxWidth:"100%"},floaterClosing:{opacity:0,visibility:"visible"},floaterCentered:{left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)"},container:{backgroundColor:"#fff",color:"#666",minHeight:60,minWidth:200,padding:20,position:"relative",zIndex:10},title:{borderBottom:"1px solid #555",color:"#555",fontSize:18,marginBottom:5,paddingBottom:6,paddingRight:18},content:{fontSize:15},close:{backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",fontSize:0,height:15,outline:"none",padding:10,position:"absolute",right:0,top:0,width:15,WebkitAppearance:"none"},footer:{borderTop:"1px solid #ccc",fontSize:13,marginTop:10,paddingTop:5},arrow:{color:"#fff",display:"inline-flex",length:16,margin:8,position:"absolute",spread:32},options:t}}var WF=["arrow","flip","offset"],YF=["position","top","right","bottom","left"],Xx=function(e){Fu(r,e);var t=Bu(r);function r(n){var s;return Pu(this,r),s=t.call(this,n),Rr(Us(s),"setArrowRef",function(i){s.arrowRef=i}),Rr(Us(s),"setChildRef",function(i){s.childRef=i}),Rr(Us(s),"setFloaterRef",function(i){s.floaterRef=i}),Rr(Us(s),"setWrapperRef",function(i){s.wrapperRef=i}),Rr(Us(s),"handleTransitionEnd",function(){var i=s.state.status,a=s.props.callback;s.wrapperPopper&&s.wrapperPopper.instance.update(),s.setState({status:i===lt.OPENING?lt.OPEN:lt.IDLE},function(){var l=s.state.status;a(l===lt.OPEN?"open":"close",s.props)})}),Rr(Us(s),"handleClick",function(){var i=s.props,a=i.event,l=i.open;if(!Z.boolean(l)){var c=s.state,u=c.positionWrapper,d=c.status;(s.event==="click"||s.event==="hover"&&u)&&(xd({title:"click",data:[{event:a,status:d===lt.OPEN?"closing":"opening"}],debug:s.debug}),s.toggle())}}),Rr(Us(s),"handleMouseEnter",function(){var i=s.props,a=i.event,l=i.open;if(!(Z.boolean(l)||Cm())){var c=s.state.status;s.event==="hover"&&c===lt.IDLE&&(xd({title:"mouseEnter",data:[{key:"originalEvent",value:a}],debug:s.debug}),clearTimeout(s.eventDelayTimeout),s.toggle())}}),Rr(Us(s),"handleMouseLeave",function(){var i=s.props,a=i.event,l=i.eventDelay,c=i.open;if(!(Z.boolean(c)||Cm())){var u=s.state,d=u.status,f=u.positionWrapper;s.event==="hover"&&(xd({title:"mouseLeave",data:[{key:"originalEvent",value:a}],debug:s.debug}),l?[lt.OPENING,lt.OPEN].indexOf(d)!==-1&&!f&&!s.eventDelayTimeout&&(s.eventDelayTimeout=setTimeout(function(){delete s.eventDelayTimeout,s.toggle()},l*1e3)):s.toggle(lt.IDLE))}}),s.state={currentPlacement:n.placement,needsUpdate:!1,positionWrapper:n.wrapperOptions.position&&!!n.target,status:lt.INIT,statusWrapper:lt.INIT},s._isMounted=!1,s.hasMounted=!1,ys()&&window.addEventListener("load",function(){s.popper&&s.popper.instance.update(),s.wrapperPopper&&s.wrapperPopper.instance.update()}),s}return Lu(r,[{key:"componentDidMount",value:function(){if(ys()){var s=this.state.positionWrapper,i=this.props,a=i.children,l=i.open,c=i.target;this._isMounted=!0,xd({title:"init",data:{hasChildren:!!a,hasTarget:!!c,isControlled:Z.boolean(l),positionWrapper:s,target:this.target,floater:this.floaterRef},debug:this.debug}),this.hasMounted||(this.initPopper(),this.hasMounted=!0),!a&&c&&Z.boolean(l)}}},{key:"componentDidUpdate",value:function(s,i){if(ys()){var a=this.props,l=a.autoOpen,c=a.open,u=a.target,d=a.wrapperOptions,f=jF(i,this.state),h=f.changedFrom,p=f.changed;if(s.open!==c){var g;Z.boolean(c)&&(g=c?lt.OPENING:lt.CLOSING),this.toggle(g)}(s.wrapperOptions.position!==d.position||s.target!==u)&&this.changeWrapperPosition(this.props),p("status",lt.IDLE)&&c?this.toggle(lt.OPEN):h("status",lt.INIT,lt.IDLE)&&l&&this.toggle(lt.OPEN),this.popper&&p("status",lt.OPENING)&&this.popper.instance.update(),this.floaterRef&&(p("status",lt.OPENING)||p("status",lt.CLOSING))&&UF(this.floaterRef,"transitionend",this.handleTransitionEnd),p("needsUpdate",!0)&&this.rebuildPopper()}}},{key:"componentWillUnmount",value:function(){ys()&&(this._isMounted=!1,this.popper&&this.popper.instance.destroy(),this.wrapperPopper&&this.wrapperPopper.instance.destroy())}},{key:"initPopper",value:function(){var s=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.target,a=this.state.positionWrapper,l=this.props,c=l.disableFlip,u=l.getPopper,d=l.hideArrow,f=l.offset,h=l.placement,p=l.wrapperOptions,g=h==="top"||h==="bottom"?"flip":["right","bottom-end","top-end","left","top-start","bottom-start"];if(h==="center")this.setState({status:lt.IDLE});else if(i&&this.floaterRef){var y=this.options,b=y.arrow,v=y.flip,x=y.offset,w=f2(y,WF);new au(i,this.floaterRef,{placement:h,modifiers:It({arrow:It({enabled:!d,element:this.arrowRef},b),flip:It({enabled:!c,behavior:g},v),offset:It({offset:"0, ".concat(f,"px")},x)},w),onCreate:function(E){var N;if(s.popper=E,!((N=s.floaterRef)!==null&&N!==void 0&&N.isConnected)){s.setState({needsUpdate:!0});return}u(E,"floater"),s._isMounted&&s.setState({currentPlacement:E.placement,status:lt.IDLE}),h!==E.placement&&setTimeout(function(){E.instance.update()},1)},onUpdate:function(E){s.popper=E;var N=s.state.currentPlacement;s._isMounted&&E.placement!==N&&s.setState({currentPlacement:E.placement})}})}if(a){var k=Z.undefined(p.offset)?0:p.offset;new au(this.target,this.wrapperRef,{placement:p.placement||h,modifiers:{arrow:{enabled:!1},offset:{offset:"0, ".concat(k,"px")},flip:{enabled:!1}},onCreate:function(E){s.wrapperPopper=E,s._isMounted&&s.setState({statusWrapper:lt.IDLE}),u(E,"wrapper"),h!==E.placement&&setTimeout(function(){E.instance.update()},1)}})}}},{key:"rebuildPopper",value:function(){var s=this;this.floaterRefInterval=setInterval(function(){var i;(i=s.floaterRef)!==null&&i!==void 0&&i.isConnected&&(clearInterval(s.floaterRefInterval),s.setState({needsUpdate:!1}),s.initPopper())},50)}},{key:"changeWrapperPosition",value:function(s){var i=s.target,a=s.wrapperOptions;this.setState({positionWrapper:a.position&&!!i})}},{key:"toggle",value:function(s){var i=this.state.status,a=i===lt.OPEN?lt.CLOSING:lt.OPENING;Z.undefined(s)||(a=s),this.setState({status:a})}},{key:"debug",get:function(){var s=this.props.debug;return s||ys()&&"ReactFloaterDebug"in window&&!!window.ReactFloaterDebug}},{key:"event",get:function(){var s=this.props,i=s.disableHoverToClick,a=s.event;return a==="hover"&&Cm()&&!i?"click":a}},{key:"options",get:function(){var s=this.props.options;return Jn(_F,s||{})}},{key:"styles",get:function(){var s=this,i=this.state,a=i.status,l=i.positionWrapper,c=i.statusWrapper,u=this.props.styles,d=Jn($F(u),u);if(l){var f;[lt.IDLE].indexOf(a)===-1||[lt.IDLE].indexOf(c)===-1?f=d.wrapperPosition:f=this.wrapperPopper.styles,d.wrapper=It(It({},d.wrapper),f)}if(this.target){var h=window.getComputedStyle(this.target);this.wrapperStyles?d.wrapper=It(It({},d.wrapper),this.wrapperStyles):["relative","static"].indexOf(h.position)===-1&&(this.wrapperStyles={},l||(YF.forEach(function(p){s.wrapperStyles[p]=h[p]}),d.wrapper=It(It({},d.wrapper),this.wrapperStyles),this.target.style.position="relative",this.target.style.top="auto",this.target.style.right="auto",this.target.style.bottom="auto",this.target.style.left="auto"))}return d}},{key:"target",get:function(){if(!ys())return null;var s=this.props.target;return s?Z.domElement(s)?s:document.querySelector(s):this.childRef||this.wrapperRef}},{key:"render",value:function(){var s=this.state,i=s.currentPlacement,a=s.positionWrapper,l=s.status,c=this.props,u=c.children,d=c.component,f=c.content,h=c.disableAnimation,p=c.footer,g=c.hideArrow,y=c.id,b=c.open,v=c.showCloseButton,x=c.style,w=c.target,k=c.title,S=re.createElement(v2,{handleClick:this.handleClick,handleMouseEnter:this.handleMouseEnter,handleMouseLeave:this.handleMouseLeave,setChildRef:this.setChildRef,setWrapperRef:this.setWrapperRef,style:x,styles:this.styles.wrapper},u),E={};return a?E.wrapperInPortal=S:E.wrapperAsChildren=S,re.createElement("span",null,re.createElement(p2,{hasChildren:!!u,id:y,placement:i,setRef:this.setFloaterRef,target:w,zIndex:this.styles.options.zIndex},re.createElement(x2,{component:d,content:f,disableAnimation:h,footer:p,handleClick:this.handleClick,hideArrow:g||i==="center",open:b,placement:i,positionWrapper:a,setArrowRef:this.setArrowRef,setFloaterRef:this.setFloaterRef,showCloseButton:v,status:l,styles:this.styles,title:k}),E.wrapperInPortal),E.wrapperAsChildren)}}]),r}(re.Component);Rr(Xx,"propTypes",{autoOpen:me.bool,callback:me.func,children:me.node,component:Nk(me.oneOfType([me.func,me.element]),function(e){return!e.content}),content:Nk(me.node,function(e){return!e.component}),debug:me.bool,disableAnimation:me.bool,disableFlip:me.bool,disableHoverToClick:me.bool,event:me.oneOf(["hover","click"]),eventDelay:me.number,footer:me.node,getPopper:me.func,hideArrow:me.bool,id:me.oneOfType([me.string,me.number]),offset:me.number,open:me.bool,options:me.object,placement:me.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto","center"]),showCloseButton:me.bool,style:me.object,styles:me.object,target:me.oneOfType([me.object,me.string]),title:me.node,wrapperOptions:me.shape({offset:me.number,placement:me.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto"]),position:me.bool})});Rr(Xx,"defaultProps",{autoOpen:!1,callback:jk,debug:!1,disableAnimation:!1,disableFlip:!1,disableHoverToClick:!1,event:"click",eventDelay:.4,getPopper:jk,hideArrow:!1,offset:15,placement:"bottom",showCloseButton:!1,styles:{},target:null,wrapperOptions:{position:!1}});var GF=Object.defineProperty,qF=(e,t,r)=>t in e?GF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ae=(e,t,r)=>qF(e,typeof t!="symbol"?t+"":t,r),yt={INIT:"init",START:"start",STOP:"stop",RESET:"reset",PREV:"prev",NEXT:"next",GO:"go",CLOSE:"close",SKIP:"skip",UPDATE:"update"},Xn={TOUR_START:"tour:start",STEP_BEFORE:"step:before",BEACON:"beacon",TOOLTIP:"tooltip",STEP_AFTER:"step:after",TOUR_END:"tour:end",TOUR_STATUS:"tour:status",TARGET_NOT_FOUND:"error:target_not_found"},We={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},rt={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished"};function Si(){var e;return!!(typeof window<"u"&&((e=window.document)!=null&&e.createElement))}function b2(e){return e?e.getBoundingClientRect():null}function KF(e=!1){const{body:t,documentElement:r}=document;if(!t||!r)return 0;if(e){const n=[t.scrollHeight,t.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight].sort((i,a)=>i-a),s=Math.floor(n.length/2);return n.length%2===0?(n[s-1]+n[s])/2:n[s]}return Math.max(t.scrollHeight,t.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)}function Ys(e){if(typeof e=="string")try{return document.querySelector(e)}catch{return null}return e}function QF(e){return!e||e.nodeType!==1?null:getComputedStyle(e)}function ou(e,t,r){if(!e)return Ta();const n=$T(e);if(n){if(n.isSameNode(Ta()))return r?document:Ta();if(!(n.scrollHeight>n.offsetHeight)&&!t)return n.style.overflow="initial",Ta()}return n}function ap(e,t){if(!e)return!1;const r=ou(e,t);return r?!r.isSameNode(Ta()):!1}function ZF(e){return e.offsetParent!==document.body}function il(e,t="fixed"){if(!e||!(e instanceof HTMLElement))return!1;const{nodeName:r}=e,n=QF(e);return r==="BODY"||r==="HTML"?!1:n&&n.position===t?!0:e.parentNode?il(e.parentNode,t):!1}function XF(e){var t;if(!e)return!1;let r=e;for(;r&&r!==document.body;){if(r instanceof HTMLElement){const{display:n,visibility:s}=getComputedStyle(r);if(n==="none"||s==="hidden")return!1}r=(t=r.parentElement)!=null?t:null}return!0}function JF(e,t,r){var n,s,i;const a=b2(e),l=ou(e,r),c=ap(e,r),u=il(e);let d=0,f=(n=a==null?void 0:a.top)!=null?n:0;if(c&&u){const h=(s=e==null?void 0:e.offsetTop)!=null?s:0,p=(i=l==null?void 0:l.scrollTop)!=null?i:0;f=h-p}else l instanceof HTMLElement&&(d=l.scrollTop,!c&&!il(e)&&(f+=d),l.isSameNode(Ta())||(f+=Ta().scrollTop));return Math.floor(f-t)}function e6(e,t,r){var n;if(!e)return 0;const{offsetTop:s=0,scrollTop:i=0}=(n=$T(e))!=null?n:{};let a=e.getBoundingClientRect().top+i;s&&(ap(e,r)||ZF(e))&&(a-=s);const l=Math.floor(a-t);return l<0?0:l}function Ta(){var e;return(e=document.scrollingElement)!=null?e:document.documentElement}function t6(e,t){const{duration:r,element:n}=t;return new Promise((s,i)=>{const{scrollTop:a}=n,l=e>a?e-a:a-e;i5.top(n,e,{duration:l<100?50:r},c=>c&&c.message!=="Element already at target scroll position"?i(c):s())})}var $l=rs.createPortal!==void 0;function w2(e=navigator.userAgent){let t=e;return typeof window>"u"?t="node":document.documentMode?t="ie":/Edge/.test(e)?t="edge":window.opera||e.includes(" OPR/")?t="opera":typeof window.InstallTrigger<"u"?t="firefox":window.chrome?t="chrome":/(Version\/([\d._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(e)&&(t="safari"),t}function ef(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function xs(e,t={}){const{defaultValue:r,step:n,steps:s}=t;let i=uk(e);if(i)(i.includes("{step}")||i.includes("{steps}"))&&n&&s&&(i=i.replace("{step}",n.toString()).replace("{steps}",s.toString()));else if(m.isValidElement(e)&&!Object.values(e.props).length&&ef(e.type)==="function"){const a=e.type({});i=xs(a,t)}else i=uk(r);return i}function r6(e,t){return!Te.plainObject(e)||!Te.array(t)?!1:Object.keys(e).every(r=>t.includes(r))}function n6(e){const t=/^#?([\da-f])([\da-f])([\da-f])$/i,r=e.replace(t,(s,i,a,l)=>i+i+a+a+l+l),n=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(r);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[]}function Ck(e){return e.disableBeacon||e.placement==="center"}function Tk(){return!["chrome","safari","firefox","opera"].includes(w2())}function Wa({data:e,debug:t=!1,title:r,warn:n=!1}){const s=n?console.warn||console.error:console.log;t&&(r&&e?(console.groupCollapsed(`%creact-joyride: ${r}`,"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(e)?e.forEach(i=>{Te.plainObject(i)&&i.key?s.apply(console,[i.key,i.value]):s.apply(console,[i])}):s.apply(console,[e]),console.groupEnd()):console.error("Missing title or data props"))}function s6(e){return Object.keys(e)}function k2(e,...t){if(!Te.plainObject(e))throw new TypeError("Expected an object");const r={};for(const n in e)({}).hasOwnProperty.call(e,n)&&(t.includes(n)||(r[n]=e[n]));return r}function i6(e,...t){if(!Te.plainObject(e))throw new TypeError("Expected an object");if(!t.length)return e;const r={};for(const n in e)({}).hasOwnProperty.call(e,n)&&t.includes(n)&&(r[n]=e[n]);return r}function H0(e,t,r){const n=i=>i.replace("{step}",String(t)).replace("{steps}",String(r));if(ef(e)==="string")return n(e);if(!m.isValidElement(e))return e;const{children:s}=e.props;if(ef(s)==="string"&&s.includes("{step}"))return m.cloneElement(e,{children:n(s)});if(Array.isArray(s))return m.cloneElement(e,{children:s.map(i=>typeof i=="string"?n(i):H0(i,t,r))});if(ef(e.type)==="function"&&!Object.values(e.props).length){const i=e.type({});return H0(i,t,r)}return e}function a6(e){const{isFirstStep:t,lifecycle:r,previousLifecycle:n,scrollToFirstStep:s,step:i,target:a}=e;return!i.disableScrolling&&(!t||s||r===We.TOOLTIP)&&i.placement!=="center"&&(!i.isFixed||!il(a))&&n!==r&&[We.BEACON,We.TOOLTIP].includes(r)}var o6={options:{preventOverflow:{boundariesElement:"scrollParent"}},wrapperOptions:{offset:-18,position:!0}},S2={back:"Back",close:"Close",last:"Last",next:"Next",nextLabelWithProgress:"Next (Step {step} of {steps})",open:"Open the dialog",skip:"Skip"},l6={event:"click",placement:"bottom",offset:10,disableBeacon:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrollParentFix:!1,disableScrolling:!1,hideBackButton:!1,hideCloseButton:!1,hideFooter:!1,isFixed:!1,locale:S2,showProgress:!1,showSkipButton:!1,spotlightClicks:!1,spotlightPadding:10},c6={continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:void 0,hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]},u6={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",width:380,zIndex:100},Wl={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},Ak={borderRadius:4,position:"absolute"};function d6(e,t){var r,n,s,i,a;const{floaterProps:l,styles:c}=e,u=Jn((r=t.floaterProps)!=null?r:{},l??{}),d=Jn(c??{},(n=t.styles)!=null?n:{}),f=Jn(u6,d.options||{}),h=t.placement==="center"||t.disableBeacon;let{width:p}=f;window.innerWidth>480&&(p=380),"width"in f&&(p=typeof f.width=="number"&&window.innerWidth<f.width?window.innerWidth-30:f.width);const g={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:f.zIndex},y={beacon:{...Wl,display:h?"none":"inline-block",height:f.beaconSize,position:"relative",width:f.beaconSize,zIndex:f.zIndex},beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:f.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:`rgba(${n6(f.primaryColor).join(",")}, 0.2)`,border:`2px solid ${f.primaryColor}`,borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:f.backgroundColor,borderRadius:5,boxSizing:"border-box",color:f.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:p},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:{...Wl,backgroundColor:f.primaryColor,borderRadius:4,color:"#fff"},buttonBack:{...Wl,color:f.primaryColor,marginLeft:"auto",marginRight:5},buttonClose:{...Wl,color:f.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14},buttonSkip:{...Wl,color:f.textColor,fontSize:14},overlay:{...g,backgroundColor:f.overlayColor,mixBlendMode:"hard-light"},overlayLegacy:{...g},overlayLegacyCenter:{...g,backgroundColor:f.overlayColor},spotlight:{...Ak,backgroundColor:"gray"},spotlightLegacy:{...Ak,boxShadow:`0 0 0 9999px ${f.overlayColor}, ${f.spotlightShadow}`},floaterStyles:{arrow:{color:(a=(i=(s=u==null?void 0:u.styles)==null?void 0:s.arrow)==null?void 0:i.color)!=null?a:f.arrowColor},options:{zIndex:f.zIndex+100}},options:f};return Jn(y,d)}function f6(e){return i6(e,"beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","hideCloseButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent")}function ho(e,t){var r,n,s,i,a,l;const c=t??{},u=Jn.all([l6,f6(e),c],{isMergeableObject:Te.plainObject}),d=d6(e,u),f=ap(Ys(u.target),u.disableScrollParentFix),h=Jn.all([o6,(r=e.floaterProps)!=null?r:{},(n=u.floaterProps)!=null?n:{}]);return h.offset=u.offset,h.styles=Jn((s=h.styles)!=null?s:{},d.floaterStyles),h.offset+=(a=(i=e.spotlightPadding)!=null?i:u.spotlightPadding)!=null?a:0,u.placementBeacon&&h.wrapperOptions&&(h.wrapperOptions.placement=u.placementBeacon),f&&h.options.preventOverflow&&(h.options.preventOverflow.boundariesElement="window"),{...u,locale:Jn.all([S2,(l=e.locale)!=null?l:{},u.locale||{}]),floaterProps:h,styles:k2(d,"floaterStyles")}}function E2(e,t=!1){return Te.plainObject(e)?e.target?!0:(Wa({title:"validateStep",data:"target is missing from the step",warn:!0,debug:t}),!1):(Wa({title:"validateStep",data:"step must be an object",warn:!0,debug:t}),!1)}function Dk(e,t=!1){return Te.array(e)?e.every(r=>E2(r,t)):(Wa({title:"validateSteps",data:"steps must be an array",warn:!0,debug:t}),!1)}var N2={action:"init",controlled:!1,index:0,lifecycle:We.INIT,origin:null,size:0,status:rt.IDLE},Rk=s6(k2(N2,"controlled","size")),h6=class{constructor(t){Ae(this,"beaconPopper"),Ae(this,"tooltipPopper"),Ae(this,"data",new Map),Ae(this,"listener"),Ae(this,"store",new Map),Ae(this,"addListener",i=>{this.listener=i}),Ae(this,"setSteps",i=>{const{size:a,status:l}=this.getState(),c={size:i.length,status:l};this.data.set("steps",i),l===rt.WAITING&&!a&&i.length&&(c.status=rt.RUNNING),this.setState(c)}),Ae(this,"getPopper",i=>i==="beacon"?this.beaconPopper:this.tooltipPopper),Ae(this,"setPopper",(i,a)=>{i==="beacon"?this.beaconPopper=a:this.tooltipPopper=a}),Ae(this,"cleanupPoppers",()=>{this.beaconPopper=null,this.tooltipPopper=null}),Ae(this,"close",(i=null)=>{const{index:a,status:l}=this.getState();l===rt.RUNNING&&this.setState({...this.getNextState({action:yt.CLOSE,index:a+1,origin:i})})}),Ae(this,"go",i=>{const{controlled:a,status:l}=this.getState();if(a||l!==rt.RUNNING)return;const c=this.getSteps()[i];this.setState({...this.getNextState({action:yt.GO,index:i}),status:c?l:rt.FINISHED})}),Ae(this,"info",()=>this.getState()),Ae(this,"next",()=>{const{index:i,status:a}=this.getState();a===rt.RUNNING&&this.setState(this.getNextState({action:yt.NEXT,index:i+1}))}),Ae(this,"open",()=>{const{status:i}=this.getState();i===rt.RUNNING&&this.setState({...this.getNextState({action:yt.UPDATE,lifecycle:We.TOOLTIP})})}),Ae(this,"prev",()=>{const{index:i,status:a}=this.getState();a===rt.RUNNING&&this.setState({...this.getNextState({action:yt.PREV,index:i-1})})}),Ae(this,"reset",(i=!1)=>{const{controlled:a}=this.getState();a||this.setState({...this.getNextState({action:yt.RESET,index:0}),status:i?rt.RUNNING:rt.READY})}),Ae(this,"skip",()=>{const{status:i}=this.getState();i===rt.RUNNING&&this.setState({action:yt.SKIP,lifecycle:We.INIT,status:rt.SKIPPED})}),Ae(this,"start",i=>{const{index:a,size:l}=this.getState();this.setState({...this.getNextState({action:yt.START,index:Te.number(i)?i:a},!0),status:l?rt.RUNNING:rt.WAITING})}),Ae(this,"stop",(i=!1)=>{const{index:a,status:l}=this.getState();[rt.FINISHED,rt.SKIPPED].includes(l)||this.setState({...this.getNextState({action:yt.STOP,index:a+(i?1:0)}),status:rt.PAUSED})}),Ae(this,"update",i=>{var a,l;if(!r6(i,Rk))throw new Error(`State is not valid. Valid keys: ${Rk.join(", ")}`);this.setState({...this.getNextState({...this.getState(),...i,action:(a=i.action)!=null?a:yt.UPDATE,origin:(l=i.origin)!=null?l:null},!0)})});const{continuous:r=!1,stepIndex:n,steps:s=[]}=t??{};this.setState({action:yt.INIT,controlled:Te.number(n),continuous:r,index:Te.number(n)?n:0,lifecycle:We.INIT,origin:null,status:s.length?rt.READY:rt.IDLE},!0),this.beaconPopper=null,this.tooltipPopper=null,this.listener=null,this.setSteps(s)}getState(){return this.store.size?{action:this.store.get("action")||"",controlled:this.store.get("controlled")||!1,index:parseInt(this.store.get("index"),10),lifecycle:this.store.get("lifecycle")||"",origin:this.store.get("origin")||null,size:this.store.get("size")||0,status:this.store.get("status")||""}:{...N2}}getNextState(t,r=!1){var n,s,i,a,l;const{action:c,controlled:u,index:d,size:f,status:h}=this.getState(),p=Te.number(t.index)?t.index:d,g=u&&!r?d:Math.min(Math.max(p,0),f);return{action:(n=t.action)!=null?n:c,controlled:u,index:g,lifecycle:(s=t.lifecycle)!=null?s:We.INIT,origin:(i=t.origin)!=null?i:null,size:(a=t.size)!=null?a:f,status:g===f?rt.FINISHED:(l=t.status)!=null?l:h}}getSteps(){const t=this.data.get("steps");return Array.isArray(t)?t:[]}hasUpdatedState(t){const r=JSON.stringify(t),n=JSON.stringify(this.getState());return r!==n}setState(t,r=!1){const n=this.getState(),{action:s,index:i,lifecycle:a,origin:l=null,size:c,status:u}={...n,...t};this.store.set("action",s),this.store.set("index",i),this.store.set("lifecycle",a),this.store.set("origin",l),this.store.set("size",c),this.store.set("status",u),r&&(this.store.set("controlled",t.controlled),this.store.set("continuous",t.continuous)),this.listener&&this.hasUpdatedState(n)&&this.listener(this.getState())}getHelpers(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}};function p6(e){return new h6(e)}function m6({styles:e}){return m.createElement("div",{key:"JoyrideSpotlight",className:"react-joyride__spotlight","data-test-id":"spotlight",style:e})}var g6=m6,y6=class extends m.Component{constructor(){super(...arguments),Ae(this,"isActive",!1),Ae(this,"resizeTimeout"),Ae(this,"scrollTimeout"),Ae(this,"scrollParent"),Ae(this,"state",{isScrolling:!1,mouseOverSpotlight:!1,showSpotlight:!0}),Ae(this,"hideSpotlight",()=>{const{continuous:e,disableOverlay:t,lifecycle:r}=this.props,n=[We.INIT,We.BEACON,We.COMPLETE,We.ERROR];return t||(e?n.includes(r):r!==We.TOOLTIP)}),Ae(this,"handleMouseMove",e=>{const{mouseOverSpotlight:t}=this.state,{height:r,left:n,position:s,top:i,width:a}=this.spotlightStyles,l=s==="fixed"?e.clientY:e.pageY,c=s==="fixed"?e.clientX:e.pageX,u=l>=i&&l<=i+r,f=c>=n&&c<=n+a&&u;f!==t&&this.updateState({mouseOverSpotlight:f})}),Ae(this,"handleScroll",()=>{const{target:e}=this.props,t=Ys(e);if(this.scrollParent!==document){const{isScrolling:r}=this.state;r||this.updateState({isScrolling:!0,showSpotlight:!1}),clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.updateState({isScrolling:!1,showSpotlight:!0})},50)}else il(t,"sticky")&&this.updateState({})}),Ae(this,"handleResize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.isActive&&this.forceUpdate()},100)})}componentDidMount(){const{debug:e,disableScrolling:t,disableScrollParentFix:r=!1,target:n}=this.props,s=Ys(n);this.scrollParent=ou(s??document.body,r,!0),this.isActive=!0,window.addEventListener("resize",this.handleResize)}componentDidUpdate(e){var t;const{disableScrollParentFix:r,lifecycle:n,spotlightClicks:s,target:i}=this.props,{changed:a}=$f(e,this.props);if(a("target")||a("disableScrollParentFix")){const l=Ys(i);this.scrollParent=ou(l??document.body,r,!0)}a("lifecycle",We.TOOLTIP)&&((t=this.scrollParent)==null||t.addEventListener("scroll",this.handleScroll,{passive:!0}),setTimeout(()=>{const{isScrolling:l}=this.state;l||this.updateState({showSpotlight:!0})},100)),(a("spotlightClicks")||a("disableOverlay")||a("lifecycle"))&&(s&&n===We.TOOLTIP?window.addEventListener("mousemove",this.handleMouseMove,!1):n!==We.TOOLTIP&&window.removeEventListener("mousemove",this.handleMouseMove))}componentWillUnmount(){var e;this.isActive=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout),clearTimeout(this.scrollTimeout),(e=this.scrollParent)==null||e.removeEventListener("scroll",this.handleScroll)}get overlayStyles(){const{mouseOverSpotlight:e}=this.state,{disableOverlayClose:t,placement:r,styles:n}=this.props;let s=n.overlay;return Tk()&&(s=r==="center"?n.overlayLegacyCenter:n.overlayLegacy),{cursor:t?"default":"pointer",height:KF(),pointerEvents:e?"none":"auto",...s}}get spotlightStyles(){var e,t,r;const{showSpotlight:n}=this.state,{disableScrollParentFix:s=!1,spotlightClicks:i,spotlightPadding:a=0,styles:l,target:c}=this.props,u=Ys(c),d=b2(u),f=il(u),h=JF(u,a,s);return{...Tk()?l.spotlightLegacy:l.spotlight,height:Math.round(((e=d==null?void 0:d.height)!=null?e:0)+a*2),left:Math.round(((t=d==null?void 0:d.left)!=null?t:0)-a),opacity:n?1:0,pointerEvents:i?"none":"auto",position:f?"fixed":"absolute",top:h,transition:"opacity 0.2s",width:Math.round(((r=d==null?void 0:d.width)!=null?r:0)+a*2)}}updateState(e){this.isActive&&this.setState(t=>({...t,...e}))}render(){const{showSpotlight:e}=this.state,{onClickOverlay:t,placement:r}=this.props,{hideSpotlight:n,overlayStyles:s,spotlightStyles:i}=this;if(n())return null;let a=r!=="center"&&e&&m.createElement(g6,{styles:i});if(w2()==="safari"){const{mixBlendMode:l,zIndex:c,...u}=s;a=m.createElement("div",{style:{...u}},a),delete s.backgroundColor}return m.createElement("div",{className:"react-joyride__overlay","data-test-id":"overlay",onClick:t,role:"presentation",style:s},a)}},x6=class extends m.Component{constructor(){super(...arguments),Ae(this,"node",null)}componentDidMount(){const{id:e}=this.props;Si()&&(this.node=document.createElement("div"),this.node.id=e,document.body.appendChild(this.node),$l||this.renderReact15())}componentDidUpdate(){Si()&&($l||this.renderReact15())}componentWillUnmount(){!Si()||!this.node||($l||rs.unmountComponentAtNode(this.node),this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=null))}renderReact15(){if(!Si())return;const{children:e}=this.props;this.node&&rs.unstable_renderSubtreeIntoContainer(this,e,this.node)}renderReact16(){if(!Si()||!$l)return null;const{children:e}=this.props;return this.node?rs.createPortal(e,this.node):null}render(){return $l?this.renderReact16():null}},v6=class{constructor(e,t){if(Ae(this,"element"),Ae(this,"options"),Ae(this,"canBeTabbed",r=>{const{tabIndex:n}=r;return n===null||n<0?!1:this.canHaveFocus(r)}),Ae(this,"canHaveFocus",r=>{const n=/input|select|textarea|button|object/,s=r.nodeName.toLowerCase();return(n.test(s)&&!r.getAttribute("disabled")||s==="a"&&!!r.getAttribute("href"))&&this.isVisible(r)}),Ae(this,"findValidTabElements",()=>[].slice.call(this.element.querySelectorAll("*"),0).filter(this.canBeTabbed)),Ae(this,"handleKeyDown",r=>{const{code:n="Tab"}=this.options;r.code===n&&this.interceptTab(r)}),Ae(this,"interceptTab",r=>{r.preventDefault();const n=this.findValidTabElements(),{shiftKey:s}=r;if(!n.length)return;let i=document.activeElement?n.indexOf(document.activeElement):0;i===-1||!s&&i+1===n.length?i=0:s&&i===0?i=n.length-1:i+=s?-1:1,n[i].focus()}),Ae(this,"isHidden",r=>{const n=r.offsetWidth<=0&&r.offsetHeight<=0,s=window.getComputedStyle(r);return n&&!r.innerHTML?!0:n&&s.getPropertyValue("overflow")!=="visible"||s.getPropertyValue("display")==="none"}),Ae(this,"isVisible",r=>{let n=r;for(;n;)if(n instanceof HTMLElement){if(n===document.body)break;if(this.isHidden(n))return!1;n=n.parentNode}return!0}),Ae(this,"removeScope",()=>{window.removeEventListener("keydown",this.handleKeyDown)}),Ae(this,"checkFocus",r=>{document.activeElement!==r&&(r.focus(),window.requestAnimationFrame(()=>this.checkFocus(r)))}),Ae(this,"setFocus",()=>{const{selector:r}=this.options;if(!r)return;const n=this.element.querySelector(r);n&&window.requestAnimationFrame(()=>this.checkFocus(n))}),!(e instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=e,this.options=t,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()}},b6=class extends m.Component{constructor(e){if(super(e),Ae(this,"beacon",null),Ae(this,"setBeaconRef",s=>{this.beacon=s}),e.beaconComponent)return;const t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.id="joyride-beacon-animation",e.nonce&&r.setAttribute("nonce",e.nonce),r.appendChild(document.createTextNode(`
        @keyframes joyride-beacon-inner {
          20% {
            opacity: 0.9;
          }
        
          90% {
            opacity: 0.7;
          }
        }
        
        @keyframes joyride-beacon-outer {
          0% {
            transform: scale(1);
          }
        
          45% {
            opacity: 0.7;
            transform: scale(0.75);
          }
        
          100% {
            opacity: 0.9;
            transform: scale(1);
          }
        }
      `)),t.appendChild(r)}componentDidMount(){const{shouldFocus:e}=this.props;setTimeout(()=>{Te.domElement(this.beacon)&&e&&this.beacon.focus()},0)}componentWillUnmount(){const e=document.getElementById("joyride-beacon-animation");e!=null&&e.parentNode&&e.parentNode.removeChild(e)}render(){const{beaconComponent:e,continuous:t,index:r,isLastStep:n,locale:s,onClickOrHover:i,size:a,step:l,styles:c}=this.props,u=xs(s.open),d={"aria-label":u,onClick:i,onMouseEnter:i,ref:this.setBeaconRef,title:u};let f;if(e){const h=e;f=m.createElement(h,{continuous:t,index:r,isLastStep:n,size:a,step:l,...d})}else f=m.createElement("button",{key:"JoyrideBeacon",className:"react-joyride__beacon","data-test-id":"button-beacon",style:c.beacon,type:"button",...d},m.createElement("span",{style:c.beaconInner}),m.createElement("span",{style:c.beaconOuter}));return f}};function w6({styles:e,...t}){const{color:r,height:n,width:s,...i}=e;return re.createElement("button",{style:i,type:"button",...t},re.createElement("svg",{height:typeof n=="number"?`${n}px`:n,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:typeof s=="number"?`${s}px`:s,xmlns:"http://www.w3.org/2000/svg"},re.createElement("g",null,re.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:r}))))}var k6=w6;function S6(e){const{backProps:t,closeProps:r,index:n,isLastStep:s,primaryProps:i,skipProps:a,step:l,tooltipProps:c}=e,{content:u,hideBackButton:d,hideCloseButton:f,hideFooter:h,showSkipButton:p,styles:g,title:y}=l,b={};return b.primary=m.createElement("button",{"data-test-id":"button-primary",style:g.buttonNext,type:"button",...i}),p&&!s&&(b.skip=m.createElement("button",{"aria-live":"off","data-test-id":"button-skip",style:g.buttonSkip,type:"button",...a})),!d&&n>0&&(b.back=m.createElement("button",{"data-test-id":"button-back",style:g.buttonBack,type:"button",...t})),b.close=!f&&m.createElement(k6,{"data-test-id":"button-close",styles:g.buttonClose,...r}),m.createElement("div",{key:"JoyrideTooltip","aria-label":xs(y??u),className:"react-joyride__tooltip",style:g.tooltip,...c},m.createElement("div",{style:g.tooltipContainer},y&&m.createElement("h1",{"aria-label":xs(y),style:g.tooltipTitle},y),m.createElement("div",{style:g.tooltipContent},u)),!h&&m.createElement("div",{style:g.tooltipFooter},m.createElement("div",{style:g.tooltipFooterSpacer},b.skip),b.back,b.primary),b.close)}var E6=S6,N6=class extends m.Component{constructor(){super(...arguments),Ae(this,"handleClickBack",e=>{e.preventDefault();const{helpers:t}=this.props;t.prev()}),Ae(this,"handleClickClose",e=>{e.preventDefault();const{helpers:t}=this.props;t.close("button_close")}),Ae(this,"handleClickPrimary",e=>{e.preventDefault();const{continuous:t,helpers:r}=this.props;if(!t){r.close("button_primary");return}r.next()}),Ae(this,"handleClickSkip",e=>{e.preventDefault();const{helpers:t}=this.props;t.skip()}),Ae(this,"getElementsProps",()=>{const{continuous:e,index:t,isLastStep:r,setTooltipRef:n,size:s,step:i}=this.props,{back:a,close:l,last:c,next:u,nextLabelWithProgress:d,skip:f}=i.locale,h=xs(a),p=xs(l),g=xs(c),y=xs(u),b=xs(f);let v=l,x=p;if(e){if(v=u,x=y,i.showProgress&&!r){const w=xs(d,{step:t+1,steps:s});v=H0(d,t+1,s),x=w}r&&(v=c,x=g)}return{backProps:{"aria-label":h,children:a,"data-action":"back",onClick:this.handleClickBack,role:"button",title:h},closeProps:{"aria-label":p,children:l,"data-action":"close",onClick:this.handleClickClose,role:"button",title:p},primaryProps:{"aria-label":x,children:v,"data-action":"primary",onClick:this.handleClickPrimary,role:"button",title:x},skipProps:{"aria-label":b,children:f,"data-action":"skip",onClick:this.handleClickSkip,role:"button",title:b},tooltipProps:{"aria-modal":!0,ref:n,role:"alertdialog"}}})}render(){const{continuous:e,index:t,isLastStep:r,setTooltipRef:n,size:s,step:i}=this.props,{beaconComponent:a,tooltipComponent:l,...c}=i;let u;if(l){const d={...this.getElementsProps(),continuous:e,index:t,isLastStep:r,size:s,step:c,setTooltipRef:n},f=l;u=m.createElement(f,{...d})}else u=m.createElement(E6,{...this.getElementsProps(),continuous:e,index:t,isLastStep:r,size:s,step:i});return u}},j6=class extends m.Component{constructor(){super(...arguments),Ae(this,"scope",null),Ae(this,"tooltip",null),Ae(this,"handleClickHoverBeacon",e=>{const{step:t,store:r}=this.props;e.type==="mouseenter"&&t.event!=="hover"||r.update({lifecycle:We.TOOLTIP})}),Ae(this,"setTooltipRef",e=>{this.tooltip=e}),Ae(this,"setPopper",(e,t)=>{var r;const{action:n,lifecycle:s,step:i,store:a}=this.props;t==="wrapper"?a.setPopper("beacon",e):a.setPopper("tooltip",e),a.getPopper("beacon")&&(a.getPopper("tooltip")||i.placement==="center")&&s===We.INIT&&a.update({action:n,lifecycle:We.READY}),(r=i.floaterProps)!=null&&r.getPopper&&i.floaterProps.getPopper(e,t)}),Ae(this,"renderTooltip",e=>{const{continuous:t,helpers:r,index:n,size:s,step:i}=this.props;return m.createElement(N6,{continuous:t,helpers:r,index:n,isLastStep:n+1===s,setTooltipRef:this.setTooltipRef,size:s,step:i,...e})})}componentDidMount(){const{debug:e,index:t}=this.props;Wa({title:`step:${t}`,data:[{key:"props",value:this.props}],debug:e})}componentDidUpdate(e){var t;const{action:r,callback:n,continuous:s,controlled:i,debug:a,helpers:l,index:c,lifecycle:u,shouldScroll:d,status:f,step:h,store:p}=this.props,{changed:g,changedFrom:y}=$f(e,this.props),b=l.info(),v=s&&r!==yt.CLOSE&&(c>0||r===yt.PREV),x=g("action")||g("index")||g("lifecycle")||g("status"),w=y("lifecycle",[We.TOOLTIP,We.INIT],We.INIT),k=g("action",[yt.NEXT,yt.PREV,yt.SKIP,yt.CLOSE]),S=i&&c===e.index;if(k&&(w||S)&&n({...b,index:e.index,lifecycle:We.COMPLETE,step:e.step,type:Xn.STEP_AFTER}),h.placement==="center"&&f===rt.RUNNING&&g("index")&&r!==yt.START&&u===We.INIT&&p.update({lifecycle:We.READY}),x){const E=Ys(h.target),N=!!E;N&&XF(E)?(y("status",rt.READY,rt.RUNNING)||y("lifecycle",We.INIT,We.READY))&&n({...b,step:h,type:Xn.STEP_BEFORE}):(console.warn(N?"Target not visible":"Target not mounted",h),n({...b,type:Xn.TARGET_NOT_FOUND,step:h}),i||p.update({index:c+(r===yt.PREV?-1:1)}))}y("lifecycle",We.INIT,We.READY)&&p.update({lifecycle:Ck(h)||v?We.TOOLTIP:We.BEACON}),g("index")&&Wa({title:`step:${u}`,data:[{key:"props",value:this.props}],debug:a}),g("lifecycle",We.BEACON)&&n({...b,step:h,type:Xn.BEACON}),g("lifecycle",We.TOOLTIP)&&(n({...b,step:h,type:Xn.TOOLTIP}),d&&this.tooltip&&(this.scope=new v6(this.tooltip,{selector:"[data-action=primary]"}),this.scope.setFocus())),y("lifecycle",[We.TOOLTIP,We.INIT],We.INIT)&&((t=this.scope)==null||t.removeScope(),p.cleanupPoppers())}componentWillUnmount(){var e;(e=this.scope)==null||e.removeScope()}get open(){const{lifecycle:e,step:t}=this.props;return Ck(t)||e===We.TOOLTIP}render(){const{continuous:e,debug:t,index:r,nonce:n,shouldScroll:s,size:i,step:a}=this.props,l=Ys(a.target);return!E2(a)||!Te.domElement(l)?null:m.createElement("div",{key:`JoyrideStep-${r}`,className:"react-joyride__step"},m.createElement(Xx,{...a.floaterProps,component:this.renderTooltip,debug:t,getPopper:this.setPopper,id:`react-joyride-step-${r}`,open:this.open,placement:a.placement,target:a.target},m.createElement(b6,{beaconComponent:a.beaconComponent,continuous:e,index:r,isLastStep:r+1===i,locale:a.locale,nonce:n,onClickOrHover:this.handleClickHoverBeacon,shouldFocus:s,size:i,step:a,styles:a.styles})))}},j2=class extends m.Component{constructor(e){super(e),Ae(this,"helpers"),Ae(this,"store"),Ae(this,"callback",a=>{const{callback:l}=this.props;Te.function(l)&&l(a)}),Ae(this,"handleKeyboard",a=>{const{index:l,lifecycle:c}=this.state,{steps:u}=this.props,d=u[l];c===We.TOOLTIP&&a.code==="Escape"&&d&&!d.disableCloseOnEsc&&this.store.close("keyboard")}),Ae(this,"handleClickOverlay",()=>{const{index:a}=this.state,{steps:l}=this.props;ho(this.props,l[a]).disableOverlayClose||this.helpers.close("overlay")}),Ae(this,"syncState",a=>{this.setState(a)});const{debug:t,getHelpers:r,run:n=!0,stepIndex:s}=e;this.store=p6({...e,controlled:n&&Te.number(s)}),this.helpers=this.store.getHelpers();const{addListener:i}=this.store;Wa({title:"init",data:[{key:"props",value:this.props},{key:"state",value:this.state}],debug:t}),i(this.syncState),r&&r(this.helpers),this.state=this.store.getState()}componentDidMount(){if(!Si())return;const{debug:e,disableCloseOnEsc:t,run:r,steps:n}=this.props,{start:s}=this.store;Dk(n,e)&&r&&s(),t||document.body.addEventListener("keydown",this.handleKeyboard,{passive:!0})}componentDidUpdate(e,t){if(!Si())return;const{action:r,controlled:n,index:s,status:i}=this.state,{debug:a,run:l,stepIndex:c,steps:u}=this.props,{stepIndex:d,steps:f}=e,{reset:h,setSteps:p,start:g,stop:y,update:b}=this.store,{changed:v}=$f(e,this.props),{changed:x,changedFrom:w}=$f(t,this.state),k=ho(this.props,u[s]),S=!Gr(f,u),E=Te.number(c)&&v("stepIndex"),N=Ys(k.target);if(S&&(Dk(u,a)?p(u):console.warn("Steps are not valid",u)),v("run")&&(l?g(c):y()),E){let C=Te.number(d)&&d<c?yt.NEXT:yt.PREV;r===yt.STOP&&(C=yt.START),[rt.FINISHED,rt.SKIPPED].includes(i)||b({action:r===yt.CLOSE?yt.CLOSE:C,index:c,lifecycle:We.INIT})}!n&&i===rt.RUNNING&&s===0&&!N&&(this.store.update({index:s+1}),this.callback({...this.state,type:Xn.TARGET_NOT_FOUND,step:k}));const j={...this.state,index:s,step:k};if(x("action",[yt.NEXT,yt.PREV,yt.SKIP,yt.CLOSE])&&x("status",rt.PAUSED)){const C=ho(this.props,u[t.index]);this.callback({...j,index:t.index,lifecycle:We.COMPLETE,step:C,type:Xn.STEP_AFTER})}if(x("status",[rt.FINISHED,rt.SKIPPED])){const C=ho(this.props,u[t.index]);n||this.callback({...j,index:t.index,lifecycle:We.COMPLETE,step:C,type:Xn.STEP_AFTER}),this.callback({...j,type:Xn.TOUR_END,step:C,index:t.index}),h()}else w("status",[rt.IDLE,rt.READY],rt.RUNNING)?this.callback({...j,type:Xn.TOUR_START}):(x("status")||x("action",yt.RESET))&&this.callback({...j,type:Xn.TOUR_STATUS});this.scrollToStep(t)}componentWillUnmount(){const{disableCloseOnEsc:e}=this.props;e||document.body.removeEventListener("keydown",this.handleKeyboard)}scrollToStep(e){const{index:t,lifecycle:r,status:n}=this.state,{debug:s,disableScrollParentFix:i=!1,scrollDuration:a,scrollOffset:l=20,scrollToFirstStep:c=!1,steps:u}=this.props,d=ho(this.props,u[t]),f=Ys(d.target),h=a6({isFirstStep:t===0,lifecycle:r,previousLifecycle:e.lifecycle,scrollToFirstStep:c,step:d,target:f});if(n===rt.RUNNING&&h){const p=ap(f,i),g=ou(f,i);let y=Math.floor(e6(f,l,i))||0;Wa({title:"scrollToStep",data:[{key:"index",value:t},{key:"lifecycle",value:r},{key:"status",value:n}],debug:s});const b=this.store.getPopper("beacon"),v=this.store.getPopper("tooltip");if(r===We.BEACON&&b){const{offsets:x,placement:w}=b;!["bottom"].includes(w)&&!p&&(y=Math.floor(x.popper.top-l))}else if(r===We.TOOLTIP&&v){const{flipped:x,offsets:w,placement:k}=v;["top","right","left"].includes(k)&&!x&&!p?y=Math.floor(w.popper.top-l):y-=d.spotlightPadding}y=y>=0?y:0,n===rt.RUNNING&&t6(y,{element:g,duration:a}).then(()=>{setTimeout(()=>{var x;(x=this.store.getPopper("tooltip"))==null||x.instance.update()},10)})}}render(){if(!Si())return null;const{index:e,lifecycle:t,status:r}=this.state,{continuous:n=!1,debug:s=!1,nonce:i,scrollToFirstStep:a=!1,steps:l}=this.props,c=r===rt.RUNNING,u={};if(c&&l[e]){const d=ho(this.props,l[e]);u.step=m.createElement(j6,{...this.state,callback:this.callback,continuous:n,debug:s,helpers:this.helpers,nonce:i,shouldScroll:!d.disableScrolling&&(e!==0||a),step:d,store:this.store}),u.overlay=m.createElement(x6,{id:"react-joyride-portal"},m.createElement(y6,{...d,continuous:n,debug:s,lifecycle:t,onClickOverlay:this.handleClickOverlay}))}return m.createElement("div",{className:"react-joyride"},u.step,u.overlay)}};Ae(j2,"defaultProps",c6);var C6=j2;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var T6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(e,t)=>{const r=m.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>m.createElement("svg",{ref:d,...T6,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${A6(e)}`,l].join(" "),...u},[...t.map(([f,h])=>m.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=ve("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=ve("BookHeart",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M16 8.2C16 7 15 6 13.8 6c-.8 0-1.4.3-1.8.9-.4-.6-1-.9-1.8-.9C9 6 8 7 8 8.2c0 .6.3 1.2.7 1.6h0C10 11.1 12 13 12 13s2-1.9 3.3-3.1h0c.4-.4.7-1 .7-1.7z",key:"1dlbw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=ve("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=ve("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=ve("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=ve("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=ve("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=ve("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=ve("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ve("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=ve("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=ve("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=ve("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=ve("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=ve("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=ve("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=ve("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=ve("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=ve("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=ve("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=ve("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=ve("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=ve("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=ve("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=ve("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=ve("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=ve("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=ve("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=ve("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=ve("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=ve("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=ve("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=ve("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=ve("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=ve("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=ve("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=ve("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ve("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Lk="/app/assets/Logo-BrCGK4jM.png",Ga=({size:e="md",variant:t="full"})=>{const r={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12"},n={sm:"text-lg",md:"text-xl",lg:"text-2xl"};return t==="icon"?o.jsx("div",{className:`${r[e]} flex items-center justify-center`,children:o.jsx("img",{src:Lk,alt:"FamConomy Logo",className:"w-full h-full object-contain"})}):o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`${r[e]} flex items-center justify-center`,children:o.jsx("img",{src:Lk,alt:"FamConomy Logo",className:"w-full h-full object-contain"})}),o.jsx("span",{className:`ml-3 font-semibold bg-gradient-to-r from-primary-500 via-secondary-500 to-accent-500 bg-clip-text text-transparent ${n[e]}`,children:"FamConomy"})]})},dB=({isOpen:e,onClose:t,onSubmit:r})=>{const[n,s]=m.useState("general"),[i,a]=m.useState(""),[l,c]=m.useState(),u=m.useRef(null),d=h=>{h.preventDefault(),r(n,i,l),a(""),c(void 0),t()},f=h=>{h.target.files&&h.target.files.length>0&&c(h.target.files[0])};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-800 dark:text-neutral-200",children:"Submit Feedback"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:o.jsx(ni,{size:24})})]}),o.jsxs("form",{onSubmit:d,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"feedbackType",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Feedback Type"}),o.jsxs("select",{id:"feedbackType",value:n,onChange:h=>s(h.target.value),className:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"general",children:"General Feedback"}),o.jsx("option",{value:"bug",children:"Report a Bug"}),o.jsx("option",{value:"feature",children:"Feature Request"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Message"}),o.jsx("textarea",{id:"message",rows:4,value:i,onChange:h=>a(h.target.value),className:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Screenshot (optional)"}),o.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-neutral-300 dark:border-neutral-600 border-dashed rounded-md",children:o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsx("svg",{className:"mx-auto h-12 w-12 text-neutral-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:o.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),o.jsxs("div",{className:"flex text-sm text-neutral-600 dark:text-neutral-400",children:[o.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-neutral-700 rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500",children:[o.jsx("span",{children:"Upload a file"}),o.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:f,ref:u,accept:"image/*"})]}),o.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"PNG, JPG, GIF up to 10MB"})]})}),l&&o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-2",children:["Selected file: ",l.name]})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md text-sm font-medium text-neutral-700 dark:text-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-neutral-500",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Submit"})]})]})]})}):null},fB=async(e,t,r)=>{const n=new FormData;return n.append("feedbackType",e),n.append("message",t),r&&n.append("screenshot",r),q.post("/feedback",n,{headers:{"Content-Type":"multipart/form-data"}})},hB=({onNavigate:e,collapsed:t,onCollapsedChange:r})=>{const[n,s]=m.useState(!1),{logout:i,user:a}=Ft(),{isDarkMode:l,toggleTheme:c}=zT(),u=$n(),d=m.useMemo(()=>xr("sidebar"),[]),f=()=>{u("/"),e==null||e()},h=async(b,v,x)=>{try{await fB(b,v,x),alert("Feedback submitted successfully!")}catch(w){d.error("Error submitting feedback:",w),alert("There was an error submitting your feedback. Please try again.")}},p=[{id:"nav-dashboard",name:"Dashboard",path:"/",icon:o.jsx(V6,{size:20}),color:"hover:bg-primary-100 hover:text-primary-600 dark:hover:bg-primary-900/30 dark:hover:text-primary-400"},{id:"nav-calendar",name:"Calendar",path:"/calendar",icon:o.jsx($0,{size:20}),color:"hover:bg-secondary-100 hover:text-secondary-600 dark:hover:bg-secondary-900/30 dark:hover:text-secondary-400"},{id:"nav-tasks",name:"Tasks",path:"/tasks",icon:o.jsx(W0,{size:20}),color:"hover:bg-accent-100 hover:text-accent-600 dark:hover:bg-accent-900/30 dark:hover:text-accent-400"},{id:"nav-gigs",name:"Gigs",path:"/gigs",icon:o.jsx(O6,{size:20}),color:"hover:bg-primary-100 hover:text-primary-600 dark:hover:bg-primary-900/30 dark:hover:text-primary-400"},{id:"nav-messages",name:"Messages",path:"/messages",icon:o.jsx(_2,{size:20}),color:"hover:bg-secondary-100 hover:text-secondary-600 dark:hover:bg-secondary-900/30 dark:hover:text-secondary-400"},{id:"nav-recipes",name:"Recipes",path:"/recipes",icon:o.jsx(L6,{size:20}),color:"hover:bg-accent-100 hover:text-accent-600 dark:hover:bg-accent-900/30 dark:hover:text-accent-400"},{id:"nav-shopping",name:"Shopping",path:"/shopping",icon:o.jsx(Kf,{size:20}),color:"hover:bg-highlight-teal/20 hover:text-highlight-teal dark:hover:bg-highlight-teal/30 dark:hover:text-highlight-teal"},{id:"nav-wishlists",name:"Wishlists",path:"/wishlists",icon:o.jsx(Pa,{size:20}),color:"hover:bg-primary-100 hover:text-primary-600 dark:hover:bg-primary-900/30 dark:hover:text-primary-400"},{id:"nav-budget",name:"Finance",path:"/budget",icon:o.jsx(I2,{size:20}),color:"hover:bg-secondary-100 hover:text-secondary-600 dark:hover:bg-secondary-900/30 dark:hover:text-secondary-400"},{id:"nav-family",name:"Family",path:"/family",icon:o.jsx(Ya,{size:20}),color:"hover:bg-accent-100 hover:text-accent-600 dark:hover:bg-accent-900/30 dark:hover:text-accent-400"},{id:"nav-values",name:"Values",path:"/family/values",icon:o.jsx(cu,{size:20}),color:"hover:bg-primary-100 hover:text-primary-600 dark:hover:bg-primary-900/30 dark:hover:text-primary-400"},{id:"nav-journal",name:"Journal",path:"/journal",icon:o.jsx(C2,{size:20}),color:"hover:bg-secondary-100 hover:text-secondary-600 dark:hover:bg-secondary-900/30 dark:hover:text-secondary-400"},{id:"nav-resources",name:"Resources",path:"/resources",icon:o.jsx(lu,{size:20}),color:"hover:bg-accent-100 hover:text-accent-600 dark:hover:bg-accent-900/30 dark:hover:text-accent-400"},{id:"nav-settings",name:"Settings",path:"/settings",icon:o.jsx(M2,{size:20}),color:"hover:bg-neutral-100 hover:text-neutral-600 dark:hover:bg-neutral-700 dark:hover:text-neutral-300"}],g=()=>{e==null||e()},y=()=>{c()};return o.jsxs(o.Fragment,{children:[o.jsxs("aside",{className:`bg-white/80 dark:bg-neutral-800/80 backdrop-blur-lg h-screen border-r border-neutral-200 dark:border-neutral-700 transition-all duration-300 flex flex-col ${t?"w-20":"w-64"}`,children:[o.jsxs("div",{className:"flex items-center p-4 border-b border-neutral-200 dark:border-neutral-700 h-16",children:[o.jsx("button",{onClick:f,className:"flex-1",children:t?o.jsx(Ga,{variant:"icon",size:"sm"}):o.jsx(Ga,{size:"md"})}),o.jsx("button",{onClick:()=>r(!t),className:"p-1 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:t?o.jsx(Jx,{size:18}):o.jsx(op,{size:18})})]}),o.jsx("nav",{className:"flex-1 py-4 overflow-y-auto",children:o.jsx("ul",{className:"px-2 space-y-1",children:p.map(b=>o.jsx("li",{children:o.jsxs(XP,{id:b.id,to:b.path,onClick:g,className:({isActive:v})=>`
                      flex items-center px-3 py-2 rounded-2xl transition-colors ${v?"bg-primary-50 text-primary-500 dark:bg-primary-900/50 dark:text-primary-400":`text-neutral-600 dark:text-neutral-400 ${b.color}`}
                    `,children:[o.jsx("span",{className:"flex-shrink-0",children:b.icon}),!t&&o.jsx("span",{className:"ml-3",children:b.name})]})},b.path))})}),o.jsxs("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-700 space-y-2",children:[o.jsxs("button",{id:"sidebar-feedback",onClick:()=>s(!0),className:"flex items-center w-full px-3 py-2 text-neutral-600 dark:text-neutral-400 rounded-2xl hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[o.jsx(K6,{size:20}),!t&&o.jsx("span",{className:"ml-3",children:"Feedback"})]}),o.jsxs("button",{onClick:y,className:"flex items-center w-full px-3 py-2 text-neutral-600 dark:text-neutral-400 rounded-2xl hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[l?o.jsx(lB,{size:20}):o.jsx(Q6,{size:20}),!t&&o.jsx("span",{className:"ml-3",children:"Theme"})]}),o.jsxs("button",{onClick:i,className:"flex items-center w-full px-3 py-2 text-neutral-600 dark:text-neutral-400 rounded-2xl hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[o.jsx(R2,{size:20}),!t&&o.jsx("span",{className:"ml-3",children:"Logout"})]})]})]}),o.jsx(dB,{isOpen:n,onClose:()=>s(!1),onSubmit:h})]})},pB=({onMenuToggle:e,isMobileMenuOpen:t})=>{var f;const{user:r,logout:n}=Ft(),[s,i]=m.useState(!1),[a,l]=m.useState(!1),{notifications:c,markAsRead:u}=FT(),d=c.filter(h=>!h.readStatus).length;return o.jsxs("header",{className:"bg-white dark:bg-neutral-800 border-b border-neutral-200 dark:border-neutral-700 h-16 px-4 flex items-center justify-between",children:[o.jsx("div",{className:"lg:hidden flex items-center",children:o.jsx("button",{id:"nav-toggle",onClick:e,className:"p-2 rounded-2xl text-neutral-500 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:t?o.jsx(ni,{size:20}):o.jsx(q6,{size:20})})}),o.jsx("div",{className:"lg:hidden",children:o.jsx(Ga,{size:"sm"})}),o.jsx("div",{className:"hidden md:flex items-center flex-1 max-w-xl",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}),o.jsx(lp,{className:"absolute left-3 top-2.5 text-neutral-400 dark:text-neutral-500",size:18})]})}),o.jsxs("div",{className:"flex items-center ml-auto space-x-4",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>l(!a),className:"p-2 rounded-2xl hover:bg-neutral-100 dark:hover:bg-neutral-700 relative",children:[o.jsx(V0,{size:20,className:"text-neutral-600 dark:text-neutral-400"}),d>0&&o.jsx("span",{className:"absolute top-0 right-0 h-5 w-5 text-xs flex items-center justify-center bg-accent-400 text-white rounded-full",children:d>9?"9+":d})]}),a&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-neutral-800 rounded-2xl shadow-dropdown border border-neutral-200 dark:border-neutral-700 py-2 z-10 animate-fade-in",children:[o.jsx("div",{className:"px-4 py-2 border-b border-neutral-200 dark:border-neutral-700",children:o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:"Notifications"})}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.length>0?c.slice(0,5).map(h=>!h||!h.createdAt?null:o.jsxs(kr,{to:h.link||"/notifications",onClick:()=>u(h.id),className:`block px-4 py-3 border-b border-neutral-100 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700/50 ${h.readStatus?"":"bg-primary-50 dark:bg-primary-900/30"}`,children:[o.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:h.message}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500 mt-1",children:new Date(h.createdAt).toLocaleString()})]},h.id)):o.jsx("div",{className:"px-4 py-3 text-sm text-neutral-500 dark:text-neutral-400",children:"No notifications"})})]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>i(!s),className:"flex items-center space-x-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-2xl p-2",children:[o.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-500 dark:text-primary-400",children:((f=r==null?void 0:r.fullName)==null?void 0:f.charAt(0))||"U"}),o.jsx("span",{className:"hidden md:block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:(r==null?void 0:r.fullName)||"User"})]}),s&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-neutral-800 rounded-2xl shadow-dropdown border border-neutral-200 dark:border-neutral-700 py-1 z-10 animate-fade-in",children:[o.jsx(kr,{to:"/profile",className:"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Your Profile"}),o.jsx(kr,{to:"/settings",className:"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Settings"}),o.jsx("hr",{className:"my-1 border-neutral-200 dark:border-neutral-700"}),o.jsx("button",{onClick:n,className:"block w-full text-left px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Sign out"})]})]})]})]})},P2=m.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),up=m.createContext({}),dp=m.createContext(null),fp=typeof document<"u",rv=fp?m.useLayoutEffect:m.useEffect,L2=m.createContext({strict:!1}),nv=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),mB="framerAppearId",F2="data-"+nv(mB);function gB(e,t,r,n){const{visualElement:s}=m.useContext(up),i=m.useContext(L2),a=m.useContext(dp),l=m.useContext(P2).reducedMotion,c=m.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;m.useInsertionEffect(()=>{u&&u.update(r,a)});const d=m.useRef(!!(r[F2]&&!window.HandoffComplete));return rv(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),m.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function To(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function yB(e,t,r){return m.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):To(r)&&(r.current=n))},[t])}function uu(e){return typeof e=="string"||Array.isArray(e)}function hp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const sv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iv=["initial",...sv];function pp(e){return hp(e.animate)||iv.some(t=>uu(e[t]))}function B2(e){return!!(pp(e)||e.variants)}function xB(e,t){if(pp(e)){const{initial:r,animate:n}=e;return{initial:r===!1||uu(r)?r:void 0,animate:uu(n)?n:void 0}}return e.inherit!==!1?t:{}}function vB(e){const{initial:t,animate:r}=xB(e,m.useContext(up));return m.useMemo(()=>({initial:t,animate:r}),[Fk(t),Fk(r)])}function Fk(e){return Array.isArray(e)?e.join(" "):e}const Bk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},du={};for(const e in Bk)du[e]={isEnabled:t=>Bk[e].some(r=>!!t[r])};function bB(e){for(const t in e)du[t]={...du[t],...e[t]}}const av=m.createContext({}),z2=m.createContext({}),wB=Symbol.for("motionComponentSymbol");function kB({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&bB(e);function i(l,c){let u;const d={...m.useContext(P2),...l,layoutId:SB(l)},{isStatic:f}=d,h=vB(l),p=n(l,f);if(!f&&fp){h.visualElement=gB(s,p,d,t);const g=m.useContext(z2),y=m.useContext(L2).strict;h.visualElement&&(u=h.visualElement.loadFeatures(d,y,e,g))}return m.createElement(up.Provider,{value:h},u&&h.visualElement?m.createElement(u,{visualElement:h.visualElement,...d}):null,r(s,l,yB(p,h.visualElement,c),p,f,h.visualElement))}const a=m.forwardRef(i);return a[wB]=s,a}function SB({layoutId:e}){const t=m.useContext(av).id;return t&&e!==void 0?t+"-"+e:e}function EB(e){function t(n,s={}){return kB(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const NB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ov(e){return typeof e!="string"||e.includes("-")?!1:!!(NB.indexOf(e)>-1||/[A-Z]/.test(e))}const Qf={};function jB(e){Object.assign(Qf,e)}const Uu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],to=new Set(Uu);function U2(e,{layout:t,layoutId:r}){return to.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Qf[e]||e==="opacity")}const hn=e=>!!(e&&e.getVelocity),CB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TB=Uu.length;function AB(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let i="";for(let a=0;a<TB;a++){const l=Uu[a];if(e[l]!==void 0){const c=CB[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,n?"":i):r&&n&&(i="none"),i}const H2=e=>t=>typeof t=="string"&&t.startsWith(e),V2=H2("--"),Q0=H2("var(--"),DB=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,RB=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ki=(e,t,r)=>Math.min(Math.max(r,e),t),ro={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Sc={...ro,transform:e=>Ki(0,1,e)},vd={...ro,default:1},Ec=e=>Math.round(e*1e5)/1e5,mp=/(-)?([\d]*\.?[\d])+/g,$2=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,_B=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Hu(e){return typeof e=="string"}const Vu=e=>({test:t=>Hu(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),yi=Vu("deg"),Ts=Vu("%"),Pe=Vu("px"),IB=Vu("vh"),MB=Vu("vw"),zk={...Ts,parse:e=>Ts.parse(e)/100,transform:e=>Ts.transform(e*100)},Uk={...ro,transform:Math.round},W2={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,size:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,rotate:yi,rotateX:yi,rotateY:yi,rotateZ:yi,scale:vd,scaleX:vd,scaleY:vd,scaleZ:vd,skew:yi,skewX:yi,skewY:yi,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Sc,originX:zk,originY:zk,originZ:Pe,zIndex:Uk,fillOpacity:Sc,strokeOpacity:Sc,numOctaves:Uk};function lv(e,t,r,n){const{style:s,vars:i,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const f in t){const h=t[f];if(V2(f)){i[f]=h;continue}const p=W2[f],g=RB(h,p);if(to.has(f)){if(c=!0,a[f]=g,!d)continue;h!==(p.default||0)&&(d=!1)}else f.startsWith("origin")?(u=!0,l[f]=g):s[f]=g}if(t.transform||(c||n?s.transform=AB(e.transform,r,d,n):s.transform&&(s.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:p=0}=l;s.transformOrigin=`${f} ${h} ${p}`}}const cv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Y2(e,t,r){for(const n in t)!hn(t[n])&&!U2(n,r)&&(e[n]=t[n])}function OB({transformTemplate:e},t,r){return m.useMemo(()=>{const n=cv();return lv(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function PB(e,t,r){const n=e.style||{},s={};return Y2(s,n,e),Object.assign(s,OB(e,t,r)),e.transformValues?e.transformValues(s):s}function LB(e,t,r){const n={},s=PB(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const FB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||FB.has(e)}let G2=e=>!Zf(e);function BB(e){e&&(G2=t=>t.startsWith("on")?!Zf(t):e(t))}try{BB(require("@emotion/is-prop-valid").default)}catch{}function zB(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(G2(s)||r===!0&&Zf(s)||!t&&!Zf(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function Hk(e,t,r){return typeof e=="string"?e:Pe.transform(t+r*e)}function UB(e,t,r){const n=Hk(t,e.x,e.width),s=Hk(r,e.y,e.height);return`${n} ${s}`}const HB={offset:"stroke-dashoffset",array:"stroke-dasharray"},VB={offset:"strokeDashoffset",array:"strokeDasharray"};function $B(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?HB:VB;e[i.offset]=Pe.transform(-n);const a=Pe.transform(t),l=Pe.transform(r);e[i.array]=`${a} ${l}`}function uv(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,f,h){if(lv(e,u,d,h),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g,dimensions:y}=e;p.transform&&(y&&(g.transform=p.transform),delete p.transform),y&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=UB(y,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(p.x=t),r!==void 0&&(p.y=r),n!==void 0&&(p.scale=n),a!==void 0&&$B(p,a,l,c,!1)}const q2=()=>({...cv(),attrs:{}}),dv=e=>typeof e=="string"&&e.toLowerCase()==="svg";function WB(e,t,r,n){const s=m.useMemo(()=>{const i=q2();return uv(i,t,{enableHardwareAcceleration:!1},dv(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Y2(i,e.style,e),s.style={...i,...s.style}}return s}function YB(e=!1){return(r,n,s,{latestValues:i},a)=>{const c=(ov(r)?WB:LB)(n,i,a,r),d={...zB(n,typeof r=="string",e),...c,ref:s},{children:f}=n,h=m.useMemo(()=>hn(f)?f.get():f,[f]);return m.createElement(r,{...d,children:h})}}function K2(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const Q2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Z2(e,t,r,n){K2(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(Q2.has(s)?s:nv(s),t.attrs[s])}function fv(e,t){const{style:r}=e,n={};for(const s in r)(hn(r[s])||t.style&&hn(t.style[s])||U2(s,e))&&(n[s]=r[s]);return n}function X2(e,t){const r=fv(e,t);for(const n in e)if(hn(e[n])||hn(t[n])){const s=Uu.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function hv(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function J2(e){const t=m.useRef(null);return t.current===null&&(t.current=e()),t.current}const Xf=e=>Array.isArray(e),GB=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),qB=e=>Xf(e)?e[e.length-1]||0:e;function rf(e){const t=hn(e)?e.get():e;return GB(t)?t.toValue():t}function KB({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,i){const a={latestValues:QB(n,s,i,e),renderState:t()};return r&&(a.mount=l=>r(n,l,a)),a}const eA=e=>(t,r)=>{const n=m.useContext(up),s=m.useContext(dp),i=()=>KB(e,t,n,s);return r?i():J2(i)};function QB(e,t,r,n){const s={},i=n(e,{});for(const h in i)s[h]=rf(i[h]);let{initial:a,animate:l}=e;const c=pp(e),u=B2(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const f=d?l:a;return f&&typeof f!="boolean"&&!hp(f)&&(Array.isArray(f)?f:[f]).forEach(p=>{const g=hv(e,p);if(!g)return;const{transitionEnd:y,transition:b,...v}=g;for(const x in v){let w=v[x];if(Array.isArray(w)){const k=d?w.length-1:0;w=w[k]}w!==null&&(s[x]=w)}for(const x in y)s[x]=y[x]}),s}const Jt=e=>e;class Vk{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function ZB(e){let t=new Vk,r=new Vk,n=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const f=d&&s,h=f?t:r;return u&&a.add(c),h.add(c)&&f&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),a.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}s=!1,i&&(i=!1,l.process(c))}};return l}const bd=["prepare","read","update","preRender","render","postRender"],XB=40;function JB(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=bd.reduce((f,h)=>(f[h]=ZB(()=>r=!0),f),{}),a=f=>i[f].process(s),l=()=>{const f=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(f-s.timestamp,XB),1),s.timestamp=f,s.isProcessing=!0,bd.forEach(a),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:bd.reduce((f,h)=>{const p=i[h];return f[h]=(g,y=!1,b=!1)=>(r||c(),p.schedule(g,y,b)),f},{}),cancel:f=>bd.forEach(h=>i[h].cancel(f)),state:s,steps:i}}const{schedule:Ct,cancel:si,state:Dr,steps:Tm}=JB(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jt,!0),e7={useVisualState:eA({scrapeMotionValuesFromProps:X2,createRenderState:q2,onMount:(e,t,{renderState:r,latestValues:n})=>{Ct.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Ct.render(()=>{uv(r,n,{enableHardwareAcceleration:!1},dv(t.tagName),e.transformTemplate),Z2(t,r)})}})},t7={useVisualState:eA({scrapeMotionValuesFromProps:fv,createRenderState:cv})};function r7(e,{forwardMotionProps:t=!1},r,n){return{...ov(e)?e7:t7,preloadedFeatures:r,useRender:YB(t),createVisualElement:n,Component:e}}function Gs(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const tA=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function gp(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const n7=e=>t=>tA(t)&&e(t,gp(t));function Qs(e,t,r,n){return Gs(e,t,n7(r),n)}const s7=(e,t)=>r=>t(e(r)),$i=(...e)=>e.reduce(s7);function rA(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const $k=rA("dragHorizontal"),Wk=rA("dragVertical");function nA(e){let t=!1;if(e==="y")t=Wk();else if(e==="x")t=$k();else{const r=$k(),n=Wk();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function sA(){const e=nA(!0);return e?(e(),!1):!0}class sa{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Yk(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||sA())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Ct.update(()=>l[n](i,a))};return Qs(e.current,r,s,{passive:!e.getProps()[n]})}class i7 extends sa{mount(){this.unmount=$i(Yk(this.node,!0),Yk(this.node,!1))}unmount(){}}class a7 extends sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$i(Gs(this.node.current,"focus",()=>this.onFocus()),Gs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const iA=(e,t)=>t?e===t?!0:iA(e,t.parentElement):!1;function Am(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,gp(r))}class o7 extends sa{constructor(){super(...arguments),this.removeStartListeners=Jt,this.removeEndListeners=Jt,this.removeAccessibleListeners=Jt,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=Qs(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps();Ct.update(()=>{!f&&!iA(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),a=Qs(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=$i(i,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Am("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Ct.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Gs(this.node.current,"keyup",a),Am("down",(l,c)=>{this.startPress(l,c)})},r=Gs(this.node.current,"keydown",t),n=()=>{this.isPressing&&Am("cancel",(i,a)=>this.cancelPress(i,a))},s=Gs(this.node.current,"blur",n);this.removeAccessibleListeners=$i(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ct.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!sA()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ct.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=Qs(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=Gs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=$i(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Z0=new WeakMap,Dm=new WeakMap,l7=e=>{const t=Z0.get(e.target);t&&t(e)},c7=e=>{e.forEach(l7)};function u7({root:e,...t}){const r=e||document;Dm.has(r)||Dm.set(r,{});const n=Dm.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(c7,{root:e,...t})),n[s]}function d7(e,t,r){const n=u7(t);return Z0.set(e,r),n.observe(e),()=>{Z0.delete(e),n.unobserve(e)}}const f7={some:0,all:1};class h7 extends sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:f7[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return d7(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(p7(t,r))&&this.startObserver()}unmount(){}}function p7({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const m7={inView:{Feature:h7},tap:{Feature:o7},focus:{Feature:a7},hover:{Feature:i7}};function aA(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function g7(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function y7(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function yp(e,t,r){const n=e.getProps();return hv(n,t,r!==void 0?r:n.custom,g7(e),y7(e))}let pv=Jt;const La=e=>e*1e3,Zs=e=>e/1e3,x7={current:!1},oA=e=>Array.isArray(e)&&typeof e[0]=="number";function lA(e){return!!(!e||typeof e=="string"&&cA[e]||oA(e)||Array.isArray(e)&&e.every(lA))}const lc=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,cA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lc([0,.65,.55,1]),circOut:lc([.55,0,1,.45]),backIn:lc([.31,.01,.66,-.59]),backOut:lc([.33,1.53,.69,.99])};function uA(e){if(e)return oA(e)?lc(e):Array.isArray(e)?e.map(uA):cA[e]}function v7(e,t,r,{delay:n=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=uA(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function b7(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const dA=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,w7=1e-7,k7=12;function S7(e,t,r,n,s){let i,a,l=0;do a=t+(r-t)/2,i=dA(a,n,s)-e,i>0?r=a:t=a;while(Math.abs(i)>w7&&++l<k7);return a}function $u(e,t,r,n){if(e===t&&r===n)return Jt;const s=i=>S7(i,0,1,e,r);return i=>i===0||i===1?i:dA(s(i),t,n)}const E7=$u(.42,0,1,1),N7=$u(0,0,.58,1),fA=$u(.42,0,.58,1),j7=e=>Array.isArray(e)&&typeof e[0]!="number",hA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,pA=e=>t=>1-e(1-t),mv=e=>1-Math.sin(Math.acos(e)),mA=pA(mv),C7=hA(mv),gA=$u(.33,1.53,.69,.99),gv=pA(gA),T7=hA(gv),A7=e=>(e*=2)<1?.5*gv(e):.5*(2-Math.pow(2,-10*(e-1))),D7={linear:Jt,easeIn:E7,easeInOut:fA,easeOut:N7,circIn:mv,circInOut:C7,circOut:mA,backIn:gv,backInOut:T7,backOut:gA,anticipate:A7},Gk=e=>{if(Array.isArray(e)){pv(e.length===4);const[t,r,n,s]=e;return $u(t,r,n,s)}else if(typeof e=="string")return D7[e];return e},yv=(e,t)=>r=>!!(Hu(r)&&_B.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),yA=(e,t,r)=>n=>{if(!Hu(n))return n;const[s,i,a,l]=n.match(mp);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},R7=e=>Ki(0,255,e),Rm={...ro,transform:e=>Math.round(R7(e))},Aa={test:yv("rgb","red"),parse:yA("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Rm.transform(e)+", "+Rm.transform(t)+", "+Rm.transform(r)+", "+Ec(Sc.transform(n))+")"};function _7(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const X0={test:yv("#"),parse:_7,transform:Aa.transform},Ao={test:yv("hsl","hue"),parse:yA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ts.transform(Ec(t))+", "+Ts.transform(Ec(r))+", "+Ec(Sc.transform(n))+")"},$r={test:e=>Aa.test(e)||X0.test(e)||Ao.test(e),parse:e=>Aa.test(e)?Aa.parse(e):Ao.test(e)?Ao.parse(e):X0.parse(e),transform:e=>Hu(e)?e:e.hasOwnProperty("red")?Aa.transform(e):Ao.transform(e)},zt=(e,t,r)=>-r*e+r*t+e;function _m(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function I7({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,a=0;if(!t)s=i=a=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=_m(c,l,e+1/3),i=_m(c,l,e),a=_m(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:n}}const Im=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},M7=[X0,Aa,Ao],O7=e=>M7.find(t=>t.test(e));function qk(e){const t=O7(e);let r=t.parse(e);return t===Ao&&(r=I7(r)),r}const xA=(e,t)=>{const r=qk(e),n=qk(t),s={...r};return i=>(s.red=Im(r.red,n.red,i),s.green=Im(r.green,n.green,i),s.blue=Im(r.blue,n.blue,i),s.alpha=zt(r.alpha,n.alpha,i),Aa.transform(s))};function P7(e){var t,r;return isNaN(e)&&Hu(e)&&(((t=e.match(mp))===null||t===void 0?void 0:t.length)||0)+(((r=e.match($2))===null||r===void 0?void 0:r.length)||0)>0}const vA={regex:DB,countKey:"Vars",token:"${v}",parse:Jt},bA={regex:$2,countKey:"Colors",token:"${c}",parse:$r.parse},wA={regex:mp,countKey:"Numbers",token:"${n}",parse:ro.parse};function Mm(e,{regex:t,countKey:r,token:n,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(s)))}function Jf(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Mm(r,vA),Mm(r,bA),Mm(r,wA),r}function kA(e){return Jf(e).values}function SA(e){const{values:t,numColors:r,numVars:n,tokenised:s}=Jf(e),i=t.length;return a=>{let l=s;for(let c=0;c<i;c++)c<n?l=l.replace(vA.token,a[c]):c<n+r?l=l.replace(bA.token,$r.transform(a[c])):l=l.replace(wA.token,Ec(a[c]));return l}}const L7=e=>typeof e=="number"?0:e;function F7(e){const t=kA(e);return SA(e)(t.map(L7))}const Qi={test:P7,parse:kA,createTransformer:SA,getAnimatableNone:F7},EA=(e,t)=>r=>`${r>0?t:e}`;function NA(e,t){return typeof e=="number"?r=>zt(e,t,r):$r.test(e)?xA(e,t):e.startsWith("var(")?EA(e,t):CA(e,t)}const jA=(e,t)=>{const r=[...e],n=r.length,s=e.map((i,a)=>NA(i,t[a]));return i=>{for(let a=0;a<n;a++)r[a]=s[a](i);return r}},B7=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=NA(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}},CA=(e,t)=>{const r=Qi.createTransformer(t),n=Jf(e),s=Jf(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?$i(jA(n.values,s.values),r):EA(e,t)},fu=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},Kk=(e,t)=>r=>zt(e,t,r);function z7(e){return typeof e=="number"?Kk:typeof e=="string"?$r.test(e)?xA:CA:Array.isArray(e)?jA:typeof e=="object"?B7:Kk}function U7(e,t,r){const n=[],s=r||z7(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Jt:t;l=$i(c,l)}n.push(l)}return n}function TA(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(pv(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=U7(t,n,s),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=fu(e[d],e[d+1],u);return a[d](f)};return r?u=>c(Ki(e[0],e[i-1],u)):c}function H7(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=fu(0,t,n);e.push(zt(r,1,s))}}function V7(e){const t=[0];return H7(t,e.length-1),t}function $7(e,t){return e.map(r=>r*t)}function W7(e,t){return e.map(()=>t||fA).splice(0,e.length-1)}function eh({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=j7(n)?n.map(Gk):Gk(n),i={done:!1,value:t[0]},a=$7(r&&r.length===t.length?r:V7(t),e),l=TA(a,t,{ease:Array.isArray(s)?s:W7(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function AA(e,t){return t?e*(1e3/t):0}const Y7=5;function DA(e,t,r){const n=Math.max(t-Y7,0);return AA(r-e(n),t-n)}const Om=.001,G7=.01,q7=10,K7=.05,Q7=1;function Z7({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,i,a=1-t;a=Ki(K7,Q7,a),e=Ki(G7,q7,Zs(e)),a<1?(s=u=>{const d=u*a,f=d*e,h=d-r,p=J0(u,a),g=Math.exp(-f);return Om-h/p*g},i=u=>{const f=u*a*e,h=f*r+r,p=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-f),y=J0(Math.pow(u,2),a);return(-s(u)+Om>0?-1:1)*((h-p)*g)/y}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-Om+d*f},i=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const l=5/e,c=J7(s,i,l);if(e=La(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const X7=12;function J7(e,t,r){let n=r;for(let s=1;s<X7;s++)n=n-e(n)/t(n);return n}function J0(e,t){return e*Math.sqrt(1-t*t)}const ez=["duration","bounce"],tz=["stiffness","damping","mass"];function Qk(e,t){return t.some(r=>e[r]!==void 0)}function rz(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Qk(e,tz)&&Qk(e,ez)){const r=Z7(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function RA({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],i=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=rz({...n,velocity:-Zs(n.velocity||0)}),p=f||0,g=c/(2*Math.sqrt(l*u)),y=i-s,b=Zs(Math.sqrt(l/u)),v=Math.abs(y)<5;r||(r=v?.01:2),t||(t=v?.005:.5);let x;if(g<1){const w=J0(b,g);x=k=>{const S=Math.exp(-g*b*k);return i-S*((p+g*b*y)/w*Math.sin(w*k)+y*Math.cos(w*k))}}else if(g===1)x=w=>i-Math.exp(-b*w)*(y+(p+b*y)*w);else{const w=b*Math.sqrt(g*g-1);x=k=>{const S=Math.exp(-g*b*k),E=Math.min(w*k,300);return i-S*((p+g*b*y)*Math.sinh(E)+w*y*Math.cosh(E))/w}}return{calculatedDuration:h&&d||null,next:w=>{const k=x(w);if(h)a.done=w>=d;else{let S=p;w!==0&&(g<1?S=DA(x,w,k):S=0);const E=Math.abs(S)<=r,N=Math.abs(i-k)<=t;a.done=E&&N}return a.value=a.done?i:k,a}}}function Zk({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},p=j=>l!==void 0&&j<l||c!==void 0&&j>c,g=j=>l===void 0?c:c===void 0||Math.abs(l-j)<Math.abs(c-j)?l:c;let y=r*t;const b=f+y,v=a===void 0?b:a(b);v!==b&&(y=v-f);const x=j=>-y*Math.exp(-j/n),w=j=>v+x(j),k=j=>{const T=x(j),C=w(j);h.done=Math.abs(T)<=u,h.value=h.done?v:C};let S,E;const N=j=>{p(h.value)&&(S=j,E=RA({keyframes:[h.value,g(h.value)],velocity:DA(w,j,h.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:j=>{let T=!1;return!E&&S===void 0&&(T=!0,k(j),N(j)),S!==void 0&&j>S?E.next(j-S):(!T&&k(j),h)}}}const nz=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Ct.update(t,!0),stop:()=>si(t),now:()=>Dr.isProcessing?Dr.timestamp:performance.now()}},Xk=2e4;function Jk(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Xk;)t+=r,n=e.next(t);return t>=Xk?1/0:t}const sz={decay:Zk,inertia:Zk,tween:eh,keyframes:eh,spring:RA};function th({autoplay:e=!0,delay:t=0,driver:r=nz,keyframes:n,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:f,...h}){let p=1,g=!1,y,b;const v=()=>{b=new Promise(X=>{y=X})};v();let x;const w=sz[s]||eh;let k;w!==eh&&typeof n[0]!="number"&&(k=TA([0,100],n,{clamp:!1}),n=[0,100]);const S=w({...h,keyframes:n});let E;l==="mirror"&&(E=w({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let N="idle",j=null,T=null,C=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=Jk(S));const{calculatedDuration:_}=S;let V=1/0,F=1/0;_!==null&&(V=_+a,F=V*(i+1)-a);let R=0;const L=X=>{if(T===null)return;p>0&&(T=Math.min(T,X)),p<0&&(T=Math.min(X-F/p,T)),j!==null?R=j:R=Math.round(X-T)*p;const de=R-t*(p>=0?1:-1),fe=p>=0?de<0:de>F;R=Math.max(de,0),N==="finished"&&j===null&&(R=F);let ye=R,ie=S;if(i){const oe=Math.min(R,F)/V;let te=Math.floor(oe),be=oe%1;!be&&oe>=1&&(be=1),be===1&&te--,te=Math.min(te,i+1),!!(te%2)&&(l==="reverse"?(be=1-be,a&&(be-=a/V)):l==="mirror"&&(ie=E)),ye=Ki(0,1,be)*V}const M=fe?{done:!1,value:n[0]}:ie.next(ye);k&&(M.value=k(M.value));let{done:J}=M;!fe&&_!==null&&(J=p>=0?R>=F:R<=0);const P=j===null&&(N==="finished"||N==="running"&&J);return f&&f(M.value),P&&B(),M},O=()=>{x&&x.stop(),x=void 0},z=()=>{N="idle",O(),y(),v(),T=C=null},B=()=>{N="finished",d&&d(),O(),y()},W=()=>{if(g)return;x||(x=r(L));const X=x.now();c&&c(),j!==null?T=X-j:(!T||N==="finished")&&(T=X),N==="finished"&&v(),C=T,j=null,N="running",x.start()};e&&W();const se={then(X,de){return b.then(X,de)},get time(){return Zs(R)},set time(X){X=La(X),R=X,j!==null||!x||p===0?j=X:T=x.now()-X/p},get duration(){const X=S.calculatedDuration===null?Jk(S):S.calculatedDuration;return Zs(X)},get speed(){return p},set speed(X){X===p||!x||(p=X,se.time=Zs(R))},get state(){return N},play:W,pause:()=>{N="paused",j=R},stop:()=>{g=!0,N!=="idle"&&(N="idle",u&&u(),z())},cancel:()=>{C!==null&&L(C),z()},complete:()=>{N="finished"},sample:X=>(T=0,L(X))};return se}function iz(e){let t;return()=>(t===void 0&&(t=e()),t)}const az=iz(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),oz=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),wd=10,lz=2e4,cz=(e,t)=>t.type==="spring"||e==="backgroundColor"||!lA(t.ease);function uz(e,t,{onUpdate:r,onComplete:n,...s}){if(!(az()&&oz.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:f,duration:h=300,ease:p,times:g}=s;if(cz(t,s)){const w=th({...s,repeat:0,delay:0});let k={done:!1,value:f[0]};const S=[];let E=0;for(;!k.done&&E<lz;)k=w.sample(E),S.push(k.value),E+=wd;g=void 0,f=S,h=E-wd,p="linear"}const y=v7(e.owner.current,t,f,{...s,duration:h,ease:p,times:g}),b=()=>{u=!1,y.cancel()},v=()=>{u=!0,Ct.update(b),l(),d()};return y.onfinish=()=>{u||(e.set(b7(f,s)),n&&n(),v())},{then(w,k){return c.then(w,k)},attachTimeline(w){return y.timeline=w,y.onfinish=null,Jt},get time(){return Zs(y.currentTime||0)},set time(w){y.currentTime=La(w)},get speed(){return y.playbackRate},set speed(w){y.playbackRate=w},get duration(){return Zs(h)},play:()=>{a||(y.play(),si(b))},pause:()=>y.pause(),stop:()=>{if(a=!0,y.playState==="idle")return;const{currentTime:w}=y;if(w){const k=th({...s,autoplay:!1});e.setWithVelocity(k.sample(w-wd).value,k.sample(w).value,wd)}v()},complete:()=>{u||y.finish()},cancel:v}}function dz({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Jt,pause:Jt,stop:Jt,then:i=>(i(),Promise.resolve()),cancel:Jt,complete:Jt});return t?th({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const fz={type:"spring",stiffness:500,damping:25,restSpeed:10},hz=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),pz={type:"keyframes",duration:.8},mz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gz=(e,{keyframes:t})=>t.length>2?pz:to.has(e)?e.startsWith("scale")?hz(t[1]):fz:mz,ey=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qi.test(t)||t==="0")&&!t.startsWith("url(")),yz=new Set(["brightness","contrast","saturate","opacity"]);function xz(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(mp)||[];if(!n)return e;const s=r.replace(n,"");let i=yz.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const vz=/([a-z-]*)\(.*?\)/g,ty={...Qi,getAnimatableNone:e=>{const t=e.match(vz);return t?t.map(xz).join(" "):e}},bz={...W2,color:$r,backgroundColor:$r,outlineColor:$r,fill:$r,stroke:$r,borderColor:$r,borderTopColor:$r,borderRightColor:$r,borderBottomColor:$r,borderLeftColor:$r,filter:ty,WebkitFilter:ty},xv=e=>bz[e];function _A(e,t){let r=xv(e);return r!==ty&&(r=Qi),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const IA=e=>/^0[^.\s]+$/.test(e);function wz(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||IA(e)}function kz(e,t,r,n){const s=ey(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const a=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?a:i[u-1]),wz(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=_A(t,l)}return i}function Sz({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function vv(e,t){return e[t]||e.default||e}const Ez={skipAnimations:!1},bv=(e,t,r,n={})=>s=>{const i=vv(n,e)||{},a=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-La(a);const c=kz(t,e,r,i),u=c[0],d=c[c.length-1],f=ey(e,u),h=ey(e,d);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Sz(i)||(p={...p,...gz(e,p)}),p.duration&&(p.duration=La(p.duration)),p.repeatDelay&&(p.repeatDelay=La(p.repeatDelay)),!f||!h||x7.current||i.type===!1||Ez.skipAnimations)return dz(p);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=uz(t,e,p);if(g)return g}return th(p)};function rh(e){return!!(hn(e)&&e.add)}const MA=e=>/^\-?\d*\.?\d+$/.test(e);function wv(e,t){e.indexOf(t)===-1&&e.push(t)}function kv(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Sv{constructor(){this.subscriptions=[]}add(t){return wv(this.subscriptions,t),()=>kv(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Nz=e=>!isNaN(parseFloat(e));class jz{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:a}=Dr;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,Ct.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ct.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Nz(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Sv);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ct.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?AA(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ol(e,t){return new jz(e,t)}const OA=e=>t=>t.test(e),Cz={test:e=>e==="auto",parse:e=>e},PA=[ro,Pe,Ts,yi,MB,IB,Cz],Yl=e=>PA.find(OA(e)),Tz=[...PA,$r,Qi],Az=e=>Tz.find(OA(e));function Dz(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ol(r))}function Rz(e,t){const r=yp(e,t);let{transitionEnd:n={},transition:s={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const a in i){const l=qB(i[a]);Dz(e,a,l)}}function _z(e,t,r){var n,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(MA(d)||IA(d))?d=parseFloat(d):!Az(d)&&Qi.test(u)&&(d=_A(c,u)),e.addValue(c,ol(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function Iz(e,t){return t?(t[e]||t.default||t).from:void 0}function Mz(e,t,r){const n={};for(const s in e){const i=Iz(s,t);if(i!==void 0)n[s]=i;else{const a=r.getValue(s);a&&(n[s]=a.get())}}return n}function Oz({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function Pz(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function LA(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const f in l){const h=e.getValue(f),p=l[f];if(!h||p===void 0||d&&Oz(d,f))continue;const g={delay:r,elapsed:0,...vv(i||{},f)};if(window.HandoffAppearAnimations){const v=e.getProps()[F2];if(v){const x=window.HandoffAppearAnimations(v,f,h,Ct);x!==null&&(g.elapsed=x,g.isHandoff=!0)}}let y=!g.isHandoff&&!Pz(h,p);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(y=!1),h.animation&&(y=!1),y)continue;h.start(bv(f,h,p,e.shouldReduceMotion&&to.has(f)?{type:!1}:g));const b=h.animation;rh(c)&&(c.add(f),b.then(()=>c.remove(f))),u.push(b)}return a&&Promise.all(u).then(()=>{a&&Rz(e,a)}),u}function ry(e,t,r={}){const n=yp(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(LA(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return Lz(e,t,u+c,d,f,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(r.delay)])}function Lz(e,t,r=0,n=0,s=1,i){const a=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(Fz).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(ry(u,t,{...i,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function Fz(e,t){return e.sortNodePosition(t)}function Bz(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>ry(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=ry(e,t,r);else{const s=typeof t=="function"?yp(e,t,r.custom):t;n=Promise.all(LA(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const zz=[...sv].reverse(),Uz=sv.length;function Hz(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Bz(e,r,n)))}function Vz(e){let t=Hz(e);const r=Wz();let n=!0;const s=(c,u)=>{const d=yp(e,u);if(d){const{transition:f,transitionEnd:h,...p}=d;c={...c,...p,...h}}return c};function i(c){t=c(e)}function a(c,u){const d=e.getProps(),f=e.getVariantContext(!0)||{},h=[],p=new Set;let g={},y=1/0;for(let v=0;v<Uz;v++){const x=zz[v],w=r[x],k=d[x]!==void 0?d[x]:f[x],S=uu(k),E=x===u?w.isActive:null;E===!1&&(y=v);let N=k===f[x]&&k!==d[x]&&S;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...g},!w.isActive&&E===null||!k&&!w.prevProp||hp(k)||typeof k=="boolean")continue;let T=$z(w.prevProp,k)||x===u&&w.isActive&&!N&&S||v>y&&S,C=!1;const _=Array.isArray(k)?k:[k];let V=_.reduce(s,{});E===!1&&(V={});const{prevResolvedValues:F={}}=w,R={...F,...V},L=O=>{T=!0,p.has(O)&&(C=!0,p.delete(O)),w.needsAnimating[O]=!0};for(const O in R){const z=V[O],B=F[O];if(g.hasOwnProperty(O))continue;let W=!1;Xf(z)&&Xf(B)?W=!aA(z,B):W=z!==B,W?z!==void 0?L(O):p.add(O):z!==void 0&&p.has(O)?L(O):w.protectedKeys[O]=!0}w.prevProp=k,w.prevResolvedValues=V,w.isActive&&(g={...g,...V}),n&&e.blockInitialAnimation&&(T=!1),T&&(!N||C)&&h.push(..._.map(O=>({animation:O,options:{type:x,...c}})))}if(p.size){const v={};p.forEach(x=>{const w=e.getBaseTarget(x);w!==void 0&&(v[x]=w)}),h.push({animation:v})}let b=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(b=!1),n=!1,b?t(h):Promise.resolve()}function l(c,u,d){var f;if(r[c].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),r[c].isActive=u;const h=a(d,c);for(const p in r)r[p].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>r}}function $z(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!aA(t,e):!1}function ha(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wz(){return{animate:ha(!0),whileInView:ha(),whileHover:ha(),whileTap:ha(),whileDrag:ha(),whileFocus:ha(),exit:ha()}}class Yz extends sa{constructor(t){super(t),t.animationState||(t.animationState=Vz(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),hp(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let Gz=0;class qz extends sa{constructor(){super(...arguments),this.id=Gz++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Kz={animation:{Feature:Yz},exit:{Feature:qz}},eS=(e,t)=>Math.abs(e-t);function Qz(e,t){const r=eS(e.x,t.x),n=eS(e.y,t.y);return Math.sqrt(r**2+n**2)}class FA{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Lm(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=Qz(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:g}=f,{timestamp:y}=Dr;this.history.push({...g,timestamp:y});const{onStart:b,onMove:v}=this.handlers;h||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Pm(h,this.transformPagePoint),Ct.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Lm(f.type==="pointercancel"?this.lastMoveEventInfo:Pm(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,b),g&&g(f,b)},!tA(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const a=gp(t),l=Pm(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Dr;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,Lm(l,this.history)),this.removeListeners=$i(Qs(this.contextWindow,"pointermove",this.handlePointerMove),Qs(this.contextWindow,"pointerup",this.handlePointerUp),Qs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),si(this.updatePoint)}}function Pm(e,t){return t?{point:t(e.point)}:e}function tS(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Lm({point:e},t){return{point:e,delta:tS(e,BA(t)),offset:tS(e,Zz(t)),velocity:Xz(t,.1)}}function Zz(e){return e[0]}function BA(e){return e[e.length-1]}function Xz(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=BA(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>La(t)));)r--;if(!n)return{x:0,y:0};const i=Zs(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function En(e){return e.max-e.min}function ny(e,t=0,r=.01){return Math.abs(e-t)<=r}function rS(e,t,r,n=.5){e.origin=n,e.originPoint=zt(t.min,t.max,e.origin),e.scale=En(r)/En(t),(ny(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=zt(r.min,r.max,e.origin)-e.originPoint,(ny(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Nc(e,t,r,n){rS(e.x,t.x,r.x,n?n.originX:void 0),rS(e.y,t.y,r.y,n?n.originY:void 0)}function nS(e,t,r){e.min=r.min+t.min,e.max=e.min+En(t)}function Jz(e,t,r){nS(e.x,t.x,r.x),nS(e.y,t.y,r.y)}function sS(e,t,r){e.min=t.min-r.min,e.max=e.min+En(t)}function jc(e,t,r){sS(e.x,t.x,r.x),sS(e.y,t.y,r.y)}function eU(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?zt(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?zt(r,e,n.max):Math.min(e,r)),e}function iS(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function tU(e,{top:t,left:r,bottom:n,right:s}){return{x:iS(e.x,r,s),y:iS(e.y,t,n)}}function aS(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function rU(e,t){return{x:aS(e.x,t.x),y:aS(e.y,t.y)}}function nU(e,t){let r=.5;const n=En(e),s=En(t);return s>n?r=fu(t.min,t.max-n,e.min):n>s&&(r=fu(e.min,e.max-s,t.min)),Ki(0,1,r)}function sU(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const sy=.35;function iU(e=sy){return e===!1?e=0:e===!0&&(e=sy),{x:oS(e,"left","right"),y:oS(e,"top","bottom")}}function oS(e,t,r){return{min:lS(e,t),max:lS(e,r)}}function lS(e,t){return typeof e=="number"?e:e[t]||0}const cS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Do=()=>({x:cS(),y:cS()}),uS=()=>({min:0,max:0}),ir=()=>({x:uS(),y:uS()});function _n(e){return[e("x"),e("y")]}function zA({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function aU({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function oU(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Fm(e){return e===void 0||e===1}function iy({scale:e,scaleX:t,scaleY:r}){return!Fm(e)||!Fm(t)||!Fm(r)}function ya(e){return iy(e)||UA(e)||e.z||e.rotate||e.rotateX||e.rotateY}function UA(e){return dS(e.x)||dS(e.y)}function dS(e){return e&&e!=="0%"}function nh(e,t,r){const n=e-r,s=t*n;return r+s}function fS(e,t,r,n,s){return s!==void 0&&(e=nh(e,s,n)),nh(e,r,n)+t}function ay(e,t=0,r=1,n,s){e.min=fS(e.min,t,r,n,s),e.max=fS(e.max,t,r,n,s)}function HA(e,{x:t,y:r}){ay(e.x,t.translate,t.scale,t.originPoint),ay(e.y,r.translate,r.scale,r.originPoint)}function lU(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=r[l],a=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ro(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,HA(e,a)),n&&ya(i.latestValues)&&Ro(e,i.latestValues))}t.x=hS(t.x),t.y=hS(t.y)}function hS(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function bi(e,t){e.min=e.min+t,e.max=e.max+t}function pS(e,t,[r,n,s]){const i=t[s]!==void 0?t[s]:.5,a=zt(e.min,e.max,i);ay(e,t[r],t[n],a,t.scale)}const cU=["x","scaleX","originX"],uU=["y","scaleY","originY"];function Ro(e,t){pS(e.x,t,cU),pS(e.y,t,uU)}function VA(e,t){return zA(oU(e.getBoundingClientRect(),t))}function dU(e,t,r){const n=VA(e,r),{scroll:s}=t;return s&&(bi(n.x,s.offset.x),bi(n.y,s.offset.y)),n}const $A=({current:e})=>e?e.ownerDocument.defaultView:null,fU=new WeakMap;class hU{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ir(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(gp(d,"page").point)},i=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:g}=this.getProps();if(h&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=nA(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_n(b=>{let v=this.getAxisMotionValue(b).get()||0;if(Ts.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[b];w&&(v=En(w)*(parseFloat(v)/100))}}this.originPoint[b]=v}),g&&Ct.update(()=>g(d,f),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(d,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:g,onDrag:y}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:b}=f;if(p&&this.currentDirection===null){this.currentDirection=pU(b),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),y&&y(d,f)},l=(d,f)=>this.stop(d,f),c=()=>_n(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new FA(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:$A(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ct.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!kd(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=eU(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&To(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=tU(s.layoutBox,r):this.constraints=!1,this.elastic=iU(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&_n(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=sU(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!To(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=dU(n,s.root,this.visualElement.getTransformPagePoint());let a=rU(s.layout.layoutBox,i);if(r){const l=r(aU(a));this.hasMutatedConstraints=!!l,l&&(a=zA(l))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=_n(d=>{if(!kd(d,r,this.currentDirection))return;let f=c&&c[d]||{};a&&(f={min:0,max:0});const h=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(bv(t,n,0,r))}stopAnimation(){_n(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){_n(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){_n(r=>{const{drag:n}=this.getProps();if(!kd(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];i.set(t[r]-zt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!To(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};_n(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=nU({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),_n(a=>{if(!kd(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(zt(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;fU.set(this.visualElement,this);const t=this.visualElement.current,r=Qs(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();To(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const a=Gs(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(_n(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=sy,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function kd(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function pU(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class mU extends sa{constructor(t){super(t),this.removeGroupControls=Jt,this.removeListeners=Jt,this.controls=new hU(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jt}unmount(){this.removeGroupControls(),this.removeListeners()}}const mS=e=>(t,r)=>{e&&Ct.update(()=>e(t,r))};class gU extends sa{constructor(){super(...arguments),this.removePointerDownListener=Jt}onPointerDown(t){this.session=new FA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$A(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:mS(t),onStart:mS(r),onMove:n,onEnd:(i,a)=>{delete this.session,s&&Ct.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=Qs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function yU(){const e=m.useContext(dp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=m.useId();return m.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const nf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Gl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Pe.test(e))e=parseFloat(e);else return e;const r=gS(e,t.target.x),n=gS(e,t.target.y);return`${r}% ${n}%`}},xU={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Qi.parse(e);if(s.length>5)return n;const i=Qi.createTransformer(e),a=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=zt(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};class vU extends re.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;jB(bU),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),nf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,a=n.projection;return a&&(a.isPresent=i,s||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Ct.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function WA(e){const[t,r]=yU(),n=m.useContext(av);return re.createElement(vU,{...e,layoutGroup:n,switchLayoutGroup:m.useContext(z2),isPresent:t,safeToRemove:r})}const bU={borderRadius:{...Gl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gl,borderTopRightRadius:Gl,borderBottomLeftRadius:Gl,borderBottomRightRadius:Gl,boxShadow:xU},YA=["TopLeft","TopRight","BottomLeft","BottomRight"],wU=YA.length,yS=e=>typeof e=="string"?parseFloat(e):e,xS=e=>typeof e=="number"||Pe.test(e);function kU(e,t,r,n,s,i){s?(e.opacity=zt(0,r.opacity!==void 0?r.opacity:1,SU(n)),e.opacityExit=zt(t.opacity!==void 0?t.opacity:1,0,EU(n))):i&&(e.opacity=zt(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<wU;a++){const l=`border${YA[a]}Radius`;let c=vS(t,l),u=vS(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||xS(c)===xS(u)?(e[l]=Math.max(zt(yS(c),yS(u),n),0),(Ts.test(u)||Ts.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=zt(t.rotate||0,r.rotate||0,n))}function vS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const SU=GA(0,.5,mA),EU=GA(.5,.95,Jt);function GA(e,t,r){return n=>n<e?0:n>t?1:r(fu(e,t,n))}function bS(e,t){e.min=t.min,e.max=t.max}function Rn(e,t){bS(e.x,t.x),bS(e.y,t.y)}function wS(e,t,r,n,s){return e-=t,e=nh(e,1/r,n),s!==void 0&&(e=nh(e,1/s,n)),e}function NU(e,t=0,r=1,n=.5,s,i=e,a=e){if(Ts.test(t)&&(t=parseFloat(t),t=zt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=zt(i.min,i.max,n);e===i&&(l-=t),e.min=wS(e.min,t,r,l,s),e.max=wS(e.max,t,r,l,s)}function kS(e,t,[r,n,s],i,a){NU(e,t[r],t[n],t[s],t.scale,i,a)}const jU=["x","scaleX","originX"],CU=["y","scaleY","originY"];function SS(e,t,r,n){kS(e.x,t,jU,r?r.x:void 0,n?n.x:void 0),kS(e.y,t,CU,r?r.y:void 0,n?n.y:void 0)}function ES(e){return e.translate===0&&e.scale===1}function qA(e){return ES(e.x)&&ES(e.y)}function TU(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function KA(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function NS(e){return En(e.x)/En(e.y)}class AU{constructor(){this.members=[]}add(t){wv(this.members,t),t.scheduleRender()}remove(t){if(kv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jS(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(n=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const DU=(e,t)=>e.depth-t.depth;class RU{constructor(){this.children=[],this.isDirty=!1}add(t){wv(this.children,t),this.isDirty=!0}remove(t){kv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(DU),this.isDirty=!1,this.children.forEach(t)}}function _U(e,t){const r=performance.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(si(n),e(i-t))};return Ct.read(n,!0),()=>si(n)}function IU(e){window.MotionDebug&&window.MotionDebug.record(e)}function MU(e){return e instanceof SVGElement&&e.tagName!=="svg"}function OU(e,t,r){const n=hn(e)?e:ol(e);return n.start(bv("",n,t,r)),n.animation}const CS=["","X","Y","Z"],PU={visibility:"hidden"},TS=1e3;let LU=0;const xa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function QA({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=LU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,xa.totalNodes=xa.resolvedTargetDeltas=xa.recalculatedProjection=0,this.nodes.forEach(zU),this.nodes.forEach(WU),this.nodes.forEach(YU),this.nodes.forEach(UU),IU(xa)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new RU)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Sv),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=MU(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=_U(h,250),nf.hasAnimatedSinceResize&&(nf.hasAnimatedSinceResize=!1,this.nodes.forEach(DS))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||ZU,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=d.getProps(),x=!this.targetLayout||!KA(this.targetLayout,g)||p,w=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const k={...vv(y,"layout"),onPlay:b,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else h||DS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,si(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GU),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(AS);return}this.isUpdating||this.nodes.forEach(VU),this.isUpdating=!1,this.nodes.forEach($U),this.nodes.forEach(FU),this.nodes.forEach(BU),this.clearAllSnapshots();const l=performance.now();Dr.delta=Ki(0,1e3/60,l-Dr.timestamp),Dr.timestamp=l,Dr.isProcessing=!0,Tm.update.process(Dr),Tm.preRender.process(Dr),Tm.render.process(Dr),Dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(HU),this.sharedNodes.forEach(qU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ir(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!qA(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||ya(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),XU(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ir();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(bi(l.x,c.offset.x),bi(l.y,c.offset.y)),l}removeElementScroll(a){const l=ir();Rn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;if(u!==this.root&&d&&f.layoutScroll){if(d.isRoot){Rn(l,a);const{scroll:h}=this.root;h&&(bi(l.x,-h.offset.x),bi(l.y,-h.offset.y))}bi(l.x,d.offset.x),bi(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=ir();Rn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ro(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ya(d.latestValues)&&Ro(c,d.latestValues)}return ya(this.latestValues)&&Ro(c,this.latestValues),c}removeTransform(a){const l=ir();Rn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!ya(u.latestValues))continue;iy(u.latestValues)&&u.updateSnapshot();const d=ir(),f=u.measurePageBox();Rn(d,f),SS(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ya(this.latestValues)&&SS(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Dr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ir(),this.relativeTargetOrigin=ir(),jc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ir(),this.targetWithTransforms=ir()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Jz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rn(this.target,this.layout.layoutBox),HA(this.target,this.targetDelta)):Rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ir(),this.relativeTargetOrigin=ir(),jc(this.relativeTargetOrigin,this.target,p.target),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}xa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||iy(this.parent.latestValues)||UA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Dr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Rn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;lU(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=Do(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Do(),this.projectionDeltaWithTransform=Do());const y=this.projectionTransform;Nc(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=jS(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==h||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),xa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Do();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=ir(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,b=this.getStack(),v=!b||b.members.length<=1,x=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(QU));this.animationProgress=0;let w;this.mixTargetDelta=k=>{const S=k/1e3;RS(f.x,a.x,S),RS(f.y,a.y,S),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jc(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KU(this.relativeTarget,this.relativeTargetOrigin,h,S),w&&TU(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ir()),Rn(w,this.relativeTarget)),y&&(this.animationValues=d,kU(d,u,this.latestValues,S,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(si(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ct.update(()=>{nf.hasAnimatedSinceResize=!0,this.currentAnimation=OU(0,TS,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&ZA(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ir();const f=En(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const h=En(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+h}Rn(l,c),Ro(l,d),Nc(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new AU),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<CS.length;d++){const f="rotate"+CS[d];c[f]&&(u[f]=c[f],a.setStaticValue(f,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return PU;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=rf(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=rf(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ya(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=jS(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:p,y:g}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in Qf){if(h[y]===void 0)continue;const{correct:b,applyTo:v}=Qf[y],x=u.transform==="none"?h[y]:b(h[y],f);if(v){const w=v.length;for(let k=0;k<w;k++)u[v[k]]=x}else u[y]=x}return this.options.layoutId&&(u.pointerEvents=f===this?rf(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(AS),this.root.sharedNodes.clear()}}}function FU(e){e.updateLayout()}function BU(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,a=r.source!==e.layout.source;i==="size"?_n(f=>{const h=a?r.measuredBox[f]:r.layoutBox[f],p=En(h);h.min=n[f].min,h.max=h.min+p}):ZA(i,r.layoutBox,n)&&_n(f=>{const h=a?r.measuredBox[f]:r.layoutBox[f],p=En(n[f]);h.max=h.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+p)});const l=Do();Nc(l,n,r.layoutBox);const c=Do();a?Nc(c,e.applyTransform(s,!0),r.measuredBox):Nc(c,n,r.layoutBox);const u=!qA(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const g=ir();jc(g,r.layoutBox,h.layoutBox);const y=ir();jc(y,n,p.layoutBox),KA(g,y)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function zU(e){xa.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function UU(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function HU(e){e.clearSnapshot()}function AS(e){e.clearMeasurements()}function VU(e){e.isLayoutDirty=!1}function $U(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function DS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function WU(e){e.resolveTargetDelta()}function YU(e){e.calcProjection()}function GU(e){e.resetRotation()}function qU(e){e.removeLeadSnapshot()}function RS(e,t,r){e.translate=zt(t.translate,0,r),e.scale=zt(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function _S(e,t,r,n){e.min=zt(t.min,r.min,n),e.max=zt(t.max,r.max,n)}function KU(e,t,r,n){_S(e.x,t.x,r.x,n),_S(e.y,t.y,r.y,n)}function QU(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ZU={duration:.45,ease:[.4,0,.1,1]},IS=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),MS=IS("applewebkit/")&&!IS("chrome/")?Math.round:Jt;function OS(e){e.min=MS(e.min),e.max=MS(e.max)}function XU(e){OS(e.x),OS(e.y)}function ZA(e,t,r){return e==="position"||e==="preserve-aspect"&&!ny(NS(t),NS(r),.2)}const JU=QA({attachResizeListener:(e,t)=>Gs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Bm={current:void 0},XA=QA({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Bm.current){const e=new JU({});e.mount(window),e.setOptions({layoutScroll:!0}),Bm.current=e}return Bm.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),eH={pan:{Feature:gU},drag:{Feature:mU,ProjectionNode:XA,MeasureLayout:WA}},tH=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function rH(e){const t=tH.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function oy(e,t,r=1){const[n,s]=rH(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const a=i.trim();return MA(a)?parseFloat(a):a}else return Q0(s)?oy(s,t,r+1):s}function nH(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const i=s.get();if(!Q0(i))return;const a=oy(i,n);a&&s.set(a)});for(const s in t){const i=t[s];if(!Q0(i))continue;const a=oy(i,n);a&&(t[s]=a,r||(r={}),r[s]===void 0&&(r[s]=i))}return{target:t,transitionEnd:r}}const sH=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),JA=e=>sH.has(e),iH=e=>Object.keys(e).some(JA),PS=e=>e===ro||e===Pe,LS=(e,t)=>parseFloat(e.split(", ")[t]),FS=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return LS(s[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?LS(i[1],e):0}},aH=new Set(["x","y","z"]),oH=Uu.filter(e=>!aH.has(e));function lH(e){const t=[];return oH.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const ll={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:FS(4,13),y:FS(5,14)};ll.translateX=ll.x;ll.translateY=ll.y;const cH=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=ll[u](n,i)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=ll[u](c,i)}),e},uH=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(JA);let i=[],a=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],f=Yl(d);const h=t[c];let p;if(Xf(h)){const g=h.length,y=h[0]===null?1:0;d=h[y],f=Yl(d);for(let b=y;b<g&&h[b]!==null;b++)p?pv(Yl(h[b])===p):p=Yl(h[b])}else p=Yl(h);if(f!==p)if(PS(f)&&PS(p)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof h=="string"?t[c]=parseFloat(h):Array.isArray(h)&&p===Pe&&(t[c]=h.map(parseFloat))}else f!=null&&f.transform&&(p!=null&&p.transform)&&(d===0||h===0)?d===0?u.set(p.transform(d)):t[c]=f.transform(h):(a||(i=lH(e),a=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(h))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=cH(t,e,l);return i.length&&i.forEach(([d,f])=>{e.getValue(d).set(f)}),e.render(),fp&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function dH(e,t,r,n){return iH(t)?uH(e,t,r,n):{target:t,transitionEnd:n}}const fH=(e,t,r,n)=>{const s=nH(e,t,n);return t=s.target,n=s.transitionEnd,dH(e,t,r,n)},ly={current:null},eD={current:!1};function hH(){if(eD.current=!0,!!fp)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ly.current=e.matches;e.addListener(t),t()}else ly.current=!1}function pH(e,t,r){const{willChange:n}=t;for(const s in t){const i=t[s],a=r[s];if(hn(i))e.addValue(s,i),rh(n)&&n.add(s);else if(hn(a))e.addValue(s,ol(i,{owner:e})),rh(n)&&n.remove(s);else if(a!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,ol(l!==void 0?l:i,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const BS=new WeakMap,tD=Object.keys(du),mH=tD.length,zS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],gH=iv.length;class yH{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ct.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=pp(r),this.isVariantNode=B2(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const f in d){const h=d[f];l[f]!==void 0&&hn(h)&&(h.set(l[f],!1),rh(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,BS.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),eD.current||hH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ly.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){BS.delete(this.current),this.projection&&this.projection.unmount(),si(this.notifyUpdate),si(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=to.has(t),s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Ct.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,i){let a,l;for(let c=0;c<mH;c++){const u=tD[c],{isEnabled:d,Feature:f,ProjectionNode:h,MeasureLayout:p}=du[u];h&&(a=h),d(r)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:f,layoutScroll:h,layoutRoot:p}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||f&&To(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ir()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<zS.length;n++){const s=zS[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=pH(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<gH;n++){const s=iv[n],i=this.props[s];(uu(i)||i===!1)&&(r[s]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=ol(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=hv(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!hn(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Sv),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class rD extends yH{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},i){let a=Mz(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),a&&(a=s(a))),i){_z(this,n,a);const l=fH(this,n,a,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function xH(e){return window.getComputedStyle(e)}class vH extends rD{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(to.has(r)){const n=xv(r);return n&&n.default||0}else{const n=xH(t),s=(V2(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return VA(t,r)}build(t,r,n,s){lv(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return fv(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;hn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){K2(t,r,n,s)}}class bH extends rD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(to.has(r)){const n=xv(r);return n&&n.default||0}return r=Q2.has(r)?r:nv(r),t.getAttribute(r)}measureInstanceViewportBox(){return ir()}scrapeMotionValuesFromProps(t,r){return X2(t,r)}build(t,r,n,s){uv(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){Z2(t,r,n,s)}mount(t){this.isSVGTag=dv(t.tagName),super.mount(t)}}const wH=(e,t)=>ov(e)?new bH(t,{enableHardwareAcceleration:!1}):new vH(t,{enableHardwareAcceleration:!0}),kH={layout:{ProjectionNode:XA,MeasureLayout:WA}},SH={...Kz,...m7,...eH,...kH},bt=EB((e,t)=>r7(e,t,SH,wH));function nD(){const e=m.useRef(!1);return rv(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function EH(){const e=nD(),[t,r]=m.useState(0),n=m.useCallback(()=>{e.current&&r(t+1)},[t]);return[m.useCallback(()=>Ct.postRender(n),[n]),t]}class NH extends m.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function jH({children:e,isPresent:t}){const r=m.useId(),n=m.useRef(null),s=m.useRef({width:0,height:0,top:0,left:0});return m.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=s.current;if(t||!n.current||!i||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),m.createElement(NH,{isPresent:t,childRef:n,sizeRef:s},m.cloneElement(e,{ref:n}))}const zm=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=J2(CH),c=m.useId(),u=m.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:d=>{l.set(d,!0);for(const f of l.values())if(!f)return;n&&n()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[r]);return m.useMemo(()=>{l.forEach((d,f)=>l.set(f,!1))},[r]),m.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),a==="popLayout"&&(e=m.createElement(jH,{isPresent:r},e)),m.createElement(dp.Provider,{value:u},e)};function CH(){return new Map}function TH(e){return m.useEffect(()=>()=>e(),[])}const va=e=>e.key||"";function AH(e,t){e.forEach(r=>{const n=va(r);t.set(n,r)})}function DH(e){const t=[];return m.Children.forEach(e,r=>{m.isValidElement(r)&&t.push(r)}),t}const er=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=m.useContext(av).forceRender||EH()[0],c=nD(),u=DH(e);let d=u;const f=m.useRef(new Map).current,h=m.useRef(d),p=m.useRef(new Map).current,g=m.useRef(!0);if(rv(()=>{g.current=!1,AH(u,p),h.current=d}),TH(()=>{g.current=!0,p.clear(),f.clear()}),g.current)return m.createElement(m.Fragment,null,d.map(x=>m.createElement(zm,{key:va(x),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:a},x)));d=[...d];const y=h.current.map(va),b=u.map(va),v=y.length;for(let x=0;x<v;x++){const w=y[x];b.indexOf(w)===-1&&!f.has(w)&&f.set(w,void 0)}return a==="wait"&&f.size&&(d=[]),f.forEach((x,w)=>{if(b.indexOf(w)!==-1)return;const k=p.get(w);if(!k)return;const S=y.indexOf(w);let E=x;if(!E){const N=()=>{f.delete(w);const j=Array.from(p.keys()).filter(T=>!b.includes(T));if(j.forEach(T=>p.delete(T)),h.current=u.filter(T=>{const C=va(T);return C===w||j.includes(C)}),!f.size){if(c.current===!1)return;l(),n&&n()}};E=m.createElement(zm,{key:va(k),isPresent:!1,onExitComplete:N,custom:t,presenceAffectsLayout:i,mode:a},k),f.set(w,E)}d.splice(S,0,E)}),d=d.map(x=>{const w=x.key;return f.has(w)?x:m.createElement(zm,{key:va(x),isPresent:!0,presenceAffectsLayout:i,mode:a},x)}),m.createElement(m.Fragment,null,f.size?d:d.map(x=>m.cloneElement(x)))};var xp={exports:{}},sD={};function iD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=iD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function US(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=iD(e))&&(n&&(n+=" "),n+=t);return n}const RH=Object.freeze(Object.defineProperty({__proto__:null,clsx:US,default:US},Symbol.toStringTag,{value:"Module"})),_H=pI(RH);var Kt={},Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.dontSetMe=LH;Is.findInArray=IH;Is.int=PH;Is.isFunction=MH;Is.isNum=OH;function IH(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function MH(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function OH(e){return typeof e=="number"&&!isNaN(e)}function PH(e){return parseInt(e,10)}function LH(e,t,r){if(e[t])return new Error(`Invalid prop ${t} passed to ${r} - do not set this, set it on the child.`)}var no={};Object.defineProperty(no,"__esModule",{value:!0});no.browserPrefixToKey=oD;no.browserPrefixToStyle=FH;no.default=void 0;no.getPrefix=aD;const Um=["Moz","Webkit","O","ms"];function aD(){var r,n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=(r=window.document)==null?void 0:r.documentElement)==null?void 0:n.style;if(!t||e in t)return"";for(let s=0;s<Um.length;s++)if(oD(e,Um[s])in t)return Um[s];return""}function oD(e,t){return t?`${t}${BH(e)}`:e}function FH(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function BH(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}no.default=aD();Object.defineProperty(Kt,"__esModule",{value:!0});Kt.addClassName=uD;Kt.addEvent=UH;Kt.addUserSelectStyles=XH;Kt.createCSSTransform=qH;Kt.createSVGTransform=KH;Kt.getTouch=QH;Kt.getTouchIdentifier=ZH;Kt.getTranslation=Ev;Kt.innerHeight=WH;Kt.innerWidth=YH;Kt.matchesSelector=cD;Kt.matchesSelectorAndParentsTo=zH;Kt.offsetXYFromParent=GH;Kt.outerHeight=VH;Kt.outerWidth=$H;Kt.removeClassName=dD;Kt.removeEvent=HH;Kt.scheduleRemoveUserSelectStyles=JH;var bn=Is,HS=lD(no);function lD(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(lD=function(s,i){if(!i&&s&&s.__esModule)return s;var a,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(a=i?n:r){if(a.has(s))return a.get(s);a.set(s,c)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(l.get||l.set)?a(c,u,l):c[u]=s[u]);return c})(e,t)}let Sd="";function cD(e,t){return Sd||(Sd=(0,bn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,bn.isFunction)(e[r])})),(0,bn.isFunction)(e[Sd])?e[Sd](t):!1}function zH(e,t,r){let n=e;do{if(cD(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function UH(e,t,r,n){if(!e)return;const s={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,s):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function HH(e,t,r,n){if(!e)return;const s={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,s):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function VH(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,bn.int)(r.borderTopWidth),t+=(0,bn.int)(r.borderBottomWidth),t}function $H(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,bn.int)(r.borderLeftWidth),t+=(0,bn.int)(r.borderRightWidth),t}function WH(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,bn.int)(r.paddingTop),t-=(0,bn.int)(r.paddingBottom),t}function YH(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,bn.int)(r.paddingLeft),t-=(0,bn.int)(r.paddingRight),t}function GH(e,t,r){const s=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-s.left)/r,a=(e.clientY+t.scrollTop-s.top)/r;return{x:i,y:a}}function qH(e,t){const r=Ev(e,t,"px");return{[(0,HS.browserPrefixToKey)("transform",HS.default)]:r}}function KH(e,t){return Ev(e,t,"")}function Ev(e,t,r){let{x:n,y:s}=e,i=`translate(${n}${r},${s}${r})`;if(t){const a=`${typeof t.x=="string"?t.x:t.x+r}`,l=`${typeof t.y=="string"?t.y:t.y+r}`;i=`translate(${a}, ${l})`+i}return i}function QH(e,t){return e.targetTouches&&(0,bn.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,bn.findInArray)(e.changedTouches,r=>t===r.identifier)}function ZH(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function XH(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&uD(e.body,"react-draggable-transparent-selection")}function JH(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{VS(e)}):VS(e)}function VS(e){if(e)try{if(e.body&&dD(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function uD(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function dD(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.canDragX=r8;Ms.canDragY=n8;Ms.createCoreData=i8;Ms.createDraggableData=a8;Ms.getBoundPosition=e8;Ms.getControlPosition=s8;Ms.snapToGrid=t8;var pn=Is,_o=Kt;function e8(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:o8(n);const s=Nv(e);if(typeof n=="string"){const{ownerDocument:i}=s,a=i.defaultView;let l;if(n==="parent"?l=s.parentNode:l=s.getRootNode().querySelector(n),!(l instanceof a.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const c=l,u=a.getComputedStyle(s),d=a.getComputedStyle(c);n={left:-s.offsetLeft+(0,pn.int)(d.paddingLeft)+(0,pn.int)(u.marginLeft),top:-s.offsetTop+(0,pn.int)(d.paddingTop)+(0,pn.int)(u.marginTop),right:(0,_o.innerWidth)(c)-(0,_o.outerWidth)(s)-s.offsetLeft+(0,pn.int)(d.paddingRight)-(0,pn.int)(u.marginRight),bottom:(0,_o.innerHeight)(c)-(0,_o.outerHeight)(s)-s.offsetTop+(0,pn.int)(d.paddingBottom)-(0,pn.int)(u.marginBottom)}}return(0,pn.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,pn.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,pn.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,pn.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function t8(e,t,r){const n=Math.round(t/e[0])*e[0],s=Math.round(r/e[1])*e[1];return[n,s]}function r8(e){return e.props.axis==="both"||e.props.axis==="x"}function n8(e){return e.props.axis==="both"||e.props.axis==="y"}function s8(e,t,r){const n=typeof t=="number"?(0,_o.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const s=Nv(r),i=r.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,_o.offsetXYFromParent)(n||e,i,r.props.scale)}function i8(e,t,r){const n=!(0,pn.isNum)(e.lastX),s=Nv(e);return n?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:s,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function a8(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function o8(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Nv(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var vp={},bp={};Object.defineProperty(bp,"__esModule",{value:!0});bp.default=l8;function l8(){}Object.defineProperty(vp,"__esModule",{value:!0});vp.default=void 0;var Hm=fD(m),Hr=jv(Wx),c8=jv(rs),Cr=Kt,mi=Ms,Vm=Is,ql=jv(bp);function jv(e){return e&&e.__esModule?e:{default:e}}function fD(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(fD=function(s,i){if(!i&&s&&s.__esModule)return s;var a,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(a=i?n:r){if(a.has(s))return a.get(s);a.set(s,c)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(l.get||l.set)?a(c,u,l):c[u]=s[u]);return c})(e,t)}function Vr(e,t,r){return(t=u8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u8(e){var t=d8(e,"string");return typeof t=="symbol"?t:t+""}function d8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Yn={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let gi=Yn.mouse,wp=class extends Hm.Component{constructor(){super(...arguments),Vr(this,"dragging",!1),Vr(this,"lastX",NaN),Vr(this,"lastY",NaN),Vr(this,"touchIdentifier",null),Vr(this,"mounted",!1),Vr(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,Cr.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,Cr.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const s=(0,Cr.getTouchIdentifier)(t);this.touchIdentifier=s;const i=(0,mi.getControlPosition)(t,s,this);if(i==null)return;const{x:a,y:l}=i,c=(0,mi.createCoreData)(this,a,l);(0,ql.default)("DraggableCore: handleDragStart: %j",c),(0,ql.default)("calling",this.props.onStart),!(this.props.onStart(t,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Cr.addUserSelectStyles)(n),this.dragging=!0,this.lastX=a,this.lastY=l,(0,Cr.addEvent)(n,gi.move,this.handleDrag),(0,Cr.addEvent)(n,gi.stop,this.handleDragStop))}),Vr(this,"handleDrag",t=>{const r=(0,mi.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:s}=r;if(Array.isArray(this.props.grid)){let l=n-this.lastX,c=s-this.lastY;if([l,c]=(0,mi.snapToGrid)(this.props.grid,l,c),!l&&!c)return;n=this.lastX+l,s=this.lastY+c}const i=(0,mi.createCoreData)(this,n,s);if((0,ql.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(t,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=n,this.lastY=s}),Vr(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,mi.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:s}=r;if(Array.isArray(this.props.grid)){let c=n-this.lastX||0,u=s-this.lastY||0;[c,u]=(0,mi.snapToGrid)(this.props.grid,c,u),n=this.lastX+c,s=this.lastY+u}const i=(0,mi.createCoreData)(this,n,s);if(this.props.onStop(t,i)===!1||this.mounted===!1)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,Cr.scheduleRemoveUserSelectStyles)(l.ownerDocument),(0,ql.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,ql.default)("DraggableCore: Removing handlers"),(0,Cr.removeEvent)(l.ownerDocument,gi.move,this.handleDrag),(0,Cr.removeEvent)(l.ownerDocument,gi.stop,this.handleDragStop))}),Vr(this,"onMouseDown",t=>(gi=Yn.mouse,this.handleDragStart(t))),Vr(this,"onMouseUp",t=>(gi=Yn.mouse,this.handleDragStop(t))),Vr(this,"onTouchStart",t=>(gi=Yn.touch,this.handleDragStart(t))),Vr(this,"onTouchEnd",t=>(gi=Yn.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,Cr.addEvent)(t,Yn.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,Cr.removeEvent)(r,Yn.mouse.move,this.handleDrag),(0,Cr.removeEvent)(r,Yn.touch.move,this.handleDrag),(0,Cr.removeEvent)(r,Yn.mouse.stop,this.handleDragStop),(0,Cr.removeEvent)(r,Yn.touch.stop,this.handleDragStop),(0,Cr.removeEvent)(t,Yn.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Cr.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var t,r,n;return(t=this.props)!=null&&t.nodeRef?(n=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:n.current:c8.default.findDOMNode(this)}render(){return Hm.cloneElement(Hm.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};vp.default=wp;Vr(wp,"displayName","DraggableCore");Vr(wp,"propTypes",{allowAnyClick:Hr.default.bool,allowMobileScroll:Hr.default.bool,children:Hr.default.node.isRequired,disabled:Hr.default.bool,enableUserSelectHack:Hr.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Hr.default.arrayOf(Hr.default.number),handle:Hr.default.string,cancel:Hr.default.string,nodeRef:Hr.default.object,onStart:Hr.default.func,onDrag:Hr.default.func,onStop:Hr.default.func,onMouseDown:Hr.default.func,scale:Hr.default.number,className:Vm.dontSetMe,style:Vm.dontSetMe,transform:Vm.dontSetMe});Vr(wp,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=f(m),r=d(Wx),n=d(rs),s=_H,i=Kt,a=Ms,l=Is,c=d(vp),u=d(bp);function d(v){return v&&v.__esModule?v:{default:v}}function f(v,x){if(typeof WeakMap=="function")var w=new WeakMap,k=new WeakMap;return(f=function(S,E){if(!E&&S&&S.__esModule)return S;var N,j,T={__proto__:null,default:S};if(S===null||typeof S!="object"&&typeof S!="function")return T;if(N=E?k:w){if(N.has(S))return N.get(S);N.set(S,T)}for(const C in S)C!=="default"&&{}.hasOwnProperty.call(S,C)&&((j=(N=Object.defineProperty)&&Object.getOwnPropertyDescriptor(S,C))&&(j.get||j.set)?N(T,C,j):T[C]=S[C]);return T})(v,x)}function h(){return h=Object.assign?Object.assign.bind():function(v){for(var x=1;x<arguments.length;x++){var w=arguments[x];for(var k in w)({}).hasOwnProperty.call(w,k)&&(v[k]=w[k])}return v},h.apply(null,arguments)}function p(v,x,w){return(x=g(x))in v?Object.defineProperty(v,x,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[x]=w,v}function g(v){var x=y(v,"string");return typeof x=="symbol"?x:x+""}function y(v,x){if(typeof v!="object"||!v)return v;var w=v[Symbol.toPrimitive];if(w!==void 0){var k=w.call(v,x);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(v)}class b extends t.Component{static getDerivedStateFromProps(x,w){let{position:k}=x,{prevPropsPosition:S}=w;return k&&(!S||k.x!==S.x||k.y!==S.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:k,prevPropsPosition:S}),{x:k.x,y:k.y,prevPropsPosition:{...k}}):null}constructor(x){super(x),p(this,"onDragStart",(w,k)=>{if((0,u.default)("Draggable: onDragStart: %j",k),this.props.onStart(w,(0,a.createDraggableData)(this,k))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(w,k)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",k);const S=(0,a.createDraggableData)(this,k),E={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:j,y:T}=E;E.x+=this.state.slackX,E.y+=this.state.slackY;const[C,_]=(0,a.getBoundPosition)(this,E.x,E.y);E.x=C,E.y=_,E.slackX=this.state.slackX+(j-E.x),E.slackY=this.state.slackY+(T-E.y),S.x=E.x,S.y=E.y,S.deltaX=E.x-this.state.x,S.deltaY=E.y-this.state.y}if(this.props.onDrag(w,S)===!1)return!1;this.setState(E)}),p(this,"onDragStop",(w,k)=>{if(!this.state.dragging||this.props.onStop(w,(0,a.createDraggableData)(this,k))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",k);const E={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:j,y:T}=this.props.position;E.x=j,E.y=T}this.setState(E)}),this.state={dragging:!1,dragged:!1,x:x.position?x.position.x:x.defaultPosition.x,y:x.position?x.position.y:x.defaultPosition.y,prevPropsPosition:{...x.position},slackX:0,slackY:0,isElementSVG:!1},x.position&&!(x.onDrag||x.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var x,w;return((w=(x=this.props)==null?void 0:x.nodeRef)==null?void 0:w.current)??n.default.findDOMNode(this)}render(){const{axis:x,bounds:w,children:k,defaultPosition:S,defaultClassName:E,defaultClassNameDragging:N,defaultClassNameDragged:j,position:T,positionOffset:C,scale:_,...V}=this.props;let F={},R=null;const O=!!!T||this.state.dragging,z=T||S,B={x:(0,a.canDragX)(this)&&O?this.state.x:z.x,y:(0,a.canDragY)(this)&&O?this.state.y:z.y};this.state.isElementSVG?R=(0,i.createSVGTransform)(B,C):F=(0,i.createCSSTransform)(B,C);const W=(0,s.clsx)(k.props.className||"",E,{[N]:this.state.dragging,[j]:this.state.dragged});return t.createElement(c.default,h({},V,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(k),{className:W,style:{...k.props.style,...F},transform:R}))}}e.default=b,p(b,"displayName","Draggable"),p(b,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(b,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(sD);const{default:hD,DraggableCore:f8}=sD;xp.exports=hD;xp.exports.default=hD;xp.exports.DraggableCore=f8;var h8=xp.exports;const p8=ea(h8),m8=xr("api-assistant"),g8=async(e,t,r)=>{try{const s=(await q.post("/assistant",{message:e},{headers:{"x-tenant-id":t,"x-user-id":r}})).data;return typeof s!="object"||s===null?{reply:"",suggestions:[],actions:[]}:{reply:typeof s.reply=="string"?s.reply:"",suggestions:Array.isArray(s.suggestions)?s.suggestions:[],actions:Array.isArray(s.actions)?s.actions:[]}}catch(n){throw m8.error("Error sending message to assistant:",n),n}},pD=m.createContext(null),cc=()=>Date.now().toString()+"-"+Math.random().toString(36).slice(2,8),y8=()=>`sugg-${cc()}`,x8=e=>!e||!e.length?[]:e.map(t=>({id:y8(),label:t.label,action:t.action,payload:t.payload,tone:t.tone??"neutral"})),uc=e=>typeof e=="string"&&e.trim().length>0,Cc=e=>e.replace(/[_-]+/g," ").split(/\s+/).filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),v8=e=>{if(!uc(e))return;const t=e.split("@")[0];if(t)return Cc(t.replace(/[\.|\-|_]+/g," "))},b8=e=>{var i,a,l,c;if(!e)return"Friend";const t=[e.fullName,e.full_name,e.displayName,e.preferredName,e.name,e.nickname,(i=e.profile)==null?void 0:i.displayName,(a=e.profile)==null?void 0:a.preferredName].find(uc);if(t)return Cc(t);const r=[e.FirstName,e.firstName,e.given_name,(l=e.profile)==null?void 0:l.firstName].find(uc),n=[e.LastName,e.lastName,e.family_name,(c=e.profile)==null?void 0:c.lastName].find(uc);if(r&&n)return Cc(r+" "+n);if(r)return Cc(r);const s=v8([e.email,e.Email,e.username].find(uc));return s||"Friend"},w8=e=>{if(!e)return"Friend";const r=e.trim().split(/\s+/).filter(Boolean)[0]??"Friend";return Cc(r)},k8=()=>{const e=new Date().getHours();return e>=5&&e<12?"Good morning":e>=12&&e<17?"Good afternoon":e>=17&&e<22?"Good evening":"Hello"},S8=({children:e,familyId:t=null,userId:r=null})=>{const[n,s]=m.useState([]),[i,a]=m.useState(!1),[l,c]=m.useState(!1),[u,d]=m.useState(!1),f=m.useMemo(()=>xr("linz-chat"),[]),{user:h}=Ft(),p=m.useMemo(()=>w8(b8(h)),[h]),g=m.useMemo(()=>{if(typeof t=="number")return t;const F=(h==null?void 0:h.FamilyID)??(h==null?void 0:h.familyId);return typeof F=="number"?F:null},[t,h]),y=m.useRef(new Map),b=m.useCallback(F=>{s(R=>[...R,F])},[]),v=m.useMemo(()=>{const F=p,R=k8();return["{salutation}, {name}! How can I help you with FamConomy today?","Hey {name}! How are you doing? Need a hand with anything right now?","Hi {name}! Ready to explore FamConomy together?","Great to see you, {name}! What would you like to tackle next?","{name}, I'm here whenever you want a tour or quick tips."].map(O=>O.replace("{salutation}",R).replace(/\{name\}/g,F))},[p]);m.useEffect(()=>{d(!1)},[r,p]);const x=m.useCallback(()=>{if(u)return;const F=v[Math.floor(Math.random()*v.length)]??v[0];f.log("Greeting user on manual open",F),b({id:cc(),sender:"linz",text:F,createdAt:Date.now()}),d(!0)},[v,b,f,u]),w=m.useCallback((F,R)=>{if(!F&&!(R!=null&&R.allowEmpty))return null;const L={id:cc(),sender:"linz",text:F,createdAt:Date.now(),meta:R==null?void 0:R.meta,suggestions:R==null?void 0:R.suggestions};return b(L),R!=null&&R.autoOpen&&a(!0),L.id},[b]),k=m.useCallback((F,R)=>{if(!F&&!(R!=null&&R.allowEmpty))return null;const L={id:cc(),sender:"user",text:F,createdAt:Date.now(),meta:R==null?void 0:R.meta,suggestions:R==null?void 0:R.suggestions};return b(L),R!=null&&R.autoOpen&&a(!0),L.id},[b]),S=m.useCallback((F,R,L)=>{s(O=>O.map(z=>z.id===F?{...z,text:R,meta:(L==null?void 0:L.meta)??z.meta,suggestions:(L==null?void 0:L.suggestions)??z.suggestions}:z)),L!=null&&L.autoOpen&&a(!0)},[]),E=m.useCallback((F,R)=>{if(!F)return()=>{};const L=y.current,O=F.toLowerCase();return L.has(O)||L.set(O,new Set),L.get(O).add(R),()=>{const B=y.current.get(O);B==null||B.delete(R),B&&B.size===0&&y.current.delete(O)}},[]),N=m.useCallback((F,R)=>{if(!F)return;const L=y.current.get(F.toLowerCase());!L||L.size===0||L.forEach(O=>{try{O(R)}catch(z){f.error("Error handling LinZ chat action",F,z)}})},[f]),j=m.useCallback(async F=>{const R=F.trim();if(!R)return;b({id:cc(),sender:"user",text:R,createdAt:Date.now()});const L=g!==null?String(g):null,O=r??null;if(!L||!O){w("I'm still getting things readytry again once your profile and family are fully loaded.",{autoOpen:!0,meta:{reason:"missing-context"}});return}c(!0);try{const z=await g8(R,L,String(O)),B=x8(z.suggestions);w(z.reply??"",{autoOpen:!0,allowEmpty:!0,meta:{source:"assistant"},suggestions:B}),(z.actions??[]).forEach(W=>{!W||!W.type||N(W.type,W.payload)})}catch(z){f.error("Error sending message to LinZ:",z),w("Oops! Something went wrong. Please try again in a moment.",{autoOpen:!0,meta:{source:"assistant-error"}})}finally{c(!1)}},[b,w,f,g,N,r]),T=m.useCallback(F=>{a(!0),(F==null?void 0:F.greet)!==!1&&x()},[x]),C=m.useCallback(()=>a(!1),[]),_=m.useCallback(F=>{a(R=>{const L=!R;return L&&(F==null?void 0:F.greet)!==!1&&x(),L})},[x]),V=m.useMemo(()=>({messages:n,sendUserMessage:j,appendLinZMessage:w,appendUserMessage:k,updateLinZMessage:S,isOpen:i,isSending:l,openChat:T,closeChat:C,toggleChat:_,emitAction:N,registerActionHandler:E}),[w,k,S,C,N,i,l,n,T,E,j,_]);return o.jsx(pD.Provider,{value:V,children:e})},li=()=>{const e=m.useContext(pD);if(!e)throw new Error("useLinZChat must be used within a LinZChatProvider");return e},E8=()=>{const{messages:e,sendUserMessage:t,isSending:r,emitAction:n,updateLinZMessage:s}=li(),[i,a]=m.useState(""),l=m.useRef(null);m.useEffect(()=>{var h;(h=l.current)==null||h.scrollIntoView({behavior:"smooth"})},[e]);const c=async()=>{const h=i.trim();h&&(a(""),await t(h))},u=h=>{h.key==="Enter"&&(h.preventDefault(),c())},d=(h,p,g)=>{n(g.action,g.payload??void 0),s(h,p,{allowEmpty:!0,suggestions:[]})},f=h=>{switch(h){case"primary":return"bg-primary-600 text-white hover:bg-primary-700";case"secondary":return"bg-neutral-200 text-neutral-700 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-neutral-100 dark:hover:bg-neutral-600";default:return"bg-white text-primary-600 border border-primary-200 hover:bg-primary-50 dark:bg-neutral-800 dark:text-primary-300 dark:border-primary-400/40 dark:hover:bg-neutral-700"}};return o.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex-1 overflow-y-auto mb-4",children:[e.map((h,p)=>{const g="flex mb-2 "+(h.sender==="user"?"justify-end":"justify-start"),y="rounded-lg p-3 max-w-[70%] "+(h.sender==="user"?"bg-blue-500 text-white":"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200");return o.jsx("div",{className:g,children:o.jsxs("div",{className:"flex flex-col gap-2 max-w-full",children:[o.jsx("div",{className:y,children:h.text}),h.suggestions&&h.suggestions.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:h.suggestions.map(b=>o.jsx("button",{type:"button",className:`px-3 py-1 text-sm rounded-full transition-colors ${f(b.tone)}`,onClick:()=>d(h.id,h.text,b),children:b.label},b.id))})]})},h.id??p)}),o.jsx("div",{ref:l})]}),o.jsxs("div",{className:"flex",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-l-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Type your message...",value:i,onChange:h=>a(h.target.value),onKeyDown:u,disabled:r}),o.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-r-lg transition duration-300 disabled:opacity-60",onClick:c,disabled:r,children:r?"...":"Send"})]})]})},N8=()=>{const e=()=>typeof window>"u"?{x:0,y:0}:{x:window.innerWidth-88,y:window.innerHeight-88},[t,r]=m.useState(e),[n,s]=m.useState(!0),i=m.useRef(null),a=m.useRef(!1),l=m.useRef(!1),c=6,u=m.useRef(null),{isOpen:d,toggleChat:f,closeChat:h,openChat:p}=li();m.useEffect(()=>{if(typeof window>"u")return;const x=()=>{l.current||r(e()),s(!0)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const g=m.useCallback(()=>{if(a.current){a.current=!1;return}f({greet:!0})},[f]),y=m.useCallback(x=>{if(x.preventDefault(),x.stopPropagation(),a.current){a.current=!1;return}f({greet:!0})},[f]),b=m.useMemo(()=>"bg-gradient-to-r from-primary-500 via-secondary-500 to-accent-500 text-white rounded-full p-4 shadow-lg hover:opacity-90 transition-opacity",[]),v=o.jsx(bt.button,{id:"linz-chat-toggle",className:`${b} ${n?"cursor-grab":""}`,onClick:g,onTouchEnd:y,type:"button","aria-label":d?"Close LinZ chat":"Open LinZ chat",children:d?o.jsx(ni,{size:28}):o.jsx(T2,{size:28})});return o.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:13e3},children:[o.jsx(p8,{bounds:"parent",position:t,onStart:(x,w)=>{i.current={x:w.x,y:w.y},a.current=!1},onDrag:(x,w)=>{if(!i.current)return;Math.hypot(w.x-i.current.x,w.y-i.current.y)>c&&(a.current=!0)},onStop:(x,w)=>{r({x:w.x,y:w.y}),a.current&&(l.current=!0,p({greet:!1}),a.current=!1)},nodeRef:u,children:o.jsx("div",{ref:u,style:{position:"absolute",top:0,left:0,zIndex:13010,pointerEvents:"auto"},children:v})}),o.jsx(er,{children:d&&o.jsxs(bt.div,{className:"fixed bottom-20 right-6 w-80 h-[500px] bg-white dark:bg-gray-800 rounded-lg shadow-xl flex flex-col",style:{zIndex:13020,pointerEvents:"auto"},initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{type:"spring",stiffness:260,damping:20},children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"LinZ Chat"}),o.jsx("button",{onClick:()=>h(),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx(ni,{size:24})})]}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx(E8,{})})]})})]})},mD=m.createContext(null),j8=mD.Provider,C8=()=>m.useContext(mD),T8=()=>{const[e,t]=m.useState(!1),[r,n]=m.useState(!1),[s,i]=m.useState(window.innerWidth<1024),a=Tn(),{registerActionHandler:l}=li(),{isDarkMode:c,toggleTheme:u,setTheme:d}=zT();m.useEffect(()=>{const g=()=>{i(window.innerWidth<1024),window.innerWidth>=1024&&t(!1)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),m.useEffect(()=>{s&&t(!1)},[a,s]);const f=m.useCallback(()=>{t(g=>!g)},[]),h=m.useCallback(()=>{n(!1),s&&t(!0)},[s]),p=m.useMemo(()=>({ensureSidebarExpanded:h,setSidebarCollapsed:n,openMobileMenu:()=>t(!0),closeMobileMenu:()=>t(!1),toggleMobileMenu:f,isSidebarCollapsed:r,isMobileMenuOpen:e,isMobile:s}),[h,r,e,s,f]);return m.useEffect(()=>{if(typeof window>"u")return;const g=y=>{const b=y.detail??{},v=()=>h();b.delay&&b.delay>0?window.setTimeout(v,b.delay):v()};return window.addEventListener("app-shell:openSidebar",g),()=>{window.removeEventListener("app-shell:openSidebar",g)}},[h]),m.useEffect(()=>{if(typeof window>"u")return;const g=y=>{const b=y.detail??{},v=()=>{n(!0),t(!1)};b.delay&&b.delay>0?window.setTimeout(v,b.delay):v()};return window.addEventListener("app-shell:closeSidebar",g),()=>{window.removeEventListener("app-shell:closeSidebar",g)}},[]),m.useEffect(()=>{const g=[],y=(w,k)=>{const S=l(w,k);g.push(S)},b=w=>{if(typeof w=="string"){const k=w.trim().toLowerCase();if(["dark","dark-mode","night","dim","moon"].includes(k))return"dark";if(["light","light-mode","day","bright","sun"].includes(k))return"light"}return typeof w=="boolean"?w?"dark":"light":null},v=w=>{const k=b((w==null?void 0:w.mode)??(w==null?void 0:w.theme)??(w==null?void 0:w.value)??(w==null?void 0:w.target)??w);k&&(k==="dark"&&!c?d("dark"):k==="light"&&c&&d("light"))},x=w=>{const k=b((w==null?void 0:w.mode)??(w==null?void 0:w.theme)??(w==null?void 0:w.value));if(k){v({mode:k});return}u()};return y("toggle-theme",x),y("theme-toggle",x),y("theme:toggle",x),y("set-theme",v),y("theme-set",v),y("theme:set",v),y("change-theme",v),y("theme-change",v),()=>{g.forEach(w=>w())}},[c,l,d,u]),o.jsx(j8,{value:p,children:o.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-neutral-50 via-neutral-100 to-neutral-200 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 text-neutral-900 dark:text-white",children:[o.jsx(er,{children:(!s||e)&&o.jsx(bt.div,{initial:{x:-320},animate:{x:0},exit:{x:-320},transition:{type:"spring",stiffness:300,damping:30},className:`${s?"fixed inset-y-0 left-0 z-40 w-64":"block"}`,children:o.jsx(hB,{collapsed:r,onCollapsedChange:n,onNavigate:()=>s&&t(!1)})})}),o.jsx(er,{children:s&&e&&o.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm z-30",onClick:f})}),o.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[o.jsx(pB,{onMenuToggle:f,isMobileMenuOpen:e}),o.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:o.jsx(bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:o.jsx(FP,{})})})]}),o.jsx(N8,{})]})})},gD=async()=>(await q.get("/family")).data,cy=async(e,t)=>(await q.post("/family",{familyName:e,rewardMode:t})).data,yD=async(e,t,r,n,s)=>{await q.put(`/family/${e}`,{familyName:t,familyMantra:r,familyValues:n,rewardMode:s})},A8=async(e,t,r)=>{await q.put(`/family/${e}/members/${t}/role`,{relationshipId:r})},D8=async(e,t,r)=>{await q.put(`/family/${e}/members/${t}/permissions`,{permissions:r})},R8=async(e,t)=>{await q.delete(`/family/${e}/members/${t}`)},_8=async()=>{await q.delete("/family/leave")},zr=()=>{const[e,t]=m.useState([]),[r,n]=m.useState(null),[s,i]=m.useState(qw),[a,l]=m.useState(!0),[c,u]=m.useState(null),d=m.useRef([]),f=m.useRef(!1),h=m.useCallback((y,b)=>{var w;if(!b.length){i(null),n(null);try{f.current=!0,ka()}finally{f.current=!1}return}let v=y;v!==null&&!b.some(k=>k.FamilyID===v)&&(v=null),v===null&&(v=((w=b[0])==null?void 0:w.FamilyID)??null),i(v);const x=v!==null?b.find(k=>k.FamilyID===v)??null:null;n(x??null);try{f.current=!0,Fx(v)}finally{f.current=!1}},[]),p=m.useCallback(async()=>{try{l(!0),u(null);const y=await gD(),b=y.families??[];t(b),d.current=b;const x=qw()??s??y.activeFamilyId??null;return h(x,b),y}catch(y){u(y instanceof Error?y.message:"An unknown error occurred while fetching family data"),t([]),d.current=[],n(null),i(null);try{f.current=!0,ka()}finally{f.current=!1}return null}finally{l(!1)}},[s,h]);m.useEffect(()=>{p()},[p]),m.useEffect(()=>{d.current=e},[e]),m.useEffect(()=>{const y=PL(b=>{if(f.current)return;const v=d.current;if(b===null){h(null,[]);return}if(!v.some(x=>x.FamilyID===b)){p();return}h(b,v)});return()=>{y()}},[h,p]);const g=m.useCallback((y,b)=>{h(y,(b==null?void 0:b.families)??e)},[h,e]);return{family:r,families:e,activeFamilyId:s,setActiveFamilyId:g,isLoading:a,error:c,refetchFamily:p,rewardMode:(r==null?void 0:r.rewardMode)??"points"}},I8=async e=>(await q.get(`/dashboard/${e}`)).data,xD=({onFamilyCreated:e})=>{const[t,r]=m.useState(""),[n,s]=m.useState(!1),[i,a]=m.useState(null),l=async c=>{if(c.preventDefault(),!t.trim()){a("Family name is required.");return}s(!0),a(null);try{await cy(t),e()}catch(u){a(u instanceof Error?u.message:"An unknown error occurred"),s(!1)}};return o.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:o.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-neutral-800 p-8 rounded-2xl shadow-lg",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2",children:"Create Your Family Circle"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 mb-6",children:"Start by giving your family a name. You can invite members later."}),o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"familyName",className:"sr-only",children:"Family Name"}),o.jsx("input",{id:"familyName",type:"text",value:t,onChange:c=>r(c.target.value),placeholder:"e.g., The Smiths",className:"w-full px-4 py-3 rounded-xl border border-neutral-300 dark:border-neutral-600 bg-transparent focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:n})]}),i&&o.jsx("p",{className:"text-error-500 text-sm",children:i}),o.jsx("button",{type:"submit",className:"w-full px-4 py-3 rounded-xl bg-primary-500 text-white font-semibold hover:bg-primary-600 transition-colors disabled:bg-primary-300",disabled:n,children:n?"Creating...":"Create Family"})]})]})})};function uy(e){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uy(e)}function ds(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Lr(e){ds(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||uy(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var M8={};function O8(){return M8}function $S(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function sf(e,t){ds(2,arguments);var r=Lr(e),n=Lr(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function P8(e,t){ds(2,arguments);var r=Lr(e),n=Lr(t),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function L8(e,t){return ds(2,arguments),Lr(e).getTime()-Lr(t).getTime()}var F8={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},B8="trunc";function z8(e){return F8[B8]}function U8(e){ds(1,arguments);var t=Lr(e);return t.setHours(23,59,59,999),t}function H8(e){ds(1,arguments);var t=Lr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function V8(e){ds(1,arguments);var t=Lr(e);return U8(t).getTime()===H8(t).getTime()}function $8(e,t){ds(2,arguments);var r=Lr(e),n=Lr(t),s=sf(r,n),i=Math.abs(P8(r,n)),a;if(i<1)a=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);var l=sf(r,n)===-s;V8(Lr(e))&&i===1&&sf(e,n)===1&&(l=!1),a=s*(i-Number(l))}return a===0?0:a}function W8(e,t,r){ds(2,arguments);var n=L8(e,t)/1e3;return z8()(n)}var Y8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},G8=function(t,r,n){var s,i=Y8[t];return typeof i=="string"?s=i:r===1?s=i.one:s=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function $m(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var q8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},K8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Q8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Z8={date:$m({formats:q8,defaultWidth:"full"}),time:$m({formats:K8,defaultWidth:"full"}),dateTime:$m({formats:Q8,defaultWidth:"full"})},X8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},J8=function(t,r,n,s){return X8[t]};function Kl(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",s;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=r!=null&&r.width?String(r.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{var l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var eV={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tV={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rV={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nV={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aV=function(t,r){var n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},oV={ordinalNumber:aV,era:Kl({values:eV,defaultWidth:"wide"}),quarter:Kl({values:tV,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Kl({values:rV,defaultWidth:"wide"}),day:Kl({values:nV,defaultWidth:"wide"}),dayPeriod:Kl({values:sV,defaultWidth:"wide",formattingValues:iV,defaultFormattingWidth:"wide"})};function Ql(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;var a=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?cV(l,function(f){return f.test(a)}):lV(l,function(f){return f.test(a)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(a.length);return{value:u,rest:d}}}function lV(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function cV(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function uV(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var s=n[0],i=t.match(e.parsePattern);if(!i)return null;var a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;var l=t.slice(s.length);return{value:a,rest:l}}}var dV=/^(\d+)(th|st|nd|rd)?/i,fV=/\d+/i,hV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pV={any:[/^b/i,/^(a|c)/i]},mV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gV={any:[/1/i,/2/i,/3/i,/4/i]},yV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},vV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},SV={ordinalNumber:uV({matchPattern:dV,parsePattern:fV,valueCallback:function(t){return parseInt(t,10)}}),era:Ql({matchPatterns:hV,defaultMatchWidth:"wide",parsePatterns:pV,defaultParseWidth:"any"}),quarter:Ql({matchPatterns:mV,defaultMatchWidth:"wide",parsePatterns:gV,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ql({matchPatterns:yV,defaultMatchWidth:"wide",parsePatterns:xV,defaultParseWidth:"any"}),day:Ql({matchPatterns:vV,defaultMatchWidth:"wide",parsePatterns:bV,defaultParseWidth:"any"}),dayPeriod:Ql({matchPatterns:wV,defaultMatchWidth:"any",parsePatterns:kV,defaultParseWidth:"any"})},EV={code:"en-US",formatDistance:G8,formatLong:Z8,formatRelative:J8,localize:oV,match:SV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vD(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function NV(e){return vD({},e)}var WS=1440,jV=2520,Wm=43200,CV=86400;function TV(e,t,r){var n,s;ds(2,arguments);var i=O8(),a=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:i.locale)!==null&&n!==void 0?n:EV;if(!a.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=sf(e,t);if(isNaN(l))throw new RangeError("Invalid time value");var c=vD(NV(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:l}),u,d;l>0?(u=Lr(t),d=Lr(e)):(u=Lr(e),d=Lr(t));var f=W8(d,u),h=($S(d)-$S(u))/1e3,p=Math.round((f-h)/60),g;if(p<2)return r!=null&&r.includeSeconds?f<5?a.formatDistance("lessThanXSeconds",5,c):f<10?a.formatDistance("lessThanXSeconds",10,c):f<20?a.formatDistance("lessThanXSeconds",20,c):f<40?a.formatDistance("halfAMinute",0,c):f<60?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",1,c):p===0?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",p,c);if(p<45)return a.formatDistance("xMinutes",p,c);if(p<90)return a.formatDistance("aboutXHours",1,c);if(p<WS){var y=Math.round(p/60);return a.formatDistance("aboutXHours",y,c)}else{if(p<jV)return a.formatDistance("xDays",1,c);if(p<Wm){var b=Math.round(p/WS);return a.formatDistance("xDays",b,c)}else if(p<CV)return g=Math.round(p/Wm),a.formatDistance("aboutXMonths",g,c)}if(g=$8(d,u),g<12){var v=Math.round(p/Wm);return a.formatDistance("xMonths",v,c)}else{var x=g%12,w=Math.floor(g/12);return x<3?a.formatDistance("aboutXYears",w,c):x<9?a.formatDistance("overXYears",w,c):a.formatDistance("almostXYears",w+1,c)}}function AV(e,t){return ds(1,arguments),TV(e,Date.now(),t)}const DV=()=>{const{notifications:e,markAsRead:t}=FT();return o.jsxs("div",{className:"bg-white/90 dark:bg-neutral-800/90 backdrop-blur-sm rounded-2xl shadow-card border border-neutral-200/60 dark:border-neutral-700/60 p-6 h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Recent Notifications"}),o.jsx("button",{className:"text-primary-600 dark:text-primary-400 text-sm font-medium hover:text-primary-700 dark:hover:text-primary-300 transition-colors",children:"View all"})]}),o.jsx("div",{className:"space-y-3",children:e.length>0?e.slice(0,5).map(r=>{if(!r||!r.createdAt)return null;const n=o.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-2xl border transition-colors ${r.readStatus?"bg-neutral-50 border-neutral-100 dark:bg-neutral-800 dark:border-neutral-700":"bg-primary-50/70 border-primary-100 dark:bg-primary-900/30 dark:border-primary-800"}`,children:[o.jsx("div",{className:"p-2 rounded-full bg-primary-100 text-primary-600 dark:bg-primary-900/50 dark:text-primary-300",children:o.jsx(V0,{size:16})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-200",children:r.message}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:AV(new Date(r.createdAt),{addSuffix:!0})})]}),!r.readStatus&&o.jsx("button",{onClick:s=>{r.link&&s.preventDefault(),t(r.id)},className:"text-xs font-medium text-primary-600 dark:text-primary-300 hover:text-primary-700 dark:hover:text-primary-200",children:"Mark as read"})]});return r.link?o.jsx(kr,{to:r.link,children:n},r.id):o.jsx("div",{children:n},r.id)}):o.jsxs("div",{className:"text-center py-6 text-neutral-500 dark:text-neutral-400",children:[o.jsx("div",{className:"mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-neutral-100 dark:bg-neutral-700/60",children:o.jsx(V0,{size:24,className:"text-neutral-400 dark:text-neutral-300"})}),o.jsx("p",{className:"text-sm",children:"No new notifications"})]})})]})},RV=({title:e,icon:t,description:r,link:n,stats:s,color:i,id:a})=>o.jsxs(kr,{to:n,id:a,className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card hover:shadow-card-hover transition-all p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:`p-3 rounded-xl ${i}`,children:t}),s&&o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-2xl font-semibold text-neutral-900 dark:text-white",children:s.value}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:s.label})]})]}),o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-2",children:e}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:r})]}),_V=(e=[])=>Array.from(new Set(e.map(t=>t.trim()).filter(Boolean))),YS=()=>{var w;const{user:e}=Ft(),{family:t,isLoading:r}=zr(),n=$n(),[s,i]=m.useState(null),[a,l]=m.useState(!0),[c,u]=m.useState(null),d=m.useMemo(()=>({upcomingEvents:0,pendingTasks:0,unreadMessages:0,activeMembers:0,familyName:(t==null?void 0:t.FamilyName)??null,familyMantra:(t==null?void 0:t.FamilyMantra)??null,familyValues:Array.isArray(t==null?void 0:t.FamilyValues)?[...(t==null?void 0:t.FamilyValues)??[]]:[],leaderboard:[]}),[t==null?void 0:t.FamilyName,t==null?void 0:t.FamilyMantra,t==null?void 0:t.FamilyValues]),f=m.useCallback(async()=>{if(!t){r||l(!1);return}try{l(!0);const k=await I8(t.FamilyID.toString());i(k),u(null)}catch(k){const S=k instanceof Error?k.message:"We had trouble loading the latest dashboard insights.";u(S),i(E=>E??d)}finally{l(!1)}},[t,d,r]);m.useEffect(()=>{r||f()},[f,r]);const h=(w=(s==null?void 0:s.familyName)??(t==null?void 0:t.FamilyName))==null?void 0:w.trim();h?`${h}`:e!=null&&e.fullName,(s==null?void 0:s.familyMantra)??(t==null||t.FamilyMantra);const p=m.useMemo(()=>{const k=s!=null&&s.familyValues&&s.familyValues.length?s.familyValues:(t==null?void 0:t.FamilyValues)??[];return _V(k)},[s==null?void 0:s.familyValues,t==null?void 0:t.FamilyValues]),[g,y]=m.useState(0);m.useEffect(()=>{if(!p.length){y(0);return}y(Math.floor(Math.random()*p.length))},[p]),m.useEffect(()=>{if(p.length<2)return;const k=window.setInterval(()=>{y(S=>(S+1)%p.length)},8e3);return()=>window.clearInterval(k)},[p]),p.length&&p[g];const b=[{title:"Family Calendar",icon:o.jsx($0,{className:"text-primary-600 dark:text-primary-400",size:24}),description:"View and manage family events and schedules",link:"/calendar",stats:{value:(s==null?void 0:s.upcomingEvents.toString())||"0",label:"Upcoming events"},color:"bg-primary-100 dark:bg-primary-900/30"},{title:"Finance Overview",icon:o.jsx(I2,{className:"text-secondary-600 dark:text-secondary-400",size:24}),description:"Track family finances, expenses and savings",link:"/budget",stats:{value:"$0",label:"Monthly budget"},color:"bg-secondary-100 dark:bg-secondary-900/30",id:"budget-widget"},{title:"Family Members",icon:o.jsx(Ya,{className:"text-accent-600 dark:text-accent-400",size:24}),description:"Manage family members and permissions",link:"/family",stats:{value:(s==null?void 0:s.activeMembers.toString())||"0",label:"Active members"},color:"bg-accent-100 dark:bg-accent-900/30"},{title:"Shopping Lists",icon:o.jsx(Kf,{className:"text-highlight-teal",size:24}),description:"Organize household shopping and needs",link:"/shopping",stats:{value:"0",label:"Active lists"},color:"bg-highlight-teal/20 dark:bg-highlight-teal/30"}],v=[{title:"My Tasks",icon:o.jsx(W0,{className:"text-primary-600 dark:text-primary-400",size:24}),description:"View and complete your assigned tasks",link:"/tasks",stats:{value:(s==null?void 0:s.pendingTasks.toString())||"0",label:"Pending tasks"},color:"bg-primary-100 dark:bg-primary-900/30",id:"tasks-widget"},{title:"Messages",icon:o.jsx(_2,{className:"text-secondary-600 dark:text-secondary-400",size:24}),description:"Chat with family members",link:"/messages",stats:{value:(s==null?void 0:s.unreadMessages.toString())||"0",label:"Unread messages"},color:"bg-secondary-100 dark:bg-secondary-900/30"},{title:"Journal",icon:o.jsx(C2,{className:"text-accent-600 dark:text-accent-400",size:24}),description:"Write about your day and experiences",link:"/journal",color:"bg-accent-100 dark:bg-accent-900/30"},{title:"Achievements",icon:o.jsx(cu,{className:"text-highlight-teal",size:24}),description:"Track your progress and rewards",link:"/achievements",stats:{value:"0",label:"Points earned"},color:"bg-highlight-teal/20 dark:bg-highlight-teal/30"}],x=(e==null?void 0:e.role)==="parent"?b:v;return t?a?o.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:o.jsx(dn,{className:"h-6 w-6 animate-spin text-primary-500"})}):o.jsxs("div",{className:"space-y-6",children:[c&&o.jsxs("div",{className:"rounded-xl border border-warning-200 bg-warning-50 px-4 py-3 text-warning-800 dark:border-warning-400/40 dark:bg-warning-900/30 dark:text-warning-200",children:[o.jsx("p",{className:"font-medium",children:"Some insights are unavailable right now."}),o.jsx("p",{className:"text-sm opacity-80",children:c})]}),o.jsxs("div",{id:"dashboard-title",children:[o.jsxs("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-2",children:["Welcome, ",(e==null?void 0:e.fullName)||"Guest"]}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Here's an overview of your family's activities and important updates"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map(k=>o.jsx(RV,{...k},k.title))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4",children:"Recent Activity"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2 rounded-lg bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400",children:o.jsx($0,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-neutral-900 dark:text-white",children:"Family dinner scheduled for tomorrow at 7 PM"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"2 hours ago"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2 rounded-lg bg-secondary-100 dark:bg-secondary-900/30 text-secondary-600 dark:text-secondary-400",children:o.jsx(W0,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-neutral-900 dark:text-white",children:"Emma completed homework task"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"4 hours ago"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2 rounded-lg bg-accent-100 dark:bg-accent-900/30 text-accent-600 dark:text-accent-400",children:o.jsx(Kf,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-neutral-900 dark:text-white",children:"New items added to grocery list"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Yesterday"})]})]})]})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsx(DV,{})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Task Completion"}),o.jsx(cB,{className:"text-success-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-2",children:"0%"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Weekly progress"})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Family Goals"}),o.jsx(cu,{className:"text-warning-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-2",children:"0/0"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Monthly goals achieved"})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Active Members"}),o.jsx(Ya,{className:"text-primary-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-2",children:(s==null?void 0:s.activeMembers.toString())||"0"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Currently online"})]})]})]}):r?o.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:o.jsx(dn,{className:"h-6 w-6 animate-spin text-primary-500"})}):o.jsx(xD,{onFamilyCreated:()=>n("/family")})};var kp,Me,bD,wD,cl,Sa,GS,kD,SD,sh={},ED=[],IV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ai(e,t){for(var r in t)e[r]=t[r];return e}function ND(e){var t=e.parentNode;t&&t.removeChild(e)}function $(e,t,r){var n,s,i,a={};for(i in t)i=="key"?n=t[i]:i=="ref"?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?kp.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return af(e,a,n,s,null)}function af(e,t,r,n,s){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++bD};return s==null&&Me.vnode!=null&&Me.vnode(i),i}function ii(){return{current:null}}function qt(e){return e.children}function MV(e,t,r,n,s){var i;for(i in r)i==="children"||i==="key"||i in t||ih(e,i,null,r[i],n);for(i in t)s&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===t[i]||ih(e,i,t[i],r[i],n)}function qS(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||IV.test(t)?r:r+"px"}function ih(e,t,r,n,s){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||qS(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||qS(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n||e.addEventListener(t,i?QS:KS,i):e.removeEventListener(t,i?QS:KS,i);else if(t!=="dangerouslySetInnerHTML"){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,r))}}function KS(e){cl=!0;try{return this.l[e.type+!1](Me.event?Me.event(e):e)}finally{cl=!1}}function QS(e){cl=!0;try{return this.l[e.type+!0](Me.event?Me.event(e):e)}finally{cl=!1}}function wn(e,t){this.props=e,this.context=t}function hu(e,t){if(t==null)return e.__?hu(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?hu(e):null}function jD(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return jD(e)}}function OV(e){cl?setTimeout(e):kD(e)}function dy(e){(!e.__d&&(e.__d=!0)&&Sa.push(e)&&!ah.__r++||GS!==Me.debounceRendering)&&((GS=Me.debounceRendering)||OV)(ah)}function ah(){var e,t,r,n,s,i,a,l;for(Sa.sort(function(c,u){return c.__v.__b-u.__v.__b});e=Sa.shift();)e.__d&&(t=Sa.length,n=void 0,s=void 0,a=(i=(r=e).__v).__e,(l=r.__P)&&(n=[],(s=Ai({},i)).__v=i.__v+1,Cv(l,i,s,r.__n,l.ownerSVGElement!==void 0,i.__h!=null?[a]:null,n,a??hu(i),i.__h),RD(n,i),i.__e!=a&&jD(i)),Sa.length>t&&Sa.sort(function(c,u){return c.__v.__b-u.__v.__b}));ah.__r=0}function CD(e,t,r,n,s,i,a,l,c,u){var d,f,h,p,g,y,b,v=n&&n.__k||ED,x=v.length;for(r.__k=[],d=0;d<t.length;d++)if((p=r.__k[d]=(p=t[d])==null||typeof p=="boolean"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?af(null,p,null,null,p):Array.isArray(p)?af(qt,{children:p},null,null,null):p.__b>0?af(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null){if(p.__=r,p.__b=r.__b+1,(h=v[d])===null||h&&p.key==h.key&&p.type===h.type)v[d]=void 0;else for(f=0;f<x;f++){if((h=v[f])&&p.key==h.key&&p.type===h.type){v[f]=void 0;break}h=null}Cv(e,p,h=h||sh,s,i,a,l,c,u),g=p.__e,(f=p.ref)&&h.ref!=f&&(b||(b=[]),h.ref&&b.push(h.ref,null,p),b.push(f,p.__c||g,p)),g!=null?(y==null&&(y=g),typeof p.type=="function"&&p.__k===h.__k?p.__d=c=TD(p,c,e):c=AD(e,p,h,v,g,c),typeof r.type=="function"&&(r.__d=c)):c&&h.__e==c&&c.parentNode!=e&&(c=hu(h))}for(r.__e=y,d=x;d--;)v[d]!=null&&(typeof r.type=="function"&&v[d].__e!=null&&v[d].__e==r.__d&&(r.__d=DD(n).nextSibling),ID(v[d],v[d]));if(b)for(d=0;d<b.length;d++)_D(b[d],b[++d],b[++d])}function TD(e,t,r){for(var n,s=e.__k,i=0;s&&i<s.length;i++)(n=s[i])&&(n.__=e,t=typeof n.type=="function"?TD(n,t,r):AD(r,n,n,s,n.__e,t));return t}function oh(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(r){oh(r,t)}):t.push(e)),t}function AD(e,t,r,n,s,i){var a,l,c;if(t.__d!==void 0)a=t.__d,t.__d=void 0;else if(r==null||s!=i||s.parentNode==null)e:if(i==null||i.parentNode!==e)e.appendChild(s),a=null;else{for(l=i,c=0;(l=l.nextSibling)&&c<n.length;c+=1)if(l==s)break e;e.insertBefore(s,i),a=i}return a!==void 0?a:s.nextSibling}function DD(e){var t,r,n;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((r=e.__k[t])&&(n=DD(r)))return n}return null}function Cv(e,t,r,n,s,i,a,l,c){var u,d,f,h,p,g,y,b,v,x,w,k,S,E,N,j=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(c=r.__h,l=t.__e=r.__e,t.__h=null,i=[l]),(u=Me.__b)&&u(t);try{e:if(typeof j=="function"){if(b=t.props,v=(u=j.contextType)&&n[u.__c],x=u?v?v.props.value:u.__:n,r.__c?y=(d=t.__c=r.__c).__=d.__E:("prototype"in j&&j.prototype.render?t.__c=d=new j(b,x):(t.__c=d=new wn(b,x),d.constructor=j,d.render=LV),v&&v.sub(d),d.props=b,d.state||(d.state={}),d.context=x,d.__n=n,f=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),j.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ai({},d.__s)),Ai(d.__s,j.getDerivedStateFromProps(b,d.__s))),h=d.props,p=d.state,d.__v=t,f)j.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(j.getDerivedStateFromProps==null&&b!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,x),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,x)===!1||t.__v===r.__v){for(t.__v!==r.__v&&(d.props=b,d.state=d.__s,d.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(T){T&&(T.__=t)}),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,x),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,p,g)})}if(d.context=x,d.props=b,d.__P=e,k=Me.__r,S=0,"prototype"in j&&j.prototype.render){for(d.state=d.__s,d.__d=!1,k&&k(t),u=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do d.__d=!1,k&&k(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++S<25);d.state=d.__s,d.getChildContext!=null&&(n=Ai(Ai({},n),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(g=d.getSnapshotBeforeUpdate(h,p)),N=u!=null&&u.type===qt&&u.key==null?u.props.children:u,CD(e,Array.isArray(N)?N:[N],t,r,n,s,i,a,l,c),d.base=t.__e,t.__h=null,d.__h.length&&a.push(d),y&&(d.__E=d.__=null),d.__e=!1}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=PV(r.__e,t,r,n,s,i,a,c);(u=Me.diffed)&&u(t)}catch(T){t.__v=null,(c||i!=null)&&(t.__e=l,t.__h=!!c,i[i.indexOf(l)]=null),Me.__e(T,t,r)}}function RD(e,t){Me.__c&&Me.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){Me.__e(n,r.__v)}})}function PV(e,t,r,n,s,i,a,l){var c,u,d,f=r.props,h=t.props,p=t.type,g=0;if(p==="svg"&&(s=!0),i!=null){for(;g<i.length;g++)if((c=i[g])&&"setAttribute"in c==!!p&&(p?c.localName===p:c.nodeType===3)){e=c,i[g]=null;break}}if(e==null){if(p===null)return document.createTextNode(h);e=s?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,h.is&&h),i=null,l=!1}if(p===null)f===h||l&&e.data===h||(e.data=h);else{if(i=i&&kp.call(e.childNodes),u=(f=r.props||sh).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,!l){if(i!=null)for(f={},g=0;g<e.attributes.length;g++)f[e.attributes[g].name]=e.attributes[g].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(MV(e,h,f,s,l),d)t.__k=[];else if(g=t.props.children,CD(e,Array.isArray(g)?g:[g],t,r,n,s&&p!=="foreignObject",i,a,i?i[0]:r.__k&&hu(r,0),l),i!=null)for(g=i.length;g--;)i[g]!=null&&ND(i[g]);l||("value"in h&&(g=h.value)!==void 0&&(g!==e.value||p==="progress"&&!g||p==="option"&&g!==f.value)&&ih(e,"value",g,f.value,!1),"checked"in h&&(g=h.checked)!==void 0&&g!==e.checked&&ih(e,"checked",g,f.checked,!1))}return e}function _D(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){Me.__e(n,r)}}function ID(e,t,r){var n,s;if(Me.unmount&&Me.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||_D(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){Me.__e(i,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(s=0;s<n.length;s++)n[s]&&ID(n[s],t,r||typeof e.type!="function");r||e.__e==null||ND(e.__e),e.__=e.__e=e.__d=void 0}function LV(e,t,r){return this.constructor(e,r)}function pu(e,t,r){var n,s,i;Me.__&&Me.__(e,t),s=(n=!1)?null:t.__k,i=[],Cv(t,e=t.__k=$(qt,null,[e]),s||sh,sh,t.ownerSVGElement!==void 0,s?null:t.firstChild?kp.call(t.childNodes):null,i,s?s.__e:t.firstChild,n),RD(i,e)}function FV(e,t){var r={__c:t="__cC"+SD++,__:e,Consumer:function(n,s){return n.children(s)},Provider:function(n){var s,i;return this.getChildContext||(s=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&s.some(function(l){l.__e=!0,dy(l)})},this.sub=function(a){s.push(a);var l=a.componentWillUnmount;a.componentWillUnmount=function(){s.splice(s.indexOf(a),1),l&&l.call(a)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}kp=ED.slice,Me={__e:function(e,t,r,n){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,n||{}),a=s.__d),a)return s.__E=s}catch(l){e=l}throw e}},bD=0,wD=function(e){return e!=null&&e.constructor===void 0},cl=!1,wn.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ai({},this.state),typeof e=="function"&&(e=e(Ai({},r),this.props)),e&&Ai(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),dy(this))},wn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),dy(this))},wn.prototype.render=qt,Sa=[],kD=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ah.__r=0,SD=0;var vs,Ym,ZS,MD=[],Gm=[],XS=Me.__b,JS=Me.__r,e1=Me.diffed,t1=Me.__c,r1=Me.unmount;function BV(){for(var e;e=MD.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(of),e.__H.__h.forEach(fy),e.__H.__h=[]}catch(t){e.__H.__h=[],Me.__e(t,e.__v)}}Me.__b=function(e){vs=null,XS&&XS(e)},Me.__r=function(e){JS&&JS(e);var t=(vs=e.__c).__H;t&&(Ym===vs?(t.__h=[],vs.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=Gm,r.__N=r.i=void 0})):(t.__h.forEach(of),t.__h.forEach(fy),t.__h=[])),Ym=vs},Me.diffed=function(e){e1&&e1(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(MD.push(t)!==1&&ZS===Me.requestAnimationFrame||((ZS=Me.requestAnimationFrame)||zV)(BV)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==Gm&&(r.__=r.__V),r.i=void 0,r.__V=Gm})),Ym=vs=null},Me.__c=function(e,t){t.some(function(r){try{r.__h.forEach(of),r.__h=r.__h.filter(function(n){return!n.__||fy(n)})}catch(n){t.some(function(s){s.__h&&(s.__h=[])}),t=[],Me.__e(n,r.__v)}}),t1&&t1(e,t)},Me.unmount=function(e){r1&&r1(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{of(n)}catch(s){t=s}}),r.__H=void 0,t&&Me.__e(t,r.__v))};var n1=typeof requestAnimationFrame=="function";function zV(e){var t,r=function(){clearTimeout(n),n1&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);n1&&(t=requestAnimationFrame(r))}function of(e){var t=vs,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),vs=t}function fy(e){var t=vs;e.__c=e.__(),vs=t}function UV(e,t){for(var r in t)e[r]=t[r];return e}function s1(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function i1(e){this.props=e}(i1.prototype=new wn).isPureReactComponent=!0,i1.prototype.shouldComponentUpdate=function(e,t){return s1(this.props,e)||s1(this.state,t)};var a1=Me.__b;Me.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),a1&&a1(e)};var HV=Me.__e;Me.__e=function(e,t,r,n){if(e.then){for(var s,i=t;i=i.__;)if((s=i.__c)&&s.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),s.__c(e,t)}HV(e,t,r,n)};var o1=Me.unmount;function OD(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=UV({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return OD(n,t,r)})),e}function PD(e,t,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return PD(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}function qm(){this.__u=0,this.t=null,this.__b=null}function LD(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ed(){this.u=null,this.o=null}Me.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),o1&&o1(e)},(qm.prototype=new wn).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var s=LD(n.__v),i=!1,a=function(){i||(i=!0,r.__R=null,s?s(l):l())};r.__R=a;var l=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=PD(u,u.__c.__P,u.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.t.pop();)d.forceUpdate()}},c=t.__h===!0;n.__u++||c||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},qm.prototype.componentWillUnmount=function(){this.t=[]},qm.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=OD(this.__b,r,n.__O=n.__P)}this.__b=null}var s=t.__a&&$(qt,null,e.fallback);return s&&(s.__h=null),[$(qt,null,t.__a?null:e.children),s]};var l1=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};function VV(e){return this.getChildContext=function(){return e.context},e.children}function $V(e){var t=this,r=e.i;t.componentWillUnmount=function(){pu(null,t.l),t.l=null,t.i=null},t.i&&t.i!==r&&t.componentWillUnmount(),e.__v?(t.l||(t.i=r,t.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,s){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),pu($(VV,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function WV(e,t){var r=$($V,{__v:e,i:t});return r.containerInfo=t,r}(Ed.prototype=new wn).__a=function(e){var t=this,r=LD(t.__v),n=t.o.get(e);return n[0]++,function(s){var i=function(){t.props.revealOrder?(n.push(s),l1(t,e,n)):s()};r?r(i):i()}},Ed.prototype.render=function(e){this.u=null,this.o=new Map;var t=oh(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},Ed.prototype.componentDidUpdate=Ed.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){l1(e,r,t)})};var YV=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,GV=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,qV=typeof document<"u",KV=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};wn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(wn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var c1=Me.event;function QV(){}function ZV(){return this.cancelBubble}function XV(){return this.defaultPrevented}Me.event=function(e){return c1&&(e=c1(e)),e.persist=QV,e.isPropagationStopped=ZV,e.isDefaultPrevented=XV,e.nativeEvent=e};var u1={configurable:!0,get:function(){return this.class}},d1=Me.vnode;Me.vnode=function(e){var t=e.type,r=e.props,n=r;if(typeof t=="string"){var s=t.indexOf("-")===-1;for(var i in n={},r){var a=r[i];qV&&i==="children"&&t==="noscript"||i==="value"&&"defaultValue"in r&&a==null||(i==="defaultValue"&&"value"in r&&r.value==null?i="value":i==="download"&&a===!0?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!KV(r.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():s&&GV.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),n[i]&&(i="oninputCapture")),n[i]=a)}t=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=oh(r.children).forEach(function(l){l.props.selected=n.value.indexOf(l.props.value)!=-1})),t=="select"&&n.defaultValue!=null&&(n.value=oh(r.children).forEach(function(l){l.props.selected=n.multiple?n.defaultValue.indexOf(l.props.value)!=-1:n.defaultValue==l.props.value})),e.props=n,r.class!=r.className&&(u1.enumerable="className"in r,r.className!=null&&(n.class=r.className),Object.defineProperty(n,"className",u1))}e.$$typeof=YV,d1&&d1(e)};var f1=Me.__r;Me.__r=function(e){f1&&f1(e),e.__c};const FD=[],hy=new Map;function BD(e){FD.push(e),hy.forEach(t=>{UD(t,e)})}function JV(e){e.isConnected&&e.getRootNode&&zD(e.getRootNode())}function zD(e){let t=hy.get(e);if(!t||!t.isConnected){if(t=e.querySelector("style[data-fullcalendar]"),!t){t=document.createElement("style"),t.setAttribute("data-fullcalendar","");const r=t9();r&&(t.nonce=r);const n=e===document?document.head:e,s=e===document?n.querySelector("script,link[rel=stylesheet],link[as=style],style"):n.firstChild;n.insertBefore(t,s)}hy.set(e,t),e9(t)}}function e9(e){for(const t of FD)UD(e,t)}function UD(e,t){const{sheet:r}=e,n=r.cssRules.length;t.split("}").forEach((s,i)=>{s=s.trim(),s&&r.insertRule(s+"}",n+i)})}let Km;function t9(){return Km===void 0&&(Km=r9()),Km}function r9(){const e=document.querySelector('meta[name="csp-nonce"]');if(e&&e.hasAttribute("content"))return e.getAttribute("content");const t=document.querySelector("script[nonce]");return t&&t.nonce||""}typeof document<"u"&&zD(document);var n9=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';BD(n9);class Tv{constructor(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),t==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))}pause(t=""){let{pauseDepths:r}=this;r[t]=(r[t]||0)+1,this.clearTimeout()}resume(t="",r){let{pauseDepths:n}=this;t in n&&(r?delete n[t]:(n[t]-=1,n[t]<=0&&delete n[t]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function Av(e){e.parentNode&&e.parentNode.removeChild(e)}function Pr(e,t){if(e.closest)return e.closest(t);if(!document.documentElement.contains(e))return null;do{if(s9(e,t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}function s9(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector).call(e,t)}function i9(e,t){let r=e instanceof HTMLElement?[e]:e,n=[];for(let s=0;s<r.length;s+=1){let i=r[s].querySelectorAll(t);for(let a=0;a<i.length;a+=1)n.push(i[a])}return n}const a9=/(top|left|right|bottom|width|height)$/i;function Tc(e,t){for(let r in t)HD(e,r,t[r])}function HD(e,t,r){r==null?e.style[t]="":typeof r=="number"&&a9.test(t)?e.style[t]=`${r}px`:e.style[t]=r}function VD(e){var t,r;return(r=(t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])!==null&&r!==void 0?r:e.target}let h1=0;function Sp(){return h1+=1,"fc-dom-"+h1}function Ep(e){e.preventDefault()}function o9(e,t){return r=>{let n=Pr(r.target,e);n&&t.call(n,r,n)}}function $D(e,t,r,n){let s=o9(r,n);return e.addEventListener(t,s),()=>{e.removeEventListener(t,s)}}function l9(e,t,r,n){let s;return $D(e,"mouseover",t,(i,a)=>{if(a!==s){s=a,r(i,a);let l=c=>{s=null,n(c,a),a.removeEventListener("mouseleave",l)};a.addEventListener("mouseleave",l)}})}const p1=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function c9(e,t){let r=n=>{t(n),p1.forEach(s=>{e.removeEventListener(s,r)})};p1.forEach(n=>{e.addEventListener(n,r)})}function WD(e){return Object.assign({onClick:e},YD(e))}function YD(e){return{tabIndex:0,onKeyDown(t){(t.key==="Enter"||t.key===" ")&&(e(t),t.preventDefault())}}}let m1=0;function so(){return m1+=1,String(m1)}function Dv(){document.body.classList.add("fc-not-allowed")}function Rv(){document.body.classList.remove("fc-not-allowed")}function u9(e){e.style.userSelect="none",e.style.webkitUserSelect="none",e.addEventListener("selectstart",Ep)}function d9(e){e.style.userSelect="",e.style.webkitUserSelect="",e.removeEventListener("selectstart",Ep)}function f9(e){e.addEventListener("contextmenu",Ep)}function h9(e){e.removeEventListener("contextmenu",Ep)}function p9(e){let t=[],r=[],n,s;for(typeof e=="string"?r=e.split(/\s*,\s*/):typeof e=="function"?r=[e]:Array.isArray(e)&&(r=e),n=0;n<r.length;n+=1)s=r[n],typeof s=="string"?t.push(s.charAt(0)==="-"?{field:s.substring(1),order:-1}:{field:s,order:1}):typeof s=="function"&&t.push({func:s});return t}function m9(e,t,r){let n,s;for(n=0;n<r.length;n+=1)if(s=g9(e,t,r[n]),s)return s;return 0}function g9(e,t,r){return r.func?r.func(e,t):y9(e[r.field],t[r.field])*(r.order||1)}function y9(e,t){return!e&&!t?0:t==null?-1:e==null?1:typeof e=="string"||typeof t=="string"?String(e).localeCompare(String(t)):e-t}function Qm(e,t){let r=String(e);return"000".substr(0,t-r.length)+r}function Ac(e,t,r){return typeof e=="function"?e(...t):typeof e=="string"?t.reduce((n,s,i)=>n.replace("$"+i,s||""),e):r}function x9(e,t){return e-t}function Zm(e){return e%1===0}function v9(e){let t=e.querySelector(".fc-scrollgrid-shrink-frame"),r=e.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!r)throw new Error("needs fc-scrollgrid-shrink-cushion className");return e.getBoundingClientRect().width-t.getBoundingClientRect().width+r.getBoundingClientRect().width}const b9=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function ft(e,t){return typeof e=="string"?w9(e):typeof e=="object"&&e?g1(e):typeof e=="number"?g1({[t||"milliseconds"]:e}):null}function w9(e){let t=b9.exec(e);if(t){let r=t[1]?-1:1;return{years:0,months:0,days:r*(t[2]?parseInt(t[2],10):0),milliseconds:r*((t[3]?parseInt(t[3],10):0)*60*60*1e3+(t[4]?parseInt(t[4],10):0)*60*1e3+(t[5]?parseInt(t[5],10):0)*1e3+(t[6]?parseInt(t[6],10):0))}}return null}function g1(e){let t={years:e.years||e.year||0,months:e.months||e.month||0,days:e.days||e.day||0,milliseconds:(e.hours||e.hour||0)*60*60*1e3+(e.minutes||e.minute||0)*60*1e3+(e.seconds||e.second||0)*1e3+(e.milliseconds||e.millisecond||e.ms||0)},r=e.weeks||e.week;return r&&(t.days+=r*7,t.specifiedWeeks=!0),t}function k9(e,t){return e.years===t.years&&e.months===t.months&&e.days===t.days&&e.milliseconds===t.milliseconds}function S9(e,t){return{years:e.years-t.years,months:e.months-t.months,days:e.days-t.days,milliseconds:e.milliseconds-t.milliseconds}}function E9(e){return Vo(e)/365}function N9(e){return Vo(e)/30}function Vo(e){return mu(e)/864e5}function mu(e){return e.years*(365*864e5)+e.months*(30*864e5)+e.days*864e5+e.milliseconds}function py(e){let t=e.milliseconds;if(t){if(t%1e3!==0)return{unit:"millisecond",value:t};if(t%(1e3*60)!==0)return{unit:"second",value:t/1e3};if(t%(1e3*60*60)!==0)return{unit:"minute",value:t/(1e3*60)};if(t)return{unit:"hour",value:t/(1e3*60*60)}}return e.days?e.specifiedWeeks&&e.days%7===0?{unit:"week",value:e.days/7}:{unit:"day",value:e.days}:e.months?{unit:"month",value:e.months}:e.years?{unit:"year",value:e.years}:{unit:"millisecond",value:0}}function Zi(e,t,r){if(e===t)return!0;let n=e.length,s;if(n!==t.length)return!1;for(s=0;s<n;s+=1)if(!(r?r(e[s],t[s]):e[s]===t[s]))return!1;return!0}const j9=["sun","mon","tue","wed","thu","fri","sat"];function y1(e,t){let r=Di(e);return r[2]+=t*7,sn(r)}function ur(e,t){let r=Di(e);return r[2]+=t,sn(r)}function Xi(e,t){let r=Di(e);return r[6]+=t,sn(r)}function C9(e,t){return El(e,t)/7}function El(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60*24)}function T9(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60)}function A9(e,t){return(t.valueOf()-e.valueOf())/(1e3*60)}function D9(e,t){return(t.valueOf()-e.valueOf())/1e3}function R9(e,t){let r=Pt(e),n=Pt(t);return{years:0,months:0,days:Math.round(El(r,n)),milliseconds:t.valueOf()-n.valueOf()-(e.valueOf()-r.valueOf())}}function _9(e,t){let r=lh(e,t);return r!==null&&r%7===0?r/7:null}function lh(e,t){return Ri(e)===Ri(t)?Math.round(El(e,t)):null}function Pt(e){return sn([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()])}function I9(e){return sn([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()])}function M9(e){return sn([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()])}function O9(e){return sn([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()])}function P9(e,t,r){let n=e.getUTCFullYear(),s=Xm(e,n,t,r);if(s<1)return Xm(e,n-1,t,r);let i=Xm(e,n+1,t,r);return i>=1?Math.min(s,i):s}function Xm(e,t,r,n){let s=sn([t,0,1+L9(t,r,n)]),i=Pt(e),a=Math.round(El(s,i));return Math.floor(a/7)+1}function L9(e,t,r){let n=7+t-r;return-((7+sn([e,0,n]).getUTCDay()-t)%7)+n-1}function x1(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}function v1(e){return new Date(e[0],e[1]||0,e[2]==null?1:e[2],e[3]||0,e[4]||0,e[5]||0)}function Di(e){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}function sn(e){return e.length===1&&(e=e.concat([0])),new Date(Date.UTC(...e))}function GD(e){return!isNaN(e.valueOf())}function Ri(e){return e.getUTCHours()*1e3*60*60+e.getUTCMinutes()*1e3*60+e.getUTCSeconds()*1e3+e.getUTCMilliseconds()}function F9(e,t,r=!1){let n=e.toISOString();return n=n.replace(".000",""),r&&(n=n.replace("T00:00:00Z","")),n.length>10&&(t==null?n=n.replace("Z",""):t!==0&&(n=n.replace("Z",Iv(t,!0)))),n}function _v(e){return e.toISOString().replace(/T.*$/,"")}function B9(e){return e.toISOString().match(/^\d{4}-\d{2}/)[0]}function Iv(e,t=!1){let r=e<0?"-":"+",n=Math.abs(e),s=Math.floor(n/60),i=Math.round(n%60);return t?`${r+Qm(s,2)}:${Qm(i,2)}`:`GMT${r}${s}${i?`:${Qm(i,2)}`:""}`}function ht(e,t,r){let n,s;return function(...i){if(!n)s=e.apply(this,i);else if(!Zi(n,i)){let a=e.apply(this,i);(!t||!t(a,s))&&(s=a)}return n=i,s}}function lf(e,t,r){let n,s;return i=>(n?as(n,i)||(s=e.call(this,i)):s=e.call(this,i),n=i,s)}const Jm={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},ch={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Nd=/\s*([ap])\.?m\.?/i,z9=/,/g,U9=/\s+/g,H9=/\u200e/g,V9=/UTC|GMT/;class $9{constructor(t){let r={},n={},s=9;for(let i in t)i in Jm?(n[i]=t[i],Jm[i]<9&&(s=Math.min(Jm[i],s))):(r[i]=t[i],i in ch&&(s=Math.min(ch[i],s)));this.standardDateProps=r,this.extendedSettings=n,this.smallestUnitNum=s,this.buildFormattingFunc=ht(b1)}format(t,r){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,r)(t)}formatRange(t,r,n,s){let{standardDateProps:i,extendedSettings:a}=this,l=Q9(t.marker,r.marker,n.calendarSystem);if(!l)return this.format(t,n);let c=l;c>1&&(i.year==="numeric"||i.year==="2-digit")&&(i.month==="numeric"||i.month==="2-digit")&&(i.day==="numeric"||i.day==="2-digit")&&(c=1);let u=this.format(t,n),d=this.format(r,n);if(u===d)return u;let f=Z9(i,c),h=b1(f,a,n),p=h(t),g=h(r),y=X9(u,p,d,g),b=a.separator||s||n.defaultSeparator||"";return y?y.before+p+b+g+y.after:u+b+d}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function b1(e,t,r){let n=Object.keys(e).length;return n===1&&e.timeZoneName==="short"?s=>Iv(s.timeZoneOffset):n===0&&t.week?s=>K9(r.computeWeekNumber(s.marker),r.weekText,r.weekTextLong,r.locale,t.week):W9(e,t,r)}function W9(e,t,r){e=Object.assign({},e),t=Object.assign({},t),Y9(e,t),e.timeZone="UTC";let n=new Intl.DateTimeFormat(r.locale.codes,e),s;if(t.omitZeroMinute){let i=Object.assign({},e);delete i.minute,s=new Intl.DateTimeFormat(r.locale.codes,i)}return i=>{let{marker:a}=i,l;s&&!a.getUTCMinutes()?l=s:l=n;let c=l.format(a);return G9(c,i,e,t,r)}}function Y9(e,t){e.timeZoneName&&(e.hour||(e.hour="2-digit"),e.minute||(e.minute="2-digit")),e.timeZoneName==="long"&&(e.timeZoneName="short"),t.omitZeroMinute&&(e.second||e.millisecond)&&delete t.omitZeroMinute}function G9(e,t,r,n,s){return e=e.replace(H9,""),r.timeZoneName==="short"&&(e=q9(e,s.timeZone==="UTC"||t.timeZoneOffset==null?"UTC":Iv(t.timeZoneOffset))),n.omitCommas&&(e=e.replace(z9,"").trim()),n.omitZeroMinute&&(e=e.replace(":00","")),n.meridiem===!1?e=e.replace(Nd,"").trim():n.meridiem==="narrow"?e=e.replace(Nd,(i,a)=>a.toLocaleLowerCase()):n.meridiem==="short"?e=e.replace(Nd,(i,a)=>`${a.toLocaleLowerCase()}m`):n.meridiem==="lowercase"&&(e=e.replace(Nd,i=>i.toLocaleLowerCase())),e=e.replace(U9," "),e=e.trim(),e}function q9(e,t){let r=!1;return e=e.replace(V9,()=>(r=!0,t)),r||(e+=` ${t}`),e}function K9(e,t,r,n,s){let i=[];return s==="long"?i.push(r):(s==="short"||s==="narrow")&&i.push(t),(s==="long"||s==="short")&&i.push(" "),i.push(n.simpleNumberFormat.format(e)),n.options.direction==="rtl"&&i.reverse(),i.join("")}function Q9(e,t,r){return r.getMarkerYear(e)!==r.getMarkerYear(t)?5:r.getMarkerMonth(e)!==r.getMarkerMonth(t)?4:r.getMarkerDay(e)!==r.getMarkerDay(t)?2:Ri(e)!==Ri(t)?1:0}function Z9(e,t){let r={};for(let n in e)(!(n in ch)||ch[n]<=t)&&(r[n]=e[n]);return r}function X9(e,t,r,n){let s=0;for(;s<e.length;){let i=e.indexOf(t,s);if(i===-1)break;let a=e.substr(0,i);s=i+t.length;let l=e.substr(s),c=0;for(;c<r.length;){let u=r.indexOf(n,c);if(u===-1)break;let d=r.substr(0,u);c=u+n.length;let f=r.substr(c);if(a===d&&l===f)return{before:a,after:l}}}return null}function w1(e,t){let r=t.markerToArray(e.marker);return{marker:e.marker,timeZoneOffset:e.timeZoneOffset,array:r,year:r[0],month:r[1],day:r[2],hour:r[3],minute:r[4],second:r[5],millisecond:r[6]}}function uh(e,t,r,n){let s=w1(e,r.calendarSystem),i=t?w1(t,r.calendarSystem):null;return{date:s,start:s,end:i,timeZone:r.timeZone,localeCodes:r.locale.codes,defaultSeparator:n||r.defaultSeparator}}class J9{constructor(t){this.cmdStr=t}format(t,r,n){return r.cmdFormatter(this.cmdStr,uh(t,null,r,n))}formatRange(t,r,n,s){return n.cmdFormatter(this.cmdStr,uh(t,r,n,s))}}class e${constructor(t){this.func=t}format(t,r,n){return this.func(uh(t,null,r,n))}formatRange(t,r,n,s){return this.func(uh(t,r,n,s))}}function gr(e){return typeof e=="object"&&e?new $9(e):typeof e=="string"?new J9(e):typeof e=="function"?new e$(e):null}const k1={navLinkDayClick:H,navLinkWeekClick:H,duration:ft,bootstrapFontAwesome:H,buttonIcons:H,customButtons:H,defaultAllDayEventDuration:ft,defaultTimedEventDuration:ft,nextDayThreshold:ft,scrollTime:ft,scrollTimeReset:Boolean,slotMinTime:ft,slotMaxTime:ft,dayPopoverFormat:gr,slotDuration:ft,snapDuration:ft,headerToolbar:H,footerToolbar:H,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:gr,dayHeaderClassNames:H,dayHeaderContent:H,dayHeaderDidMount:H,dayHeaderWillUnmount:H,dayCellClassNames:H,dayCellContent:H,dayCellDidMount:H,dayCellWillUnmount:H,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:H,weekNumbers:Boolean,weekNumberClassNames:H,weekNumberContent:H,weekNumberDidMount:H,weekNumberWillUnmount:H,editable:Boolean,viewClassNames:H,viewDidMount:H,viewWillUnmount:H,nowIndicator:Boolean,nowIndicatorSnap:H,nowIndicatorClassNames:H,nowIndicatorContent:H,nowIndicatorDidMount:H,nowIndicatorWillUnmount:H,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:H,locale:H,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:H,eventOrder:p9,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:H,contentHeight:H,direction:String,weekNumberFormat:gr,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:H,initialDate:H,now:H,eventDataTransform:H,stickyHeaderDates:H,stickyFooterScrollbar:H,viewHeight:H,defaultAllDay:Boolean,eventSourceFailure:H,eventSourceSuccess:H,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:H,eventConstraint:H,eventAllow:H,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:H,eventContent:H,eventDidMount:H,eventWillUnmount:H,selectConstraint:H,selectOverlap:H,selectAllow:H,droppable:Boolean,unselectCancel:String,slotLabelFormat:H,slotLaneClassNames:H,slotLaneContent:H,slotLaneDidMount:H,slotLaneWillUnmount:H,slotLabelClassNames:H,slotLabelContent:H,slotLabelDidMount:H,slotLabelWillUnmount:H,dayMaxEvents:H,dayMaxEventRows:H,dayMinWidth:Number,slotLabelInterval:ft,allDayText:String,allDayClassNames:H,allDayContent:H,allDayDidMount:H,allDayWillUnmount:H,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:gr,rerenderDelay:Number,moreLinkText:H,moreLinkHint:H,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:H,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:ft,hiddenDays:H,fixedWeekCount:Boolean,validRange:H,visibleRange:H,titleFormat:H,eventInteractive:Boolean,noEventsText:String,viewHint:H,navLinkHint:H,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:H,moreLinkClassNames:H,moreLinkContent:H,moreLinkDidMount:H,moreLinkWillUnmount:H,monthStartFormat:gr,handleCustomRendering:H,customRenderingMetaMap:H,customRenderingReplaces:Boolean},Dc={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},S1={datesSet:H,eventsSet:H,eventAdd:H,eventChange:H,eventRemove:H,windowResize:H,eventClick:H,eventMouseEnter:H,eventMouseLeave:H,select:H,unselect:H,loading:H,_unmount:H,_beforeprint:H,_afterprint:H,_noEventDrop:H,_noEventResize:H,_resize:H,_scrollRequest:H},E1={buttonText:H,buttonHints:H,views:H,plugins:H,initialEvents:H,events:H,eventSources:H},ba={headerToolbar:wa,footerToolbar:wa,buttonText:wa,buttonHints:wa,buttonIcons:wa,dateIncrement:wa,plugins:jd,events:jd,eventSources:jd,resources:jd};function wa(e,t){return typeof e=="object"&&typeof t=="object"&&e&&t?as(e,t):e===t}function jd(e,t){return Array.isArray(e)&&Array.isArray(t)?Zi(e,t):e===t}const t$={type:String,component:H,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:H,usesMinMaxTime:Boolean,classNames:H,content:H,didMount:H,willUnmount:H};function eg(e){return Ov(e,ba)}function Mv(e,t){let r={},n={};for(let s in t)s in e&&(r[s]=t[s](e[s]));for(let s in e)s in t||(n[s]=e[s]);return{refined:r,extra:n}}function H(e){return e}const{hasOwnProperty:dh}=Object.prototype;function Ov(e,t){let r={};if(t){for(let n in t)if(t[n]===wa){let s=[];for(let i=e.length-1;i>=0;i-=1){let a=e[i][n];if(typeof a=="object"&&a)s.unshift(a);else if(a!==void 0){r[n]=a;break}}s.length&&(r[n]=Ov(s))}}for(let n=e.length-1;n>=0;n-=1){let s=e[n];for(let i in s)i in r||(r[i]=s[i])}return r}function qa(e,t){let r={};for(let n in e)t(e[n],n)&&(r[n]=e[n]);return r}function io(e,t){let r={};for(let n in e)r[n]=t(e[n],n);return r}function qD(e){let t={};for(let r of e)t[r]=!0;return t}function Pv(e){let t=[];for(let r in e)t.push(e[r]);return t}function as(e,t){if(e===t)return!0;for(let r in e)if(dh.call(e,r)&&!(r in t))return!1;for(let r in t)if(dh.call(t,r)&&e[r]!==t[r])return!1;return!0}const r$=/^on[A-Z]/;function n$(e,t){const r=s$(e,t);for(let n of r)if(!r$.test(n))return!1;return!0}function s$(e,t){let r=[];for(let n in e)dh.call(e,n)&&(n in t||r.push(n));for(let n in t)dh.call(t,n)&&e[n]!==t[n]&&r.push(n);return r}function tg(e,t,r={}){if(e===t)return!0;for(let n in t)if(!(n in e&&i$(e[n],t[n],r[n])))return!1;for(let n in e)if(!(n in t))return!1;return!0}function i$(e,t,r){return e===t||r===!0?!0:r?r(e,t):!1}function a$(e,t=0,r,n=1){let s=[];r==null&&(r=Object.keys(e).length);for(let i=t;i<r;i+=n){let a=e[i];a!==void 0&&s.push(a)}return s}let KD={};function o$(e,t){KD[e]=t}function l$(e){return new KD[e]}class c${getMarkerYear(t){return t.getUTCFullYear()}getMarkerMonth(t){return t.getUTCMonth()}getMarkerDay(t){return t.getUTCDate()}arrayToMarker(t){return sn(t)}markerToArray(t){return Di(t)}}o$("gregory",c$);const u$=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function Np(e){let t=u$.exec(e);if(t){let r=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?+`0.${t[12]}`*1e3:0));if(GD(r)){let n=null;return t[13]&&(n=(t[15]==="-"?-1:1)*(Number(t[16]||0)*60+Number(t[18]||0))),{marker:r,isTimeUnspecified:!t[6],timeZoneOffset:n}}}return null}class d${constructor(t){let r=this.timeZone=t.timeZone,n=r!=="local"&&r!=="UTC";t.namedTimeZoneImpl&&n&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(r)),this.canComputeOffset=!!(!n||this.namedTimeZoneImpl),this.calendarSystem=l$(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,t.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof t.firstDay=="number"&&(this.weekDow=t.firstDay),typeof t.weekNumberCalculation=="function"&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=t.weekText!=null?t.weekText:t.locale.options.weekText,this.weekTextLong=(t.weekTextLong!=null?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}createMarker(t){let r=this.createMarkerMeta(t);return r===null?null:r.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):sn(x1(new Date))}createMarkerMeta(t){if(typeof t=="string")return this.parse(t);let r=null;return typeof t=="number"?r=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(r=this.timestampToMarker(t))):Array.isArray(t)&&(r=sn(t)),r===null||!GD(r)?null:{marker:r,isTimeUnspecified:!1,forcedTzo:null}}parse(t){let r=Np(t);if(r===null)return null;let{marker:n}=r,s=null;return r.timeZoneOffset!==null&&(this.canComputeOffset?n=this.timestampToMarker(n.valueOf()-r.timeZoneOffset*60*1e3):s=r.timeZoneOffset),{marker:n,isTimeUnspecified:r.isTimeUnspecified,forcedTzo:s}}getYear(t){return this.calendarSystem.getMarkerYear(t)}getMonth(t){return this.calendarSystem.getMarkerMonth(t)}getDay(t){return this.calendarSystem.getMarkerDay(t)}add(t,r){let n=this.calendarSystem.markerToArray(t);return n[0]+=r.years,n[1]+=r.months,n[2]+=r.days,n[6]+=r.milliseconds,this.calendarSystem.arrayToMarker(n)}subtract(t,r){let n=this.calendarSystem.markerToArray(t);return n[0]-=r.years,n[1]-=r.months,n[2]-=r.days,n[6]-=r.milliseconds,this.calendarSystem.arrayToMarker(n)}addYears(t,r){let n=this.calendarSystem.markerToArray(t);return n[0]+=r,this.calendarSystem.arrayToMarker(n)}addMonths(t,r){let n=this.calendarSystem.markerToArray(t);return n[1]+=r,this.calendarSystem.arrayToMarker(n)}diffWholeYears(t,r){let{calendarSystem:n}=this;return Ri(t)===Ri(r)&&n.getMarkerDay(t)===n.getMarkerDay(r)&&n.getMarkerMonth(t)===n.getMarkerMonth(r)?n.getMarkerYear(r)-n.getMarkerYear(t):null}diffWholeMonths(t,r){let{calendarSystem:n}=this;return Ri(t)===Ri(r)&&n.getMarkerDay(t)===n.getMarkerDay(r)?n.getMarkerMonth(r)-n.getMarkerMonth(t)+(n.getMarkerYear(r)-n.getMarkerYear(t))*12:null}greatestWholeUnit(t,r){let n=this.diffWholeYears(t,r);return n!==null?{unit:"year",value:n}:(n=this.diffWholeMonths(t,r),n!==null?{unit:"month",value:n}:(n=_9(t,r),n!==null?{unit:"week",value:n}:(n=lh(t,r),n!==null?{unit:"day",value:n}:(n=T9(t,r),Zm(n)?{unit:"hour",value:n}:(n=A9(t,r),Zm(n)?{unit:"minute",value:n}:(n=D9(t,r),Zm(n)?{unit:"second",value:n}:{unit:"millisecond",value:r.valueOf()-t.valueOf()}))))))}countDurationsBetween(t,r,n){let s;return n.years&&(s=this.diffWholeYears(t,r),s!==null)?s/E9(n):n.months&&(s=this.diffWholeMonths(t,r),s!==null)?s/N9(n):n.days&&(s=lh(t,r),s!==null)?s/Vo(n):(r.valueOf()-t.valueOf())/mu(n)}startOf(t,r){return r==="year"?this.startOfYear(t):r==="month"?this.startOfMonth(t):r==="week"?this.startOfWeek(t):r==="day"?Pt(t):r==="hour"?I9(t):r==="minute"?M9(t):r==="second"?O9(t):null}startOfYear(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])}startOfMonth(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])}startOfWeek(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):P9(t,this.weekDow,this.weekDoy)}format(t,r,n={}){return r.format({marker:t,timeZoneOffset:n.forcedTzo!=null?n.forcedTzo:this.offsetForMarker(t)},this)}formatRange(t,r,n,s={}){return s.isEndExclusive&&(r=Xi(r,-1)),n.formatRange({marker:t,timeZoneOffset:s.forcedStartTzo!=null?s.forcedStartTzo:this.offsetForMarker(t)},{marker:r,timeZoneOffset:s.forcedEndTzo!=null?s.forcedEndTzo:this.offsetForMarker(r)},this,s.defaultSeparator)}formatIso(t,r={}){let n=null;return r.omitTimeZoneOffset||(r.forcedTzo!=null?n=r.forcedTzo:n=this.offsetForMarker(t)),F9(t,n,r.omitTime)}timestampToMarker(t){return this.timeZone==="local"?sn(x1(new Date(t))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(t):sn(this.namedTimeZoneImpl.timestampToArray(t))}offsetForMarker(t){return this.timeZone==="local"?-v1(Di(t)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Di(t)):null}toDate(t,r){return this.timeZone==="local"?v1(Di(t)):this.timeZone==="UTC"?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-this.namedTimeZoneImpl.offsetForArray(Di(t))*1e3*60):new Date(t.valueOf()-(r||0))}}class Wu{constructor(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}setIconOverride(t){let r,n;if(typeof t=="object"&&t){r=Object.assign({},this.iconClasses);for(n in t)r[n]=this.applyIconOverridePrefix(t[n]);this.iconClasses=r}else t===!1&&(this.iconClasses={})}applyIconOverridePrefix(t){let r=this.iconOverridePrefix;return r&&t.indexOf(r)!==0&&(t=r+t),t}getClass(t){return this.classes[t]||""}getIconClass(t,r){let n;return r&&this.rtlIconClasses?n=this.rtlIconClasses[t]||this.iconClasses[t]:n=this.iconClasses[t],n?`${this.baseIconClass} ${n}`:""}getCustomButtonIconClass(t){let r;return this.iconOverrideCustomButtonOption&&(r=t[this.iconOverrideCustomButtonOption],r)?`${this.baseIconClass} ${this.applyIconOverridePrefix(r)}`:""}}Wu.prototype.classes={};Wu.prototype.iconClasses={};Wu.prototype.baseIconClass="";Wu.prototype.iconOverridePrefix="";function fh(e){e();let t=Me.debounceRendering,r=[];function n(s){r.push(s)}for(Me.debounceRendering=n,pu($(f$,{}),document.createElement("div"));r.length;)r.shift()();Me.debounceRendering=t}class f$ extends wn{render(){return $("div",{})}componentDidMount(){this.setState({})}}function QD(e){let t=FV(e),r=t.Provider;return t.Provider=function(){let n=!this.getChildContext,s=r.apply(this,arguments);if(n){let i=[];this.shouldComponentUpdate=a=>{this.props.value!==a.value&&i.forEach(l=>{l.context=a.value,l.forceUpdate()})},this.sub=a=>{i.push(a);let l=a.componentWillUnmount;a.componentWillUnmount=()=>{i.splice(i.indexOf(a),1),l&&l.call(a)}}}return s},t}class h${constructor(t,r,n,s){this.execFunc=t,this.emitter=r,this.scrollTime=n,this.scrollTimeReset=s,this.handleScrollRequest=i=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},i),this.drain()},r.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const ao=QD({});function p$(e,t,r,n,s,i,a,l,c,u,d,f,h,p){return{dateEnv:s,nowManager:i,options:r,pluginHooks:l,emitter:d,dispatch:c,getCurrentData:u,calendarApi:f,viewSpec:e,viewApi:t,dateProfileGenerator:n,theme:a,isRtl:r.direction==="rtl",addResizeHandler(g){d.on("_resize",g)},removeResizeHandler(g){d.off("_resize",g)},createScrollResponder(g){return new h$(g,d,ft(r.scrollTime),r.scrollTimeReset)},registerInteractiveComponent:h,unregisterInteractiveComponent:p}}class oo extends wn{shouldComponentUpdate(t,r){return!tg(this.props,t,this.propEquality)||!tg(this.state,r,this.stateEquality)}safeSetState(t){tg(this.state,Object.assign(Object.assign({},this.state),t),this.stateEquality)||this.setState(t)}}oo.addPropsEquality=m$;oo.addStateEquality=g$;oo.contextType=ao;oo.prototype.propEquality={};oo.prototype.stateEquality={};class $t extends oo{}$t.contextType=ao;function m$(e){let t=Object.create(this.prototype.propEquality);Object.assign(t,e),this.prototype.propEquality=t}function g$(e){let t=Object.create(this.prototype.stateEquality);Object.assign(t,e),this.prototype.stateEquality=t}function Rs(e,t){typeof e=="function"?e(t):e&&(e.current=t)}class Lv extends $t{constructor(){super(...arguments),this.id=so(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=t=>{const{options:r}=this.context,{generatorName:n}=this.props;(!r.customRenderingReplaces||!my(n,r))&&this.updateElRef(t)},this.updateElRef=t=>{this.props.elRef&&Rs(this.props.elRef,t)}}render(){const{props:t,context:r}=this,{options:n}=r,{customGenerator:s,defaultGenerator:i,renderProps:a}=t,l=ZD(t,[],this.handleEl);let c=!1,u,d=[],f;if(s!=null){const h=typeof s=="function"?s(a,$):s;if(h===!0)c=!0;else{const p=h&&typeof h=="object";p&&"html"in h?l.dangerouslySetInnerHTML={__html:h.html}:p&&"domNodes"in h?d=Array.prototype.slice.call(h.domNodes):(p?wD(h):typeof h!="function")?u=h:f=h}}else c=!my(t.generatorName,n);return c&&i&&(u=i(a)),this.queuedDomNodes=d,this.currentGeneratorMeta=f,$(t.elTag,l,u)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(t){var r;const{props:n,context:s}=this,{handleCustomRendering:i,customRenderingMetaMap:a}=s.options;if(i){const l=(r=this.currentGeneratorMeta)!==null&&r!==void 0?r:a==null?void 0:a[n.generatorName];l&&i(Object.assign(Object.assign({id:this.id,isActive:t,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:l},n),{elClasses:(n.elClasses||[]).filter(y$)}))}}applyQueueudDomNodes(){const{queuedDomNodes:t,currentDomNodes:r}=this,n=this.base;if(!Zi(t,r)){r.forEach(Av);for(let s of t)n.appendChild(s);this.currentDomNodes=t}}}Lv.addPropsEquality({elClasses:Zi,elStyle:as,elAttrs:n$,renderProps:as});function my(e,t){var r;return!!(t.handleCustomRendering&&e&&(!((r=t.customRenderingMetaMap)===null||r===void 0)&&r[e]))}function ZD(e,t,r){const n=Object.assign(Object.assign({},e.elAttrs),{ref:r});return(e.elClasses||t)&&(n.className=(e.elClasses||[]).concat(t||[]).concat(n.className||[]).filter(Boolean).join(" ")),e.elStyle&&(n.style=e.elStyle),n}function y$(e){return!!e}const XD=QD(0);class ci extends wn{constructor(){super(...arguments),this.InnerContent=x$.bind(void 0,this),this.handleEl=t=>{this.el=t,this.props.elRef&&(Rs(this.props.elRef,t),t&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:t}=this,r=v$(t.classNameGenerator,t.renderProps);if(t.children){const n=ZD(t,r,this.handleEl),s=t.children(this.InnerContent,t.renderProps,n);return t.elTag?$(t.elTag,n,s):s}else return $(Lv,Object.assign(Object.assign({},t),{elRef:this.handleEl,elTag:t.elTag||"div",elClasses:(t.elClasses||[]).concat(r),renderId:this.context}))}componentDidMount(){var t,r;this.el?(r=(t=this.props).didMount)===null||r===void 0||r.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var t,r;(r=(t=this.props).willUnmount)===null||r===void 0||r.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}ci.contextType=XD;function x$(e,t){const r=e.props;return $(Lv,Object.assign({renderProps:r.renderProps,generatorName:r.generatorName,customGenerator:r.customGenerator,defaultGenerator:r.defaultGenerator,renderId:e.context},t))}function v$(e,t){const r=typeof e=="function"?e(t):e||[];return typeof r=="string"?[r]:r}class N1 extends $t{render(){let{props:t,context:r}=this,{options:n}=r,s={view:r.viewApi};return $(ci,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:[...JD(t.viewSpec),...t.elClasses||[]],elStyle:t.elStyle,renderProps:s,classNameGenerator:n.viewClassNames,generatorName:void 0,didMount:n.viewDidMount,willUnmount:n.viewWillUnmount},()=>t.children)}}function JD(e){return[`fc-${e.type}-view`,"fc-view"]}function b$(e,t){let r=null,n=null;return e.start&&(r=t.createMarker(e.start)),e.end&&(n=t.createMarker(e.end)),!r&&!n||r&&n&&n<r?null:{start:r,end:n}}function j1(e,t){let r=[],{start:n}=t,s,i;for(e.sort(w$),s=0;s<e.length;s+=1)i=e[s],i.start>n&&r.push({start:n,end:i.start}),i.end>n&&(n=i.end);return n<t.end&&r.push({start:n,end:t.end}),r}function w$(e,t){return e.start.valueOf()-t.start.valueOf()}function ul(e,t){let{start:r,end:n}=e,s=null;return t.start!==null&&(r===null?r=t.start:r=new Date(Math.max(r.valueOf(),t.start.valueOf()))),t.end!=null&&(n===null?n=t.end:n=new Date(Math.min(n.valueOf(),t.end.valueOf()))),(r===null||n===null||r<n)&&(s={start:r,end:n}),s}function k$(e,t){return(e.start===null?null:e.start.valueOf())===(t.start===null?null:t.start.valueOf())&&(e.end===null?null:e.end.valueOf())===(t.end===null?null:t.end.valueOf())}function Fv(e,t){return(e.end===null||t.start===null||e.end>t.start)&&(e.start===null||t.end===null||e.start<t.end)}function jp(e,t){return(e.start===null||t.start!==null&&t.start>=e.start)&&(e.end===null||t.end!==null&&t.end<=e.end)}function Wi(e,t){return(e.start===null||t>=e.start)&&(e.end===null||t<e.end)}function S$(e,t){return t.start!=null&&e<t.start?t.start:t.end!=null&&e>=t.end?new Date(t.end.valueOf()-1):e}function eR(e){let t=Math.floor(El(e.start,e.end))||1,r=Pt(e.start),n=ur(r,t);return{start:r,end:n}}function tR(e,t=ft(0)){let r=null,n=null;if(e.end){n=Pt(e.end);let s=e.end.valueOf()-n.valueOf();s&&s>=mu(t)&&(n=ur(n,1))}return e.start&&(r=Pt(e.start),n&&n<=r&&(n=ur(r,1))),{start:r,end:n}}function Io(e,t,r,n){return n==="year"?ft(r.diffWholeYears(e,t),"year"):n==="month"?ft(r.diffWholeMonths(e,t),"month"):R9(e,t)}class rR{constructor(t){this.props=t,this.initHiddenDays()}buildPrev(t,r,n){let{dateEnv:s}=this.props,i=s.subtract(s.startOf(r,t.currentRangeUnit),t.dateIncrement);return this.build(i,-1,n)}buildNext(t,r,n){let{dateEnv:s}=this.props,i=s.add(s.startOf(r,t.currentRangeUnit),t.dateIncrement);return this.build(i,1,n)}build(t,r,n=!0){let{props:s}=this,i,a,l,c,u,d;return i=this.buildValidRange(),i=this.trimHiddenDays(i),n&&(t=S$(t,i)),a=this.buildCurrentRangeInfo(t,r),l=/^(year|month|week|day)$/.test(a.unit),c=this.buildRenderRange(this.trimHiddenDays(a.range),a.unit,l),c=this.trimHiddenDays(c),u=c,s.showNonCurrentDates||(u=ul(u,a.range)),u=this.adjustActiveRange(u),u=ul(u,i),d=Fv(a.range,i),Wi(c,t)||(t=c.start),{currentDate:t,validRange:i,currentRange:a.range,currentRangeUnit:a.unit,isRangeAllDay:l,activeRange:u,renderRange:c,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,isValid:d,dateIncrement:this.buildDateIncrement(a.duration)}}buildValidRange(){let t=this.props.validRangeInput,r=typeof t=="function"?t.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):t;return this.refineRange(r)||{start:null,end:null}}buildCurrentRangeInfo(t,r){let{props:n}=this,s=null,i=null,a=null,l;return n.duration?(s=n.duration,i=n.durationUnit,a=this.buildRangeFromDuration(t,r,s,i)):(l=this.props.dayCount)?(i="day",a=this.buildRangeFromDayCount(t,r,l)):(a=this.buildCustomVisibleRange(t))?i=n.dateEnv.greatestWholeUnit(a.start,a.end).unit:(s=this.getFallbackDuration(),i=py(s).unit,a=this.buildRangeFromDuration(t,r,s,i)),{duration:s,unit:i,range:a}}getFallbackDuration(){return ft({day:1})}adjustActiveRange(t){let{dateEnv:r,usesMinMaxTime:n,slotMinTime:s,slotMaxTime:i}=this.props,{start:a,end:l}=t;return n&&(Vo(s)<0&&(a=Pt(a),a=r.add(a,s)),Vo(i)>1&&(l=Pt(l),l=ur(l,-1),l=r.add(l,i))),{start:a,end:l}}buildRangeFromDuration(t,r,n,s){let{dateEnv:i,dateAlignment:a}=this.props,l,c,u;if(!a){let{dateIncrement:f}=this.props;f&&mu(f)<mu(n)?a=py(f).unit:a=s}Vo(n)<=1&&this.isHiddenDay(l)&&(l=this.skipHiddenDays(l,r),l=Pt(l));function d(){l=i.startOf(t,a),c=i.add(l,n),u={start:l,end:c}}return d(),this.trimHiddenDays(u)||(t=this.skipHiddenDays(t,r),d()),u}buildRangeFromDayCount(t,r,n){let{dateEnv:s,dateAlignment:i}=this.props,a=0,l=t,c;i&&(l=s.startOf(l,i)),l=Pt(l),l=this.skipHiddenDays(l,r),c=l;do c=ur(c,1),this.isHiddenDay(c)||(a+=1);while(a<n);return{start:l,end:c}}buildCustomVisibleRange(t){let{props:r}=this,n=r.visibleRangeInput,s=typeof n=="function"?n.call(r.calendarApi,r.dateEnv.toDate(t)):n,i=this.refineRange(s);return i&&(i.start==null||i.end==null)?null:i}buildRenderRange(t,r,n){return t}buildDateIncrement(t){let{dateIncrement:r}=this.props,n;return r||((n=this.props.dateAlignment)?ft(1,n):t||ft({days:1}))}refineRange(t){if(t){let r=b$(t,this.props.dateEnv);return r&&(r=tR(r)),r}return null}initHiddenDays(){let t=this.props.hiddenDays||[],r=[],n=0,s;for(this.props.weekends===!1&&t.push(0,6),s=0;s<7;s+=1)(r[s]=t.indexOf(s)!==-1)||(n+=1);if(!n)throw new Error("invalid hiddenDays");this.isHiddenDayHash=r}trimHiddenDays(t){let{start:r,end:n}=t;return r&&(r=this.skipHiddenDays(r)),n&&(n=this.skipHiddenDays(n,-1,!0)),r==null||n==null||r<n?{start:r,end:n}:null}isHiddenDay(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]}skipHiddenDays(t,r=1,n=!1){for(;this.isHiddenDayHash[(t.getUTCDay()+(n?r:0)+7)%7];)t=ur(t,r);return t}}function Bv(e,t,r,n){return{instanceId:so(),defId:e,range:t,forcedStartTzo:r??null,forcedEndTzo:n??null}}function E$(e,t,r,n){for(let s=0;s<n.length;s+=1){let i=n[s].parse(e,r);if(i){let{allDay:a}=e;return a==null&&(a=t,a==null&&(a=i.allDayGuess,a==null&&(a=!1))),{allDay:a,duration:i.duration,typeData:i.typeData,typeId:s}}}return null}function Ka(e,t,r){let{dateEnv:n,pluginHooks:s,options:i}=r,{defs:a,instances:l}=e;l=qa(l,c=>!a[c.defId].recurringDef);for(let c in a){let u=a[c];if(u.recurringDef){let{duration:d}=u.recurringDef;d||(d=u.allDay?i.defaultAllDayEventDuration:i.defaultTimedEventDuration);let f=N$(u,d,t,n,s.recurringTypes);for(let h of f){let p=Bv(c,{start:h,end:n.add(h,d)});l[p.instanceId]=p}}}return{defs:a,instances:l}}function N$(e,t,r,n,s){let a=s[e.recurringDef.typeId].expand(e.recurringDef.typeData,{start:n.subtract(r.start,t),end:r.end},n);return e.allDay&&(a=a.map(Pt)),a}const cf={id:String,groupId:String,title:String,url:String,interactive:Boolean},nR={start:H,end:H,date:H,allDay:Boolean},j$=Object.assign(Object.assign(Object.assign({},cf),nR),{extendedProps:H});function sR(e,t,r,n,s=zv(r),i,a){let{refined:l,extra:c}=iR(e,r,s),u=T$(t,r),d=E$(l,u,r.dateEnv,r.pluginHooks.recurringTypes);if(d){let h=gy(l,c,t?t.sourceId:"",d.allDay,!!d.duration,r,i);return h.recurringDef={typeId:d.typeId,typeData:d.typeData,duration:d.duration},{def:h,instance:null}}let f=C$(l,u,r,n);if(f){let h=gy(l,c,t?t.sourceId:"",f.allDay,f.hasEnd,r,i),p=Bv(h.defId,f.range,f.forcedStartTzo,f.forcedEndTzo);return a&&h.publicId&&a[h.publicId]&&(p.instanceId=a[h.publicId]),{def:h,instance:p}}return null}function iR(e,t,r=zv(t)){return Mv(e,r)}function zv(e){return Object.assign(Object.assign(Object.assign({},hh),j$),e.pluginHooks.eventRefiners)}function gy(e,t,r,n,s,i,a){let l={title:e.title||"",groupId:e.groupId||"",publicId:e.id||"",url:e.url||"",recurringDef:null,defId:(a&&e.id?a[e.id]:"")||so(),sourceId:r,allDay:n,hasEnd:s,interactive:e.interactive,ui:ph(e,i),extendedProps:Object.assign(Object.assign({},e.extendedProps||{}),t)};for(let c of i.pluginHooks.eventDefMemberAdders)Object.assign(l,c(e));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function C$(e,t,r,n){let{allDay:s}=e,i,a=null,l=!1,c,u=null,d=e.start!=null?e.start:e.date;if(i=r.dateEnv.createMarkerMeta(d),i)a=i.marker;else if(!n)return null;return e.end!=null&&(c=r.dateEnv.createMarkerMeta(e.end)),s==null&&(t!=null?s=t:s=(!i||i.isTimeUnspecified)&&(!c||c.isTimeUnspecified)),s&&a&&(a=Pt(a)),c&&(u=c.marker,s&&(u=Pt(u)),a&&u<=a&&(u=null)),u?l=!0:n||(l=r.options.forceEventDuration||!1,u=r.dateEnv.add(a,s?r.options.defaultAllDayEventDuration:r.options.defaultTimedEventDuration)),{allDay:s,hasEnd:l,range:{start:a,end:u},forcedStartTzo:i?i.forcedTzo:null,forcedEndTzo:c?c.forcedTzo:null}}function T$(e,t){let r=null;return e&&(r=e.defaultAllDay),r==null&&(r=t.options.defaultAllDay),r}function gu(e,t,r,n,s,i){let a=ns(),l=zv(r);for(let c of e){let u=sR(c,t,r,n,l,s,i);u&&yy(u,a)}return a}function yy(e,t=ns()){return t.defs[e.def.defId]=e.def,e.instance&&(t.instances[e.instance.instanceId]=e.instance),t}function Uv(e,t){let r=e.instances[t];if(r){let n=e.defs[r.defId],s=Cp(e,i=>A$(n,i));return s.defs[n.defId]=n,s.instances[r.instanceId]=r,s}return ns()}function A$(e,t){return!!(e.groupId&&e.groupId===t.groupId)}function ns(){return{defs:{},instances:{}}}function Hv(e,t){return{defs:Object.assign(Object.assign({},e.defs),t.defs),instances:Object.assign(Object.assign({},e.instances),t.instances)}}function Cp(e,t){let r=qa(e.defs,t),n=qa(e.instances,s=>r[s.defId]);return{defs:r,instances:n}}function D$(e,t){let{defs:r,instances:n}=e,s={},i={};for(let a in r)t.defs[a]||(s[a]=r[a]);for(let a in n)!t.instances[a]&&s[n[a].defId]&&(i[a]=n[a]);return{defs:s,instances:i}}function R$(e,t){return Array.isArray(e)?gu(e,null,t,!0):typeof e=="object"&&e?gu([e],null,t,!0):e!=null?String(e):null}function C1(e){return Array.isArray(e)?e:typeof e=="string"?e.split(/\s+/):[]}const hh={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:H,overlap:H,allow:H,className:C1,classNames:C1,color:String,backgroundColor:String,borderColor:String,textColor:String},_$={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function ph(e,t){let r=R$(e.constraint,t);return{display:e.display||null,startEditable:e.startEditable!=null?e.startEditable:e.editable,durationEditable:e.durationEditable!=null?e.durationEditable:e.editable,constraints:r!=null?[r]:[],overlap:e.overlap!=null?e.overlap:null,allows:e.allow!=null?[e.allow]:[],backgroundColor:e.backgroundColor||e.color||"",borderColor:e.borderColor||e.color||"",textColor:e.textColor||"",classNames:(e.className||[]).concat(e.classNames||[])}}function I$(e){return e.reduce(M$,_$)}function M$(e,t){return{display:t.display!=null?t.display:e.display,startEditable:t.startEditable!=null?t.startEditable:e.startEditable,durationEditable:t.durationEditable!=null?t.durationEditable:e.durationEditable,constraints:e.constraints.concat(t.constraints),overlap:typeof t.overlap=="boolean"?t.overlap:e.overlap,allows:e.allows.concat(t.allows),backgroundColor:t.backgroundColor||e.backgroundColor,borderColor:t.borderColor||e.borderColor,textColor:t.textColor||e.textColor,classNames:e.classNames.concat(t.classNames)}}const O$={id:String,defaultAllDay:Boolean,url:String,format:String,events:H,eventDataTransform:H,success:H,failure:H};function aR(e,t,r=oR(t)){let n;if(typeof e=="string"?n={url:e}:typeof e=="function"||Array.isArray(e)?n={events:e}:typeof e=="object"&&e&&(n=e),n){let{refined:s,extra:i}=Mv(n,r),a=P$(s,t);if(a)return{_raw:e,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:s.defaultAllDay,eventDataTransform:s.eventDataTransform,success:s.success,failure:s.failure,publicId:s.id||"",sourceId:so(),sourceDefId:a.sourceDefId,meta:a.meta,ui:ph(s,t),extendedProps:i}}return null}function oR(e){return Object.assign(Object.assign(Object.assign({},hh),O$),e.pluginHooks.eventSourceRefiners)}function P$(e,t){let r=t.pluginHooks.eventSourceDefs;for(let n=r.length-1;n>=0;n-=1){let i=r[n].parseMeta(e);if(i)return{sourceDefId:n,meta:i}}return null}function L$(e,t,r,n,s){switch(t.type){case"RECEIVE_EVENTS":return F$(e,r[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,s);case"RESET_RAW_EVENTS":return B$(e,r[t.sourceId],t.rawEvents,n.activeRange,s);case"ADD_EVENTS":return z$(e,t.eventStore,n?n.activeRange:null,s);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return Hv(e,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?Ka(e,n.activeRange,s):e;case"REMOVE_EVENTS":return D$(e,t.eventStore);case"REMOVE_EVENT_SOURCE":return cR(e,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Cp(e,i=>!i.sourceId);case"REMOVE_ALL_EVENTS":return ns();default:return e}}function F$(e,t,r,n,s,i){if(t&&r===t.latestFetchId){let a=gu(lR(s,t,i),t,i);return n&&(a=Ka(a,n,i)),Hv(cR(e,t.sourceId),a)}return e}function B$(e,t,r,n,s){const{defIdMap:i,instanceIdMap:a}=H$(e);let l=gu(lR(r,t,s),t,s,!1,i,a);return Ka(l,n,s)}function lR(e,t,r){let n=r.options.eventDataTransform,s=t?t.eventDataTransform:null;return s&&(e=T1(e,s)),n&&(e=T1(e,n)),e}function T1(e,t){let r;if(!t)r=e;else{r=[];for(let n of e){let s=t(n);s?r.push(s):s==null&&r.push(n)}}return r}function z$(e,t,r,n){return r&&(t=Ka(t,r,n)),Hv(e,t)}function A1(e,t,r){let{defs:n}=e,s=io(e.instances,i=>n[i.defId].allDay?i:Object.assign(Object.assign({},i),{range:{start:r.createMarker(t.toDate(i.range.start,i.forcedStartTzo)),end:r.createMarker(t.toDate(i.range.end,i.forcedEndTzo))},forcedStartTzo:r.canComputeOffset?null:i.forcedStartTzo,forcedEndTzo:r.canComputeOffset?null:i.forcedEndTzo}));return{defs:n,instances:s}}function cR(e,t){return Cp(e,r=>r.sourceId!==t)}function U$(e,t){return{defs:e.defs,instances:qa(e.instances,r=>!t[r.instanceId])}}function H$(e){const{defs:t,instances:r}=e,n={},s={};for(let i in t){const a=t[i],{publicId:l}=a;l&&(n[l]=i)}for(let i in r){const a=r[i],l=t[a.defId],{publicId:c}=l;c&&(s[c]=i)}return{defIdMap:n,instanceIdMap:s}}class Tp{constructor(){this.handlers={},this.thisContext=null}setThisContext(t){this.thisContext=t}setOptions(t){this.options=t}on(t,r){V$(this.handlers,t,r)}off(t,r){$$(this.handlers,t,r)}trigger(t,...r){let n=this.handlers[t]||[],s=this.options&&this.options[t],i=[].concat(s||[],n);for(let a of i)a.apply(this.thisContext,r)}hasHandlers(t){return!!(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])}}function V$(e,t,r){(e[t]||(e[t]=[])).push(r)}function $$(e,t,r){r?e[t]&&(e[t]=e[t].filter(n=>n!==r)):delete e[t]}const W$={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function Y$(e,t){return gu(G$(e),null,t)}function G$(e){let t;return e===!0?t=[{}]:Array.isArray(e)?t=e.filter(r=>r.daysOfWeek):typeof e=="object"&&e?t=[e]:t=[],t=t.map(r=>Object.assign(Object.assign({},W$),r)),t}function uR(e,t,r){r.emitter.trigger("select",Object.assign(Object.assign({},Vv(e,r)),{jsEvent:t?t.origEvent:null,view:r.viewApi||r.calendarApi.view}))}function q$(e,t){t.emitter.trigger("unselect",{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view})}function Vv(e,t){let r={};for(let n of t.pluginHooks.dateSpanTransforms)Object.assign(r,n(e,t));return Object.assign(r,cW(e,t.dateEnv)),r}function D1(e,t,r){let{dateEnv:n,options:s}=r,i=t;return e?(i=Pt(i),i=n.add(i,s.defaultAllDayEventDuration)):i=n.add(i,s.defaultTimedEventDuration),i}function $v(e,t,r,n){let s=mh(e.defs,t),i=ns();for(let a in e.defs){let l=e.defs[a];i.defs[a]=K$(l,s[a],r,n)}for(let a in e.instances){let l=e.instances[a],c=i.defs[l.defId];i.instances[a]=Q$(l,c,s[l.defId],r,n)}return i}function K$(e,t,r,n){let s=r.standardProps||{};s.hasEnd==null&&t.durationEditable&&(r.startDelta||r.endDelta)&&(s.hasEnd=!0);let i=Object.assign(Object.assign(Object.assign({},e),s),{ui:Object.assign(Object.assign({},e.ui),s.ui)});r.extendedProps&&(i.extendedProps=Object.assign(Object.assign({},i.extendedProps),r.extendedProps));for(let a of n.pluginHooks.eventDefMutationAppliers)a(i,r,n);return!i.hasEnd&&n.options.forceEventDuration&&(i.hasEnd=!0),i}function Q$(e,t,r,n,s){let{dateEnv:i}=s,a=n.standardProps&&n.standardProps.allDay===!0,l=n.standardProps&&n.standardProps.hasEnd===!1,c=Object.assign({},e);return a&&(c.range=eR(c.range)),n.datesDelta&&r.startEditable&&(c.range={start:i.add(c.range.start,n.datesDelta),end:i.add(c.range.end,n.datesDelta)}),n.startDelta&&r.durationEditable&&(c.range={start:i.add(c.range.start,n.startDelta),end:c.range.end}),n.endDelta&&r.durationEditable&&(c.range={start:c.range.start,end:i.add(c.range.end,n.endDelta)}),l&&(c.range={start:c.range.start,end:D1(t.allDay,c.range.start,s)}),t.allDay&&(c.range={start:Pt(c.range.start),end:Pt(c.range.end)}),c.range.end<c.range.start&&(c.range.end=D1(t.allDay,c.range.start,s)),c}class mo{constructor(t,r){this.context=t,this.internalEventSource=r}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Lt{constructor(t,r,n){this._context=t,this._def=r,this._instance=n||null}setProp(t,r){if(t in nR)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(t==="id")r=cf[t](r),this.mutate({standardProps:{publicId:r}});else if(t in cf)r=cf[t](r),this.mutate({standardProps:{[t]:r}});else if(t in hh){let n=hh[t](r);t==="color"?n={backgroundColor:r,borderColor:r}:t==="editable"?n={startEditable:r,durationEditable:r}:n={[t]:r},this.mutate({standardProps:{ui:n}})}else console.warn(`Could not set prop '${t}'. Use setExtendedProp instead.`)}setExtendedProp(t,r){this.mutate({extendedProps:{[t]:r}})}setStart(t,r={}){let{dateEnv:n}=this._context,s=n.createMarker(t);if(s&&this._instance){let i=this._instance.range,a=Io(i.start,s,n,r.granularity);r.maintainDuration?this.mutate({datesDelta:a}):this.mutate({startDelta:a})}}setEnd(t,r={}){let{dateEnv:n}=this._context,s;if(!(t!=null&&(s=n.createMarker(t),!s))&&this._instance)if(s){let i=Io(this._instance.range.end,s,n,r.granularity);this.mutate({endDelta:i})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(t,r,n={}){let{dateEnv:s}=this._context,i={allDay:n.allDay},a=s.createMarker(t),l;if(a&&!(r!=null&&(l=s.createMarker(r),!l))&&this._instance){let c=this._instance.range;n.allDay===!0&&(c=eR(c));let u=Io(c.start,a,s,n.granularity);if(l){let d=Io(c.end,l,s,n.granularity);k9(u,d)?this.mutate({datesDelta:u,standardProps:i}):this.mutate({startDelta:u,endDelta:d,standardProps:i})}else i.hasEnd=!1,this.mutate({datesDelta:u,standardProps:i})}}moveStart(t){let r=ft(t);r&&this.mutate({startDelta:r})}moveEnd(t){let r=ft(t);r&&this.mutate({endDelta:r})}moveDates(t){let r=ft(t);r&&this.mutate({datesDelta:r})}setAllDay(t,r={}){let n={allDay:t},{maintainDuration:s}=r;s==null&&(s=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(n.hasEnd=s),this.mutate({standardProps:n})}formatRange(t){let{dateEnv:r}=this._context,n=this._instance,s=gr(t);return this._def.hasEnd?r.formatRange(n.range.start,n.range.end,s,{forcedStartTzo:n.forcedStartTzo,forcedEndTzo:n.forcedEndTzo}):r.format(n.range.start,s,{forcedTzo:n.forcedStartTzo})}mutate(t){let r=this._instance;if(r){let n=this._def,s=this._context,{eventStore:i}=s.getCurrentData(),a=Uv(i,r.instanceId);a=$v(a,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},t,s);let c=new Lt(s,n,r);this._def=a.defs[n.defId],this._instance=a.instances[r.instanceId],s.dispatch({type:"MERGE_EVENTS",eventStore:a}),s.emitter.trigger("eventChange",{oldEvent:c,event:this,relatedEvents:Fa(a,s,r),revert(){s.dispatch({type:"RESET_EVENTS",eventStore:i})}})}}remove(){let t=this._context,r=dR(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:r}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:r})}})}get source(){let{sourceId:t}=this._def;return t?new mo(this._context,this._context.getCurrentData().eventSources[t]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""}get endStr(){let t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(t={}){let r=this._def,{ui:n}=r,{startStr:s,endStr:i}=this,a={allDay:r.allDay};return r.title&&(a.title=r.title),s&&(a.start=s),i&&(a.end=i),r.publicId&&(a.id=r.publicId),r.groupId&&(a.groupId=r.groupId),r.url&&(a.url=r.url),n.display&&n.display!=="auto"&&(a.display=n.display),t.collapseColor&&n.backgroundColor&&n.backgroundColor===n.borderColor?a.color=n.backgroundColor:(n.backgroundColor&&(a.backgroundColor=n.backgroundColor),n.borderColor&&(a.borderColor=n.borderColor)),n.textColor&&(a.textColor=n.textColor),n.classNames.length&&(a.classNames=n.classNames),Object.keys(r.extendedProps).length&&(t.collapseExtendedProps?Object.assign(a,r.extendedProps):a.extendedProps=r.extendedProps),a}toJSON(){return this.toPlainObject()}}function dR(e){let t=e._def,r=e._instance;return{defs:{[t.defId]:t},instances:r?{[r.instanceId]:r}:{}}}function Fa(e,t,r){let{defs:n,instances:s}=e,i=[],a=r?r.instanceId:"";for(let l in s){let c=s[l],u=n[c.defId];c.instanceId!==a&&i.push(new Lt(t,u,c))}return i}function R1(e,t,r,n){let s={},i={},a={},l=[],c=[],u=mh(e.defs,t);for(let d in e.defs){let f=e.defs[d];u[f.defId].display==="inverse-background"&&(f.groupId?(s[f.groupId]=[],a[f.groupId]||(a[f.groupId]=f)):i[d]=[])}for(let d in e.instances){let f=e.instances[d],h=e.defs[f.defId],p=u[h.defId],g=f.range,y=!h.allDay&&n?tR(g,n):g,b=ul(y,r);b&&(p.display==="inverse-background"?h.groupId?s[h.groupId].push(b):i[f.defId].push(b):p.display!=="none"&&(p.display==="background"?l:c).push({def:h,ui:p,instance:f,range:b,isStart:y.start&&y.start.valueOf()===b.start.valueOf(),isEnd:y.end&&y.end.valueOf()===b.end.valueOf()}))}for(let d in s){let f=s[d],h=j1(f,r);for(let p of h){let g=a[d],y=u[g.defId];l.push({def:g,ui:y,instance:null,range:p,isStart:!1,isEnd:!1})}}for(let d in i){let f=i[d],h=j1(f,r);for(let p of h)l.push({def:e.defs[d],ui:u[d],instance:null,range:p,isStart:!1,isEnd:!1})}return{bg:l,fg:c}}function _1(e,t){e.fcSeg=t}function dl(e){return e.fcSeg||e.parentNode.fcSeg||null}function mh(e,t){return io(e,r=>fR(r,t))}function fR(e,t){let r=[];return t[""]&&r.push(t[""]),t[e.defId]&&r.push(t[e.defId]),r.push(e.ui),I$(r)}function Z$(e,t){let r=e.map(X$);return r.sort((n,s)=>m9(n,s,t)),r.map(n=>n._seg)}function X$(e){let{eventRange:t}=e,r=t.def,n=t.instance?t.instance.range:t.range,s=n.start?n.start.valueOf():0,i=n.end?n.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},r.extendedProps),r),{id:r.publicId,start:s,end:i,duration:i-s,allDay:Number(r.allDay),_seg:e})}function J$(e,t){let{pluginHooks:r}=t,n=r.isDraggableTransformers,{def:s,ui:i}=e.eventRange,a=i.startEditable;for(let l of n)a=l(a,s,i,t);return a}function eW(e,t){return e.isStart&&e.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function tW(e,t){return e.isEnd&&e.eventRange.ui.durationEditable}function hR(e,t,r,n,s,i,a){let{dateEnv:l,options:c}=r,{displayEventTime:u,displayEventEnd:d}=c,f=e.eventRange.def,h=e.eventRange.instance;u==null&&(u=n!==!1),d==null&&(d=s!==!1);let p=h.range.start,g=h.range.end,y=e.start||e.eventRange.range.start,b=e.end||e.eventRange.range.end,v=Pt(p).valueOf()===Pt(y).valueOf(),x=Pt(Xi(g,-1)).valueOf()===Pt(Xi(b,-1)).valueOf();return u&&!f.allDay&&(v||x)?(y=v?p:y,b=x?g:b,d&&f.hasEnd?l.formatRange(y,b,t,{forcedStartTzo:h.forcedStartTzo,forcedEndTzo:h.forcedEndTzo}):l.format(y,t,{forcedTzo:h.forcedStartTzo})):""}function Rc(e,t,r){let n=e.eventRange.range;return{isPast:n.end<=t.start,isFuture:n.start>=t.end,isToday:t&&Wi(t,n.start)}}function rW(e){let t=["fc-event"];return e.isMirror&&t.push("fc-event-mirror"),e.isDraggable&&t.push("fc-event-draggable"),(e.isStartResizable||e.isEndResizable)&&t.push("fc-event-resizable"),e.isDragging&&t.push("fc-event-dragging"),e.isResizing&&t.push("fc-event-resizing"),e.isSelected&&t.push("fc-event-selected"),e.isStart&&t.push("fc-event-start"),e.isEnd&&t.push("fc-event-end"),e.isPast&&t.push("fc-event-past"),e.isToday&&t.push("fc-event-today"),e.isFuture&&t.push("fc-event-future"),t}function nW(e){return e.instance?e.instance.instanceId:`${e.def.defId}:${e.range.start.toISOString()}`}function pR(e,t){let{def:r,instance:n}=e.eventRange,{url:s}=r;if(s)return{href:s};let{emitter:i,options:a}=t,{eventInteractive:l}=a;return l==null&&(l=r.interactive,l==null&&(l=!!i.hasHandlers("eventClick"))),l?YD(c=>{i.trigger("eventClick",{el:c.target,event:new Lt(t,r,n),jsEvent:c,view:t.viewApi})}):{}}const sW={start:H,end:H,allDay:Boolean};function iW(e,t,r){let n=aW(e,t),{range:s}=n;if(!s.start)return null;if(!s.end){if(r==null)return null;s.end=t.add(s.start,r)}return n}function aW(e,t){let{refined:r,extra:n}=Mv(e,sW),s=r.start?t.createMarkerMeta(r.start):null,i=r.end?t.createMarkerMeta(r.end):null,{allDay:a}=r;return a==null&&(a=s&&s.isTimeUnspecified&&(!i||i.isTimeUnspecified)),Object.assign({range:{start:s?s.marker:null,end:i?i.marker:null},allDay:a},n)}function oW(e,t){return k$(e.range,t.range)&&e.allDay===t.allDay&&lW(e,t)}function lW(e,t){for(let r in t)if(r!=="range"&&r!=="allDay"&&e[r]!==t[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}function cW(e,t){return Object.assign(Object.assign({},gR(e.range,t,e.allDay)),{allDay:e.allDay})}function mR(e,t,r){return Object.assign(Object.assign({},gR(e,t,r)),{timeZone:t.timeZone})}function gR(e,t,r){return{start:t.toDate(e.start),end:t.toDate(e.end),startStr:t.formatIso(e.start,{omitTime:r}),endStr:t.formatIso(e.end,{omitTime:r})}}function uW(e,t,r){let n=iR({editable:!1},r),s=gy(n.refined,n.extra,"",e.allDay,!0,r);return{def:s,ui:fR(s,t),instance:Bv(s.defId,e.range),range:e.range,isStart:!0,isEnd:!0}}function dW(e,t,r){let n=!1,s=function(l){n||(n=!0,t(l))},i=function(l){n||(n=!0,r(l))},a=e(s,i);a&&typeof a.then=="function"&&a.then(s,i)}class I1 extends Error{constructor(t,r){super(t),this.response=r}}function fW(e,t,r){e=e.toUpperCase();const n={method:e};return e==="GET"?t+=(t.indexOf("?")===-1?"?":"&")+new URLSearchParams(r):(n.body=new URLSearchParams(r),n.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(t,n).then(s=>{if(s.ok)return s.json().then(i=>[i,s],()=>{throw new I1("Failure parsing JSON",s)});throw new I1("Request failed",s)})}let rg;function yR(){return rg==null&&(rg=hW()),rg}function hW(){if(typeof document>"u")return!0;let e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML="<table><tr><td><div></div></td></tr></table>",e.querySelector("table").style.height="100px",e.querySelector("div").style.height="100%",document.body.appendChild(e);let r=e.querySelector("div").offsetHeight>0;return document.body.removeChild(e),r}class pW extends $t{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{fh(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{fh(()=>{this.setState({forPrint:!1})})}}render(){let{props:t}=this,{options:r}=t,{forPrint:n}=this.state,s=n||r.height==="auto"||r.contentHeight==="auto",i=!s&&r.height!=null?r.height:"",a=["fc",n?"fc-media-print":"fc-media-screen",`fc-direction-${r.direction}`,t.theme.getClass("root")];return yR()||a.push("fc-liquid-hack"),t.children(a,i,s,n)}componentDidMount(){let{emitter:t}=this.props;t.on("_beforeprint",this.handleBeforePrint),t.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:t}=this.props;t.off("_beforeprint",this.handleBeforePrint),t.off("_afterprint",this.handleAfterPrint)}}class Nl{constructor(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}destroy(){}}function mW(e,t){return{component:e,el:t.el,useEventCenter:t.useEventCenter!=null?t.useEventCenter:!0,isHitComboAllowed:t.isHitComboAllowed||null}}function Wv(e){return{[e.component.uid]:e}}const xy={};class Ap extends wn{constructor(t,r){super(t,r),this.handleRefresh=()=>{let n=this.computeTiming();n.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(n.state),this.clearTimeout(),this.setTimeout(n.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:t,state:r}=this;return t.children(r.nowDate,r.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(t){t.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:t,context:r}=this,n=r.nowManager.getDateMarker(),{nowIndicatorSnap:s}=r.options;s==="auto"&&(s=/year|month|week|day/.test(t.unit)||(t.unitValue||1)===1);let i,a;return s?(i=r.dateEnv.startOf(n,t.unit),a=r.dateEnv.add(i,ft(1,t.unit)).valueOf()-n.valueOf()):(i=n,a=1e3*60),a=Math.min(1e3*60*60*24,a),{state:{nowDate:i,todayRange:gW(i)},waitMs:a}}setTimeout(t=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const r=this.computeTiming();this.setState(r.state,()=>{this.setTimeout(r.waitMs)})},t)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Ap.contextType=ao;function gW(e){let t=Pt(e),r=ur(t,1);return{start:t,end:r}}class yW{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(t){this.currentDataManager.dispatch(t)}get view(){return this.getCurrentData().viewApi}batchRendering(t){t()}updateSize(){this.trigger("_resize",!0)}setOption(t,r){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:r})}getOption(t){return this.currentDataManager.currentCalendarOptionsInput[t]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(t,r){let{currentDataManager:n}=this;n.currentCalendarOptionsRefiners[t]?n.emitter.on(t,r):console.warn(`Unknown listener name '${t}'`)}off(t,r){this.currentDataManager.emitter.off(t,r)}trigger(t,...r){this.currentDataManager.emitter.trigger(t,...r)}changeView(t,r){this.batchRendering(()=>{if(this.unselect(),r)if(r.start&&r.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:r});else{let{dateEnv:n}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:n.createMarker(r)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})}zoomTo(t,r){let n=this.getCurrentData(),s;r=r||"day",s=n.viewSpecs[r]||this.getUnitViewSpec(r),this.unselect(),s?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:s.type,dateMarker:t}):this.dispatch({type:"CHANGE_DATE",dateMarker:t})}getUnitViewSpec(t){let{viewSpecs:r,toolbarConfig:n}=this.getCurrentData(),s=[].concat(n.header?n.header.viewsWithButtons:[],n.footer?n.footer.viewsWithButtons:[]),i,a;for(let l in r)s.push(l);for(i=0;i<s.length;i+=1)if(a=r[s[i]],a&&a.singleUnit===t)return a;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})}nextYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})}today(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.nowManager.getDateMarker()})}gotoDate(t){let r=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:r.dateEnv.createMarker(t)})}incrementDate(t){let r=this.getCurrentData(),n=ft(t);n&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:r.dateEnv.add(r.currentDate,n)}))}getDate(){let t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)}formatDate(t,r){let{dateEnv:n}=this.getCurrentData();return n.format(n.createMarker(t),gr(r))}formatRange(t,r,n){let{dateEnv:s}=this.getCurrentData();return s.formatRange(s.createMarker(t),s.createMarker(r),gr(n),n)}formatIso(t,r){let{dateEnv:n}=this.getCurrentData();return n.formatIso(n.createMarker(t),{omitTime:r})}select(t,r){let n;r==null?t.start!=null?n=t:n={start:t,end:null}:n={start:t,end:r};let s=this.getCurrentData(),i=iW(n,s.dateEnv,ft({days:1}));i&&(this.dispatch({type:"SELECT_DATES",selection:i}),uR(i,null,s))}unselect(t){let r=this.getCurrentData();r.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),q$(t,r))}addEvent(t,r){if(t instanceof Lt){let a=t._def,l=t._instance;return this.getCurrentData().eventStore.defs[a.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:yy({def:a,instance:l})}),this.triggerEventAdd(t)),t}let n=this.getCurrentData(),s;if(r instanceof mo)s=r.internalEventSource;else if(typeof r=="boolean")r&&([s]=Pv(n.eventSources));else if(r!=null){let a=this.getEventSourceById(r);if(!a)return console.warn(`Could not find an event source with ID "${r}"`),null;s=a.internalEventSource}let i=sR(t,s,n,!1);if(i){let a=new Lt(n,i.def,i.def.recurringDef?null:i.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:yy(i)}),this.triggerEventAdd(a),a}return null}triggerEventAdd(t){let{emitter:r}=this.getCurrentData();r.trigger("eventAdd",{event:t,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:dR(t)})}})}getEventById(t){let r=this.getCurrentData(),{defs:n,instances:s}=r.eventStore;t=String(t);for(let i in n){let a=n[i];if(a.publicId===t){if(a.recurringDef)return new Lt(r,a,null);for(let l in s){let c=s[l];if(c.defId===a.defId)return new Lt(r,a,c)}}}return null}getEvents(){let t=this.getCurrentData();return Fa(t.eventStore,t)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let t=this.getCurrentData(),r=t.eventSources,n=[];for(let s in r)n.push(new mo(t,r[s]));return n}getEventSourceById(t){let r=this.getCurrentData(),n=r.eventSources;t=String(t);for(let s in n)if(n[s].publicId===t)return new mo(r,n[s]);return null}addEventSource(t){let r=this.getCurrentData();if(t instanceof mo)return r.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;let n=aR(t,r);return n?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[n]}),new mo(r,n)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(t){let r=ft(t);r&&this.trigger("_scrollRequest",{time:r})}}function xW(e,t){return e.left>=t.left&&e.left<t.right&&e.top>=t.top&&e.top<t.bottom}function xR(e,t){let r={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return r.left<r.right&&r.top<r.bottom?r:!1}function vW(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function bW(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function wW(e,t){return{left:e.left-t.left,top:e.top-t.top}}function vR(e,t,r,n){return{dow:e.getUTCDay(),isDisabled:!!(n&&(!n.activeRange||!Wi(n.activeRange,e))),isOther:!!(n&&!Wi(n.currentRange,e)),isToday:!!(t&&Wi(t,e)),isPast:!!(t&&e<t.start),isFuture:!!(t&&e>=t.end)}}function Yv(e,t){let r=["fc-day",`fc-day-${j9[e.dow]}`];return e.isDisabled?r.push("fc-day-disabled"):(e.isToday&&(r.push("fc-day-today"),r.push(t.getClass("today"))),e.isPast&&r.push("fc-day-past"),e.isFuture&&r.push("fc-day-future"),e.isOther&&r.push("fc-day-other")),r}const kW=gr({year:"numeric",month:"long",day:"numeric"}),SW=gr({week:"long"});function vy(e,t,r="day",n=!0){const{dateEnv:s,options:i,calendarApi:a}=e;let l=s.format(t,r==="week"?SW:kW);if(i.navLinks){let c=s.toDate(t);const u=d=>{let f=r==="day"?i.navLinkDayClick:r==="week"?i.navLinkWeekClick:null;typeof f=="function"?f.call(a,s.toDate(t),d):(typeof f=="string"&&(r=f),a.zoomTo(t,r))};return Object.assign({title:Ac(i.navLinkHint,[l,c],l),"data-navlink":""},n?WD(u):{onClick:u})}return{"aria-label":l}}let ng=null;function EW(){return ng===null&&(ng=NW()),ng}function NW(){let e=document.createElement("div");Tc(e,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),e.innerHTML="<div></div>",document.body.appendChild(e);let r=e.firstChild.getBoundingClientRect().left>e.getBoundingClientRect().left;return Av(e),r}let sg;function jW(){return sg||(sg=CW()),sg}function CW(){let e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e);let t=bR(e);return document.body.removeChild(e),t}function bR(e){return{x:e.offsetHeight-e.clientHeight,y:e.offsetWidth-e.clientWidth}}function TW(e,t=!1){let r=window.getComputedStyle(e),n=parseInt(r.borderLeftWidth,10)||0,s=parseInt(r.borderRightWidth,10)||0,i=parseInt(r.borderTopWidth,10)||0,a=parseInt(r.borderBottomWidth,10)||0,l=bR(e),c=l.y-n-s,u=l.x-i-a,d={borderLeft:n,borderRight:s,borderTop:i,borderBottom:a,scrollbarBottom:u,scrollbarLeft:0,scrollbarRight:0};return EW()&&r.direction==="rtl"?d.scrollbarLeft=c:d.scrollbarRight=c,t&&(d.paddingLeft=parseInt(r.paddingLeft,10)||0,d.paddingRight=parseInt(r.paddingRight,10)||0,d.paddingTop=parseInt(r.paddingTop,10)||0,d.paddingBottom=parseInt(r.paddingBottom,10)||0),d}function AW(e,t=!1,r){let n=Gv(e),s=TW(e,t),i={left:n.left+s.borderLeft+s.scrollbarLeft,right:n.right-s.borderRight-s.scrollbarRight,top:n.top+s.borderTop,bottom:n.bottom-s.borderBottom-s.scrollbarBottom};return t&&(i.left+=s.paddingLeft,i.right-=s.paddingRight,i.top+=s.paddingTop,i.bottom-=s.paddingBottom),i}function Gv(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY,right:t.right+window.scrollX,bottom:t.bottom+window.scrollY}}function DW(e){let t=wR(e),r=e.getBoundingClientRect();for(let n of t){let s=xR(r,n.getBoundingClientRect());if(s)r=s;else return null}return r}function wR(e){let t=[];for(;e instanceof HTMLElement;){let r=window.getComputedStyle(e);if(r.position==="fixed")break;/(auto|scroll)/.test(r.overflow+r.overflowY+r.overflowX)&&t.push(e),e=e.parentNode}return t}class gh{constructor(t,r,n,s){this.els=r;let i=this.originClientRect=t.getBoundingClientRect();n&&this.buildElHorizontals(i.left),s&&this.buildElVerticals(i.top)}buildElHorizontals(t){let r=[],n=[];for(let s of this.els){let i=s.getBoundingClientRect();r.push(i.left-t),n.push(i.right-t)}this.lefts=r,this.rights=n}buildElVerticals(t){let r=[],n=[];for(let s of this.els){let i=s.getBoundingClientRect();r.push(i.top-t),n.push(i.bottom-t)}this.tops=r,this.bottoms=n}leftToIndex(t){let{lefts:r,rights:n}=this,s=r.length,i;for(i=0;i<s;i+=1)if(t>=r[i]&&t<n[i])return i}topToIndex(t){let{tops:r,bottoms:n}=this,s=r.length,i;for(i=0;i<s;i+=1)if(t>=r[i]&&t<n[i])return i}getWidth(t){return this.rights[t]-this.lefts[t]}getHeight(t){return this.bottoms[t]-this.tops[t]}similarTo(t){return Cd(this.tops||[],t.tops||[])&&Cd(this.bottoms||[],t.bottoms||[])&&Cd(this.lefts||[],t.lefts||[])&&Cd(this.rights||[],t.rights||[])}}function Cd(e,t){const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(Math.round(e[n])!==Math.round(t[n]))return!1;return!0}class qv{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class RW extends qv{constructor(t){super(),this.el=t}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(t){this.el.scrollTop=t}setScrollLeft(t){this.el.scrollLeft=t}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class _W extends qv{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(t){window.scroll(window.scrollX,t)}setScrollLeft(t){window.scroll(t,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class lo extends $t{constructor(){super(...arguments),this.uid=so()}prepareHits(){}queryHit(t,r,n,s){return null}isValidSegDownEl(t){return!this.props.eventDrag&&!this.props.eventResize&&!Pr(t,".fc-event-mirror")}isValidDateDownEl(t){return!Pr(t,".fc-event:not(.fc-bg-event)")&&!Pr(t,".fc-more-link")&&!Pr(t,"a[data-navlink]")&&!Pr(t,".fc-popover")}}class IW{constructor(t=r=>r.thickness||1){this.getEntryThickness=t,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(t){let r=[];for(let n of t)this.insertEntry(n,r);return r}insertEntry(t,r){let n=this.findInsertion(t);this.isInsertionValid(n,t)?this.insertEntryAt(t,n):this.handleInvalidInsertion(n,t,r)}isInsertionValid(t,r){return(this.maxCoord===-1||t.levelCoord+this.getEntryThickness(r)<=this.maxCoord)&&(this.maxStackCnt===-1||t.stackCnt<this.maxStackCnt)}handleInvalidInsertion(t,r,n){if(this.allowReslicing&&t.touchingEntry){const s=Object.assign(Object.assign({},r),{span:kR(r.span,t.touchingEntry.span)});n.push(s),this.splitEntry(r,t.touchingEntry,n)}else n.push(r)}splitEntry(t,r,n){let s=t.span,i=r.span;s.start<i.start&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:s.start,end:i.start}},n),s.end>i.end&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:i.end,end:s.end}},n)}insertEntryAt(t,r){let{entriesByLevel:n,levelCoords:s}=this;r.lateral===-1?(ig(s,r.level,r.levelCoord),ig(n,r.level,[t])):ig(n[r.level],r.lateral,t),this.stackCnts[_c(t)]=r.stackCnt}findInsertion(t){let{levelCoords:r,entriesByLevel:n,strictOrder:s,stackCnts:i}=this,a=r.length,l=0,c=-1,u=-1,d=null,f=0;for(let g=0;g<a;g+=1){const y=r[g];if(!s&&y>=l+this.getEntryThickness(t))break;let b=n[g],v,x=O1(b,t.span.start,M1),w=x[0]+x[1];for(;(v=b[w])&&v.span.start<t.span.end;){let k=y+this.getEntryThickness(v);k>l&&(l=k,d=v,c=g,u=w),k===l&&(f=Math.max(f,i[_c(v)]+1)),w+=1}}let h=0;if(d)for(h=c+1;h<a&&r[h]<l;)h+=1;let p=-1;return h<a&&r[h]===l&&(p=O1(n[h],t.span.end,M1)[0]),{touchingLevel:c,touchingLateral:u,touchingEntry:d,stackCnt:f,levelCoord:l,level:h,lateral:p}}toRects(){let{entriesByLevel:t,levelCoords:r}=this,n=t.length,s=[];for(let i=0;i<n;i+=1){let a=t[i],l=r[i];for(let c of a)s.push(Object.assign(Object.assign({},c),{thickness:this.getEntryThickness(c),levelCoord:l}))}return s}}function M1(e){return e.span.end}function _c(e){return e.index+":"+e.span.start}function kR(e,t){let r=Math.max(e.start,t.start),n=Math.min(e.end,t.end);return r<n?{start:r,end:n}:null}function ig(e,t,r){e.splice(t,0,r)}function O1(e,t,r){let n=0,s=e.length;if(!s||t<r(e[n]))return[0,0];if(t>r(e[s-1]))return[s,0];for(;n<s;){let i=Math.floor(n+(s-n)/2),a=r(e[i]);if(t<a)s=i;else if(t>a)n=i+1;else return[i,1]}return[n,0]}class MW{constructor(t,r){this.emitter=new Tp}destroy(){}setMirrorIsVisible(t){}setMirrorNeedsRevert(t){}setAutoScrollEnabled(t){}}const Kv={};function OW(e,t){return!e||t>10?gr({weekday:"short"}):t>1?gr({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):gr({weekday:"long"})}const SR="fc-col-header-cell";function ER(e){return e.text}class PW extends $t{render(){let{dateEnv:t,options:r,theme:n,viewApi:s}=this.context,{props:i}=this,{date:a,dateProfile:l}=i,c=vR(a,i.todayRange,null,l),u=[SR].concat(Yv(c,n)),d=t.format(a,i.dayHeaderFormat),f=!c.isDisabled&&i.colCnt>1?vy(this.context,a):{},h=t.toDate(a);t.namedTimeZoneImpl&&(h=Xi(h,36e5));let p=Object.assign(Object.assign(Object.assign({date:h,view:s},i.extraRenderProps),{text:d}),c);return $(ci,{elTag:"th",elClasses:u,elAttrs:Object.assign({role:"columnheader",colSpan:i.colSpan,"data-date":c.isDisabled?void 0:_v(a)},i.extraDataAttrs),renderProps:p,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:ER,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},g=>$("div",{className:"fc-scrollgrid-sync-inner"},!c.isDisabled&&$(g,{elTag:"a",elAttrs:f,elClasses:["fc-col-header-cell-cushion",i.isSticky&&"fc-sticky"]})))}}const LW=gr({weekday:"long"});class FW extends $t{render(){let{props:t}=this,{dateEnv:r,theme:n,viewApi:s,options:i}=this.context,a=ur(new Date(2592e5),t.dow),l={dow:t.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},c=r.format(a,t.dayHeaderFormat),u=Object.assign(Object.assign(Object.assign(Object.assign({date:a},l),{view:s}),t.extraRenderProps),{text:c});return $(ci,{elTag:"th",elClasses:[SR,...Yv(l,n),...t.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:t.colSpan},t.extraDataAttrs),renderProps:u,generatorName:"dayHeaderContent",customGenerator:i.dayHeaderContent,defaultGenerator:ER,classNameGenerator:i.dayHeaderClassNames,didMount:i.dayHeaderDidMount,willUnmount:i.dayHeaderWillUnmount},d=>$("div",{className:"fc-scrollgrid-sync-inner"},$(d,{elTag:"a",elClasses:["fc-col-header-cell-cushion",t.isSticky&&"fc-sticky"],elAttrs:{"aria-label":r.format(a,LW)}})))}}class BW extends $t{constructor(){super(...arguments),this.createDayHeaderFormatter=ht(zW)}render(){let{context:t}=this,{dates:r,dateProfile:n,datesRepDistinctDays:s,renderIntro:i}=this.props,a=this.createDayHeaderFormatter(t.options.dayHeaderFormat,s,r.length);return $(Ap,{unit:"day"},(l,c)=>$("tr",{role:"row"},i&&i("day"),r.map(u=>s?$(PW,{key:u.toISOString(),date:u,dateProfile:n,todayRange:c,colCnt:r.length,dayHeaderFormat:a}):$(FW,{key:u.getUTCDay(),dow:u.getUTCDay(),dayHeaderFormat:a}))))}}function zW(e,t,r){return e||OW(t,r)}class UW{constructor(t,r){let n=t.start,{end:s}=t,i=[],a=[],l=-1;for(;n<s;)r.isHiddenDay(n)?i.push(l+.5):(l+=1,i.push(l),a.push(n)),n=ur(n,1);this.dates=a,this.indices=i,this.cnt=a.length}sliceRange(t){let r=this.getDateDayIndex(t.start),n=this.getDateDayIndex(ur(t.end,-1)),s=Math.max(0,r),i=Math.min(this.cnt-1,n);return s=Math.ceil(s),i=Math.floor(i),s<=i?{firstIndex:s,lastIndex:i,isStart:r===s,isEnd:n===i}:null}getDateDayIndex(t){let{indices:r}=this,n=Math.floor(El(this.dates[0],t));return n<0?r[0]-1:n>=r.length?r[r.length-1]+1:r[n]}}class HW{constructor(t,r){let{dates:n}=t,s,i,a;if(r){for(i=n[0].getUTCDay(),s=1;s<n.length&&n[s].getUTCDay()!==i;s+=1);a=Math.ceil(n.length/s)}else a=1,s=n.length;this.rowCnt=a,this.colCnt=s,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let t=[];for(let r=0;r<this.rowCnt;r+=1){let n=[];for(let s=0;s<this.colCnt;s+=1)n.push(this.buildCell(r,s));t.push(n)}return t}buildCell(t,r){let n=this.daySeries.dates[t*this.colCnt+r];return{key:n.toISOString(),date:n}}buildHeaderDates(){let t=[];for(let r=0;r<this.colCnt;r+=1)t.push(this.cells[0][r].date);return t}sliceRange(t){let{colCnt:r}=this,n=this.daySeries.sliceRange(t),s=[];if(n){let{firstIndex:i,lastIndex:a}=n,l=i;for(;l<=a;){let c=Math.floor(l/r),u=Math.min((c+1)*r,a+1);s.push({row:c,firstCol:l%r,lastCol:(u-1)%r,isStart:n.isStart&&l===i,isEnd:n.isEnd&&u-1===a}),l=u}}return s}}class VW{constructor(){this.sliceBusinessHours=ht(this._sliceBusinessHours),this.sliceDateSelection=ht(this._sliceDateSpan),this.sliceEventStore=ht(this._sliceEventStore),this.sliceEventDrag=ht(this._sliceInteraction),this.sliceEventResize=ht(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(t,r,n,s,...i){let{eventUiBases:a}=t,l=this.sliceEventStore(t.eventStore,a,r,n,...i);return{dateSelectionSegs:this.sliceDateSelection(t.dateSelection,r,n,a,s,...i),businessHourSegs:this.sliceBusinessHours(t.businessHours,r,n,s,...i),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(t.eventDrag,a,r,n,...i),eventResize:this.sliceEventResize(t.eventResize,a,r,n,...i),eventSelection:t.eventSelection}}sliceNowDate(t,r,n,s,...i){return this._sliceDateSpan({range:{start:t,end:Xi(t,1)},allDay:!1},r,n,{},s,...i)}_sliceBusinessHours(t,r,n,s,...i){return t?this._sliceEventStore(Ka(t,Td(r,!!n),s),{},r,n,...i).bg:[]}_sliceEventStore(t,r,n,s,...i){if(t){let a=R1(t,r,Td(n,!!s),s);return{bg:this.sliceEventRanges(a.bg,i),fg:this.sliceEventRanges(a.fg,i)}}return{bg:[],fg:[]}}_sliceInteraction(t,r,n,s,...i){if(!t)return null;let a=R1(t.mutatedEvents,r,Td(n,!!s),s);return{segs:this.sliceEventRanges(a.fg,i),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}}_sliceDateSpan(t,r,n,s,i,...a){if(!t)return[];let l=Td(r,!!n),c=ul(t.range,l);if(c){t=Object.assign(Object.assign({},t),{range:c});let u=uW(t,s,i),d=this.sliceRange(t.range,...a);for(let f of d)f.eventRange=u;return d}return[]}sliceEventRanges(t,r){let n=[];for(let s of t)n.push(...this.sliceEventRange(s,r));return n}sliceEventRange(t,r){let n=t.range;this.forceDayIfListItem&&t.ui.display==="list-item"&&(n={start:n.start,end:ur(n.start,1)});let s=this.sliceRange(n,...r);for(let i of s)i.eventRange=t,i.isStart=t.isStart&&i.isStart,i.isEnd=t.isEnd&&i.isEnd;return s}}function Td(e,t){let r=e.activeRange;return t?r:{start:Xi(r.start,e.slotMinTime.milliseconds),end:Xi(r.end,e.slotMaxTime.milliseconds-864e5)}}function NR(e,t,r){let{instances:n}=e.mutatedEvents;for(let s in n)if(!jp(t.validRange,n[s].range))return!1;return jR({eventDrag:e},r)}function $W(e,t,r){return jp(t.validRange,e.range)?jR({dateSelection:e},r):!1}function jR(e,t){let r=t.getCurrentData(),n=Object.assign({businessHours:r.businessHours,dateSelection:"",eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},e);return(t.pluginHooks.isPropsValid||WW)(n,t)}function WW(e,t,r={},n){return!(e.eventDrag&&!YW(e,t,r,n)||e.dateSelection&&!GW(e,t,r,n))}function YW(e,t,r,n){let s=t.getCurrentData(),i=e.eventDrag,a=i.mutatedEvents,l=a.defs,c=a.instances,u=mh(l,i.isEvent?e.eventUiBases:{"":s.selectionConfig});n&&(u=io(u,n));let d=U$(e.eventStore,i.affectedEvents.instances),f=d.defs,h=d.instances,p=mh(f,e.eventUiBases);for(let g in c){let y=c[g],b=y.range,v=u[y.defId],x=l[y.defId];if(!CR(v.constraints,b,d,e.businessHours,t))return!1;let{eventOverlap:w}=t.options,k=typeof w=="function"?w:null;for(let E in h){let N=h[E];if(Fv(b,N.range)&&(p[N.defId].overlap===!1&&i.isEvent||v.overlap===!1||k&&!k(new Lt(t,f[N.defId],N),new Lt(t,x,y))))return!1}let S=s.eventStore;for(let E of v.allows){let N=Object.assign(Object.assign({},r),{range:y.range,allDay:x.allDay}),j=S.defs[x.defId],T=S.instances[g],C;if(j?C=new Lt(t,j,T):C=new Lt(t,x),!E(Vv(N,t),C))return!1}}return!0}function GW(e,t,r,n){let s=e.eventStore,i=s.defs,a=s.instances,l=e.dateSelection,c=l.range,{selectionConfig:u}=t.getCurrentData();if(n&&(u=n(u)),!CR(u.constraints,c,s,e.businessHours,t))return!1;let{selectOverlap:d}=t.options,f=typeof d=="function"?d:null;for(let h in a){let p=a[h];if(Fv(c,p.range)&&(u.overlap===!1||f&&!f(new Lt(t,i[p.defId],p),null)))return!1}for(let h of u.allows){let p=Object.assign(Object.assign({},r),l);if(!h(Vv(p,t),null))return!1}return!0}function CR(e,t,r,n,s){for(let i of e)if(!KW(qW(i,t,r,n,s),t))return!1;return!0}function qW(e,t,r,n,s){return e==="businessHours"?ag(Ka(n,t,s)):typeof e=="string"?ag(Cp(r,i=>i.groupId===e)):typeof e=="object"&&e?ag(Ka(e,t,s)):[]}function ag(e){let{instances:t}=e,r=[];for(let n in t)r.push(t[n].range);return r}function KW(e,t){for(let r of e)if(jp(r,t))return!0;return!1}const Ad=/^(visible|hidden)$/;class QW extends $t{constructor(){super(...arguments),this.handleEl=t=>{this.el=t,Rs(this.props.elRef,t)}}render(){let{props:t}=this,{liquid:r,liquidIsAbsolute:n}=t,s=r&&n,i=["fc-scroller"];return r&&(n?i.push("fc-scroller-liquid-absolute"):i.push("fc-scroller-liquid")),$("div",{ref:this.handleEl,className:i.join(" "),style:{overflowX:t.overflowX,overflowY:t.overflowY,left:s&&-(t.overcomeLeft||0)||"",right:s&&-(t.overcomeRight||0)||"",bottom:s&&-(t.overcomeBottom||0)||"",marginLeft:!s&&-(t.overcomeLeft||0)||"",marginRight:!s&&-(t.overcomeRight||0)||"",marginBottom:!s&&-(t.overcomeBottom||0)||"",maxHeight:t.maxHeight||""}},t.children)}needsXScrolling(){if(Ad.test(this.props.overflowX))return!1;let{el:t}=this,r=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:n}=t;for(let s=0;s<n.length;s+=1)if(n[s].getBoundingClientRect().width>r)return!0;return!1}needsYScrolling(){if(Ad.test(this.props.overflowY))return!1;let{el:t}=this,r=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:n}=t;for(let s=0;s<n.length;s+=1)if(n[s].getBoundingClientRect().height>r)return!0;return!1}getXScrollbarWidth(){return Ad.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Ad.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Da{constructor(t){this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(r,n)=>{let{depths:s,currentMap:i}=this,a=!1,l=!1;r!==null?(a=n in i,i[n]=r,s[n]=(s[n]||0)+1,l=!0):(s[n]-=1,s[n]||(delete i[n],delete this.callbackMap[n],a=!0)),this.masterCallback&&(a&&this.masterCallback(null,String(n)),l&&this.masterCallback(r,String(n)))}}createRef(t){let r=this.callbackMap[t];return r||(r=this.callbackMap[t]=n=>{this.handleValue(n,String(t))}),r}collect(t,r,n){return a$(this.currentMap,t,r,n)}getAll(){return Pv(this.currentMap)}}function ZW(e){let t=i9(e,".fc-scrollgrid-shrink"),r=0;for(let n of t)r=Math.max(r,v9(n));return Math.ceil(r)}function TR(e,t){return e.liquid&&t.liquid}function XW(e,t){return t.maxHeight!=null||TR(e,t)}function JW(e,t,r,n){let{expandRows:s}=r;return typeof t.content=="function"?t.content(r):$("table",{role:"presentation",className:[t.tableClassName,e.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:r.tableMinWidth,width:r.clientWidth,height:s?r.clientHeight:""}},r.tableColGroupNode,$(n?"thead":"tbody",{role:"presentation"},typeof t.rowContent=="function"?t.rowContent(r):t.rowContent))}function eY(e,t){return Zi(e,t,as)}function tY(e,t){let r=[];for(let n of e){let s=n.span||1;for(let i=0;i<s;i+=1)r.push($("col",{style:{width:n.width==="shrink"?rY(t):n.width||"",minWidth:n.minWidth||""}}))}return $("colgroup",{},...r)}function rY(e){return e??4}function nY(e){for(let t of e)if(t.width==="shrink")return!0;return!1}function sY(e,t){let r=["fc-scrollgrid",t.theme.getClass("table")];return e&&r.push("fc-scrollgrid-liquid"),r}function iY(e,t){let r=["fc-scrollgrid-section",`fc-scrollgrid-section-${e.type}`,e.className];return t&&e.liquid&&e.maxHeight==null&&r.push("fc-scrollgrid-section-liquid"),e.isSticky&&r.push("fc-scrollgrid-section-sticky"),r}function aY(e){return $("div",{className:"fc-scrollgrid-sticky-shim",style:{width:e.clientWidth,minWidth:e.tableMinWidth}})}function P1(e){let{stickyHeaderDates:t}=e;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}function oY(e){let{stickyFooterScrollbar:t}=e;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}class AR extends $t{constructor(){super(...arguments),this.processCols=ht(t=>t,eY),this.renderMicroColGroup=ht(tY),this.scrollerRefs=new Da,this.scrollerElRefs=new Da(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:t,state:r,context:n}=this,s=t.sections||[],i=this.processCols(t.cols),a=this.renderMicroColGroup(i,r.shrinkWidth),l=sY(t.liquid,n);t.collapsibleWidth&&l.push("fc-scrollgrid-collapsible");let c=s.length,u=0,d,f=[],h=[],p=[];for(;u<c&&(d=s[u]).type==="header";)f.push(this.renderSection(d,a,!0)),u+=1;for(;u<c&&(d=s[u]).type==="body";)h.push(this.renderSection(d,a,!1)),u+=1;for(;u<c&&(d=s[u]).type==="footer";)p.push(this.renderSection(d,a,!0)),u+=1;let g=!yR();const y={role:"rowgroup"};return $("table",{role:"grid",className:l.join(" "),style:{height:t.height}},!!(!g&&f.length)&&$("thead",y,...f),!!(!g&&h.length)&&$("tbody",y,...h),!!(!g&&p.length)&&$("tfoot",y,...p),g&&$("tbody",y,...f,...h,...p))}renderSection(t,r,n){return"outerContent"in t?$(qt,{key:t.key},t.outerContent):$("tr",{key:t.key,role:"presentation",className:iY(t,this.props.liquid).join(" ")},this.renderChunkTd(t,r,t.chunk,n))}renderChunkTd(t,r,n,s){if("outerContent"in n)return n.outerContent;let{props:i}=this,{forceYScrollbars:a,scrollerClientWidths:l,scrollerClientHeights:c}=this.state,u=XW(i,t),d=TR(i,t),f=i.liquid?a?"scroll":u?"auto":"hidden":"visible",h=t.key,p=JW(t,n,{tableColGroupNode:r,tableMinWidth:"",clientWidth:!i.collapsibleWidth&&l[h]!==void 0?l[h]:null,clientHeight:c[h]!==void 0?c[h]:null,expandRows:t.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},s);return $(s?"th":"td",{ref:n.elRef,role:"presentation"},$("div",{className:`fc-scroller-harness${d?" fc-scroller-harness-liquid":""}`},$(QW,{ref:this.scrollerRefs.createRef(h),elRef:this.scrollerElRefs.createRef(h),overflowY:f,overflowX:i.liquid?"hidden":"visible",maxHeight:t.maxHeight,liquid:d,liquidIsAbsolute:!0},p)))}_handleScrollerEl(t,r){let n=lY(this.props.sections,r);n&&Rs(n.chunk.scrollerElRef,t)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return nY(this.props.cols)?ZW(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let t=jW(),{scrollerRefs:r,scrollerElRefs:n}=this,s=!1,i={},a={};for(let l in r.currentMap){let c=r.currentMap[l];if(c&&c.needsYScrolling()){s=!0;break}}for(let l of this.props.sections){let c=l.key,u=n.currentMap[c];if(u){let d=u.parentNode;i[c]=Math.floor(d.getBoundingClientRect().width-(s?t.y:0)),a[c]=Math.floor(d.getBoundingClientRect().height)}}return{forceYScrollbars:s,scrollerClientWidths:i,scrollerClientHeights:a}}}AR.addStateEquality({scrollerClientWidths:as,scrollerClientHeights:as});function lY(e,t){for(let r of e)if(r.key===t)return r;return null}class Qv extends $t{constructor(){super(...arguments),this.buildPublicEvent=ht((t,r,n)=>new Lt(t,r,n)),this.handleEl=t=>{this.el=t,Rs(this.props.elRef,t),t&&_1(t,this.props.seg)}}render(){const{props:t,context:r}=this,{options:n}=r,{seg:s}=t,{eventRange:i}=s,{ui:a}=i,l={event:this.buildPublicEvent(r,i.def,i.instance),view:r.viewApi,timeText:t.timeText,textColor:a.textColor,backgroundColor:a.backgroundColor,borderColor:a.borderColor,isDraggable:!t.disableDragging&&J$(s,r),isStartResizable:!t.disableResizing&&eW(s,r),isEndResizable:!t.disableResizing&&tW(s),isMirror:!!(t.isDragging||t.isResizing||t.isDateSelecting),isStart:!!s.isStart,isEnd:!!s.isEnd,isPast:!!t.isPast,isFuture:!!t.isFuture,isToday:!!t.isToday,isSelected:!!t.isSelected,isDragging:!!t.isDragging,isResizing:!!t.isResizing};return $(ci,{elRef:this.handleEl,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:[...rW(l),...s.eventRange.ui.classNames,...t.elClasses||[]],elStyle:t.elStyle,renderProps:l,generatorName:"eventContent",customGenerator:n.eventContent,defaultGenerator:t.defaultGenerator,classNameGenerator:n.eventClassNames,didMount:n.eventDidMount,willUnmount:n.eventWillUnmount},t.children)}componentDidUpdate(t){this.el&&this.props.seg!==t.seg&&_1(this.el,this.props.seg)}}class DR extends $t{render(){let{props:t,context:r}=this,{options:n}=r,{seg:s}=t,{ui:i}=s.eventRange,a=n.eventTimeFormat||t.defaultTimeFormat,l=hR(s,a,r,t.defaultDisplayEventTime,t.defaultDisplayEventEnd);return $(Qv,Object.assign({},t,{elTag:"a",elStyle:{borderColor:i.borderColor,backgroundColor:i.backgroundColor},elAttrs:pR(s,r),defaultGenerator:cY,timeText:l}),(c,u)=>$(qt,null,$(c,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:u.textColor}}),!!u.isStartResizable&&$("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!u.isEndResizable&&$("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}DR.addPropsEquality({seg:as});function cY(e){return $("div",{className:"fc-event-main-frame"},e.timeText&&$("div",{className:"fc-event-time"},e.timeText),$("div",{className:"fc-event-title-container"},$("div",{className:"fc-event-title fc-sticky"},e.event.title||$(qt,null,""))))}const uY=gr({day:"numeric"});class RR extends $t{constructor(){super(...arguments),this.refineRenderProps=lf(dY)}render(){let{props:t,context:r}=this,{options:n}=r,s=this.refineRenderProps({date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,isMonthStart:t.isMonthStart||!1,showDayNumber:t.showDayNumber,extraRenderProps:t.extraRenderProps,viewApi:r.viewApi,dateEnv:r.dateEnv,monthStartFormat:n.monthStartFormat});return $(ci,{elRef:t.elRef,elTag:t.elTag,elAttrs:Object.assign(Object.assign({},t.elAttrs),s.isDisabled?{}:{"data-date":_v(t.date)}),elClasses:[...Yv(s,r.theme),...t.elClasses||[]],elStyle:t.elStyle,renderProps:s,generatorName:"dayCellContent",customGenerator:n.dayCellContent,defaultGenerator:t.defaultGenerator,classNameGenerator:s.isDisabled?void 0:n.dayCellClassNames,didMount:n.dayCellDidMount,willUnmount:n.dayCellWillUnmount},t.children)}}function _R(e){return!!(e.dayCellContent||my("dayCellContent",e))}function dY(e){let{date:t,dateEnv:r,dateProfile:n,isMonthStart:s}=e,i=vR(t,e.todayRange,null,n),a=e.showDayNumber?r.format(t,s?e.monthStartFormat:uY):"";return Object.assign(Object.assign(Object.assign({date:r.toDate(t),view:e.viewApi},i),{isMonthStart:s,dayNumberText:a}),e.extraRenderProps)}class fY extends $t{render(){let{props:t}=this,{seg:r}=t;return $(Qv,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:r.eventRange.ui.backgroundColor},defaultGenerator:hY,seg:r,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:t.isPast,isFuture:t.isFuture,isToday:t.isToday,disableDragging:!0,disableResizing:!0})}}function hY(e){let{title:t}=e.event;return t&&$("div",{className:"fc-event-title"},e.event.title)}function pY(e){return $("div",{className:`fc-${e}`})}const mY=e=>$(ao.Consumer,null,t=>{let{dateEnv:r,options:n}=t,{date:s}=e,i=n.weekNumberFormat||e.defaultFormat,a=r.computeWeekNumber(s),l=r.format(s,i),c={num:a,text:l,date:s};return $(ci,{elRef:e.elRef,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:e.elClasses,elStyle:e.elStyle,renderProps:c,generatorName:"weekNumberContent",customGenerator:n.weekNumberContent,defaultGenerator:gY,classNameGenerator:n.weekNumberClassNames,didMount:n.weekNumberDidMount,willUnmount:n.weekNumberWillUnmount},e.children)});function gY(e){return e.text}const og=10;class yY extends $t{constructor(){super(...arguments),this.state={titleId:Sp()},this.handleRootEl=t=>{this.rootEl=t,this.props.elRef&&Rs(this.props.elRef,t)},this.handleDocumentMouseDown=t=>{const r=VD(t);this.rootEl.contains(r)||this.handleCloseClick()},this.handleDocumentKeyDown=t=>{t.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:t}=this.props;t&&t()}}render(){let{theme:t,options:r}=this.context,{props:n,state:s}=this,i=["fc-popover",t.getClass("popover")].concat(n.extraClassNames||[]);return WV($("div",Object.assign({},n.extraAttrs,{id:n.id,className:i.join(" "),"aria-labelledby":s.titleId,ref:this.handleRootEl}),$("div",{className:"fc-popover-header "+t.getClass("popoverHeader")},$("span",{className:"fc-popover-title",id:s.titleId},n.title),$("span",{className:"fc-popover-close "+t.getIconClass("close"),title:r.closeHint,onClick:this.handleCloseClick})),$("div",{className:"fc-popover-body "+t.getClass("popoverContent")},n.children)),n.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:t}=this.context,{alignmentEl:r,alignGridTop:n}=this.props,{rootEl:s}=this,i=DW(r);if(i){let a=s.getBoundingClientRect(),l=n?Pr(r,".fc-scrollgrid").getBoundingClientRect().top:i.top,c=t?i.right-a.width:i.left;l=Math.max(l,og),c=Math.min(c,document.documentElement.clientWidth-og-a.width),c=Math.max(c,og);let u=s.offsetParent.getBoundingClientRect();Tc(s,{top:l-u.top,left:c-u.left})}}}class xY extends lo{constructor(){super(...arguments),this.handleRootEl=t=>{this.rootEl=t,t?this.context.registerInteractiveComponent(this,{el:t,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:t,dateEnv:r}=this.context,{props:n}=this,{startDate:s,todayRange:i,dateProfile:a}=n,l=r.format(s,t.dayPopoverFormat);return $(RR,{elRef:this.handleRootEl,date:s,dateProfile:a,todayRange:i},(c,u,d)=>$(yY,{elRef:d.ref,id:n.id,title:l,extraClassNames:["fc-more-popover"].concat(d.className||[]),extraAttrs:d,parentEl:n.parentEl,alignmentEl:n.alignmentEl,alignGridTop:n.alignGridTop,onClose:n.onClose},_R(t)&&$(c,{elTag:"div",elClasses:["fc-more-popover-misc"]}),n.children))}queryHit(t,r,n,s){let{rootEl:i,props:a}=this;return t>=0&&t<n&&r>=0&&r<s?{dateProfile:a.dateProfile,dateSpan:Object.assign({allDay:!a.forceTimed,range:{start:a.startDate,end:a.endDate}},a.extraDateSpan),dayEl:i,rect:{left:0,top:0,right:n,bottom:s},layer:1}:null}}class vY extends $t{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Sp()},this.handleLinkEl=t=>{this.linkEl=t,this.props.elRef&&Rs(this.props.elRef,t)},this.handleClick=t=>{let{props:r,context:n}=this,{moreLinkClick:s}=n.options,i=L1(r).start;function a(l){let{def:c,instance:u,range:d}=l.eventRange;return{event:new Lt(n,c,u),start:n.dateEnv.toDate(d.start),end:n.dateEnv.toDate(d.end),isStart:l.isStart,isEnd:l.isEnd}}typeof s=="function"&&(s=s({date:i,allDay:!!r.allDayDate,allSegs:r.allSegs.map(a),hiddenSegs:r.hiddenSegs.map(a),jsEvent:t,view:n.viewApi})),!s||s==="popover"?this.setState({isPopoverOpen:!0}):typeof s=="string"&&n.calendarApi.zoomTo(i,s)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:t,state:r}=this;return $(ao.Consumer,null,n=>{let{viewApi:s,options:i,calendarApi:a}=n,{moreLinkText:l}=i,{moreCnt:c}=t,u=L1(t),d=typeof l=="function"?l.call(a,c):`+${c} ${l}`,f=Ac(i.moreLinkHint,[c],d),h={num:c,shortText:`+${c}`,text:d,view:s};return $(qt,null,!!t.moreCnt&&$(ci,{elTag:t.elTag||"a",elRef:this.handleLinkEl,elClasses:[...t.elClasses||[],"fc-more-link"],elStyle:t.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},t.elAttrs),WD(this.handleClick)),{title:f,"aria-expanded":r.isPopoverOpen,"aria-controls":r.isPopoverOpen?r.popoverId:""}),renderProps:h,generatorName:"moreLinkContent",customGenerator:i.moreLinkContent,defaultGenerator:t.defaultGenerator||bY,classNameGenerator:i.moreLinkClassNames,didMount:i.moreLinkDidMount,willUnmount:i.moreLinkWillUnmount},t.children),r.isPopoverOpen&&$(xY,{id:r.popoverId,startDate:u.start,endDate:u.end,dateProfile:t.dateProfile,todayRange:t.todayRange,extraDateSpan:t.extraDateSpan,parentEl:this.parentEl,alignmentEl:t.alignmentElRef?t.alignmentElRef.current:this.linkEl,alignGridTop:t.alignGridTop,forceTimed:t.forceTimed,onClose:this.handlePopoverClose},t.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Pr(this.linkEl,".fc-view-harness"))}}function bY(e){return e.text}function L1(e){if(e.allDayDate)return{start:e.allDayDate,end:ur(e.allDayDate,1)};let{hiddenSegs:t}=e;return{start:wY(t),end:SY(t)}}function wY(e){return e.reduce(kY).eventRange.range.start}function kY(e,t){return e.eventRange.range.start<t.eventRange.range.start?e:t}function SY(e){return e.reduce(EY).eventRange.range.end}function EY(e,t){return e.eventRange.range.end>t.eventRange.range.end?e:t}class NY{constructor(){this.handlers=[]}set(t){this.currentValue=t;for(let r of this.handlers)r(t)}subscribe(t){this.handlers.push(t),this.currentValue!==void 0&&t(this.currentValue)}}class jY extends NY{constructor(){super(...arguments),this.map=new Map}handle(t){const{map:r}=this;let n=!1;t.isActive?(r.set(t.id,t),n=!0):r.has(t.id)&&(r.delete(t.id),n=!0),n&&this.set(r)}}const CY=[],IR={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},MR=Object.assign(Object.assign({},IR),{buttonHints:{prev:"Previous $0",next:"Next $0",today(e,t){return t==="day"?"Today":`This ${e}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(e){return`Show ${e} more event${e===1?"":"s"}`}});function TY(e){let t=e.length>0?e[0].code:"en",r=CY.concat(e),n={en:MR};for(let s of r)n[s.code]=s;return{map:n,defaultCode:t}}function OR(e,t){return typeof e=="object"&&!Array.isArray(e)?PR(e.code,[e.code],e):AY(e,t)}function AY(e,t){let r=[].concat(e||[]),n=DY(r,t)||MR;return PR(e,r,n)}function DY(e,t){for(let r=0;r<e.length;r+=1){let n=e[r].toLocaleLowerCase().split("-");for(let s=n.length;s>0;s-=1){let i=n.slice(0,s).join("-");if(t[i])return t[i]}}return null}function PR(e,t,r){let n=Ov([IR,r],["buttonText"]);delete n.code;let{week:s}=n;return delete n.week,{codeArg:e,codes:t,week:s,simpleNumberFormat:new Intl.NumberFormat(e),options:n}}function ui(e){return{id:so(),name:e.name,premiumReleaseDate:e.premiumReleaseDate?new Date(e.premiumReleaseDate):void 0,deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}}}function RY(e,t){let r={},n={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function s(i){for(let a of i){const l=a.name,c=r[l];c===void 0?(r[l]=a.id,s(a.deps),n=IY(n,a)):c!==a.id&&console.warn(`Duplicate plugin '${l}'`)}}return e&&s(e),s(t),n}function _Y(){let e=[],t=[],r;return(n,s)=>((!r||!Zi(n,e)||!Zi(s,t))&&(r=RY(n,s)),e=n,t=s,r)}function IY(e,t){return{premiumReleaseDate:MY(e.premiumReleaseDate,t.premiumReleaseDate),reducers:e.reducers.concat(t.reducers),isLoadingFuncs:e.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:e.contextInit.concat(t.contextInit),eventRefiners:Object.assign(Object.assign({},e.eventRefiners),t.eventRefiners),eventDefMemberAdders:e.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},e.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:e.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:e.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:e.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:e.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:e.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:e.dateSpanTransforms.concat(t.dateSpanTransforms),views:Object.assign(Object.assign({},e.views),t.views),viewPropsTransformers:e.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||e.isPropsValid,externalDefTransforms:e.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:e.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:e.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:e.calendarInteractions.concat(t.calendarInteractions),componentInteractions:e.componentInteractions.concat(t.componentInteractions),themeClasses:Object.assign(Object.assign({},e.themeClasses),t.themeClasses),eventSourceDefs:e.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||e.cmdFormatter,recurringTypes:e.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||e.namedTimeZonedImpl,initialView:e.initialView||t.initialView,elementDraggingImpl:e.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},e.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||e.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},e.listenerRefiners),t.listenerRefiners),optionRefiners:Object.assign(Object.assign({},e.optionRefiners),t.optionRefiners),propSetHandlers:Object.assign(Object.assign({},e.propSetHandlers),t.propSetHandlers)}}function MY(e,t){return e===void 0?t:t===void 0?e:new Date(Math.max(e.valueOf(),t.valueOf()))}class ia extends Wu{}ia.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};ia.prototype.baseIconClass="fc-icon";ia.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};ia.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};ia.prototype.iconOverrideOption="buttonIcons";ia.prototype.iconOverrideCustomButtonOption="icon";ia.prototype.iconOverridePrefix="fc-icon-";function OY(e,t){let r={},n;for(n in e)by(n,r,e,t);for(n in t)by(n,r,e,t);return r}function by(e,t,r,n){if(t[e])return t[e];let s=PY(e,t,r,n);return s&&(t[e]=s),s}function PY(e,t,r,n){let s=r[e],i=n[e],a=d=>s&&s[d]!==null?s[d]:i&&i[d]!==null?i[d]:null,l=a("component"),c=a("superType"),u=null;if(c){if(c===e)throw new Error("Can't have a custom view type that references itself");u=by(c,t,r,n)}return!l&&u&&(l=u.component),l?{type:e,component:l,defaults:Object.assign(Object.assign({},u?u.defaults:{}),s?s.rawOptions:{}),overrides:Object.assign(Object.assign({},u?u.overrides:{}),i?i.rawOptions:{})}:null}function F1(e){return io(e,LY)}function LY(e){let t=typeof e=="function"?{component:e}:e,{component:r}=t;return t.content?r=B1(t):r&&!(r.prototype instanceof $t)&&(r=B1(Object.assign(Object.assign({},t),{content:r}))),{superType:t.type,component:r,rawOptions:t}}function B1(e){return t=>$(ao.Consumer,null,r=>$(ci,{elTag:"div",elClasses:JD(r.viewSpec),renderProps:Object.assign(Object.assign({},t),{nextDayThreshold:r.options.nextDayThreshold}),generatorName:void 0,customGenerator:e.content,classNameGenerator:e.classNames,didMount:e.didMount,willUnmount:e.willUnmount}))}function FY(e,t,r,n){let s=F1(e),i=F1(t.views),a=OY(s,i);return io(a,l=>BY(l,i,t,r,n))}function BY(e,t,r,n,s){let i=e.overrides.duration||e.defaults.duration||n.duration||r.duration,a=null,l="",c="",u={};if(i&&(a=zY(i),a)){let h=py(a);l=h.unit,h.value===1&&(c=l,u=t[l]?t[l].rawOptions:{})}let d=h=>{let p=h.buttonText||{},g=e.defaults.buttonTextKey;return g!=null&&p[g]!=null?p[g]:p[e.type]!=null?p[e.type]:p[c]!=null?p[c]:null},f=h=>{let p=h.buttonHints||{},g=e.defaults.buttonTextKey;return g!=null&&p[g]!=null?p[g]:p[e.type]!=null?p[e.type]:p[c]!=null?p[c]:null};return{type:e.type,component:e.component,duration:a,durationUnit:l,singleUnit:c,optionDefaults:e.defaults,optionOverrides:Object.assign(Object.assign({},u),e.overrides),buttonTextOverride:d(n)||d(r)||e.overrides.buttonText,buttonTextDefault:d(s)||e.defaults.buttonText||d(Dc)||e.type,buttonTitleOverride:f(n)||f(r)||e.overrides.buttonHint,buttonTitleDefault:f(s)||e.defaults.buttonHint||f(Dc)}}let z1={};function zY(e){let t=JSON.stringify(e),r=z1[t];return r===void 0&&(r=ft(e),z1[t]=r),r}function UY(e,t){switch(t.type){case"CHANGE_VIEW_TYPE":e=t.viewType}return e}function HY(e,t){switch(t.type){case"CHANGE_DATE":return t.dateMarker;default:return e}}function VY(e,t,r){let n=e.initialDate;return n!=null?t.createMarker(n):r.getDateMarker()}function $Y(e,t){switch(t.type){case"SET_OPTION":return Object.assign(Object.assign({},e),{[t.optionName]:t.rawOptionValue});default:return e}}function WY(e,t,r,n){let s;switch(t.type){case"CHANGE_VIEW_TYPE":return n.build(t.dateMarker||r);case"CHANGE_DATE":return n.build(t.dateMarker);case"PREV":if(s=n.buildPrev(e,r),s.isValid)return s;break;case"NEXT":if(s=n.buildNext(e,r),s.isValid)return s;break}return e}function YY(e,t,r){let n=t?t.activeRange:null;return FR({},JY(e,r),n,r)}function GY(e,t,r,n){let s=r?r.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return FR(e,t.sources,s,n);case"REMOVE_EVENT_SOURCE":return KY(e,t.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?BR(e,s,n):e;case"FETCH_EVENT_SOURCES":return Zv(e,t.sourceIds?qD(t.sourceIds):zR(e,n),s,t.isRefetch||!1,n);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return XY(e,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e}}function qY(e,t,r){let n=t?t.activeRange:null;return Zv(e,zR(e,r),n,!0,r)}function LR(e){for(let t in e)if(e[t].isFetching)return!0;return!1}function FR(e,t,r,n){let s={};for(let i of t)s[i.sourceId]=i;return r&&(s=BR(s,r,n)),Object.assign(Object.assign({},e),s)}function KY(e,t){return qa(e,r=>r.sourceId!==t)}function BR(e,t,r){return Zv(e,qa(e,n=>QY(n,t,r)),t,!1,r)}function QY(e,t,r){return UR(e,r)?!r.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end:!e.latestFetchId}function Zv(e,t,r,n,s){let i={};for(let a in e){let l=e[a];t[a]?i[a]=ZY(l,r,n,s):i[a]=l}return i}function ZY(e,t,r,n){let{options:s,calendarApi:i}=n,a=n.pluginHooks.eventSourceDefs[e.sourceDefId],l=so();return a.fetch({eventSource:e,range:t,isRefetch:r,context:n},c=>{let{rawEvents:u}=c;s.eventSourceSuccess&&(u=s.eventSourceSuccess.call(i,u,c.response)||u),e.success&&(u=e.success.call(i,u,c.response)||u),n.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:l,fetchRange:t,rawEvents:u})},c=>{let u=!1;s.eventSourceFailure&&(s.eventSourceFailure.call(i,c),u=!0),e.failure&&(e.failure(c),u=!0),u||console.warn(c.message,c),n.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:l,fetchRange:t,error:c})}),Object.assign(Object.assign({},e),{isFetching:!0,latestFetchId:l})}function XY(e,t,r,n){let s=e[t];return s&&r===s.latestFetchId?Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},s),{isFetching:!1,fetchRange:n})}):e}function zR(e,t){return qa(e,r=>UR(r,t))}function JY(e,t){let r=oR(t),n=[].concat(e.eventSources||[]),s=[];e.initialEvents&&n.unshift(e.initialEvents),e.events&&n.unshift(e.events);for(let i of n){let a=aR(i,t,r);a&&s.push(a)}return s}function UR(e,t){return!t.pluginHooks.eventSourceDefs[e.sourceDefId].ignoreRange}function eG(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e}}function tG(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e}}function rG(e,t){let r;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return r=t.state,{affectedEvents:r.affectedEvents,mutatedEvents:r.mutatedEvents,isEvent:r.isEvent};default:return e}}function nG(e,t){let r;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return r=t.state,{affectedEvents:r.affectedEvents,mutatedEvents:r.mutatedEvents,isEvent:r.isEvent};default:return e}}function sG(e,t,r,n,s){let i=e.headerToolbar?U1(e.headerToolbar,e,t,r,n,s):null,a=e.footerToolbar?U1(e.footerToolbar,e,t,r,n,s):null;return{header:i,footer:a}}function U1(e,t,r,n,s,i){let a={},l=[],c=!1;for(let u in e){let d=e[u],f=iG(d,t,r,n,s,i);a[u]=f.widgets,l.push(...f.viewsWithButtons),c=c||f.hasTitle}return{sectionWidgets:a,viewsWithButtons:l,hasTitle:c}}function iG(e,t,r,n,s,i){let a=t.direction==="rtl",l=t.customButtons||{},c=r.buttonText||{},u=t.buttonText||{},d=r.buttonHints||{},f=t.buttonHints||{},h=e?e.split(" "):[],p=[],g=!1;return{widgets:h.map(b=>b.split(",").map(v=>{if(v==="title")return g=!0,{buttonName:v};let x,w,k,S,E,N;if(x=l[v])k=j=>{x.click&&x.click.call(j.target,j,j.target)},(S=n.getCustomButtonIconClass(x))||(S=n.getIconClass(v,a))||(E=x.text),N=x.hint||x.text;else if(w=s[v]){p.push(v),k=()=>{i.changeView(v)},(E=w.buttonTextOverride)||(S=n.getIconClass(v,a))||(E=w.buttonTextDefault);let j=w.buttonTextOverride||w.buttonTextDefault;N=Ac(w.buttonTitleOverride||w.buttonTitleDefault||t.viewHint,[j,v],j)}else if(i[v])if(k=()=>{i[v]()},(E=c[v])||(S=n.getIconClass(v,a))||(E=u[v]),v==="prevYear"||v==="nextYear"){let j=v==="prevYear"?"prev":"next";N=Ac(d[j]||f[j],[u.year||"year","year"],u[v])}else N=j=>Ac(d[v]||f[v],[u[j]||j,j],u[v]);return{buttonName:v,buttonClick:k,buttonIcon:S,buttonText:E,buttonHint:N}})),viewsWithButtons:p,hasTitle:g}}class aG{constructor(t,r,n){this.type=t,this.getCurrentData=r,this.dateEnv=n}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(t){return this.getCurrentData().options[t]}}let oG={ignoreRange:!0,parseMeta(e){return Array.isArray(e.events)?e.events:null},fetch(e,t){t({rawEvents:e.eventSource.meta})}};const lG=ui({name:"array-event-source",eventSourceDefs:[oG]});let cG={parseMeta(e){return typeof e.events=="function"?e.events:null},fetch(e,t,r){const{dateEnv:n}=e.context,s=e.eventSource.meta;dW(s.bind(null,mR(e.range,n)),i=>t({rawEvents:i}),r)}};const uG=ui({name:"func-event-source",eventSourceDefs:[cG]}),dG={method:String,extraParams:H,startParam:String,endParam:String,timeZoneParam:String};let fG={parseMeta(e){return e.url&&(e.format==="json"||!e.format)?{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam}:null},fetch(e,t,r){const{meta:n}=e.eventSource,s=pG(n,e.range,e.context);fW(n.method,n.url,s).then(([i,a])=>{t({rawEvents:i,response:a})},r)}};const hG=ui({name:"json-event-source",eventSourceRefiners:dG,eventSourceDefs:[fG]});function pG(e,t,r){let{dateEnv:n,options:s}=r,i,a,l,c,u={};return i=e.startParam,i==null&&(i=s.startParam),a=e.endParam,a==null&&(a=s.endParam),l=e.timeZoneParam,l==null&&(l=s.timeZoneParam),typeof e.extraParams=="function"?c=e.extraParams():c=e.extraParams||{},Object.assign(u,c),u[i]=n.formatIso(t.start),u[a]=n.formatIso(t.end),n.timeZone!=="local"&&(u[l]=n.timeZone),u}const mG={daysOfWeek:H,startTime:ft,endTime:ft,duration:ft,startRecur:H,endRecur:H};let gG={parse(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){let r={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null,dateEnv:t},n;return e.duration&&(n=e.duration),!n&&e.startTime&&e.endTime&&(n=S9(e.endTime,e.startTime)),{allDayGuess:!e.startTime&&!e.endTime,duration:n,typeData:r}}return null},expand(e,t,r){let n=ul(t,{start:e.startRecur,end:e.endRecur});return n?xG(e.daysOfWeek,e.startTime,e.dateEnv,r,n):[]}};const yG=ui({name:"simple-recurring-event",recurringTypes:[gG],eventRefiners:mG});function xG(e,t,r,n,s){let i=e?qD(e):null,a=Pt(s.start),l=s.end,c=[];for(t&&(t.milliseconds<0?l=ur(l,1):t.milliseconds>=1e3*60*60*24&&(a=ur(a,-1)));a<l;){let u;(!i||i[a.getUTCDay()])&&(t?u=n.add(a,t):u=a,c.push(n.createMarker(r.toDate(u)))),a=ur(a,1)}return c}const vG=ui({name:"change-handler",optionChangeHandlers:{events(e,t){H1([e],t)},eventSources:H1}});function H1(e,t){let r=Pv(t.getCurrentData().eventSources);if(r.length===1&&e.length===1&&Array.isArray(r[0]._raw)&&Array.isArray(e[0])){t.dispatch({type:"RESET_RAW_EVENTS",sourceId:r[0].sourceId,rawEvents:e[0]});return}let n=[];for(let s of e){let i=!1;for(let a=0;a<r.length;a+=1)if(r[a]._raw===s){r.splice(a,1),i=!0;break}i||n.push(s)}for(let s of r)t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:s.sourceId});for(let s of n)t.calendarApi.addEventSource(s)}function bG(e,t){t.emitter.trigger("datesSet",Object.assign(Object.assign({},mR(e.activeRange,t.dateEnv)),{view:t.viewApi}))}function wG(e,t){let{emitter:r}=t;r.hasHandlers("eventsSet")&&r.trigger("eventsSet",Fa(e,t))}const kG=[lG,uG,hG,yG,vG,ui({name:"misc",isLoadingFuncs:[e=>LR(e.eventSources)],propSetHandlers:{dateProfile:bG,eventStore:wG}})];class SG{constructor(t,r){this.runTaskOption=t,this.drainedOption=r,this.queue=[],this.delayedRunner=new Tv(this.drain.bind(this))}request(t,r){this.queue.push(t),this.delayedRunner.request(r)}pause(t){this.delayedRunner.pause(t)}resume(t,r){this.delayedRunner.resume(t,r)}drain(){let{queue:t}=this;for(;t.length;){let r=[],n;for(;n=t.shift();)this.runTask(n),r.push(n);this.drained(r)}}runTask(t){this.runTaskOption&&this.runTaskOption(t)}drained(t){this.drainedOption&&this.drainedOption(t)}}function EG(e,t,r){let n;return/^(year|month)$/.test(e.currentRangeUnit)?n=e.currentRange:n=e.activeRange,r.formatRange(n.start,n.end,gr(t.titleFormat||NG(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}function NG(e){let{currentRangeUnit:t}=e;if(t==="year")return{year:"numeric"};if(t==="month")return{year:"numeric",month:"long"};let r=lh(e.currentRange.start,e.currentRange.end);return r!==null&&r>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class V1{constructor(){this.resetListeners=new Set}handleInput(t,r){const n=this.dateEnv;if(t!==n&&(typeof r=="function"?this.nowFn=r:n||(this.nowAnchorDate=t.toDate(r?t.createMarker(r):t.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=t,n))for(const s of this.resetListeners.values())s()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(t){this.resetListeners.add(t)}removeResetListener(t){this.resetListeners.delete(t)}}class jG{constructor(t){this.computeCurrentViewData=ht(this._computeCurrentViewData),this.organizeRawLocales=ht(TY),this.buildLocale=ht(OR),this.buildPluginHooks=_Y(),this.buildDateEnv=ht(CG),this.buildTheme=ht(TG),this.parseToolbars=ht(sG),this.buildViewSpecs=ht(FY),this.buildDateProfileGenerator=lf(AG),this.buildViewApi=ht(DG),this.buildViewUiProps=lf(IG),this.buildEventUiBySource=ht(RG,as),this.buildEventUiBases=ht(_G),this.parseContextBusinessHours=lf(MG),this.buildTitle=ht(EG),this.nowManager=new V1,this.emitter=new Tp,this.actionRunner=new SG(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=h=>{this.actionRunner.request(h)},this.props=t,this.actionRunner.pause(),this.nowManager=new V1;let r={},n=this.computeOptionsData(t.optionOverrides,r,t.calendarApi),s=n.calendarOptions.initialView||n.pluginHooks.initialView,i=this.computeCurrentViewData(s,n,t.optionOverrides,r);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(i.options);let a={nowManager:this.nowManager,dateEnv:n.dateEnv,options:n.calendarOptions,pluginHooks:n.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l=VY(n.calendarOptions,n.dateEnv,this.nowManager),c=i.dateProfileGenerator.build(l);Wi(c.activeRange,l)||(l=c.currentRange.start);for(let h of n.pluginHooks.contextInit)h(a);let u=YY(n.calendarOptions,c,a),d={dynamicOptionOverrides:r,currentViewType:s,currentDate:l,dateProfile:c,businessHours:this.parseContextBusinessHours(a),eventSources:u,eventUiBases:{},eventStore:ns(),renderableEventStore:ns(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(a).selectionConfig},f=Object.assign(Object.assign({},a),d);for(let h of n.pluginHooks.reducers)Object.assign(d,h(null,null,f));lg(d,a)&&this.emitter.trigger("loading",!0),this.state=d,this.updateData(),this.actionRunner.resume()}resetOptions(t,r){let{props:n}=this;r===void 0?n.optionOverrides=t:(n.optionOverrides=Object.assign(Object.assign({},n.optionOverrides||{}),t),this.optionsForRefining.push(...r)),(r===void 0||r.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(t){let{props:r,state:n,emitter:s}=this,i=$Y(n.dynamicOptionOverrides,t),a=this.computeOptionsData(r.optionOverrides,i,r.calendarApi),l=UY(n.currentViewType,t),c=this.computeCurrentViewData(l,a,r.optionOverrides,i);r.calendarApi.currentDataManager=this,s.setThisContext(r.calendarApi),s.setOptions(c.options);let u={nowManager:this.nowManager,dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:r.calendarApi,dispatch:this.dispatch,emitter:s,getCurrentData:this.getCurrentData},{currentDate:d,dateProfile:f}=n;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(f=c.dateProfileGenerator.build(d)),d=HY(d,t),f=WY(f,t,d,c.dateProfileGenerator),(t.type==="PREV"||t.type==="NEXT"||!Wi(f.currentRange,d))&&(d=f.currentRange.start);let h=GY(n.eventSources,t,f,u),p=L$(n.eventStore,t,h,f,u),y=LR(h)&&!c.options.progressiveEventRendering&&n.renderableEventStore||p,{eventUiSingleBase:b,selectionConfig:v}=this.buildViewUiProps(u),x=this.buildEventUiBySource(h),w=this.buildEventUiBases(y.defs,b,x),k={dynamicOptionOverrides:i,currentViewType:l,currentDate:d,dateProfile:f,eventSources:h,eventStore:p,renderableEventStore:y,selectionConfig:v,eventUiBases:w,businessHours:this.parseContextBusinessHours(u),dateSelection:eG(n.dateSelection,t),eventSelection:tG(n.eventSelection,t),eventDrag:rG(n.eventDrag,t),eventResize:nG(n.eventResize,t)},S=Object.assign(Object.assign({},u),k);for(let j of a.pluginHooks.reducers)Object.assign(k,j(n,t,S));let E=lg(n,u),N=lg(k,u);!E&&N?s.trigger("loading",!0):E&&!N&&s.trigger("loading",!1),this.state=k,r.onAction&&r.onAction(t)}updateData(){let{props:t,state:r}=this,n=this.data,s=this.computeOptionsData(t.optionOverrides,r.dynamicOptionOverrides,t.calendarApi),i=this.computeCurrentViewData(r.currentViewType,s,t.optionOverrides,r.dynamicOptionOverrides),a=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(r.dateProfile,i.options,s.dateEnv),calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},s),i),r),l=s.pluginHooks.optionChangeHandlers,c=n&&n.calendarOptions,u=s.calendarOptions;if(c&&c!==u){c.timeZone!==u.timeZone&&(r.eventSources=a.eventSources=qY(a.eventSources,r.dateProfile,a),r.eventStore=a.eventStore=A1(a.eventStore,n.dateEnv,a.dateEnv),r.renderableEventStore=a.renderableEventStore=A1(a.renderableEventStore,n.dateEnv,a.dateEnv));for(let d in l)(this.optionsForHandling.indexOf(d)!==-1||c[d]!==u[d])&&l[d](u[d],a)}this.optionsForHandling=[],t.onData&&t.onData(a)}computeOptionsData(t,r,n){if(!this.optionsForRefining.length&&t===this.stableOptionOverrides&&r===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:s,pluginHooks:i,localeDefaults:a,availableLocaleData:l,extra:c}=this.processRawCalendarOptions(t,r);$1(c);let u=this.buildDateEnv(s.timeZone,s.locale,s.weekNumberCalculation,s.firstDay,s.weekText,i,l,s.defaultRangeSeparator),d=this.buildViewSpecs(i.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,a),f=this.buildTheme(s,i),h=this.parseToolbars(s,this.stableOptionOverrides,f,d,n);return this.stableCalendarOptionsData={calendarOptions:s,pluginHooks:i,dateEnv:u,viewSpecs:d,theme:f,toolbarConfig:h,localeDefaults:a,availableRawLocales:l.map}}processRawCalendarOptions(t,r){let{locales:n,locale:s}=eg([Dc,t,r]),i=this.organizeRawLocales(n),a=i.map,l=this.buildLocale(s||i.defaultCode,a).options,c=this.buildPluginHooks(t.plugins||[],kG),u=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k1),S1),E1),c.listenerRefiners),c.optionRefiners),d={},f=eg([Dc,l,t,r]),h={},p=this.currentCalendarOptionsInput,g=this.currentCalendarOptionsRefined,y=!1;for(let b in f)this.optionsForRefining.indexOf(b)===-1&&(f[b]===p[b]||ba[b]&&b in p&&ba[b](p[b],f[b]))?h[b]=g[b]:u[b]?(h[b]=u[b](f[b]),y=!0):d[b]=p[b];return y&&(this.currentCalendarOptionsInput=f,this.currentCalendarOptionsRefined=h,this.stableOptionOverrides=t,this.stableDynamicOptionOverrides=r),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:i,localeDefaults:l,extra:d}}_computeCurrentViewData(t,r,n,s){let i=r.viewSpecs[t];if(!i)throw new Error(`viewType "${t}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:a,extra:l}=this.processRawViewOptions(i,r.pluginHooks,r.localeDefaults,n,s);$1(l),this.nowManager.handleInput(r.dateEnv,a.now);let c=this.buildDateProfileGenerator({dateProfileGeneratorClass:i.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:i.duration,durationUnit:i.durationUnit,usesMinMaxTime:i.optionDefaults.usesMinMaxTime,dateEnv:r.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,showNonCurrentDates:a.showNonCurrentDates,dayCount:a.dayCount,dateAlignment:a.dateAlignment,dateIncrement:a.dateIncrement,hiddenDays:a.hiddenDays,weekends:a.weekends,validRangeInput:a.validRange,visibleRangeInput:a.visibleRange,fixedWeekCount:a.fixedWeekCount}),u=this.buildViewApi(t,this.getCurrentData,r.dateEnv);return{viewSpec:i,options:a,dateProfileGenerator:c,viewApi:u}}processRawViewOptions(t,r,n,s,i){let a=eg([Dc,t.optionDefaults,n,s,t.optionOverrides,i]),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k1),S1),E1),t$),r.listenerRefiners),r.optionRefiners),c={},u=this.currentViewOptionsInput,d=this.currentViewOptionsRefined,f=!1,h={};for(let p in a)a[p]===u[p]||ba[p]&&ba[p](a[p],u[p])?c[p]=d[p]:(a[p]===this.currentCalendarOptionsInput[p]||ba[p]&&ba[p](a[p],this.currentCalendarOptionsInput[p])?p in this.currentCalendarOptionsRefined&&(c[p]=this.currentCalendarOptionsRefined[p]):l[p]?c[p]=l[p](a[p]):h[p]=a[p],f=!0);return f&&(this.currentViewOptionsInput=a,this.currentViewOptionsRefined=c),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}}}function CG(e,t,r,n,s,i,a,l){let c=OR(t||a.defaultCode,a.map);return new d$({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:i.namedTimeZonedImpl,locale:c,weekNumberCalculation:r,firstDay:n,weekText:s,cmdFormatter:i.cmdFormatter,defaultSeparator:l})}function TG(e,t){let r=t.themeClasses[e.themeSystem]||ia;return new r(e)}function AG(e){let t=e.dateProfileGeneratorClass||rR;return new t(e)}function DG(e,t,r){return new aG(e,t,r)}function RG(e){return io(e,t=>t.ui)}function _G(e,t,r){let n={"":t};for(let s in e){let i=e[s];i.sourceId&&r[i.sourceId]&&(n[s]=r[i.sourceId])}return n}function IG(e){let{options:t}=e;return{eventUiSingleBase:ph({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:typeof t.eventOverlap=="boolean"?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:ph({constraint:t.selectConstraint,overlap:typeof t.selectOverlap=="boolean"?t.selectOverlap:void 0,allow:t.selectAllow},e)}}function lg(e,t){for(let r of t.pluginHooks.isLoadingFuncs)if(r(e))return!0;return!1}function MG(e){return Y$(e.options.businessHours,e)}function $1(e,t){for(let r in e)console.warn(`Unknown option '${r}'`)}class OG extends $t{render(){let t=this.props.widgetGroups.map(r=>this.renderWidgetGroup(r));return $("div",{className:"fc-toolbar-chunk"},...t)}renderWidgetGroup(t){let{props:r}=this,{theme:n}=this.context,s=[],i=!0;for(let a of t){let{buttonName:l,buttonClick:c,buttonText:u,buttonIcon:d,buttonHint:f}=a;if(l==="title")i=!1,s.push($("h2",{className:"fc-toolbar-title",id:r.titleId},r.title));else{let h=l===r.activeButton,p=!r.isTodayEnabled&&l==="today"||!r.isPrevEnabled&&l==="prev"||!r.isNextEnabled&&l==="next",g=[`fc-${l}-button`,n.getClass("button")];h&&g.push(n.getClass("buttonActive")),s.push($("button",{type:"button",title:typeof f=="function"?f(r.navUnit):f,disabled:p,"aria-pressed":h,className:g.join(" "),onClick:c},u||(d?$("span",{className:d,role:"img"}):"")))}}if(s.length>1){let a=i&&n.getClass("buttonGroup")||"";return $("div",{className:a},...s)}return s[0]}}class W1 extends $t{render(){let{model:t,extraClassName:r}=this.props,n=!1,s,i,a=t.sectionWidgets,l=a.center;return a.left?(n=!0,s=a.left):s=a.start,a.right?(n=!0,i=a.right):i=a.end,$("div",{className:[r||"","fc-toolbar",n?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",s||[]),this.renderSection("center",l||[]),this.renderSection("end",i||[]))}renderSection(t,r){let{props:n}=this;return $(OG,{key:t,widgetGroups:r,title:n.title,navUnit:n.navUnit,activeButton:n.activeButton,isTodayEnabled:n.isTodayEnabled,isPrevEnabled:n.isPrevEnabled,isNextEnabled:n.isNextEnabled,titleId:n.titleId})}}class PG extends $t{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=t=>{this.el=t,Rs(this.props.elRef,t),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:t,state:r}=this,{aspectRatio:n}=t,s=["fc-view-harness",n||t.liquid||t.height?"fc-view-harness-active":"fc-view-harness-passive"],i="",a="";return n?r.availableWidth!==null?i=r.availableWidth/n:a=`${1/n*100}%`:i=t.height||"",$("div",{"aria-labelledby":t.labeledById,ref:this.handleEl,className:s.join(" "),style:{height:i,paddingBottom:a}},t.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class LG extends Nl{constructor(t){super(t),this.handleSegClick=(r,n)=>{let{component:s}=this,{context:i}=s,a=dl(n);if(a&&s.isValidSegDownEl(r.target)){let l=Pr(r.target,".fc-event-forced-url"),c=l?l.querySelector("a[href]").href:"";i.emitter.trigger("eventClick",{el:n,event:new Lt(s.context,a.eventRange.def,a.eventRange.instance),jsEvent:r,view:i.viewApi}),c&&!r.defaultPrevented&&(window.location.href=c)}},this.destroy=$D(t.el,"click",".fc-event",this.handleSegClick)}}class FG extends Nl{constructor(t){super(t),this.handleEventElRemove=r=>{r===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(r,n)=>{dl(n)&&(this.currentSegEl=n,this.triggerEvent("eventMouseEnter",r,n))},this.handleSegLeave=(r,n)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",r,n))},this.removeHoverListeners=l9(t.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(t,r,n){let{component:s}=this,{context:i}=s,a=dl(n);(!r||s.isValidSegDownEl(r.target))&&i.emitter.trigger(t,{el:n,event:new Lt(i,a.eventRange.def,a.eventRange.instance),jsEvent:r,view:i.viewApi})}}class BG extends oo{constructor(){super(...arguments),this.buildViewContext=ht(p$),this.buildViewPropTransformers=ht(UG),this.buildToolbarProps=ht(zG),this.headerRef=ii(),this.footerRef=ii(),this.interactionsStore={},this.state={viewLabelId:Sp()},this.registerInteractiveComponent=(t,r)=>{let n=mW(t,r),a=[LG,FG].concat(this.props.pluginHooks.componentInteractions).map(l=>new l(n));this.interactionsStore[t.uid]=a,xy[t.uid]=n},this.unregisterInteractiveComponent=t=>{let r=this.interactionsStore[t.uid];if(r){for(let n of r)n.destroy();delete this.interactionsStore[t.uid]}delete xy[t.uid]},this.resizeRunner=new Tv(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=t=>{let{options:r}=this.props;r.handleWindowResize&&t.target===window&&this.resizeRunner.request(r.windowResizeDelay)}}render(){let{props:t}=this,{toolbarConfig:r,options:n}=t,s=!1,i="",a;t.isHeightAuto||t.forPrint?i="":n.height!=null?s=!0:n.contentHeight!=null?i=n.contentHeight:a=Math.max(n.aspectRatio,.5);let l=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.nowManager,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=r.header&&r.header.hasTitle?this.state.viewLabelId:void 0;return $(ao.Provider,{value:l},$(Ap,{unit:"day"},u=>{let d=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,u,t.viewTitle);return $(qt,null,r.header&&$(W1,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:r.header,titleId:c},d)),$(PG,{liquid:s,height:i,aspectRatio:a,labeledById:c},this.renderView(t),this.buildAppendContent()),r.footer&&$(W1,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:r.footer,titleId:""},d)))}))}componentDidMount(){let{props:t}=this;this.calendarInteractions=t.pluginHooks.calendarInteractions.map(n=>new n(t)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:r}=t.pluginHooks;for(let n in r)r[n](t[n],t)}componentDidUpdate(t){let{props:r}=this,{propSetHandlers:n}=r.pluginHooks;for(let s in n)r[s]!==t[s]&&n[s](r[s],r)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let t of this.calendarInteractions)t.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:t}=this,r=t.pluginHooks.viewContainerAppends.map(n=>n(t));return $(qt,{},...r)}renderView(t){let{pluginHooks:r}=t,{viewSpec:n}=t,s={dateProfile:t.dateProfile,businessHours:t.businessHours,eventStore:t.renderableEventStore,eventUiBases:t.eventUiBases,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isHeightAuto:t.isHeightAuto,forPrint:t.forPrint},i=this.buildViewPropTransformers(r.viewPropsTransformers);for(let l of i)Object.assign(s,l.transform(s,t));let a=n.component;return $(a,Object.assign({},s))}}function zG(e,t,r,n,s,i){let a=r.build(s,void 0,!1),l=r.buildPrev(t,n,!1),c=r.buildNext(t,n,!1);return{title:i,activeButton:e.type,navUnit:e.singleUnit,isTodayEnabled:a.isValid&&!Wi(t.currentRange,s),isPrevEnabled:l.isValid,isNextEnabled:c.isValid}}function UG(e){return e.map(t=>new t)}class HG extends yW{constructor(t,r={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=n=>{switch(n.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=n=>{this.currentData=n,this.renderRunner.request(n.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:n}=this;fh(()=>{pu($(pW,{options:n.calendarOptions,theme:n.theme,emitter:n.emitter},(s,i,a,l)=>(this.setClassNames(s),this.setHeight(i),$(XD.Provider,{value:this.customContentRenderId},$(BG,Object.assign({isHeightAuto:a,forPrint:l},n))))),this.el)})}else this.isRendered&&(this.isRendered=!1,pu(null,this.el),this.setClassNames([]),this.setHeight(""))},JV(t),this.el=t,this.renderRunner=new Tv(this.handleRenderRequest),new jG({optionOverrides:r,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let t=this.isRendering;t?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),t&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){fh(()=>{super.updateSize()})}batchRendering(t){this.renderRunner.pause("batchRendering"),t(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(t,r){this.currentDataManager.resetOptions(t,r)}setClassNames(t){if(!Zi(t,this.currentClassNames)){let{classList:r}=this.el;for(let n of this.currentClassNames)r.remove(n);for(let n of t)r.add(n);this.currentClassNames=t}}setHeight(t){HD(this.el,"height",t)}}const VG=parseInt(String(re.version).split(".")[0]),$G=VG<18;class HR extends m.Component{constructor(){super(...arguments),this.elRef=m.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const t=[];for(const r of this.state.customRenderingMap.values())t.push(re.createElement(WG,{key:r.id,customRendering:r}));return re.createElement("div",{ref:this.elRef},t)}componentDidMount(){this.isUnmounting=!1;const t=new jY;this.handleCustomRendering=t.handle.bind(t),this.calendar=new HG(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{rs.flushSync(()=>{})});let r;t.subscribe(n=>{const s=Date.now(),i=!r;($G||i||this.isUpdating||this.isUnmounting||s-r<100?VR:rs.flushSync)(()=>{this.setState({customRenderingMap:n},()=>{r=s,i?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}HR.act=VR;class WG extends m.PureComponent{render(){const{customRendering:t}=this.props,{generatorMeta:r}=t,n=typeof r=="function"?r(t.renderProps):r;return rs.createPortal(n,t.containerEl)}}function VR(e){e()}class YG extends lo{constructor(){super(...arguments),this.headerElRef=ii()}renderSimpleLayout(t,r){let{props:n,context:s}=this,i=[],a=P1(s.options);return t&&i.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),i.push({type:"body",key:"body",liquid:!0,chunk:{content:r}}),$(N1,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},$(AR,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[],sections:i}))}renderHScrollLayout(t,r,n,s){let i=this.context.pluginHooks.scrollGridImpl;if(!i)throw new Error("No ScrollGrid implementation");let{props:a,context:l}=this,c=!a.forPrint&&P1(l.options),u=!a.forPrint&&oY(l.options),d=[];return t&&d.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:r}]}),u&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:aY}]}),$(N1,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},$(i,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:n,minWidth:s}]}],sections:d}))}}function uf(e,t){let r=[];for(let n=0;n<t;n+=1)r[n]=[];for(let n of e)r[n.row].push(n);return r}function Dd(e,t){let r=[];for(let n=0;n<t;n+=1)r[n]=[];for(let n of e)r[n.firstCol].push(n);return r}function Y1(e,t){let r=[];if(e){for(let n=0;n<t;n+=1)r[n]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let n of e.segs)r[n.row].segs.push(n)}else for(let n=0;n<t;n+=1)r[n]=null;return r}const $R=gr({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function WR(e){let{display:t}=e.eventRange.ui;return t==="list-item"||t==="auto"&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}class YR extends $t{render(){let{props:t}=this;return $(DR,Object.assign({},t,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:$R,defaultDisplayEventEnd:t.defaultDisplayEventEnd,disableResizing:!t.seg.eventRange.def.allDay}))}}class GR extends $t{render(){let{props:t,context:r}=this,{options:n}=r,{seg:s}=t,i=n.eventTimeFormat||$R,a=hR(s,i,r,!0,t.defaultDisplayEventEnd);return $(Qv,Object.assign({},t,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:pR(t.seg,r),defaultGenerator:GG,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function GG(e){return $(qt,null,$("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&$("div",{className:"fc-event-time"},e.timeText),$("div",{className:"fc-event-title"},e.event.title||$(qt,null,"")))}class qG extends $t{constructor(){super(...arguments),this.compileSegs=ht(KG)}render(){let{props:t}=this,{allSegs:r,invisibleSegs:n}=this.compileSegs(t.singlePlacements);return $(vY,{elClasses:["fc-daygrid-more-link"],dateProfile:t.dateProfile,todayRange:t.todayRange,allDayDate:t.allDayDate,moreCnt:t.moreCnt,allSegs:r,hiddenSegs:n,alignmentElRef:t.alignmentElRef,alignGridTop:t.alignGridTop,extraDateSpan:t.extraDateSpan,popoverContent:()=>{let s=(t.eventDrag?t.eventDrag.affectedInstances:null)||(t.eventResize?t.eventResize.affectedInstances:null)||{};return $(qt,null,r.map(i=>{let a=i.eventRange.instance.instanceId;return $("div",{className:"fc-daygrid-event-harness",key:a,style:{visibility:s[a]?"hidden":""}},WR(i)?$(GR,Object.assign({seg:i,isDragging:!1,isSelected:a===t.eventSelection,defaultDisplayEventEnd:!1},Rc(i,t.todayRange))):$(YR,Object.assign({seg:i,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===t.eventSelection,defaultDisplayEventEnd:!1},Rc(i,t.todayRange))))}))}})}}function KG(e){let t=[],r=[];for(let n of e)t.push(n.seg),n.isVisible||r.push(n.seg);return{allSegs:t,invisibleSegs:r}}const QG=gr({week:"narrow"});class ZG extends lo{constructor(){super(...arguments),this.rootElRef=ii(),this.state={dayNumberId:Sp()},this.handleRootEl=t=>{Rs(this.rootElRef,t),Rs(this.props.elRef,t)}}render(){let{context:t,props:r,state:n,rootElRef:s}=this,{options:i,dateEnv:a}=t,{date:l,dateProfile:c}=r;const u=r.showDayNumber&&JG(l,c.currentRange,a);return $(RR,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...r.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},r.extraDataAttrs),r.showDayNumber?{"aria-labelledby":n.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:XG,date:l,dateProfile:c,todayRange:r.todayRange,showDayNumber:r.showDayNumber,isMonthStart:u,extraRenderProps:r.extraRenderProps},(d,f)=>$("div",{ref:r.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:r.minHeight}},r.showWeekNumber&&$(mY,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:vy(t,l,"week"),date:l,defaultFormat:QG}),!f.isDisabled&&(r.showDayNumber||_R(i)||r.forceDayTop)?$("div",{className:"fc-daygrid-day-top"},$(d,{elTag:"a",elClasses:["fc-daygrid-day-number",u&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},vy(t,l)),{id:n.dayNumberId})})):r.showDayNumber?$("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},$("a",{className:"fc-daygrid-day-number"},"")):void 0,$("div",{className:"fc-daygrid-day-events",ref:r.fgContentElRef},r.fgContent,$("div",{className:"fc-daygrid-day-bottom",style:{marginTop:r.moreMarginTop}},$(qG,{allDayDate:l,singlePlacements:r.singlePlacements,moreCnt:r.moreCnt,alignmentElRef:s,alignGridTop:!r.showDayNumber,extraDateSpan:r.extraDateSpan,dateProfile:r.dateProfile,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,todayRange:r.todayRange}))),$("div",{className:"fc-daygrid-day-bg"},r.bgContent)))}}function XG(e){return e.dayNumberText||$(qt,null,"")}function JG(e,t,r){const{start:n,end:s}=t,i=Xi(s,-1),a=r.getYear(n),l=r.getMonth(n),c=r.getYear(i),u=r.getMonth(i);return!(a===c&&l===u)&&(e.valueOf()===n.valueOf()||r.getDay(e)===1&&e.valueOf()<s.valueOf())}function qR(e){return e.eventRange.instance.instanceId+":"+e.firstCol}function KR(e){return qR(e)+":"+e.lastCol}function eq(e,t,r,n,s,i,a){let l=new nq(v=>{let x=e[v.index].eventRange.instance.instanceId+":"+v.span.start+":"+(v.span.end-1);return s[x]||1});l.allowReslicing=!0,l.strictOrder=n,t===!0||r===!0?(l.maxCoord=i,l.hiddenConsumes=!0):typeof t=="number"?l.maxStackCnt=t:typeof r=="number"&&(l.maxStackCnt=r,l.hiddenConsumes=!0);let c=[],u=[];for(let v=0;v<e.length;v+=1){let x=e[v],w=KR(x);s[w]!=null?c.push({index:v,span:{start:x.firstCol,end:x.lastCol+1}}):u.push(x)}let d=l.addSegs(c),f=l.toRects(),{singleColPlacements:h,multiColPlacements:p,leftoverMargins:g}=tq(f,e,a),y=[],b=[];for(let v of u){p[v.firstCol].push({seg:v,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let x=v.firstCol;x<=v.lastCol;x+=1)h[x].push({seg:$o(v,x,x+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<a.length;v+=1)y.push(0);for(let v of d){let x=e[v.index],w=v.span;p[w.start].push({seg:$o(x,w.start,w.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let k=w.start;k<w.end;k+=1)y[k]+=1,h[k].push({seg:$o(x,k,k+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<a.length;v+=1)b.push(g[v]);return{singleColPlacements:h,multiColPlacements:p,moreCnts:y,moreMarginTops:b}}function tq(e,t,r){let n=rq(e,r.length),s=[],i=[],a=[];for(let l=0;l<r.length;l+=1){let c=n[l],u=[],d=0,f=0;for(let p of c){let g=t[p.index];u.push({seg:$o(g,l,l+1,r),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:p.levelCoord-d}),d=p.levelCoord+p.thickness}let h=[];d=0,f=0;for(let p of c){let g=t[p.index],y=p.span.end-p.span.start>1,b=p.span.start===l;f+=p.levelCoord-d,d=p.levelCoord+p.thickness,y?(f+=p.thickness,b&&h.push({seg:$o(g,p.span.start,p.span.end,r),isVisible:!0,isAbsolute:!0,absoluteTop:p.levelCoord,marginTop:0})):b&&(h.push({seg:$o(g,p.span.start,p.span.end,r),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:f}),f=0)}s.push(u),i.push(h),a.push(f)}return{singleColPlacements:s,multiColPlacements:i,leftoverMargins:a}}function rq(e,t){let r=[];for(let n=0;n<t;n+=1)r.push([]);for(let n of e)for(let s=n.span.start;s<n.span.end;s+=1)r[s].push(n);return r}function $o(e,t,r,n){if(e.firstCol===t&&e.lastCol===r-1)return e;let s=e.eventRange,i=s.range,a=ul(i,{start:n[t].date,end:ur(n[r-1].date,1)});return Object.assign(Object.assign({},e),{firstCol:t,lastCol:r-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:a},isStart:e.isStart&&a.start.valueOf()===i.start.valueOf(),isEnd:e.isEnd&&a.end.valueOf()===i.end.valueOf()})}class nq extends IW{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(t){const r=super.addSegs(t),{entriesByLevel:n}=this,s=i=>!this.forceHidden[_c(i)];for(let i=0;i<n.length;i+=1)n[i]=n[i].filter(s);return r}handleInvalidInsertion(t,r,n){const{entriesByLevel:s,forceHidden:i}=this,{touchingEntry:a,touchingLevel:l,touchingLateral:c}=t;if(this.hiddenConsumes&&a){const u=_c(a);if(!i[u])if(this.allowReslicing){const d=Object.assign(Object.assign({},a),{span:kR(a.span,r.span)}),f=_c(d);i[f]=!0,s[l][c]=d,n.push(d),this.splitEntry(a,r,n)}else i[u]=!0,n.push(a)}super.handleInvalidInsertion(t,r,n)}}class QR extends lo{constructor(){super(...arguments),this.cellElRefs=new Da,this.frameElRefs=new Da,this.fgElRefs=new Da,this.segHarnessRefs=new Da,this.rootElRef=ii(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=t=>{t&&this.updateSizing(!0)}}render(){let{props:t,state:r,context:n}=this,{options:s}=n,i=t.cells.length,a=Dd(t.businessHourSegs,i),l=Dd(t.bgEventSegs,i),c=Dd(this.getHighlightSegs(),i),u=Dd(this.getMirrorSegs(),i),{singleColPlacements:d,multiColPlacements:f,moreCnts:h,moreMarginTops:p}=eq(Z$(t.fgEventSegs,s.eventOrder),t.dayMaxEvents,t.dayMaxEventRows,s.eventOrderStrict,r.segHeights,r.maxContentHeight,t.cells),g=t.eventDrag&&t.eventDrag.affectedInstances||t.eventResize&&t.eventResize.affectedInstances||{};return $("tr",{ref:this.rootElRef,role:"row"},t.renderIntro&&t.renderIntro(),t.cells.map((y,b)=>{let v=this.renderFgSegs(b,t.forPrint?d[b]:f[b],t.todayRange,g),x=this.renderFgSegs(b,sq(u[b],f),t.todayRange,{},!!t.eventDrag,!!t.eventResize,!1);return $(ZG,{key:y.key,elRef:this.cellElRefs.createRef(y.key),innerElRef:this.frameElRefs.createRef(y.key),dateProfile:t.dateProfile,date:y.date,showDayNumber:t.showDayNumbers,showWeekNumber:t.showWeekNumbers&&b===0,forceDayTop:t.showWeekNumbers,todayRange:t.todayRange,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,extraRenderProps:y.extraRenderProps,extraDataAttrs:y.extraDataAttrs,extraClassNames:y.extraClassNames,extraDateSpan:y.extraDateSpan,moreCnt:h[b],moreMarginTop:p[b],singlePlacements:d[b],fgContentElRef:this.fgElRefs.createRef(y.key),fgContent:$(qt,null,$(qt,null,v),$(qt,null,x)),bgContent:$(qt,null,this.renderFillSegs(c[b],"highlight"),this.renderFillSegs(a[b],"non-business"),this.renderFillSegs(l[b],"bg-event")),minHeight:t.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(t,r){let n=this.props;this.updateSizing(!as(t,n))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:t}=this;return t.eventDrag&&t.eventDrag.segs.length?t.eventDrag.segs:t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:t.dateSelectionSegs}getMirrorSegs(){let{props:t}=this;return t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:[]}renderFgSegs(t,r,n,s,i,a,l){let{context:c}=this,{eventSelection:u}=this.props,{framePositions:d}=this.state,f=this.props.cells.length===1,h=i||a||l,p=[];if(d)for(let g of r){let{seg:y}=g,{instanceId:b}=y.eventRange.instance,v=g.isVisible&&!s[b],x=g.isAbsolute,w="",k="";x&&(c.isRtl?(k=0,w=d.lefts[y.lastCol]-d.lefts[y.firstCol]):(w=0,k=d.rights[y.firstCol]-d.rights[y.lastCol])),p.push($("div",{className:"fc-daygrid-event-harness"+(x?" fc-daygrid-event-harness-abs":""),key:qR(y),ref:h?null:this.segHarnessRefs.createRef(KR(y)),style:{visibility:v?"":"hidden",marginTop:x?"":g.marginTop,top:x?g.absoluteTop:"",left:w,right:k}},WR(y)?$(GR,Object.assign({seg:y,isDragging:i,isSelected:b===u,defaultDisplayEventEnd:f},Rc(y,n))):$(YR,Object.assign({seg:y,isDragging:i,isResizing:a,isDateSelecting:l,isSelected:b===u,defaultDisplayEventEnd:f},Rc(y,n)))))}return p}renderFillSegs(t,r){let{isRtl:n}=this.context,{todayRange:s}=this.props,{framePositions:i}=this.state,a=[];if(i)for(let l of t){let c=n?{right:0,left:i.lefts[l.lastCol]-i.lefts[l.firstCol]}:{left:0,right:i.rights[l.firstCol]-i.rights[l.lastCol]};a.push($("div",{key:nW(l.eventRange),className:"fc-daygrid-bg-harness",style:c},r==="bg-event"?$(fY,Object.assign({seg:l},Rc(l,s))):pY(r)))}return $(qt,{},...a)}updateSizing(t){let{props:r,state:n,frameElRefs:s}=this;if(!r.forPrint&&r.clientWidth!==null){if(t){let c=r.cells.map(u=>s.currentMap[u.key]);if(c.length){let u=this.rootElRef.current,d=new gh(u,c,!0,!1);(!n.framePositions||!n.framePositions.similarTo(d))&&this.setState({framePositions:new gh(u,c,!0,!1)})}}const i=this.state.segHeights,a=this.querySegHeights(),l=r.dayMaxEvents===!0||r.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},i),a),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let t=this.segHarnessRefs.currentMap,r={};for(let n in t){let s=Math.round(t[n].getBoundingClientRect().height);r[n]=Math.max(r[n]||0,s)}return r}computeMaxContentHeight(){let t=this.props.cells[0].key,r=this.cellElRefs.currentMap[t],n=this.fgElRefs.currentMap[t];return r.getBoundingClientRect().bottom-n.getBoundingClientRect().top}getCellEls(){let t=this.cellElRefs.currentMap;return this.props.cells.map(r=>t[r.key])}}QR.addStateEquality({segHeights:as});function sq(e,t){if(!e.length)return[];let r=iq(t);return e.map(n=>({seg:n,isVisible:!0,isAbsolute:!0,absoluteTop:r[n.eventRange.instance.instanceId],marginTop:0}))}function iq(e){let t={};for(let r of e)for(let n of r)t[n.seg.eventRange.instance.instanceId]=n.absoluteTop;return t}class aq extends lo{constructor(){super(...arguments),this.splitBusinessHourSegs=ht(uf),this.splitBgEventSegs=ht(oq),this.splitFgEventSegs=ht(uf),this.splitDateSelectionSegs=ht(uf),this.splitEventDrag=ht(Y1),this.splitEventResize=ht(Y1),this.rowRefs=new Da}render(){let{props:t,context:r}=this,n=t.cells.length,s=this.splitBusinessHourSegs(t.businessHourSegs,n),i=this.splitBgEventSegs(t.bgEventSegs,n),a=this.splitFgEventSegs(t.fgEventSegs,n),l=this.splitDateSelectionSegs(t.dateSelectionSegs,n),c=this.splitEventDrag(t.eventDrag,n),u=this.splitEventResize(t.eventResize,n),d=n>=7&&t.clientWidth?t.clientWidth/r.options.aspectRatio/6:null;return $(Ap,{unit:"day"},(f,h)=>$(qt,null,t.cells.map((p,g)=>$(QR,{ref:this.rowRefs.createRef(g),key:p.length?p[0].date.toISOString():g,showDayNumbers:n>1,showWeekNumbers:t.showWeekNumbers,todayRange:h,dateProfile:t.dateProfile,cells:p,renderIntro:t.renderRowIntro,businessHourSegs:s[g],eventSelection:t.eventSelection,bgEventSegs:i[g],fgEventSegs:a[g],dateSelectionSegs:l[g],eventDrag:c[g],eventResize:u[g],dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,clientWidth:t.clientWidth,clientHeight:t.clientHeight,cellMinHeight:d,forPrint:t.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const t=this.rowRefs.currentMap[0].getCellEls()[0],r=t?t.closest(".fc-daygrid-body"):null;r&&(this.rootEl=r,this.context.registerInteractiveComponent(this,{el:r,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new gh(this.rootEl,this.rowRefs.collect().map(t=>t.getCellEls()[0]),!1,!0),this.colPositions=new gh(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(t,r){let{colPositions:n,rowPositions:s}=this,i=n.leftToIndex(t),a=s.topToIndex(r);if(a!=null&&i!=null){let l=this.props.cells[a][i];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,i),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(a,i),rect:{left:n.lefts[i],right:n.rights[i],top:s.tops[a],bottom:s.bottoms[a]},layer:0}}return null}getCellEl(t,r){return this.rowRefs.currentMap[t].getCellEls()[r]}getCellRange(t,r){let n=this.props.cells[t][r].date,s=ur(n,1);return{start:n,end:s}}}function oq(e,t){return uf(e.filter(lq),t)}function lq(e){return e.eventRange.def.allDay}class cq extends lo{constructor(){super(...arguments),this.elRef=ii(),this.needsScrollReset=!1}render(){let{props:t}=this,{dayMaxEventRows:r,dayMaxEvents:n,expandRows:s}=t,i=n===!0||r===!0;i&&!s&&(i=!1,r=null,n=null);let a=["fc-daygrid-body",i?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return $("div",{ref:this.elRef,className:a.join(" "),style:{width:t.clientWidth,minWidth:t.tableMinWidth}},$("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:t.clientWidth,minWidth:t.tableMinWidth,height:s?t.clientHeight:""}},t.colGroupNode,$("tbody",{role:"presentation"},$(aq,{dateProfile:t.dateProfile,cells:t.cells,renderRowIntro:t.renderRowIntro,showWeekNumbers:t.showWeekNumbers,clientWidth:t.clientWidth,clientHeight:t.clientHeight,businessHourSegs:t.businessHourSegs,bgEventSegs:t.bgEventSegs,fgEventSegs:t.fgEventSegs,dateSelectionSegs:t.dateSelectionSegs,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,dayMaxEvents:n,dayMaxEventRows:r,forPrint:t.forPrint,isHitComboAllowed:t.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(t){t.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const t=uq(this.elRef.current,this.props.dateProfile);if(t){const r=t.closest(".fc-daygrid-body"),n=r.closest(".fc-scroller"),s=t.getBoundingClientRect().top-r.getBoundingClientRect().top;n.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}function uq(e,t){let r;return t.currentRangeUnit.match(/year|month/)&&(r=e.querySelector(`[data-date="${B9(t.currentDate)}-01"]`)),r||(r=e.querySelector(`[data-date="${_v(t.currentDate)}"]`)),r}class dq extends VW{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(t,r){return r.sliceRange(t)}}class fq extends lo{constructor(){super(...arguments),this.slicer=new dq,this.tableRef=ii()}render(){let{props:t,context:r}=this;return $(cq,Object.assign({ref:this.tableRef},this.slicer.sliceProps(t,t.dateProfile,t.nextDayThreshold,r,t.dayTableModel),{dateProfile:t.dateProfile,cells:t.dayTableModel.cells,colGroupNode:t.colGroupNode,tableMinWidth:t.tableMinWidth,renderRowIntro:t.renderRowIntro,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.showWeekNumbers,expandRows:t.expandRows,headerAlignElRef:t.headerAlignElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:t.forPrint}))}}class hq extends YG{constructor(){super(...arguments),this.buildDayTableModel=ht(pq),this.headerRef=ii(),this.tableRef=ii()}render(){let{options:t,dateProfileGenerator:r}=this.context,{props:n}=this,s=this.buildDayTableModel(n.dateProfile,r),i=t.dayHeaders&&$(BW,{ref:this.headerRef,dateProfile:n.dateProfile,dates:s.headerDates,datesRepDistinctDays:s.rowCnt===1}),a=l=>$(fq,{ref:this.tableRef,dateProfile:n.dateProfile,dayTableModel:s,businessHours:n.businessHours,dateSelection:n.dateSelection,eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,nextDayThreshold:t.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.weekNumbers,expandRows:!n.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:n.forPrint});return t.dayMinWidth?this.renderHScrollLayout(i,a,s.colCnt,t.dayMinWidth):this.renderSimpleLayout(i,a)}}function pq(e,t){let r=new UW(e.renderRange,t);return new HW(r,/year|month|week/.test(e.currentRangeUnit))}class mq extends rR{buildRenderRange(t,r,n){let s=super.buildRenderRange(t,r,n),{props:i}=this;return gq({currentRange:s,snapToWeek:/^(year|month)$/.test(r),fixedWeekCount:i.fixedWeekCount,dateEnv:i.dateEnv})}}function gq(e){let{dateEnv:t,currentRange:r}=e,{start:n,end:s}=r,i;if(e.snapToWeek&&(n=t.startOfWeek(n),i=t.startOfWeek(s),i.valueOf()!==s.valueOf()&&(s=y1(i,1))),e.fixedWeekCount){let a=t.startOfWeek(t.startOfMonth(ur(r.end,-1))),l=Math.ceil(C9(a,s));s=y1(s,6-l)}return{start:n,end:s}}var yq=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';BD(yq);var xq=ui({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:hq,dateProfileGeneratorClass:mq},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});Kv.touchMouseIgnoreWait=500;let wy=0,yh=0,ky=!1;class ZR{constructor(t){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=r=>{if(!this.shouldIgnoreMouse()&&vq(r)&&this.tryStart(r)){let n=this.createEventFromMouse(r,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=r=>{let n=this.createEventFromMouse(r);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleMouseUp=r=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(r)),this.cleanup()},this.handleTouchStart=r=>{if(this.tryStart(r)){this.isTouchDragging=!0;let n=this.createEventFromTouch(r,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n);let s=r.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=r=>{let n=this.createEventFromTouch(r);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleTouchEnd=r=>{if(this.isDragging){let n=r.target;n.removeEventListener("touchmove",this.handleTouchMove),n.removeEventListener("touchend",this.handleTouchEnd),n.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(r)),this.cleanup(),this.isTouchDragging=!1,bq()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=r=>{if(!this.shouldIgnoreMove){let n=window.scrollX-this.prevScrollX+this.prevPageX,s=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:r,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:n,pageY:s,deltaX:n-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=t,this.emitter=new Tp,t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),wq()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),kq()}tryStart(t){let r=this.querySubjectEl(t),n=t.target;return r&&(!this.handleSelector||Pr(n,this.handleSelector))?(this.subjectEl=r,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){ky=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(t){return this.selector?Pr(t.target,this.selector):this.containerEl}shouldIgnoreMouse(){return wy||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(ky=!0)}initScrollWatch(t){this.shouldWatchScroll&&(this.recordCoords(t),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(t){this.shouldWatchScroll&&(this.prevPageX=t.pageX,this.prevPageY=t.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(t,r){let n=0,s=0;return r?(this.origPageX=t.pageX,this.origPageY=t.pageY):(n=t.pageX-this.origPageX,s=t.pageY-this.origPageY),{origEvent:t,isTouch:!1,subjectEl:this.subjectEl,pageX:t.pageX,pageY:t.pageY,deltaX:n,deltaY:s}}createEventFromTouch(t,r){let n=t.touches,s,i,a=0,l=0;return n&&n.length?(s=n[0].pageX,i=n[0].pageY):(s=t.pageX,i=t.pageY),r?(this.origPageX=s,this.origPageY=i):(a=s-this.origPageX,l=i-this.origPageY),{origEvent:t,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:i,deltaX:a,deltaY:l}}}function vq(e){return e.button===0&&!e.ctrlKey}function bq(){wy+=1,setTimeout(()=>{wy-=1},Kv.touchMouseIgnoreWait)}function wq(){yh+=1,yh===1&&window.addEventListener("touchmove",XR,{passive:!1})}function kq(){yh-=1,yh||window.removeEventListener("touchmove",XR,{passive:!1})}function XR(e){ky&&e.preventDefault()}class Sq{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(t,r,n){this.sourceEl=t,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=r-window.scrollX,this.origScreenY=n-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(t,r){this.deltaX=t-window.scrollX-this.origScreenX,this.deltaY=r-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(t){t?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=t,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=t)}stop(t,r){let n=()=>{this.cleanup(),r()};t&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(n,this.revertDuration):setTimeout(n,0)}doRevertAnimation(t,r){let n=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();n.style.transition="top "+r+"ms,left "+r+"ms",Tc(n,{left:s.left,top:s.top}),c9(n,()=>{n.style.transition="",t()})}cleanup(){this.mirrorEl&&(Av(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Tc(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let t=this.sourceElRect,r=this.mirrorEl;return r||(r=this.mirrorEl=this.sourceEl.cloneNode(!0),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.pointerEvents="none",r.classList.add("fc-event-dragging"),Tc(r,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:t.right-t.left,height:t.bottom-t.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(r)),r}}class JR extends qv{constructor(t,r){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=t,this.doesListening=r,this.scrollTop=this.origScrollTop=t.getScrollTop(),this.scrollLeft=this.origScrollLeft=t.getScrollLeft(),this.scrollWidth=t.getScrollWidth(),this.scrollHeight=t.getScrollHeight(),this.clientWidth=t.getClientWidth(),this.clientHeight=t.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class e_ extends JR{constructor(t,r){super(new RW(t),r)}getEventTarget(){return this.scrollController.el}computeClientRect(){return AW(this.scrollController.el)}}class Eq extends JR{constructor(t){super(new _W,t)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const G1=typeof performance=="function"?performance.now:Date.now;class Nq{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let t=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(t){let r=G1();this.handleSide(t,(r-this.msSinceRequest)/1e3),this.requestAnimation(r)}else this.isAnimating=!1}}}start(t,r,n){this.isEnabled&&(this.scrollCaches=this.buildCaches(n),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(t,r))}handleMove(t,r){if(this.isEnabled){let n=t-window.scrollX,s=r-window.scrollY,i=this.pointerScreenY===null?0:s-this.pointerScreenY,a=this.pointerScreenX===null?0:n-this.pointerScreenX;i<0?this.everMovedUp=!0:i>0&&(this.everMovedDown=!0),a<0?this.everMovedLeft=!0:a>0&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(G1()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let t of this.scrollCaches)t.destroy();this.scrollCaches=null}}requestAnimation(t){this.msSinceRequest=t,requestAnimationFrame(this.animate)}handleSide(t,r){let{scrollCache:n}=t,{edgeThreshold:s}=this,i=s-t.distance,a=i*i/(s*s)*this.maxVelocity*r,l=1;switch(t.name){case"left":l=-1;case"right":n.setScrollLeft(n.getScrollLeft()+a*l);break;case"top":l=-1;case"bottom":n.setScrollTop(n.getScrollTop()+a*l);break}}computeBestEdge(t,r){let{edgeThreshold:n}=this,s=null,i=this.scrollCaches||[];for(let a of i){let l=a.clientRect,c=t-l.left,u=l.right-t,d=r-l.top,f=l.bottom-r;c>=0&&u>=0&&d>=0&&f>=0&&(d<=n&&this.everMovedUp&&a.canScrollUp()&&(!s||s.distance>d)&&(s={scrollCache:a,name:"top",distance:d}),f<=n&&this.everMovedDown&&a.canScrollDown()&&(!s||s.distance>f)&&(s={scrollCache:a,name:"bottom",distance:f}),c<=n&&this.everMovedLeft&&a.canScrollLeft()&&(!s||s.distance>c)&&(s={scrollCache:a,name:"left",distance:c}),u<=n&&this.everMovedRight&&a.canScrollRight()&&(!s||s.distance>u)&&(s={scrollCache:a,name:"right",distance:u}))}return s}buildCaches(t){return this.queryScrollEls(t).map(r=>r===window?new Eq(!1):new e_(r,!1))}queryScrollEls(t){let r=[];for(let n of this.scrollQuery)typeof n=="object"?r.push(n):r.push(...Array.prototype.slice.call(t.getRootNode().querySelectorAll(n)));return r}}class Yu extends MW{constructor(t,r){super(t),this.containerEl=t,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,u9(document.body),f9(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let i=this.minDistance,a,{deltaX:l,deltaY:c}=s;a=l*l+c*c,a>=i*i&&this.handleDistanceSurpassed(s)}this.isDragging&&(s.origEvent.type!=="scroll"&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,d9(document.body),h9(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let n=this.pointer=new ZR(t);n.emitter.on("pointerdown",this.onPointerDown),n.emitter.on("pointermove",this.onPointerMove),n.emitter.on("pointerup",this.onPointerUp),r&&(n.selector=r),this.mirror=new Sq,this.autoScroller=new Nq}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(t){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)}handleDelayEnd(t){this.isDelayEnded=!0,this.tryStartDrag(t)}handleDistanceSurpassed(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)}tryStartDrag(t){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY,this.containerEl),this.emitter.trigger("dragstart",t),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))}stopDrag(t){this.isDragging=!1,this.emitter.trigger("dragend",t)}setIgnoreMove(t){this.pointer.shouldIgnoreMove=t}setMirrorIsVisible(t){this.mirror.setIsVisible(t)}setMirrorNeedsRevert(t){this.mirrorNeedsRevert=t}setAutoScrollEnabled(t){this.autoScroller.isEnabled=t}}class jq{constructor(t){this.el=t,this.origRect=Gv(t),this.scrollCaches=wR(t).map(r=>new e_(r,!0))}destroy(){for(let t of this.scrollCaches)t.destroy()}computeLeft(){let t=this.origRect.left;for(let r of this.scrollCaches)t+=r.origScrollLeft-r.getScrollLeft();return t}computeTop(){let t=this.origRect.top;for(let r of this.scrollCaches)t+=r.origScrollTop-r.getScrollTop();return t}isWithinClipping(t,r){let n={left:t,top:r};for(let s of this.scrollCaches)if(!Cq(s.getEventTarget())&&!xW(n,s.clientRect))return!1;return!0}}function Cq(e){let t=e.tagName;return t==="HTML"||t==="BODY"}class Dp{constructor(t,r){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=n=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(n),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",n)):s.setIgnoreMove(!0)},this.handleDragStart=n=>{this.emitter.trigger("dragstart",n),this.handleMove(n,!0)},this.handleDragMove=n=>{this.emitter.trigger("dragmove",n),this.handleMove(n)},this.handlePointerUp=n=>{this.releaseHits(),this.emitter.trigger("pointerup",n)},this.handleDragEnd=n=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,n),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",n)},this.droppableStore=r,t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragstart",this.handleDragStart),t.emitter.on("dragmove",this.handleDragMove),t.emitter.on("pointerup",this.handlePointerUp),t.emitter.on("dragend",this.handleDragEnd),this.dragging=t,this.emitter=new Tp}processFirstCoord(t){let r={left:t.pageX,top:t.pageY},n=r,s=t.subjectEl,i;s instanceof HTMLElement&&(i=Gv(s),n=vW(n,i));let a=this.initialHit=this.queryHitForOffset(n.left,n.top);if(a){if(this.useSubjectCenter&&i){let l=xR(i,a.rect);l&&(n=bW(l))}this.coordAdjust=wW(n,r)}else this.coordAdjust={left:0,top:0}}handleMove(t,r){let n=this.queryHitForOffset(t.pageX+this.coordAdjust.left,t.pageY+this.coordAdjust.top);(r||!Rp(this.movingHit,n))&&(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,t))}prepareHits(){this.offsetTrackers=io(this.droppableStore,t=>(t.component.prepareHits(),new jq(t.el)))}releaseHits(){let{offsetTrackers:t}=this;for(let r in t)t[r].destroy();this.offsetTrackers={}}queryHitForOffset(t,r){let{droppableStore:n,offsetTrackers:s}=this,i=null;for(let a in n){let l=n[a].component,c=s[a];if(c&&c.isWithinClipping(t,r)){let u=c.computeLeft(),d=c.computeTop(),f=t-u,h=r-d,{origRect:p}=c,g=p.right-p.left,y=p.bottom-p.top;if(f>=0&&f<g&&h>=0&&h<y){let b=l.queryHit(f,h,g,y);b&&jp(b.dateProfile.activeRange,b.dateSpan.range)&&(this.disablePointCheck||c.el.contains(c.el.getRootNode().elementFromPoint(f+u-window.scrollX,h+d-window.scrollY)))&&(!i||b.layer>i.layer)&&(b.componentId=a,b.context=l.context,b.rect.left+=u,b.rect.right+=u,b.rect.top+=d,b.rect.bottom+=d,i=b)}}}return i}}function Rp(e,t){return!e&&!t?!0:!!e!=!!t?!1:oW(e.dateSpan,t.dateSpan)}function t_(e,t){let r={};for(let n of t.pluginHooks.datePointTransforms)Object.assign(r,n(e,t));return Object.assign(r,Tq(e,t.dateEnv)),r}function Tq(e,t){return{date:t.toDate(e.range.start),dateStr:t.formatIso(e.range.start,{omitTime:e.allDay}),allDay:e.allDay}}class Aq extends Nl{constructor(t){super(t),this.handlePointerDown=n=>{let{dragging:s}=this,i=n.origEvent.target;s.setIgnoreMove(!this.component.isValidDateDownEl(i))},this.handleDragEnd=n=>{let{component:s}=this,{pointer:i}=this.dragging;if(!i.wasTouchScroll){let{initialHit:a,finalHit:l}=this.hitDragging;if(a&&l&&Rp(a,l)){let{context:c}=s,u=Object.assign(Object.assign({},t_(a.dateSpan,c)),{dayEl:a.dayEl,jsEvent:n.origEvent,view:c.viewApi||c.calendarApi.view});c.emitter.trigger("dateClick",u)}}},this.dragging=new Yu(t.el),this.dragging.autoScroller.isEnabled=!1;let r=this.hitDragging=new Dp(this.dragging,Wv(t));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class Dq extends Nl{constructor(t){super(t),this.dragSelection=null,this.handlePointerDown=a=>{let{component:l,dragging:c}=this,{options:u}=l.context,d=u.selectable&&l.isValidDateDownEl(a.origEvent.target);c.setIgnoreMove(!d),c.delay=a.isTouch?Rq(l):null},this.handleDragStart=a=>{this.component.context.calendarApi.unselect(a)},this.handleHitUpdate=(a,l)=>{let{context:c}=this.component,u=null,d=!1;if(a){let f=this.hitDragging.initialHit;a.componentId===f.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(f,a)||(u=_q(f,a,c.pluginHooks.dateSelectionTransformers)),(!u||!$W(u,a.dateProfile,c))&&(d=!0,u=null)}u?c.dispatch({type:"SELECT_DATES",selection:u}):l||c.dispatch({type:"UNSELECT_DATES"}),d?Dv():Rv(),l||(this.dragSelection=u)},this.handlePointerUp=a=>{this.dragSelection&&(uR(this.dragSelection,a,this.component.context),this.dragSelection=null)};let{component:r}=t,{options:n}=r.context,s=this.dragging=new Yu(t.el);s.touchScrollAllowed=!1,s.minDistance=n.selectMinDistance||0,s.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new Dp(this.dragging,Wv(t));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function Rq(e){let{options:t}=e.context,r=t.selectLongPressDelay;return r==null&&(r=t.longPressDelay),r}function _q(e,t,r){let n=e.dateSpan,s=t.dateSpan,i=[n.range.start,n.range.end,s.range.start,s.range.end];i.sort(x9);let a={};for(let l of r){let c=l(e,t);if(c===!1)return null;c&&Object.assign(a,c)}return a.range={start:i[0],end:i[3]},a.allDay=n.allDay,a}class Gu extends Nl{constructor(t){super(t),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let l=a.origEvent.target,{component:c,dragging:u}=this,{mirror:d}=u,{options:f}=c.context,h=c.context;this.subjectEl=a.subjectEl;let p=this.subjectSeg=dl(a.subjectEl),y=(this.eventRange=p.eventRange).instance.instanceId;this.relevantEvents=Uv(h.getCurrentData().eventStore,y),u.minDistance=a.isTouch?0:f.eventDragMinDistance,u.delay=a.isTouch&&y!==c.props.eventSelection?Mq(c):null,f.fixedMirrorParent?d.parentNode=f.fixedMirrorParent:d.parentNode=Pr(l,".fc"),d.revertDuration=f.dragRevertDuration;let b=c.isValidSegDownEl(l)&&!Pr(l,".fc-event-resizer");u.setIgnoreMove(!b),this.isDragging=b&&a.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=a=>{let l=this.component.context,c=this.eventRange,u=c.instance.instanceId;a.isTouch?u!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:u}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(a),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Lt(l,c.def,c.instance),jsEvent:a.origEvent,view:l.viewApi}))},this.handleHitUpdate=(a,l)=>{if(!this.isDragging)return;let c=this.relevantEvents,u=this.hitDragging.initialHit,d=this.component.context,f=null,h=null,p=null,g=!1,y={affectedEvents:c,mutatedEvents:ns(),isEvent:!0};if(a){f=a.context;let b=f.options;d===f||b.editable&&b.droppable?(h=Iq(u,a,this.eventRange.instance.range.start,f.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(p=$v(c,f.getCurrentData().eventUiBases,h,f),y.mutatedEvents=p,NR(y,a.dateProfile,f)||(g=!0,h=null,p=null,y.mutatedEvents=ns()))):f=null}this.displayDrag(f,y),g?Dv():Rv(),l||(d===f&&Rp(u,a)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!a||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=f,this.validMutation=h,this.mutatedRelevantEvents=p)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=a=>{if(this.isDragging){let l=this.component.context,c=l.viewApi,{receivingContext:u,validMutation:d}=this,f=this.eventRange.def,h=this.eventRange.instance,p=new Lt(l,f,h),g=this.relevantEvents,y=this.mutatedRelevantEvents,{finalHit:b}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:p,jsEvent:a.origEvent,view:c}),d){if(u===l){let v=new Lt(l,y.defs[f.defId],h?y.instances[h.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:y});let x={oldEvent:p,event:v,relatedEvents:Fa(y,l,h),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:g})}},w={};for(let k of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(w,k(d,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},x),w),{el:a.subjectEl,delta:d.datesDelta,jsEvent:a.origEvent,view:c})),l.emitter.trigger("eventChange",x)}else if(u){let v={event:p,relatedEvents:Fa(g,l,h),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:g})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},v),{draggedEl:a.subjectEl,view:c})),l.dispatch({type:"REMOVE_EVENTS",eventStore:g}),l.emitter.trigger("eventRemove",v);let x=y.defs[f.defId],w=y.instances[h.instanceId],k=new Lt(u,x,w);u.dispatch({type:"MERGE_EVENTS",eventStore:y});let S={event:k,relatedEvents:Fa(y,u,w),revert(){u.dispatch({type:"REMOVE_EVENTS",eventStore:y})}};u.emitter.trigger("eventAdd",S),a.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),u.emitter.trigger("drop",Object.assign(Object.assign({},t_(b.dateSpan,u)),{draggedEl:a.subjectEl,jsEvent:a.origEvent,view:b.context.viewApi})),u.emitter.trigger("eventReceive",Object.assign(Object.assign({},S),{draggedEl:a.subjectEl,view:b.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:r}=this,{options:n}=r.context,s=this.dragging=new Yu(t.el);s.pointer.selector=Gu.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new Dp(this.dragging,xy);i.useSubjectCenter=t.useEventCenter,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(t,r){let n=this.component.context,s=this.receivingContext;s&&s!==t&&(s===n?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:ns(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),t&&t.dispatch({type:"SET_EVENT_DRAG",state:r})}clearDrag(){let t=this.component.context,{receivingContext:r}=this;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),t!==r&&t.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Gu.SELECTOR=".fc-event-draggable, .fc-event-resizable";function Iq(e,t,r,n){let s=e.dateSpan,i=t.dateSpan,a=s.range.start,l=i.range.start,c={};s.allDay!==i.allDay&&(c.allDay=i.allDay,c.hasEnd=t.context.options.allDayMaintainDuration,i.allDay?a=Pt(r):a=r);let u=Io(a,l,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);u.milliseconds&&(c.allDay=!1);let d={datesDelta:u,standardProps:c};for(let f of n)f(d,e,t);return d}function Mq(e){let{options:t}=e.context,r=t.eventLongPressDelay;return r==null&&(r=t.longPressDelay),r}class Oq extends Nl{constructor(t){super(t),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=i=>{let{component:a}=this,l=this.querySegEl(i),c=dl(l),u=this.eventRange=c.eventRange;this.dragging.minDistance=a.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(i.origEvent.target)||i.isTouch&&this.component.props.eventSelection!==u.instance.instanceId)},this.handleDragStart=i=>{let{context:a}=this.component,l=this.eventRange;this.relevantEvents=Uv(a.getCurrentData().eventStore,this.eventRange.instance.instanceId);let c=this.querySegEl(i);this.draggingSegEl=c,this.draggingSeg=dl(c),a.calendarApi.unselect(),a.emitter.trigger("eventResizeStart",{el:c,event:new Lt(a,l.def,l.instance),jsEvent:i.origEvent,view:a.viewApi})},this.handleHitUpdate=(i,a,l)=>{let{context:c}=this.component,u=this.relevantEvents,d=this.hitDragging.initialHit,f=this.eventRange.instance,h=null,p=null,g=!1,y={affectedEvents:u,mutatedEvents:ns(),isEvent:!0};i&&(i.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,i)||(h=Pq(d,i,l.subjectEl.classList.contains("fc-event-resizer-start"),f.range))),h&&(p=$v(u,c.getCurrentData().eventUiBases,h,c),y.mutatedEvents=p,NR(y,i.dateProfile,c)||(g=!0,h=null,p=null,y.mutatedEvents=null)),p?c.dispatch({type:"SET_EVENT_RESIZE",state:y}):c.dispatch({type:"UNSET_EVENT_RESIZE"}),g?Dv():Rv(),a||(h&&Rp(d,i)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=p)},this.handleDragEnd=i=>{let{context:a}=this.component,l=this.eventRange.def,c=this.eventRange.instance,u=new Lt(a,l,c),d=this.relevantEvents,f=this.mutatedRelevantEvents;if(a.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:u,jsEvent:i.origEvent,view:a.viewApi}),this.validMutation){let h=new Lt(a,f.defs[l.defId],c?f.instances[c.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:f});let p={oldEvent:u,event:h,relatedEvents:Fa(f,a,c),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:d})}};a.emitter.trigger("eventResize",Object.assign(Object.assign({},p),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||ft(0),endDelta:this.validMutation.endDelta||ft(0),jsEvent:i.origEvent,view:a.viewApi})),a.emitter.trigger("eventChange",p)}else a.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:r}=t,n=this.dragging=new Yu(t.el);n.pointer.selector=".fc-event-resizer",n.touchScrollAllowed=!1,n.autoScroller.isEnabled=r.context.options.dragScroll;let s=this.hitDragging=new Dp(this.dragging,Wv(t));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(t){return Pr(t.subjectEl,".fc-event")}}function Pq(e,t,r,n){let s=e.context.dateEnv,i=e.dateSpan.range.start,a=t.dateSpan.range.start,l=Io(i,a,s,e.largeUnit);if(r){if(s.add(n.start,l)<n.end)return{startDelta:l}}else if(s.add(n.end,l)>n.start)return{endDelta:l};return null}class Lq{constructor(t){this.context=t,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=n=>{n.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=n=>{let s=this.context.options.unselectCancel,i=VD(n.origEvent);this.matchesCancel=!!Pr(i,s),this.matchesEvent=!!Pr(i,Gu.SELECTOR)},this.onDocumentPointerUp=n=>{let{context:s}=this,{documentPointer:i}=this,a=s.getCurrentData();if(!i.wasTouchScroll){if(a.dateSelection&&!this.isRecentPointerDateSelect){let l=s.options.unselectAuto;l&&(!l||!this.matchesCancel)&&s.calendarApi.unselect(n)}a.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let r=this.documentPointer=new ZR(document);r.shouldIgnoreMove=!0,r.shouldWatchScroll=!1,r.emitter.on("pointerdown",this.onDocumentPointerDown),r.emitter.on("pointerup",this.onDocumentPointerUp),t.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const Fq={fixedMirrorParent:H},Bq={dateClick:H,eventDragStart:H,eventDragStop:H,eventDrop:H,eventResizeStart:H,eventResizeStop:H,eventResize:H,drop:H,eventReceive:H,eventLeave:H};Kv.dataAttrPrefix="";var zq=ui({name:"@fullcalendar/interaction",componentInteractions:[Aq,Dq,Gu,Oq],calendarInteractions:[Lq],elementDraggingImpl:Yu,optionRefiners:Fq,listenerRefiners:Bq}),Sy=["MO","TU","WE","TH","FR","SA","SU"],Yr=function(){function e(t,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=r}return e.fromStr=function(t){return new e(Sy.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=Sy[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}(),ar=function(e){return e!=null},gs=function(e){return typeof e=="number"},q1=function(e){return typeof e=="string"&&Sy.includes(e)},xn=Array.isArray,Os=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var r=[],n=e;n<t;n++)r.push(n);return r},dt=function(e,t){var r=0,n=[];if(xn(e))for(;r<t;r++)n[r]=[].concat(e);else for(;r<t;r++)n[r]=e;return n},Uq=function(e){return xn(e)?e:[e]};function po(e,t,r){r===void 0&&(r=" ");var n=String(e);return t=t>>0,n.length>t?String(n):(t=t-n.length,t>r.length&&(r+=dt(r,t/r.length)),r.slice(0,t)+String(n))}var Hq=function(e,t,r){var n=e.split(t);return r?n.slice(0,r).concat([n.slice(r).join(t)]):n},Pn=function(e,t){var r=e%t;return r*t<0?r+t:r},cg=function(e,t){return{div:Math.floor(e/t),mod:Pn(e,t)}},bs=function(e){return!ar(e)||e.length===0},mr=function(e){return!bs(e)},St=function(e,t){return mr(e)&&e.indexOf(t)!==-1},Qa=function(e,t,r,n,s,i){return n===void 0&&(n=0),s===void 0&&(s=0),i===void 0&&(i=0),new Date(Date.UTC(e,t-1,r,n,s,i))},Vq=[31,28,31,30,31,30,31,31,30,31,30,31],r_=1e3*60*60*24,n_=9999,s_=Qa(1970,1,1),$q=[6,0,1,2,3,4,5],Ic=function(e){return e%4===0&&e%100!==0||e%400===0},i_=function(e){return e instanceof Date},dc=function(e){return i_(e)&&!isNaN(e.getTime())},Wq=function(e,t){var r=e.getTime(),n=t.getTime(),s=r-n;return Math.round(s/r_)},Ey=function(e){return Wq(e,s_)},a_=function(e){return new Date(s_.getTime()+e*r_)},Yq=function(e){var t=e.getUTCMonth();return t===1&&Ic(e.getUTCFullYear())?29:Vq[t]},fl=function(e){return $q[e.getUTCDay()]},K1=function(e,t){var r=Qa(e,t+1,1);return[fl(r),Yq(r)]},o_=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},Ny=function(e){var t=new Date(e.getTime());return t},Q1=function(e){for(var t=[],r=0;r<e.length;r++)t.push(Ny(e[r]));return t},yu=function(e){e.sort(function(t,r){return t.getTime()-r.getTime()})},Xv=function(e,t){t===void 0&&(t=!0);var r=new Date(e);return[po(r.getUTCFullYear().toString(),4,"0"),po(r.getUTCMonth()+1,2,"0"),po(r.getUTCDate(),2,"0"),"T",po(r.getUTCHours(),2,"0"),po(r.getUTCMinutes(),2,"0"),po(r.getUTCSeconds(),2,"0"),t?"Z":""].join("")},Jv=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,r=t.exec(e);if(!r)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[5],10)||0,parseInt(r[6],10)||0,parseInt(r[7],10)||0))},Z1=function(e,t){var r=e.toLocaleString("sv-SE",{timeZone:t});return r.replace(" ","T")+"Z"},Gq=function(e,t){var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(Z1(e,r)),s=new Date(Z1(e,t??"UTC")),i=s.getTime()-n.getTime();return new Date(e.getTime()-i)},Mo=function(){function e(t,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=r,t==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):t==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):t==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var r=this.minDate&&t<this.minDate,n=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),jy=function(e,t){return jy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},jy(e,t)};function eb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");jy(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Nn=function(){return Nn=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Nn.apply(this,arguments)};function xe(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var X1=function(e){eb(t,e);function t(r,n,s){var i=e.call(this,r,n)||this;return i.iterator=s,i}return t.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},t}(Mo),xh={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},J1=function(e,t){return e.indexOf(t)!==-1},qq=function(e){return e.toString()},Kq=function(e,t,r){return"".concat(t," ").concat(r,", ").concat(e)},di=function(){function e(t,r,n,s){if(r===void 0&&(r=qq),n===void 0&&(n=xh),s===void 0&&(s=Kq),this.text=[],this.language=n||xh,this.gettext=r,this.dateFormatter=s,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var i=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);i.sort(function(d,f){return d-f}),a.sort(function(d,f){return f-d}),this.bymonthday=i.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(ar(this.origOptions.byweekday)){var l=xn(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],c=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return!!d.n}),isWeekdays:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")===-1&&c.indexOf("SU")===-1,isEveryDay:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")!==-1&&c.indexOf("SU")!==-1};var u=function(d,f){return d.weekday-f.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var r=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var n in t.origOptions){if(J1(["dtstart","tzid","wkst","freq"],n))return!0;if(!J1(e.IMPLEMENTED[t.options.freq],n))return!1}return r},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[we.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var r,n=this.gettext;if(t===-1)return n("last");var s=Math.abs(t);switch(s){case 1:case 21:case 31:r=s+n("st");break;case 2:case 22:r=s+n("nd");break;case 3:case 23:r=s+n("rd");break;default:r=s+n("th")}return t<0?r+" "+n("last"):r},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var r=gs(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[r]},e.prototype.plural=function(t){return t%100!==1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,r,n,s){var i=this;s===void 0&&(s=","),xn(t)||(t=[t]);var a=function(c,u,d){for(var f="",h=0;h<c.length;h++)h!==0&&(h===c.length-1?f+=" "+d+" ":f+=u+" "),f+=c[h];return f};r=r||function(c){return c.toString()};var l=function(c){return r&&r.call(i,c)};return n?a(t.map(l),s,n):t.map(l).join(s+" ")},e}(),Qq=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,r;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;t=null;for(var s in this.rules){n=this.rules[s];var i=n.exec(this.text);i&&(t===null||i[0].length>t[0].length)&&(t=i,r=s)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function l_(e,t){t===void 0&&(t=xh);var r={},n=new Qq(t.tokens);if(!n.start(e))return null;return s(),r;function s(){n.expect("every");var h=n.acceptNumber();if(h&&(r.interval=parseInt(h[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=we.DAILY,n.nextSymbol()&&(a(),f());break;case"weekday(s)":r.freq=we.WEEKLY,r.byweekday=[we.MO,we.TU,we.WE,we.TH,we.FR],n.nextSymbol(),a(),f();break;case"week(s)":r.freq=we.WEEKLY,n.nextSymbol()&&(i(),a(),f());break;case"hour(s)":r.freq=we.HOURLY,n.nextSymbol()&&(i(),f());break;case"minute(s)":r.freq=we.MINUTELY,n.nextSymbol()&&(i(),f());break;case"month(s)":r.freq=we.MONTHLY,n.nextSymbol()&&(i(),f());break;case"year(s)":r.freq=we.YEARLY,n.nextSymbol()&&(i(),f());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=we.WEEKLY;var p=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[we[p]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var g=c();if(!g)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(we[g]),n.nextSymbol()}a(),d(),f();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=we.YEARLY,r.bymonth=[l()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=l();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(y),n.nextSymbol()}i(),f();break;default:throw new Error("Unknown symbol")}}function i(){var h=n.accept("on"),p=n.accept("the");if(h||p)do{var g=u(),y=c(),b=l();if(g)y?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(we[y].nth(g))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(g),n.accept("day(s)"));else if(y)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(we[y]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[we.MO,we.TU,we.WE,we.TH,we.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var v=n.acceptNumber();if(!v)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(v[0],10)];n.accept("comma");){if(v=n.acceptNumber(),!v)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(v[0],10))}}else if(b)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(b);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var h=n.accept("at");if(h)do{var p=n.acceptNumber();if(!p)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(p[0],10)];n.accept("comma");){if(p=n.acceptNumber(),!p)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(p[0],10))}}while(n.accept("comma")||n.accept("at"))}function l(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function c(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var h=parseInt(n.value[1],10);if(h<-366||h>366)throw new Error("Nth out of range: "+h);return n.nextSymbol(),n.accept("last")?-h:h;default:return!1}}function d(){n.accept("on"),n.accept("the");var h=u();if(h)for(r.bymonthday=[h],n.nextSymbol();n.accept("comma");){if(h=u(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(h),n.nextSymbol()}}function f(){if(n.symbol==="until"){var h=Date.parse(n.text);if(!h)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(h)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var pt;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(pt||(pt={}));function tb(e){return e<pt.HOURLY}var Zq=function(e,t){return t===void 0&&(t=xh),new we(l_(e,t)||void 0)},jl=["count","until","interval","byweekday","bymonthday","bymonth"];di.IMPLEMENTED=[];di.IMPLEMENTED[pt.HOURLY]=jl;di.IMPLEMENTED[pt.MINUTELY]=jl;di.IMPLEMENTED[pt.DAILY]=["byhour"].concat(jl);di.IMPLEMENTED[pt.WEEKLY]=jl;di.IMPLEMENTED[pt.MONTHLY]=jl;di.IMPLEMENTED[pt.YEARLY]=["byweekno","byyearday"].concat(jl);var Xq=function(e,t,r,n){return new di(e,t,r,n).toString()},Jq=di.isFullyConvertible,vh=function(){function e(t,r,n,s){this.hour=t,this.minute=r,this.second=n,this.millisecond=s||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}(),eK=function(e){eb(t,e);function t(r,n,s,i,a,l,c){var u=e.call(this,i,a,l,c)||this;return u.year=r,u.month=n,u.day=s,u}return t.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},t.prototype.getWeekday=function(){return fl(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(r){this.year+=r},t.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),s=Pn(this.month,12);this.month=s,this.year+=n,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},t.prototype.addDaily=function(r){this.day+=r,this.fixDay()},t.prototype.addHours=function(r,n,s){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var i=cg(this.hour,24),a=i.div,l=i.mod;if(a&&(this.hour=l,this.addDaily(a)),bs(s)||St(s,this.hour))break}},t.prototype.addMinutes=function(r,n,s,i){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var a=cg(this.minute,60),l=a.div,c=a.mod;if(l&&(this.minute=c,this.addHours(l,!1,s)),(bs(s)||St(s,this.hour))&&(bs(i)||St(i,this.minute)))break}},t.prototype.addSeconds=function(r,n,s,i,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var l=cg(this.second,60),c=l.div,u=l.mod;if(c&&(this.second=u,this.addMinutes(c,!1,s,i)),(bs(s)||St(s,this.hour))&&(bs(i)||St(i,this.minute))&&(bs(a)||St(a,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var r=K1(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>n_))return;r=K1(this.year,this.month-1)[1]}}},t.prototype.add=function(r,n){var s=r.freq,i=r.interval,a=r.wkst,l=r.byhour,c=r.byminute,u=r.bysecond;switch(s){case pt.YEARLY:return this.addYears(i);case pt.MONTHLY:return this.addMonths(i);case pt.WEEKLY:return this.addWeekly(i,a);case pt.DAILY:return this.addDaily(i);case pt.HOURLY:return this.addHours(i,n,l);case pt.MINUTELY:return this.addMinutes(i,n,l,c);case pt.SECONDLY:return this.addSeconds(i,n,l,c,u)}},t}(vh);function c_(e){for(var t=[],r=Object.keys(e),n=0,s=r;n<s.length;n++){var i=s[n];St(DK,i)||t.push(i),i_(e[i])&&!dc(e[i])&&t.push(i)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return Nn({},e)}function tK(e){var t=Nn(Nn({},rb),c_(e));if(ar(t.byeaster)&&(t.freq=we.YEARLY),!(ar(t.freq)&&we.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),ar(t.wkst)?gs(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=we.MO.weekday,ar(t.bysetpos)){gs(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var r=0;r<t.bysetpos.length;r++){var n=t.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(t.byweekno||mr(t.byweekno)||mr(t.byyearday)||t.bymonthday||mr(t.bymonthday)||ar(t.byweekday)||ar(t.byeaster)))switch(t.freq){case we.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case we.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case we.WEEKLY:t.byweekday=[fl(t.dtstart)];break}if(ar(t.bymonth)&&!xn(t.bymonth)&&(t.bymonth=[t.bymonth]),ar(t.byyearday)&&!xn(t.byyearday)&&gs(t.byyearday)&&(t.byyearday=[t.byyearday]),!ar(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(xn(t.bymonthday)){for(var s=[],i=[],r=0;r<t.bymonthday.length;r++){var n=t.bymonthday[r];n>0?s.push(n):n<0&&i.push(n)}t.bymonthday=s,t.bynmonthday=i}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(ar(t.byweekno)&&!xn(t.byweekno)&&(t.byweekno=[t.byweekno]),!ar(t.byweekday))t.bynweekday=null;else if(gs(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(q1(t.byweekday))t.byweekday=[Yr.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof Yr)!t.byweekday.n||t.freq>we.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var a=[],l=[],r=0;r<t.byweekday.length;r++){var c=t.byweekday[r];if(gs(c)){a.push(c);continue}else if(q1(c)){a.push(Yr.fromStr(c).weekday);continue}!c.n||t.freq>we.MONTHLY?a.push(c.weekday):l.push([c.weekday,c.n])}t.byweekday=mr(a)?a:null,t.bynweekday=mr(l)?l:null}return ar(t.byhour)?gs(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<we.HOURLY?[t.dtstart.getUTCHours()]:null,ar(t.byminute)?gs(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<we.MINUTELY?[t.dtstart.getUTCMinutes()]:null,ar(t.bysecond)?gs(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<we.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function rK(e){var t=e.dtstart.getTime()%1e3;if(!tb(e.freq))return[];var r=[];return e.byhour.forEach(function(n){e.byminute.forEach(function(s){e.bysecond.forEach(function(i){r.push(new vh(n,s,i,t))})})}),r}function Cy(e){var t=e.split(`
`).map(nK).filter(function(r){return r!==null});return Nn(Nn({},t[0]),t[1])}function bh(e){var t={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!r)return t;var n=r[1],s=r[2];return n&&(t.tzid=n),t.dtstart=Jv(s),t}function nK(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return eE(e);var r=t[1];switch(r.toUpperCase()){case"RRULE":case"EXRULE":return eE(e);case"DTSTART":return bh(e);default:throw new Error("Unsupported RFC prop ".concat(r," in ").concat(e))}}function eE(e){var t=e.replace(/^RRULE:/i,""),r=bh(t),n=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(s){var i=s.split("="),a=i[0],l=i[1];switch(a.toUpperCase()){case"FREQ":r.freq=pt[l.toUpperCase()];break;case"WKST":r.wkst=Qn[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var c=sK(l),u=a.toLowerCase();r[u]=c;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=iK(l);break;case"DTSTART":case"TZID":var d=bh(e);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=Jv(l);break;case"BYEASTER":r.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),r}function sK(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map(tE)}return tE(e)}function tE(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function iK(e){var t=e.split(",");return t.map(function(r){if(r.length===2)return Qn[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(r));var s=Number(n[1]),i=n[2],a=Qn[i].weekday;return new Yr(a,s)})}var wh=function(){function e(t,r){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=r}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=Xv(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:Gq(this.date,this.tzid)},e}();function Ty(e){for(var t=[],r="",n=Object.keys(e),s=Object.keys(rb),i=0;i<n.length;i++)if(n[i]!=="tzid"&&St(s,n[i])){var a=n[i].toUpperCase(),l=e[n[i]],c="";if(!(!ar(l)||xn(l)&&!l.length)){switch(a){case"FREQ":c=we.FREQUENCIES[e.freq];break;case"WKST":gs(l)?c=new Yr(l).toString():c=l.toString();break;case"BYWEEKDAY":a="BYDAY",c=Uq(l).map(function(p){return p instanceof Yr?p:xn(p)?new Yr(p[0],p[1]):new Yr(p)}).toString();break;case"DTSTART":r=aK(l,e.tzid);break;case"UNTIL":c=Xv(l,!e.tzid);break;default:if(xn(l)){for(var u=[],d=0;d<l.length;d++)u[d]=String(l[d]);c=u.toString()}else c=String(l)}c&&t.push([a,c])}}var f=t.map(function(p){var g=p[0],y=p[1];return"".concat(g,"=").concat(y.toString())}).join(";"),h="";return f!==""&&(h="RRULE:".concat(f)),[r,h].filter(function(p){return!!p}).join(`
`)}function aK(e,t){return e?"DTSTART"+new wh(new Date(e),t).toString():""}function oK(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(r,n){return r.getTime()===t[n].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var lK=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,r,n){r&&(r=r instanceof Date?Ny(r):Q1(r)),t==="all"?this.all=r:(n._value=r,this[t].push(n))},e.prototype._cacheGet=function(t,r){var n=!1,s=r?Object.keys(r):[],i=function(d){for(var f=0;f<s.length;f++){var h=s[f];if(!oK(r[h],d[h]))return!0}return!1},a=this[t];if(t==="all")n=this.all;else if(xn(a))for(var l=0;l<a.length;l++){var c=a[l];if(!(s.length&&i(c))){n=c._value;break}}if(!n&&this.all){for(var u=new Mo(t,r),l=0;l<this.all.length&&u.accept(this.all[l]);l++);n=u.getValue(),this._cacheAdd(t,n,r)}return xn(n)?Q1(n):n instanceof Date?Ny(n):n},e}(),cK=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],dt(1,31),!0),dt(2,28),!0),dt(3,31),!0),dt(4,30),!0),dt(5,31),!0),dt(6,30),!0),dt(7,31),!0),dt(8,31),!0),dt(9,30),!0),dt(10,31),!0),dt(11,30),!0),dt(12,31),!0),dt(1,7),!0),uK=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],dt(1,31),!0),dt(2,29),!0),dt(3,31),!0),dt(4,30),!0),dt(5,31),!0),dt(6,30),!0),dt(7,31),!0),dt(8,31),!0),dt(9,30),!0),dt(10,31),!0),dt(11,30),!0),dt(12,31),!0),dt(1,7),!0),dK=Os(1,29),fK=Os(1,30),_i=Os(1,31),_r=Os(1,32),hK=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],_r,!0),fK,!0),_r,!0),_i,!0),_r,!0),_i,!0),_r,!0),_r,!0),_i,!0),_r,!0),_i,!0),_r,!0),_r.slice(0,7),!0),pK=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],_r,!0),dK,!0),_r,!0),_i,!0),_r,!0),_i,!0),_r,!0),_r,!0),_i,!0),_r,!0),_i,!0),_r,!0),_r.slice(0,7),!0),mK=Os(-28,0),gK=Os(-29,0),Ii=Os(-30,0),Ir=Os(-31,0),yK=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],Ir,!0),gK,!0),Ir,!0),Ii,!0),Ir,!0),Ii,!0),Ir,!0),Ir,!0),Ii,!0),Ir,!0),Ii,!0),Ir,!0),Ir.slice(0,7),!0),xK=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],Ir,!0),mK,!0),Ir,!0),Ii,!0),Ir,!0),Ii,!0),Ir,!0),Ir,!0),Ii,!0),Ir,!0),Ii,!0),Ir,!0),Ir.slice(0,7),!0),vK=[0,31,60,91,121,152,182,213,244,274,305,335,366],bK=[0,31,59,90,120,151,181,212,243,273,304,334,365],rE=function(){for(var e=[],t=0;t<55;t++)e=e.concat(Os(7));return e}();function wK(e,t){var r=Qa(e,1,1),n=Ic(e)?366:365,s=Ic(e+1)?366:365,i=Ey(r),a=fl(r),l=Nn(Nn({yearlen:n,nextyearlen:s,yearordinal:i,yearweekday:a},kK(e)),{wnomask:null});if(bs(t.byweekno))return l;l.wnomask=dt(0,n+7);var c,u,d=c=Pn(7-a+t.wkst,7);d>=4?(d=0,u=l.yearlen+Pn(a-t.wkst,7)):u=n-d;for(var f=Math.floor(u/7),h=Pn(u,7),p=Math.floor(f+h/4),g=0;g<t.byweekno.length;g++){var y=t.byweekno[g];if(y<0&&(y+=p+1),y>0&&y<=p){var b=void 0;y>1?(b=d+(y-1)*7,d!==c&&(b-=7-c)):b=d;for(var v=0;v<7&&(l.wnomask[b]=1,b++,l.wdaymask[b]!==t.wkst);v++);}}if(St(t.byweekno,1)){var b=d+p*7;if(d!==c&&(b-=7-c),b<n)for(var g=0;g<7&&(l.wnomask[b]=1,b+=1,l.wdaymask[b]!==t.wkst);g++);}if(d){var x=void 0;if(St(t.byweekno,-1))x=-1;else{var w=fl(Qa(e-1,1,1)),k=Pn(7-w.valueOf()+t.wkst,7),S=Ic(e-1)?366:365,E=void 0;k>=4?(k=0,E=S+Pn(w-t.wkst,7)):E=n-d,x=Math.floor(52+Pn(E,7)/4)}if(St(t.byweekno,x))for(var b=0;b<d;b++)l.wnomask[b]=1}return l}function kK(e){var t=Ic(e)?366:365,r=Qa(e,1,1),n=fl(r);return t===365?{mmask:cK,mdaymask:pK,nmdaymask:xK,wdaymask:rE.slice(n),mrange:bK}:{mmask:uK,mdaymask:hK,nmdaymask:yK,wdaymask:rE.slice(n),mrange:vK}}function SK(e,t,r,n,s,i){var a={lastyear:e,lastmonth:t,nwdaymask:[]},l=[];if(i.freq===we.YEARLY)if(bs(i.bymonth))l=[[0,r]];else for(var c=0;c<i.bymonth.length;c++)t=i.bymonth[c],l.push(n.slice(t-1,t+1));else i.freq===we.MONTHLY&&(l=[n.slice(t-1,t+1)]);if(bs(l))return a;a.nwdaymask=dt(0,r);for(var c=0;c<l.length;c++)for(var u=l[c],d=u[0],f=u[1]-1,h=0;h<i.bynweekday.length;h++){var p=void 0,g=i.bynweekday[h],y=g[0],b=g[1];b<0?(p=f+(b+1)*7,p-=Pn(s[p]-y,7)):(p=d+(b-1)*7,p+=Pn(7-s[p]+y,7)),d<=p&&p<=f&&(a.nwdaymask[p]=1)}return a}function EK(e,t){t===void 0&&(t=0);var r=e%19,n=Math.floor(e/100),s=e%100,i=Math.floor(n/4),a=n%4,l=Math.floor((n+8)/25),c=Math.floor((n-l+1)/3),u=Math.floor(19*r+n-i-c+15)%30,d=Math.floor(s/4),f=s%4,h=Math.floor(32+2*a+2*d-u-f)%7,p=Math.floor((r+11*u+22*h)/451),g=Math.floor((u+h-7*p+114)/31),y=(u+h-7*p+114)%31+1,b=Date.UTC(e,g-1,y+t),v=Date.UTC(e,0,1);return[Math.ceil((b-v)/(1e3*60*60*24))]}var NK=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,r){var n=this.options;if(t!==this.lastyear&&(this.yearinfo=wK(t,n)),mr(n.bynweekday)&&(r!==this.lastmonth||t!==this.lastyear)){var s=this.yearinfo,i=s.yearlen,a=s.mrange,l=s.wdaymask;this.monthinfo=SK(t,r,i,a,l,n)}ar(n.byeaster)&&(this.eastermask=EK(t,n.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[Os(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,r){for(var n=this.mrange[r-1],s=this.mrange[r],i=dt(null,this.yearlen),a=n;a<s;a++)i[a]=a;return[i,n,s]},e.prototype.wdayset=function(t,r,n){for(var s=dt(null,this.yearlen+7),i=Ey(Qa(t,r,n))-this.yearordinal,a=i,l=0;l<7&&(s[i]=i,++i,this.wdaymask[i]!==this.options.wkst);l++);return[s,a,i]},e.prototype.ddayset=function(t,r,n){var s=dt(null,this.yearlen),i=Ey(Qa(t,r,n))-this.yearordinal;return s[i]=i,[s,i,i+1]},e.prototype.htimeset=function(t,r,n,s){var i=this,a=[];return this.options.byminute.forEach(function(l){a=a.concat(i.mtimeset(t,l,n,s))}),yu(a),a},e.prototype.mtimeset=function(t,r,n,s){var i=this.options.bysecond.map(function(a){return new vh(t,r,a,s)});return yu(i),i},e.prototype.stimeset=function(t,r,n,s){return[new vh(t,r,n,s)]},e.prototype.getdayset=function(t){switch(t){case pt.YEARLY:return this.ydayset.bind(this);case pt.MONTHLY:return this.mdayset.bind(this);case pt.WEEKLY:return this.wdayset.bind(this);case pt.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case pt.HOURLY:return this.htimeset.bind(this);case pt.MINUTELY:return this.mtimeset.bind(this);case pt.SECONDLY:return this.stimeset.bind(this)}},e}();function jK(e,t,r,n,s,i){for(var a=[],l=0;l<e.length;l++){var c=void 0,u=void 0,d=e[l];d<0?(c=Math.floor(d/t.length),u=Pn(d,t.length)):(c=Math.floor((d-1)/t.length),u=Pn(d-1,t.length));for(var f=[],h=r;h<n;h++){var p=i[h];ar(p)&&f.push(p)}var g=void 0;c<0?g=f.slice(c)[0]:g=f[c];var y=t[u],b=a_(s.yearordinal+g),v=o_(b,y);St(a,v)||a.push(v)}return yu(a),a}function u_(e,t){var r=t.dtstart,n=t.freq,s=t.interval,i=t.until,a=t.bysetpos,l=t.count;if(l===0||s===0)return zs(e);var c=eK.fromDate(r),u=new NK(t);u.rebuild(c.year,c.month);for(var d=AK(u,c,t);;){var f=u.getdayset(n)(c.year,c.month,c.day),h=f[0],p=f[1],g=f[2],y=TK(h,p,g,u,t);if(mr(a))for(var b=jK(a,d,p,g,u,h),v=0;v<b.length;v++){var x=b[v];if(i&&x>i)return zs(e);if(x>=r){var w=nE(x,t);if(!e.accept(w)||l&&(--l,!l))return zs(e)}}else for(var v=p;v<g;v++){var k=h[v];if(ar(k))for(var S=a_(u.yearordinal+k),E=0;E<d.length;E++){var N=d[E],x=o_(S,N);if(i&&x>i)return zs(e);if(x>=r){var w=nE(x,t);if(!e.accept(w)||l&&(--l,!l))return zs(e)}}}if(t.interval===0||(c.add(t,y),c.year>n_))return zs(e);tb(n)||(d=u.gettimeset(n)(c.hour,c.minute,c.second,0)),u.rebuild(c.year,c.month)}}function CK(e,t,r){var n=r.bymonth,s=r.byweekno,i=r.byweekday,a=r.byeaster,l=r.bymonthday,c=r.bynmonthday,u=r.byyearday;return mr(n)&&!St(n,e.mmask[t])||mr(s)&&!e.wnomask[t]||mr(i)&&!St(i,e.wdaymask[t])||mr(e.nwdaymask)&&!e.nwdaymask[t]||a!==null&&!St(e.eastermask,t)||(mr(l)||mr(c))&&!St(l,e.mdaymask[t])&&!St(c,e.nmdaymask[t])||mr(u)&&(t<e.yearlen&&!St(u,t+1)&&!St(u,-e.yearlen+t)||t>=e.yearlen&&!St(u,t+1-e.yearlen)&&!St(u,-e.nextyearlen+t-e.yearlen))}function nE(e,t){return new wh(e,t.tzid).rezonedDate()}function zs(e){return e.getValue()}function TK(e,t,r,n,s){for(var i=!1,a=t;a<r;a++){var l=e[a];i=CK(n,l,s),i&&(e[l]=null)}return i}function AK(e,t,r){var n=r.freq,s=r.byhour,i=r.byminute,a=r.bysecond;return tb(n)?rK(r):n>=we.HOURLY&&mr(s)&&!St(s,t.hour)||n>=we.MINUTELY&&mr(i)&&!St(i,t.minute)||n>=we.SECONDLY&&mr(a)&&!St(a,t.second)?[]:e.gettimeset(n)(t.hour,t.minute,t.second,t.millisecond)}var Qn={MO:new Yr(0),TU:new Yr(1),WE:new Yr(2),TH:new Yr(3),FR:new Yr(4),SA:new Yr(5),SU:new Yr(6)},rb={freq:pt.YEARLY,dtstart:null,interval:1,wkst:Qn.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},DK=Object.keys(rb),we=function(){function e(t,r){t===void 0&&(t={}),r===void 0&&(r=!1),this._cache=r?null:new lK,this.origOptions=c_(t);var n=tK(t).parsedOptions;this.options=n}return e.parseText=function(t,r){return l_(t,r)},e.fromText=function(t,r){return Zq(t,r)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return u_(t,this.options)},e.prototype._cacheGet=function(t,r){return this._cache?this._cache._cacheGet(t,r):!1},e.prototype._cacheAdd=function(t,r,n){if(this._cache)return this._cache._cacheAdd(t,r,n)},e.prototype.all=function(t){if(t)return this._iter(new X1("all",{},t));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new Mo("all",{})),this._cacheAdd("all",r)),r},e.prototype.between=function(t,r,n,s){if(n===void 0&&(n=!1),!dc(t)||!dc(r))throw new Error("Invalid date passed in to RRule.between");var i={before:r,after:t,inc:n};if(s)return this._iter(new X1("between",i,s));var a=this._cacheGet("between",i);return a===!1&&(a=this._iter(new Mo("between",i)),this._cacheAdd("between",a,i)),a},e.prototype.before=function(t,r){if(r===void 0&&(r=!1),!dc(t))throw new Error("Invalid date passed in to RRule.before");var n={dt:t,inc:r},s=this._cacheGet("before",n);return s===!1&&(s=this._iter(new Mo("before",n)),this._cacheAdd("before",s,n)),s},e.prototype.after=function(t,r){if(r===void 0&&(r=!1),!dc(t))throw new Error("Invalid date passed in to RRule.after");var n={dt:t,inc:r},s=this._cacheGet("after",n);return s===!1&&(s=this._iter(new Mo("after",n)),this._cacheAdd("after",s,n)),s},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return Ty(this.origOptions)},e.prototype.toText=function(t,r,n){return Xq(this,t,r,n)},e.prototype.isFullyConvertibleToText=function(){return Jq(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=pt.YEARLY,e.MONTHLY=pt.MONTHLY,e.WEEKLY=pt.WEEKLY,e.DAILY=pt.DAILY,e.HOURLY=pt.HOURLY,e.MINUTELY=pt.MINUTELY,e.SECONDLY=pt.SECONDLY,e.MO=Qn.MO,e.TU=Qn.TU,e.WE=Qn.WE,e.TH=Qn.TH,e.FR=Qn.FR,e.SA=Qn.SA,e.SU=Qn.SU,e.parseString=Cy,e.optionsToString=Ty,e}();function RK(e,t,r,n,s,i){var a={},l=e.accept;function c(h,p){r.forEach(function(g){g.between(h,p,!0).forEach(function(y){a[Number(y)]=!0})})}s.forEach(function(h){var p=new wh(h,i).rezonedDate();a[Number(p)]=!0}),e.accept=function(h){var p=Number(h);return isNaN(p)?l.call(this,h):!a[p]&&(c(new Date(p-1),new Date(p+1)),!a[p])?(a[p]=!0,l.call(this,h)):!0},e.method==="between"&&(c(e.args.after,e.args.before),e.accept=function(h){var p=Number(h);return a[p]?!0:(a[p]=!0,l.call(this,h))});for(var u=0;u<n.length;u++){var d=new wh(n[u],i).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(h){u_(e,h.options)});var f=e._result;switch(yu(f),e.method){case"all":case"between":return f;case"before":return f.length&&f[f.length-1]||null;case"after":default:return f.length&&f[0]||null}}var sE={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function _K(e,t){var r=[],n=[],s=[],i=[],a=bh(e),l=a.dtstart,c=a.tzid,u=LK(e,t.unfold);return u.forEach(function(d){var f;if(d){var h=PK(d),p=h.name,g=h.parms,y=h.value;switch(p.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));r.push(Cy(d));break;case"RDATE":var b=(f=/RDATE(?:;TZID=([^:=]+))?/i.exec(d))!==null&&f!==void 0?f:[],v=b[1];v&&!c&&(c=v),n=n.concat(iE(y,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));s.push(Cy(y));break;case"EXDATE":i=i.concat(iE(y,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+p)}}}),{dtstart:l,tzid:c,rrulevals:r,rdatevals:n,exrulevals:s,exdatevals:i}}function IK(e,t){var r=_K(e,t),n=r.rrulevals,s=r.rdatevals,i=r.exrulevals,a=r.exdatevals,l=r.dtstart,c=r.tzid,u=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||n.length>1||s.length||i.length||a.length){var d=new d_(u);return d.dtstart(l),d.tzid(c||void 0),n.forEach(function(h){d.rrule(new we(ug(h,l,c),u))}),s.forEach(function(h){d.rdate(h)}),i.forEach(function(h){d.exrule(new we(ug(h,l,c),u))}),a.forEach(function(h){d.exdate(h)}),t.compatible&&t.dtstart&&d.rdate(l),d}var f=n[0]||{};return new we(ug(f,f.dtstart||t.dtstart||l,f.tzid||t.tzid||c),u)}function Ay(e,t){return t===void 0&&(t={}),IK(e,MK(t))}function ug(e,t,r){return Nn(Nn({},e),{dtstart:t,tzid:r})}function MK(e){var t=[],r=Object.keys(e),n=Object.keys(sE);if(r.forEach(function(s){St(n,s)||t.push(s)}),t.length)throw new Error("Invalid options: "+t.join(", "));return Nn(Nn({},sE),e)}function OK(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=Hq(e,":",1),r=t[0],n=t[1];return{name:r,value:n}}function PK(e){var t=OK(e),r=t.name,n=t.value,s=r.split(";");if(!s)throw new Error("empty property name");return{name:s[0].toUpperCase(),parms:s.slice(1),value:n}}function LK(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var r=e.split(`
`),n=0;n<r.length;){var s=r[n]=r[n].replace(/\s+$/g,"");s?n>0&&s[0]===" "?(r[n-1]+=s.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function FK(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function iE(e,t){return FK(t),e.split(",").map(function(r){return Jv(r)})}function aE(e){var t=this;return function(r){if(r!==void 0&&(t["_".concat(e)]=r),t["_".concat(e)]!==void 0)return t["_".concat(e)];for(var n=0;n<t._rrule.length;n++){var s=t._rrule[n].origOptions[e];if(s)return s}}}var d_=function(e){eb(t,e);function t(r){r===void 0&&(r=!1);var n=e.call(this,{},r)||this;return n.dtstart=aE.apply(n,["dtstart"]),n.tzid=aE.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return t.prototype._iter=function(r){return RK(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(r){oE(r,this._rrule)},t.prototype.exrule=function(r){oE(r,this._exrule)},t.prototype.rdate=function(r){lE(r,this._rdate)},t.prototype.exdate=function(r){lE(r,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(r){return Ay(r.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(r){return Ay(r.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},t.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(Ty({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(s){return s.replace(/^RRULE:/,"EXRULE:")}).filter(function(s){return!/^DTSTART/.test(s)}))}),this._rdate.length&&r.push(cE("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(cE("EXDATE",this._exdate,this.tzid())),r},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var r=new t(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},t}(we);function oE(e,t){if(!(e instanceof we))throw new TypeError(String(e)+" is not RRule instance");St(t.map(String),String(e))||t.push(e)}function lE(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");St(t.map(Number),Number(e))||(t.push(e),yu(t))}function cE(e,t,r){var n=!r||r.toUpperCase()==="UTC",s=n?"".concat(e,":"):"".concat(e,";TZID=").concat(r,":"),i=t.map(function(a){return Xv(a.valueOf(),n)}).join(",");return"".concat(s).concat(i)}const BK={parse(e,t){if(e.rrule!=null){let r=zK(e,t);if(r)return{typeData:{rruleSet:r.rruleSet,dateEnv:r.isTimeZoneSpecified?void 0:t},allDayGuess:!r.isTimeSpecified,duration:e.duration}}return null},expand(e,t,r){return e.rruleSet.between(ur(t.start,-1),ur(t.end,1)).map(n=>r.createMarker(e.dateEnv?e.dateEnv.toDate(n):n))}};function zK(e,t){let r,n=!1,s=!1;if(typeof e.rrule=="string"){let l=UK(e.rrule);r=l.rruleSet,n=l.isTimeSpecified,s=l.isTimeZoneSpecified}if(typeof e.rrule=="object"&&e.rrule){let l=uE(e.rrule,t);r=new d_,r.rrule(l.rrule),n=l.isTimeSpecified,s=l.isTimeZoneSpecified}let i=[].concat(e.exdate||[]),a=[].concat(e.exrule||[]);for(let l of i){let c=Np(l);n=n||!c.isTimeUnspecified,s=s||c.timeZoneOffset!==null,r.exdate(new Date(c.marker.valueOf()-(c.timeZoneOffset||0)*60*1e3))}for(let l of a){let c=uE(l,t);n=n||c.isTimeSpecified,s=s||c.isTimeZoneSpecified,r.exrule(c.rrule)}return{rruleSet:r,isTimeSpecified:n,isTimeZoneSpecified:s}}function uE(e,t){let r=!1,n=!1;function s(a){if(typeof a=="string"){let l=Np(a);return l?(r=r||!l.isTimeUnspecified,n=n||l.timeZoneOffset!==null,new Date(l.marker.valueOf()-(l.timeZoneOffset||0)*60*1e3)):null}return a}let i=Object.assign(Object.assign({},e),{dtstart:s(e.dtstart),until:s(e.until),freq:kh(e.freq),wkst:e.wkst==null?(t.weekDow-1+7)%7:kh(e.wkst),byweekday:VK(e.byweekday)});return{rrule:new we(i),isTimeSpecified:r,isTimeZoneSpecified:n}}function UK(e){let t=Ay(e,{forceset:!0}),r=HK(e);return Object.assign({rruleSet:t},r)}function HK(e){let t=!1,r=!1;function n(s,i,a){let l=Np(a);t=t||!l.isTimeUnspecified,r=r||l.timeZoneOffset!==null}return e.replace(/\b(DTSTART:)([^\n]*)/,n),e.replace(/\b(EXDATE:)([^\n]*)/,n),e.replace(/\b(UNTIL=)([^;\n]*)/,n),{isTimeSpecified:t,isTimeZoneSpecified:r}}function VK(e){return Array.isArray(e)?e.map(kh):kh(e)}function kh(e){return typeof e=="string"?we[e.toUpperCase()]:e}const $K={rrule:H,exrule:H,exdate:H,duration:ft};var WK=ui({name:"@fullcalendar/rrule",recurringTypes:[BK],eventRefiners:$K});const YK=async e=>(await q.get(`/calendar/${e}`)).data,dg=async e=>(await q.post("/calendar",e)).data,pa=async(e,t)=>{await q.put(`/calendar/${e}`,t)},GK=async e=>{await q.delete(`/calendar/${e}`)},f_=async e=>(await q.get(`/tasks/family/${e}`)).data,qK=async e=>(await q.post("/tasks",e)).data,fg=async(e,t)=>(await q.put(`/tasks/${e}`,t)).data,KK=async(e,t)=>{const r=new FormData;r.append("attachment",t),await q.post(`/tasks/${e}/attachments`,r,{headers:{"Content-Type":"multipart/form-data"}})},QK=async(e,t)=>{await q.delete(`/tasks/${e}/attachments/${t}`)},ZK="#3788d8",dE="#f97316",Sh=["SU","MO","TU","WE","TH","FR","SA"],XK=["MO","TU","WE","TH","FR","SA","SU"],fE=[{value:"SU",label:"Sunday"},{value:"MO",label:"Monday"},{value:"TU",label:"Tuesday"},{value:"WE",label:"Wednesday"},{value:"TH",label:"Thursday"},{value:"FR",label:"Friday"},{value:"SA",label:"Saturday"}],JK=[{value:"1",label:"First"},{value:"2",label:"Second"},{value:"3",label:"Third"},{value:"4",label:"Fourth"},{value:"last",label:"Last"}],eQ=[{value:"DAILY",label:"Daily"},{value:"WEEKLY",label:"Weekly"},{value:"MONTHLY",label:"Monthly"},{value:"YEARLY",label:"Yearly"}],hg={SU:we.SU,MO:we.MO,TU:we.TU,WE:we.WE,TH:we.TH,FR:we.FR,SA:we.SA},tQ=e=>Sh.includes(e),pg=e=>{if(typeof e=="number"){const r=(e%7+7)%7;return XK[r]}const t=e.toString().slice(0,2).toUpperCase();return tQ(t)?t:"MO"},Mc=e=>{const t=e?new Date(e):new Date;return Number.isNaN(t.getTime())?"MO":Sh[t.getDay()]},h_=e=>{const t=e?new Date(e):new Date;if(Number.isNaN(t.getTime()))return"1";const r=t.getDate(),n=new Date(t.getFullYear(),t.getMonth()+1,0).getDate();if(r>n-7)return"last";const s=Math.min(Math.ceil(r/7),4);return String(s)},hE=e=>e==="last"?-1:parseInt(e,10),pE=e=>{if(e===void 0)return"1";if(e===-1)return"last";const t=Math.min(Math.max(e,1),4);return String(t)},rQ=e=>e.toISOString().split("T")[0],p_=e=>{const t=e?new Date(e):new Date,r=Mc(e),n=Number.isNaN(t.getDate())?1:t.getDate();return{frequency:"WEEKLY",interval:1,weekDays:[r],monthlyMode:"dayOfMonth",ordinal:h_(e),ordinalWeekday:r,monthlyDay:n,ends:"never"}},nQ=(e,t)=>{if(!t)return;const r=new Date(e),n=new Date(t);if(Number.isNaN(r.getTime())||Number.isNaN(n.getTime()))return;const s=n.getTime()-r.getTime();if(s<=0)return;const i=Math.floor(s/1e3),a=Math.floor(i/3600),l=Math.floor(i%3600/60),c=i%60,u={};return a&&(u.hours=a),l&&(u.minutes=l),!a&&!l&&c&&(u.seconds=c),Object.keys(u).length>0?u:void 0},sQ=(e,t)=>{const n={freq:{DAILY:we.DAILY,WEEKLY:we.WEEKLY,MONTHLY:we.MONTHLY,YEARLY:we.YEARLY}[e.frequency],interval:Math.max(e.interval,1),dtstart:new Date(t)};if(e.frequency==="WEEKLY"){const i=e.weekDays.length?e.weekDays:[Mc(t)];n.byweekday=i.map(a=>hg[a])}if(e.frequency==="MONTHLY"&&(e.monthlyMode==="dayOfMonth"?n.bymonthday=[e.monthlyDay]:(n.byweekday=[hg[e.ordinalWeekday]],n.bysetpos=[hE(e.ordinal)])),e.frequency==="YEARLY"){const i=new Date(t);n.bymonth=[i.getMonth()+1],e.monthlyMode==="ordinalWeekday"?(n.byweekday=[hg[e.ordinalWeekday]],n.bysetpos=[hE(e.ordinal)]):n.bymonthday=[e.monthlyDay]}return e.ends==="onDate"&&e.until?n.until=new Date(`${e.until}T23:59:59`):e.ends==="after"&&e.count&&e.count>0&&(n.count=e.count),new we(n).toString()},iQ=(e,t)=>{const r=p_(t);try{const n=we.parseString(e),s=n.freq??we.WEEKLY;let i="WEEKLY";s===we.DAILY&&(i="DAILY"),s===we.WEEKLY&&(i="WEEKLY"),s===we.MONTHLY&&(i="MONTHLY"),s===we.YEARLY&&(i="YEARLY");const a={...r,frequency:i,interval:n.interval??1,weekDays:r.weekDays,monthlyMode:r.monthlyMode,ordinal:r.ordinal,ordinalWeekday:r.ordinalWeekday,monthlyDay:r.monthlyDay,ends:"never"};if(i==="WEEKLY"&&n.byweekday){const l=Array.isArray(n.byweekday)?n.byweekday:[n.byweekday];a.weekDays=l.map(c=>pg(c))}if(i==="MONTHLY"){if(n.bysetpos&&n.byweekday){const l=Array.isArray(n.byweekday)?n.byweekday:[n.byweekday];a.monthlyMode="ordinalWeekday",a.ordinalWeekday=pg(l[0]);const c=Array.isArray(n.bysetpos)?n.bysetpos[0]:n.bysetpos;a.ordinal=pE(c)}else if(n.bymonthday){const l=Array.isArray(n.bymonthday)?n.bymonthday[0]:n.bymonthday;typeof l=="number"&&(a.monthlyMode="dayOfMonth",a.monthlyDay=l)}}if(i==="YEARLY"){if(n.bysetpos&&n.byweekday){const l=Array.isArray(n.byweekday)?n.byweekday:[n.byweekday];a.monthlyMode="ordinalWeekday",a.ordinalWeekday=pg(l[0]);const c=Array.isArray(n.bysetpos)?n.bysetpos[0]:n.bysetpos;a.ordinal=pE(c)}else if(n.bymonthday){const l=Array.isArray(n.bymonthday)?n.bymonthday[0]:n.bymonthday;typeof l=="number"&&(a.monthlyMode="dayOfMonth",a.monthlyDay=l)}}return n.until?(a.ends="onDate",a.until=rQ(new Date(n.until))):n.count&&(a.ends="after",a.count=n.count),a}catch(n){return console.error("Failed to parse recurrence rule:",e,n),r}},mE=()=>{const{family:e}=zr(),{user:t,isAuthenticated:r,isLoading:n}=Ft(),s=m.useRef(null),[i,a]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState(!0),[f,h]=m.useState(null),[p,g]=m.useState(!1),[y,b]=m.useState(null),[v,x]=m.useState(!1),[w,k]=m.useState(""),[S,E]=m.useState("UTC"),[N,j]=m.useState(""),[T,C]=m.useState(""),[_,V]=m.useState(""),[F,R]=m.useState(""),[L,O]=m.useState(""),[z,B]=m.useState(!1),[W,se]=m.useState("WEEKLY"),[X,de]=m.useState(1),[fe,ye]=m.useState([]),[ie,M]=m.useState("dayOfMonth"),[J,P]=m.useState(1),[oe,te]=m.useState("1"),[be,je]=m.useState("MO"),[Oe,Ie]=m.useState("never"),[Ye,Qe]=m.useState(""),[nt,$e]=m.useState(""),[Ce,Fe]=m.useState([]),[D,Q]=m.useState(null),[I,A]=m.useState("all"),[K,pe]=m.useState(!1),[ge,gt]=m.useState({}),[Wt,nr]=m.useState(!0),vt=m.useMemo(()=>xr("calendar-page"),[]),Ur=m.useCallback(Y=>{const Be=p_(Y);B(!1),se(Be.frequency),de(Be.interval),ye(Be.weekDays),M(Be.monthlyMode),P(Be.monthlyDay),te(Be.ordinal),je(Be.ordinalWeekday),Ie(Be.ends),Qe(""),$e(""),Fe([])},[]),Ls=m.useCallback(Y=>{se(Y.frequency),de(Y.interval),ye(Y.weekDays),M(Y.monthlyMode),P(Y.monthlyDay),te(Y.ordinal),je(Y.ordinalWeekday),Ie(Y.ends),Qe(Y.until??""),$e(Y.count?String(Y.count):"")},[]),Er=m.useMemo(()=>{const Y=Number(nt);return{frequency:W,interval:X,weekDays:fe,monthlyMode:ie,ordinal:oe,ordinalWeekday:be,monthlyDay:J,ends:Oe,until:Oe==="onDate"?Ye:void 0,count:Oe==="after"&&!Number.isNaN(Y)&&Y>0?Y:void 0}},[nt,Oe,W,X,J,ie,oe,be,Ye,fe]),Qt=m.useMemo(()=>{if(!z||!T)return null;try{return sQ(Er,T)}catch(Y){return console.error("Failed to build recurrence rule preview:",Y),null}},[z,T,Er]),Xr=m.useMemo(()=>{if(!T)return null;const Y=new Date(T);return Number.isNaN(Y.getTime())?null:Y},[T]),fs=m.useMemo(()=>Xr?Xr.toLocaleString(void 0,{month:"long"}):"",[Xr]),ae=m.useCallback(Y=>{!v||I==="one"||y!=null&&y.RecurrenceParentID||ye(Be=>Be.includes(Y)?Be.filter(Nt=>Nt!==Y):[...Be,Y].sort((Nt,Ue)=>Sh.indexOf(Nt)-Sh.indexOf(Ue)))},[v,I,y==null?void 0:y.RecurrenceParentID]);m.useEffect(()=>{if(!z||W!=="WEEKLY"||fe.length>0)return;const Y=Mc(T||new Date().toISOString());ye([Y])},[z,W,fe.length,T]),m.useEffect(()=>{if(y||!T)return;const Y=new Date(T);Number.isNaN(Y.getTime())||(P(Y.getDate()),te(h_(T)),je(Mc(T)),fe.length===0&&ye([Mc(T)]))},[T,fe.length,y]),m.useEffect(()=>{if(!y){A("all");return}y.RecurrenceParentID?A("one"):A("all")},[y]),m.useEffect(()=>{(I==="one"||y!=null&&y.RecurrenceParentID)&&B(!1)},[I,y==null?void 0:y.RecurrenceParentID]);const le=!v||I==="one"||!!(y!=null&&y.RecurrenceParentID),Ze=()=>{const Y={};if(N||(Y.newEventTitle="Event title is required."),T||(Y.newEventStart="Start date is required."),z&&!le&&(W==="WEEKLY"&&fe.length===0&&(Y.recurrenceWeekdays="Select at least one weekday."),W==="MONTHLY"&&ie==="dayOfMonth"&&(J<1||J>31)&&(Y.recurrenceMonthlyDay="Choose a valid day of the month (1-31)."),Oe==="onDate"&&!Ye&&(Y.recurrenceUntil="Please choose when the repeating series should end."),Oe==="after")){const Be=Number(nt);(!nt||Number.isNaN(Be)||Be<=0)&&(Y.recurrenceCount="Enter how many occurrences should be created.")}return gt(Y),Object.keys(Y).length===0},Je=m.useCallback(async()=>{if(vt.log("fetchEvents: Called. Family:",e),!e){vt.log("fetchEvents: Family not available, returning.");return}try{d(!0);const Y=await YK(e.FamilyID.toString());vt.log("fetchEvents: Received eventsData:",Y),a(Y)}catch(Y){vt.error("fetchEvents: Error fetching events:",Y),h(Y instanceof Error?Y.message:"An unknown error occurred")}finally{d(!1)}},[e,vt]),Jr=m.useCallback(async()=>{if(vt.log("fetchTasks: Called. Family:",e),!e){vt.log("fetchTasks: Family not available, clearing tasks."),c([]);return}try{const Be=(await f_(e.FamilyID.toString())).filter(Re=>!!Re.DueDate);vt.log("fetchTasks: Received tasksData count:",Be.length),c(Be)}catch(Y){vt.error("fetchTasks: Error fetching tasks for calendar sync:",Y),c([])}},[e,vt]);m.useEffect(()=>{E(Intl.DateTimeFormat().resolvedOptions().timeZone)},[]),m.useEffect(()=>{vt.log("useEffect: Calling fetchEvents and fetchTasks..."),Je(),Jr(),s.current&&k(s.current.getApi().view.title)},[Je,Jr,vt]);const Fs=Y=>{var Tt,sr,ua;if(((Tt=Y.event.extendedProps)==null?void 0:Tt.eventKind)==="task"){const kt=(sr=Y.event.extendedProps)==null?void 0:sr.task;vt.log("handleEventClick: Task event clicked",{taskId:kt==null?void 0:kt.TaskID,title:kt==null?void 0:kt.Title});return}const Re=((ua=Y.event.extendedProps)==null?void 0:ua.rawEvent)??i.find(kt=>kt.EventID===Number(Y.event.id));if(!Re){vt.warn("Event not found for id:",Y.event.id);return}b(Re),j(Re.Title),C(Re.StartTime?new Date(Re.StartTime).toISOString().substring(0,16):""),V(Re.EndTime?new Date(Re.EndTime).toISOString().substring(0,16):""),R(Re.Description||""),O(Re.Location||""),Ur(Re.StartTime);const Yt=Array.isArray(Re.RecurrenceExceptionDates)?Re.RecurrenceExceptionDates:[];if(Fe(Yt),Re.RecurrencePattern){B(!0);const kt=iQ(Re.RecurrencePattern,Re.StartTime);Ls(kt)}else B(!1);const Nt=Y.event.start?Y.event.start.toISOString():Re.StartTime,Ue=Y.event.end?Y.event.end.toISOString():Re.EndTime??null;if(Nt){const kt=new Date(Nt);if(!Number.isNaN(kt.getTime())){const Bs=new Date(kt.getTime()-kt.getTimezoneOffset()*6e4).toISOString().substring(0,16);C(Bs)}}if(Ue){const kt=new Date(Ue);if(!Number.isNaN(kt.getTime())){const Bs=new Date(kt.getTime()-kt.getTimezoneOffset()*6e4).toISOString().substring(0,16);V(Bs)}}Q({start:Nt,end:Ue,isOverride:!!Re.RecurrenceParentID}),A(Re.RecurrenceParentID?"one":"all"),pe(!1),x(!1),g(!0)},ee=Y=>{b(null),j("");const Be=`${Y.dateStr}T00:00`;C(Be),V(""),R(""),O(""),Ur(Be),Q({start:Be,end:null,isOverride:!1}),A("all"),pe(!1),x(!0),g(!0)},De=async()=>{if(!Ze())return;if(n||!r||!e||!t){vt.error("Cannot save event: Auth status loading, not authenticated, or family/user data missing.");return}const Y=z&&T&&!le?Qt:null,Be=new Date(T);if(Number.isNaN(Be.getTime())){gt(Tt=>({...Tt,newEventStart:"Start date is invalid."}));return}const Re=_?new Date(_):void 0,Yt=Re&&!Number.isNaN(Re.getTime())?Re.toISOString():void 0,Nt=Be.toISOString(),Ue={familyId:e.FamilyID,title:N,description:F||void 0,startTime:Nt,endTime:Yt,location:L||void 0,createdByUserId:t.id,recurrenceRule:Y,recurrenceExceptionDates:Y!==null?Ce:void 0};vt.log("handleSaveEvent: Attempting to save event with data:",Ue,{editScope:I,occurrenceContext:D});try{if(!y)await dg(Ue);else if(y.RecurrenceParentID){const Tt={title:Ue.title,description:Ue.description,startTime:Ue.startTime,endTime:Ue.endTime,location:Ue.location,recurrenceRule:null};await pa(y.EventID.toString(),Tt)}else if(y.RecurrencePattern){const Tt=y.EventID.toString(),sr=D==null?void 0:D.start,ua=(D==null?void 0:D.end)??null;if(I==="all"){const kt={title:Ue.title,description:Ue.description,startTime:Ue.startTime,endTime:Ue.endTime,location:Ue.location,recurrenceRule:Ue.recurrenceRule,recurrenceExceptionDates:Ue.recurrenceRule?Ce:[]};await pa(Tt,kt)}else if(I==="one"){if(!sr)throw new Error("Unable to determine occurrence start for single-instance edit.");const kt=new Set(Ce);kt.add(sr);const Bs={title:y.Title,description:y.Description||void 0,startTime:new Date(y.StartTime).toISOString(),endTime:y.EndTime?new Date(y.EndTime).toISOString():void 0,location:y.Location||void 0,recurrenceRule:y.RecurrencePattern||null,recurrenceExceptionDates:Array.from(kt)};await pa(Tt,Bs);const da={...Ue,recurrenceRule:null,recurrenceExceptionDates:void 0,recurrenceParentId:y.EventID,recurrenceOriginalStart:sr,recurrenceOriginalEnd:ua};await dg(da)}else if(I==="future"){if(!sr)throw new Error("Unable to determine occurrence start for series split.");let kt=y.RecurrencePattern||null;if(y.RecurrencePattern)try{const fa=we.parseString(y.RecurrencePattern),Hp=new Date(new Date(sr).getTime()-1e3);fa.until=Hp,fa.dtstart=new Date(y.StartTime),kt=new we(fa).toString()}catch(fa){console.error("Failed to truncate recurrence rule during split.",fa)}const Bs={title:y.Title,description:y.Description||void 0,startTime:new Date(y.StartTime).toISOString(),endTime:y.EndTime?new Date(y.EndTime).toISOString():void 0,location:y.Location||void 0,recurrenceRule:kt,recurrenceExceptionDates:Ce};await pa(Tt,Bs);const da={...Ue,recurrenceParentId:void 0,recurrenceOriginalStart:sr,recurrenceOriginalEnd:ua};await dg(da)}}else{const Tt={title:Ue.title,description:Ue.description,startTime:Ue.startTime,endTime:Ue.endTime,location:Ue.location,recurrenceRule:Ue.recurrenceRule,recurrenceExceptionDates:Ue.recurrenceExceptionDates};await pa(y.EventID.toString(),Tt)}g(!1),pe(!1),Je()}catch(Tt){h(Tt instanceof Error?Tt.message:"Failed to save event")}},et=async Y=>{if(y)try{const Be=y.EventID.toString();if(Y==="all"||y.RecurrenceParentID||!y.RecurrencePattern)await GK(Be);else if(Y==="one"){const Re=D==null?void 0:D.start;if(!Re)throw new Error("Unable to determine occurrence start for deletion.");const Yt=new Set(Array.isArray(Ce)?Ce:[]);Yt.add(Re);const Nt={title:y.Title,description:y.Description||void 0,startTime:new Date(y.StartTime).toISOString(),endTime:y.EndTime?new Date(y.EndTime).toISOString():void 0,location:y.Location||void 0,recurrenceRule:y.RecurrencePattern||null,recurrenceExceptionDates:Array.from(Yt)};await pa(Be,Nt)}else if(Y==="future"){const Re=D==null?void 0:D.start;if(!Re)throw new Error("Unable to determine occurrence start for deletion.");let Yt=y.RecurrencePattern||null;if(y.RecurrencePattern)try{const Ue=we.parseString(y.RecurrencePattern),Tt=new Date(new Date(Re).getTime()-1e3);Ue.until=Tt,Ue.dtstart=new Date(y.StartTime),Yt=new we(Ue).toString()}catch(Ue){console.error("Failed to truncate recurrence rule during deletion.",Ue)}const Nt={title:y.Title,description:y.Description||void 0,startTime:new Date(y.StartTime).toISOString(),endTime:y.EndTime?new Date(y.EndTime).toISOString():void 0,location:y.Location||void 0,recurrenceRule:Yt,recurrenceExceptionDates:Ce};await pa(Be,Nt)}pe(!1),g(!1),Je()}catch(Be){h(Be instanceof Error?Be.message:"Failed to delete event")}},ct=Y=>{if(s.current){const Be=s.current.getApi();Y==="prev"?Be.prev():Y==="next"?Be.next():Y==="today"?Be.today():Be.changeView(Y),k(Be.view.title)}},fi=m.useMemo(()=>{const Y=i.map(Re=>{const Yt=Re.Color||ZK,Nt={id:Re.EventID.toString(),title:Re.Title,backgroundColor:Yt,borderColor:Yt,extendedProps:{rawEvent:Re,isOverride:!!Re.RecurrenceParentID}};if(Re.RecurrencePattern)try{const Ue=we.parseString(Re.RecurrencePattern);Ue.dtstart=new Date(Re.StartTime);const Tt={...Nt,rrule:Ue,extendedProps:{...Nt.extendedProps??{},isSeriesMaster:!0}},sr=nQ(Re.StartTime,Re.EndTime);return sr&&(Tt.duration=sr),Array.isArray(Re.RecurrenceExceptionDates)&&Re.RecurrenceExceptionDates.length>0&&(Tt.exdate=Re.RecurrenceExceptionDates),Tt}catch(Ue){console.error("Failed to parse recurrence pattern for event",Re.EventID,Ue)}return{...Nt,start:Re.StartTime,end:Re.EndTime??void 0,extendedProps:{...Nt.extendedProps??{},isSeriesMaster:!!Re.RecurrencePattern}}});if(!Wt)return Y;const Be=l.reduce((Re,Yt)=>{if(!Yt.DueDate)return Re;const Nt=new Date(Yt.DueDate);if(Number.isNaN(Nt.getTime()))return Re;const Ue=/\d{2}:\d{2}/.test(Yt.DueDate),Tt=Nt.getUTCHours()===0&&Nt.getUTCMinutes()===0,sr={id:`task-${Yt.TaskID}`,title:`Task: ${Yt.Title}`,start:Nt.toISOString(),allDay:!Ue||Tt,backgroundColor:dE,borderColor:dE,extendedProps:{eventKind:"task",task:Yt}};return Re.push(sr),Re},[]);return[...Y,...Be]},[i,l,Wt]);return u?o.jsx("div",{children:"Loading calendar..."}):f?o.jsxs("div",{className:"text-error-500",children:["Error: ",f]}):o.jsxs("div",{id:"calendar-board",className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:"Family Calendar"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Plan and coordinate family activities"})]}),o.jsx("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 justify-end",children:o.jsxs("button",{onClick:()=>{b(null),j("");const Y=new Date,Be=new Date(Y.getTime()-Y.getTimezoneOffset()*6e4).toISOString().substring(0,16);C(Be),V(""),R(""),O(""),Ur(Y.toISOString()),Q(null),A("all"),pe(!1),x(!0),g(!0)},className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(tr,{size:18,className:"mr-2"}),o.jsx("span",{children:"Add Event"})]})})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4",children:[o.jsxs("div",{className:"flex gap-1 nav-button-container",children:[o.jsx("button",{onClick:()=>ct("prev"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"<"}),o.jsx("button",{onClick:()=>ct("dayGridDay"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"Day"}),o.jsx("button",{onClick:()=>ct("dayGridWeek"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"Week"}),o.jsx("button",{onClick:()=>ct("today"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"Today"}),o.jsx("button",{onClick:()=>ct("dayGridMonth"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"Month"}),o.jsx("button",{onClick:()=>ct("next"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:">"})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-neutral-600 dark:text-neutral-300",children:[o.jsx("input",{type:"checkbox",checked:Wt,onChange:Y=>nr(Y.target.checked),className:"h-4 w-4 rounded border-neutral-300 dark:border-neutral-600 text-primary-500 focus:ring-primary-500"}),"Show tasks"]})})]}),o.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:o.jsx(HR,{ref:s,plugins:[xq,zq,WK],initialView:"dayGridMonth",timeZone:S,events:fi,eventClick:Fs,dateClick:ee,height:"auto",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1},eventDisplay:"block",eventClassNames:"rounded-lg",dayMaxEvents:3,moreLinkContent:({num:Y})=>o.jsxs("div",{className:"text-xs text-primary-500 dark:text-primary-400 font-medium",children:["+",Y," more"]})})}),o.jsx(er,{children:p&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:y?"Edit Event":"New Event"}),o.jsx("button",{onClick:()=>g(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Event Title"}),o.jsx("input",{type:"text",value:N,onChange:v?Y=>j(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border ${ge.newEventTitle?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`,placeholder:"Enter event title"}),ge.newEventTitle&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ge.newEventTitle})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Start Date"}),o.jsx("input",{type:"datetime-local",value:T,onChange:v?Y=>C(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border ${ge.newEventStart?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`}),ge.newEventStart&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ge.newEventStart})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"End Date"}),o.jsx("input",{type:"datetime-local",value:_,onChange:v?Y=>V(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Description"}),o.jsx("textarea",{rows:3,value:F,onChange:v?Y=>R(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`,placeholder:"Add event description"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Location"}),o.jsx("input",{type:"text",value:L,onChange:v?Y=>O(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`,placeholder:"Add location"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Repeat"}),o.jsxs("div",{className:`flex items-center gap-2 ${le?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"checkbox",checked:z&&!le,onChange:le?void 0:Y=>{B(Y.target.checked),Y.target.checked||(ye([]),Ie("never"),Qe(""),$e(""))},disabled:le,className:"h-4 w-4"}),o.jsx("span",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:"Repeating event"})]}),z&&!le&&o.jsxs("div",{className:"space-y-4 mt-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Frequency"}),o.jsx("select",{value:W,onChange:Y=>se(Y.target.value),disabled:le,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${le?"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed":""}`,children:eQ.map(Y=>o.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Interval"}),o.jsx("input",{type:"number",min:1,value:X,onChange:Y=>de(Math.max(1,Number(Y.target.value)||1)),readOnly:le,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${le?"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed":""}`}),o.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:["Every ",X," ",W.toLowerCase(),"(s)"]})]})]}),W==="WEEKLY"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Repeat on"}),o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:fE.map(Y=>{const Be=fe.includes(Y.value);return o.jsx("button",{type:"button",disabled:le,onClick:()=>ae(Y.value),className:`px-3 py-1 rounded-lg border text-sm transition-colors ${Be?"bg-primary-500 text-white border-primary-500":"border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300"} ${le?"opacity-60 cursor-not-allowed":"hover:border-primary-400 dark:hover:border-primary-400"}`,children:Y.label.slice(0,3)},Y.value)})}),ge.recurrenceWeekdays&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ge.recurrenceWeekdays})]}),(W==="MONTHLY"||W==="YEARLY")&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Repeat on"}),o.jsxs("div",{className:"space-y-3 text-sm text-neutral-700 dark:text-neutral-300",children:[o.jsxs("label",{className:`flex flex-wrap items-center gap-2 ${le?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:ie==="dayOfMonth",onChange:le?void 0:()=>M("dayOfMonth"),disabled:le}),o.jsx("span",{children:"Day"}),o.jsx("input",{type:"number",min:1,max:31,value:J,onChange:Y=>P(Math.min(31,Math.max(1,Number(Y.target.value)||1))),disabled:le||ie!=="dayOfMonth",className:`w-16 px-2 py-1 rounded-lg border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${le||ie!=="dayOfMonth"?"cursor-not-allowed opacity-60":""}`}),o.jsxs("span",{children:["of ",W==="YEARLY"&&fs||"the month"]})]}),o.jsxs("label",{className:`flex flex-wrap items-center gap-2 ${le?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:ie==="ordinalWeekday",onChange:le?void 0:()=>M("ordinalWeekday"),disabled:le}),o.jsx("span",{children:"The"}),o.jsx("select",{value:oe,onChange:Y=>te(Y.target.value),disabled:le||ie!=="ordinalWeekday",className:`px-2 py-1 rounded-lg border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${le||ie!=="ordinalWeekday"?"cursor-not-allowed opacity-60":""}`,children:JK.map(Y=>o.jsx("option",{value:Y.value,children:Y.label},Y.value))}),o.jsx("select",{value:be,onChange:Y=>je(Y.target.value),disabled:le||ie!=="ordinalWeekday",className:`px-2 py-1 rounded-lg border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${le||ie!=="ordinalWeekday"?"cursor-not-allowed opacity-60":""}`,children:fE.map(Y=>o.jsx("option",{value:Y.value,children:Y.label},Y.value))}),o.jsx("span",{children:W==="YEARLY"?`of ${fs||"the month"}`:"each month"})]})]}),ge.recurrenceMonthlyDay&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ge.recurrenceMonthlyDay})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Ends"}),o.jsxs("div",{className:"flex flex-col gap-2 text-sm text-neutral-700 dark:text-neutral-300",children:[o.jsxs("label",{className:`flex items-center gap-2 ${le?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:Oe==="never",onChange:le?void 0:()=>Ie("never"),disabled:le}),o.jsx("span",{children:"Never"})]}),o.jsxs("label",{className:`flex flex-wrap items-center gap-2 ${le?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:Oe==="onDate",onChange:le?void 0:()=>Ie("onDate"),disabled:le}),o.jsx("span",{children:"On"}),o.jsx("input",{type:"date",value:Ye,onChange:Y=>Qe(Y.target.value),disabled:le||Oe!=="onDate",className:`px-3 py-2 rounded-xl border ${ge.recurrenceUntil?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${le||Oe!=="onDate"?"cursor-not-allowed opacity-60":""}`}),ge.recurrenceUntil&&o.jsx("span",{className:"text-red-500 text-xs",children:ge.recurrenceUntil})]}),o.jsxs("label",{className:`flex flex-wrap items-center gap-2 ${le?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:Oe==="after",onChange:le?void 0:()=>Ie("after"),disabled:le}),o.jsx("span",{children:"After"}),o.jsx("input",{type:"number",min:1,value:nt,onChange:Y=>$e(Y.target.value),disabled:le||Oe!=="after",className:`w-20 px-2 py-1 rounded-lg border ${ge.recurrenceCount?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${le||Oe!=="after"?"cursor-not-allowed opacity-60":""}`}),o.jsx("span",{children:"occurrence(s)"}),ge.recurrenceCount&&o.jsx("span",{className:"text-red-500 text-xs",children:ge.recurrenceCount})]})]})]}),Qt&&o.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-300 border border-dashed border-neutral-300 dark:border-neutral-600 rounded-lg px-3 py-2 bg-neutral-50 dark:bg-neutral-700/30",children:["RRULE: ",Qt]}),Ce.length>0&&o.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[Ce.length," exception",Ce.length===1?"":"s"," in this series."]})]})]}),v&&y&&y.RecurrencePattern&&D&&!y.RecurrenceParentID&&o.jsxs("div",{className:"border border-neutral-200 dark:border-neutral-700 rounded-xl px-3 py-3",children:[o.jsx("p",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Apply changes to"}),o.jsxs("div",{className:"flex flex-col gap-2 mt-2 text-sm text-neutral-700 dark:text-neutral-300",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",value:"one",checked:I==="one",onChange:()=>A("one")}),o.jsx("span",{children:"This event only"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",value:"future",checked:I==="future",onChange:()=>A("future")}),o.jsx("span",{children:"This and following events"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",value:"all",checked:I==="all",onChange:()=>A("all")}),o.jsx("span",{children:"Entire series"})]})]})]}),(y==null?void 0:y.RecurrenceParentID)&&o.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"This occurrence is already detached from its original series."})]})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[y&&!v&&o.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Edit"}),o.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),v&&o.jsx("button",{onClick:De,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:y?"Save Changes":"Create Event"}),y&&o.jsxs("div",{className:"relative",children:[o.jsx("button",{"data-testid":"delete-event-button",onClick:()=>{y.RecurrencePattern&&!y.RecurrenceParentID&&D?pe(Y=>!Y):et("all")},className:"px-4 py-2 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-xl",children:"Delete"}),K&&y.RecurrencePattern&&!y.RecurrenceParentID&&D&&o.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-lg border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 shadow-lg z-10",children:[o.jsx("button",{onClick:()=>{et("one")},className:"w-full text-left px-4 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-t-lg",children:"Delete this event only"}),o.jsx("button",{onClick:()=>{et("future")},className:"w-full text-left px-4 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Delete this and following events"}),o.jsx("button",{onClick:()=>{et("all")},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-b-lg",children:"Delete entire series"})]})]})]})]})})})]})},aQ=async()=>(await q.get("/task-statuses")).data,oQ=({attachments:e})=>{const[t,r]=m.useState(null);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mt-3",children:o.jsx("div",{className:"flex justify-end gap-2",children:e.map(n=>o.jsxs("div",{className:"relative group cursor-pointer w-20 h-20",onClick:()=>r(n.Url),children:[o.jsx("img",{src:n.Url,alt:n.FileName,className:"w-full h-full object-cover rounded-lg group-hover:opacity-75 transition-opacity"}),o.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(G6,{size:24,className:"text-white"})})]},n.AttachmentID))})}),o.jsx(er,{children:t&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative",children:[o.jsx("img",{src:t,alt:"Full screen attachment",className:"max-w-full max-h-[90vh] rounded-lg"}),o.jsx("button",{onClick:()=>r(null),className:"absolute -top-4 -right-4 bg-white dark:bg-neutral-800 rounded-full p-2 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(ni,{size:20})})]})})})]})},gE=()=>{const{user:e}=Ft(),{family:t}=zr(),[r,n]=m.useState([]),[s,i]=m.useState([]),[a,l]=m.useState(!0),[c,u]=m.useState(null),[d,f]=m.useState("my"),[h,p]=m.useState(!1),[g,y]=m.useState(null),[b,v]=m.useState("all"),[x,w]=m.useState(0),k=m.useMemo(()=>xr("tasks-page"),[]),[S,E]=m.useState(""),[N,j]=m.useState(""),[T,C]=m.useState(""),[_,V]=m.useState(""),[F,R]=m.useState(null),[L,O]=m.useState([]),[z,B]=m.useState(!1);m.useEffect(()=>{g?(E(g.Title),j(g.Description||""),C(g.DueDate?new Date(g.DueDate).toISOString().substring(0,16):""),V(g.AssignedToUserID||""),X(g.RewardType||"points"),fe(g.RewardValue||0),O(g.attachments||[])):(E(""),j(""),C(new Date().toISOString().substring(0,16)),V(""),X("points"),fe(0),O([]))},[g]);const W=m.useCallback(async()=>{if(t)try{l(!0);const[D,Q]=await Promise.all([f_(t.FamilyID.toString()),aQ()]);k.log("Tasks received by frontend:",JSON.stringify(D,null,2)),n(D),i(Q)}catch(D){u(D instanceof Error?D.message:"An unknown error occurred")}finally{l(!1)}},[t,k]);m.useEffect(()=>{W()},[W]);const[se,X]=m.useState("points"),[de,fe]=m.useState(0),[ye,ie]=m.useState({}),M=()=>{const D={};return S||(D.newTaskTitle="Task title is required."),_===""&&(D.newTaskAssignedTo="Please assign this task to a family member."),ie(D),Object.keys(D).length===0},[J,P]=m.useState(!1),oe=D=>{O(Q=>Q.filter(I=>I.AttachmentID!==D))},te=()=>{E(""),j(""),C(new Date().toISOString().substring(0,16)),V(""),X("points"),fe(0),R(null),O([]),ie({}),y(null)},be=async()=>{if(!M()||!t||!e)return;const D={FamilyID:t.FamilyID,Title:S,Description:N,DueDate:T?new Date(T).toISOString():void 0,AssignedToUserID:_,CreatedByUserID:e.id,RewardType:se,RewardValue:de};try{let Q;if(g){const I=g.attachments.filter(A=>!L.some(K=>K.AttachmentID===A.AttachmentID));for(const A of I)await QK(g.TaskID.toString(),A.AttachmentID);Q=await fg(g.TaskID.toString(),D)}else Q=await qK(D);if(F){P(!0);try{await KK(Q.TaskID.toString(),F)}catch(I){u(I instanceof Error?I.message:"Failed to upload attachment")}finally{P(!1),R(null)}}p(!1),te(),W()}catch(Q){u(Q instanceof Error?Q.message:"Failed to save task")}},je=D=>{const Q=s.find(I=>I.StatusName.toLowerCase()==="completed");return Q?D.TaskStatusID===Q.TaskStatusID:!1},Oe=async D=>{if(s.length===0){u("Task statuses have not been loaded yet.");return}const Q=s.find(K=>K.StatusName.toLowerCase()==="completed"),I=s.find(K=>K.StatusName.toLowerCase()==="pending");if(!Q||!I){u("Could not find task statuses.");return}const A=je(D)?I.TaskStatusID:Q.TaskStatusID;try{const K=await fg(D.TaskID.toString(),{TaskStatusID:A});n(r.map(pe=>pe.TaskID===D.TaskID?K:pe))}catch(K){u(K instanceof Error?K.message:"Failed to update task")}},Ie=async D=>{try{await fg(D.TaskID.toString(),{ApprovalStatusID:2}),W()}catch(Q){u(Q instanceof Error?Q.message:"Failed to approve task")}},Ye=r.filter(D=>{const Q=s.find(A=>A.StatusName.toLowerCase()==="completed"),I=Q?D.TaskStatusID===Q.TaskStatusID:!1;return d==="my"?D.AssignedToUserID===(e==null?void 0:e.id)&&!I:d==="family"?!I:d==="completed"?I&&D.ApprovalStatusID===1:!0}),Qe=r,nt=Qe.filter(je).length,$e=Qe.length-nt,Ce=Ye.filter(D=>d==="my"&&D.AssignedToUserID===(e==null?void 0:e.id)),Fe=Ce.length>0&&Ce.every(je);return a?o.jsx("div",{children:"Loading tasks..."}):c?o.jsxs("div",{className:"text-error-500",children:["Error: ",c]}):o.jsxs("div",{id:"tasks-board",className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:"Tasks"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Manage and track family responsibilities"})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("button",{onClick:()=>B(!z),className:"flex items-center px-3 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:[o.jsx(A2,{size:18,className:"mr-2"}),o.jsx("span",{children:"Filter"})]}),o.jsxs("button",{onClick:()=>{y(null),p(!0)},className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(tr,{size:18,className:"mr-2"}),o.jsx("span",{children:"Add Task"})]})]})]}),z&&o.jsxs(bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-2",children:"Filter Options"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"More filter options will go here."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>f("completed"),children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Completed"}),o.jsx(Ti,{className:"text-success-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:nt}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Tasks completed"})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Pending"}),o.jsx(Y0,{className:"text-warning-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:$e}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Tasks to complete"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card overflow-hidden",children:[o.jsxs("div",{className:"flex border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>f("my"),className:`flex-1 px-6 py-4 text-sm font-medium ${d==="my"?"text-primary-600 border-b-2 border-primary-500":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300"}`,children:"My Tasks"}),o.jsx("button",{onClick:()=>f("family"),className:`flex-1 px-6 py-4 text-sm font-medium ${d==="family"?"text-primary-600 border-b-2 border-primary-500":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300"}`,children:"Family Tasks"}),(e==null?void 0:e.role)==="parent"&&o.jsx("button",{onClick:()=>f("completed"),className:`flex-1 px-6 py-4 text-sm font-medium ${d==="completed"?"text-primary-600 border-b-2 border-primary-500":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300"}`,children:"Completed"})]}),o.jsx("div",{className:"p-6",children:d==="my"&&Fe?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"h-16 w-16 rounded-full bg-success-100 dark:bg-success-900/30 text-success-600 dark:text-success-400 flex items-center justify-center mx-auto mb-4",children:o.jsx(Ti,{size:32})}),o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white mb-2",children:"All Tasks Complete!"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 mb-4",children:"Great job! Why not help out a family member?"}),o.jsxs("button",{onClick:()=>f("family"),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:["Check Family Tasks",o.jsx(_6,{size:16,className:"ml-2"})]})]}):o.jsx("div",{className:"space-y-4",children:Ye.map(D=>{var Q;return o.jsx(bt.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`p-4 rounded-xl border border-neutral-200 dark:border-neutral-700 min-h-[120px] ${je(D)?"bg-neutral-50 dark:bg-neutral-800/50":"bg-white dark:bg-neutral-800"}`,children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("button",{onClick:()=>Oe(D),disabled:a,className:`p-2 rounded-xl ${je(D)?"text-primary-500 dark:text-primary-400":"text-neutral-400 dark:text-neutral-500 hover:text-primary-500 dark:hover:text-primary-400"}`,children:je(D)?o.jsx(Ti,{size:20}):o.jsx(Y0,{size:20})}),o.jsxs("div",{className:"flex-1 ml-3",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsx("h3",{className:`font-medium ${je(D)?"text-neutral-400 dark:text-neutral-500 line-through":"text-neutral-900 dark:text-white"}`,children:D.Title})}),o.jsxs("div",{className:"flex items-center space-x-2 ml-auto",children:[D.attachments&&D.attachments.length>0&&o.jsx("div",{className:"ml-4",children:o.jsx(oQ,{attachments:D.attachments})}),je(D)&&D.ApprovalStatusID===1&&(e==null?void 0:e.role)==="parent"&&o.jsx("button",{onClick:()=>Ie(D),className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-success-500 dark:text-success-400",children:o.jsx(Ti,{size:18})}),o.jsx("button",{onClick:()=>{y(D),p(!0)},className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-400 dark:text-neutral-500",children:o.jsx(Z6,{size:18})})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[D.DueDate&&o.jsxs("span",{className:"flex items-center text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsx(al,{size:12,className:"mr-1"}),new Date(D.DueDate).toLocaleDateString()]}),D.AssignedToUserID&&o.jsx("div",{className:"flex -space-x-2 ml-auto",children:o.jsx("div",{className:"h-6 w-6 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-xs text-primary-700 dark:text-primary-300 ring-2 ring-white dark:ring-neutral-800 cursor-default select-none",children:(Q=t==null?void 0:t.members.find(I=>I.UserID===D.AssignedToUserID))==null?void 0:Q.FirstName.charAt(0)},D.AssignedToUserID)})]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:D.Description})]})]})},D.TaskID)})})})]}),o.jsx(er,{children:h&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-lg my-8",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:g?"Edit Task":"New Task"}),o.jsx("button",{onClick:()=>p(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4 max-h-[calc(100vh-16rem)] overflow-y-auto",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Task Title"}),o.jsx("input",{type:"text",value:S,onChange:D=>E(D.target.value),className:`w-full px-3 py-2 rounded-xl border ${ye.newTaskTitle?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,placeholder:"Enter task title"}),ye.newTaskTitle&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ye.newTaskTitle})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Description"}),o.jsx("textarea",{rows:3,value:N,onChange:D=>j(D.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Add task description"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Due Date"}),o.jsx("input",{type:"datetime-local",value:T,onChange:D=>C(D.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Reward"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{value:se,onChange:D=>X(D.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:[o.jsx("option",{value:"points",children:"Points"}),o.jsx("option",{value:"screentime",children:"Screen Time (minutes)"}),o.jsx("option",{value:"currency",children:"Currency"})]}),o.jsx("input",{type:"number",value:de,onChange:D=>fe(Number(D.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Value"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Assign To"}),o.jsxs("select",{value:_,onChange:D=>V(D.target.value),className:`w-full px-3 py-2 rounded-xl border ${ye.newTaskAssignedTo?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,children:[o.jsx("option",{value:"",children:"Unassigned"}),t==null?void 0:t.members.map(D=>o.jsxs("option",{value:D.UserID,children:[D.FirstName," ",D.LastName]},D.UserID))]}),ye.newTaskAssignedTo&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ye.newTaskAssignedTo})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Attachment"}),o.jsx("input",{type:"file",onChange:D=>R(D.target.files?D.target.files[0]:null),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),g&&L.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Existing Attachments"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(D=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:D.Url,alt:D.FileName,className:"w-20 h-20 object-cover rounded-lg"}),o.jsx("button",{onClick:()=>oe(D.AttachmentID),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(ni,{size:16})})]},D.AttachmentID))})]})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 p-4 border-t border-neutral-200 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>p(!1),className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:be,disabled:J,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl disabled:bg-primary-300 dark:disabled:bg-primary-700 flex items-center justify-center",children:J?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):g?"Save Changes":"Create Task"})]})]})})})]})},mg=xr("api-gigs"),m_=async()=>(await q.get("/gigs/templates")).data,lQ=async e=>(await q.get(`/gigs?familyId=${e}`)).data,cQ=async(e,t,r,n,s)=>(mg.log("addGigToFamily: gigTemplateId",e),mg.log("addGigToFamily: roomId",t),mg.log("addGigToFamily: cadenceType",r),(await q.post("/gigs",{gigTemplateId:e,roomId:t,cadenceType:r,maxPerDay:n,visible:s})).data),uQ=async e=>{await q.delete(`/gigs/${e}`)},g_=async e=>(await q.get(`/rooms?familyId=${e}`)).data,y_=async(e,t,r)=>(await q.post("/rooms",{familyId:e,name:t,roomTemplateId:r})).data,dQ=async(e,t)=>(await q.put(`/rooms/${e}`,t)).data,fQ=async e=>{await q.delete(`/rooms/${e}`)},hQ=async e=>{await q.post("/rooms/reset",{familyId:e})},pQ=async e=>(await q.post(`/gigs/${e}/claim`)).data,mQ=async e=>(await q.post(`/gigs/${e}/complete`)).data,gQ=e=>e.overridePoints?`${e.overridePoints} points`:e.overrideCurrencyCents?`$${(e.overrideCurrencyCents/100).toFixed(2)}`:e.overrideScreenMinutes?`${e.overrideScreenMinutes} min screen time`:"Auto reward",Zl=e=>{if(!e)return;const t=e.trim();if(t)return t.split(/\s+/)[0]},gg=e=>Zl(e==null?void 0:e.FirstName)??Zl(e==null?void 0:e.firstName)??Zl(e==null?void 0:e.fullName)??Zl(e==null?void 0:e.displayName)??Zl(e==null?void 0:e.name)??"You",yQ=({gig:e,onDetailsClick:t,isClaimed:r,overdueDays:n,onStatusChange:s})=>{var _,V,F,R,L;const{user:i}=Ft(),a=m.useMemo(()=>xr("gig-card"),[]),l=m.useMemo(()=>{const O=new Date;return`${O.getFullYear()}-${O.getMonth()+1}-${O.getDate()}`},[]),c=(_=e.claims)==null?void 0:_.find(O=>(O==null?void 0:O.periodKey)===l&&(O==null?void 0:O.status)==="claimed"),u=c!=null&&c.user?gg(c.user):void 0,[d,f]=m.useState(!!c||r),[h,p]=m.useState(u??null),[g,y]=m.useState("idle"),[b,v]=m.useState(null),[x,w]=m.useState("info");m.useEffect(()=>{f(!!c||r),p(u??null)},[c,u,r]);const k=O=>{w("success"),v(O)},S=O=>{w("error"),v(O)},E=async()=>{var O,z,B;if(g==="idle")try{y("claiming"),v(null);const W=await pQ(e.id);a.log("Gig claimed successfully:",W);const se=(O=W.claims)==null?void 0:O.find(de=>(de==null?void 0:de.periodKey)===l&&(de==null?void 0:de.status)==="claimed"),X=se!=null&&se.user?gg(se.user):gg(i);f(!0),p(X),k("Gig claimed! Mark it complete once you finish."),s==null||s(W,"claimed")}catch(W){a.error("Failed to claim gig:",W);const se=((B=(z=W==null?void 0:W.response)==null?void 0:z.data)==null?void 0:B.error)??"Failed to claim gig. Please try again.";S(se)}finally{y("idle")}},N=async()=>{var O,z;if(g==="idle")try{y("completing"),v(null);const B=await mQ(e.id);a.log("Gig completed successfully:",B),f(!1),p(null),k("Great job! Gig marked as complete."),s==null||s(B,"completed")}catch(B){a.error("Failed to complete gig:",B);const W=((z=(O=B==null?void 0:B.response)==null?void 0:O.data)==null?void 0:z.error)??"Failed to complete gig. Please try again.";S(W)}finally{y("idle")}},j=((V=e.familyRoom)==null?void 0:V.name)??(e==null?void 0:e.familyRoomName)??((F=e.room)==null?void 0:F.name)??"Shared Space",T=g!=="idle",C=`bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 transition-opacity ${d?"opacity-90":""} ${n>0?n>7?"border border-red-400 dark:border-red-600":"border border-amber-300 dark:border-amber-500":""}`;return o.jsxs("div",{className:C,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:((R=e.gigTemplate)==null?void 0:R.name)??"House Gig"}),o.jsx("div",{className:"text-xs px-2 py-1 rounded-full bg-primary-100 text-primary-600 dark:bg-primary-900/30 dark:text-primary-400",children:e.cadenceType})]}),o.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:j}),h&&o.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-2",children:["Claimed by: ",h]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(tf,{size:16,className:"mr-2"}),o.jsxs("span",{children:[((L=e.gigTemplate)==null?void 0:L.estimatedMinutes)??e.estimatedMinutes??0," min"]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Pa,{size:16,className:"mr-2"}),o.jsx("span",{children:gQ(e)})]})]}),o.jsxs("div",{className:"mt-6 flex gap-2",children:[d?o.jsx("button",{onClick:N,disabled:T,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:opacity-60 disabled:cursor-not-allowed",children:g==="completing"?"Completing":"Complete"}):o.jsx("button",{onClick:E,disabled:T,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed",children:g==="claiming"?"Claiming":"Claim"}),o.jsx("button",{onClick:()=>t(e),className:"flex-1 bg-neutral-200 text-neutral-800 py-2 px-4 rounded-md hover:bg-neutral-300 dark:bg-neutral-700 dark:text-white dark:hover:bg-neutral-600",children:"Details"})]}),b&&o.jsx("p",{className:`mt-3 text-sm ${x==="error"?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:b})]})},xQ=({isOpen:e,onClose:t,gig:r})=>{var n;return!e||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gig Details"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Name:"})," ",r.gigTemplate.name]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Room:"})," ",((n=r.familyRoom)==null?void 0:n.name)??"Shared Space"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Cadence:"})," ",r.cadenceType]}),r.gigTemplate.estimatedMinutes&&o.jsxs("p",{children:[o.jsx("strong",{children:"Estimated Time:"})," ",r.gigTemplate.estimatedMinutes," min"]}),r.overridePoints&&o.jsxs("p",{children:[o.jsx("strong",{children:"Reward Points:"})," ",r.overridePoints]}),r.overrideCurrencyCents&&o.jsxs("p",{children:[o.jsx("strong",{children:"Reward Currency:"})," $",(r.overrideCurrencyCents/100).toFixed(2)]}),r.overrideScreenMinutes&&o.jsxs("p",{children:[o.jsx("strong",{children:"Reward Screen Time:"})," ",r.overrideScreenMinutes," min"]})]}),o.jsx("div",{className:"mt-6 flex justify-end",children:o.jsx("button",{onClick:t,className:"bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700",children:"Close"})})]})})},vQ=()=>{const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`},yg=(e,t)=>{var n;if(!t)return!1;const r=vQ();return(n=e.claims)==null?void 0:n.some(s=>{var i,a;return(s.userId===t||((i=s.user)==null?void 0:i.UserID)===t||((a=s.user)==null?void 0:a.id)===t)&&s.periodKey===r&&s.status==="claimed"})},xg=(e,t)=>{var l;const r=new Date,n=e,s=(l=e.claims)==null?void 0:l.find(c=>{var u,d;return c.userId===t||((u=c.user)==null?void 0:u.UserID)===t||((d=c.user)==null?void 0:d.id)===t});if(!s){const c=n.claimedAt??n.createdAt,u=c?new Date(c):r,d=Math.abs(r.getTime()-u.getTime()),f=Math.ceil(d/(1e3*60*60*24));return f>0?f:0}const i=new Date(s.claimedAt??s.createdAt??r),a=Math.abs(r.getTime()-i.getTime());switch(e.cadenceType){case"daily":return Math.max(0,Math.ceil(a/(1e3*60*60*24))-1);case"weekly":return Math.max(0,Math.ceil(a/(1e3*60*60*24*7))-1);case"monthly":return Math.max(0,Math.ceil(a/(1e3*60*60*24*30))-1);default:return 0}},yE=()=>{const{family:e,isLoading:t,error:r}=zr(),{user:n}=Ft(),[s,i]=m.useState([]),[a,l]=m.useState(!0),[c,u]=m.useState(null),[d,f]=m.useState(!1),[h,p]=m.useState(null),g=m.useMemo(()=>{const w=(n==null?void 0:n.id)??(n==null?void 0:n.UserID)??(n==null?void 0:n.userId)??null;return w?String(w):""},[n]),y=m.useCallback(w=>g?[...w].sort((k,S)=>{const E=yg(k,g),N=yg(S,g);if(E&&!N)return-1;if(!E&&N)return 1;const j=xg(k,g);return xg(S,g)-j}):[...w],[g]),b=m.useCallback(w=>{i(k=>{const E=k.some(N=>N.id===w.id)?k.map(N=>N.id===w.id?w:N):[...k,w];return y(E)})},[y]);m.useEffect(()=>{if(!e)return;(async()=>{try{l(!0);const S=(await q.get(`/gigs?familyId=${e.FamilyID}`)).data;i(y(S)),u(null)}catch(k){u(k instanceof Error?k.message:"An unknown error occurred")}finally{l(!1)}})()},[e,y]);const v=w=>{p(w),f(!0)},x=m.useCallback((w,k)=>{b(w)},[b]);return t?o.jsx("div",{children:"Loading family data..."}):r?o.jsxs("div",{className:"text-error-500",children:["Error loading family data: ",r]}):a?o.jsx("div",{children:"Loading gigs..."}):c?o.jsxs("div",{className:"text-error-500",children:["Error: ",c]}):o.jsxs("div",{id:"gigs-board",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Gigs"}),o.jsx(kr,{id:"cta-manage-gigs",to:"/gigs/settings",className:"bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700",children:"Manage Gigs"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(w=>o.jsx(yQ,{gig:w,onDetailsClick:v,isClaimed:g?yg(w,g):!1,overdueDays:g?xg(w,g):0,onStatusChange:x},w.id))}),o.jsx(xQ,{isOpen:d,onClose:()=>f(!1),gig:h})]})},bQ=({isOpen:e,onClose:t,onConfirm:r,rooms:n})=>{const[s,i]=m.useState(""),a=()=>{s&&r(parseInt(s,10))};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Select a Room"}),o.jsxs("select",{value:s,onChange:l=>i(l.target.value),className:"w-full p-2 border rounded-md bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600",children:[o.jsx("option",{value:"",disabled:!0,children:"Select a room"}),n.map(l=>o.jsx("option",{value:l.id,children:l.name},l.id))]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:t,className:"text-neutral-600 dark:text-neutral-300 px-4 py-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:a,disabled:!s,className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 disabled:bg-primary-300",children:"Confirm"})]})]})}):null},wQ=({isOpen:e,onClose:t,onConfirm:r})=>{const[n,s]=m.useState(""),i=()=>{n&&r(n)};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create a New Room"}),o.jsx("input",{type:"text",value:n,onChange:a=>s(a.target.value),placeholder:"E.g., Kitchen, Living Room",className:"w-full p-2 border rounded-md bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}),o.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:t,className:"text-neutral-600 dark:text-neutral-300 px-4 py-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:i,disabled:!n,className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 disabled:bg-primary-300",children:"Create"})]})]})}):null},xE=()=>{const{family:e}=zr(),[t,r]=m.useState([]),[n,s]=m.useState([]),[i,a]=m.useState([]),[l,c]=m.useState(!0),[u,d]=m.useState(null),[f,h]=m.useState(!1),[p,g]=m.useState(!1),[y,b]=m.useState(null),v=m.useMemo(()=>xr("gigs-settings-page"),[]);m.useEffect(()=>{if(!e)return;(async()=>{try{const[j,T,C]=await Promise.all([m_(),lQ(e.FamilyID),g_(e.FamilyID)]);r(j),s(T),a(C)}catch(j){d(j instanceof Error?j.message:"An unknown error occurred")}finally{c(!1)}})()},[e]);const x=N=>{b(N),h(!0)},w=async N=>{if(!(!y||!e)){v.log("handleConfirmAddGig: selectedTemplateId",y),v.log("handleConfirmAddGig: roomId",N);try{const j=await cQ(y,N,"daily");s([...n,j])}catch(j){v.error("Failed to add gig",j)}finally{h(!1),b(null)}}},k=async N=>{if(e)try{const j=await y_(e.FamilyID,N);a([...i,j])}catch(j){v.error("Failed to create room",j)}finally{g(!1)}},S=async N=>{try{await uQ(N),s(n.filter(j=>j.id!==N))}catch(j){v.error("Failed to remove gig",j)}};if(l)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-primary-600"})});if(u)return o.jsxs("div",{className:"text-red-500 bg-red-100 border border-red-400 rounded-lg p-4",children:["Error: ",u]});const E=t.filter(N=>!n.some(j=>j.gigTemplateId===N.id));return o.jsxs("div",{className:"space-y-8 p-4 md:p-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:"Gigs Settings"}),o.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-primary-700",children:[o.jsx(tr,{className:"h-4 w-4"}),"Create Room"]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"My Gigs"}),n.length===0?o.jsx("div",{className:"text-center py-12 border-2 border-dashed border-neutral-200 dark:border-neutral-700 rounded-2xl",children:o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"You haven't added any gigs yet. Add some from the list below!"})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(N=>{var j;return o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg overflow-hidden transition-transform hover:scale-105",children:[o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:N.gigTemplate.name}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:((j=N.familyRoom)==null?void 0:j.name)??"Shared Space"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 capitalize",children:N.cadenceType})]}),o.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-700/50 px-6 py-3 flex justify-end",children:o.jsx("button",{onClick:()=>S(N.id),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400",children:o.jsx(ri,{className:"h-5 w-5"})})})]},N.id)})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Available Gigs"}),i.length===0?o.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-red-400 bg-red-50 dark:bg-red-900/20 rounded-2xl",children:[o.jsx("p",{className:"text-red-600 dark:text-red-300",children:"You need to create at least one room before you can add gigs."}),o.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:'Click the "Create Room" button above to get started.'})]}):E.length===0?o.jsx("div",{className:"text-center py-12 border-2 border-dashed border-neutral-200 dark:border-neutral-700 rounded-2xl",children:o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"All available gigs have been added to your family."})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(N=>o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg overflow-hidden transition-transform hover:scale-105",children:[o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:N.name}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[N.estimatedMinutes," min"]})]}),o.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-700/50 px-6 py-4 flex justify-end",children:o.jsxs("button",{onClick:()=>x(N.id),className:"inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-primary-700",children:[o.jsx(tr,{className:"h-4 w-4"}),"Add to My Gigs"]})})]},N.id))})]}),o.jsx(bQ,{isOpen:f,onClose:()=>h(!1),onConfirm:w,rooms:i}),o.jsx(wQ,{isOpen:p,onClose:()=>g(!1),onConfirm:k})]})},kQ=async e=>(await q.get(`/messages/${e}`)).data,SQ=async e=>(await q.post("/messages",e)).data,EQ=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),NQ=e=>{const t=new Date(e);return Number.isNaN(t.getTime())?"":EQ.format(t)},vE=()=>{const{user:e}=Ft(),{family:t}=zr(),[r,n]=m.useState([]),[s,i]=m.useState(!0),[a,l]=m.useState(null),[c,u]=m.useState(""),d=m.useRef(null),f=()=>{var g;(g=d.current)==null||g.scrollIntoView({behavior:"smooth"})},h=m.useCallback(async()=>{if(t)try{i(!0);const g=await kQ(t.FamilyID.toString());n(g)}catch(g){l(g instanceof Error?g.message:"Failed to fetch messages")}finally{i(!1)}},[t]);m.useEffect(()=>{h()},[h]),m.useEffect(()=>{f()},[r]);const p=async()=>{if(!(!c.trim()||!t||!e))try{await SQ({FamilyID:t.FamilyID,MessageText:c,SenderID:e.id}),u(""),h()}catch(g){l(g instanceof Error?g.message:"Failed to send message")}};return s?o.jsx("div",{children:"Loading messages..."}):a?o.jsxs("div",{className:"text-error-500",children:["Error: ",a]}):o.jsxs("div",{className:"h-[calc(100vh-7rem)] flex flex-col bg-white dark:bg-neutral-800 rounded-2xl shadow-card",children:[o.jsx("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300",children:o.jsx(Ya,{size:18})}),o.jsxs("div",{children:[o.jsxs("h2",{className:"font-semibold text-neutral-900 dark:text-white",children:[t==null?void 0:t.FamilyName," Chat"]}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[t==null?void 0:t.members.length," members"]})]})]})}),o.jsxs("div",{id:"messages-thread",className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map(g=>{const y=g.SenderID===(e==null?void 0:e.id),b=t==null?void 0:t.members.find(v=>v.UserID===g.SenderID);return o.jsx("div",{className:`flex ${y?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-[70%] flex ${y?"flex-row-reverse":"flex-row"} items-end space-x-2`,children:[!y&&b&&o.jsx("img",{src:b.ProfilePhotoUrl||"",alt:b.FirstName,className:"h-8 w-8 rounded-full object-cover"}),o.jsxs("div",{className:`px-4 py-2 rounded-2xl ${y?"bg-primary-500 text-white":"bg-neutral-100 dark:bg-neutral-700"}`,children:[!y&&o.jsx("p",{className:"text-xs font-bold mb-1",children:b==null?void 0:b.FirstName}),o.jsx("p",{children:g.MessageText}),o.jsx("p",{className:"text-xs mt-1 opacity-70 text-right",children:NQ(g.Timestamp)})]})]})},g.MessageID)}),o.jsx("div",{ref:d})]}),o.jsx("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-700",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:c,onChange:g=>u(g.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 rounded-xl border bg-white dark:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-primary-500",onKeyPress:g=>{g.key==="Enter"&&p()}}),o.jsx("button",{onClick:p,disabled:!c.trim(),className:"p-2 rounded-xl bg-primary-500 text-white disabled:opacity-50",children:o.jsx(aB,{size:20})})]})})]})};function jQ(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}jQ(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var nb=e=>typeof e=="number"&&!isNaN(e),xu=e=>typeof e=="string",x_=e=>typeof e=="function",CQ=e=>xu(e)||nb(e),TQ=e=>m.isValidElement(e)||xu(e)||x_(e)||nb(e),AQ=1,v_=()=>`${AQ++}`,As=new Map,Dy=[],bE=new Set,b_=()=>As.size>0,DQ=(e,{containerId:t})=>{var r;return(r=As.get(t||1))==null?void 0:r.toasts.get(e)};function RQ(e,t){var r;if(t)return!!((r=As.get(t))!=null&&r.isToastActive(e));let n=!1;return As.forEach(s=>{s.isToastActive(e)&&(n=!0)}),n}function _Q(e){if(!b_()){Dy=Dy.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||CQ(e))As.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=As.get(e.containerId);t?t.removeToast(e.id):As.forEach(r=>{r.removeToast(e.id)})}}var IQ=(e={})=>{As.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function MQ(e,t){TQ(e)&&(b_()||Dy.push({content:e,options:t}),As.forEach(r=>{r.buildToast(e,t)}))}function w_(e,t){As.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function OQ(e){return bE.add(e),()=>{bE.delete(e)}}function PQ(e){return e&&(xu(e.toastId)||nb(e.toastId))?e.toastId:v_()}function qu(e,t){return MQ(e,t),t.toastId}function _p(e,t){return{...t,type:t&&t.type||e,toastId:PQ(t)}}function Ip(e){return(t,r)=>qu(t,_p(e,r))}function ne(e,t){return qu(e,_p("default",t))}ne.loading=(e,t)=>qu(e,_p("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function LQ(e,{pending:t,error:r,success:n},s){let i;t&&(i=xu(t)?ne.loading(t,s):ne.loading(t.render,{...s,...t}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,f)=>{if(d==null){ne.dismiss(i);return}let h={type:u,...a,...s,data:f},p=xu(d)?{render:d}:d;return i?ne.update(i,{...h,...p}):ne(p.render,{...h,...p}),f},c=x_(e)?e():e;return c.then(u=>l("success",n,u)).catch(u=>l("error",r,u)),c}ne.promise=LQ;ne.success=Ip("success");ne.info=Ip("info");ne.error=Ip("error");ne.warning=Ip("warning");ne.warn=ne.warning;ne.dark=(e,t)=>qu(e,_p("default",{theme:"dark",...t}));function FQ(e){_Q(e)}ne.dismiss=FQ;ne.clearWaitingQueue=IQ;ne.isActive=RQ;ne.update=(e,t={})=>{let r=DQ(e,t);if(r){let{props:n,content:s}=r,i={delay:100,...n,...t,toastId:t.toastId||e,updateId:v_()};i.toastId!==e&&(i.staleId=e);let a=i.render||s;delete i.render,qu(a,i)}};ne.done=e=>{ne.update(e,{progress:1})};ne.onChange=OQ;ne.play=e=>w_(!0,e);ne.pause=e=>w_(!1,e);const BQ=async(e,t)=>(await q.get(`/shopping-lists/family/${e}`,{params:{filter:t}})).data,zQ=async e=>(await q.post("/shopping-lists",e)).data,UQ=async e=>{await q.delete(`/shopping-lists/${e}`)},HQ=async e=>{await q.patch(`/shopping-lists/${e}/archive`)},VQ=async(e,t,r)=>(await q.post("/shopping-lists/add-meal-plan",{familyId:e,weekStart:t,shoppingListId:r})).data,$Q=async e=>(await q.post("/shopping-items",e)).data,WQ=async(e,t)=>{await q.put(`/shopping-items/${e}`,t)},YQ=async e=>(await q.get(`/meals/${e}/meals`)).data,GQ=async(e,t)=>(await q.get(`/meals/${e}/plan`,{params:t})).data,qQ=async(e,t)=>(await q.post(`/meals/${e}/plan`,t)).data,KQ=async e=>(await q.post(`/meals/meals/${e}/convert-to-recipe`)).data,QQ=async(e,t)=>{const r={familyId:e};return t!=null&&t.mealSlots&&(r.mealSlots=t.mealSlots.join(",")),t!=null&&t.daysToSuggest&&(r.daysToSuggest=t.daysToSuggest),t!=null&&t.forceRefresh&&(r.forceRefresh=t.forceRefresh),(await q.get("/linz/meal-suggestions",{params:r})).data},ZQ=async e=>(await q.get("/linz/meal-name-suggestions",{params:{familyId:e}})).data,vg=async(e,t,r,n)=>(await q.post("/linz/generate-ingredients",{mealName:e,familyId:t,userId:r,mealId:n})).data,XQ=async(e,t)=>{var s,i;const r={familyId:String(e)};return t!=null&&t.userId&&(r.userId=t.userId),(s=t==null?void 0:t.keys)!=null&&s.length&&(r.keys=t.keys.join(",")),((i=(await q.get("/linz/facts",{params:r})).data)==null?void 0:i.facts)??[]},JQ=async e=>{await q.post("/linz/facts",{facts:e})},k_=async()=>(await q.get("/integrations/status")).data.activeProviders||[],eZ=async()=>{await q.delete("/integrations/instacart/disconnect")},tZ=async e=>(await q.post("/integrations/instacart/search",{query:e})).data,rZ=async(e,t)=>{await q.post("/integrations/instacart/add-to-cart",{productId:e,quantity:t})},nZ=({items:e})=>{const[t,r]=m.useState(e[0]||null),[n,s]=m.useState([]),[i,a]=m.useState(!1),[l,c]=m.useState(null);m.useEffect(()=>{if(!t)return;(async()=>{a(!0),c(null);try{const f=await tZ(t.Name);s(f)}catch{c("Failed to search for products."),ne.error("Failed to search for products.")}a(!1)})()},[t]);const u=async d=>{if(t)try{await rZ(d.id,t.Quantity),ne.success(`Added "${d.name}" to your Instacart cart.`)}catch{ne.error(`Failed to add "${d.name}" to cart.`)}};return o.jsxs("div",{className:"flex h-[70vh]",children:[o.jsxs("div",{className:"w-1/3 border-r border-neutral-200 dark:border-neutral-700 pr-4 overflow-y-auto",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Your Shopping List"}),o.jsx("div",{className:"space-y-2",children:e.map(d=>o.jsxs("button",{onClick:()=>r(d),className:`w-full text-left p-3 rounded-lg transition-colors ${(t==null?void 0:t.ShoppingItemID)===d.ShoppingItemID?"bg-primary-100 dark:bg-primary-900/50":"hover:bg-neutral-100 dark:hover:bg-neutral-700"}`,children:[o.jsx("p",{className:"font-medium",children:d.Name}),o.jsxs("p",{className:"text-sm text-neutral-500",children:[d.Quantity," ",d.Unit]})]},d.ShoppingItemID))})]}),o.jsxs("div",{className:"w-2/3 pl-4 overflow-y-auto",children:[o.jsxs("h2",{className:"text-lg font-semibold mb-4",children:['Instacart Results for "',t==null?void 0:t.Name,'"']}),i&&o.jsx("p",{children:"Searching..."}),l&&o.jsx("p",{className:"text-red-500",children:l}),!i&&!l&&n.length===0&&o.jsx("p",{children:"No results found."}),o.jsx("div",{className:"space-y-3",children:n.map(d=>o.jsxs("div",{className:"flex items-center gap-4 p-2 border rounded-lg",children:[o.jsx("img",{src:d.thumbnail_url,alt:d.name,className:"w-16 h-16 rounded-md"}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("p",{className:"font-semibold",children:d.name}),o.jsxs("p",{className:"text-sm text-neutral-500",children:[d.brand," - ",d.size]})]}),o.jsx("button",{onClick:()=>u(d),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",children:"Add"})]},d.id))})]})]})},wE=()=>{const{user:e}=Ft(),{family:t}=zr(),{openChat:r,appendLinZMessage:n}=li(),[s,i]=m.useState(!1),[a,l]=m.useState([]);m.useEffect(()=>{k_().then(l)},[]);const[c,u]=m.useState(!1),[d,f]=m.useState(!1),[h,p]=m.useState([]),[g,y]=m.useState(!1),[b,v]=m.useState([]),[x,w]=m.useState(!1),[k,S]=m.useState(["DINNER"]),[E,N]=m.useState(null),j=()=>{te.length===0&&(b.length>0?(r(),n(`Here are all the meal suggestions I have for you: ${b.join(", ")}. Would you like me to create any of these meals with ingredients?`)):(r(),n("Let's talk about your family's favorite meals to get some suggestions started!")))},[T,C]=m.useState([]),[_,V]=m.useState(null),[F,R]=m.useState(!0),[L,O]=m.useState(null),[z,B]=m.useState(!1),[W,se]=m.useState(!1),[X,de]=m.useState(!1),[fe,ye]=m.useState(!1),[ie,M]=m.useState(!1),J=m.useRef(null);m.useEffect(()=>{const U=ke=>{J.current&&!J.current.contains(ke.target)&&M(!1)};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[J]);const[P,oe]=m.useState("lists"),[te,be]=m.useState([]),[je,Oe]=m.useState([]),[Ie,Ye]=m.useState(()=>{const U=new Date,ke=new Date(U),He=ke.getDay(),ot=He===0?-6:1-He;return ke.setDate(ke.getDate()+ot),ke.setHours(0,0,0,0),ke.toISOString().split("T")[0]}),[Qe,nt]=m.useState("all"),[$e,Ce]=m.useState(""),[Fe,D]=m.useState(""),[Q,I]=m.useState(""),[A,K]=m.useState(""),[pe,ge]=m.useState(""),[gt,Wt]=m.useState(1),nr=()=>{const U={};return pe||(U.newItemName="Item name is required."),Xr(U),Object.keys(U).length===0},[vt,Ur]=m.useState(""),[Ls,Er]=m.useState(null),[Qt,Xr]=m.useState({}),fs=()=>{const U={};return Fe||(U.newListName="List name is required."),Xr(U),Object.keys(U).length===0},ae=m.useCallback(async(U=!1)=>{if(t)try{R(!0);const ke=await BQ(t.FamilyID.toString(),Qe);C(ke),!U&&ke.length>0?V(ke[0]):U&&V(He=>He&&(ke.find(An=>An.ShoppingListID===He.ShoppingListID)||He))}catch(ke){O(ke instanceof Error?ke.message:"An unknown error occurred")}finally{R(!1)}},[t,Qe]),le=m.useCallback(async()=>{if(t)try{const[U,ke]=await Promise.all([YQ(t.FamilyID),GQ(t.FamilyID,{weekStart:Ie})]);be(U),Oe(ke)}catch(U){O(U instanceof Error?U.message:"Failed to load meals")}},[t,Ie]);m.useEffect(()=>{ae()},[ae,Qe]),m.useEffect(()=>{P==="meal-planner"&&le()},[P,le]);const Ze=async()=>{if(fs()&&!(!t||!e))try{await zQ({FamilyID:t.FamilyID,Name:Fe,CreatedByUserID:e.id}),D(""),B(!1),ae()}catch(U){O(U instanceof Error?U.message:"Failed to create list")}},Je=async()=>{if(nr()&&!(!_||!e))try{await $Q({ShoppingListID:_.ShoppingListID,Name:pe,Quantity:gt,Unit:vt,AddedByUserID:e.id,CategoryID:Ls}),ge(""),Wt(1),Ur(""),Er(null),se(!1),ae(!0)}catch(U){O(U instanceof Error?U.message:"Failed to create item")}},Jr=async()=>{if(!(!t||!e||!Q.trim())){u(!0);try{await vg(Q,t.FamilyID,e.id),ne.success(`Successfully created meal "${Q}" with ingredients!`),I(""),K(""),de(!1),le()}catch(U){ne.error(U instanceof Error?U.message:"Failed to create meal with LinZ"),O(U instanceof Error?U.message:"Failed to create meal with LinZ")}finally{u(!1)}}},Fs=({meal:U,suggestion:ke})=>{var He;return o.jsx("div",{onClick:()=>et(ke,U),className:"flex items-center gap-3 p-3 rounded-xl border border-dashed border-primary-200 dark:border-primary-700 bg-primary-50/30 dark:bg-primary-900/20 cursor-pointer hover:bg-primary-100/50 dark:hover:bg-primary-900/30 transition-colors",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-semibold text-neutral-900 dark:text-white text-sm",children:U.Title}),o.jsxs("span",{className:"text-xs text-primary-600 dark:text-primary-400",children:[ke.mealSlot.toLowerCase(),"  ",sr[ke.dayOfWeek]]})]}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Click to assign to selected slot"}),o.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:(He=U.Tags)==null?void 0:He.slice(0,3).map(ot=>o.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-neutral-100 dark:bg-neutral-700/60 text-neutral-600 dark:text-neutral-300",children:ot.Tag},ot.MealTagID))})]})})},ee=({dayIndex:U,slot:ke,children:He})=>{const ot=(E==null?void 0:E.day)===U&&(E==null?void 0:E.slot)===ke;return o.jsxs("div",{onClick:()=>ct(U,ke),className:`rounded-xl border border-dashed p-3 min-h-[110px] flex flex-col gap-3 transition-all cursor-pointer ${ot?"border-primary-500 bg-primary-50/50 dark:bg-primary-900/30 scale-105":"border-neutral-200 dark:border-neutral-700 bg-neutral-50/60 dark:bg-neutral-800/40 hover:border-primary-300 hover:bg-primary-50/20 dark:hover:bg-primary-900/10"}`,children:[He,ot&&o.jsx("div",{className:"text-xs text-primary-600 dark:text-primary-400 font-medium",children:"Click a suggestion to assign "})]})},De=async(U=!1)=>{if(t){y(!0);try{const ke=await QQ(t.FamilyID,{mealSlots:k,daysToSuggest:7,forceRefresh:U});if(ke.length===0){w(!0);try{const He=await ZQ(t.FamilyID);He.length>0?(v(He),ne.info("LinZ has some meal ideas to get you started! Try creating some of these meals.")):(r(),n("I don't have enough information about your family's meal preferences yet. Let's talk about your favorite meals and dietary preferences so I can suggest some ideas!"),ne.info("LinZ needs to learn more about your preferences first."))}catch(He){console.error("Error getting meal name suggestions:",He),r(),n("Let's chat about your family's favorite meals and dietary preferences so I can suggest some ideas!"),ne.info("LinZ is ready to learn about your meal preferences!")}finally{w(!1)}}else{p(ke);const He=k.length===1?k[0].toLowerCase():"meal",ot=U?"fresh ":"";ne.success(`LinZ has some ${ot}${He} ideas for your meal plan!`)}}catch(ke){console.error("Error getting meal suggestions:",ke),r(),n("I'm having trouble generating meal suggestions right now. Let's chat about your family's favorite meals and I'll help you plan some meals!"),ne.error("LinZ had trouble coming up with suggestions, but is ready to chat!")}finally{y(!1)}}},et=async(U,ke)=>{if(!E){ne.error("Please select a meal slot first by clicking on a calendar day and time");return}try{await da(E.day,E.slot,ke.MealID),p(He=>He.filter(ot=>ot!==U)),ne.success(`${ke.Title} assigned to ${E.slot.toLowerCase()} for ${sr[E.day]}`),N(null)}catch{ne.error("Failed to assign meal")}},ct=(U,ke)=>{N({day:U,slot:ke}),ne.info(`Selected ${ke.toLowerCase()} for ${sr[U]}. Now click a meal suggestion to assign it.`)},fi=async()=>{if(_)try{await UQ(_.ShoppingListID.toString()),ye(!1),ae()}catch(U){O(U instanceof Error?U.message:"Failed to delete list")}},Y=()=>{if(!_)return;const U=_.ShoppingItems.map(ke=>`${ke.Quantity} ${ke.Unit||""} ${ke.Name}`.trim()).join(`
`);navigator.clipboard.writeText(U).then(()=>{ne.success("List copied to clipboard!")},ke=>{ne.error("Failed to copy list."),console.error("Could not copy text: ",ke)})},Be=async()=>{if(_)try{await HQ(_.ShoppingListID.toString()),ae()}catch(U){O(U instanceof Error?U.message:"Failed to archive list")}},Re=async U=>{try{await WQ(U.ShoppingItemID.toString(),{Completed:!U.Completed}),ae()}catch(ke){O(ke instanceof Error?ke.message:"Failed to update item")}},Yt=T.filter(U=>U.Name.toLowerCase().includes($e.toLowerCase())||U.ShoppingItems.some(ke=>ke.Name.toLowerCase().includes($e.toLowerCase()))),Nt=(_==null?void 0:_.ShoppingItems.filter(U=>U.Completed).length)||0,Ue=(_==null?void 0:_.ShoppingItems.length)||0,Tt=()=>o.jsx("div",{className:"border-b border-neutral-200 dark:border-neutral-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>oe("lists"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${P==="lists"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300 dark:text-neutral-400"}`,children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx($6,{size:16})," Lists"]})}),o.jsx("button",{onClick:()=>oe("meal-planner"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${P==="meal-planner"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300 dark:text-neutral-400"}`,children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx(al,{size:16})," Meal Planner"]})})]})}),sr=m.useMemo(()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],[]),ua=[{slot:"BREAKFAST",label:"Breakfast"},{slot:"LUNCH",label:"Lunch"},{slot:"DINNER",label:"Dinner"},{slot:"SNACK",label:"Snack"}],kt=m.useMemo(()=>ua.filter(U=>k.includes(U.slot)),[k]),Bs=m.useMemo(()=>{const U=je.find(He=>He.WeekStart.startsWith(Ie)),ke={};if(U)for(const He of U.Entries)ke[`${He.DayOfWeek}-${He.MealSlot}`]=He;return ke},[je,Ie]),da=async(U,ke,He)=>{if(!(!t||!e))try{const ot=te.find(An=>An.MealID===He);if(!ot){ne.error("Meal not found");return}if(!ot.Ingredients||ot.Ingredients.length===0){ne.info(`Generating ingredients for ${ot.Title}...`);try{const An=await vg(ot.Title,t.FamilyID,e.id,ot.MealID);be(Dl=>Dl.map(hi=>hi.MealID===He?An:hi)),ne.success(`Generated ${An.Ingredients.length} ingredients for ${ot.Title}`)}catch(An){console.error("Failed to generate ingredients:",An),ne.error("Failed to generate ingredients, but meal will still be added to plan")}}await qQ(t.FamilyID,{WeekStart:Ie,DayOfWeek:U,MealSlot:ke,MealID:He,Servings:ot.DefaultServings??4,AddedByUserID:e.id}),le()}catch(ot){O(ot instanceof Error?ot.message:"Failed to add meal")}},fa=async U=>{try{ne.info(`Converting ${U.Title} to recipe...`);const ke=await KQ(U.MealID);ne.success(`${U.Title} converted to recipe! Recipe ID: ${ke.recipe.RecipeID}`),le()}catch(ke){ne.error(ke instanceof Error?ke.message:"Failed to convert meal to recipe")}},Hp=async()=>{if(!_){ne.info("Please select a shopping list first.");return}if(t){f(!0);try{await VQ(t.FamilyID,Ie,_.ShoppingListID),ne.success("Ingredients from your meal plan have been added to the list!"),ae(!0),oe("lists")}catch(U){ne.error(U instanceof Error?U.message:"Could not generate shopping list.")}finally{f(!1)}}},dI=()=>o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[o.jsxs("div",{className:"lg:w-2/3 bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:"Weekly Meal Plan"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Assign meals to each day and time slot. Select meal types on the right to customize your plan view."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"date",value:Ie,onChange:U=>Ye(U.target.value),className:"px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),o.jsxs("button",{onClick:Hp,disabled:d,className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors disabled:bg-primary-300 dark:disabled:bg-primary-700",children:[o.jsx(Ho,{size:18,className:"mr-2"}),o.jsx("span",{children:d?"Generating...":"Generate Shopping List"})]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border-separate border-spacing-y-3",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left text-xs font-semibold uppercase text-neutral-500 dark:text-neutral-400 w-28",children:"Meal"}),sr.map((U,ke)=>o.jsx("th",{className:"text-left text-xs font-semibold uppercase text-neutral-500 dark:text-neutral-400 px-2",children:U},U))]})}),o.jsx("tbody",{children:kt.map(({slot:U,label:ke})=>o.jsxs("tr",{children:[o.jsx("td",{className:"align-top pr-2 pt-3 text-sm font-medium text-neutral-700 dark:text-neutral-300",children:ke}),sr.map((He,ot)=>{var yb;const An=`${ot}-${U}`,Dl=Bs[An],hi=h.find(Dn=>Dn.dayOfWeek===ot&&Dn.mealSlot===U),Vp=hi?te.find(Dn=>Dn.MealID===hi.mealId):null;return o.jsx("td",{className:"align-top px-2",children:o.jsxs(ee,{dayIndex:ot,slot:U,children:[Dl?o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-neutral-900 dark:text-white truncate",children:((yb=Dl.Meal)==null?void 0:yb.Title)??"Meal removed"}),o.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Serves ",Dl.Servings]})]}):hi&&Vp?o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsx("p",{className:"text-xs text-primary-500 font-semibold",children:"Suggestion:"}),o.jsx("p",{className:"font-semibold text-neutral-900 dark:text-white truncate",children:Vp.Title}),o.jsxs("div",{className:"mt-auto flex gap-2",children:[o.jsx("button",{onClick:()=>{da(ot,U,Vp.MealID),p(Dn=>Dn.filter($p=>$p!==hi))},className:"text-xs px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Accept"}),o.jsx("button",{onClick:()=>p(Dn=>Dn.filter($p=>$p!==hi)),className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-700",children:"Decline"})]})]}):o.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Tap a meal to assign"}),o.jsxs("div",{className:"mt-auto",children:[o.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-1",children:"Suggestions"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:te.slice(0,3).map(Dn=>o.jsx("button",{onClick:()=>da(ot,U,Dn.MealID),className:"text-xs px-2 py-1 rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900/40 dark:text-primary-300 hover:bg-primary-200 dark:hover:bg-primary-800/60",children:Dn.Title},`${An}-${Dn.MealID}`))})]})]})},An)})]},U))})]})})]}),o.jsxs("div",{className:"lg:w-1/3 space-y-4",children:[o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Family Suggestions"}),o.jsx("button",{onClick:j,className:"text-sm text-primary-600 dark:text-primary-400 hover:underline",children:"See all"})]}),o.jsx("div",{className:"space-y-3",children:te.length>0?te.slice(0,5).map(U=>{var ke;return o.jsx("div",{className:"flex items-start gap-3 p-3 rounded-xl border border-neutral-200 dark:border-neutral-700",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-semibold text-neutral-900 dark:text-white",children:U.Title}),o.jsxs("div",{className:"flex items-center gap-2",children:[U.Recipe?o.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[o.jsx(D2,{size:12}),"Recipe"]}):o.jsxs("button",{onClick:()=>fa(U),className:"text-xs text-neutral-400 hover:text-primary-600 dark:hover:text-primary-400 flex items-center gap-1 transition-colors",title:"Convert to Recipe",children:[o.jsx(lu,{size:12}),"Recipe"]}),U.IsFavorite&&o.jsx("span",{className:"text-xs text-primary-500",children:"Favorite"})]})]}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 line-clamp-2",children:U.Description||"No description yet."}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(ke=U.Tags)==null?void 0:ke.map(He=>o.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-neutral-100 dark:bg-neutral-700/60 text-neutral-600 dark:text-neutral-300",children:He.Tag},He.MealTagID))})]})},U.MealID)}):b.length>0?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-3",children:"LinZ suggests these meals to get you started:"}),b.slice(0,6).map((U,ke)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl border border-dashed border-primary-200 dark:border-primary-700 bg-primary-50/30 dark:bg-primary-900/20",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-neutral-900 dark:text-white",children:U}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Click to create with LinZ"})]}),o.jsx("button",{onClick:async()=>{if(!(!e||!t)){u(!0);try{await vg(U,t.FamilyID,e.id),ne.success(`Successfully created "${U}" with ingredients!`),v(He=>He.filter(ot=>ot!==U)),le()}catch{ne.error(`Failed to create "${U}"`)}finally{u(!1)}}},disabled:c,className:"text-xs px-3 py-1 rounded-full bg-primary-500 text-white hover:bg-primary-600 disabled:opacity-50",children:"Create"})]},ke))]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-3",children:"No meals yet"}),o.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Chat with LinZ about your favorites or tap "Get Meal Suggestions" to start'})]})})]}),h.length>0&&o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"LinZ Suggestions"}),o.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Click slot, then click suggestion"})]}),o.jsx("div",{className:"space-y-3",children:h.map((U,ke)=>{const He=te.find(ot=>ot.MealID===U.mealId);return He?o.jsx(Fs,{meal:He,suggestion:U},`${U.mealId}-${U.dayOfWeek}-${U.mealSlot}-${ke}`):null})})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-3",children:"Meal Types"}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-3",children:"Select which meal types to get suggestions for:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:["BREAKFAST","LUNCH","DINNER","SNACK"].map(U=>o.jsx("button",{onClick:()=>{S(ke=>ke.includes(U)?ke.filter(He=>He!==U):[...ke,U])},className:`p-2 text-xs rounded-lg border transition-colors ${k.includes(U)?"bg-primary-100 border-primary-300 text-primary-800 dark:bg-primary-900/40 dark:border-primary-600 dark:text-primary-300":"bg-neutral-50 border-neutral-200 text-neutral-600 hover:bg-neutral-100 dark:bg-neutral-700/50 dark:border-neutral-600 dark:text-neutral-400 dark:hover:bg-neutral-700"}`,children:U.charAt(0)+U.slice(1).toLowerCase()},U))})]}),o.jsxs("div",{className:"bg-primary-50/70 dark:bg-primary-900/40 rounded-2xl p-4",children:[o.jsx("h3",{className:"text-sm font-semibold text-primary-700 dark:text-primary-300 mb-2",children:"LinZ Assist"}),o.jsx("p",{className:"text-xs text-primary-700/80 dark:text-primary-200/80",children:"LinZ will import ingredients from your confirmed meals into the active shopping list. Tap the bubble to ask for recipe ideas or substitutions."}),o.jsxs("button",{className:"mt-3 inline-flex items-center gap-2 text-xs text-primary-700 hover:text-primary-800 dark:text-primary-200",onClick:()=>{r(),n("Can you give me some recipe ideas?")},children:[o.jsx(Ho,{size:14})," Ask LinZ for a recipe"]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsxs("button",{onClick:()=>De(!1),disabled:g,className:"inline-flex items-center gap-2 text-xs text-primary-700 hover:text-primary-800 dark:text-primary-200 disabled:opacity-50",children:[o.jsx(Ho,{size:14})," ",g?"Thinking...":"Get Suggestions"]}),h.length>0&&o.jsx("button",{onClick:()=>De(!0),disabled:g,className:"inline-flex items-center gap-2 text-xs text-secondary-700 hover:text-secondary-800 dark:text-secondary-200 disabled:opacity-50",children:" Refresh"})]})]})]})]})});return F&&P==="lists"?o.jsx("div",{children:"Loading shopping lists..."}):L?o.jsxs("div",{className:"text-error-500",children:["Error: ",L]}):o.jsxs("div",{id:"shopping-lists-panel",className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:"Shopping Lists"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Manage family shopping lists and track expenses"})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"relative flex-1 md:flex-none md:min-w-[200px]",children:[o.jsx("input",{type:"text",placeholder:"Search lists...",value:$e,onChange:U=>Ce(U.target.value),className:"w-full pl-10 pr-4 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}),o.jsx(lp,{className:"absolute left-3 top-2.5 text-neutral-400 dark:text-neutral-500",size:18})]}),P==="lists"?o.jsxs("button",{onClick:()=>B(!0),className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(tr,{size:18,className:"mr-2"}),o.jsx("span",{children:"New List"})]}):o.jsxs("button",{onClick:()=>de(!0),className:"flex items-center px-3 py-2 rounded-2xl bg-secondary-500 text-white hover:bg-secondary-600 dark:hover:bg-secondary-400 transition-colors",children:[o.jsx(tr,{size:18,className:"mr-2"}),o.jsx("span",{children:"New Meal"})]})]})]}),Tt(),P==="meal-planner"?dI():o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-neutral-800 rounded-2xl shadow-card overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-semibold text-neutral-900 dark:text-white",children:"Your Lists"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>nt("all"),className:`px-2 py-1 text-xs rounded-lg ${Qe==="all"?"bg-primary-100 text-primary-700":"text-neutral-500"}`,children:"All"}),o.jsx("button",{onClick:()=>nt("active"),className:`px-2 py-1 text-xs rounded-lg ${Qe==="active"?"bg-primary-100 text-primary-700":"text-neutral-500"}`,children:"Active"}),o.jsx("button",{onClick:()=>nt("archived"),className:`px-2 py-1 text-xs rounded-lg ${Qe==="archived"?"bg-primary-100 text-primary-700":"text-neutral-500"}`,children:"Archived"})]})]})}),o.jsx("div",{className:"divide-y divide-neutral-200 dark:divide-neutral-700",children:Yt.map(U=>o.jsxs("button",{onClick:()=>V(U),className:`w-full p-4 text-left transition-colors ${(_==null?void 0:_.ShoppingListID)===U.ShoppingListID?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-neutral-50 dark:hover:bg-neutral-700"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:U.Name}),o.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:new Date(U.CreatedAt).toLocaleDateString()})]}),o.jsx("div",{className:"mt-2 flex items-center justify-between text-sm",children:o.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:[U.ShoppingItems.length," items"]})})]},U.ShoppingListID))})]}),_?o.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-neutral-800 rounded-2xl shadow-card",children:[o.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:_.Name}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[Nt," of ",Ue," items completed"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:Y,className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(ev,{size:18})}),a.includes("INSTACART")&&o.jsx("button",{onClick:()=>i(!0),className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(zu,{size:18})}),o.jsx("button",{onClick:Be,className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(R6,{size:18})}),o.jsxs("div",{className:"relative",ref:J,children:[o.jsx("button",{onClick:()=>M(U=>!U),className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(qf,{size:18})}),ie&&o.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-neutral-800 rounded-md shadow-lg z-10",children:o.jsx("button",{onClick:()=>{ye(!0),M(!1)},className:"block w-full text-left px-4 py-2 text-sm text-error-600 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Delete"})})]})]})]}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"h-2 bg-neutral-100 dark:bg-neutral-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all",style:{width:`${Nt/Ue*100}%`}})})}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Est. Total"}),o.jsxs("p",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:["$",(Ue*3.5).toFixed(2)]})]})]})]}),o.jsxs("div",{className:"p-4",children:[o.jsxs("button",{onClick:()=>se(!0),className:"w-full p-3 rounded-xl border-2 border-dashed border-neutral-200 dark:border-neutral-700 text-neutral-500 dark:text-neutral-400 hover:border-primary-500 hover:text-primary-500 dark:hover:border-primary-400 dark:hover:text-primary-400 transition-colors",children:[o.jsx(tr,{size:20,className:"mx-auto"}),o.jsx("span",{className:"block mt-1 text-sm",children:"Add Item"})]}),o.jsx("div",{className:"mt-4 space-y-2",children:_.ShoppingItems.map(U=>o.jsx(bt.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`p-3 rounded-xl border border-neutral-200 dark:border-neutral-700 ${U.Completed?"bg-neutral-50 dark:bg-neutral-800/50":"bg-white dark:bg-neutral-800"}`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>Re(U),className:`p-2 rounded-xl ${U.Completed?"text-primary-500 dark:text-primary-400":"text-neutral-400 dark:text-neutral-500 hover:text-primary-500 dark:hover:text-primary-400"}`,children:U.Completed?o.jsx(P6,{size:20}):o.jsx(Y0,{size:20})}),o.jsxs("div",{className:"flex-1 ml-3",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("h3",{className:`font-medium ${U.Completed?"text-neutral-400 dark:text-neutral-500 line-through":"text-neutral-900 dark:text-white"}`,children:U.Name})}),o.jsxs("div",{className:"mt-1 text-sm text-neutral-500 dark:text-neutral-400",children:[U.Quantity," ",U.Unit]})]}),o.jsx("button",{onClick:()=>ne.info("More options coming soon!"),className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(qf,{size:18})})]})},U.ShoppingItemID))})]})]}):o.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-neutral-800 rounded-2xl shadow-card flex items-center justify-center p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 w-16 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 mx-auto mb-4",children:o.jsx(Kf,{size:32})}),o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white mb-2",children:"No list selected"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Select a list from the sidebar or create a new one"})]})})]}),o.jsx(er,{children:z&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Create New List"}),o.jsx("button",{onClick:()=>B(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"List Name"}),o.jsx("input",{type:"text",value:Fe,onChange:U=>D(U.target.value),className:`w-full px-3 py-2 rounded-xl border ${Qt.newListName?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,placeholder:"Enter list name"}),Qt.newListName&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:Qt.newListName})]})})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:Ze,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Create List"})]})]})})}),o.jsx(er,{children:W&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Add New Item"}),o.jsx("button",{onClick:()=>se(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Item Name"}),o.jsx("input",{type:"text",value:pe,onChange:U=>ge(U.target.value),className:`w-full px-3 py-2 rounded-xl border ${Qt.newItemName?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,placeholder:"Enter item name"}),Qt.newItemName&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:Qt.newItemName})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Quantity"}),o.jsx("input",{type:"number",min:"1",value:gt,onChange:U=>Wt(parseInt(U.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Unit"}),o.jsx("input",{type:"text",value:vt,onChange:U=>Ur(U.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"e.g., pieces, lbs"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Category"}),o.jsxs("select",{value:Ls??"",onChange:U=>Er(parseInt(U.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:[o.jsx("option",{value:"",children:"Select a category"}),o.jsx("option",{value:"1",children:"Groceries"}),o.jsx("option",{value:"2",children:"Household"}),o.jsx("option",{value:"3",children:"Personal"}),o.jsx("option",{value:"4",children:"School"}),o.jsx("option",{value:"5",children:"Other"})]})]})]})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:()=>se(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:Je,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Add Item"})]})]})})}),o.jsx(er,{children:X&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Create New Meal"}),o.jsx("button",{onClick:()=>de(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Meal Name"}),o.jsx("input",{type:"text",value:Q,onChange:U=>I(U.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Enter meal name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Description"}),o.jsx("textarea",{value:A,onChange:U=>K(U.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Enter a brief description",rows:3})]})]})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:()=>de(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:Jr,disabled:c,className:"px-4 py-2 text-sm font-medium text-white bg-secondary-500 hover:bg-secondary-600 dark:hover:bg-secondary-400 rounded-xl disabled:bg-secondary-300 dark:disabled:bg-secondary-700",children:c?"LinZ is thinking...":"Create Meal"})]})]})})}),o.jsx(er,{children:fe&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Delete List"}),o.jsx("button",{onClick:()=>ye(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsx("p",{children:"Are you sure you want to delete this list? This action cannot be undone."})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:()=>ye(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:fi,className:"px-4 py-2 text-sm font-medium text-white bg-error-600 hover:bg-error-700 rounded-xl",children:"Delete"})]})]})})}),o.jsx(er,{children:s&&_&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-4xl w-full h-full max-h-[80vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700 flex-shrink-0",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Export to Instacart"}),o.jsx("button",{onClick:()=>i(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4 flex-grow overflow-hidden",children:o.jsx(nZ,{items:_.ShoppingItems})})]})})})]})},sZ="modulepreload",iZ=function(e){return"/app/"+e},kE={},Cl=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=iZ(c),c in kE)return;kE[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":sZ,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function SE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Eh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(r),!0).forEach(function(n){S_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aZ(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function oZ(e,t){if(e==null)return{};var r=aZ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wo(e,t){return lZ(e)||cZ(e,t)||uZ(e,t)||dZ()}function lZ(e){if(Array.isArray(e))return e}function cZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],s=!0,i=!1,a,l;try{for(r=r.call(e);!(s=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));s=!0);}catch(c){i=!0,l=c}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function uZ(e,t){if(e){if(typeof e=="string")return EE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EE(e,t)}}function EE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fZ=["src","checkForExisting"],fc={},NE=function(t){var r=document.querySelector('script[src="'.concat(t,'"]'));if(r)return fc[t]={loading:!1,error:null,scriptEl:r}},jE=typeof window<"u"&&typeof window.document<"u";function hZ(e){var t=e.src,r=e.checkForExisting,n=r===void 0?!1:r,s=oZ(e,fZ),i=t?fc[t]:void 0;!i&&n&&t&&jE&&(i=NE(t));var a=m.useState(i?i.loading:!!t),l=Wo(a,2),c=l[0],u=l[1],d=m.useState(i?i.error:null),f=Wo(d,2),h=f[0],p=f[1],g=m.useState(!1),y=Wo(g,2),b=y[0],v=y[1];return m.useEffect(function(){if(!(!jE||!t||b||h)){i=fc[t],!i&&n&&(i=NE(t));var x;i?x=i.scriptEl:(x=document.createElement("script"),x.src=t,Object.keys(s).forEach(function(S){x[S]===void 0?x.setAttribute(S,s[S]):x[S]=s[S]}),i=fc[t]={loading:!0,error:null,scriptEl:x});var w=function(){i&&(i.loading=!1),u(!1),v(!0)},k=function(E){i&&(i.error=E),p(E)};return x.addEventListener("load",w),x.addEventListener("error",k),document.body.appendChild(x),function(){x.removeEventListener("load",w),x.removeEventListener("error",k),i&&i.loading&&(x.remove(),delete fc[t])}}},[t]),[c,h]}var pZ=function(t,r,n){var s={};return delete Object.assign(s,t,S_({},n,t[r]))[r],s},mZ=function(t,r){var n={plaid:null,open:!1,onExitCallback:null};if(typeof window>"u"||!window.Plaid)throw new Error("Plaid not loaded");n.plaid=r(Eh(Eh({},t),{},{onExit:function(u,d){n.open=!1,t.onExit&&t.onExit(u,d),n.onExitCallback&&n.onExitCallback()}}));var s=function(){n.plaid&&(n.open=!0,n.onExitCallback=null,n.plaid.open())},i=function(u){n.plaid&&n.plaid.submit(u)},a=function(u,d){if(!n.open||!n.plaid){d&&d();return}n.onExitCallback=d,n.plaid.exit(u),u&&u.force&&(n.open=!1)},l=function(){n.plaid&&(n.plaid.destroy(),n.plaid=null)};return{open:s,submit:i,exit:a,destroy:l}},gZ=function(t,r){var n=pZ(t,"publicKey","key");return mZ(n,r)},yZ="https://cdn.plaid.com/link/v2/stable/link-initialize.js",CE=function(){},xZ=function(t){var r=hZ({src:yZ,checkForExisting:!0}),n=Wo(r,2),s=n[0],i=n[1],a=m.useState(null),l=Wo(a,2),c=l[0],u=l[1],d=m.useState(!1),f=Wo(d,2),h=f[0],p=f[1],g=(t.product||[]).slice().sort().join(",");m.useEffect(function(){if(!s&&!(!t.token&&!t.publicKey&&!t.receivedRedirectUri)){if(i||!window.Plaid){console.error("Error loading Plaid",i);return}c!=null&&c.exit({force:!0},function(){return c.destroy()});var v=gZ(Eh(Eh({},t),{},{onLoad:function(){p(!0),t.onLoad&&t.onLoad()}}),window.Plaid.create);return u(v),function(){return v.exit({force:!0},function(){return v.destroy()})}}},[s,i,t.publicKey,t.token,g]);var y=c!=null&&(!s||h),b=function(){t.token||console.warn("react-plaid-link: You cannot call open() without a valid token supplied to usePlaidLink. This is a no-op.")};return{error:i,ready:y,submit:c?c.submit:CE,exit:c?c.exit:CE,open:c?c.open:b}},TE;(function(e){e.OPEN="OPEN",e.EXIT="EXIT",e.HANDOFF="HANDOFF",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.ERROR="ERROR",e.BANK_INCOME_INSIGHTS_COMPLETED="BANK_INCOME_INSIGHTS_COMPLETED",e.IDENTITY_VERIFICATION_PASS_SESSION="IDENTITY_VERIFICATION_PASS_SESSION",e.IDENTITY_VERIFICATION_FAIL_SESSION="IDENTITY_VERIFICATION_FAIL_SESSION"})(TE||(TE={}));function vZ(e,t){const[r,n]=m.useState(e);return m.useEffect(()=>{const s=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(s)}},[e,t]),r}const bZ=async e=>(await q.get(`/budget/family/${e}`)).data,wZ=async e=>(await q.post("/budget",e)).data,kZ=async(e,t)=>{await q.put(`/budget/${e}`,t)},SZ=async e=>{await q.delete(`/budget/${e}`)},EZ=async e=>(await q.get(`/savings-goals/family/${e}`)).data,NZ=async e=>(await q.post("/savings-goals",e)).data,jZ=async(e,t)=>{await q.put(`/savings-goals/${e}`,t)},CZ=async e=>{await q.delete(`/savings-goals/${e}`)},TZ=async(e,t)=>{const r=new URLSearchParams;return t&&(r.append("startDate",t.startDate.toISOString()),r.append("endDate",t.endDate.toISOString())),(await q.post(`/transactions/accounts?${r.toString()}`,{accountIds:e})).data},AZ=async e=>(await q.post("/transactions",e)).data,AE=async e=>{const t=e?`/plaid/accounts?familyId=${e}`:"/plaid/accounts";return(await q.get(t)).data},DZ=async e=>{await q.delete(`/plaid/accounts/${e}`)},RZ=async(e,t)=>{await q.put(`/plaid/accounts/${e}`,{customName:t})},DE=({onEdit:e,onDelete:t})=>{const[r,n]=m.useState(!1);return o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>n(!r),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:o.jsx(qf,{size:18})}),o.jsx(er,{children:r&&o.jsxs(bt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg z-10",children:[o.jsxs("button",{onClick:()=>{e(),n(!1)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[o.jsx(cp,{size:14,className:"mr-2"})," Edit"]}),o.jsxs("button",{onClick:()=>{t(),n(!1)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:[o.jsx(ri,{size:14,className:"mr-2"})," Delete"]})]})})]})},Mp=0,aa=1,Tl=2,E_=4;function RE(e){return()=>e}function _Z(e){e()}function N_(e,t){return r=>e(t(r))}function _E(e,t){return()=>e(t)}function IZ(e,t){return r=>e(t,r)}function sb(e){return e!==void 0}function MZ(...e){return()=>{e.map(_Z)}}function Al(){}function Op(e,t){return t(e),e}function OZ(e,t){return t(e)}function _t(...e){return e}function xt(e,t){return e(aa,t)}function Ke(e,t){e(Mp,t)}function ib(e){e(Tl)}function Zt(e){return e(E_)}function _e(e,t){return xt(e,IZ(t,Mp))}function ss(e,t){const r=e(aa,n=>{r(),t(n)});return r}function IE(e){let t,r;return n=>s=>{t=s,r&&clearTimeout(r),r=setTimeout(()=>{n(t)},e)}}function j_(e,t){return e===t}function Dt(e=j_){let t;return r=>n=>{e(t,n)||(t=n,r(n))}}function ze(e){return t=>r=>{e(r)&&t(r)}}function Ee(e){return t=>N_(t,e)}function ws(e){return t=>()=>{t(e)}}function ce(e,...t){const r=PZ(...t);return(n,s)=>{switch(n){case Tl:ib(e);return;case aa:return xt(e,r(s))}}}function Ns(e,t){return r=>n=>{r(t=e(t,n))}}function Za(e){return t=>r=>{e>0?e--:t(r)}}function qs(e){let t=null,r;return n=>s=>{t=s,!r&&(r=setTimeout(()=>{r=void 0,n(t)},e))}}function Xe(...e){const t=new Array(e.length);let r=0,n=null;const s=Math.pow(2,e.length)-1;return e.forEach((i,a)=>{const l=Math.pow(2,a);xt(i,c=>{const u=r;r=r|l,t[a]=c,u!==s&&r===s&&n&&(n(),n=null)})}),i=>a=>{const l=()=>{i([a].concat(t))};r===s?l():n=l}}function PZ(...e){return t=>e.reduceRight(OZ,t)}function LZ(e){let t,r;const n=()=>t==null?void 0:t();return function(s,i){switch(s){case aa:return i?r===i?void 0:(n(),r=i,t=xt(e,i),t):(n(),Al);case Tl:n(),r=null;return}}}function he(e){let t=e;const r=at();return(n,s)=>{switch(n){case Mp:t=s;break;case aa:{s(t);break}case E_:return t}return r(n,s)}}function Fr(e,t){return Op(he(t),r=>_e(e,r))}function at(){const e=[];return(t,r)=>{switch(t){case Mp:e.slice().forEach(n=>{n(r)});return;case Tl:e.splice(0,e.length);return;case aa:return e.push(r),()=>{const n=e.indexOf(r);n>-1&&e.splice(n,1)}}}}function kn(e){return Op(at(),t=>_e(e,t))}function mt(e,t=[],{singleton:r}={singleton:!0}){return{constructor:e,dependencies:t,id:FZ(),singleton:r}}const FZ=()=>Symbol();function BZ(e){const t=new Map,r=({constructor:n,dependencies:s,id:i,singleton:a})=>{if(a&&t.has(i))return t.get(i);const l=n(s.map(c=>r(c)));return a&&t.set(i,l),l};return r(e)}function lr(...e){const t=at(),r=new Array(e.length);let n=0;const s=Math.pow(2,e.length)-1;return e.forEach((i,a)=>{const l=Math.pow(2,a);xt(i,c=>{r[a]=c,n=n|l,n===s&&Ke(t,r)})}),function(i,a){switch(i){case Tl:{ib(t);return}case aa:return n===s&&a(r),xt(t,a)}}}function Le(e,t=j_){return ce(e,Dt(t))}function Ry(...e){return function(t,r){switch(t){case Tl:return;case aa:return MZ(...e.map(n=>xt(n,r)))}}}var fn=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(fn||{});const zZ={0:"debug",3:"error",1:"log",2:"warn"},UZ=()=>typeof globalThis>"u"?window:globalThis,oa=mt(()=>{const e=he(3);return{log:he((t,r,n=1)=>{var s;const i=(s=UZ().VIRTUOSO_LOG_LEVEL)!=null?s:Zt(e);n>=i&&console[zZ[n]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,r)}),logLevel:e}},[],{singleton:!0});function co(e,t,r){return ab(e,t,r).callbackRef}function ab(e,t,r){const n=re.useRef(null);let s=a=>{};const i=re.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(a=>{const l=()=>{const c=a[0].target;c.offsetParent!==null&&e(c)};r?l():requestAnimationFrame(l)}):null,[e,r]);return s=a=>{a&&t?(i==null||i.observe(a),n.current=a):(n.current&&(i==null||i.unobserve(n.current)),n.current=null)},{callbackRef:s,ref:n}}function HZ(e,t,r,n,s,i,a,l,c){const u=re.useCallback(d=>{const f=VZ(d.children,t,l?"offsetWidth":"offsetHeight",s);let h=d.parentElement;for(;!h.dataset.virtuosoScroller;)h=h.parentElement;const p=h.lastElementChild.dataset.viewportType==="window";let g;p&&(g=h.ownerDocument.defaultView);const y=a?l?a.scrollLeft:a.scrollTop:p?l?g.scrollX||g.document.documentElement.scrollLeft:g.scrollY||g.document.documentElement.scrollTop:l?h.scrollLeft:h.scrollTop,b=a?l?a.scrollWidth:a.scrollHeight:p?l?g.document.documentElement.scrollWidth:g.document.documentElement.scrollHeight:l?h.scrollWidth:h.scrollHeight,v=a?l?a.offsetWidth:a.offsetHeight:p?l?g.innerWidth:g.innerHeight:l?h.offsetWidth:h.offsetHeight;n({scrollHeight:b,scrollTop:Math.max(y,0),viewportHeight:v}),i==null||i(l?ME("column-gap",getComputedStyle(d).columnGap,s):ME("row-gap",getComputedStyle(d).rowGap,s)),f!==null&&e(f)},[e,t,s,i,a,n,l]);return ab(u,r,c)}function VZ(e,t,r,n){const s=e.length;if(s===0)return null;const i=[];for(let a=0;a<s;a++){const l=e.item(a);if(l.dataset.index===void 0)continue;const c=parseInt(l.dataset.index),u=parseFloat(l.dataset.knownSize),d=t(l,r);if(d===0&&n("Zero-sized element, this should not happen",{child:l},fn.ERROR),d===u)continue;const f=i[i.length-1];i.length===0||f.size!==d||f.endIndex!==c-1?i.push({endIndex:c,size:d,startIndex:c}):i[i.length-1].endIndex++}return i}function ME(e,t,r){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&r(`${e} was not resolved to pixel value correctly`,t,fn.WARN),t==="normal"?0:parseInt(t??"0",10)}function C_(e,t,r){const n=re.useRef(null),s=re.useCallback(c=>{if(!(c!=null&&c.offsetParent))return;const u=c.getBoundingClientRect(),d=u.width;let f,h;if(t){const p=t.getBoundingClientRect(),g=u.top-p.top;h=p.height-Math.max(0,g),f=g+t.scrollTop}else{const p=a.current.ownerDocument.defaultView;h=p.innerHeight-Math.max(0,u.top),f=u.top+p.scrollY}n.current={offsetTop:f,visibleHeight:h,visibleWidth:d},e(n.current)},[e,t]),{callbackRef:i,ref:a}=ab(s,!0,r),l=re.useCallback(()=>{s(a.current)},[s,a]);return re.useEffect(()=>{var c;if(t){t.addEventListener("scroll",l);const u=new ResizeObserver(()=>{requestAnimationFrame(l)});return u.observe(t),()=>{t.removeEventListener("scroll",l),u.unobserve(t)}}else{const u=(c=a.current)==null?void 0:c.ownerDocument.defaultView;return u==null||u.addEventListener("scroll",l),u==null||u.addEventListener("resize",l),()=>{u==null||u.removeEventListener("scroll",l),u==null||u.removeEventListener("resize",l)}}},[l,t,a]),i}const Zr=mt(()=>{const e=at(),t=at(),r=he(0),n=at(),s=he(0),i=at(),a=at(),l=he(0),c=he(0),u=he(0),d=he(0),f=at(),h=at(),p=he(!1),g=he(!1),y=he(!1);return _e(ce(e,Ee(({scrollTop:b})=>b)),t),_e(ce(e,Ee(({scrollHeight:b})=>b)),a),_e(t,s),{deviation:r,fixedFooterHeight:u,fixedHeaderHeight:c,footerHeight:d,headerHeight:l,horizontalDirection:g,scrollBy:h,scrollContainerState:e,scrollHeight:a,scrollingInProgress:p,scrollTo:f,scrollTop:t,skipAnimationFrameInResizeObserver:y,smoothScrollTargetReached:n,statefulScrollTop:s,viewportHeight:i}},[],{singleton:!0}),vu={lvl:0};function T_(e,t){const r=e.length;if(r===0)return[];let{index:n,value:s}=t(e[0]);const i=[];for(let a=1;a<r;a++){const{index:l,value:c}=t(e[a]);i.push({end:l-1,start:n,value:s}),n=l,s=c}return i.push({end:1/0,start:n,value:s}),i}function Et(e){return e===vu}function bu(e,t){if(!Et(e))return t===e.k?e.v:t<e.k?bu(e.l,t):bu(e.r,t)}function os(e,t,r="k"){if(Et(e))return[-1/0,void 0];if(Number(e[r])===t)return[e.k,e.v];if(Number(e[r])<t){const n=os(e.r,t,r);return n[0]===-1/0?[e.k,e.v]:n}return os(e.l,t,r)}function gn(e,t,r){return Et(e)?R_(t,r,1):t===e.k?fr(e,{k:t,v:r}):t<e.k?OE(fr(e,{l:gn(e.l,t,r)})):OE(fr(e,{r:gn(e.r,t,r)}))}function Yo(){return vu}function Pp(e,t,r){if(Et(e))return[];const n=os(e,t)[0];return $Z(Iy(e,n,r))}function _y(e,t){if(Et(e))return vu;const{k:r,l:n,r:s}=e;if(t===r){if(Et(n))return s;if(Et(s))return n;{const[i,a]=D_(n);return df(fr(e,{k:i,l:A_(n),v:a}))}}else return t<r?df(fr(e,{l:_y(n,t)})):df(fr(e,{r:_y(s,t)}))}function Ra(e){return Et(e)?[]:[...Ra(e.l),{k:e.k,v:e.v},...Ra(e.r)]}function Iy(e,t,r){if(Et(e))return[];const{k:n,l:s,r:i,v:a}=e;let l=[];return n>t&&(l=l.concat(Iy(s,t,r))),n>=t&&n<=r&&l.push({k:n,v:a}),n<=r&&(l=l.concat(Iy(i,t,r))),l}function df(e){const{l:t,lvl:r,r:n}=e;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(bg(t))return __(fr(e,{lvl:r-1}));if(!Et(t)&&!Et(t.r))return fr(t.r,{l:fr(t,{r:t.r.l}),lvl:r,r:fr(e,{l:t.r.r,lvl:r-1})});throw new Error("Unexpected empty nodes")}else{if(bg(e))return My(fr(e,{lvl:r-1}));if(!Et(n)&&!Et(n.l)){const s=n.l,i=bg(s)?n.lvl-1:n.lvl;return fr(s,{l:fr(e,{lvl:r-1,r:s.l}),lvl:s.lvl+1,r:My(fr(n,{l:s.r,lvl:i}))})}else throw new Error("Unexpected empty nodes")}}function fr(e,t){return R_(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function A_(e){return Et(e.r)?e.l:df(fr(e,{r:A_(e.r)}))}function bg(e){return Et(e)||e.lvl>e.r.lvl}function D_(e){return Et(e.r)?[e.k,e.v]:D_(e.r)}function R_(e,t,r,n=vu,s=vu){return{k:e,l:n,lvl:r,r:s,v:t}}function OE(e){return My(__(e))}function __(e){const{l:t}=e;return!Et(t)&&t.lvl===e.lvl?fr(t,{r:fr(e,{l:t.r})}):e}function My(e){const{lvl:t,r}=e;return!Et(r)&&!Et(r.r)&&r.lvl===t&&r.r.lvl===t?fr(r,{l:fr(e,{r:r.l}),lvl:t+1}):e}function $Z(e){return T_(e,({k:t,v:r})=>({index:t,value:r}))}function I_(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function wu(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const ob=mt(()=>({recalcInProgress:he(!1)}),[],{singleton:!0});function M_(e,t,r){return e[Nh(e,t,r)]}function Nh(e,t,r,n=0){let s=e.length-1;for(;n<=s;){const i=Math.floor((n+s)/2),a=e[i],l=r(a,t);if(l===0)return i;if(l===-1){if(s-n<2)return i-1;s=i-1}else{if(s===n)return i;n=i+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function WZ(e,t,r,n){const s=Nh(e,t,n),i=Nh(e,r,n,s);return e.slice(s,i+1)}function Ji(e,t){return Math.round(e.getBoundingClientRect()[t])}function Lp(e){return!Et(e.groupOffsetTree)}function lb({index:e},t){return t===e?0:t<e?-1:1}function YZ(){return{groupIndices:[],groupOffsetTree:Yo(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Yo()}}function GZ(e,t){let r=Et(e)?0:1/0;for(const n of t){const{endIndex:s,size:i,startIndex:a}=n;if(r=Math.min(r,a),Et(e)){e=gn(e,0,i);continue}const l=Pp(e,a-1,s+1);if(l.some(eX(n)))continue;let c=!1,u=!1;for(const{end:d,start:f,value:h}of l)c?(s>=f||i===h)&&(e=_y(e,f)):(u=h!==i,c=!0),d>s&&s>=f&&h!==i&&(e=gn(e,s+1,h));u&&(e=gn(e,a,i))}return[e,r]}function qZ(e){return typeof e.groupIndex<"u"}function KZ({offset:e},t){return t===e?0:t<e?-1:1}function ku(e,t,r){if(t.length===0)return 0;const{index:n,offset:s,size:i}=M_(t,e,lb),a=e-n,l=i*a+(a-1)*r+s;return l>0?l+r:l}function O_(e,t){if(!Lp(t))return e;let r=0;for(;t.groupIndices[r]<=e+r;)r++;return e+r}function P_(e,t,r){if(qZ(e))return t.groupIndices[e.groupIndex]+1;{const n=e.index==="LAST"?r:e.index;let s=O_(n,t);return s=Math.max(0,s,Math.min(r,s)),s}}function QZ(e,t,r,n=0){return n>0&&(t=Math.max(t,M_(e,n,lb).offset)),T_(WZ(e,t,r,KZ),JZ)}function ZZ(e,[t,r,n,s]){t.length>0&&n("received item sizes",t,fn.DEBUG);const i=e.sizeTree;let a=i,l=0;if(r.length>0&&Et(i)&&t.length===2){const h=t[0].size,p=t[1].size;a=r.reduce((g,y)=>gn(gn(g,y,h),y+1,p),a)}else[a,l]=GZ(a,t);if(a===i)return e;const{lastIndex:c,lastOffset:u,lastSize:d,offsetTree:f}=Oy(e.offsetTree,l,a,s);return{groupIndices:r,groupOffsetTree:r.reduce((h,p)=>gn(h,p,ku(p,f,s)),Yo()),lastIndex:c,lastOffset:u,lastSize:d,offsetTree:f,sizeTree:a}}function XZ(e){return Ra(e).map(({k:t,v:r},n,s)=>{const i=s[n+1];return{endIndex:i?i.k-1:1/0,size:r,startIndex:t}})}function PE(e,t){let r=0,n=0;for(;r<e;)r+=t[n+1]-t[n]-1,n++;return n-(r===e?0:1)}function Oy(e,t,r,n){let s=e,i=0,a=0,l=0,c=0;if(t!==0){c=Nh(s,t-1,lb),l=s[c].offset;const u=os(r,t-1);i=u[0],a=u[1],s.length&&s[c].size===os(r,t)[1]&&(c-=1),s=s.slice(0,c+1)}else s=[];for(const{start:u,value:d}of Pp(r,t,1/0)){const f=u-i,h=f*a+l+f*n;s.push({index:u,offset:h,size:d}),i=u,l=h,a=d}return{lastIndex:i,lastOffset:l,lastSize:a,offsetTree:s}}function JZ(e){return{index:e.index,value:e}}function eX(e){const{endIndex:t,size:r,startIndex:n}=e;return s=>s.start===n&&(s.end===t||s.end===1/0)&&s.value===r}const tX={offsetHeight:"height",offsetWidth:"width"},Ps=mt(([{log:e},{recalcInProgress:t}])=>{const r=at(),n=at(),s=Fr(n,0),i=at(),a=at(),l=he(0),c=he([]),u=he(void 0),d=he(void 0),f=he((S,E)=>Ji(S,tX[E])),h=he(void 0),p=he(0),g=YZ(),y=Fr(ce(r,Xe(c,e,p),Ns(ZZ,g),Dt()),g),b=Fr(ce(c,Dt(),Ns((S,E)=>({current:E,prev:S.current}),{current:[],prev:[]}),Ee(({prev:S})=>S)),[]);_e(ce(c,ze(S=>S.length>0),Xe(y,p),Ee(([S,E,N])=>{const j=S.reduce((T,C,_)=>gn(T,C,ku(C,E.offsetTree,N)||_),Yo());return{...E,groupIndices:S,groupOffsetTree:j}})),y),_e(ce(n,Xe(y),ze(([S,{lastIndex:E}])=>S<E),Ee(([S,{lastIndex:E,lastSize:N}])=>[{endIndex:E,size:N,startIndex:S}])),r),_e(u,d);const v=Fr(ce(u,Ee(S=>S===void 0)),!0);_e(ce(d,ze(S=>S!==void 0&&Et(Zt(y).sizeTree)),Ee(S=>[{endIndex:0,size:S,startIndex:0}])),r);const x=kn(ce(r,Xe(y),Ns(({sizes:S},[E,N])=>({changed:N!==S,sizes:N}),{changed:!1,sizes:g}),Ee(S=>S.changed)));xt(ce(l,Ns((S,E)=>({diff:S.prev-E,prev:E}),{diff:0,prev:0}),Ee(S=>S.diff)),S=>{const{groupIndices:E}=Zt(y);if(S>0)Ke(t,!0),Ke(i,S+PE(S,E));else if(S<0){const N=Zt(b);N.length>0&&(S-=PE(-S,N)),Ke(a,S)}}),xt(ce(l,Xe(e)),([S,E])=>{S<0&&E("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},fn.ERROR)});const w=kn(i);_e(ce(i,Xe(y),Ee(([S,E])=>{const N=E.groupIndices.length>0,j=[],T=E.lastSize;if(N){const C=bu(E.sizeTree,0);let _=0,V=0;for(;_<S;){const R=E.groupIndices[V],L=E.groupIndices.length===V+1?1/0:E.groupIndices[V+1]-R-1;j.push({endIndex:R,size:C,startIndex:R}),j.push({endIndex:R+1+L-1,size:T,startIndex:R+1}),V++,_+=L+1}const F=Ra(E.sizeTree);return _!==S&&F.shift(),F.reduce((R,{k:L,v:O})=>{let z=R.ranges;return R.prevSize!==0&&(z=[...R.ranges,{endIndex:L+S-1,size:R.prevSize,startIndex:R.prevIndex}]),{prevIndex:L+S,prevSize:O,ranges:z}},{prevIndex:S,prevSize:0,ranges:j}).ranges}return Ra(E.sizeTree).reduce((C,{k:_,v:V})=>({prevIndex:_+S,prevSize:V,ranges:[...C.ranges,{endIndex:_+S-1,size:C.prevSize,startIndex:C.prevIndex}]}),{prevIndex:0,prevSize:T,ranges:[]}).ranges})),r);const k=kn(ce(a,Xe(y,p),Ee(([S,{offsetTree:E},N])=>{const j=-S;return ku(j,E,N)})));return _e(ce(a,Xe(y,p),Ee(([S,E,N])=>{if(E.groupIndices.length>0){if(Et(E.sizeTree))return E;let j=Yo();const T=Zt(b);let C=0,_=0,V=0;for(;C<-S;){V=T[_];const F=T[_+1]-V-1;_++,C+=F+1}if(j=Ra(E.sizeTree).reduce((F,{k:R,v:L})=>gn(F,Math.max(0,R+S),L),j),C!==-S){const F=bu(E.sizeTree,V);j=gn(j,0,F);const R=os(E.sizeTree,-S+1)[1];j=gn(j,1,R)}return{...E,sizeTree:j,...Oy(E.offsetTree,0,j,N)}}else{const j=Ra(E.sizeTree).reduce((T,{k:C,v:_})=>gn(T,Math.max(0,C+S),_),Yo());return{...E,sizeTree:j,...Oy(E.offsetTree,0,j,N)}}})),y),{beforeUnshiftWith:w,data:h,defaultItemSize:d,firstItemIndex:l,fixedItemSize:u,gap:p,groupIndices:c,itemSize:f,listRefresh:x,shiftWith:a,shiftWithOffset:k,sizeRanges:r,sizes:y,statefulTotalCount:s,totalCount:n,trackItemSizes:v,unshiftWith:i}},_t(oa,ob),{singleton:!0});function rX(e){return e.reduce((t,r)=>(t.groupIndices.push(t.totalCount),t.totalCount+=r+1,t),{groupIndices:[],totalCount:0})}const L_=mt(([{groupIndices:e,sizes:t,totalCount:r},{headerHeight:n,scrollTop:s}])=>{const i=at(),a=at(),l=kn(ce(i,Ee(rX)));return _e(ce(l,Ee(c=>c.totalCount)),r),_e(ce(l,Ee(c=>c.groupIndices)),e),_e(ce(lr(s,t,n),ze(([c,u])=>Lp(u)),Ee(([c,u,d])=>os(u.groupOffsetTree,Math.max(c-d,0),"v")[0]),Dt(),Ee(c=>[c])),a),{groupCounts:i,topItemsIndexes:a}},_t(Ps,Zr)),la=mt(([{log:e}])=>{const t=he(!1),r=kn(ce(t,ze(n=>n),Dt()));return xt(t,n=>{n&&Zt(e)("props updated",{},fn.DEBUG)}),{didMount:r,propsReady:t}},_t(oa),{singleton:!0}),nX=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function F_(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!nX)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const Ku=mt(([{gap:e,listRefresh:t,sizes:r,totalCount:n},{fixedFooterHeight:s,fixedHeaderHeight:i,footerHeight:a,headerHeight:l,scrollingInProgress:c,scrollTo:u,smoothScrollTargetReached:d,viewportHeight:f},{log:h}])=>{const p=at(),g=at(),y=he(0);let b=null,v=null,x=null;function w(){b&&(b(),b=null),x&&(x(),x=null),v&&(clearTimeout(v),v=null),Ke(c,!1)}return _e(ce(p,Xe(r,f,n,y,l,a,h),Xe(e,i,s),Ee(([[k,S,E,N,j,T,C,_],V,F,R])=>{const L=F_(k),{align:O,behavior:z,offset:B}=L,W=N-1,se=P_(L,S,W);let X=ku(se,S.offsetTree,V)+T;O==="end"?(X+=F+os(S.sizeTree,se)[1]-E+R,se===W&&(X+=C)):O==="center"?X+=(F+os(S.sizeTree,se)[1]-E+R)/2:X-=j,B&&(X+=B);const de=fe=>{w(),fe?(_("retrying to scroll to",{location:k},fn.DEBUG),Ke(p,k)):(Ke(g,!0),_("list did not change, scroll successful",{},fn.DEBUG))};if(w(),z==="smooth"){let fe=!1;x=xt(t,ye=>{fe=fe||ye}),b=ss(d,()=>{de(fe)})}else b=ss(ce(t,sX(150)),de);return v=setTimeout(()=>{w()},1200),Ke(c,!0),_("scrolling from index to",{behavior:z,index:se,top:X},fn.DEBUG),{behavior:z,top:X}})),u),{scrollTargetReached:g,scrollToIndex:p,topListHeight:y}},_t(Ps,Zr,oa),{singleton:!0});function sX(e){return t=>{const r=setTimeout(()=>{t(!1)},e);return n=>{n&&(t(!0),clearTimeout(r))}}}function cb(e,t){e==0?t():requestAnimationFrame(()=>{cb(e-1,t)})}function ub(e,t){const r=t-1;return typeof e=="number"?e:e.index==="LAST"?r:e.index}const Qu=mt(([{defaultItemSize:e,listRefresh:t,sizes:r},{scrollTop:n},{scrollTargetReached:s,scrollToIndex:i},{didMount:a}])=>{const l=he(!0),c=he(0),u=he(!0);return _e(ce(a,Xe(c),ze(([d,f])=>!!f),ws(!1)),l),_e(ce(a,Xe(c),ze(([d,f])=>!!f),ws(!1)),u),xt(ce(lr(t,a),Xe(l,r,e,u),ze(([[,d],f,{sizeTree:h},p,g])=>d&&(!Et(h)||sb(p))&&!f&&!g),Xe(c)),([,d])=>{ss(s,()=>{Ke(u,!0)}),cb(4,()=>{ss(n,()=>{Ke(l,!0)}),Ke(i,d)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:c,scrolledToInitialItem:l}},_t(Ps,Zr,Ku,la),{singleton:!0});function B_(e,t){return Math.abs(e-t)<1.01}const Su="up",Oc="down",iX="none",aX={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},oX=0,Zu=mt(([{footerHeight:e,headerHeight:t,scrollBy:r,scrollContainerState:n,scrollTop:s,viewportHeight:i}])=>{const a=he(!1),l=he(!0),c=at(),u=at(),d=he(4),f=he(oX),h=Fr(ce(Ry(ce(Le(s),Za(1),ws(!0)),ce(Le(s),Za(1),ws(!1),IE(100))),Dt()),!1),p=Fr(ce(Ry(ce(r,ws(!0)),ce(r,ws(!1),IE(200))),Dt()),!1);_e(ce(lr(Le(s),Le(f)),Ee(([x,w])=>x<=w),Dt()),l),_e(ce(l,qs(50)),u);const g=kn(ce(lr(n,Le(i),Le(t),Le(e),Le(d)),Ns((x,[{scrollHeight:w,scrollTop:k},S,E,N,j])=>{const T=k+S-w>-j,C={scrollHeight:w,scrollTop:k,viewportHeight:S};if(T){let V,F;return k>x.state.scrollTop?(V="SCROLLED_DOWN",F=x.state.scrollTop-k):(V="SIZE_DECREASED",F=x.state.scrollTop-k||x.scrollTopDelta),{atBottom:!0,atBottomBecause:V,scrollTopDelta:F,state:C}}let _;return C.scrollHeight>x.state.scrollHeight?_="SIZE_INCREASED":S<x.state.viewportHeight?_="VIEWPORT_HEIGHT_DECREASING":k<x.state.scrollTop?_="SCROLLING_UPWARDS":_="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:_,state:C}},aX),Dt((x,w)=>x&&x.atBottom===w.atBottom))),y=Fr(ce(n,Ns((x,{scrollHeight:w,scrollTop:k,viewportHeight:S})=>{if(B_(x.scrollHeight,w))return{changed:!1,jump:0,scrollHeight:w,scrollTop:k};{const E=w-(k+S)<1;return x.scrollTop!==k&&E?{changed:!0,jump:x.scrollTop-k,scrollHeight:w,scrollTop:k}:{changed:!0,jump:0,scrollHeight:w,scrollTop:k}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),ze(x=>x.changed),Ee(x=>x.jump)),0);_e(ce(g,Ee(x=>x.atBottom)),a),_e(ce(a,qs(50)),c);const b=he(Oc);_e(ce(n,Ee(({scrollTop:x})=>x),Dt(),Ns((x,w)=>Zt(p)?{direction:x.direction,prevScrollTop:w}:{direction:w<x.prevScrollTop?Su:Oc,prevScrollTop:w},{direction:Oc,prevScrollTop:0}),Ee(x=>x.direction)),b),_e(ce(n,qs(50),ws(iX)),b);const v=he(0);return _e(ce(h,ze(x=>!x),ws(0)),v),_e(ce(s,qs(100),Xe(h),ze(([x,w])=>!!w),Ns(([x,w],[k])=>[w,k],[0,0]),Ee(([x,w])=>w-x)),v),{atBottomState:g,atBottomStateChange:c,atBottomThreshold:d,atTopStateChange:u,atTopThreshold:f,isAtBottom:a,isAtTop:l,isScrolling:h,lastJumpDueToItemResize:y,scrollDirection:b,scrollVelocity:v}},_t(Zr)),jh="top",Ch="bottom",LE="none";function FE(e,t,r){return typeof e=="number"?r===Su&&t===jh||r===Oc&&t===Ch?e:0:r===Su?t===jh?e.main:e.reverse:t===Ch?e.main:e.reverse}function BE(e,t){var r;return typeof e=="number"?e:(r=e[t])!=null?r:0}const db=mt(([{deviation:e,fixedHeaderHeight:t,headerHeight:r,scrollTop:n,viewportHeight:s}])=>{const i=at(),a=he(0),l=he(0),c=he(0),u=Fr(ce(lr(Le(n),Le(s),Le(r),Le(i,wu),Le(c),Le(a),Le(t),Le(e),Le(l)),Ee(([d,f,h,[p,g],y,b,v,x,w])=>{const k=d-x,S=b+v,E=Math.max(h-k,0);let N=LE;const j=BE(w,jh),T=BE(w,Ch);return p-=x,p+=h+v,g+=h+v,g-=x,p>d+S-j&&(N=Su),g<d-E+f+T&&(N=Oc),N!==LE?[Math.max(k-h-FE(y,jh,N)-j,0),k-E-v+f+FE(y,Ch,N)+T]:null}),ze(d=>d!=null),Dt(wu)),[0,0]);return{increaseViewportBy:l,listBoundary:i,overscan:c,topListHeight:a,visibleRange:u}},_t(Zr),{singleton:!0});function lX(e,t,r){if(Lp(t)){const n=O_(e,t);return[{index:os(t.groupOffsetTree,n)[0],offset:0,size:0},{data:r==null?void 0:r[0],index:n,offset:0,size:0}]}return[{data:r==null?void 0:r[0],index:e,offset:0,size:0}]}const wg={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function ff(e,t,r,n,s,i){const{lastIndex:a,lastOffset:l,lastSize:c}=s;let u=0,d=0;if(e.length>0){u=e[0].offset;const y=e[e.length-1];d=y.offset+y.size}const f=r-a,h=l+f*c+(f-1)*n,p=u,g=h-d;return{bottom:d,firstItemIndex:i,items:zE(e,s,i),offsetBottom:g,offsetTop:u,top:p,topItems:zE(t,s,i),topListHeight:t.reduce((y,b)=>b.size+y,0),totalCount:r}}function z_(e,t,r,n,s,i){let a=0;if(r.groupIndices.length>0)for(const d of r.groupIndices){if(d-a>=e)break;a++}const l=e+a,c=ub(t,l),u=Array.from({length:l}).map((d,f)=>({data:i[f+c],index:f+c,offset:0,size:0}));return ff(u,[],l,s,r,n)}function zE(e,t,r){if(e.length===0)return[];if(!Lp(t))return e.map(u=>({...u,index:u.index+r,originalIndex:u.index}));const n=e[0].index,s=e[e.length-1].index,i=[],a=Pp(t.groupOffsetTree,n,s);let l,c=0;for(const u of e){(!l||l.end<u.index)&&(l=a.shift(),c=t.groupIndices.indexOf(l.start));let d;u.index===l.start?d={index:c,type:"group"}:d={groupIndex:c,index:u.index-(c+1)+r},i.push({...d,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return i}const uo=mt(([{data:e,firstItemIndex:t,gap:r,sizes:n,totalCount:s},i,{listBoundary:a,topListHeight:l,visibleRange:c},{initialTopMostItemIndex:u,scrolledToInitialItem:d},{topListHeight:f},h,{didMount:p},{recalcInProgress:g}])=>{const y=he([]),b=he(0),v=at();_e(i.topItemsIndexes,y);const x=Fr(ce(lr(p,g,Le(c,wu),Le(s),Le(n),Le(u),d,Le(y),Le(t),Le(r),e),ze(([E,N,,j,,,,,,,T])=>{const C=T&&T.length!==j;return E&&!N&&!C}),Ee(([,,[E,N],j,T,C,_,V,F,R,L])=>{const O=T,{offsetTree:z,sizeTree:B}=O,W=Zt(b);if(j===0)return{...wg,totalCount:j};if(E===0&&N===0)return W===0?{...wg,totalCount:j}:z_(W,C,T,F,R,L||[]);if(Et(B))return W>0?null:ff(lX(ub(C,j),O,L),[],j,R,O,F);const se=[];if(V.length>0){const ie=V[0],M=V[V.length-1];let J=0;for(const P of Pp(B,ie,M)){const oe=P.value,te=Math.max(P.start,ie),be=Math.min(P.end,M);for(let je=te;je<=be;je++)se.push({data:L==null?void 0:L[je],index:je,offset:J,size:oe}),J+=oe}}if(!_)return ff([],se,j,R,O,F);const X=V.length>0?V[V.length-1]+1:0,de=QZ(z,E,N,X);if(de.length===0)return null;const fe=j-1,ye=Op([],ie=>{for(const M of de){const J=M.value;let P=J.offset,oe=M.start;const te=J.size;if(J.offset<E){oe+=Math.floor((E-J.offset+R)/(te+R));const je=oe-M.start;P+=je*te+je*R}oe<X&&(P+=(X-oe)*te,oe=X);const be=Math.min(M.end,fe);for(let je=oe;je<=be&&!(P>=N);je++)ie.push({data:L==null?void 0:L[je],index:je,offset:P,size:te}),P+=te+R}});return ff(ye,se,j,R,O,F)}),ze(E=>E!==null),Dt()),wg);_e(ce(e,ze(sb),Ee(E=>E==null?void 0:E.length)),s),_e(ce(x,Ee(E=>E.topListHeight)),f),_e(f,l),_e(ce(x,Ee(E=>[E.top,E.bottom])),a),_e(ce(x,Ee(E=>E.items)),v);const w=kn(ce(x,ze(({items:E})=>E.length>0),Xe(s,e),ze(([{items:E},N])=>E[E.length-1].originalIndex===N-1),Ee(([,E,N])=>[E-1,N]),Dt(wu),Ee(([E])=>E))),k=kn(ce(x,qs(200),ze(({items:E,topItems:N})=>E.length>0&&E[0].originalIndex===N.length),Ee(({items:E})=>E[0].index),Dt())),S=kn(ce(x,ze(({items:E})=>E.length>0),Ee(({items:E})=>{let N=0,j=E.length-1;for(;E[N].type==="group"&&N<j;)N++;for(;E[j].type==="group"&&j>N;)j--;return{endIndex:E[j].index,startIndex:E[N].index}}),Dt(I_)));return{endReached:w,initialItemCount:b,itemsRendered:v,listState:x,rangeChanged:S,startReached:k,topItemsIndexes:y,...h}},_t(Ps,L_,db,Qu,Ku,Zu,la,ob),{singleton:!0}),U_=mt(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:r,headerHeight:n},{listState:s}])=>{const i=at(),a=Fr(ce(lr(r,e,n,t,s),Ee(([l,c,u,d,f])=>l+c+u+d+f.offsetBottom+f.bottom)),0);return _e(Le(a),i),{totalListHeight:a,totalListHeightChanged:i}},_t(Zr,uo),{singleton:!0}),cX=mt(([{viewportHeight:e},{totalListHeight:t}])=>{const r=he(!1),n=Fr(ce(lr(r,e,t),ze(([s])=>s),Ee(([,s,i])=>Math.max(0,s-i)),qs(0),Dt()),0);return{alignToBottom:r,paddingTopAddition:n}},_t(Zr,U_),{singleton:!0}),H_=mt(()=>({context:he(null)})),uX=({itemBottom:e,itemTop:t,locationParams:{align:r,behavior:n,...s},viewportBottom:i,viewportTop:a})=>t<a?{...s,align:r??"start",behavior:n}:e>i?{...s,align:r??"end",behavior:n}:null,V_=mt(([{gap:e,sizes:t,totalCount:r},{fixedFooterHeight:n,fixedHeaderHeight:s,headerHeight:i,scrollingInProgress:a,scrollTop:l,viewportHeight:c},{scrollToIndex:u}])=>{const d=at();return _e(ce(d,Xe(t,c,r,i,s,n,l),Xe(e),Ee(([[f,h,p,g,y,b,v,x],w])=>{const{align:k,behavior:S,calculateViewLocation:E=uX,done:N,...j}=f,T=P_(f,h,g-1),C=ku(T,h.offsetTree,w)+y+b,_=C+os(h.sizeTree,T)[1],V=x+b,F=x+p-v,R=E({itemBottom:_,itemTop:C,locationParams:{align:k,behavior:S,...j},viewportBottom:F,viewportTop:V});return R?N&&ss(ce(a,ze(L=>!L),Za(Zt(a)?1:2)),N):N&&N(),R}),ze(f=>f!==null)),u),{scrollIntoView:d}},_t(Ps,Zr,Ku,uo,oa),{singleton:!0});function UE(e){return e?e==="smooth"?"smooth":"auto":!1}const dX=(e,t)=>typeof e=="function"?UE(e(t)):t&&UE(e),fX=mt(([{listRefresh:e,totalCount:t,fixedItemSize:r,data:n},{atBottomState:s,isAtBottom:i},{scrollToIndex:a},{scrolledToInitialItem:l},{didMount:c,propsReady:u},{log:d},{scrollingInProgress:f},{context:h},{scrollIntoView:p}])=>{const g=he(!1),y=at();let b=null;function v(S){Ke(a,{align:"end",behavior:S,index:"LAST"})}xt(ce(lr(ce(Le(t),Za(1)),c),Xe(Le(g),i,l,f),Ee(([[S,E],N,j,T,C])=>{let _=E&&T,V="auto";return _&&(V=dX(N,j||C),_=_&&!!V),{followOutputBehavior:V,shouldFollow:_,totalCount:S}}),ze(({shouldFollow:S})=>S)),({followOutputBehavior:S,totalCount:E})=>{b&&(b(),b=null),Zt(r)?requestAnimationFrame(()=>{Zt(d)("following output to ",{totalCount:E},fn.DEBUG),v(S)}):b=ss(e,()=>{Zt(d)("following output to ",{totalCount:E},fn.DEBUG),v(S),b=null})});function x(S){const E=ss(s,N=>{S&&!N.atBottom&&N.notAtBottomBecause==="SIZE_INCREASED"&&!b&&(Zt(d)("scrolling to bottom due to increased size",{},fn.DEBUG),v("auto"))});setTimeout(E,100)}xt(ce(lr(Le(g),t,u),ze(([S,,E])=>S&&E),Ns(({value:S},[,E])=>({refreshed:S===E,value:E}),{refreshed:!1,value:0}),ze(({refreshed:S})=>S),Xe(g,t)),([,S])=>{Zt(l)&&x(S!==!1)}),xt(y,()=>{x(Zt(g)!==!1)}),xt(lr(Le(g),s),([S,E])=>{S&&!E.atBottom&&E.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&v("auto")});const w=he(null),k=at();return _e(Ry(ce(Le(n),Ee(S=>{var E;return(E=S==null?void 0:S.length)!=null?E:0})),ce(Le(t))),k),xt(ce(lr(ce(k,Za(1)),c),Xe(Le(w),l,f,h),Ee(([[S,E],N,j,T,C])=>E&&j&&(N==null?void 0:N({context:C,totalCount:S,scrollingInProgress:T}))),ze(S=>!!S),qs(0)),S=>{b&&(b(),b=null),Zt(r)?requestAnimationFrame(()=>{Zt(d)("scrolling into view",{}),Ke(p,S)}):b=ss(e,()=>{Zt(d)("scrolling into view",{}),Ke(p,S),b=null})}),{autoscrollToBottom:y,followOutput:g,scrollIntoViewOnChange:w}},_t(Ps,Zu,Ku,Qu,la,oa,Zr,H_,V_)),hX=mt(([{data:e,firstItemIndex:t,gap:r,sizes:n},{initialTopMostItemIndex:s},{initialItemCount:i,listState:a},{didMount:l}])=>(_e(ce(l,Xe(i),ze(([,c])=>c!==0),Xe(s,n,t,r,e),Ee(([[,c],u,d,f,h,p=[]])=>z_(c,u,d,f,h,p))),a),{}),_t(Ps,Qu,uo,la),{singleton:!0}),pX=mt(([{didMount:e},{scrollTo:t},{listState:r}])=>{const n=he(0);return xt(ce(e,Xe(n),ze(([,s])=>s!==0),Ee(([,s])=>({top:s}))),s=>{ss(ce(r,Za(1),ze(i=>i.items.length>1)),()=>{requestAnimationFrame(()=>{Ke(t,s)})})}),{initialScrollTop:n}},_t(la,Zr,uo),{singleton:!0}),$_=mt(([{scrollVelocity:e}])=>{const t=he(!1),r=at(),n=he(!1);return _e(ce(e,Xe(n,t,r),ze(([s,i])=>!!i),Ee(([s,i,a,l])=>{const{enter:c,exit:u}=i;if(a){if(u(s,l))return!1}else if(c(s,l))return!0;return a}),Dt()),t),xt(ce(lr(t,e,r),Xe(n)),([[s,i,a],l])=>{s&&l&&l.change&&l.change(i,a)}),{isSeeking:t,scrollSeekConfiguration:n,scrollSeekRangeChanged:r,scrollVelocity:e}},_t(Zu),{singleton:!0}),fb=mt(([{scrollContainerState:e,scrollTo:t}])=>{const r=at(),n=at(),s=at(),i=he(!1),a=he(void 0);return _e(ce(lr(r,n),Ee(([{scrollHeight:l,scrollTop:c,viewportHeight:u},{offsetTop:d}])=>({scrollHeight:l,scrollTop:Math.max(0,c-d),viewportHeight:u}))),e),_e(ce(t,Xe(n),Ee(([l,{offsetTop:c}])=>({...l,top:l.top+c}))),s),{customScrollParent:a,useWindowScroll:i,windowScrollContainerState:r,windowScrollTo:s,windowViewportRect:n}},_t(Zr)),mX=mt(([{sizeRanges:e,sizes:t},{headerHeight:r,scrollTop:n},{initialTopMostItemIndex:s},{didMount:i},{useWindowScroll:a,windowScrollContainerState:l,windowViewportRect:c}])=>{const u=at(),d=he(void 0),f=he(null),h=he(null);return _e(l,f),_e(c,h),xt(ce(u,Xe(t,n,a,f,h,r)),([p,g,y,b,v,x,w])=>{const k=XZ(g.sizeTree);b&&v!==null&&x!==null&&(y=v.scrollTop-x.offsetTop),y-=w,p({ranges:k,scrollTop:y})}),_e(ce(d,ze(sb),Ee(gX)),s),_e(ce(i,Xe(d),ze(([,p])=>p!==void 0),Dt(),Ee(([,p])=>p.ranges)),e),{getState:u,restoreStateFrom:d}},_t(Ps,Zr,Qu,la,fb));function gX(e){return{align:"start",index:0,offset:e.scrollTop}}const yX=mt(([{topItemsIndexes:e}])=>{const t=he(0);return _e(ce(t,ze(r=>r>=0),Ee(r=>Array.from({length:r}).map((n,s)=>s))),e),{topItemCount:t}},_t(uo));function W_(e){let t=!1,r;return()=>(t||(t=!0,r=e()),r)}const xX=W_(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),vX=mt(([{deviation:e,scrollBy:t,scrollingInProgress:r,scrollTop:n},{isAtBottom:s,isScrolling:i,lastJumpDueToItemResize:a,scrollDirection:l},{listState:c},{beforeUnshiftWith:u,gap:d,shiftWithOffset:f,sizes:h},{log:p},{recalcInProgress:g}])=>{const y=kn(ce(c,Xe(a),Ns(([,v,x,w],[{bottom:k,items:S,offsetBottom:E,totalCount:N},j])=>{const T=k+E;let C=0;return x===N&&v.length>0&&S.length>0&&(S[0].originalIndex===0&&v[0].originalIndex===0||(C=T-w,C!==0&&(C+=j))),[C,S,N,T]},[0,[],0,0]),ze(([v])=>v!==0),Xe(n,l,r,s,p,g),ze(([,v,x,w,,,k])=>!k&&!w&&v!==0&&x===Su),Ee(([[v],,,,,x])=>(x("Upward scrolling compensation",{amount:v},fn.DEBUG),v))));function b(v){v>0?(Ke(t,{behavior:"auto",top:-v}),Ke(e,0)):(Ke(e,0),Ke(t,{behavior:"auto",top:-v}))}return xt(ce(y,Xe(e,i)),([v,x,w])=>{w&&xX()?Ke(e,x-v):b(-v)}),xt(ce(lr(Fr(i,!1),e,g),ze(([v,x,w])=>!v&&!w&&x!==0),Ee(([v,x])=>x),qs(1)),b),_e(ce(f,Ee(v=>({top:-v}))),t),xt(ce(u,Xe(h,d),Ee(([v,{groupIndices:x,lastSize:w,sizeTree:k},S])=>{function E(N){return N*(w+S)}if(x.length===0)return E(v);{let N=0;const j=bu(k,0);let T=0,C=0;for(;T<v;){T++,N+=j;let _=x.length===C+1?1/0:x[C+1]-x[C]-1;T+_>v&&(N-=j,_=v-T+1),T+=_,N+=E(_),C++}return N}})),v=>{Ke(e,v),requestAnimationFrame(()=>{Ke(t,{top:v}),requestAnimationFrame(()=>{Ke(e,0),Ke(g,!1)})})}),{deviation:e}},_t(Zr,Zu,uo,Ps,oa,ob)),bX=mt(([e,t,r,n,s,i,a,l,c,u,d])=>({...e,...t,...r,...n,...s,...i,...a,...l,...c,...u,...d}),_t(db,hX,la,$_,U_,pX,cX,fb,V_,oa,H_)),Y_=mt(([{data:e,defaultItemSize:t,firstItemIndex:r,fixedItemSize:n,gap:s,groupIndices:i,itemSize:a,sizeRanges:l,sizes:c,statefulTotalCount:u,totalCount:d,trackItemSizes:f},{initialItemFinalLocationReached:h,initialTopMostItemIndex:p,scrolledToInitialItem:g},y,b,v,{listState:x,topItemsIndexes:w,...k},{scrollToIndex:S},E,{topItemCount:N},{groupCounts:j},T])=>(_e(k.rangeChanged,T.scrollSeekRangeChanged),_e(ce(T.windowViewportRect,Ee(C=>C.visibleHeight)),y.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:r,fixedItemHeight:n,gap:s,groupCounts:j,initialItemFinalLocationReached:h,initialTopMostItemIndex:p,scrolledToInitialItem:g,sizeRanges:l,topItemCount:N,topItemsIndexes:w,totalCount:d,...v,groupIndices:i,itemSize:a,listState:x,scrollToIndex:S,statefulTotalCount:u,trackItemSizes:f,...k,...T,...y,sizes:c,...b}),_t(Ps,Qu,Zr,mX,fX,uo,Ku,vX,yX,L_,bX));function wX(e,t){const r={},n={};let s=0;const i=e.length;for(;s<i;)n[e[s]]=1,s+=1;for(const a in t)Object.hasOwn(n,a)||(r[a]=t[a]);return r}const Rd=typeof document<"u"?re.useLayoutEffect:re.useEffect;function G_(e,t,r){const n=Object.keys(t.required||{}),s=Object.keys(t.optional||{}),i=Object.keys(t.methods||{}),a=Object.keys(t.events||{}),l=re.createContext({});function c(b,v){b.propsReady&&Ke(b.propsReady,!1);for(const x of n){const w=b[t.required[x]];Ke(w,v[x])}for(const x of s)if(x in v){const w=b[t.optional[x]];Ke(w,v[x])}b.propsReady&&Ke(b.propsReady,!0)}function u(b){return i.reduce((v,x)=>(v[x]=w=>{const k=b[t.methods[x]];Ke(k,w)},v),{})}function d(b){return a.reduce((v,x)=>(v[x]=LZ(b[t.events[x]]),v),{})}const f=re.forwardRef((b,v)=>{const{children:x,...w}=b,[k]=re.useState(()=>Op(BZ(e),N=>{c(N,w)})),[S]=re.useState(_E(d,k));Rd(()=>{for(const N of a)N in w&&xt(S[N],w[N]);return()=>{Object.values(S).map(ib)}},[w,S,k]),Rd(()=>{c(k,w)}),re.useImperativeHandle(v,RE(u(k)));const E=r;return o.jsx(l.Provider,{value:k,children:r?o.jsx(E,{...wX([...n,...s,...a],w),children:x}):x})}),h=b=>{const v=re.useContext(l);return re.useCallback(x=>{Ke(v[b],x)},[v,b])},p=b=>{const v=re.useContext(l)[b],x=re.useCallback(w=>xt(v,w),[v]);return re.useSyncExternalStore(x,()=>Zt(v),()=>Zt(v))},g=b=>{const v=re.useContext(l)[b],[x,w]=re.useState(_E(Zt,v));return Rd(()=>xt(v,k=>{k!==x&&w(RE(k))}),[v,x]),x},y=re.version.startsWith("18")?p:g;return{Component:f,useEmitter:(b,v)=>{const x=re.useContext(l)[b];Rd(()=>xt(x,v),[v,x])},useEmitterValue:y,usePublisher:h}}const q_=re.createContext(void 0),K_=re.createContext(void 0),Q_=typeof document<"u"?re.useLayoutEffect:re.useEffect;function kg(e){return"self"in e}function kX(e){return"body"in e}function Z_(e,t,r,n=Al,s,i){const a=re.useRef(null),l=re.useRef(null),c=re.useRef(null),u=re.useCallback(h=>{let p,g,y;const b=h.target;if(kX(b)||kg(b)){const x=kg(b)?b:b.defaultView;y=i?x.scrollX:x.scrollY,p=i?x.document.documentElement.scrollWidth:x.document.documentElement.scrollHeight,g=i?x.innerWidth:x.innerHeight}else y=i?b.scrollLeft:b.scrollTop,p=i?b.scrollWidth:b.scrollHeight,g=i?b.offsetWidth:b.offsetHeight;const v=()=>{e({scrollHeight:p,scrollTop:Math.max(y,0),viewportHeight:g})};h.suppressFlushSync?v():kc.flushSync(v),l.current!==null&&(y===l.current||y<=0||y===p-g)&&(l.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t,i]);re.useEffect(()=>{const h=s||a.current;return n(s||a.current),u({suppressFlushSync:!0,target:h}),h.addEventListener("scroll",u,{passive:!0}),()=>{n(null),h.removeEventListener("scroll",u)}},[a,u,r,n,s]);function d(h){const p=a.current;if(!p||(i?"offsetWidth"in p&&p.offsetWidth===0:"offsetHeight"in p&&p.offsetHeight===0))return;const g=h.behavior==="smooth";let y,b,v;kg(p)?(b=Math.max(Ji(p.document.documentElement,i?"width":"height"),i?p.document.documentElement.scrollWidth:p.document.documentElement.scrollHeight),y=i?p.innerWidth:p.innerHeight,v=i?window.scrollX:window.scrollY):(b=p[i?"scrollWidth":"scrollHeight"],y=Ji(p,i?"width":"height"),v=p[i?"scrollLeft":"scrollTop"]);const x=b-y;if(h.top=Math.ceil(Math.max(Math.min(x,h.top),0)),B_(y,b)||h.top===v){e({scrollHeight:b,scrollTop:v,viewportHeight:y}),g&&t(!0);return}g?(l.current=h.top,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,l.current=null,t(!0)},1e3)):l.current=null,i&&(h={behavior:h.behavior,left:h.top}),p.scrollTo(h)}function f(h){i&&(h={behavior:h.behavior,left:h.top}),a.current.scrollBy(h)}return{scrollByCallback:f,scrollerRef:a,scrollToCallback:d}}const Sg="-webkit-sticky",HE="sticky",hb=W_(()=>{if(typeof document>"u")return HE;const e=document.createElement("div");return e.style.position=Sg,e.style.position===Sg?Sg:HE});function pb(e){return e}const SX=mt(()=>{const e=he(l=>`Item ${l}`),t=he(l=>`Group ${l}`),r=he({}),n=he(pb),s=he("div"),i=he(Al),a=(l,c=null)=>Fr(ce(r,Ee(u=>u[l]),Dt()),c);return{components:r,computeItemKey:n,EmptyPlaceholder:a("EmptyPlaceholder"),FooterComponent:a("Footer"),GroupComponent:a("Group","div"),groupContent:t,HeaderComponent:a("Header"),HeaderFooterTag:s,ItemComponent:a("Item","div"),itemContent:e,ListComponent:a("List","div"),ScrollerComponent:a("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:a("ScrollSeekPlaceholder"),TopItemListComponent:a("TopItemList")}}),EX=mt(([e,t])=>({...e,...t}),_t(Y_,SX)),NX=({height:e})=>o.jsx("div",{style:{height:e}}),jX={overflowAnchor:"none",position:hb(),zIndex:1},X_={overflowAnchor:"none"},CX={...X_,display:"inline-block",height:"100%"},VE=re.memo(function({showTopList:e=!1}){const t=Ve("listState"),r=Bn("sizeRanges"),n=Ve("useWindowScroll"),s=Ve("customScrollParent"),i=Bn("windowScrollContainerState"),a=Bn("scrollContainerState"),l=s||n?i:a,c=Ve("itemContent"),u=Ve("context"),d=Ve("groupContent"),f=Ve("trackItemSizes"),h=Ve("itemSize"),p=Ve("log"),g=Bn("gap"),y=Ve("horizontalDirection"),{callbackRef:b}=HZ(r,h,f,e?Al:l,p,g,s,y,Ve("skipAnimationFrameInResizeObserver")),[v,x]=re.useState(0);mb("deviation",R=>{v!==R&&x(R)});const w=Ve("EmptyPlaceholder"),k=Ve("ScrollSeekPlaceholder")||NX,S=Ve("ListComponent"),E=Ve("ItemComponent"),N=Ve("GroupComponent"),j=Ve("computeItemKey"),T=Ve("isSeeking"),C=Ve("groupIndices").length>0,_=Ve("alignToBottom"),V=Ve("initialItemFinalLocationReached"),F=e?{}:{boxSizing:"border-box",...y?{display:"inline-block",height:"100%",marginLeft:v!==0?v:_?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:v!==0?v:_?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...V?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&w?o.jsx(w,{...br(w,u)}):o.jsx(S,{...br(S,u),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:b,style:F,children:(e?t.topItems:t.items).map(R=>{const L=R.originalIndex,O=j(L+t.firstItemIndex,R.data,u);return T?m.createElement(k,{...br(k,u),height:R.size,index:R.index,key:O,type:R.type||"item",...R.type==="group"?{}:{groupIndex:R.groupIndex}}):R.type==="group"?m.createElement(N,{...br(N,u),"data-index":L,"data-item-index":R.index,"data-known-size":R.size,key:O,style:jX},d(R.index,u)):m.createElement(E,{...br(E,u),...RX(E,R.data),"data-index":L,"data-item-group-index":R.groupIndex,"data-item-index":R.index,"data-known-size":R.size,key:O,style:y?CX:X_},C?c(R.index,R.groupIndex,R.data,u):c(R.index,R.data,u))})})}),TX={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},AX={outline:"none",overflowX:"auto",position:"relative"},Fp=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),DX={position:hb(),top:0,width:"100%",zIndex:1};function br(e,t){if(typeof e!="string")return{context:t}}function RX(e,t){return{item:typeof e=="string"?void 0:t}}const _X=re.memo(function(){const e=Ve("HeaderComponent"),t=Bn("headerHeight"),r=Ve("HeaderFooterTag"),n=co(re.useMemo(()=>i=>{t(Ji(i,"height"))},[t]),!0,Ve("skipAnimationFrameInResizeObserver")),s=Ve("context");return e?o.jsx(r,{ref:n,children:o.jsx(e,{...br(e,s)})}):null}),IX=re.memo(function(){const e=Ve("FooterComponent"),t=Bn("footerHeight"),r=Ve("HeaderFooterTag"),n=co(re.useMemo(()=>i=>{t(Ji(i,"height"))},[t]),!0,Ve("skipAnimationFrameInResizeObserver")),s=Ve("context");return e?o.jsx(r,{ref:n,children:o.jsx(e,{...br(e,s)})}):null});function J_({useEmitter:e,useEmitterValue:t,usePublisher:r}){return re.memo(function({children:n,style:s,...i}){const a=r("scrollContainerState"),l=t("ScrollerComponent"),c=r("smoothScrollTargetReached"),u=t("scrollerRef"),d=t("context"),f=t("horizontalDirection")||!1,{scrollByCallback:h,scrollerRef:p,scrollToCallback:g}=Z_(a,c,l,u,void 0,f);return e("scrollTo",g),e("scrollBy",h),o.jsx(l,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:p,style:{...f?AX:TX,...s},tabIndex:0,...i,...br(l,d),children:n})})}function eI({useEmitter:e,useEmitterValue:t,usePublisher:r}){return re.memo(function({children:n,style:s,...i}){const a=r("windowScrollContainerState"),l=t("ScrollerComponent"),c=r("smoothScrollTargetReached"),u=t("totalListHeight"),d=t("deviation"),f=t("customScrollParent"),h=t("context"),p=re.useRef(null),g=t("scrollerRef"),{scrollByCallback:y,scrollerRef:b,scrollToCallback:v}=Z_(a,c,l,g,f);return Q_(()=>{var x;return b.current=f||((x=p.current)==null?void 0:x.ownerDocument.defaultView),()=>{b.current=null}},[b,f]),e("windowScrollTo",v),e("scrollBy",y),o.jsx(l,{ref:p,"data-virtuoso-scroller":!0,style:{position:"relative",...s,...u!==0?{height:u+d}:{}},...i,...br(l,h),children:n})})}const MX=({children:e})=>{const t=re.useContext(q_),r=Bn("viewportHeight"),n=Bn("fixedItemHeight"),s=Ve("alignToBottom"),i=Ve("horizontalDirection"),a=re.useMemo(()=>N_(r,c=>Ji(c,i?"width":"height")),[r,i]),l=co(a,!0,Ve("skipAnimationFrameInResizeObserver"));return re.useEffect(()=>{t&&(r(t.viewportHeight),n(t.itemHeight))},[t,r,n]),o.jsx("div",{"data-viewport-type":"element",ref:l,style:Fp(s),children:e})},OX=({children:e})=>{const t=re.useContext(q_),r=Bn("windowViewportRect"),n=Bn("fixedItemHeight"),s=Ve("customScrollParent"),i=C_(r,s,Ve("skipAnimationFrameInResizeObserver")),a=Ve("alignToBottom");return re.useEffect(()=>{t&&(n(t.itemHeight),r({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,r,n]),o.jsx("div",{"data-viewport-type":"window",ref:i,style:Fp(a),children:e})},PX=({children:e})=>{const t=Ve("TopItemListComponent")||"div",r=Ve("headerHeight"),n={...DX,marginTop:`${r}px`},s=Ve("context");return o.jsx(t,{style:n,...br(t,s),children:e})},LX=re.memo(function(e){const t=Ve("useWindowScroll"),r=Ve("topItemsIndexes").length>0,n=Ve("customScrollParent"),s=Ve("context"),i=n||t?zX:BX,a=n||t?OX:MX;return o.jsxs(i,{...e,...br(i,s),children:[r&&o.jsx(PX,{children:o.jsx(VE,{showTopList:!0})}),o.jsxs(a,{children:[o.jsx(_X,{}),o.jsx(VE,{}),o.jsx(IX,{})]})]})}),{Component:FX,useEmitter:mb,useEmitterValue:Ve,usePublisher:Bn}=G_(EX,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},LX),BX=J_({useEmitter:mb,useEmitterValue:Ve,usePublisher:Bn}),zX=eI({useEmitter:mb,useEmitterValue:Ve,usePublisher:Bn}),UX=FX,HX=mt(()=>{const e=he(u=>o.jsxs("td",{children:["Item $",u]})),t=he(null),r=he(u=>o.jsxs("td",{colSpan:1e3,children:["Group ",u]})),n=he(null),s=he(null),i=he({}),a=he(pb),l=he(Al),c=(u,d=null)=>Fr(ce(i,Ee(f=>f[u]),Dt()),d);return{components:i,computeItemKey:a,context:t,EmptyPlaceholder:c("EmptyPlaceholder"),FillerRow:c("FillerRow"),fixedFooterContent:s,fixedHeaderContent:n,itemContent:e,groupContent:r,ScrollerComponent:c("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TableBodyComponent:c("TableBody","tbody"),TableComponent:c("Table","table"),TableFooterComponent:c("TableFoot","tfoot"),TableHeadComponent:c("TableHead","thead"),TableRowComponent:c("TableRow","tr"),GroupComponent:c("Group","tr")}});_t(Y_,HX);hb();const $E={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},VX={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:WE,floor:Th,max:Pc,min:Eg,round:YE}=Math;function GE(e,t,r){return Array.from({length:t-e+1}).map((n,s)=>({data:r===null?null:r[s+e],index:s+e}))}function $X(e){return{...VX,items:e}}function _d(e,t){return e&&e.width===t.width&&e.height===t.height}function WX(e,t){return e&&e.column===t.column&&e.row===t.row}const YX=mt(([{increaseViewportBy:e,listBoundary:t,overscan:r,visibleRange:n},{footerHeight:s,headerHeight:i,scrollBy:a,scrollContainerState:l,scrollTo:c,scrollTop:u,smoothScrollTargetReached:d,viewportHeight:f},h,p,{didMount:g,propsReady:y},{customScrollParent:b,useWindowScroll:v,windowScrollContainerState:x,windowScrollTo:w,windowViewportRect:k},S])=>{const E=he(0),N=he(0),j=he($E),T=he({height:0,width:0}),C=he({height:0,width:0}),_=at(),V=at(),F=he(0),R=he(null),L=he({column:0,row:0}),O=at(),z=at(),B=he(!1),W=he(0),se=he(!0),X=he(!1),de=he(!1);xt(ce(g,Xe(W),ze(([P,oe])=>!!oe)),()=>{Ke(se,!1)}),xt(ce(lr(g,se,C,T,W,X),ze(([P,oe,te,be,,je])=>P&&!oe&&te.height!==0&&be.height!==0&&!je)),([,,,,P])=>{Ke(X,!0),cb(1,()=>{Ke(_,P)}),ss(ce(u),()=>{Ke(t,[0,0]),Ke(se,!0)})}),_e(ce(z,ze(P=>P!=null&&P.scrollTop>0),ws(0)),N),xt(ce(g,Xe(z),ze(([,P])=>P!=null)),([,P])=>{P&&(Ke(T,P.viewport),Ke(C,P.item),Ke(L,P.gap),P.scrollTop>0&&(Ke(B,!0),ss(ce(u,Za(1)),oe=>{Ke(B,!1)}),Ke(c,{top:P.scrollTop})))}),_e(ce(T,Ee(({height:P})=>P)),f),_e(ce(lr(Le(T,_d),Le(C,_d),Le(L,(P,oe)=>P&&P.column===oe.column&&P.row===oe.row),Le(u)),Ee(([P,oe,te,be])=>({gap:te,item:oe,scrollTop:be,viewport:P}))),O),_e(ce(lr(Le(E),n,Le(L,WX),Le(C,_d),Le(T,_d),Le(R),Le(N),Le(B),Le(se),Le(W)),ze(([,,,,,,,P])=>!P),Ee(([P,[oe,te],be,je,Oe,Ie,Ye,,Qe,nt])=>{const{column:$e,row:Ce}=be,{height:Fe,width:D}=je,{width:Q}=Oe;if(Ye===0&&(P===0||Q===0))return $E;if(D===0){const vt=ub(nt,P),Ur=vt+Math.max(Ye-1,0);return $X(GE(vt,Ur,Ie))}const I=tI(Q,D,$e);let A,K;Qe?oe===0&&te===0&&Ye>0?(A=0,K=Ye-1):(A=I*Th((oe+Ce)/(Fe+Ce)),K=I*WE((te+Ce)/(Fe+Ce))-1,K=Eg(P-1,Pc(K,I-1)),A=Eg(K,Pc(0,A))):(A=0,K=-1);const pe=GE(A,K,Ie),{bottom:ge,top:gt}=qE(Oe,be,je,pe),Wt=WE(P/I),nr=Wt*Fe+(Wt-1)*Ce-ge;return{bottom:ge,itemHeight:Fe,items:pe,itemWidth:D,offsetBottom:nr,offsetTop:gt,top:gt}})),j),_e(ce(R,ze(P=>P!==null),Ee(P=>P.length)),E),_e(ce(lr(T,C,j,L),ze(([P,oe,{items:te}])=>te.length>0&&oe.height!==0&&P.height!==0),Ee(([P,oe,{items:te},be])=>{const{bottom:je,top:Oe}=qE(P,be,oe,te);return[Oe,je]}),Dt(wu)),t);const fe=he(!1);_e(ce(u,Xe(fe),Ee(([P,oe])=>oe||P!==0)),fe);const ye=kn(ce(lr(j,E),ze(([{items:P}])=>P.length>0),Xe(fe),ze(([[P,oe],te])=>{const be=P.items[P.items.length-1].index===oe-1;return(te||P.bottom>0&&P.itemHeight>0&&P.offsetBottom===0&&P.items.length===oe)&&be}),Ee(([[,P]])=>P-1),Dt())),ie=kn(ce(Le(j),ze(({items:P})=>P.length>0&&P[0].index===0),ws(0),Dt())),M=kn(ce(Le(j),Xe(B),ze(([{items:P},oe])=>P.length>0&&!oe),Ee(([{items:P}])=>({endIndex:P[P.length-1].index,startIndex:P[0].index})),Dt(I_),qs(0)));_e(M,p.scrollSeekRangeChanged),_e(ce(_,Xe(T,C,E,L),Ee(([P,oe,te,be,je])=>{const Oe=F_(P),{align:Ie,behavior:Ye,offset:Qe}=Oe;let nt=Oe.index;nt==="LAST"&&(nt=be-1),nt=Pc(0,nt,Eg(be-1,nt));let $e=Py(oe,je,te,nt);return Ie==="end"?$e=YE($e-oe.height+te.height):Ie==="center"&&($e=YE($e-oe.height/2+te.height/2)),Qe&&($e+=Qe),{behavior:Ye,top:$e}})),c);const J=Fr(ce(j,Ee(P=>P.offsetBottom+P.bottom)),0);return _e(ce(k,Ee(P=>({height:P.visibleHeight,width:P.visibleWidth}))),T),{customScrollParent:b,data:R,deviation:F,footerHeight:s,gap:L,headerHeight:i,increaseViewportBy:e,initialItemCount:N,itemDimensions:C,overscan:r,restoreStateFrom:z,scrollBy:a,scrollContainerState:l,scrollHeight:V,scrollTo:c,scrollToIndex:_,scrollTop:u,smoothScrollTargetReached:d,totalCount:E,useWindowScroll:v,viewportDimensions:T,windowScrollContainerState:x,windowScrollTo:w,windowViewportRect:k,...p,gridState:j,horizontalDirection:de,initialTopMostItemIndex:W,totalListHeight:J,...h,endReached:ye,propsReady:y,rangeChanged:M,startReached:ie,stateChanged:O,stateRestoreInProgress:B,...S}},_t(db,Zr,Zu,$_,la,fb,oa));function tI(e,t,r){return Pc(1,Th((e+r)/(Th(t)+r)))}function qE(e,t,r,n){const{height:s}=r;if(s===void 0||n.length===0)return{bottom:0,top:0};const i=Py(e,t,r,n[0].index);return{bottom:Py(e,t,r,n[n.length-1].index)+s,top:i}}function Py(e,t,r,n){const s=tI(e.width,r.width,t.column),i=Th(n/s),a=i*r.height+Pc(0,i-1)*t.row;return a>0?a+t.row:a}const GX=mt(()=>{const e=he(f=>`Item ${f}`),t=he({}),r=he(null),n=he("virtuoso-grid-item"),s=he("virtuoso-grid-list"),i=he(pb),a=he("div"),l=he(Al),c=(f,h=null)=>Fr(ce(t,Ee(p=>p[f]),Dt()),h),u=he(!1),d=he(!1);return _e(Le(d),u),{components:t,computeItemKey:i,context:r,FooterComponent:c("Footer"),HeaderComponent:c("Header"),headerFooterTag:a,itemClassName:n,ItemComponent:c("Item","div"),itemContent:e,listClassName:s,ListComponent:c("List","div"),readyStateChanged:u,reportReadyState:d,ScrollerComponent:c("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder","div")}}),qX=mt(([e,t])=>({...e,...t}),_t(YX,GX)),KX=re.memo(function(){const e=Mt("gridState"),t=Mt("listClassName"),r=Mt("itemClassName"),n=Mt("itemContent"),s=Mt("computeItemKey"),i=Mt("isSeeking"),a=zn("scrollHeight"),l=Mt("ItemComponent"),c=Mt("ListComponent"),u=Mt("ScrollSeekPlaceholder"),d=Mt("context"),f=zn("itemDimensions"),h=zn("gap"),p=Mt("log"),g=Mt("stateRestoreInProgress"),y=zn("reportReadyState"),b=co(re.useMemo(()=>v=>{const x=v.parentElement.parentElement.scrollHeight;a(x);const w=v.firstChild;if(w){const{height:k,width:S}=w.getBoundingClientRect();f({height:k,width:S})}h({column:KE("column-gap",getComputedStyle(v).columnGap,p),row:KE("row-gap",getComputedStyle(v).rowGap,p)})},[a,f,h,p]),!0,!1);return Q_(()=>{e.itemHeight>0&&e.itemWidth>0&&y(!0)},[e]),g?null:o.jsx(c,{className:t,ref:b,...br(c,d),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(v=>{const x=s(v.index,v.data,d);return i?o.jsx(u,{...br(u,d),height:e.itemHeight,index:v.index,width:e.itemWidth},x):m.createElement(l,{...br(l,d),className:r,"data-index":v.index,key:x},n(v.index,v.data,d))})})}),QX=re.memo(function(){const e=Mt("HeaderComponent"),t=zn("headerHeight"),r=Mt("headerFooterTag"),n=co(re.useMemo(()=>i=>{t(Ji(i,"height"))},[t]),!0,!1),s=Mt("context");return e?o.jsx(r,{ref:n,children:o.jsx(e,{...br(e,s)})}):null}),ZX=re.memo(function(){const e=Mt("FooterComponent"),t=zn("footerHeight"),r=Mt("headerFooterTag"),n=co(re.useMemo(()=>i=>{t(Ji(i,"height"))},[t]),!0,!1),s=Mt("context");return e?o.jsx(r,{ref:n,children:o.jsx(e,{...br(e,s)})}):null}),XX=({children:e})=>{const t=re.useContext(K_),r=zn("itemDimensions"),n=zn("viewportDimensions"),s=co(re.useMemo(()=>i=>{n(i.getBoundingClientRect())},[n]),!0,!1);return re.useEffect(()=>{t&&(n({height:t.viewportHeight,width:t.viewportWidth}),r({height:t.itemHeight,width:t.itemWidth}))},[t,n,r]),o.jsx("div",{ref:s,style:Fp(!1),children:e})},JX=({children:e})=>{const t=re.useContext(K_),r=zn("windowViewportRect"),n=zn("itemDimensions"),s=Mt("customScrollParent"),i=C_(r,s,!1);return re.useEffect(()=>{t&&(n({height:t.itemHeight,width:t.itemWidth}),r({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,r,n]),o.jsx("div",{ref:i,style:Fp(!1),children:e})},eJ=re.memo(function({...e}){const t=Mt("useWindowScroll"),r=Mt("customScrollParent"),n=r||t?rJ:tJ,s=r||t?JX:XX,i=Mt("context");return o.jsx(n,{...e,...br(n,i),children:o.jsxs(s,{children:[o.jsx(QX,{}),o.jsx(KX,{}),o.jsx(ZX,{})]})})}),{useEmitter:rI,useEmitterValue:Mt,usePublisher:zn}=G_(qX,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},eJ),tJ=J_({useEmitter:rI,useEmitterValue:Mt,usePublisher:zn}),rJ=eI({useEmitter:rI,useEmitterValue:Mt,usePublisher:zn});function KE(e,t,r){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&r(`${e} was not resolved to pixel value correctly`,t,fn.WARN),t==="normal"?0:parseInt(t??"0",10)}const nJ=re.lazy(()=>Cl(()=>import("./NewEditBudgetModal-Pp0UXa7s.js"),[])),sJ=re.lazy(()=>Cl(()=>import("./NewEditSavingsGoalModal-C9byn9gq.js"),[])),iJ=re.lazy(()=>Cl(()=>import("./NewTransactionModal-Yku7ZZsG.js"),[])),aJ=re.lazy(()=>Cl(()=>import("./FilterTransactionsModal-Dtau8GW7.js"),[])),oJ=re.lazy(()=>Cl(()=>import("./ConfirmationModal-CLkKXqvK.js"),[])),lJ=re.lazy(()=>Cl(()=>import("./EditAccountNameModal-CzCdMqTH.js"),[])),QE={housing:"bg-blue-100 text-blue-800",utilities:"bg-yellow-100 text-yellow-800",groceries:"bg-green-100 text-green-800",transportation:"bg-indigo-100 text-indigo-800",healthcare:"bg-red-100 text-red-800",education:"bg-purple-100 text-purple-800",entertainment:"bg-pink-100 text-pink-800",savings:"bg-teal-100 text-teal-800",other:"bg-gray-100 text-gray-800"},Tr=({className:e})=>o.jsx("div",{className:`animate-pulse bg-gray-200 dark:bg-gray-700 rounded-md ${e}`}),ZE=()=>{const{user:e}=Ft(),{family:t}=zr(),r=(t==null?void 0:t.FamilyID)??null,[n,s]=m.useState([]),[i,a]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState([]),[f,h]=m.useState([]),p=vZ(f,300),[g,y]=m.useState(!0),[b,v]=m.useState(!0),[x,w]=m.useState(!0),[k,S]=m.useState(!0),[E,N]=m.useState(null),j=m.useMemo(()=>xr("budget-page"),[]),[T,C]=m.useState("my-finances"),[_,V]=m.useState(!1),[F,R]=m.useState(!1),[L,O]=m.useState(!1),[z,B]=m.useState(!1),[W,se]=m.useState(null),[X,de]=m.useState(null),[fe,ye]=m.useState(null),[ie,M]=m.useState(null),[J,P]=m.useState(new Date),oe=m.useRef(""),[te,be]=m.useState(null),je=m.useCallback(async ae=>{const[le,Ze]=await Promise.all([bZ(ae.toString()),EZ(ae.toString())]);return{budgetsData:le,savingsGoalsData:Ze}},[]),Oe=m.useCallback(async()=>{if(!(T!=="family-finances"||!r))try{const{budgetsData:ae,savingsGoalsData:le}=await je(r);s(ae),a(le),N(null)}catch(ae){N(ae instanceof Error?ae.message:"Failed to refresh family financial data")}},[T,r,je]);m.useEffect(()=>{if(T!=="family-finances"){s([]),a([]),w(!1),S(!1);return}if(!r){s([]),a([]),w(!1),S(!1);return}let ae=!1;return(async()=>{w(!0),S(!0);try{const{budgetsData:Ze,savingsGoalsData:Je}=await je(r);if(ae)return;s(Ze),a(Je),N(null)}catch(Ze){if(ae)return;N(Ze instanceof Error?Ze.message:"Failed to load family financial data")}finally{if(ae)return;w(!1),S(!1)}})(),()=>{ae=!0}},[T,r,je]);const Ie=m.useCallback(async()=>{if(T==="family-finances"&&!r){s([]),a([]),w(!1),S(!1),v(!1);return}if(p.length===0){c([]),v(!1);return}const ae=`${T}:${r??"personal"}:${J.toISOString()}:${p.slice().sort().join(",")}`;if(ae===oe.current)return;oe.current=ae,v(!0),N(null);const le=new Date(J.getFullYear(),J.getMonth(),1),Ze=new Date(J.getFullYear(),J.getMonth()+1,0);try{const Je=await TZ(p,{startDate:le,endDate:Ze});c(Je)}catch(Je){N(Je instanceof Error?Je.message:"An unknown error occurred"),v(!1);return}v(!1)},[r,p,T,J]);m.useEffect(()=>{Ie()},[Ie]),m.useEffect(()=>{let ae=!1;const le=T==="family-finances"?"family":"personal";if(le==="family"&&!r){be(null);return}return(async()=>{try{be(null);const Je={scope:le};le==="family"&&r&&(Je.familyId=r);const Jr=await q.post("/plaid/create_link_token",Je);if(ae)return;be(Jr.data.link_token)}catch(Je){if(ae)return;be(null),j.error("Failed to create link token",Je)}})(),()=>{ae=!0}},[T,r,j]),m.useEffect(()=>{let ae=!1;const le=async()=>{y(!0);try{if(T==="my-finances"){const Ze=await AE();if(ae)return;d(Ze),h(Ze.map(Je=>Je.id))}else if(r){const Ze=await AE(r.toString());if(ae)return;d(Ze),h(Ze.map(Je=>Je.id))}else d([]),h([])}catch(Ze){ae||N(Ze instanceof Error?Ze.message:"Failed to load accounts")}finally{ae||y(!1)}};return oe.current="",le(),()=>{ae=!0}},[T,r]);const Ye=m.useMemo(()=>te?{token:te,onSuccess:async ae=>{const le=T==="family-finances"?"family":"personal",Ze={public_token:ae,scope:le};le==="family"&&r&&(Ze.familyId=r),await q.post("/plaid/exchange_public_token",Ze),oe.current="",Ie()},onExit:(ae,le)=>{j.log("Plaid Link exited:",ae,le)}}:null,[te,T,r,j,Ie]),{open:Qe,ready:nt}=xZ(Ye??{token:"",onSuccess:()=>{},onExit:()=>{}}),$e=T==="family-finances"?"Link Family Account":"Link Personal Account",Ce=!nt||!te||T==="family-finances"&&!r,Fe=m.useCallback(()=>{Ce||Qe()},[Ce,Qe]),D=ae=>{ae!==T&&(C(ae),oe.current="")},Q=ae=>{h(le=>le.includes(ae)?le.filter(Ze=>Ze!==ae):[...le,ae])},I=m.useCallback(()=>{P(ae=>new Date(ae.getFullYear(),ae.getMonth()-1,1)),oe.current=""},[oe]),A=m.useCallback(()=>{P(ae=>new Date(ae.getFullYear(),ae.getMonth()+1,1)),oe.current=""},[oe]),K=async ae=>{if(!r||!e)return;const le={...ae,familyId:r.toString(),period:"monthly",spent:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};W?await kZ(W.id,le):await wZ(le),await Oe(),oe.current="",await Ie(),V(!1),se(null)},pe=async ae=>{await SZ(ae),await Oe(),oe.current="",await Ie()},ge=async ae=>{if(!r||!e)return;const le={...ae,familyId:r.toString(),category:"savings",CreatedByUserID:e.id};X?await jZ(X.id,le):await NZ(le),await Oe(),oe.current="",await Ie(),R(!1),de(null)},gt=async ae=>{await CZ(ae),await Oe(),oe.current="",await Ie()},Wt=async()=>{fe&&(await DZ(fe),oe.current="",await Ie(),ye(null))},nr=async ae=>{ie&&(await RZ(ie.id,ae),oe.current="",await Ie(),M(null))},vt=async ae=>{!r||!e||(await AZ({...ae,familyId:r.toString(),createdBy:e.id}),oe.current="",await Ie(),O(!1))},{totalSpent:Ur,byBudget:Ls}=m.useMemo(()=>{let ae=0;const le=new Map,Ze=new Map;for(const Je of n)Ze.set(Je.category,Je.id);for(const Je of l)if(ae+=Je.amount,Je.category){const Jr=Ze.get(Je.category);Jr&&le.set(Jr,(le.get(Jr)??0)+Je.amount)}return{totalSpent:ae,byBudget:le}},[l,n]),Er=m.useMemo(()=>n.reduce((ae,le)=>ae+le.amount,0),[n]),Qt=m.useMemo(()=>i.reduce((ae,le)=>ae+le.currentAmount,0),[i]),Xr=Er-Ur,fs=Er>0?Ur/Er*100:0;return E?o.jsxs("div",{className:"p-4 sm:p-6 text-red-500",children:["Error: ",E]}):o.jsxs("div",{id:"budget-overview",className:"p-4 sm:p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Finances"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:I,className:"p-2 rounded-full hover:bg-gray-100",children:o.jsx(op,{size:20})}),o.jsx("span",{className:"font-semibold whitespace-nowrap",children:J.toLocaleString("default",{month:"long",year:"numeric"})}),o.jsx("button",{onClick:A,className:"p-2 rounded-full hover:bg-gray-100",children:o.jsx(Jx,{size:20})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2",children:[o.jsx("button",{onClick:()=>O(!0),className:"w-full sm:w-auto px-4 py-2 bg-secondary-500 text-white rounded-lg",children:"Add Transaction"}),o.jsx("button",{onClick:Fe,disabled:Ce,className:"w-full sm:w-auto px-4 py-2 bg-primary-500 text-white rounded-lg disabled:bg-gray-300",children:$e})]})]}),o.jsx("div",{className:"border-b border-gray-200",children:o.jsxs("nav",{className:"-mb-px flex overflow-x-auto scrollbar-thin gap-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>D("my-finances"),className:`${T==="my-finances"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"My Finances"}),o.jsx("button",{onClick:()=>D("family-finances"),className:`${T==="family-finances"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Family Finances"})]})}),T==="my-finances"?o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl shadow-soft p-6",children:g?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Tr,{className:"h-8 w-full"}),o.jsx(Tr,{className:"h-8 w-full"}),o.jsx(Tr,{className:"h-8 w-full"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-[1fr,auto,auto] gap-4 items-center mb-2 font-semibold",children:[o.jsx("div",{children:"Account"}),o.jsx("div",{className:"text-right",children:"Balance"}),o.jsx("div",{})]}),u.map(ae=>o.jsxs("div",{className:"grid grid-cols-[1fr,auto,auto] gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:ae.id,checked:f.includes(ae.id),onChange:()=>Q(ae.id)}),o.jsxs("label",{htmlFor:ae.id,children:[ae.customName||ae.name," (",ae.mask,")"]})]}),o.jsxs("div",{className:"text-right",children:["$",(ae.balance||0).toLocaleString()]}),o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>M(ae),className:"p-2 rounded-full hover:bg-gray-100 text-gray-500",children:o.jsx(cp,{size:16})}),o.jsx("button",{onClick:()=>ye(ae.id),className:"p-2 rounded-full hover:bg-gray-100 text-red-500",children:o.jsx(ri,{size:16})})]})]},ae.id))]})}),o.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl shadow-soft p-6",children:b?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Tr,{className:"h-8 w-full"}),o.jsx(Tr,{className:"h-8 w-full"}),o.jsx(Tr,{className:"h-8 w-full"}),o.jsx(Tr,{className:"h-8 w-full"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-bold",children:"Recent Transactions"}),o.jsx("button",{onClick:()=>B(!0),className:"p-2 rounded-full hover:bg-gray-100",children:o.jsx(A2,{size:18})})]}),o.jsx("div",{style:{height:400},children:o.jsx(UX,{data:l,components:{Table:({style:ae,...le})=>o.jsx("table",{...le,style:{...ae,width:"100%"},className:"w-full"}),TableHead:()=>o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left py-2",children:"Description"}),o.jsx("th",{className:"text-left py-2",children:"Category"}),o.jsx("th",{className:"text-left py-2",children:"Date"}),o.jsx("th",{className:"text-right py-2",children:"Amount"})]})})},itemContent:(ae,le)=>{const Ze=n.find(Fs=>Fs.category===le.category),Je=Ze&&Ze.category?Ze.category.toLowerCase():"other",Jr=QE[Je]||QE.other;return o.jsxs("tr",{children:[o.jsxs("td",{className:"py-2",children:[le.description,le.recurring&&o.jsxs("span",{className:"ml-2 text-xs bg-gray-200 text-gray-800 px-2 py-1 rounded-full",children:["Recurring  ",le.recurringPeriod]})]}),o.jsx("td",{className:"py-2",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Jr}`,children:Je})}),o.jsx("td",{className:"py-2",children:le.date?new Date(le.date).toLocaleDateString():""}),o.jsxs("td",{className:"text-right py-2",children:["$",(le.amount||0).toLocaleString()]})]},le.id)}})})]})})]}):o.jsxs("div",{className:"space-y-6",children:[x||b||k?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(Tr,{className:"h-24"}),o.jsx(Tr,{className:"h-24"}),o.jsx(Tr,{className:"h-24"}),o.jsx(Tr,{className:"h-24"})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-soft",children:[o.jsx("h4",{className:"text-gray-500",children:"Total Budget"}),o.jsxs("p",{className:"text-2xl font-bold",children:["$",(Er||0).toLocaleString()]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-soft",children:[o.jsx("h4",{className:"text-gray-500",children:"Total Spent"}),o.jsxs("p",{className:"text-2xl font-bold",children:["$",(Ur||0).toLocaleString()]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-soft",children:[o.jsx("h4",{className:"text-gray-500",children:"Remaining"}),o.jsxs("p",{className:"text-2xl font-bold",children:["$",(Xr||0).toLocaleString()]}),o.jsxs("p",{className:"text-sm text-gray-400",children:[fs.toFixed(1),"% spent"]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-soft",children:[o.jsx("h4",{className:"text-gray-500",children:"Total Savings"}),o.jsxs("p",{className:"text-2xl font-bold",children:["$",(Qt||0).toLocaleString()]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-soft p-6",children:x?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Tr,{className:"h-16 w-full"}),o.jsx(Tr,{className:"h-16 w-full"}),o.jsx(Tr,{className:"h-16 w-full"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-bold",children:"Finance Categories"}),o.jsx("button",{onClick:()=>{se(null),V(!0)},className:"p-2 rounded-full bg-primary-500 text-white",children:o.jsx(tr,{size:18})})]}),n.map(ae=>{const le=Ls.get(ae.id)??0,Ze=ae.amount>0?le/ae.amount*100:0,Je=Ze>90?"bg-red-500":"bg-primary-500";return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{children:ae.category}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{children:["$",(le||0).toLocaleString()," of $",(ae.amount||0).toLocaleString()]}),o.jsx(DE,{onEdit:()=>{se(ae),V(!0)},onDelete:()=>pe(ae.id)})]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:o.jsx("div",{className:`${Je} h-2.5 rounded-full`,style:{width:`${Ze}%`}})})]},ae.id)})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-soft p-6",children:k?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Tr,{className:"h-16 w-full"}),o.jsx(Tr,{className:"h-16 w-full"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-bold",children:"Savings Goals"}),o.jsx("button",{onClick:()=>{de(null),R(!0)},className:"p-2 rounded-full bg-primary-500 text-white",children:o.jsx(tr,{size:18})})]}),i.map(ae=>{const le=ae.targetAmount>0?ae.currentAmount/ae.targetAmount*100:0;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{children:ae.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{children:["$",(ae.currentAmount||0).toLocaleString()," of $",(ae.targetAmount||0).toLocaleString()]}),o.jsx(DE,{onEdit:()=>{de(ae),R(!0)},onDelete:()=>gt(ae.id)})]})]}),ae.deadline&&o.jsxs("p",{className:"text-sm text-gray-400",children:["Due ",new Date(ae.deadline).toLocaleDateString()]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:o.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${le}%`}})})]},ae.id)})]})})]})]}),o.jsxs(m.Suspense,{fallback:o.jsx("div",{children:"Loading..."}),children:[o.jsx(nJ,{isOpen:_,onClose:()=>V(!1),onSave:K,editingBudget:W}),o.jsx(sJ,{isOpen:F,onClose:()=>R(!1),onSave:ge,editingGoal:X}),o.jsx(iJ,{isOpen:L,onClose:()=>O(!1),onSave:vt,budgets:n}),o.jsx(aJ,{isOpen:z,onClose:()=>B(!1)}),o.jsx(oJ,{isOpen:!!fe,onClose:()=>ye(null),onConfirm:Wt,title:"Delete Account",message:"Are you sure you want to delete this account? All associated transactions will also be deleted."}),o.jsx(lJ,{isOpen:!!ie,onClose:()=>M(null),onSave:nr,account:ie})]})]})},cJ=({isOpen:e,onClose:t,onConfirm:r,roomTemplates:n})=>{const[s,i]=m.useState(""),[a,l]=m.useState(null);if(m.useEffect(()=>{var u;e&&(i(""),l(((u=n[0])==null?void 0:u.id)??null))},[e,n]),!e)return null;const c=()=>{s&&a!==null&&r(s.trim(),a)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create New Room"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"roomName",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Room Name"}),o.jsx("input",{type:"text",id:"roomName",value:s,onChange:u=>i(u.target.value),className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Living Room, John's Bedroom"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"roomTemplate",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Based on Template"}),o.jsxs("select",{id:"roomTemplate",value:a??"",onChange:u=>l(u.target.value?parseInt(u.target.value,10):null),className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!n.length,children:[o.jsx("option",{value:"",disabled:!0,children:n.length?"Select a template":"No templates available"}),n.map(u=>o.jsx("option",{value:u.id,children:u.name},u.id))]}),!n.length&&o.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-300",children:"No room templates available. Please contact support."})]})]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:t,className:"text-neutral-600 dark:text-neutral-300",children:"Cancel"}),o.jsx("button",{onClick:c,disabled:!s.trim()||a===null,className:"bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed",children:"Create Room"})]})]})})},uJ=({isOpen:e,initialName:t,onClose:r,onSave:n})=>{const[s,i]=m.useState(t);if(m.useEffect(()=>{e&&i(t)},[t,e]),!e)return null;const a=l=>{l.preventDefault(),s.trim()&&n(s.trim())};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:o.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-lg dark:bg-neutral-800",children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:"Rename Room"}),o.jsx("p",{className:"mt-1 text-sm text-neutral-500 dark:text-neutral-400",children:"Update how this room appears across your household."}),o.jsxs("form",{onSubmit:a,className:"mt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"roomName",className:"mb-1 block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Room name"}),o.jsx("input",{id:"roomName",type:"text",value:s,onChange:l=>i(l.target.value),className:"w-full rounded-md border border-neutral-300 bg-neutral-100 px-4 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-700 dark:text-white",placeholder:"e.g., Upstairs Loft"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{type:"submit",className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white hover:bg-primary-700",children:"Save Changes"})]})]})]})})},dJ=async()=>(await q.get("/relationships")).data,fJ=({isOpen:e,onClose:t,onInvite:r,relationships:n,initialEmail:s,initialRelationshipId:i,inviteeName:a})=>{var f;const[l,c]=m.useState(s??""),[u,d]=m.useState(i??((f=n[0])==null?void 0:f.RelationshipID)??0);return m.useEffect(()=>{var h;e&&(c(s??""),d(i??((h=n[0])==null?void 0:h.RelationshipID)??0))},[e,s,i,n]),e?o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-lg my-8",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Invite Family Member"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[a&&o.jsxs("div",{className:"rounded-xl bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-200 px-3 py-2 text-sm",children:["Replace the placeholder for ",o.jsx("strong",{children:a})," by sending them an invitation."]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Email Address"}),o.jsx("input",{type:"email",value:l,onChange:h=>c(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Enter email address"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Role"}),o.jsx("select",{value:u,onChange:h=>d(parseInt(h.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:n.map(h=>o.jsx("option",{value:h.RelationshipID,children:h.RelationshipName},h.RelationshipID))})]})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:()=>r(l,u),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Send Invitation"})]})]})}):null},hJ=({isOpen:e,onClose:t,onSave:r,onLeaveFamily:n,onCreateNewFamily:s,family:i})=>{const[a,l]=m.useState(""),[c,u]=m.useState(""),[d,f]=m.useState("points");return m.useEffect(()=>{i&&(l(i.FamilyName),u(i.FamilyMantra||""),f(i.rewardMode||"points"))},[i]),e?o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-lg my-8",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Family Settings"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Family Name"}),o.jsx("input",{type:"text",value:a,onChange:h=>l(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Reward System"}),o.jsxs("select",{value:d,onChange:h=>f(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:[o.jsx("option",{value:"points",children:"Points"}),o.jsx("option",{value:"screenTime",children:"Screen Time"}),o.jsx("option",{value:"currency",children:"Currency"}),o.jsx("option",{value:"hybrid",children:"Hybrid"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Family Mantra"}),o.jsx("textarea",{rows:3,value:c,onChange:h=>u(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border-t border-neutral-200 dark:border-neutral-700 space-y-3 sm:space-y-0 sm:space-x-3",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[o.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-xl",children:"Leave Family"}),o.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-xl",children:"Create Another Household"})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:()=>r(a,c,void 0,d),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Save Changes"})]})]})]})}):null},pJ=({isOpen:e,onClose:t,onView:r,onEdit:n,onRemove:s})=>e?o.jsx(bt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-12 right-0 bg-white dark:bg-neutral-700 rounded-xl shadow-lg w-48 z-10",children:o.jsxs("ul",{className:"py-2",children:[o.jsxs("li",{onClick:()=>{r(),t()},className:"flex items-center px-4 py-2 text-sm text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-600 cursor-pointer",children:[o.jsx(O2,{size:16,className:"mr-2"}),"View Profile"]}),o.jsxs("li",{onClick:n,className:"flex items-center px-4 py-2 text-sm text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-600 cursor-pointer",children:[o.jsx(cp,{size:16,className:"mr-2"}),"Edit Profile"]}),o.jsxs("li",{onClick:s,className:"flex items-center px-4 py-2 text-sm text-error-600 hover:bg-error-50 dark:hover:bg-error-900/30 cursor-pointer",children:[o.jsx(ri,{size:16,className:"mr-2"}),"Remove from Family"]})]})}):null,mJ=({isOpen:e,onClose:t,onSave:r,user:n,relationships:s,availablePermissions:i=[],currentPermissions:a=[]})=>{const[l,c]=m.useState(n.FirstName),[u,d]=m.useState(n.LastName),[f,h]=m.useState(n.Email),[p,g]=m.useState(n.BirthDate?new Date(n.BirthDate).toISOString().split("T")[0]:""),[y,b]=m.useState(n.RelationshipID??null),[v,x]=m.useState(""),[w,k]=m.useState(a);return m.useEffect(()=>{c(n.FirstName),d(n.LastName),h(n.Email),g(n.BirthDate?new Date(n.BirthDate).toISOString().split("T")[0]:""),b(n.RelationshipID??null),k(a)},[n,a]),e?o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-lg my-8",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Edit Profile"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"First Name"}),o.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Last Name"}),o.jsx("input",{type:"text",value:u,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Email Address"}),o.jsx("input",{type:"email",value:f,onChange:S=>h(S.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Phone Number"}),o.jsx("input",{type:"tel",value:v,onChange:S=>x(S.target.value),placeholder:"Optional",className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Birth Date"}),o.jsx("input",{type:"date",value:p,onChange:S=>g(S.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Role"}),o.jsxs("select",{value:y??"",onChange:S=>{const E=S.target.value;b(E?parseInt(E,10):null)},className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:[o.jsx("option",{value:"",children:"Select role"}),s.map(S=>o.jsx("option",{value:S.RelationshipID,children:S.RelationshipName},S.RelationshipID))]})]}),i.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Permissions"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:i.map(S=>{const E=w.includes(S.id);return o.jsxs("label",{className:"flex items-start gap-3 rounded-xl border border-neutral-200 p-3 text-sm text-neutral-700 dark:border-neutral-700 dark:text-neutral-200",children:[o.jsx("input",{type:"checkbox",className:"mt-1",checked:E,onChange:()=>{k(N=>N.includes(S.id)?N.filter(j=>j!==S.id):[...N,S.id])}}),o.jsxs("span",{children:[o.jsx("span",{className:"font-medium",children:S.label}),S.description&&o.jsx("span",{className:"block text-xs text-neutral-500 dark:text-neutral-400",children:S.description})]})]},S.id)})})]})]})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:()=>r({userData:{FirstName:l,LastName:u,Email:f,BirthDate:p||null},relationshipId:y,permissions:w}),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Save Changes"})]})]})}):null},gJ=async(e,t)=>{const{data:r}=await q.get(`/family/${e}/members/${t}/profile`);return r},yJ=async(e,t,r)=>{const{data:n}=await q.put(`/family/${e}/members/${t}/profile`,r);return n},xJ=async(e,t)=>{const{data:r}=await q.post(`/family/${e}/members/${t}/profile/share`);return r},vJ=async(e,t)=>{await q.post(`/family/${e}/members/${t}/profile/share/revoke`)},bJ=async e=>{const{data:t}=await q.get(`/profiles/shared/${e}`);return t},Xl=e=>e&&e.length?e.join(", "):"",Jl=e=>e.split(",").map(t=>t.trim()).filter(t=>t.length>0),wJ=e=>Object.entries(e).map(([t,r])=>t+": "+String(r)),kJ=e=>{const t={};return e.split(`
`).forEach(r=>{const n=r.trim();if(!n)return;const s=n.indexOf(":");if(s===-1)t[n]="";else{const i=n.slice(0,s).trim(),a=n.slice(s+1).trim();i&&(t[i]=a)}}),t},SJ=({member:e,relationshipName:t,isOpen:r,onClose:n,familyId:s,currentUserId:i})=>{const[a,l]=m.useState(null),[c,u]=m.useState(!1),[d,f]=m.useState(null),[h,p]=m.useState(null),[g,y]=m.useState(!1),[b,v]=m.useState(""),[x,w]=m.useState(""),[k,S]=m.useState(""),[E,N]=m.useState(""),[j,T]=m.useState(""),[C,_]=m.useState(""),[V,F]=m.useState(""),[R,L]=m.useState(""),[O,z]=m.useState("FAMILY"),B=e.FirstName||"",W=e.LastName||"",se=(B+" "+W).trim()||e.Email||"Household Member",X=e.CreatedDate?new Date(e.CreatedDate).toLocaleDateString():void 0,de=t?t.charAt(0).toUpperCase()+t.slice(1):"Member",fe=te=>{v(te?wJ(te.clothingSizes||{}).join(`
`):""),w(te?Xl(te.favoriteColors||[]):""),S(te?Xl(te.favoriteFoods||[]):""),N(te?Xl(te.interests||[]):""),T(te?Xl(te.allergies||[]):""),_(te?Xl(te.favoriteBrands||[]):""),F(te&&te.notes||""),L(te&&te.wishlistSummary||""),z(te?te.Visibility:"FAMILY")};m.useEffect(()=>{if(!r||!s)return;(async()=>{try{u(!0),f(null);const be=await gJ(s,e.UserID);l(be.profile),fe(be.profile),p(null)}catch(be){f(be instanceof Error?be.message:"Unable to load care details")}finally{u(!1)}})()},[s,r,e.UserID]),m.useEffect(()=>{r||y(!1)},[r]);const ye=async()=>{if(s)try{const te=await xJ(s,e.UserID);p(te),await navigator.clipboard.writeText(te.shareUrl),ne.success("Share link copied to clipboard")}catch(te){ne.error(te instanceof Error?te.message:"Unable to generate share link")}},ie=async()=>{if(s)try{await vJ(s,e.UserID),p(null),ne.info("Share link revoked")}catch(te){ne.error(te instanceof Error?te.message:"Unable to revoke share link")}},M=async()=>{if(s)try{const te={clothingSizes:b.trim()?kJ(b):{},favoriteColors:Jl(x),favoriteFoods:Jl(k),interests:Jl(E),allergies:Jl(j),favoriteBrands:Jl(C),notes:V.trim()||null,wishlistSummary:R.trim()||null,visibility:O},be=await yJ(s,e.UserID,te);l(be.profile),fe(be.profile),y(!1),ne.success("Care profile updated")}catch(te){ne.error(te instanceof Error?te.message:"Unable to update care profile")}},J=()=>{if(c)return o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading favorites and sizes..."});if(d)return o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-4 py-3 text-sm text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:d});if(!a)return o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-neutral-600 dark:border-neutral-700 dark:bg-neutral-900/30 dark:text-neutral-300",children:"No care details captured yet. Add sizes, favorites, and notes so gifting is easy."});const te=Object.entries(a.clothingSizes||{});return o.jsxs("div",{className:"space-y-4",children:[te.length?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:"Clothing sizes"}),o.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2 sm:grid-cols-2",children:te.map(([be,je])=>o.jsxs("div",{className:"rounded-lg bg-neutral-100 px-3 py-2 text-sm text-neutral-700 dark:bg-neutral-800 dark:text-neutral-200",children:[o.jsxs("span",{className:"font-medium",children:[be,": "]}),o.jsx("span",{children:String(je)})]},be))})]}):null,ec("Favorite colors",a.favoriteColors||[]),ec("Favorite foods",a.favoriteFoods||[]),ec("Interests",a.interests||[]),ec("Allergies",a.allergies||[]),ec("Favorite brands",a.favoriteBrands||[]),a.notes?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:"Notes"}),o.jsx("p",{className:"mt-1 text-sm text-neutral-700 dark:text-neutral-200",children:a.notes})]}):null,a.wishlistSummary?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:"Wishlist summary"}),o.jsx("p",{className:"mt-1 text-sm text-neutral-700 dark:text-neutral-200",children:a.wishlistSummary})]}):null]})},P=()=>{const te=!!h||!!(a&&a.shareLinkActive);return o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("button",{onClick:ye,className:"inline-flex items-center gap-2 rounded-xl bg-secondary-600 px-3 py-2 text-sm font-medium text-white transition hover:bg-secondary-500",children:[o.jsx(zu,{className:"h-4 w-4"}),"Generate share link"]}),o.jsxs("button",{onClick:ie,className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(ni,{className:"h-4 w-4"}),"Revoke link"]}),h?o.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500 dark:text-neutral-400",children:["Link expires ",new Date(h.expiresAt).toLocaleString(),o.jsxs("button",{onClick:()=>navigator.clipboard.writeText(h.shareUrl).then(()=>ne.success("Link copied")),className:"inline-flex items-center gap-1 rounded-full border border-primary-200 px-3 py-1 text-xs text-primary-600 transition hover:bg-primary-100 dark:border-primary-500/40 dark:text-primary-200",children:[o.jsx(ev,{className:"h-3 w-3"})," Copy"]})]}):te?o.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"A share link is currently active."}):null]})},oe=()=>g?o.jsxs("div",{className:"mt-4 space-y-4 rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"Update care profile"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Clothing sizes (one per line, format: Item: Size)"}),o.jsx("textarea",{value:b,onChange:te=>v(te.target.value),rows:4,className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),tc("Favorite colors (comma separated)",x,w),tc("Favorite foods (comma separated)",k,S),tc("Interests (comma separated)",E,N),tc("Allergies (comma separated)",j,T),tc("Favorite brands (comma separated)",C,_),XE("Notes",V,F),XE("Wishlist summary",R,L),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Visibility"}),o.jsxs("select",{value:O,onChange:te=>z(te.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",children:[o.jsx("option",{value:"FAMILY",children:"Whole family"}),o.jsx("option",{value:"PARENTS",children:"Parents and guardians"}),o.jsx("option",{value:"LINK",children:"Anyone with link"}),o.jsx("option",{value:"PRIVATE",children:"Private"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>{y(!1),fe(a)},className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:M,className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-500",children:"Save details"})]})]}):null;return r?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"w-full max-w-2xl rounded-3xl bg-white shadow-2xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Household Member"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Care details and favorites"})]}),o.jsx("button",{type:"button",onClick:n,className:"rounded-full p-2 text-neutral-500 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700","aria-label":"Close member details",children:o.jsx(ni,{size:18})})]}),o.jsxs("div",{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:gap-6",children:[o.jsx("img",{src:e.ProfilePhotoUrl||"https://i.pravatar.cc/120",alt:se,className:"h-20 w-20 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:se}),o.jsx("div",{className:"mt-1 inline-flex items-center rounded-full bg-primary-100 px-2.5 py-0.5 text-xs font-medium text-primary-700 dark:bg-primary-900/40 dark:text-primary-200",children:de}),X?o.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-neutral-500 dark:text-neutral-400",children:[o.jsx(al,{size:16})," Joined ",X]}):null,o.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[e.Email?o.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-300",children:[o.jsx(Y6,{size:16}),o.jsx("span",{className:"truncate",children:e.Email})]}):null,e.PhoneNumber?o.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-300",children:[o.jsx(eB,{size:16}),o.jsx("span",{children:e.PhoneNumber})]}):null]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsxs("button",{onClick:()=>{y(!0)},className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(K0,{className:"h-4 w-4"})," Update care details"]}),P()]}),J(),oe()]})]})}):null},ec=(e,t)=>t.length?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:e}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.map(r=>o.jsx("span",{className:"rounded-full bg-neutral-100 px-3 py-1 text-xs text-neutral-700 dark:bg-neutral-800 dark:text-neutral-200",children:r},r))})]}):null,tc=(e,t,r)=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:e}),o.jsx("input",{value:t,onChange:n=>r(n.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),XE=(e,t,r)=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:e}),o.jsx("textarea",{value:t,onChange:n=>r(n.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),EJ=async(e,t,r,n)=>(await q.post("/invitations",{familyId:e,email:t,invitedBy:r,relationshipId:n})).data,NJ=async()=>(await q.get("/invitations/pending")).data,jJ=async e=>(await q.post("/invitations/accept",{token:e})).data,CJ=async e=>(await q.post("/invitations/decline",{token:e})).data,TJ=({invitations:e,onAccept:t,onDecline:r,searchParams:n,setSearchParams:s})=>(m.useEffect(()=>{const i=n.get("token");i&&(e.find(l=>l.Token===i)?(t(i),s({},{replace:!0})):s({},{replace:!0}))},[n,e,t,s]),e.length===0?null:o.jsxs("div",{className:"bg-primary-100 dark:bg-primary-900/50 p-4 rounded-2xl space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-primary-800 dark:text-primary-200",children:"Pending Invitations"}),o.jsx("div",{className:"space-y-3",children:e.map(i=>o.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-3 rounded-lg",children:[o.jsx("div",{children:o.jsxs("p",{className:"font-medium text-neutral-900 dark:text-white",children:["You have been invited to join the ",o.jsx("span",{className:"font-bold",children:i.Family.FamilyName})," family."]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>t(i.Token),className:"px-3 py-1 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-lg",children:"Accept"}),o.jsx("button",{onClick:()=>r(i.Token),className:"px-3 py-1 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg",children:"Decline"})]})]},i.InvitationID))})]})),AJ=({isOpen:e,onClose:t,token:r,onAccept:n,onDecline:s,setSearchParams:i,currentUser:a})=>{const[l,c]=m.useState(null),[u,d]=m.useState(!0),[f,h]=m.useState(null),p=m.useMemo(()=>xr("invitation-modal"),[]);return p.log("InvitationActionModal: isOpen",e),p.log("InvitationActionModal: token",r),m.useEffect(()=>{e&&(async()=>{var y,b;if(!r){d(!1),h("No invitation token provided.");return}try{d(!0),h(null);const v=await q.get(`/invitations/details?token=${r}`);c(v.data)}catch(v){p.error("Error fetching invitation details:",v),h(((b=(y=v.response)==null?void 0:y.data)==null?void 0:b.message)||"Failed to fetch invitation details.")}finally{d(!1)}})()},[r,e,p]),e?o.jsx(er,{children:e&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-md",children:o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white mb-4",children:u?"Loading invitation details...":f?`Error: ${f}`:l?`You've been invited to join ${l.familyName} by ${l.inviterName}!`:"You have a pending family invitation!"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-6",children:u||f?"":"Would you like to accept or decline this invitation?"}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:()=>{s(r),t(),i({},{replace:!0})},className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Decline"}),o.jsx("button",{onClick:()=>{n(r),t(),i({},{replace:!0})},className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-xl",children:"Accept"})]})]})})})}):(p.log("InvitationActionModal: Not rendering because isOpen is false"),null)},DJ=async(e,t)=>{await q.put(`/users/${e}`,t)},Lc=()=>({currentStep:"greeting",family_name:"",members:[],rooms:[],slot_status:{family_name:"empty",members:"empty",rooms:"empty"},loading:!1,error:null,messages:[{sender:"LinZ",text:`Hi! I'm LinZ  Welcome to FamConomythanks for inviting me along. To start, what name should we use for your family? (e.g., "The Parkers")`}],hydrated:!1,awaitingResetConfirmation:!1,streamingMessage:null}),JE=Lc(),RJ=()=>({...Lc(),hydrated:!0}),Ar=xr("onboarding"),_a=xr("onboarding-stream"),_J=3500,IJ=e=>new Promise(t=>setTimeout(t,e));function Id(e,t,r){const n=e?"filled":"empty",s=t.length>0?"filled":"empty",i=r.length>0?"filled":"empty";return{family_name:n,members:s,rooms:i}}function eN(e){return e.family_name==="filled"&&e.members==="filled"&&e.rooms==="filled"?"committed":e.family_name==="filled"&&e.members==="filled"?"rooms":e.family_name==="filled"?"members":"greeting"}async function MJ(e,t,r,n,s,i){var a;try{const l=await fetch("/api/assistant/onboarding",{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream",...t!==null?{"x-tenant-id":String(t)}:{},"x-user-id":r},credentials:"include",body:JSON.stringify({message:e,familyId:t,userId:r,history:n}),signal:i==null?void 0:i.signal});if(!l.ok||!l.body)throw new Error(`Streaming assistant error: ${l.status}`);const c=l.body.getReader(),u=new TextDecoder;let d="",f="",h="",p=null,g,y=!1,b=!1;const v=k=>{const S=k.indexOf(`\r
\r
`),E=k.indexOf(`

`);return S!==-1&&(E===-1||S<E)?{index:S,length:4}:E!==-1?{index:E,length:2}:null},x=k=>{if(!k.trim())return;const S=k.split(/\r?\n/);let E="message";const N=[];for(const C of S)C&&(C.startsWith("event:")?E=C.slice(6).trim():C.startsWith("data:")&&N.push(C.slice(5)));if(!N.length)return;const j=N.join(`
`);let T=j;try{T=JSON.parse(j)}catch{}switch(E){case"token":if(T&&typeof T.content=="string"){const C=T.content;f+=C,C.trim()&&(y=!0),s==null||s(f)}break;case"assistant":if(T&&typeof T.content=="string"){const C=T.content;h=C,C.trim()&&(y=!0),s==null||s(h)}break;case"state":p=T;break;case"done":T&&typeof T.next_step=="string"&&(g=T.next_step,p?p={...p,next_step:g}:p={next_step:g}),b=!0;break;case"error":throw new Error((T==null?void 0:T.message)||"Streaming assistant reported an error.");default:break}};for(;;){const{value:k,done:S}=await c.read();if(S)break;d+=u.decode(k,{stream:!0});let E=v(d);for(;E;){const N=d.slice(0,E.index);d=d.slice(E.index+E.length),x(N),E=v(d)}}d.trim()&&x(d),b=!0;const w=(h||f||"").trim();return _a.log("stream result",{assistant_reply:w,hasTokens:!!f.trim(),hasAssistantMessage:!!h.trim(),latestState:p,receivedContent:y,completed:b}),{assistant_reply:w,state:p,hasContent:y,completed:b}}catch(l){if(((a=i==null?void 0:i.signal)==null?void 0:a.aborted)||typeof l=="object"&&l!==null&&"name"in l&&l.name==="AbortError")throw _a.log("Streaming onboarding assistant request aborted"),l;return _a.error("Streaming onboarding assistant failed:",l),null}}function tn(e){return e.split(/\s+/).map(t=>t?t[0].toUpperCase()+t.slice(1):"").join(" ")}function ca(e){return e.replace(/^["']+|["']+$/g,"")}function nI(e){const t=ca(e.trim());if(!(!t||/[?\r\n]/.test(t)||t.split(/\s+/).length>6))return tn(t.replace(/\s+/g," "))}function sI(e){const t=e.toLowerCase().replace(/\b(my|the|a|an|our|of|with|for|to)\b/g,"").replace(/\b(one|two|three|four|five|six|seven|eight|nine|ten)\b/g,"").replace(/\s+/g," ").trim(),r={wife:"Wife",husband:"Husband",partner:"Partner",spouse:"Spouse",mom:"Mom",mother:"Mother",dad:"Dad",father:"Father",daughter:"Daughter",daughters:"Daughter",son:"Son",sons:"Son",boy:"Son",boys:"Son",girl:"Daughter",girls:"Daughter",kid:"Child",kids:"Child",child:"Child",children:"Child",baby:"Baby",toddler:"Toddler",cousin:"Cousin",nephew:"Nephew",niece:"Niece",grandma:"Grandma",grandpa:"Grandpa",grandfather:"Grandfather",grandmother:"Grandmother",aunt:"Aunt",uncle:"Uncle",friend:"Friend",roommate:"Roommate",fiance:"Fiance",fiancee:"Fiancee"};if(t&&Object.prototype.hasOwnProperty.call(r,t))return r[t];const n=t.split(" ").filter(s=>s&&!FJ.has(s)).join(" ").trim();return n?tn(n):"Family Member"}const tN=new Set(["mom","mother","dad","father","parent","parents","son","sons","daughter","daughters","boy","boys","girl","girls","kid","kids","child","children","wife","husband","partner","partners","spouse","friend","friends","roommate","roommates","cousin","cousins","nephew","niece","uncle","aunt","grandma","grandmother","grandpa","grandfather","grandson","granddaughter","sister","sisters","brother","brothers","siblings","guardian","mentor","coach","stepmom","stepmother","stepdad","stepfather","stepbrother","stepsister","stepchild","stepchildren","twin","twins","fiance","fiancee","pet","pets","dog","cat"]),OJ=new Set(["oldest","youngest","older","younger","little","big","only","eldest","middle","newborn","baby","bonus","step","twin","twins","first","second","third","fourth","fifth","pregnant","expecting","future","lovely","awesome","amazing","wonderful","beautiful","sweet"]),PJ=new Set(["one","two","three","four","five","six","seven","eight","nine","ten","couple","few","pair","pairs","dozen"]),rN=new Set(["and","&"]),nN=new Set(["named","called","is","=","as"]),LJ=new Set(["the","a","an","my","our"]),FJ=new Set(["lovely","awesome","amazing","wonderful","beautiful","sweet"]),gb=["no thanks","nope","no that's all","no that is all","nope that's all of us","done","that's all","thats all","that's everyone","thats everyone","that's everyone actually","thats everyone actually","that's it","thats it","all set","we're good","we are good","we good","no more","stop"],Bp=[...gb,"i think that's all","i think thats all","nothing else","none","no other rooms","no other spaces","that is everything","that is all","no other","we are good on rooms","we are good on spaces","we are set","all good"],BJ=["yes","yeah","yep","yup","sure","absolutely","of course","start over","restart","reset","reset it","reset onboarding","lets start over","let's start over","start from scratch","lets do it"],zJ=["no","nope","not now","maybe later","keep it","leave it","stay as is","dont","don't"],UJ=["reset onboarding","restart onboarding","start over onboarding"],Ly=new Set([...Bp,"what do you mean","i am confused","im confused","not sure","no idea"]),HJ=e=>e.replace(/[.!?]+$/g,"").trim().toLowerCase(),iI=e=>{const t=HJ(e);return!!(!t||Ly.has(t)||t==="n/a"||t==="na")},VJ=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t.trim():"").filter(Boolean).filter(t=>!iI(t)):[];function Ei(e,t){const r=e.toLowerCase();return t.some(n=>r.includes(n))}function $J(e){const t=(e||"").toLowerCase();return/son|daughter|child|kid|boy|girl|teen/.test(t)}function sN(e){const t=tn(e.trim());if(!t)return"";const n=t.toLowerCase().endsWith("s")?"'":"'s";return`${t}${n} Room`}function Ng(e,t,r){const n=t.filter(c=>$J(c.role));if(!n.length)return[];const s=new Set(r.map(c=>c.toLowerCase())),i=new Set,a=n.map(c=>tn(c.name)).filter(c=>{if(!c)return!1;const u=c.toLowerCase();if(i.has(u))return!1;i.add(u);const d=sN(c);return d&&!s.has(d.toLowerCase())}).map(c=>sN(c)).filter(Boolean);if(!a.length)return[];let l=e??a.length;return l<=0&&(l=a.length),a.slice(0,Math.min(l,a.length))}const WJ=["Master Bedroom","Master Bathroom","Primary Bedroom","Primary Bathroom","Kids Bedrooms","Kids Rooms","Kids Room","Kids Bathroom","Guest Bedroom","Guest Bathroom","Guest Room","Living Room","Dining Room","Kitchen","Study","Library","Office","Workout Room","Gym","Garage","Front Porch","Enclosed Front Porch","Porch","Basement","Attic","Laundry Room","Mud Room","Yard","Backyard","Deck","Patio","Loft","Playroom"],YJ=[...WJ].sort((e,t)=>t.length-e.length);function GJ(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function qJ(e){const t=new Set;return YJ.forEach(r=>{if(new RegExp(`\\b${GJ(r)}\\b`,"gi").test(e)){let s=r;r==="Primary Bedroom"&&(s="Master Bedroom"),r==="Primary Bathroom"&&(s="Master Bathroom"),r==="Kids Room"&&(s="Kids Rooms"),(r==="Enclosed Front Porch"||r==="Porch")&&(s="Front Porch"),r==="Gym"&&(s="Workout Room"),r==="Backyard"&&(s="Yard"),r==="Guest Bedroom"&&(s="Guest Room"),t.add(s)}}),Array.from(t)}function KJ(e){let t=e.trim();if(!t)return[];t=t.replace(/^(?:and|&)+\s*/i,"").trim();let r=t.split(/\s+/).filter(Boolean);if(r.length<2)return[];for(;r.length>0&&PJ.has(r[0].toLowerCase());)r=r.slice(1);if(r.length<2)return[];const n=[];let s=0;for(;s<r.length;){const d=r[s],f=d.toLowerCase();if(nN.has(f)){s+=1;break}if(rN.has(f)&&n.length){s+=1;break}if(s===0){n.push(d),s+=1;continue}if(OJ.has(f)||tN.has(f)||d.includes("-")){n.push(d),s+=1;continue}break}if(!n.length)return[];let i=r.slice(s);for(;i.length>0&&(rN.has(i[0].toLowerCase())||LJ.has(i[0].toLowerCase())||nN.has(i[0].toLowerCase()));)i=i.slice(1);if(!i.length)return[];const l=i.join(" ").split(/\band\b|,|&/i).map(d=>d.trim()).filter(Boolean),c=sI(n.join(" ")),u=[];return l.forEach(d=>{const f=d.replace(/^(?:the|a|an|my|our)\s+/i,"").replace(/'s$/i,"").trim();f&&(tN.has(f.toLowerCase())||u.push({name:tn(f),role:c}))}),u}function QJ(e){var i;const t=[],r=ca(e.trim());if(!r)return t;const n=/\b(?:my|our)\s+(.+?)(?=(?:\s*[,:;])?\s*(?:and\s+)?(?:my|our)\b|[.!?]|$)/gi;let s;for(;(s=n.exec(r))!==null;){const a=(i=s[1])==null?void 0:i.trim();if(!a)continue;KJ(a).forEach(c=>{t.some(u=>u.name.toLowerCase()===c.name.toLowerCase())||t.push(c)})}return t}function iN(e,t,r){let n=ca(e.trim());if(!n)return[];n=n.replace(/^[\-*]+\s*/,"").replace(/:+$/,"").trim();const s=n.toLowerCase();if(!n||Ly.has(s))return[];if(/that's all/i.test(n)||/nothing else/i.test(n))return[];if(/\b(kids?'?|children|sons|daughters|boys|girls)\b[^,.;]*\b(room|rooms|bedroom|bedrooms)\b/i.test(n)){const f=n.match(/(\d+)\s+(?:kids?'?|children|sons|daughters|boys|girls)/i),h=f&&parseInt(f[1],10)||null,p=Ng(h,t,r);return p.length?p:["Kids Rooms"]}if([/^(?:well|so|also|and|oh|yeah|yep|yup|sure|plus|anyway|honestly|actually|maybe|um|uh|okay|ok|alright)[,\s]+/i,/^oh\s+yeah[,\s]+/i,/^oh\s+ok[,\s]+/i].forEach(f=>{n=n.replace(f,"").trim()}),[/^(?:my|our)\s+(?:home|house)\s+has(?:\s+the\s+following\s+rooms?)?[:\s]*/i,/^home\s+has\s+/i,/^house\s+has\s+/i,/^we(?:'ve)?\s+(?:also\s+)?(?:got|have)\s+/i,/^we\s+also\s+keep\s+/i,/^there'?s\s+/i,/^here'?s\s+/i,/^it's\s+/i,/^its\s+/i,/^this\s+is\s+/i,/^just\s+/i,/^all\s+of\s+the\s+/i,/^all\s+of\s+/i,/^all\s+the\s+/i].forEach(f=>{n=n.replace(f,"").trim()}),!n)return[];if(/each of the kids? have their own room/i.test(n)||/each kid has their own room/i.test(n)){const f=Ng(null,t,r);return f.length?f:["Kids Rooms"]}if(/master\s+bed\s+and\s+bath/i.test(n))return["Master Bedroom","Master Bathroom"];n=n.replace(/^an\s+/i,"").replace(/^the\s+/i,"").replace(/^a\s+/i,""),n=n.replace(/\bbed\b$/i,"Bedroom"),n=n.replace(/\bbedroom room$/i,"Bedroom"),n=n.replace(/\bbath\b$/i,"Bathroom"),n=n.replace(/\bmaster bedroom bathroom$/i,"Master Bathroom");let c=tn(n.replace(/\s+/g," ").trim());const u=c.toLowerCase();if(!c||Ly.has(u))return[];const d=qJ(c);if(d.length)return d;if(/^bath$/i.test(c)&&(c="Bathroom"),/^room$/i.test(c))return[];if(/^rooms$/i.test(c))return[];if(/^kids$/i.test(c))return[];if(/^kids Rooms$/i.test(c)){const f=Ng(null,t,r);if(f.length)return f;c="Kids Rooms"}return/^basement$/i.test(c)&&(c="Basement"),/^garage$/i.test(c)&&(c="Garage"),c?[c]:[]}function ZJ(e,t,r){const n=e.trim();if(!n)return[];if(Ei(n,Bp))return[];let s=ca(n);if(s=s.replace(/[.!?]+$/,"").trim(),s.includes(":")){const l=s.split(":").slice(1).join(":").trim();l&&(s=l)}s=s.replace(/master\s+bed\s+and\s+bath/gi,"master bedroom, master bathroom"),s=s.replace(/master\s+bedroom\s+and\s+bathroom/gi,"master bedroom, master bathroom");const i=s.split(/[,;]|\band\b/gi).map(l=>l.trim()).filter(Boolean),a=[];return i.forEach(l=>{iN(l,r,[...t,...a]).forEach(u=>{const d=u.toLowerCase();u&&!t.some(f=>f.toLowerCase()===d)&&!a.some(f=>f.toLowerCase()===d)&&a.push(u)})}),a.length||iN(s,r,[...t,...a]).forEach(c=>{const u=c.toLowerCase();c&&!t.some(d=>d.toLowerCase()===u)&&!a.some(d=>d.toLowerCase()===u)&&a.push(c)}),a}function hf(e){const t=new Set;return e.filter(r=>{const n=`${r.name.toLowerCase()}|${r.role.toLowerCase()}`;return t.has(n)?!1:(t.add(n),!0)})}function pf(e){const t=new Set;return e.filter(r=>{const n=r.toLowerCase();return t.has(n)?!1:(t.add(n),!0)})}function XJ(e){const t=ca((e??"").trim());if(!t)return"";const r=t.replace(/\s+/g," ");return nI(r)??tn(r)}function JJ(e){const t=(e??"").trim();if(t)return t.toLowerCase()}function eee(e){const t=new Set,r=e.map(s=>{const i=tn(ca((s.name??"").trim())),a=sI((s.role??"").trim()),l=JJ(s.email);return{name:i,role:a,...l?{email:l}:{}}}).filter(s=>s.name&&s.role);return hf(r).filter(s=>{if(!s.email)return!0;const i=s.email.toLowerCase();return t.has(i)?!1:(t.add(i),!0)})}function aI(e){return pf(e.map(t=>ca((t??"").trim())).filter(Boolean).filter(t=>!iI(t)).map(t=>tn(t.replace(/\s+/g," "))))}function tee(e){const t=XJ(e.family_name),r=eee(e.members),n=aI(e.rooms);return{familyName:t,members:r,rooms:n,diagnostics:{rawFamily:e.family_name,rawMemberCount:e.members.length,normalizedMemberCount:r.length,rawRoomCount:e.rooms.length,normalizedRoomCount:n.length}}}function ree(e,t){var s;const r=t.trim(),n=r.toLowerCase();if(e.currentStep==="greeting"){const i=e.family_name?void 0:nI(t),a=e.family_name||i;return{assistant_reply:a?`Wonderful. I'd love to get to know the people who make up ${a}. Who should we invite first?`:"Thanks for kicking things off! I'd love to know who will be using FamConomy with youwho should we invite first?",extracted:i?{family_name:i}:{},next_step:a?"members":"greeting"}}if(e.currentStep==="members"){if(Ei(t,gb)){const l=e.members.length>0;return{assistant_reply:l?"Perfect, I feel like I'm getting to know your family already. Let's talk about your spacewhat rooms or areas should we keep track of?":"I'd love to know at least one person in your crew. Share a name and role, or tell me you'd like to skip this part for now.",extracted:{},next_step:l?"rooms":"members"}}if(n.includes("spell")||n.includes("name")&&n.includes("wrong"))return{assistant_reply:"Thanks for pointing that outI'd love to get the names right. Could you share each name again so I can fix them?",extracted:{},next_step:"members"};const i=QJ(t);if(i.length>0){const l=i.filter(c=>!e.members.some(u=>u.name.toLowerCase()===c.name.toLowerCase()));if(l.length>0)return{assistant_reply:`Love it! I'll add ${l.map(u=>`${u.name} (${u.role})`).join(", ")}. Anyone else to invite?`,extracted:{members_add:l},next_step:"members"}}const a=(s=e.members[e.members.length-1])==null?void 0:s.name;return{assistant_reply:a?`I bet ${a} has a partner in crime. Tell me about another person in your crewname and role work great!`:"I'd love to meet everyone. Who's the first family member we should add, and how are they connected to you?",extracted:{},next_step:"members"}}if(e.currentStep==="rooms"){const i=Ei(t,Bp),a=ZJ(t,e.rooms,e.members);if(a.length>0){const c=a.join(", ");return{assistant_reply:i?`Great! I'll note ${c}. That should cover everything for nowif another space pops up later, just let me know.`:`Great! I'll note ${c}. Any other spaces you rely on?`,extracted:{rooms_add:a},next_step:i?"committed":"rooms"}}if(i)return{assistant_reply:"Sounds goodI'll get those spaces set up. If you think of another room later, just let me know.",extracted:{},next_step:"committed"};const l=e.rooms[e.rooms.length-1];return{assistant_reply:l?`I'm picturing ${l}. What other spaces should I know about so we can keep things organized for you?`:"Paint me a picture of your home. What's one room or space your family relies on a lot?",extracted:{},next_step:"rooms"}}return e.currentStep==="committed"?{assistant_reply:"Amazing, I have what I need. Give me just a sec while I set everything up behind the scenes.",extracted:{},next_step:"committed"}:{assistant_reply:r?"Thanks for sharing that with me! Let me know anything else you'd like me to remember about your family.":"I'm here and ready whenever you want to tell me more about your family setup.",extracted:{},next_step:e.currentStep}}const nee=({familyId:e,userId:t})=>{const[r,n]=m.useState(Lc()),s=m.useRef(null),{checkAuthStatus:i}=Ft(),{appendLinZMessage:a,appendUserMessage:l,updateLinZMessage:c}=li(),[u,d]=m.useState(e),f=m.useRef(e??null),[h,p]=m.useState(!0),g=m.useRef(0),y=m.useRef(null),b=m.useRef(null),v=m.useRef(null);m.useEffect(()=>{const C=`${e??"none"}:${t??"none"}`;if(s.current===C)return;const _=s.current;s.current=C;const V=typeof e=="number"?e:null;if(f.current=V,d(V),p(!0),!_){b.current=null,n(Lc()),g.current=0;return}const[F="none",R="none"]=_.split(":"),[L="none",O="none"]=C.split(":");(R!==O||F!=="none"&&F!==L)&&(b.current=null,n(Lc()),g.current=0)},[e,t]),m.useEffect(()=>{h&&typeof e=="number"&&e!==u&&(f.current=e,d(e))},[h,e,u]),m.useEffect(()=>{f.current=u},[u]),m.useEffect(()=>()=>{v.current&&(v.current.abort(),v.current=null)},[]);const x=m.useCallback(async C=>{var F,R,L;const _=f.current;if(_)return _;if(!t)return null;const V=(C==null?void 0:C.trim())||r.family_name.trim()||"My Family";try{Ar.log("Ensuring family id",{preferredName:C??r.family_name});const O=await q.post("/family",{familyName:V||"My Family"}),z=((F=O.data)==null?void 0:F.FamilyID)??((R=O.data)==null?void 0:R.familyId)??((L=O.data)==null?void 0:L.id);if(typeof z!="number")throw new Error("Family creation did not return a valid FamilyID.");f.current=z,d(z),p(!0);try{await i()}catch(B){_a.warn("Failed to refresh auth after family creation",B)}return Ar.log("Family id resolved",{newFamilyId:z}),z}catch(O){return _a.error("Failed to ensure familyId during onboarding",O),null}},[u,t,r.family_name,i]),w=r.messages.some(C=>C.sender==="user");m.useEffect(()=>{(async()=>{if(w){Ar.log("Skipping hydration because user has already interacted.");return}if(!u||!t){n(_=>({..._,hydrated:!0}));return}n(_=>({..._,loading:!0,error:null}));try{const _=await q.get(`/linz/context/hydrate?familyId=${u}&userId=${t}`),{onboardingMemory:V,existingFacts:F}=_.data;let R="",L=[],O=[];const z=[];V==null||V.forEach(ie=>{if(!(ie.namespace&&ie.namespace!=="onboarding"))try{const M=JSON.parse(ie.value);ie.key==="family_name"&&typeof M=="string"&&(R=M),ie.key==="member_candidates"&&Array.isArray(M)&&(L=M),ie.key==="room_candidates"&&Array.isArray(M)&&(O=M)}catch{}});const B=new Map((F==null?void 0:F.map(ie=>[ie.key,ie.value]))??[]);if(!R){const ie=B.get("family.name");typeof ie=="string"?R=ie:ie&&typeof ie=="object"&&"value"in ie&&typeof ie.value=="string"&&(R=ie.value)}if(!L.length){const ie=B.get("onboarding.members");Array.isArray(ie)&&(L=ie.map(M=>({name:typeof(M==null?void 0:M.name)=="string"?M.name:"",role:typeof(M==null?void 0:M.relationshipName)=="string"?M.relationshipName:typeof(M==null?void 0:M.role)=="string"?M.role:"",email:typeof(M==null?void 0:M.email)=="string"?M.email:void 0})).filter(M=>M.name))}if(!O.length){const ie=B.get("onboarding.rooms");Array.isArray(ie)&&(O=ie.filter(M=>typeof M=="string"))}L=hf(L.map(ie=>({...ie,name:tn(ie.name),role:ie.role?tn(ie.role):""}))),O=pf(O.map(ie=>tn(ie)));const W=Id(R,L,O);let se=eN(W),X=!1,de=[...JE.messages];const fe=B.get("onboarding.status"),ye=typeof fe=="string"?fe:fe&&typeof fe=="object"&&"state"in fe?fe.state:void 0;ye==="completed"?(se="completed",X=!0,de=[{sender:"LinZ",text:"Welcome back to onboarding! Would you like to start over?"}]):ye==="committed"&&(se="committed"),X?z.push(...de):z.push(...JE.messages),n(ie=>ie.messages.some(J=>J.sender==="user")?{...ie,family_name:R,members:L,rooms:O,slot_status:W,currentStep:se,loading:!1,hydrated:!0,awaitingResetConfirmation:X,streamingMessage:ie.streamingMessage}:(b.current=null,{...ie,family_name:R,members:L,rooms:O,slot_status:W,currentStep:se,messages:z,loading:!1,hydrated:!0,awaitingResetConfirmation:X,streamingMessage:null}))}catch(_){n(V=>{const F=V.messages.some(R=>R.sender==="user");return F||(b.current=null),{...V,loading:!1,error:_.message??"Failed to hydrate",hydrated:!0,streamingMessage:F?V.streamingMessage:null}})}})()},[u,t,w]);const k=m.useCallback(async(C,_,V="onboarding")=>{if(!t)return;let F=u;if(F||(C==="family_name"&&typeof _=="string"?F=await x(_):r.family_name&&(F=await x(r.family_name))),!!F)try{Ar.log("Persisting memory item",{key:C,hasValue:_!==void 0,namespace:V}),await q.put("/linz/memory",{items:[{familyId:F,userId:t,namespace:V,key:C,value:JSON.stringify(_)}]})}catch{n(L=>({...L,error:`Failed to save ${C}.`}))}},[u,x,t,r.family_name]),S=m.useCallback(async C=>{var W,se,X,de;if(!t)return!1;const _=u??await x();if(!_)return n(fe=>({...fe,error:"Unable to create family record."})),!1;const V=(C==null?void 0:C.family_name)??r.family_name,F=(C==null?void 0:C.members)??r.members,R=(C==null?void 0:C.rooms)??r.rooms,L=tee({family_name:V,members:F,rooms:R}),O=L.familyName||ca(V.trim()),z=L.members,B=L.rooms;if(Ar.log("Commit evaluation",{familyId:_,...L.diagnostics}),!O)return n(fe=>({...fe,loading:!1,error:"Family name is incompleteplease confirm it before continuing."})),!1;if(!z.length)return n(fe=>({...fe,loading:!1,error:"Member details need another look before we can continue."})),!1;if(!B.length)return n(fe=>({...fe,loading:!1,error:"Please share at least one room or space to finish onboarding."})),!1;Ar.log("Committing onboarding data",{familyId:_,memberCount:z.length,roomCount:B.length}),n(fe=>({...fe,loading:!0}));try{const ye=(await q.post("/onboarding/commit",{familyId:_,userId:t,family_name:O,members:z,rooms:B})).data,ie=(W=ye==null?void 0:ye.rooms)!=null&&W.length?aI(ye.rooms):B,M=Id(O,z,ie);return Ar.log("Commit successful",{familyId:_,message:ye==null?void 0:ye.message,returnedRooms:((se=ye==null?void 0:ye.rooms)==null?void 0:se.length)??0}),Fx(_),p(!0),n(J=>({...J,loading:!1,family_name:O,members:z,rooms:ie,slot_status:M,currentStep:"committed",error:null})),!0}catch(fe){const ye=((de=(X=fe==null?void 0:fe.response)==null?void 0:X.data)==null?void 0:de.error)||fe.message||"Failed to commit onboarding";return Ar.error("Commit failed",ye),n(ie=>({...ie,loading:!1,error:ye})),!1}},[u,x,t,r.family_name,r.members,r.rooms]),E=m.useCallback(async C=>{var Qe,nt,$e;Ar.log("Processing user response",{currentStep:r.currentStep,message:C,memberCount:r.members.length,roomCount:r.rooms.length}),v.current&&(v.current.abort(),v.current=null),b.current=null,n(Ce=>{const D=Ce.messages.some(Q=>Q.sender==="user")?"":null;return b.current=D,{...Ce,streamingMessage:D}});let _=null,V=!1,F=null;if(t){const Ce=r.messages.slice(-10),Fe=new AbortController;v.current=Fe;try{_=await MJ(C,u,t,Ce,D=>{n(Q=>(b.current=D,{...Q,streamingMessage:D}))},{signal:Fe.signal})}catch(D){Fe.signal.aborted||typeof D=="object"&&D!==null&&"name"in D&&D.name==="AbortError"?(V=!0,_a.log("Streaming onboarding assistant request aborted for latest prompt")):(F=D,_a.error("Streaming onboarding assistant call failed",D))}finally{v.current===Fe&&(v.current=null)}}if(V)return;F&&Ar.warn("Continuing after streaming assistant error",F);let R=((Qe=_==null?void 0:_.assistant_reply)==null?void 0:Qe.trim())??"",L=r.family_name,O=[...r.members],z=[...r.rooms],B,W={},se=!1;const X=_==null?void 0:_.state,de=(_==null?void 0:_.hasContent)??!1,fe=(_==null?void 0:_.completed)??!1,ye=!!X;let ie=R.length>0;if(!ie){const Ce=(nt=b.current)==null?void 0:nt.trim();Ce&&(R=Ce,ie=!0)}if(X){const{family_name:Ce,members:Fe,rooms:D,next_step:Q}=X;if(Ce){const I=Ce.trim();I&&I!==L&&(L=I,await k("family_name",L))}if(Array.isArray(Fe)){const I=Fe.map(A=>{var K,pe,ge;return{name:(K=A.name)==null?void 0:K.trim(),role:(pe=A.role)==null?void 0:pe.trim(),email:((ge=A.email)==null?void 0:ge.trim())||void 0}}).filter(A=>A.name&&A.role);if(I.length){const A=hf(I),K=JSON.stringify(O.map(ge=>({name:ge.name,role:ge.role,email:ge.email??null}))),pe=JSON.stringify(A.map(ge=>({name:ge.name,role:ge.role,email:ge.email??null})));K!==pe&&(O=A,await k("member_candidates",O))}}if(Array.isArray(D)){const I=pf(D.map(A=>tn((A||"").trim())).filter(Boolean));if(I.length){const A=JSON.stringify(z),K=JSON.stringify(I);A!==K&&(z=I,await k("room_candidates",z))}}Q&&["greeting","members","rooms","committed","completed"].includes(Q)&&(B=Q)}const M=Ce=>{if(!Ce)return null;const{next_step:Fe,family_name:D,members:Q,rooms:I}=Ce,A=(D==null?void 0:D.trim())||"your family",K=Array.isArray(Q)?Q.length:0,pe=Array.isArray(I)?I.length:0,ge=K?`${K} member${K===1?"":"s"}`:"no members yet",gt=pe?`${pe} room${pe===1?"":"s"}`:"no rooms yet";switch(Fe){case"members":return"Great! Tell me about the people we should include next.";case"rooms":return"Awesomelet's talk about the rooms or spaces you want to track.";case"committed":case"completed":return`All set! I've saved ${A} with ${ge} and ${gt}. You're ready to continue.`;default:return null}},J=async Ce=>{var Q;const Fe={...r,family_name:L,members:O,rooms:z,slot_status:Id(L,O,z)};if(se)return;{await IJ(_J);const I=((Q=b.current)==null?void 0:Q.trim())??"";if(R.trim()||I){!R.trim()&&I&&(R=I),ie=R.length>0,Ar.warn("Skipping fallback after delay because assistant reply arrived",{assistantReply:R,streamHasContent:de,streamCompleted:fe,streamingRef:b.current});return}}se=!0;const D=ree(Fe,C);R=D.assistant_reply,ie=R.length>0,W=D.extracted??{},D.next_step&&(B=D.next_step),b.current=R,Ar.warn("Fallback applied",{assistantReply:R,extracted:W,streamHasContent:de,streamCompleted:fe,userMessage:C})};if(!_)Ar.warn("Applying fallback",{reason:"streamResult null",userMessage:C}),await J();else{if(!ie&&de&&(R=(($e=_.assistant_reply)==null?void 0:$e.trim())??"",ie=R.length>0),!ie){const Ce=M(X??null);Ce&&(R=Ce,ie=!0)}!ie&&fe&&!ye&&(Ar.warn("Applying fallback",{reason:"completed without assistant reply",assistantReply:R,streamHasContent:de,streamCompleted:fe,streamingRef:b.current}),await J())}if(!se&&!ie&&!de&&!ye&&(Ar.warn("Applying fallback",{reason:"no content received",assistantReply:R,streamHasContent:de,streamCompleted:fe,streamingRef:b.current}),await J()),W.family_name&&!L&&(L=W.family_name.trim(),await k("family_name",L)),Array.isArray(W.members_add)&&W.members_add.length>0){const Ce=W.members_add.map(Fe=>{var D,Q,I;return{name:(D=Fe.name)==null?void 0:D.trim(),role:(Q=Fe.role)==null?void 0:Q.trim(),email:(I=Fe.email)==null?void 0:I.trim()}}).filter(Fe=>Fe.name&&Fe.role);Ce.length&&(O=hf([...O,...Ce]),await k("member_candidates",O))}if(se){const Ce=VJ(W.rooms_add);Ce.length&&(z=pf([...z,...Ce.map(Fe=>tn(Fe))]),await k("room_candidates",z))}const P=Ei(C,gb);r.currentStep==="members"&&P&&(B=O.length>0?"rooms":"members",R||(R=O.length>0?"Perfect, let's talk about your spacewhat rooms or areas should we keep track of?":"I'd love to know at least one person in your crew. Share a name and role, or tell me you'd like to skip this part for now."));const oe=Ei(C,Bp);r.currentStep==="rooms"&&oe&&(B="committed",R||(R="Sounds goodI'll get those spaces set up. If you think of another room later, just let me know."));const te=Id(L,O,z),be=B??r.currentStep,je=eN(te),Oe=be&&["greeting","members","rooms","committed","completed"].includes(be)?be:je,Ie=R;n(Ce=>(b.current=null,{...Ce,family_name:L,members:O,rooms:z,slot_status:te,currentStep:Oe,messages:[...Ce.messages,{sender:"LinZ",text:Ie}],streamingMessage:null}));const Ye=te.family_name==="filled"&&te.members==="filled"&&te.rooms==="filled"&&(Oe==="committed"||Oe==="completed"||(X==null?void 0:X.next_step)==="completed");Ar.log("Commit evaluation",{currentStep:r.currentStep,nextStep:Oe,streamNextStep:X==null?void 0:X.next_step,slot_status:te,membersCount:O.length,roomsCount:z.length,shouldCommit:Ye}),Ye&&await S({family_name:L,members:O,rooms:z})},[r,k,S,u,t]),N=m.useCallback(async C=>{var F,R;const _=(C==null?void 0:C.skipServer)??!1,V=(L=!0)=>{g.current=0,y.current=null,L?p(!0):(p(!1),f.current=null,d(null)),b.current=null,n(()=>RJ())};if(_){V(!1);return}if(!t){V(!1);return}n(L=>({...L,loading:!0,error:null}));try{const L=u??e??null;await q.post("/onboarding/reset",{userId:t,...L?{familyId:L}:{}}),V(!0)}catch(L){const O=((R=(F=L==null?void 0:L.response)==null?void 0:F.data)==null?void 0:R.error)||L.message||"Failed to reset onboarding";n(z=>(b.current="",{...z,loading:!1,error:O,streamingMessage:""}))}},[e,u,t]),j=m.useCallback(async C=>{const _=C.trim();if(!_)return;const V=_.toLowerCase(),F=async L=>{if(L==="accept")return n(z=>(b.current="",{...z,awaitingResetConfirmation:!1,messages:[...z.messages,{sender:"user",text:_}],streamingMessage:""})),await N(),n(z=>(b.current="",{...z,messages:[{sender:"LinZ",text:"All rightstarting fresh! Tell me what your family should be called."}],streamingMessage:""})),!0;const O=L==="decline"?'No problem! Everything will stay just the way it is. If you change your mind, just say "reset onboarding."':'Totally fine! If you decide you want to start over later, just let me know by saying "reset onboarding."';return n(z=>(b.current="",{...z,awaitingResetConfirmation:!1,messages:[...z.messages,{sender:"user",text:_},{sender:"LinZ",text:O}],streamingMessage:""})),!0},R=Ei(V,UJ);if(r.awaitingResetConfirmation||R){if(R&&!r.awaitingResetConfirmation){n(O=>({...O,awaitingResetConfirmation:!0})),await F("accept");return}const L=Ei(V,BJ)?"accept":Ei(V,zJ)?"decline":"unknown";await F(L);return}n(L=>({...L,messages:[...L.messages,{sender:"user",text:_}]})),await E(_)},[E,r.awaitingResetConfirmation,N]);m.useEffect(()=>{if(!a||!l||!r.messages.length)return;const C=g.current;if(r.messages.length<=C)return;r.messages.slice(C).forEach(V=>{const F=V.text.trim();F&&(V.sender==="LinZ"?a(F,{meta:{source:"onboarding"}}):l(F,{meta:{source:"onboarding"}}))}),g.current=r.messages.length},[r.messages,a,l]);const T=m.useCallback(()=>{n(C=>({...C,currentStep:"completed",awaitingResetConfirmation:!1}))},[]);return{state:r,sendUserMessage:j,commitOnboardingData:S,resetOnboarding:N,markCompleted:T}},oI=m.createContext(null),see=({familyId:e,userId:t,children:r})=>{const n=nee({familyId:e,userId:t});return o.jsx(oI.Provider,{value:n,children:r})},zp=()=>{const e=m.useContext(oI);if(!e)throw new Error("useOnboardingContext must be used within an OnboardingProvider");return e},aN={parent:{bg:"bg-primary-100",text:"text-primary-800"},guardian:{bg:"bg-secondary-100",text:"text-secondary-800"},child:{bg:"bg-accent-100",text:"text-accent-800"},other:{bg:"bg-neutral-100",text:"text-neutral-800"}},oN=()=>{const e=$n(),{user:t}=Ft(),{family:r,families:n,activeFamilyId:s,setActiveFamilyId:i,isLoading:a,error:l,refetchFamily:c}=zr(),[u,d]=m.useState([]),[f,h]=m.useState([]),[p,g]=m.useState([]),[y,b]=m.useState(!1),[v,x]=m.useState(null),[w,k]=m.useState(!1),[S,E]=m.useState(null),[N,j]=m.useState(!1),[T,C]=m.useState(!1),[_,V]=m.useState(null),[F,R]=m.useState(!1),[L,O]=m.useState(null),[z,B]=m.useState([]),[W,se]=m.useState(!1),[X,de]=m.useState(null),[fe,ye]=m.useState(!1),[ie,M]=m.useState(null),[J,P]=m.useState(!1),[oe,te]=m.useState(""),[be,je]=m.useState(!1),[Oe,Ie]=m.useState(null),Ye=m.useMemo(()=>xr("family-page"),[]),Qe=l??v,nt=a||y,$e=zp(),[Ce,Fe]=qh(),D=m.useCallback(async()=>{try{const ee=await dJ();d(ee)}catch(ee){x(ee instanceof Error?ee.message:"Failed to load relationships")}},[]),Q=m.useCallback(async()=>{try{const ee=await m_();Ye.log("roomTemplatesData from API",ee);const De=ee.map(ct=>ct.roomTemplate?[ct.roomTemplate.id,ct.roomTemplate]:null).filter(ct=>ct!==null),et=Array.from(new Map(De).values());g(et)}catch(ee){x(ee instanceof Error?ee.message:"Failed to load room templates")}},[Ye]),I=m.useCallback(async ee=>{if(!ee){h([]),B([]),x(null);return}try{b(!0),x(null);const[De,et]=await Promise.all([NJ(),g_(ee)]);B(De.filter(ct=>ct.FamilyID===ee)),h(et)}catch(De){x(De instanceof Error?De.message:"Failed to load family data")}finally{b(!1)}},[]),A=m.useCallback(async()=>{try{const De=await cy("New Household"),et=await gD(),ct=(De==null?void 0:De.FamilyID)??et.activeFamilyId??null;ct!==null&&(i(ct,{families:et.families??n}),await I(ct)),$e!=null&&$e.resetOnboarding&&await $e.resetOnboarding(),e("/onboarding?new=1")}catch(ee){x(ee instanceof Error?ee.message:"Failed to start a new household")}},[n,I,e,$e,i]);m.useEffect(()=>{D(),Q()},[D,Q]),m.useEffect(()=>{I(s??null)},[s,I]),m.useEffect(()=>{const ee=Ce.get("token");Ye.log("FamilyPage useEffect: token from URL",ee),ee&&(de(ee),se(!0),Ye.log("FamilyPage useEffect: setting invitationToken",ee),Ye.log("FamilyPage useEffect: setting showInvitationActionModal",!0))},[Ce,Fe,Ye]);const K=async()=>{var et,ct;const ee=await c(),De=(ee==null?void 0:ee.activeFamilyId)??((ct=(et=ee==null?void 0:ee.families)==null?void 0:et[0])==null?void 0:ct.FamilyID)??null;De!==null&&(i(De,{families:(ee==null?void 0:ee.families)??n}),await I(De))},[pe,ge]=m.useState(null),gt=m.useCallback(ee=>{const De=Number(ee.target.value);Number.isNaN(De)?i(null):i(De)},[i]),Wt=async(ee,De)=>{if(!(!r||!t))try{await EJ(r.FamilyID.toString(),ee,t.id??t.UserID,De),k(!1),E(null),await I(r.FamilyID)}catch(et){x(et instanceof Error?et.message:"Failed to send invitation")}},nr=async(ee,De,et,ct)=>{if(r)try{await yD(r.FamilyID.toString(),ee,De,r.FamilyValues??[],ct),j(!1),await c()}catch(fi){x(fi instanceof Error?fi.message:"Failed to save settings")}},vt=async({userData:ee,relationshipId:De,permissions:et})=>{if(_)try{await DJ(_.UserID,ee),r&&De!==null&&De!==_.RelationshipID&&await A8(String(r.FamilyID),_.UserID,De),r&&await D8(String(r.FamilyID),_.UserID,et),R(!1),await c()}catch(ct){x(ct instanceof Error?ct.message:"Failed to update profile")}},Ur=async ee=>{if(r)try{await R8(r.FamilyID.toString(),String(ee)),await c()}catch(De){x(De instanceof Error?De.message:"Failed to remove member")}},Ls=async()=>{if(!(!r||!t))try{await _8(),C(!1),await c()}catch(ee){x(ee instanceof Error?ee.message:"Failed to leave family")}},Er=async ee=>{try{await jJ(ee),await I((r==null?void 0:r.FamilyID)??s??null),await c()}catch(De){x(De instanceof Error?De.message:"Failed to accept invitation")}},Qt=async ee=>{try{await CJ(ee),await I((r==null?void 0:r.FamilyID)??s??null)}catch(De){x(De instanceof Error?De.message:"Failed to decline invitation")}},Xr=async(ee,De)=>{if(r)try{await y_(r.FamilyID,ee,De),ye(!1),await I(r.FamilyID)}catch(et){x(et instanceof Error?et.message:"Failed to create room")}},fs=async ee=>{if(!(!r||!window.confirm("Remove this room? Any gigs assigned to it will also be cleared.")))try{await fQ(ee),await I(r.FamilyID)}catch(et){x(et instanceof Error?et.message:"Failed to delete room")}},ae=async(ee,De)=>{if(r)try{await dQ(ee,{name:De}),await I(r.FamilyID),M(null)}catch(et){x(et instanceof Error?et.message:"Failed to rename room")}},le=async()=>{if(!(!r||!window.confirm("Reset the entire floor plan? This removes every room and its assignments.")))try{await hQ(r.FamilyID),await I(r.FamilyID),$e!=null&&$e.resetOnboarding&&await $e.resetOnboarding(),sessionStorage.setItem("onboarding-focus","rooms"),e("/onboarding?focus=rooms")}catch(De){x(De instanceof Error?De.message:"Failed to reset floor plan")}},Ze=ee=>{if(!ee)return"other";const De=u.find(et=>et.RelationshipID===ee);return De?De.RelationshipName.toLowerCase():"other"};if(nt)return o.jsx("div",{children:"Loading family data..."});if(Qe)return o.jsxs("div",{className:"text-error-500",children:["Error: ",Qe]});const Je="famc.local",Jr=ee=>!ee||ee.toLowerCase().endsWith(`@${Je}`);let Fs=!1;return o.jsxs("div",{className:"space-y-6",children:[!r&&!X&&o.jsx(xD,{onFamilyCreated:K}),r&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Active household"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsx("select",{value:s??"",onChange:gt,className:"px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary-500",children:n.map(ee=>o.jsx("option",{value:ee.FamilyID,children:ee.FamilyName},ee.FamilyID))}),o.jsx("button",{onClick:A,className:"px-3 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:"Start New Household"})]})]}),n.length>1&&o.jsx("div",{className:"flex flex-wrap gap-2",children:n.filter(ee=>ee.FamilyID!==s).map(ee=>o.jsxs("button",{onClick:()=>i(ee.FamilyID),className:"px-3 py-1 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:["Switch to ",ee.FamilyName]},ee.FamilyID))})]}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:r.FamilyName}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Manage your family circle and permissions"})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs(kr,{to:"/family/values",className:"flex items-center px-3 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:[o.jsx(cu,{size:18,className:"mr-2"}),o.jsx("span",{children:"Family Values"})]}),o.jsxs("button",{onClick:()=>j(!0),className:"flex items-center px-3 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:[o.jsx(M2,{size:18,className:"mr-2"}),o.jsx("span",{children:"Settings"})]}),o.jsxs("button",{onClick:()=>{E(null),k(!0)},className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(uB,{size:18,className:"mr-2"}),o.jsx("span",{children:"Invite Member"})]})]})]}),o.jsx("div",{id:"family-members-panel",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.members.map(ee=>{const De=Ze(ee.RelationshipID),et=aN[De]||aN.other,ct=Jr(ee.Email),fi=ct&&!Fs?"placeholder-members-callout":void 0;return ct&&!Fs&&(Fs=!0),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card hover:shadow-card-hover transition-all p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:ee.ProfilePhotoUrl||"https://i.pravatar.cc/100",alt:`${ee.FirstName} ${ee.LastName}`,className:"h-12 w-12 rounded-full object-cover"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:`${ee.FirstName} ${ee.LastName}`}),o.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full mt-1 ${et.bg} ${et.text}`,children:De.charAt(0).toUpperCase()+De.slice(1)}),ct&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 text-xs rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-200",children:"Placeholder"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>ge(Y=>Y===ee.UserID?null:ee.UserID),className:"text-neutral-400 hover:text-neutral-600 dark:text-neutral-500 dark:hover:text-neutral-300","aria-label":"Open member actions",children:o.jsx(qf,{size:18})}),o.jsx(er,{children:pe===ee.UserID&&o.jsx(pJ,{isOpen:pe===ee.UserID,onClose:()=>ge(null),onView:()=>O(ee),onEdit:()=>{V(ee),R(!0)},onRemove:()=>Ur(ee.UserID)})})]})]}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"flex items-center text-neutral-500 dark:text-neutral-400",children:[o.jsx(al,{size:16,className:"mr-2"}),o.jsxs("span",{children:["Joined ",new Date(ee.CreatedDate).toLocaleDateString()]})]}),ee.BirthDate&&o.jsxs("div",{className:"flex items-center text-neutral-500 dark:text-neutral-400",children:[o.jsx(cu,{size:16,className:"mr-2"}),o.jsxs("span",{children:["Born ",new Date(ee.BirthDate).toLocaleDateString()]})]}),ct&&o.jsxs("div",{id:fi,className:"rounded-xl border border-dashed border-primary-300 dark:border-primary-700 bg-primary-50/60 dark:bg-primary-900/20 px-3 py-3 text-sm text-primary-700 dark:text-primary-200",children:[o.jsxs("p",{className:"mb-2",children:["This profile was created during onboarding. Send an email invite to let ",ee.FirstName," join FamConomy."]}),o.jsx("button",{onClick:()=>{var Y;E({email:"",relationshipId:ee.RelationshipID??((Y=u[0])==null?void 0:Y.RelationshipID)??0,name:`${ee.FirstName} ${ee.LastName}`.trim()}),k(!0)},className:"inline-flex items-center px-3 py-2 rounded-xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400",children:"Send Invitation"})]})]})]},ee.UserID)})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Rooms"}),f.length>0&&o.jsxs("button",{onClick:le,className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-sm text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800",children:[o.jsx(sB,{size:16}),"Reset Floor Plan"]})]}),o.jsxs("button",{onClick:()=>ye(!0),className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(tr,{size:18,className:"mr-2"}),o.jsx("span",{children:"Add Room"})]})]}),f.length===0?o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"No rooms configured yet. Add your first room!"}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(ee=>{var De;return o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:ee.name}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:ee.roomTemplateId?"Based on template":"Custom room"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>M(ee),className:"text-neutral-400 hover:text-primary-500 transition-colors","aria-label":`Rename ${ee.name}`,children:o.jsx(cp,{size:16})}),o.jsx("button",{onClick:()=>fs(ee.id),className:"text-neutral-400 hover:text-red-500 transition-colors","aria-label":`Delete ${ee.name}`,children:o.jsx(ri,{size:16})})]})]}),((De=ee.roomTemplate)==null?void 0:De.description)&&o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 line-clamp-3",children:ee.roomTemplate.description})]},ee.id)})})]}),o.jsx(TJ,{invitations:z,onAccept:Er,onDecline:Qt,searchParams:Ce,setSearchParams:Fe}),o.jsx(fJ,{isOpen:w,onClose:()=>{k(!1),E(null)},onInvite:Wt,relationships:u,initialEmail:S==null?void 0:S.email,initialRelationshipId:S==null?void 0:S.relationshipId,inviteeName:S==null?void 0:S.name}),r&&o.jsx(hJ,{isOpen:N,onClose:()=>j(!1),onSave:nr,onLeaveFamily:()=>C(!0),onCreateNewFamily:()=>{j(!1),te(""),Ie(null),P(!0)},family:r}),_&&o.jsx(mJ,{isOpen:F,onClose:()=>R(!1),onSave:vt,user:_,relationships:u,availablePermissions:[],currentPermissions:[]}),L&&o.jsx(SJ,{isOpen:!!L,member:L,relationshipName:Ze(L.RelationshipID),onClose:()=>O(null),familyId:(r==null?void 0:r.FamilyID)??null,currentUserId:(t==null?void 0:t.UserID)??null}),ie&&o.jsx(uJ,{isOpen:!!ie,initialName:ie.name,onClose:()=>M(null),onSave:ee=>ae(ie.id,ee)}),o.jsx(er,{children:T&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-md",children:o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white mb-4",children:"Are you sure you want to leave this family?"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-6",children:"You will lose access to all family data."}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:Ls,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 hover:bg-red-600 rounded-xl",children:"Leave Family"})]})]})})})}),o.jsx(cJ,{isOpen:fe,onClose:()=>ye(!1),onConfirm:Xr,roomTemplates:p})]}),X&&o.jsx(AJ,{isOpen:W,onClose:()=>se(!1),token:X,onAccept:Er,onDecline:Qt,setSearchParams:Fe,currentUser:t}),o.jsx(er,{children:J&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-md",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Create a New Household"}),o.jsx("button",{onClick:()=>P(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"Give your new household a name. You can invite members or run the onboarding assistant once its created."}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Household Name"}),o.jsx("input",{type:"text",value:oe,onChange:ee=>te(ee.target.value),placeholder:"e.g., The Andersons",className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:be})]}),Oe&&o.jsx("p",{className:"text-sm text-error-500",children:Oe})]}),o.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-neutral-200 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",disabled:be,children:"Cancel"}),o.jsx("button",{onClick:async()=>{if(!oe.trim()){Ie("Household name is required.");return}try{je(!0),Ie(null);const ee=await cy(oe.trim()),De=await c();i(ee.FamilyID,{families:(De==null?void 0:De.families)??n}),await I(ee.FamilyID),P(!1),te(""),je(!1),window.confirm("Household created! Would you like to run the onboarding assistant now?")&&e("/onboarding")}catch(ee){Ie(ee instanceof Error?ee.message:"Failed to create household"),je(!1)}},className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl disabled:opacity-60",disabled:be,children:be?"Creating":"Create Household"})]})]})})})]})},lN=async(e,t)=>{const{data:r}=await q.get(`/family/${e}/guidelines`,{params:{type:t}});return r},iee=async(e,t)=>{const{data:r}=await q.post(`/family/${e}/guidelines`,t);return r},aee=async(e,t,r)=>{const{data:n}=await q.post(`/family/${e}/guidelines/${t}/approve`,{approved:r});return n},oee=[{key:"VALUE",label:"Values"},{key:"RULE",label:"Rules"}],cN=parseInt("21",10),uN=e=>{const t=[],r=n=>{n.forEach(s=>{var i;t.push(s),(i=s.children)!=null&&i.length&&r(s.children)})};return r(e),t},lee=e=>{const t=e.approvals.length,r=e.approvals.filter(n=>n.Approved).length;return{total:t,approved:r}},dN=()=>{const{user:e}=Ft(),{family:t,isLoading:r,refetchFamily:n}=zr(),{appendLinZMessage:s}=li(),i=(t==null?void 0:t.FamilyID)??null,[a,l]=m.useState("VALUE"),[c,u]=m.useState((t==null?void 0:t.FamilyMantra)??""),[d,f]=m.useState(!1),[h,p]=m.useState(!1),[g,y]=m.useState(null),[b,v]=m.useState(null),[x,w]=m.useState(null),[k,S]=m.useState(!1),[E,N]=m.useState(!1),[j,T]=m.useState(null),[C,_]=m.useState(null),[V,F]=m.useState(!1),[R,L]=m.useState("VALUE"),[O,z]=m.useState(""),[B,W]=m.useState(""),[se,X]=m.useState(""),[de,fe]=m.useState(""),[ye,ie]=m.useState(!1);m.useEffect(()=>{u((t==null?void 0:t.FamilyMantra)??"")},[t==null?void 0:t.FamilyMantra]);const M=m.useCallback(async A=>{if(i)if(A==="VALUE")try{S(!0),T(null);const K=await lN(i,"VALUE");v(K)}catch(K){T(K instanceof Error?K.message:"Unable to load family values")}finally{S(!1)}else try{N(!0),_(null);const K=await lN(i,"RULE");w(K)}catch(K){_(K instanceof Error?K.message:"Unable to load family rules")}finally{N(!1)}},[i]);m.useEffect(()=>{i&&(M("VALUE"),M("RULE"))},[i,M]);const J=async()=>{if(!(!t||d))try{f(!0),y(null),p(!1),await yD(t.FamilyID.toString(),t.FamilyName,c,t.FamilyValues??[]),await n(),p(!0)}catch(A){y(A instanceof Error?A.message:"Unable to update family mantra")}finally{f(!1)}},P=async(A,K)=>{if(i)try{await aee(i,A.GuidelineID,K),M(A.Type)}catch(pe){ne.error(pe instanceof Error?pe.message:"Unable to update approval")}},oe=A=>{L(A),z(""),W(""),X(""),fe(""),F(!0)},te=async()=>{if(!i)return;if(!O.trim()){ne.error("A title is required");return}const A={type:R,title:O.trim(),description:B.trim()?B.trim():void 0,parentId:se===""?void 0:Number(se),metadata:de.trim()?{note:de.trim()}:void 0};try{ie(!0),await iee(i,A),F(!1),ie(!1),s("I added that idea to your family review queue."),M(R)}catch(K){ie(!1),ne.error(K instanceof Error?K.message:"Unable to submit suggestion")}},be=m.useMemo(()=>uN((b==null?void 0:b.active)??[]),[b]),je=m.useMemo(()=>uN((x==null?void 0:x.active)??[]),[x]),Oe=A=>{if(!A||typeof A!="object")return null;const K=A.note;return typeof K=="string"&&K.trim()?K.trim():null},Ie=A=>{if(!A)return null;const K=[A.FirstName,A.LastName].filter(Boolean).join(" ").trim();return K||(A.Email?A.Email:null)},Ye=A=>{if(!A)return"recently";const K=new Date(A);return Number.isNaN(K.getTime())?"recently":K.toLocaleDateString()},Qe=(A,K=0)=>o.jsx("ul",{className:K===0?"space-y-2":"space-y-1 pl-4 border-l border-neutral-200 dark:border-neutral-700",children:A.map(pe=>{var gt;const ge=Oe(pe.Metadata);return o.jsxs("li",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("div",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-primary-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-neutral-800 dark:text-neutral-200",children:pe.Title}),pe.Description?o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:pe.Description}):null,ge?o.jsx("p",{className:"text-xs italic text-neutral-400 dark:text-neutral-500",children:ge}):null]})]}),(gt=pe.children)!=null&&gt.length?Qe(pe.children,K+1):null]},pe.GuidelineID)})}),nt=A=>{if(!A.approvals.length)return null;const K=lee(A),pe=A.approvals.find(ge=>ge.UserID===(e==null?void 0:e.UserID));return o.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsxs("span",{children:[K.approved,"/",K.total," approvals"]}),pe?o.jsxs("span",{className:pe.Approved?"inline-flex items-center gap-1 rounded-full bg-success-100 px-2 py-0.5 text-success-700 dark:bg-success-900/30 dark:text-success-200":"inline-flex items-center gap-1 rounded-full bg-warning-100 px-2 py-0.5 text-warning-700 dark:bg-warning-900/30 dark:text-warning-200",children:[o.jsx(Ti,{className:"h-3 w-3"}),pe.Approved?"You approved":"Awaiting your approval"]}):null]})},$e=A=>{const K=A.ProposedBy,pe=A.approvals.find(nr=>nr.UserID===(e==null?void 0:e.UserID)),ge=Ie(K),gt=Ye(A.ProposedAt),Wt=Oe(A.Metadata);return o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-5 shadow-sm transition hover:border-primary-200 dark:border-neutral-700 dark:bg-neutral-900/40",children:o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:A.Title}),A.Description?o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:A.Description}):null,o.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Proposed ",gt,ge?o.jsxs("span",{children:[" by ",ge]}):null]}),Wt?o.jsx("div",{className:"rounded-xl bg-neutral-100 px-3 py-2 text-xs text-neutral-600 dark:bg-neutral-800/60 dark:text-neutral-300",children:Wt}):null,nt(A)]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{onClick:()=>P(A,!0),disabled:!pe||pe.Approved,className:"inline-flex items-center gap-2 rounded-xl border border-success-200 px-3 py-2 text-sm font-medium text-success-700 transition hover:bg-success-50 disabled:opacity-60 dark:border-success-500/40 dark:text-success-200",children:[o.jsx(Ti,{className:"h-4 w-4"})," Approve"]}),o.jsxs("button",{onClick:()=>P(A,!1),className:"inline-flex items-center gap-2 rounded-xl border border-warning-200 px-3 py-2 text-sm font-medium text-warning-700 transition hover:bg-warning-50 dark:border-warning-500/40 dark:text-warning-200",children:[o.jsx(D6,{className:"h-4 w-4"})," Needs more time"]})]})]})},A.GuidelineID)},Ce=()=>{var A,K;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("section",{className:"space-y-3",children:[o.jsxs("header",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Values under review"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Approve ideas so they become part of your family culture."})]}),o.jsxs("button",{onClick:()=>oe("VALUE"),className:"inline-flex items-center gap-2 rounded-xl border border-primary-200 px-3 py-2 text-sm font-medium text-primary-600 transition hover:bg-primary-50 dark:border-primary-500/40 dark:text-primary-200 dark:hover:bg-primary-900/30",children:[o.jsx(tr,{className:"h-4 w-4"})," Suggest a value"]})]}),k?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading"}):j?o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-4 py-3 text-sm text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:j}):(((A=b==null?void 0:b.underReview)==null?void 0:A.length)??0)===0?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Nothing is waiting right now. Ask LinZ to collect new value ideas!"}):o.jsx("div",{className:"space-y-3",children:b==null?void 0:b.underReview.map($e)})]}),o.jsxs("section",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Agreed values"}),k?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading"}):(((K=b==null?void 0:b.active)==null?void 0:K.length)??0)===0?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"No agreed values yet. Suggest one to start your list."}):o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-6 dark:border-neutral-700 dark:bg-neutral-900/30",children:Qe((b==null?void 0:b.active)??[])})]})]})},Fe=()=>{const A=(x==null?void 0:x.newRules)??[];return A.length?o.jsxs("section",{className:"space-y-3",children:[o.jsx("header",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"New rules"}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:["These rules are new for ",cN," days so everyone can adjust."]})]})}),o.jsx("div",{className:"space-y-3",children:A.map(K=>{var gt;const pe=Oe(K.Metadata),ge=K.ExpiresAt?Ye(K.ExpiresAt):null;return o.jsx("div",{className:"rounded-2xl border border-warning-200 bg-warning-50 p-5 dark:border-warning-500/40 dark:bg-warning-900/30",children:o.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-warning-800 dark:text-warning-200",children:K.Title}),K.Description?o.jsx("p",{className:"text-sm text-warning-700 dark:text-warning-200/80",children:K.Description}):null,pe?o.jsx("p",{className:"text-xs italic text-warning-700 dark:text-warning-200/70",children:pe}):null,o.jsxs("p",{className:"text-xs text-warning-700 dark:text-warning-200/80",children:["Active since ",Ye(K.ActivatedAt)]}),ge?o.jsxs("p",{className:"text-xs text-warning-700 dark:text-warning-200/70",children:["Becomes permanent on ",ge]}):null,(gt=K.children)!=null&&gt.length?Qe(K.children):null]})})},K.GuidelineID)})})]}):null},D=()=>{var pe;const A=new Set(((x==null?void 0:x.newRules)??[]).map(ge=>ge.GuidelineID)),K=((x==null?void 0:x.active)??[]).filter(ge=>!A.has(ge.GuidelineID));return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("section",{className:"space-y-3",children:[o.jsxs("header",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Rules under review"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Approve rules to make them official family expectations."})]}),o.jsxs("button",{onClick:()=>oe("RULE"),className:"inline-flex items-center gap-2 rounded-xl border border-primary-200 px-3 py-2 text-sm font-medium text-primary-600 transition hover:bg-primary-50 dark:border-primary-500/40 dark:text-primary-200 dark:hover:bg-primary-900/30",children:[o.jsx(tr,{className:"h-4 w-4"})," Suggest a rule"]})]}),E?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading"}):C?o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-4 py-3 text-sm text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:C}):(((pe=x==null?void 0:x.underReview)==null?void 0:pe.length)??0)===0?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"No rules waiting right now. Ask LinZ to draft one when you need it."}):o.jsx("div",{className:"space-y-3",children:x==null?void 0:x.underReview.map($e)})]}),Fe(),o.jsxs("section",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Family rules"}),E?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading"}):K.length===0?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"No active rules yet. Suggest one to set expectations together."}):o.jsx("div",{className:"space-y-3",children:K.map(ge=>{var nr;const gt=Oe(ge.Metadata),Wt=Ye(ge.ActivatedAt);return o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-5 shadow-sm dark:border-neutral-700 dark:bg-neutral-900/30",children:o.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:ge.Title}),ge.Description?o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:ge.Description}):null,gt?o.jsx("p",{className:"text-xs italic text-neutral-500 dark:text-neutral-400",children:gt}):null,o.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Active since ",Wt]}),(nr=ge.children)!=null&&nr.length?Qe(ge.children):null]})})},ge.GuidelineID)})})]})]})},Q=()=>a==="VALUE"?Ce():D(),I=R==="VALUE"?be:je;return r&&!t?o.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:o.jsx(dn,{className:"h-6 w-6 animate-spin text-primary-500"})}):t?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:[t.FamilyName," Values & Rules"]}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Review what your household stands for and keep new ideas moving forward."})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs(kr,{to:"/family",className:"inline-flex items-center px-4 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-colors",children:[o.jsx(_k,{size:16,className:"mr-2"}),"Family Overview"]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Family mantra"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Display this on your dashboard to keep everyone focused."})]}),h?o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-success-100 px-3 py-1 text-xs font-medium text-success-700 dark:bg-success-900/30 dark:text-success-200",children:[o.jsx(oB,{className:"h-3 w-3"})," Saved"]}):null]}),o.jsx("textarea",{rows:3,value:c,onChange:A=>{u(A.target.value),p(!1)},placeholder:"Together we...",className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}),g?o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-3 py-2 text-sm text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:g}):null,o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsxs("button",{onClick:()=>u(t.FamilyMantra??""),className:"inline-flex items-center gap-2 rounded-xl border border-neutral-200 px-3 py-2 text-sm text-neutral-600 transition hover:bg-neutral-50 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(nB,{className:"h-4 w-4"})," Reset"]}),o.jsxs("button",{onClick:J,disabled:d,className:"inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-primary-500 disabled:opacity-50",children:[d?o.jsx(dn,{className:"h-4 w-4 animate-spin"}):o.jsx(iB,{className:"h-4 w-4"}),"Save mantra"]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-2",children:[o.jsx("div",{className:"flex rounded-xl bg-neutral-100 p-1 dark:bg-neutral-900/40",children:oee.map(A=>o.jsx("button",{onClick:()=>l(A.key),className:`w-full rounded-lg px-4 py-2 text-sm font-medium transition-colors focus:outline-none ${a===A.key?"bg-white text-primary-600 shadow dark:bg-neutral-700 dark:text-white":"text-neutral-600 hover:bg-white/60 dark:text-neutral-300 dark:hover:bg-neutral-700/60"}`,children:A.label},A.key))}),o.jsx("div",{className:"p-4 lg:p-6",children:Q()})]})]}),o.jsx("aside",{className:"space-y-4",children:o.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-5 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-white",children:"Tips"}),o.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-neutral-600 dark:text-neutral-300",children:[o.jsx("li",{children:"Any family member can suggest a value or rule."}),o.jsx("li",{children:"Everything stays in review until everyone approves it."}),o.jsxs("li",{children:['Rules stay "new" for ',cN," days so the household can adjust."]})]})]})})]}),V?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-white shadow-2xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsxs("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:["Suggest a ",R==="VALUE"?"family value":"family rule"]}),o.jsx("button",{onClick:()=>F(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:""})]}),o.jsxs("div",{className:"space-y-4 p-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Title"}),o.jsx("input",{value:O,onChange:A=>z(A.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Description"}),o.jsx("textarea",{rows:3,value:B,onChange:A=>W(A.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",placeholder:R==="VALUE"?"Add context so everyone understands the idea":"Describe when this rule applies and why it matters"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:["Parent ",R==="VALUE"?"value":"rule"," (optional)"]}),o.jsxs("select",{value:se,onChange:A=>X(A.target.value?Number(A.target.value):""),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",children:[o.jsx("option",{value:"",children:"Top level"}),I.map(A=>o.jsx("option",{value:A.GuidelineID,children:A.Title},A.GuidelineID))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Notes for your family (optional)"}),o.jsx("textarea",{rows:3,value:de,onChange:A=>fe(A.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",placeholder:R==="RULE"?"Explain how this rule connects to your values":"Add examples, stories, or inspiration"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 border-t border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>F(!1),className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsxs("button",{onClick:te,disabled:ye,className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-500 disabled:opacity-50",children:[ye?o.jsx(dn,{className:"h-4 w-4 animate-spin"}):o.jsx(tr,{className:"h-4 w-4"})," Submit"]})]})]})}):null]}):o.jsxs("div",{className:"rounded-2xl bg-white dark:bg-neutral-800 shadow-card p-8",children:[o.jsx("h1",{className:"text-2xl font-semibold text-neutral-900 dark:text-white mb-2",children:"No Family Selected"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 mb-4",children:"Join or create a family to define shared values and rules."}),o.jsxs(kr,{to:"/family",className:"inline-flex items-center px-4 py-2 rounded-xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(_k,{size:18,className:"mr-2"}),"Go to Family Settings"]})]})},cee=async e=>(await q.get(`/journal/family/${e}`)).data,uee=async e=>(await q.post("/journal",e)).data,dee=async(e,t)=>{await q.put(`/journal/${e}`,t)},fee=async e=>{await q.delete(`/journal/${e}`)},fN=()=>{const{user:e}=Ft(),{family:t}=zr(),[r,n]=m.useState([]),[s,i]=m.useState(null),[a,l]=m.useState(!0),[c,u]=m.useState(null),[d,f]=m.useState(!1),[h,p]=m.useState(!1),[g,y]=m.useState(window.innerWidth<1024);m.useEffect(()=>{const k=()=>{y(window.innerWidth<1024)};return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const b=m.useCallback(async()=>{if(t)try{l(!0);const k=await cee(t.FamilyID.toString());n(k)}catch(k){u(k instanceof Error?k.message:"An unknown error occurred")}finally{l(!1)}},[t]);m.useEffect(()=>{b()},[b]);const v=async(k,S)=>{if(!(!t||!e))try{const E=await uee({FamilyID:t.FamilyID,Title:k,EntryText:"",IsPrivate:S,CreatedByUserID:e.id});await b(),i(E),f(!1)}catch(E){u(E instanceof Error?E.message:"Failed to create entry")}},x=async(k,S)=>{try{await dee(k.toString(),S),b()}catch(E){u(E instanceof Error?E.message:"Failed to update entry")}},w=async k=>{try{await fee(k.toString()),b(),i(null)}catch(S){u(S instanceof Error?S.message:"Failed to delete entry")}};return a?o.jsx("div",{children:"Loading journal entries..."}):c?o.jsxs("div",{className:"text-error-500",children:["Error: ",c]}):o.jsxs("div",{id:"journal-board",className:`h-full flex ${h?"fixed inset-0 z-50 bg-white dark:bg-neutral-800":"bg-white dark:bg-neutral-800 rounded-2xl shadow-card"}`,children:[o.jsxs("div",{className:`${g&&s&&!h?"hidden":"w-full lg:w-1/3"} ${h&&s?"hidden lg:flex":"flex"} flex-col border-r border-neutral-200 dark:border-neutral-700`,children:[o.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Journal Entries"}),o.jsx("button",{onClick:()=>f(!0),className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:o.jsx(tr,{size:20})})]}),o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"relative",children:[o.jsx(lp,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400"}),o.jsx("input",{type:"text",placeholder:"Search entries...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:r.map(k=>o.jsxs("div",{onClick:()=>i(k),className:`px-4 py-3 border-b border-neutral-200 dark:border-neutral-700 cursor-pointer ${(s==null?void 0:s.EntryID)===k.EntryID?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-neutral-50 dark:hover:bg-neutral-700/50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:k.Title}),o.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:new Date(k.CreatedAt).toLocaleDateString()})]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 truncate",children:k.EntryText||"No content"})]},k.EntryID))})]}),o.jsx("div",{className:`${g&&!s?"hidden":"w-full lg:w-2/3"} ${h?"w-full":"lg:w-2/3"} flex flex-col`,children:s?o.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[o.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>{i(null),p(!1)},className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400 lg:hidden",children:o.jsx(op,{size:18})}),o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:s.Title})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>p(!h),className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:h?o.jsx(F6,{size:18}):o.jsx(B6,{size:18})}),o.jsx("button",{onClick:()=>w(s.EntryID),className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:o.jsx(ri,{size:18})})]})]}),o.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:o.jsx("textarea",{value:s.EntryText,onChange:k=>i({...s,EntryText:k.target.value}),onBlur:()=>x(s.EntryID,{EntryText:s.EntryText}),className:"w-full h-full bg-transparent text-neutral-800 dark:text-neutral-200 focus:outline-none resize-none"})})]}):o.jsx("div",{className:`${g?"hidden":"flex"} flex-1 items-center justify-center text-center`,children:o.jsxs("div",{children:[o.jsx(I6,{size:48,className:"mx-auto text-neutral-300 dark:text-neutral-600"}),o.jsx("h3",{className:"mt-4 text-lg font-medium text-neutral-900 dark:text-white",children:"Select an entry"}),o.jsx("p",{className:"mt-1 text-sm text-neutral-500 dark:text-neutral-400",children:"Choose an entry from the list to view or edit it, or create a new one."})]})})}),o.jsx(hee,{isOpen:d,onClose:()=>f(!1),onCreate:v})]})},hee=({isOpen:e,onClose:t,onCreate:r})=>{const[n,s]=m.useState(""),[i,a]=m.useState(!1),l=()=>{r(n,i),s(""),a(!1)};return e?o.jsx(er,{children:o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"New Journal Entry"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Title"}),o.jsx("input",{type:"text",value:n,onChange:c=>s(c.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter a title for your entry"})]}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:i,onChange:c=>a(c.target.checked),className:"rounded border-neutral-300 dark:border-neutral-600 text-primary-500 focus:ring-primary-500"}),o.jsx("span",{className:"ml-2 text-sm text-neutral-700 dark:text-neutral-300",children:"Make this entry private"})]})})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Create Entry"})]})]})})}):null},pee=async e=>{const{data:t}=await q.get(`/family/${e}/wishlists`);return t},mee=async(e,t)=>{const{data:r}=await q.post(`/family/${e}/wishlists`,t);return r},gee=async(e,t,r)=>{const{data:n}=await q.patch(`/family/${e}/wishlists/${t}`,r);return n},yee=async(e,t)=>{await q.delete(`/family/${e}/wishlists/${t}`)},xee=async(e,t,r)=>{const{data:n}=await q.post(`/family/${e}/wishlists/${t}/items`,r);return n},hN=async(e,t,r,n)=>{const{data:s}=await q.patch(`/family/${e}/wishlists/${t}/items/${r}`,n);return s},vee=async(e,t,r)=>{await q.delete(`/family/${e}/wishlists/${t}/items/${r}`)},bee=async(e,t,r,n,s)=>{const{data:i}=await q.post(`/family/${e}/wishlists/${t}/items/${r}/claim`,{action:n,note:s});return i},wee=async(e,t)=>{const{data:r}=await q.post(`/family/${e}/wishlists/${t}/share`);return r},kee=async(e,t)=>{await q.post(`/family/${e}/wishlists/${t}/share/revoke`)},See=async e=>{const{data:t}=await q.get(`/wishlists/shared/${e}`);return t},Eee=e=>e==="PURCHASED"?"Purchased":e==="RESERVED"?"Reserved":"Idea",pN=()=>{const{family:e,activeFamilyId:t,isLoading:r}=zr(),{registerActionHandler:n,appendLinZMessage:s}=li(),[i,a]=m.useState([]),[l,c]=m.useState({}),[u,d]=m.useState(null),[f,h]=m.useState(!1),[p,g]=m.useState(!1),[y,b]=m.useState(null),[v,x]=m.useState(""),[w,k]=m.useState(""),[S,E]=m.useState(""),[N,j]=m.useState("FAMILY"),[T,C]=m.useState(null),[_,V]=m.useState(null),[F,R]=m.useState(""),[L,O]=m.useState(""),[z,B]=m.useState(""),[W,se]=m.useState(""),[X,de]=m.useState(""),[fe,ye]=m.useState("IDEA"),ie=m.useMemo(()=>!e||!e.members?[]:e.members.map(I=>{const A=[];I.FirstName&&A.push(I.FirstName),I.LastName&&A.push(I.LastName);const K=A.length?A.join(" "):I.Email||"Family member";return{id:I.UserID,name:K}}),[e]),M=()=>{x(""),k(""),E(""),j("FAMILY"),b(null)},J=()=>{R(""),O(""),B(""),se(""),de(""),ye("IDEA"),C(null),V(null)},P=m.useCallback(async()=>{if(!t){a([]);return}try{h(!0),d(null);const I=await pee(t);a(I),c(A=>{const K={...A};return I.forEach(pe=>{!pe.shareLinkActive&&K[pe.WishListID]&&delete K[pe.WishListID]}),K})}catch(I){d(I instanceof Error?I.message:"Failed to load wishlists")}finally{h(!1)}},[t]);m.useEffect(()=>{P()},[P]),m.useEffect(()=>{const I=n("wishlist.create",()=>{M(),g(!0)}),A=n("wishlist.add_item",K=>{if(!i.length){ne.info("Create a wishlist first so LinZ can add ideas for you."),s("Once you have a wishlist I can add gift ideas to it automatically.");return}let pe=i[0];if(K&&typeof K=="object"){const ge=K.title;if(typeof ge=="string"){const gt=ge.trim().toLowerCase(),Wt=i.find(nr=>nr.Title.trim().toLowerCase()===gt);Wt&&(pe=Wt)}}C(pe.WishListID),V(null)});return()=>{I(),A()}},[s,n,i]);const oe=async()=>{if(!t)return;if(!v.trim()){ne.error("A title is required");return}const I={title:v.trim(),description:w.trim()?w.trim():void 0,ownerUserId:S||null,visibility:N};try{y?(await gee(t,y.WishListID,I),ne.success("Wishlist updated")):(await mee(t,I),ne.success("Wishlist created")),g(!1),M(),P()}catch(A){ne.error(A instanceof Error?A.message:"Unable to save wishlist")}},te=async I=>{if(t)try{await yee(t,I),ne.success("Wishlist deleted"),P()}catch(A){ne.error(A instanceof Error?A.message:"Unable to delete wishlist")}},be=(I,A)=>{A?(V(A),R(A.Name),O(A.Details||""),B(A.TargetUrl||""),se(A.PriceMin||""),de(A.PriceMax||""),ye(A.Status)):J(),C(I.WishListID)},je=async()=>{if(!t||T===null)return;if(!F.trim()){ne.error("Item name is required");return}const I={name:F.trim(),details:L.trim()?L.trim():void 0,targetUrl:z.trim()?z.trim():void 0,priceMin:W===""?null:W,priceMax:X===""?null:X,status:fe};try{_?(await hN(t,T,_.WishListItemID,I),ne.success("Idea updated")):(await xee(t,T,I),ne.success("Idea added")),J(),P()}catch(A){ne.error(A instanceof Error?A.message:"Unable to save idea")}},Oe=async(I,A,K)=>{if(t)try{await hN(t,I,A,{status:K}),ne.success("Status updated"),P()}catch(pe){ne.error(pe instanceof Error?pe.message:"Unable to update status")}},Ie=async(I,A)=>{if(t)try{await vee(t,I,A),ne.success("Idea removed"),P()}catch(K){ne.error(K instanceof Error?K.message:"Unable to remove idea")}},Ye=async(I,A,K)=>{if(t)try{await bee(t,I,A,K),ne.success(K==="claim"?"Idea reserved":"Reservation cleared"),P()}catch(pe){ne.error(pe instanceof Error?pe.message:"Unable to update reservation")}},Qe=async I=>{if(t)try{const A=await wee(t,I.WishListID);c(K=>({...K,[I.WishListID]:A})),P(),await navigator.clipboard.writeText(A.shareUrl),ne.success("Share link copied to clipboard")}catch(A){ne.error(A instanceof Error?A.message:"Unable to generate share link")}},nt=async I=>{if(t)try{await kee(t,I.WishListID),c(A=>{const K={...A};return delete K[I.WishListID],K}),P(),ne.info("Share link revoked")}catch(A){ne.error(A instanceof Error?A.message:"Unable to revoke share link")}},$e=I=>{const A=l[I];return A?A.shareUrl:void 0},Ce=(I,A)=>{const K=statusBadgeClass(A.Status),pe=!!A.ClaimedByUserID,ge=A.PriceMin||A.PriceMax?(A.PriceMin||"")+(A.PriceMin&&A.PriceMax?" - ":"")+(A.PriceMax||""):"";return o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-4 dark:border-neutral-700 dark:bg-neutral-900/40",children:o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:A.Name}),o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium "+K,children:[o.jsx(Ti,{className:"h-3 w-3"})," ",Eee(A.Status)]}),pe&&A.claimedBy?o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-accent-100 px-2 py-0.5 text-xs font-medium text-accent-700 dark:bg-accent-900/30 dark:text-accent-200",children:["Reserved by ",A.claimedBy.FirstName||"someone"]}):null]}),A.Details?o.jsx("p",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-300",children:A.Details}):null,o.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-neutral-500 dark:text-neutral-400",children:[ge?o.jsx("span",{children:ge}):null,A.TargetUrl?o.jsxs("a",{href:A.TargetUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary-600 hover:underline dark:text-primary-300",children:[o.jsx(G0,{className:"h-3 w-3"})," View link"]}):null]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{onClick:()=>be(I,A),className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:o.jsx(K0,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>Oe(I.WishListID,A.WishListItemID,"PURCHASED"),className:"inline-flex items-center gap-2 rounded-xl border border-success-200 px-3 py-2 text-sm text-success-700 transition hover:bg-success-50 dark:border-success-500/40 dark:text-success-200",children:o.jsx(Ti,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>Ye(I.WishListID,A.WishListItemID,pe?"unclaim":"claim"),className:"inline-flex items-center gap-2 rounded-xl border border-warning-200 px-3 py-2 text-sm text-warning-700 transition hover:bg-warning-50 dark:border-warning-500/40 dark:text-warning-200",children:pe?o.jsx(Pk,{className:"h-4 w-4"}):o.jsx(W6,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>Ie(I.WishListID,A.WishListItemID),className:"inline-flex items-center gap-2 rounded-xl border border-error-200 px-3 py-2 text-sm text-error-600 transition hover:bg-error-50 dark:border-error-500/40 dark:text-error-200",children:o.jsx(ri,{className:"h-4 w-4"})})]})]})},A.WishListItemID)},Fe=I=>{const A=$e(I.WishListID);return A?o.jsxs("div",{className:"mt-4 rounded-xl border border-primary-200 bg-primary-50 px-4 py-3 text-sm text-primary-700 dark:border-primary-500/40 dark:bg-primary-900/30 dark:text-primary-200",children:[o.jsx("p",{className:"font-medium",children:"Share link"}),o.jsx("p",{className:"mt-1 break-words text-xs",children:A}),o.jsxs("div",{className:"mt-2 flex gap-2",children:[o.jsxs("button",{onClick:()=>navigator.clipboard.writeText(A).then(()=>ne.success("Link copied")),className:"inline-flex items-center gap-2 rounded-xl border border-primary-300 px-3 py-2 text-xs font-medium text-primary-600 transition hover:bg-primary-100 dark:border-primary-500/40 dark:text-primary-200",children:[o.jsx(ev,{className:"h-3 w-3"})," Copy"]}),o.jsxs("button",{onClick:()=>window.open(A,"_blank","noopener"),className:"inline-flex items-center gap-2 rounded-xl border border-primary-300 px-3 py-2 text-xs font-medium text-primary-600 transition hover:bg-primary-100 dark:border-primary-500/40 dark:text-primary-200",children:[o.jsx(G0,{className:"h-3 w-3"})," Open"]})]})]}):null},D=I=>{const A=ie.find(ge=>ge.id===I.OwnerUserID),K=I.Visibility==="PARENTS"?"Parents only":I.Visibility==="LINK"?"Shareable link":"Family",pe=I.Visibility==="PARENTS"?"text-xs inline-flex items-center gap-1 rounded-full bg-secondary-100 px-2 py-0.5 text-secondary-700 dark:bg-secondary-900/30 dark:text-secondary-200":I.Visibility==="LINK"?"text-xs inline-flex items-center gap-1 rounded-full bg-primary-100 px-2 py-0.5 text-primary-700 dark:bg-primary-900/30 dark:text-primary-200":"text-xs inline-flex items-center gap-1 rounded-full bg-neutral-100 px-2 py-0.5 text-neutral-700 dark:bg-neutral-700/40 dark:text-neutral-200";return o.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-6 shadow-card transition hover:shadow-card-hover dark:border-neutral-700 dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:I.Title}),I.Description?o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1",children:I.Description}):null,o.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[o.jsx("span",{className:pe,children:K}),A?o.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-primary-100 px-3 py-1 text-sm font-medium text-primary-700 dark:bg-primary-900/30 dark:text-primary-200",children:[o.jsx(Ya,{className:"h-4 w-4"})," ",A.name]}):null]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{onClick:()=>be(I),className:"inline-flex items-center gap-2 rounded-xl border border-primary-200 px-3 py-2 text-sm font-medium text-primary-600 transition hover:bg-primary-50 dark:border-primary-500/40 dark:text-primary-200 dark:hover:bg-primary-900/30",children:[o.jsx(tr,{className:"h-4 w-4"})," Idea"]}),o.jsxs("button",{onClick:()=>{const ge=$e(I.WishListID);ge?navigator.clipboard.writeText(ge).then(()=>ne.success("Share link copied")):Qe(I)},className:"inline-flex items-center gap-2 rounded-xl bg-secondary-600 px-3 py-2 text-sm font-medium text-white transition hover:bg-secondary-500",children:[o.jsx(zu,{className:"h-4 w-4"})," Share"]}),I.shareLinkActive?o.jsxs("button",{onClick:()=>nt(I),className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(Pk,{className:"h-4 w-4"})," Revoke"]}):null,o.jsxs("button",{onClick:()=>{b(I),x(I.Title),k(I.Description||""),E(I.OwnerUserID||""),j(I.Visibility),g(!0)},className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(K0,{className:"h-4 w-4"})," Edit"]}),o.jsxs("button",{onClick:()=>te(I.WishListID),className:"inline-flex items-center gap-2 rounded-xl border border-error-200 px-3 py-2 text-sm font-medium text-error-600 transition hover:bg-error-50 dark:border-error-500/40 dark:text-error-200",children:[o.jsx(ri,{className:"h-4 w-4"})," Remove"]})]})]}),o.jsx("div",{className:"mt-6 space-y-3",children:I.items.length?I.items.map(ge=>Ce(I,ge)):o.jsx("div",{className:"rounded-xl border border-dashed border-neutral-300 p-4 text-sm text-neutral-500 dark:border-neutral-700 dark:text-neutral-400",children:"No ideas yet. Add the first gift to get started!"})}),Fe(I)]},I.WishListID)},Q=()=>f?o.jsx("div",{className:"min-h-[30vh] flex items-center justify-center",children:o.jsx(dn,{className:"h-8 w-8 animate-spin text-primary-500"})}):i.length?o.jsx("div",{className:"grid grid-cols-1 gap-5 xl:grid-cols-2",children:i.map(D)}):o.jsxs("div",{className:"rounded-2xl border border-dashed border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 p-12 text-center",children:[o.jsx(Pa,{className:"mx-auto h-12 w-12 text-primary-500"}),o.jsx("h2",{className:"mt-4 text-xl font-semibold text-neutral-900 dark:text-white",children:"No wishlists yet"}),o.jsx("p",{className:"mt-2 text-neutral-600 dark:text-neutral-400",children:"Start a list for birthdays, holidays, or just to remember favorites."}),o.jsxs("button",{onClick:()=>{M(),g(!0)},className:"mt-4 inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-white shadow-sm transition hover:bg-primary-500",children:[o.jsx(tr,{className:"h-5 w-5"})," Create your first wishlist"]})]});return r?o.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:o.jsx(dn,{className:"h-8 w-8 animate-spin text-primary-500"})}):!t||!e?o.jsxs("div",{className:"max-w-3xl mx-auto py-16 text-center",children:[o.jsx(Pa,{className:"mx-auto h-12 w-12 text-primary-500"}),o.jsx("h1",{className:"mt-4 text-2xl font-semibold text-neutral-900 dark:text-white",children:"Wishlists live inside a household"}),o.jsx("p",{className:"mt-2 text-neutral-600 dark:text-neutral-400",children:"Join or create a family to start collecting gift ideas and favorites."})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white flex items-center gap-3",children:[o.jsx(Pa,{className:"h-8 w-8 text-primary-500"})," Family Wishlists"]}),o.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Collect gift ideas, clothing sizes, and favorites so celebrations are easier for everyone."})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:o.jsxs("button",{onClick:()=>{M(),g(!0)},className:"inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-white shadow-sm transition hover:bg-primary-500",children:[o.jsx(tr,{className:"h-5 w-5"})," New wishlist"]})})]}),u?o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-4 py-3 text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:u}):null,Q(),p?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-white shadow-2xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:y?"Edit wishlist":"Create wishlist"}),o.jsx("button",{onClick:()=>{g(!1),M()},className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:""})]}),o.jsxs("div",{className:"space-y-4 p-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Title"}),o.jsx("input",{value:v,onChange:I=>x(I.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Description"}),o.jsx("textarea",{value:w,onChange:I=>k(I.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Owner"}),o.jsxs("select",{value:S,onChange:I=>E(I.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",children:[o.jsx("option",{value:"",children:"No specific owner"}),ie.map(I=>o.jsx("option",{value:I.id,children:I.name},I.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Visibility"}),o.jsx("div",{className:"mt-2 space-y-2",children:visibilityOptions.map(I=>o.jsxs("label",{className:"flex cursor-pointer flex-col rounded-xl border px-3 py-3 transition "+(N===I.value?"border-primary-400 bg-primary-50 dark:border-primary-400/40 dark:bg-primary-900/30":"border-neutral-200 dark:border-neutral-700"),children:[o.jsxs("span",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-semibold text-neutral-900 dark:text-white",children:I.label}),o.jsx("input",{type:"radio",checked:N===I.value,onChange:()=>j(I.value)})]}),o.jsx("span",{className:"mt-1 text-xs text-neutral-500 dark:text-neutral-400",children:I.description})]},I.value))})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 border-t border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>{g(!1),M()},className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:oe,className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-500",children:"Save"})]})]})}):null,T!==null?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-white shadow-2xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:_?"Edit idea":"Add idea"}),o.jsx("button",{onClick:()=>J(),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:""})]}),o.jsxs("div",{className:"space-y-4 p-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Name"}),o.jsx("input",{value:F,onChange:I=>R(I.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Details"}),o.jsx("textarea",{value:L,onChange:I=>O(I.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Link"}),o.jsx("input",{value:z,onChange:I=>B(I.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Min price"}),o.jsx("input",{value:W,onChange:I=>se(I.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Max price"}),o.jsx("input",{value:X,onChange:I=>de(I.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Status"}),o.jsxs("select",{value:fe,onChange:I=>ye(I.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",children:[o.jsx("option",{value:"IDEA",children:"Idea"}),o.jsx("option",{value:"RESERVED",children:"Reserved"}),o.jsx("option",{value:"PURCHASED",children:"Purchased"})]})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 border-t border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>J(),className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:je,className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-500",children:"Save"})]})]})}):null]})},Nee=async(e,t)=>(await q.put(`/users/${e}`,t)).data,jee=async(e,t)=>{const r=new FormData;return r.append("profilePhoto",t),(await q.post(`/users/${e}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},Cee=async e=>{await q.delete(`/users/${e}`)},Up="/api/screen-time";async function Tee(e){return(await fetch(`${Up}/connect/${e}`,{method:"POST"})).json()}async function Aee(){return(await fetch(`${Up}/children`)).json()}async function Dee(e){return(await fetch(`${Up}/grants`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}async function Ree(e){return(await fetch(`${Up}/ledger?childId=${encodeURIComponent(e)}`)).json()}function _ee(){const[e,t]=m.useState([]),[r,n]=m.useState([]),[s,i]=m.useState(!1),[a,l]=m.useState(null),c=m.useCallback(async()=>{i(!0),l(null);try{const h=await Aee();t(h)}catch(h){l(h.message||"Failed to fetch children")}finally{i(!1)}},[]),u=m.useCallback(async h=>{i(!0),l(null);try{const p=await Ree(h);n(p)}catch(p){l(p.message||"Failed to fetch ledger")}finally{i(!1)}},[]),d=m.useCallback(async(h,p,g)=>{i(!0),l(null);try{const y=await Dee({childId:h,minutesDelta:p,idempotencyKey:g});return await u(h),y}catch(y){throw l(y.message||"Failed to grant screen time"),y}finally{i(!1)}},[u]),f=m.useCallback(async h=>{i(!0),l(null);try{const p=await Tee(h);return await c(),p}catch(p){throw l(p.message||"Failed to connect account"),p}finally{i(!1)}},[c]);return{children:e,ledger:r,loading:s,error:a,loadChildren:c,loadLedger:u,grant:d,connect:f}}function Iee(){const{children:e,ledger:t,loading:r,error:n,loadChildren:s,loadLedger:i,grant:a,connect:l}=_ee(),[c,u]=m.useState(null),[d,f]=m.useState(0),[h,p]=m.useState("APPLE");return m.useEffect(()=>{s()},[s]),m.useEffect(()=>{c&&i(c)},[c,i]),o.jsxs("div",{className:"rounded-2xl shadow-card bg-white dark:bg-neutral-800 p-6 mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4",children:"Screen Time Management"}),n&&o.jsx("div",{className:"text-error-600 bg-error-50 dark:bg-error-900/30 rounded-xl px-4 py-2 mb-4",children:n}),o.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Provider"}),o.jsxs("select",{value:h,onChange:g=>p(g.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"APPLE",children:"Apple"}),o.jsx("option",{value:"GOOGLE",children:"Google"})]})]}),o.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",onClick:()=>l(h),disabled:r,children:"Connect Account"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Child"}),r?o.jsx("div",{className:"text-neutral-500",children:"Loading children..."}):e.length===0?o.jsx("div",{className:"text-neutral-500",children:"No children found. Please connect an account or add children."}):o.jsxs("select",{value:c||"",onChange:g=>u(g.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"",children:"Select..."}),e.map(g=>o.jsx("option",{value:g.id,children:g.name||g.id},g.id))]})]}),o.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:items-center gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Minutes"}),o.jsx("input",{type:"number",value:d,onChange:g=>f(Number(g.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),o.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-green-500 hover:bg-green-600 rounded-xl mt-2 md:mt-0",onClick:()=>c&&a(c,d),disabled:r||!c,children:"Grant"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-white mb-2",children:"Ledger"}),r?o.jsx("div",{className:"text-neutral-500",children:"Loading ledger..."}):t.length===0?o.jsx("div",{className:"text-neutral-500",children:"No ledger entries found."}):o.jsxs("table",{className:"w-full border rounded-xl overflow-hidden",children:[o.jsx("thead",{className:"bg-neutral-100 dark:bg-neutral-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border px-2 py-1 text-left",children:"Date"}),o.jsx("th",{className:"border px-2 py-1 text-left",children:"Minutes"}),o.jsx("th",{className:"border px-2 py-1 text-left",children:"Status"})]})}),o.jsx("tbody",{children:t.map(g=>o.jsxs("tr",{className:"bg-white dark:bg-neutral-800",children:[o.jsx("td",{className:"border px-2 py-1",children:g.awardedAt||g.appliedAt||g.createdAt}),o.jsx("td",{className:"border px-2 py-1",children:g.screenMinutes||g.minutesDelta}),o.jsx("td",{className:"border px-2 py-1",children:g.status||"APPLIED"})]},g.id))})]})]})]})}const mN=()=>{const{user:e,logout:t}=Ft(),r=$n(),n=Tn(),{rewardMode:s}=zr(),[i,a]=m.useState(!1),[l,c]=m.useState(!1),[u,d]=m.useState(!1),[f,h]=m.useState(null),[p,g]=m.useState(!0),[y,b]=m.useState(null),[v,x]=m.useState(!1),[w,k]=m.useState(!1),[S,E]=m.useState([]);m.useEffect(()=>{x(window.matchMedia("(display-mode: standalone)").matches),k(/iPad|iPhone|iPod/.test(navigator.userAgent))},[]),m.useEffect(()=>{(async()=>{try{g(!0);const F=await q.get("/vapid-public-key");if(h(F.data.publicKey),"serviceWorker"in navigator&&navigator.serviceWorker.ready){const L=await(await navigator.serviceWorker.ready).pushManager.getSubscription();d(!!L)}}catch(F){console.error("Error fetching VAPID key or checking subscription:",F),b(F.message||"Failed to load push notification status.")}finally{g(!1)}})()},[]),m.useEffect(()=>{k_().then(E).catch(F=>{console.error("Failed to fetch integration status",F),ne.error("Could not load integration status.")});const V=new URLSearchParams(n.search);V.get("integration")==="instacart_success"?(ne.success("Successfully connected to Instacart!"),r("/settings",{replace:!0})):V.get("integration")==="shipt_success"?(ne.success("Successfully connected to Shipt!"),r("/settings",{replace:!0})):V.get("integration")==="kroger_success"&&(ne.success("Successfully connected to Kroger!"),r("/settings",{replace:!0}))},[n.search,r]);const N=m.useCallback(async()=>{},[f]),j=m.useCallback(async()=>{},[]),T=async V=>{try{V.toUpperCase()==="INSTACART"?(await eZ(),ne.success("Disconnected from Instacart."),E(F=>F.filter(R=>R!=="INSTACART"))):V.toUpperCase()==="SHIPT"?(await disconnectShipt(),ne.success("Disconnected from Shipt."),E(F=>F.filter(R=>R!=="SHIPT"))):V.toUpperCase()==="KROGER"&&(await disconnectKroger(),ne.success("Disconnected from Kroger."),E(F=>F.filter(R=>R!=="KROGER")))}catch{ne.error(`Failed to disconnect from ${V}.`)}},C=m.useCallback(async()=>{var F,R;const V=(e==null?void 0:e.id)??(e==null?void 0:e.UserID)??null;if(!V){ne.error("Unable to determine which account to delete.");return}c(!0);try{await Cee(String(V)),ne.success("Your account has been deleted."),a(!1),await t(),r("/login",{replace:!0})}catch(L){console.error("Failed to delete account",L);const O=((R=(F=L==null?void 0:L.response)==null?void 0:F.data)==null?void 0:R.error)||(L==null?void 0:L.message)||"Failed to delete account.";ne.error(O)}finally{c(!1)}},[t,r,e]),_=m.useCallback(async()=>{await t(),r("/login",{replace:!0})},[t,r]);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:"Settings"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Manage your account preferences and settings"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1",children:[o.jsx("nav",{className:"space-y-1",children:o.jsxs(kr,{to:"/profile",className:"flex items-center px-4 py-3 text-neutral-900 dark:text-white bg-white dark:bg-neutral-800 rounded-2xl shadow-card",children:[o.jsx(z6,{className:"h-5 w-5 text-primary-500"}),o.jsx("span",{className:"ml-3",children:"Profile"}),o.jsx(Jx,{className:"ml-auto h-5 w-5 text-neutral-400"})]})}),o.jsxs("div",{className:"mt-6 space-y-4",children:[o.jsxs("button",{type:"button",onClick:_,className:"flex items-center w-full px-4 py-3 text-neutral-700 dark:text-neutral-300 hover:bg-white dark:hover:bg-neutral-800 rounded-2xl transition-colors",children:[o.jsx(R2,{className:"h-5 w-5 text-neutral-500"}),o.jsx("span",{className:"ml-3",children:"Sign out"})]}),o.jsxs("button",{onClick:()=>a(!0),disabled:l,className:"flex items-center w-full px-4 py-3 text-error-600 hover:bg-error-50 dark:hover:bg-error-900/30 rounded-2xl transition-colors disabled:cursor-not-allowed disabled:opacity-70",children:[o.jsx(Ok,{className:"h-5 w-5"}),o.jsx("span",{className:"ml-3",children:"Delete Account"})]})]})]}),o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs("section",{id:"push-notifications",className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-6",children:"Push Notifications"}),w&&!v?o.jsxs("div",{children:[o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"To enable push notifications, you need to add this web app to your Home Screen."}),o.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400 mt-2",children:["Tap the ",o.jsx("span",{className:"font-bold",children:"Share"})," button ( ",o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-box-arrow-up inline-block",viewBox:"0 0 16 16",children:[o.jsx("path",{"fill-rule":"evenodd",d:"M3.5 6a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 1 0-1h2A1.5 1.5 0 0 1 14 6.5v8a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-8A1.5 1.5 0 0 1 3.5 5h2a.5.5 0 0 1 0 1h-2z"}),o.jsx("path",{"fill-rule":"evenodd",d:"M7.646.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 1.707V10.5a.5.5 0 0 1-1 0V1.707L5.354 3.854a.5.5 0 1 1-.708-.708l3-3z"})]})," ) in Safari and then select 'Add to Home Screen'."]})]}):p?o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Loading push notification status..."}):y?o.jsx("p",{className:"text-red-500",children:y}):o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{htmlFor:"push-toggle",className:"text-neutral-700 dark:text-neutral-300",children:"Enable Push Notifications"}),o.jsx("input",{type:"checkbox",id:"push-toggle",checked:u,onChange:()=>{u?j():N()},className:`relative w-10 h-5 transition-colors duration-200 ease-in-out bg-neutral-200 dark:bg-neutral-700 rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 cursor-pointer appearance-none
                  checked:bg-primary-500 checked:after:translate-x-full checked:after:border-white
                  after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:h-4 after:w-4 after:rounded-full after:bg-white after:shadow-md after:transition-transform after:duration-200 after:ease-in-out`})]})]}),o.jsxs("section",{id:"integrations",className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-6",children:"Integrations"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:"Instacart"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Connect your Instacart account to add shopping lists directly to your cart."})]}),S.includes("INSTACART")?o.jsx("button",{onClick:()=>T("INSTACART"),className:"px-4 py-2 text-sm font-medium text-white bg-red-500 hover:bg-red-600 rounded-xl",children:"Disconnect"}):o.jsx("a",{href:`${q.defaults.baseURL}/integrations/instacart/connect`,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",children:"Connect"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:"Shipt"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Connect your Shipt account to add shopping lists directly to your cart."})]}),S.includes("SHIPT")?o.jsx("button",{onClick:()=>T("SHIPT"),className:"px-4 py-2 text-sm font-medium text-white bg-red-500 hover:bg-red-600 rounded-xl",children:"Disconnect"}):o.jsx("a",{href:`${q.defaults.baseURL}/integrations/shipt/connect`,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",children:"Connect"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:"Kroger"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Connect your Kroger account to add shopping lists directly to your cart."})]}),S.includes("KROGER")?o.jsx("button",{onClick:()=>T("KROGER"),className:"px-4 py-2 text-sm font-medium text-white bg-red-500 hover:bg-red-600 rounded-xl",children:"Disconnect"}):o.jsx("a",{href:`${q.defaults.baseURL}/integrations/kroger/connect`,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",children:"Connect"})]})]})]}),(s==="screenTime"||s==="hybrid")&&o.jsx("section",{id:"screen-time",className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:o.jsx(Iee,{})})]})]}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4",children:o.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"mb-4 flex items-center",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-error-100 text-error-600 dark:bg-error-900/40 dark:text-error-300",children:o.jsx(Ok,{className:"h-5 w-5"})}),o.jsx("h2",{className:"ml-3 text-lg font-semibold text-neutral-900 dark:text-white",children:"Delete account"})]}),o.jsx("p",{className:"mb-6 text-sm text-neutral-600 dark:text-neutral-300",children:"Deleting your FamConomy account removes your personal data and access. This action cannot be undone."}),o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[o.jsx("button",{type:"button",onClick:()=>a(!1),className:"w-full rounded-xl border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-700 transition-colors hover:bg-neutral-50 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700/60 sm:w-auto",disabled:l,children:"Cancel"}),o.jsx("button",{type:"button",onClick:C,className:"w-full rounded-xl bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-red-500 dark:hover:bg-red-400 sm:w-auto",disabled:l,children:l?"Deleting...":"Delete account"})]})]})})]})},Mee=xr("profile-page"),gN=()=>{const{user:e,setUser:t}=Ft(),[r,n]=m.useState((e==null?void 0:e.firstName)||""),[s,i]=m.useState((e==null?void 0:e.lastName)||""),[a,l]=m.useState((e==null?void 0:e.email)||""),[c,u]=m.useState((e==null?void 0:e.phoneNumber)||"");m.useEffect(()=>{if(e){const[h,...p]=e.fullName.split(" ");n(h||""),i(p.join(" ")||""),l(e.email),u(e.phoneNumber||"")}},[e]);const d=async()=>{if(!e)return;const h={FirstName:r,LastName:s,Email:a,PhoneNumber:c};try{const p=await Nee(e.id,h);t(p),alert("Profile updated successfully!")}catch(p){Mee.error("Failed to update profile:",p.response||p),alert("Failed to update profile.")}},f=async h=>{if(h.target.files&&h.target.files[0]&&e)try{const p=await jee(e.id,h.target.files[0]);t(p),alert("Profile photo updated successfully!")}catch{alert("Failed to upload profile photo.")}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(kr,{to:"/settings",className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:o.jsx(op,{size:24})}),o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Profile"})]}),o.jsxs("section",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-6",children:"Profile Information"}),o.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[o.jsx("img",{src:(e==null?void 0:e.profilePhotoUrl)||"https://i.pravatar.cc/100",alt:"Profile",className:"h-20 w-20 rounded-full object-cover"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Profile Photo"}),o.jsx("input",{type:"file",id:"profile-photo-upload",className:"hidden",onChange:f}),o.jsx("label",{htmlFor:"profile-photo-upload",className:"cursor-pointer text-sm text-primary-500 hover:text-primary-600",children:"Upload new photo"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Full Name"}),o.jsx("input",{type:"text",value:`${r} ${s}`,onChange:h=>{const[p,...g]=h.target.value.split(" ");n(p||""),i(g.join(" ")||"")},className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Email Address"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"email",value:a,onChange:h=>l(h.target.value),className:"flex-1 px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),o.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-success-100 text-success-800 dark:bg-success-900/30 dark:text-success-400",children:"Verified"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Phone Number"}),o.jsx("input",{type:"tel",value:c,onChange:h=>u(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),o.jsx("div",{className:"pt-4 border-t border-neutral-200 dark:border-neutral-700",children:o.jsx("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Save Changes"})})]})]})]})},lI=({size:e="md",color:t="white"})=>{const r={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return o.jsx("div",{className:"flex justify-center items-center",children:o.jsx("div",{className:`animate-spin rounded-full border-2 border-t-transparent ${r[e]}`,style:{borderColor:`${t} transparent transparent transparent`}})})},Oee=()=>{const[e,t]=m.useState(""),[r,n]=m.useState(""),[s,i]=m.useState(!1),{login:a,loginWithProvider:l,isLoading:c,error:u}=Ft(),d=$n(),f=async h=>{h.preventDefault();try{await a({email:e,password:r}),d("/app")}catch(p){const g=p.message||"";g.includes("User not found")?d("/join",{state:{email:e,password:r}}):g.includes("Invalid credentials")&&setError("Invalid email or password.")}};return o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[u&&o.jsx("div",{className:"p-3 bg-error-50 border border-error-200 text-error-700 rounded-md text-sm",children:u}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Email address"}),o.jsx("input",{id:"email",type:"email",required:!0,value:e,onChange:h=>t(h.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"admin@example.com"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",type:s?"text":"password",required:!0,value:r,onChange:h=>n(h.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:""}),o.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-2 text-neutral-500",children:s?o.jsx(U6,{size:18}):o.jsx(H6,{size:18})})]}),o.jsx("div",{className:"flex justify-end mt-1",children:o.jsx(kr,{to:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-700",children:"Forgot password?"})})]}),o.jsx("button",{type:"submit",disabled:c,className:"w-full bg-primary-600 hover:bg-primary-700 text-white rounded-md px-4 py-3 font-medium transition-colors disabled:opacity-70",children:c?o.jsx(lI,{size:"sm"}):"Sign in"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-neutral-300"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 text-neutral-500 bg-white",children:"Or continue with"})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{type:"button",onClick:()=>l("google"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:[o.jsx("path",{d:"M21.4 10.2c0-.7-.1-1.4-.2-2.1h-9.2v4h5.2c-.2 1.3-1 2.5-2.2 3.3v2.7h3.5c2-1.9 3.2-4.7 3.2-7.9z"}),o.jsx("path",{d:"M12 21c2.8 0 5.2-1 6.9-2.6l-3.5-2.7c-.9.6-2.1 1-3.4 1-2.6 0-4.8-1.8-5.6-4.2H2.9v2.8C4.7 18.5 8.1 21 12 21z"}),o.jsx("path",{d:"M6.4 12.9c-.1-.6-.1-1.2 0-1.8V8.3H2.9c-1.5 3-1.5 6.4 0 9.4l3.5-2.8z"}),o.jsx("path",{d:"M12 3.9c1.5 0 2.9.5 3.9 1.5l3.1-3.1C17.2.6 14.8 0 12 0 8.1 0 4.7 2.5 2.9 6.2l3.5 2.8c.8-2.4 3-4.1 5.6-4.1z"})]}),"Google"]}),o.jsxs("button",{type:"button",onClick:()=>l("facebook"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:o.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})}),"Facebook"]}),o.jsxs("button",{type:"button",onClick:()=>l("apple"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:o.jsx("path",{d:"M12 20.94c1.5 0 2.75-1.12 2.75-2.63 0-1.5-1.25-2.62-2.75-2.62s-2.75 1.12-2.75 2.62c0 1.51 1.25 2.63 2.75 2.63zM12 4.38c-2.25 0-4.25 1.5-4.25 3.5 0 1.5 1 2.62 2.25 3.12-1.25.5-2.25 1.62-2.25 3.12 0 2 2 3.5 4.25 3.5s4.25-1.5 4.25-3.5c0-1.5-1-2.62-2.25-3.12 1.25-.5 2.25-1.62 2.25-3.12 0-2-2-3.5-4.25-3.5z"})}),"Apple"]}),o.jsxs("button",{type:"button",onClick:()=>l("microsoft"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:[o.jsx("rect",{x:"2",y:"2",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"13",y:"2",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"2",y:"13",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"13",y:"13",width:"9",height:"9",rx:"1"})]}),"Microsoft"]})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-sm text-neutral-600",children:["Don't have an account? "," ",o.jsx(kr,{to:"/join",className:"font-medium text-primary-600 hover:text-primary-500",children:"Join FamConomy"})]})})]})},Pee=()=>o.jsxs("div",{className:"min-h-screen bg-neutral-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(Ga,{size:"lg"})}),o.jsx("p",{className:"mt-2 text-center text-sm text-neutral-600",children:"Sign in to your account to access the dashboard"})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsx("div",{className:"bg-white py-8 px-4 shadow-card sm:rounded-lg sm:px-10",children:o.jsx(Oee,{})})})]}),Lee=()=>{var E,N;const[e]=qh(),t=$n(),{login:r,loginWithProvider:n}=Ft(),s=Tn(),[i,a]=m.useState(((E=s.state)==null?void 0:E.email)||""),[l,c]=m.useState(((N=s.state)==null?void 0:N.password)||""),[u,d]=m.useState(""),[f,h]=m.useState(""),[p,g]=m.useState(""),[y,b]=m.useState(null),[v,x]=m.useState(!1),[w,k]=m.useState(!1);m.useEffect(()=>{const j=e.get("token");j&&(x(!0),g("Checking invitation..."),(async()=>{try{const C=await q.get(`/invitations/details?token=${j}`),{email:_}=C.data;(await q.get(`/auth/check-email?email=${_}`)).data.exists?(g("You already have an account. Please log in to accept the invitation."),t("/login",{state:{email:_,from:s}})):(a(_),k(!0),g("Welcome to the family! Please complete your registration."))}catch(C){const _=C instanceof Error?C.message:"Failed to process invitation.";b(_),g(`Error: ${_}`)}})())},[e,t,s]);const S=async j=>{j.preventDefault(),b(null),g("");try{await q.post("/auth/register",{email:i,password:l,firstName:u,lastName:f}),g("Registration successful! Redirecting..."),await r({email:i,password:l}),v&&w?t("/",{replace:!0}):t("/onboarding",{replace:!0})}catch(T){const C=T instanceof Error?T.message:"Registration failed.";b(C),g(`Registration failed: ${C}`)}};return o.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 p-8 rounded-lg shadow-lg text-center w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-6",children:v&&w?"Welcome to the Family!":"Join FamConomy"}),p&&o.jsx("p",{className:`mb-4 ${y?"text-red-500":"text-green-500"}`,children:p}),(!v||w||y)&&o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[o.jsx("div",{children:o.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:j=>a(j.target.value),required:!0,className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:v&&w})}),o.jsx("div",{children:o.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:j=>c(j.target.value),required:!0,className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})}),o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"First Name",value:u,onChange:j=>d(j.target.value),required:!0,className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})}),o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"Last Name",value:f,onChange:j=>h(j.target.value),required:!0,className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})}),o.jsx("button",{type:"submit",className:"w-full bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Register"})]}),o.jsxs("div",{className:"relative mt-6",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-neutral-300 dark:border-neutral-600"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 text-neutral-500 dark:text-neutral-400 bg-white dark:bg-neutral-800",children:"Or continue with"})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[o.jsxs("button",{type:"button",onClick:()=>n("google"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:[o.jsx("path",{d:"M21.4 10.2c0-.7-.1-1.4-.2-2.1h-9.2v4h5.2c-.2 1.3-1 2.5-2.2 3.3v2.7h3.5c2-1.9 3.2-4.7 3.2-7.9z"}),o.jsx("path",{d:"M12 21c2.8 0 5.2-1 6.9-2.6l-3.5-2.7c-.9.6-2.1 1-3.4 1-2.6 0-4.8-1.8-5.6-4.2H2.9v2.8C4.7 18.5 8.1 21 12 21z"}),o.jsx("path",{d:"M6.4 12.9c-.1-.6-.1-1.2 0-1.8V8.3H2.9c-1.5 3-1.5 6.4 0 9.4l3.5-2.8z"}),o.jsx("path",{d:"M12 3.9c1.5 0 2.9.5 3.9 1.5l3.1-3.1C17.2.6 14.8 0 12 0 8.1 0 4.7 2.5 2.9 6.2l3.5 2.8c.8-2.4 3-4.1 5.6-4.1z"})]}),"Google"]}),o.jsxs("button",{type:"button",onClick:()=>n("facebook"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:o.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})}),"Facebook"]}),o.jsxs("button",{type:"button",onClick:()=>n("apple"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:o.jsx("path",{d:"M12 20.94c1.5 0 2.75-1.12 2.75-2.63 0-1.5-1.25-2.62-2.75-2.62s-2.75 1.12-2.75 2.62c0 1.51 1.25 2.63 2.75 2.63zM12 4.38c-2.25 0-4.25 1.5-4.25 3.5 0 1.5 1 2.62 2.25 3.12-1.25.5-2.25 1.62-2.25 3.12 0 2 2 3.5 4.25 3.5s4.25-1.5 4.25-3.5c0-1.5-1-2.62-2.25-3.12 1.25-.5 2.25-1.62 2.25-3.12 0-2-2-3.5-4.25-3.5z"})}),"Apple"]}),o.jsxs("button",{type:"button",onClick:()=>n("microsoft"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:[o.jsx("rect",{x:"2",y:"2",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"13",y:"2",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"2",y:"13",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"13",y:"13",width:"9",height:"9",rx:"1"})]}),"Microsoft"]})]})]})})},st=[{label:"Next stop",action:"tour.advance",tone:"primary"},{label:"Skip tour",action:"tour.skip",tone:"secondary"}],cI=[{label:"Wrap up",action:"tour.finish",tone:"primary"},{label:"Start over",action:"tour.restart",tone:"secondary"}],Fee=[{id:"orientation",title:"Getting Around",intro:"Let me show you how the FamConomy home base is laid out.",steps:[{id:"welcome-intro",target:"body",placement:"center",disableBeacon:!0,message:"Welcome to FamConomy! I'll point out the spots that keep your crew organized.",suggestions:st,ensureSidebar:!1},{id:"orientation-sidebar",target:"#nav-dashboard",route:"/",message:"The sidebar is your launchpad. Dashboard brings you back to home at any time.",suggestions:st,ensureSidebar:!0},{id:"orientation-dashboard",target:"#dashboard-overview",route:"/",message:"Your dashboard summarizes today's wins, tasks, and quick jumps into each feature.",suggestions:st,ensureSidebar:!1}]},{id:"family",title:"Family Setup",intro:"Let's make sure everyone's invited and organized.",steps:[{id:"family-nav",target:"#nav-family",route:"/family",message:"Head to the Family hub to invite members, assign roles, and manage households.",suggestions:st,ensureSidebar:!0},{id:"family-members-panel",target:"#family-members-panel",route:"/family",message:"This panel lists everyone in your household along with their roles and access.",suggestions:st,ensureSidebar:!1}]},{id:"tasks",title:"Tasks & Gigs",intro:"Let's organize chores and rewards.",steps:[{id:"tasks-nav",target:"#nav-tasks",route:"/tasks",message:"Tasks keeps assignments organized by persongreat for quick check-ins.",suggestions:st,ensureSidebar:!0},{id:"tasks-board",target:"#tasks-board",route:"/tasks",message:"Create, assign, and review progress here. Tap a task to edit details or approve completions.",suggestions:st,ensureSidebar:!1},{id:"gigs-nav",target:"#nav-gigs",route:"/gigs",message:"Gigs layer in cadence, rewards, and who claims each responsibility.",suggestions:st,ensureSidebar:!0},{id:"gigs-board",target:"#gigs-board",route:"/gigs",message:"Use gigs to define repeating jobs, payouts, and claim rules for your crew.",suggestions:st,ensureSidebar:!1}]},{id:"money",title:"Finance & Shopping",intro:"Time to check on the family finances and lists.",steps:[{id:"budget-nav",target:"#nav-budget",route:"/budget",message:"The Finance area tracks allowance, savings goals, and spending trends.",suggestions:st,ensureSidebar:!0},{id:"budget-overview",target:"#budget-overview",route:"/budget",message:"Review categories, see progress, and plan upcoming expenses here.",suggestions:st,ensureSidebar:!1},{id:"shopping-nav",target:"#nav-shopping",route:"/shopping",message:"Shopping lists keep errands in sync so nothing gets missed.",suggestions:st,ensureSidebar:!0},{id:"shopping-lists",target:"#shopping-lists-panel",route:"/shopping",message:"Create lists, assign items, and check things off together in real time.",suggestions:st,ensureSidebar:!1}]},{id:"planning",title:"Plan & Communicate",intro:"Stay aligned with schedules and conversations.",steps:[{id:"calendar-nav",target:"#nav-calendar",route:"/calendar",message:"The shared calendar keeps practices, appointments, and reminders lined up.",suggestions:st,ensureSidebar:!0},{id:"calendar-board",target:"#calendar-board",route:"/calendar",message:"Switch between views, add events, and approve suggestions in this workspace.",suggestions:st,ensureSidebar:!1},{id:"messages-nav",target:"#nav-messages",route:"/messages",message:"Messages gather family chats, announcements, and assistant updates in one feed.",suggestions:st,ensureSidebar:!0},{id:"messages-thread",target:"#messages-thread",route:"/messages",message:"Use threads to keep conversations tidy. Pin important chats so everyone sees them.",suggestions:st,ensureSidebar:!1}]},{id:"reflection",title:"Journal & Feedback",intro:"Capture memories and share what's working.",steps:[{id:"journal-nav",target:"#nav-journal",route:"/journal",message:"The family journal is perfect for milestones, gratitude, and reflections.",suggestions:st,ensureSidebar:!0},{id:"journal-board",target:"#journal-board",route:"/journal",message:"Start entries, add comments, and keep private notes as needed.",suggestions:st,ensureSidebar:!1},{id:"feedback-entry",target:"#sidebar-feedback",route:"/",message:"Tap Feedback anytime to share ideas or flag bugseverything reaches the FamConomy team.",suggestions:st,ensureSidebar:!0}]},{id:"assistant",title:"LinZ at Your Side",intro:"Last stopyour co-pilot.",steps:[{id:"linz-toggle",target:"#linz-chat-toggle",route:"/",message:"Ping me from this buttonI can revisit parts of the tour or answer questions anytime.",suggestions:cI,ensureSidebar:!1}]}],Bee=[{id:"orientation-child",title:"Getting Started",intro:"Here's what matters most for you.",steps:[{id:"child-dashboard",target:"#nav-dashboard",route:"/",message:"Dashboard shows your day at a glancetasks, rewards, and quick wins.",suggestions:st,ensureSidebar:!0},{id:"child-dashboard-widgets",target:"#dashboard-overview",route:"/",message:"Jump into tasks, messages, or journal entries from these tiles.",suggestions:st,ensureSidebar:!1}]},{id:"child-tasks",title:"Tasks & Gigs",intro:"Stay on top of what's assigned to you.",steps:[{id:"child-tasks-nav",target:"#nav-tasks",route:"/tasks",message:"Tasks lists everything you need to complete. Filter by what's due next.",suggestions:st,ensureSidebar:!0},{id:"child-tasks-board",target:"#tasks-board",route:"/tasks",message:"Open a task to see notes, claim rewards, or mark it done.",suggestions:st,ensureSidebar:!1},{id:"child-gigs-nav",target:"#nav-gigs",route:"/gigs",message:"Gigs show repeating responsibilities and the rewards you can earn.",suggestions:st,ensureSidebar:!0},{id:"child-gigs-board",target:"#gigs-board",route:"/gigs",message:"Claim a gig when you are ready so everyone knows who's on it.",suggestions:st,ensureSidebar:!1}]},{id:"child-money",title:"Money & Shopping",intro:"Track your rewards and shared lists.",steps:[{id:"child-budget-nav",target:"#nav-budget",route:"/budget",message:"See allowances, savings goals, and how close you are to each reward.",suggestions:st,ensureSidebar:!0},{id:"child-budget-overview",target:"#budget-overview",route:"/budget",message:"Watch your progress bars climb as you complete gigs and save.",suggestions:st,ensureSidebar:!1},{id:"child-shopping-nav",target:"#nav-shopping",route:"/shopping",message:"Help with shopping listscheck items off or add what you need.",suggestions:st,ensureSidebar:!0},{id:"child-shopping-panel",target:"#shopping-lists-panel",route:"/shopping",message:"Each list shows who added the item and any notes.",suggestions:st,ensureSidebar:!1}]},{id:"child-communication",title:"Stay Connected",intro:"Keep in touch with family updates.",steps:[{id:"child-calendar-nav",target:"#nav-calendar",route:"/calendar",message:"Check the calendar to know what's coming up for the family.",suggestions:st,ensureSidebar:!0},{id:"child-calendar-board",target:"#calendar-board",route:"/calendar",message:"Tap any event to see details or reminders you need to follow.",suggestions:st,ensureSidebar:!1},{id:"child-messages-nav",target:"#nav-messages",route:"/messages",message:"Messages keep you in the loopshare updates or ask for help.",suggestions:st,ensureSidebar:!0},{id:"child-messages-thread",target:"#messages-thread",route:"/messages",message:"Reply in the thread so everyone stays on the same page.",suggestions:st,ensureSidebar:!1},{id:"child-journal-nav",target:"#nav-journal",route:"/journal",message:"Use the journal to celebrate wins or jot down what happened today.",suggestions:st,ensureSidebar:!0},{id:"child-journal-board",target:"#journal-board",route:"/journal",message:"Start a new entry or add reactions to a family moment.",suggestions:cI,ensureSidebar:!1}]}],zee=e=>{const t=e==="guardian"?"parent":e;return{welcomeMessage:t==="child"?"Nice work joining the family hub! Want me to walk you through the highlights?":"Welcome aboard! Ready for a quick guided tour of FamConomy? I can point out the big wins.",inviteMessage:"I can always revisit parts of the tour laterjust ask me for help.",modules:t==="child"?Bee:Fee}},yN={default:[{label:"Next stop",action:"tour.advance",tone:"primary"},{label:"Skip tour",action:"tour.skip",tone:"secondary"}],final:[{label:"Finish up",action:"tour.finish",tone:"primary"},{label:"Start over",action:"tour.restart",tone:"secondary"}]},Uee=[{label:"Let's do it",action:"tour.accept",tone:"primary"},{label:"Maybe later",action:"tour.dismiss",tone:"secondary"}],Hee=e=>`${e}-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,7)}`,xN=2e3,Vee=400,$ee="app-shell:openSidebar",Wee="app-shell:closeSidebar",Yee=e=>!e||e==="guardian"?"parent":e,Gee=e=>{if(e===!0)return{seen:!0,status:"completed"};if(typeof e=="object"&&e!==null){const t=e,r=typeof t.status=="string"?t.status:void 0,n=typeof t.value=="string"?t.value:void 0,s=r??n,i=typeof t.seenAt=="string"?t.seenAt:void 0;if(s==="completed"||s==="skipped")return{seen:!0,status:s,seenAt:i}}return{seen:!1}},uI=({familyId:e,userId:t,audience:r,offerTrigger:n=!1,extraSteps:s=[]})=>{const i=Yee(r),a=m.useMemo(()=>zee(i),[i]),l=m.useMemo(()=>yN.default,[]),c=m.useMemo(()=>yN.final,[]),u=m.useMemo(()=>a.modules.flatMap(Q=>Q.steps.map((I,A)=>({...I,moduleId:Q.id,sequenceId:`${Q.id}-${A}`,content:I.content??I.message}))),[a.modules]),d=m.useMemo(()=>s.map((D,Q)=>({...D,moduleId:D.moduleId??"extra",sequenceId:D.sequenceId??`extra-${Q}`,content:D.content??D.message??(typeof D.content=="string"?D.content:"")})),[s]),f=m.useMemo(()=>d.length?[...u,...d]:u,[u,d]),h=m.useMemo(()=>{const D=new Map;return a.modules.forEach(Q=>{D.set(Q.id,{intro:Q.intro,outro:Q.outro,title:Q.title})}),D},[a.modules]),[p,g]=m.useState(null),[y,b]=m.useState("unknown"),[v,x]=m.useState(!1),[w,k]=m.useState({run:!1,steps:f,stepIndex:0}),S=m.useRef(null),E=m.useRef(new Set),N=m.useRef(!1),j=m.useRef(null),T=m.useRef(null),C=m.useRef({}),_=C8(),V=$n(),F=Tn(),{appendLinZMessage:R,openChat:L,registerActionHandler:O}=li(),z=m.useMemo(()=>xr("onboarding-tour"),[]),B=m.useCallback(D=>{if(!_){z.log("openSidebar: controls unavailable, dispatching event",{delay:D}),typeof window<"u"&&window.dispatchEvent(new CustomEvent($ee,{detail:{delay:D??0}}));return}const Q=()=>{var I,A;z.log("openSidebar: activating controls"),(I=_.ensureSidebarExpanded)==null||I.call(_),_.isMobile&&(z.log("openSidebar: invoking openMobileMenu"),(A=_.openMobileMenu)==null||A.call(_))};D&&D>0?(z.log("openSidebar: scheduling with delay",{delay:D}),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{Q(),j.current=null},D)):(z.log("openSidebar: immediate activation"),Q())},[_,z]),W=m.useCallback(D=>{if(!_){z.log("closeSidebar: controls unavailable, dispatching event",{delay:D}),typeof window<"u"&&window.dispatchEvent(new CustomEvent(Wee,{detail:{delay:D??0}}));return}const Q=()=>{var I,A;z.log("closeSidebar: collapsing sidebar"),(I=_.setSidebarCollapsed)==null||I.call(_,!0),_.isMobile&&(z.log("closeSidebar: closing mobile menu"),(A=_.closeMobileMenu)==null||A.call(_))};D&&D>0?(z.log("closeSidebar: scheduling with delay",{delay:D}),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{Q(),j.current=null},D)):(z.log("closeSidebar: immediate"),Q())},[_,z]),se=m.useRef(null),X=m.useRef(null),de=m.useRef(null),fe=m.useCallback(()=>{se.current&&(clearTimeout(se.current),se.current=null),X.current&&(clearTimeout(X.current),X.current=null),de.current&&(de.current.classList.remove("tour-highlight"),de.current=null)},[]),ye=m.useCallback((D,Q=0)=>{if(typeof document>"u"||!(D!=null&&D.target))return;let I=null;if(typeof D.target=="string"){const A=D.target.trim();if(!A||A==="body")return;I=document.querySelector(A)}else D.target instanceof HTMLElement&&(I=D.target);I?(de.current&&de.current!==I&&de.current.classList.remove("tour-highlight"),de.current=I,I.classList.add("tour-highlight"),I.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})):Q<12&&(X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{ye(D,Q+1)},150))},[]),ie=m.useCallback((D,Q=0)=>{fe(),D!=null&&D.target&&(se.current&&clearTimeout(se.current),se.current=setTimeout(()=>{ye(D)},Math.max(Q,0)))},[fe,ye]),M=m.useCallback(()=>{if(!_)return z.log("isSidebarClosed: controls unavailable"),!0;const D={isMobile:_.isMobile,isMobileMenuOpen:_.isMobileMenuOpen,isSidebarCollapsed:_.isSidebarCollapsed};return z.log("isSidebarClosed: controls state",D),_.isMobile?!_.isMobileMenuOpen:_.isSidebarCollapsed},[_,z]),J=m.useCallback(D=>{const Q=f[D];if(!Q)return;const I=Q.ensureSidebar!==!1,A=_!=null&&_.isMobile?250:0,K=Q.route?Q.route.startsWith("/")?Q.route:"/"+Q.route:void 0;z.log("ensureStepContext: evaluating step context",{index:D,needsSidebar:I,route:K}),I?(z.log("ensureStepContext: opening sidebar for step",{index:D}),B()):(z.log("ensureStepContext: closing sidebar for step",{index:D}),W()),K&&F.pathname!==K?(T.current&&(clearTimeout(T.current),T.current=null),I?(z.log("ensureStepContext: delaying navigation for sidebar step",{targetRoute:K,delay:xN}),T.current=setTimeout(()=>{z.log("ensureStepContext: navigating to route",{targetRoute:K}),V(K),z.log("ensureStepContext: reopening sidebar after navigation",{reopenDelay:A}),B(A),ie(Q,200),T.current=null},xN)):(z.log("ensureStepContext: immediate navigation for content step",{targetRoute:K}),V(K),ie(Q,200))):ie(Q,I?200:120)},[W,_==null?void 0:_.isMobile,F.pathname,f,V,B,ie,z]),P=m.useCallback((D,Q="default")=>(D&&D.length?D:Q==="final"?c:l).map(A=>({id:Hee(A.action),label:A.label,action:A.action,payload:A.payload,tone:A.tone})),[l,c]),oe=m.useCallback(async D=>{if(!(!e||!t))try{await JQ([{familyId:e,userId:t,key:"onboarding.tour_seen",value:{status:D,seenAt:new Date().toISOString()},confidence:1,source:"onboarding-tour"}]),b(D),g(!0)}catch(Q){z.error("Failed to persist tour status",Q)}},[e,t,z]);m.useEffect(()=>{let D=!0;return(async()=>{if(!e||!t){D&&(g(!1),b("unknown"));return}try{const A=(await XQ(e,{userId:t,keys:["onboarding.tour_seen"]})).find(pe=>pe.key==="onboarding.tour_seen");if(!D)return;const K=Gee(A==null?void 0:A.value);g(K.seen),b(K.status??"unknown")}catch(I){z.error("Failed to fetch tour status",I),D&&(g(!0),b("unknown"))}})(),()=>{D=!1}},[e,t,z]),m.useEffect(()=>{k(D=>({...D,steps:f}))},[f]);const te=m.useCallback(D=>{if(!D||E.current.has(D))return;const Q=h.get(D);Q!=null&&Q.intro&&(E.current.add(D),R(Q.intro,{autoOpen:!0,suggestions:P(void 0,"default"),meta:{source:"tour",module:D,type:"intro"}}))},[h,R,P]),be=m.useCallback(D=>{const Q=f[D];if(!Q)return;J(D),te(Q.moduleId);const I=Q.message??(typeof Q.content=="string"?Q.content:"");if(!(I!=null&&I.trim()))return;const A=D===f.length-1,K=P(Q.suggestions,A?"final":"default");R(I,{autoOpen:!0,suggestions:K,meta:{source:"tour",step:Q.id??Q.sequenceId??D,module:Q.moduleId}})},[R,P,J,f,te]),je=m.useCallback(()=>{E.current.clear(),S.current=null,C.current={},fe(),j.current&&(clearTimeout(j.current),j.current=null),T.current&&(clearTimeout(T.current),T.current=null)},[fe]),Oe=m.useCallback((D=0)=>{if(!f.length)return;je();const Q=Math.max(0,Math.min(D,f.length-1));x(!0),k({run:!0,steps:f,stepIndex:Q})},[f,je]),Ie=m.useCallback(()=>{v&&(x(!1),k(D=>({...D,run:!1,stepIndex:0})),je(),oe("completed"),R("That's the grand tour! Ask me anytime if you want to revisit a section.",{autoOpen:!0,suggestions:P([{label:"Replay tour",action:"tour.restart",tone:"primary"},{label:"Ask a question",action:"chat.open",tone:"secondary"}],"final"),meta:{source:"tour",type:"complete"}}))},[R,P,v,oe,je]),Ye=m.useCallback(()=>{v&&(x(!1),k(D=>({...D,run:!1,stepIndex:0}))),je(),oe("skipped"),R("No problem! I'll be here if you want the walkthrough later.",{autoOpen:!0,suggestions:P([{label:"Start the tour",action:"tour.restart",tone:"primary"}],"default"),meta:{source:"tour",type:"skipped"}})},[R,P,v,oe,je]),Qe=m.useCallback(()=>{Oe(0)},[Oe]),nt=m.useCallback(()=>{const D=w.stepIndex+1;if(D>=f.length){Ie();return}const Q=f[D],I=(Q==null?void 0:Q.ensureSidebar)!==!1;I&&M()?(z.log("advanceStep: sidebar closed, attempting to open",{nextIndex:D}),B(),setTimeout(()=>{z.log("advanceStep: moving to next step after sidebar open attempt",{nextIndex:D}),k(A=>({...A,stepIndex:D}))},500)):(I||(z.log("advanceStep: closing sidebar for next step",{nextIndex:D}),W()),z.log("advanceStep: advancing immediately",{nextIndex:D}),k(A=>({...A,stepIndex:D})))},[W,Ie,f,w.stepIndex,M,B]),$e=m.useCallback(()=>{Oe(0)},[Oe]);m.useEffect(()=>{if(!w.run||!v)return;const D=w.stepIndex;S.current!==D&&(S.current=D,be(D))},[w.run,w.stepIndex,v,be]);const Ce=m.useCallback(()=>{N.current||p||(N.current=!0,L({greet:!1}),R(a.welcomeMessage,{autoOpen:!0,suggestions:P(Uee,"default"),meta:{source:"tour",type:"invite"}}),a.inviteMessage&&R(a.inviteMessage,{autoOpen:!1,meta:{source:"tour",type:"invite-followup"}}))},[R,P,p,L,a.inviteMessage,a.welcomeMessage]);m.useEffect(()=>{const D=[O("tour.accept",()=>{N.current=!0,Qe()}),O("tour.dismiss",()=>{N.current=!0,Ye()}),O("tour.offer",()=>{Ce()}),O("tour.advance",()=>{v?nt():Qe()}),O("tour.skip",()=>{Ye()}),O("tour.finish",()=>{Ie()}),O("tour.restart",()=>{$e()}),O("chat.open",()=>{L({greet:!0})})];return()=>{D.forEach(Q=>Q())}},[nt,Ie,v,Ce,O,$e,Ye,Qe]),m.useEffect(()=>{n&&p!==null&&(p||Ce())},[n,p,Ce]),m.useEffect(()=>()=>{x(!1),k(D=>({...D,run:!1,stepIndex:0})),je(),fe()},[fe,je]);const Fe=m.useCallback(D=>{const{status:Q,type:I,index:A,action:K}=D;if(z.log("handleJoyrideCallback: received event",{type:I,status:Q,index:A,action:K}),I==="error:target_not_found"){const pe=f[A],ge=(pe==null?void 0:pe.ensureSidebar)!==!1,gt=pe!=null&&pe.route?pe.route.startsWith("/")?pe.route:"/"+pe.route:void 0;if(!!(T.current&&gt&&F.pathname!==gt)){z.log("handleJoyrideCallback: navigation pending, waiting",{index:A,targetRoute:gt});return}const nr=ge&&M(),vt=C.current[A]??0;if(nr||vt<4){const Qt=vt+1;C.current[A]=Qt;const Xr=nr?Vee:600;z.log("handleJoyrideCallback: retrying step",{index:A,attempt:Qt,sidebarClosed:nr,delay:Xr}),J(A),setTimeout(()=>{z.log("handleJoyrideCallback: re-checking step after retry delay",{index:A,attempt:Qt,delay:Xr}),k(fs=>({...fs,stepIndex:A}))},Xr);return}delete C.current[A];const Er=K==="prev"?Math.max(0,A-1):Math.min(f.length-1,A+1);z.log("handleJoyrideCallback: retries exhausted, moving on",{from:A,to:Er}),k(Qt=>({...Qt,stepIndex:Er}));return}if(Q==="skipped"){z.log("handleJoyrideCallback: tour skipped"),Ye();return}if(Q==="finished"){z.log("handleJoyrideCallback: tour finished"),Ie();return}},[J,Ie,M,F.pathname,f,Ye,z]);return{tourState:w,startTour:Qe,skipTour:Ye,handleJoyrideCallback:Fe,hasSeenTour:p,isTourRunning:v}},qee=()=>{const{state:e,sendUserMessage:t,commitOnboardingData:r,resetOnboarding:n}=zp(),s=Ft(),i=s.user,a=s.isAuthenticated,l=!!s.isLoading,c=(i==null?void 0:i.UserID)??(i==null?void 0:i.id)??null,{family:u}=zr(),d=(u==null?void 0:u.FamilyID)??null,{startTour:f,hasSeenTour:h}=uI({familyId:d,userId:c}),p=$n(),[g]=qh(),[y,b]=m.useState(""),v=m.useRef(null),{toggleChat:x,isOpen:w}=li(),k=m.useRef(!1),S=()=>{var C;(C=v.current)==null||C.scrollIntoView({behavior:"smooth"})};m.useEffect(()=>{S()},[e.messages,e.streamingMessage]),m.useEffect(()=>{if(e.loading||k.current)return;const C=g.get("focus"),_=sessionStorage.getItem("onboarding-focus");(C==="rooms"||_==="rooms")&&e.currentStep!=="committed"&&(k.current=!0,sessionStorage.removeItem("onboarding-focus"),t("We just reset our floor plan and need help designing a fresh layout for our home."))},[e.loading,e.currentStep,g,t]),m.useEffect(()=>{!l&&!a&&p("/login",{replace:!0})},[l,a,p]);const E=C=>{C.key==="Enter"&&y.trim()&&(t(y),b(""))};if(e.loading)return o.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:[o.jsx(lI,{}),o.jsx("p",{className:"ml-2 text-neutral-600",children:"Loading onboarding data..."})]});const N=async()=>{e.loading||e.currentStep!=="committed"&&e.currentStep!=="completed"&&!await r()||(h===!1&&f(),p("/app"))},j=async()=>{e.loading||(await n(),b(""))},T=e.awaitingResetConfirmation||e.currentStep!=="committed"&&e.currentStep!=="completed";return o.jsxs("div",{className:"relative min-h-screen bg-neutral-50 flex flex-col items-center justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Ga,{size:"lg"}),o.jsx("p",{className:"mt-2 text-neutral-600",children:"Let's get your family space ready together."})]}),o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-card w-full max-w-md flex flex-col",style:{height:"70vh"},children:[o.jsxs("div",{className:"flex-grow overflow-y-auto mb-4",children:[e.messages.map((C,_)=>o.jsx("div",{className:`mb-2 ${C.sender==="user"?"text-right":"text-left"}`,children:o.jsx("div",{className:`inline-block p-2 rounded-lg ${C.sender==="user"?"bg-primary-100 text-primary-800":"bg-primary-600 text-white"}`,children:C.text})},_)),e.streamingMessage!==null&&o.jsx("div",{className:"mb-2 text-left",children:o.jsx("div",{className:"inline-block p-2 rounded-lg bg-primary-600 text-white",children:e.streamingMessage?e.streamingMessage:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"w-2 h-2 bg-white/80 rounded-full animate-bounce"}),o.jsx("span",{className:"w-2 h-2 bg-white/80 rounded-full animate-bounce [animation-delay:-0.15s]"}),o.jsx("span",{className:"w-2 h-2 bg-white/80 rounded-full animate-bounce [animation-delay:-0.3s]"})]})})}),o.jsx("div",{ref:v})]}),T&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"text",placeholder:"Type your response...",className:"flex-grow px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:y,onChange:C=>b(C.target.value),onKeyDown:E}),o.jsx("button",{onClick:()=>{y.trim()&&(t(y),b(""))},className:"ml-2 px-4 py-2 bg-primary-600 text-white rounded-md",children:"Send"})]}),e.currentStep==="committed"&&o.jsxs("div",{className:"text-center mt-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"All set "}),o.jsx("p",{className:"mb-4",children:"Your family space is ready!"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[o.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary-600 text-white rounded-md",children:"Go to Dashboard"}),o.jsx("button",{onClick:()=>void j(),className:"px-4 py-2 border border-neutral-300 text-neutral-700 rounded-md",children:"Start Over"})]})]}),e.currentStep==="completed"&&o.jsxs("div",{className:"text-center mt-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Onboarding Complete!"}),o.jsx("p",{className:"mb-4",children:"You can now explore FamConomy."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[o.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary-600 text-white rounded-md",children:"Go to Dashboard"}),o.jsx("button",{onClick:()=>void j(),className:"px-4 py-2 border border-neutral-300 text-neutral-700 rounded-md",children:"Restart Onboarding"})]})]})]}),o.jsx("button",{type:"button",onClick:()=>x({greet:!0}),className:"fixed bottom-6 right-6 z-50 bg-gradient-to-r from-primary-500 via-secondary-500 to-accent-500 text-white rounded-full p-4 shadow-lg hover:opacity-90 transition-opacity","aria-label":w?"Close LinZ chat":"Open LinZ chat",children:w?o.jsx(ni,{size:28}):o.jsx(T2,{size:28})})]})},Kee=()=>{const[e,t]=m.useState(""),[r,n]=m.useState(!1),[s,i]=m.useState(""),[a,l]=m.useState(""),c=async u=>{var d,f;if(u.preventDefault(),!e){l("Please enter the email address associated with your account."),i("");return}n(!0),l(""),i("");try{await q.post("/auth/forgot-password",{email:e}),i("If an account exists for that email, we've sent instructions to reset your password."),t("")}catch(h){l(((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||"Something went wrong. Please try again in a few minutes.")}finally{n(!1)}};return o.jsxs("div",{className:"min-h-screen bg-neutral-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(Ga,{size:"lg"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-neutral-900",children:"Reset your password"}),o.jsx("p",{className:"mt-2 text-center text-sm text-neutral-600",children:"Enter the email associated with your FamConomy account and we\\'ll send reset instructions."})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow-card sm:rounded-lg sm:px-10",children:[o.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s&&o.jsx("div",{className:"rounded-md bg-success-50 border border-success-200 px-4 py-3 text-sm text-success-800",children:s}),a&&o.jsx("div",{className:"rounded-md bg-error-50 border border-error-200 px-4 py-3 text-sm text-error-700",children:a}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700",children:"Email address"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:u=>t(u.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"you@example.com"})})]}),o.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center rounded-md border border-transparent bg-primary-600 py-3 px-4 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-70",children:r?"Sending instructions":"Send reset link"})]}),o.jsx("div",{className:"mt-6 text-center text-sm text-neutral-600",children:o.jsx(kr,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Back to sign in"})})]})})]})},Qee=()=>{const[e]=qh(),t=m.useMemo(()=>e.get("token")||"",[e]),r=m.useMemo(()=>e.get("email")||"",[e]),[n,s]=m.useState(""),[i,a]=m.useState(""),[l,c]=m.useState(!1),[u,d]=m.useState(""),[f,h]=m.useState(""),p=!t||!r,g=async y=>{var b,v;if(y.preventDefault(),p){h("This reset link is missing required information. Please request a new one.");return}if(!n||n.length<8){h("Please enter a password that is at least 8 characters long.");return}if(n!==i){h("Passwords do not match. Please try again.");return}c(!0),h(""),d("");try{await q.post("/auth/reset-password",{token:t,email:r,password:n}),d("Your password has been reset. You can now sign in with your new password."),s(""),a("")}catch(x){h(((v=(b=x.response)==null?void 0:b.data)==null?void 0:v.message)||"Unable to reset password. The link may have expired.")}finally{c(!1)}};return o.jsxs("div",{className:"min-h-screen bg-neutral-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(Ga,{size:"lg"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-neutral-900",children:"Set a new password"}),o.jsx("p",{className:"mt-2 text-center text-sm text-neutral-600",children:"Enter and confirm your new password below."})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow-card sm:rounded-lg sm:px-10",children:[p?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"rounded-md bg-error-50 border border-error-200 px-4 py-3 text-sm text-error-700",children:"This reset link is invalid or incomplete. Please request a new password reset email."}),o.jsx("div",{className:"text-center text-sm text-neutral-600",children:o.jsx(kr,{to:"/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500",children:"Request a new reset link"})})]}):o.jsxs("form",{onSubmit:g,className:"space-y-6",children:[u&&o.jsx("div",{className:"rounded-md bg-success-50 border border-success-200 px-4 py-3 text-sm text-success-800",children:u}),f&&o.jsx("div",{className:"rounded-md bg-error-50 border border-error-200 px-4 py-3 text-sm text-error-700",children:f}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700",children:"New password"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"password",type:"password",autoComplete:"new-password",required:!0,value:n,onChange:y=>s(y.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter a strong password"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-neutral-700",children:"Confirm password"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"confirm-password",type:"password",autoComplete:"new-password",required:!0,value:i,onChange:y=>a(y.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Re-enter your new password"})})]}),o.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center rounded-md border border-transparent bg-primary-600 py-3 px-4 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-70",children:l?"Updating password":"Update password"})]}),o.jsx("div",{className:"mt-6 text-center text-sm text-neutral-600",children:o.jsx(kr,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Back to sign in"})})]})})]})},Zee=()=>{const{token:e}=GC(),[t,r]=m.useState(null),[n,s]=m.useState(!0),[i,a]=m.useState(null);return m.useEffect(()=>{if(!e){a("Missing share token"),s(!1);return}(async()=>{try{s(!0),a(null);const c=await See(e);r(c)}catch(c){a(c instanceof Error?c.message:"Unable to load wishlist")}finally{s(!1)}})()},[e]),n?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:o.jsx(dn,{className:"h-10 w-10 animate-spin text-primary-500"})}):i||!t?o.jsxs("div",{className:"max-w-2xl mx-auto py-16 text-center",children:[o.jsx(Pa,{className:"mx-auto h-12 w-12 text-primary-500"}),o.jsx("h1",{className:"mt-4 text-2xl font-semibold text-neutral-900 dark:text-white",children:"Wishlist unavailable"}),o.jsx("p",{className:"mt-2 text-neutral-600 dark:text-neutral-400",children:i||"This wishlist link may have expired or been revoked."})]}):o.jsxs("div",{className:"max-w-3xl mx-auto py-12 space-y-6",children:[o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-6 shadow-card dark:border-neutral-700 dark:bg-neutral-800",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 dark:bg-primary-900/30",children:o.jsx(Pa,{className:"h-6 w-6"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:t.Title}),t.Owner?o.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["Curated for ",t.Owner.FirstName||t.Owner.UserID]}):null,t.Description?o.jsx("p",{className:"mt-2 text-neutral-700 dark:text-neutral-300",children:t.Description}):null]})]})}),o.jsx("div",{className:"space-y-4",children:t.Items.length===0?o.jsx("div",{className:"rounded-xl border border-dashed border-neutral-300 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:text-neutral-400",children:"No ideas to share yet."}):t.Items.map(l=>o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-white p-5 shadow-sm dark:border-neutral-700 dark:bg-neutral-900/30",children:o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:l.Name}),l.Details?o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:l.Details}):null,o.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-neutral-500 dark:text-neutral-400",children:[l.PriceMin||l.PriceMax?o.jsxs("span",{children:[l.PriceMin?l.PriceMin:"",l.PriceMin&&l.PriceMax?" - ":"",l.PriceMax?l.PriceMax:""]}):null,l.TargetUrl?o.jsxs("a",{href:l.TargetUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary-600 hover:underline dark:text-primary-300",children:[o.jsx(G0,{className:"h-3 w-3"})," View link"]}):null]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("span",{className:"rounded-full bg-neutral-100 px-3 py-1 text-xs font-medium text-neutral-700 dark:bg-neutral-700/40 dark:text-neutral-200",children:l.Status==="IDEA"?"Idea":l.Status==="RESERVED"?"Reserved":"Purchased"}),l.claimedBy?o.jsxs("span",{className:"rounded-full bg-accent-100 px-3 py-1 text-xs font-medium text-accent-700 dark:bg-accent-900/30 dark:text-accent-200",children:["Reserved by ",l.claimedBy.FirstName||"someone"]}):null]})]})},l.WishListItemID))})]})},rc=(e,t)=>t.length?o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:e}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(r=>o.jsx("span",{className:"rounded-full bg-neutral-100 px-3 py-1 text-xs text-neutral-700 dark:bg-neutral-700/30 dark:text-neutral-200",children:r},r))})]}):null,Xee=()=>{const{token:e}=GC(),[t,r]=m.useState(null),[n,s]=m.useState(!0),[i,a]=m.useState(null);if(m.useEffect(()=>{if(!e){a("Missing share token"),s(!1);return}(async()=>{try{s(!0),a(null);const d=await bJ(e);r(d)}catch(d){a(d instanceof Error?d.message:"Unable to load shared profile")}finally{s(!1)}})()},[e]),n)return o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:o.jsx(dn,{className:"h-10 w-10 animate-spin text-primary-500"})});if(i||!t||!t.profile)return o.jsxs("div",{className:"max-w-2xl mx-auto py-16 text-center",children:[o.jsx(O2,{className:"mx-auto h-12 w-12 text-primary-500"}),o.jsx("h1",{className:"mt-4 text-2xl font-semibold text-neutral-900 dark:text-white",children:"Care profile unavailable"}),o.jsx("p",{className:"mt-2 text-neutral-600 dark:text-neutral-400",children:i||"This shared profile may have expired or been revoked."})]});const l=t.profile,c=Object.entries(l.clothingSizes||{});return o.jsxs("div",{className:"max-w-3xl mx-auto py-12 space-y-6",children:[o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-6 shadow-card dark:border-neutral-700 dark:bg-neutral-800",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 dark:bg-primary-900/30",children:o.jsx(zu,{className:"h-6 w-6"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Care profile"}),t.user?o.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["Shared for ",t.user.FirstName||t.user.UserID]}):null,t.family?o.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Family: ",t.family.FamilyName]}):null]})]})}),o.jsxs("div",{className:"space-y-4",children:[c.length?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-5 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Clothing sizes"}),o.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2 sm:grid-cols-2",children:c.map(([u,d])=>o.jsxs("div",{className:"rounded-lg bg-neutral-100 px-3 py-2 text-sm text-neutral-700 dark:bg-neutral-800 dark:text-neutral-200",children:[o.jsxs("span",{className:"font-medium",children:[u,": "]}),o.jsx("span",{children:String(d)})]},u))})]}):null,rc("Favorite colors",l.favoriteColors||[]),rc("Favorite foods",l.favoriteFoods||[]),rc("Interests",l.interests||[]),rc("Allergies",l.allergies||[]),rc("Favorite brands",l.favoriteBrands||[]),l.notes?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-5 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Notes"}),o.jsx("p",{className:"mt-2 text-sm text-neutral-700 dark:text-neutral-200",children:l.notes})]}):null,l.wishlistSummary?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-5 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Wishlist summary"}),o.jsx("p",{className:"mt-2 text-sm text-neutral-700 dark:text-neutral-200",children:l.wishlistSummary})]}):null]})]})},Jee=[{id:"kids-1",title:"What is Money?",type:"interactive",category:"kids",summary:"An interactive lesson on the basics of money, where it comes from, and what it is used for.",thumbnail:"/placeholders/kids-money.png",tags:["money","basics","kids"]},{id:"kids-2",title:"Saving for a Goal",type:"video",category:"kids",summary:"A short video on how to save money for a toy, a game, or anything else you want.",thumbnail:"/placeholders/kids-saving.png",tags:["saving","goals","kids"]},{id:"kids-3",title:"Needs vs. Wants",type:"article",category:"kids",summary:"Learn the difference between things you need and things you want, and how to make smart choices.",thumbnail:"/placeholders/kids-needs-wants.png",tags:["needs","wants","choices","kids"]},{id:"parents-1",title:"Teaching Kids About Money",type:"article",category:"parents",summary:"A guide for parents on how to introduce financial concepts to children at different ages.",thumbnail:"/placeholders/parents-teaching.png",tags:["parenting","finance","education"]},{id:"parents-2",title:"Family Budgeting 101",type:"video",category:"parents",summary:"Learn how to create a family budget that works for everyone and helps you achieve your financial goals together.",thumbnail:"/placeholders/parents-budgeting.png",tags:["budgeting","family","finance"]},{id:"parents-3",title:"The Power of Allowance",type:"interactive",category:"parents",summary:"An interactive guide to setting up an allowance system that teaches responsibility and financial literacy.",thumbnail:"/placeholders/parents-allowance.png",tags:["allowance","parenting","chores"]}],vN=()=>{const[e,t]=m.useState("kids"),[r,n]=m.useState(""),[s,i]=m.useState("all"),a=Jee.filter(c=>{const u=c.category===e,d=c.title.toLowerCase().includes(r.toLowerCase())||c.summary.toLowerCase().includes(r.toLowerCase()),f=s==="all"||c.type===s;return u&&d&&f}),l=c=>{switch(c){case"article":return o.jsx(lu,{className:"h-6 w-6 text-primary-600"});case"video":return o.jsx(tB,{className:"h-6 w-6 text-secondary-600"});case"interactive":return o.jsx(X6,{className:"h-6 w-6 text-accent-600"})}};return o.jsxs("div",{className:"space-y-8 p-4 md:p-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:"Resources"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Financial education for the whole family."})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex space-x-1 bg-neutral-100 dark:bg-neutral-800 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>t("kids"),className:`px-4 py-2 rounded-lg text-sm font-medium ${e==="kids"?"bg-white dark:bg-neutral-700 shadow":"text-neutral-600 dark:text-neutral-300"}`,children:"For Kids"}),o.jsx("button",{onClick:()=>t("parents"),className:`px-4 py-2 rounded-lg text-sm font-medium ${e==="parents"?"bg-white dark:bg-neutral-700 shadow":"text-neutral-600 dark:text-neutral-300"}`,children:"For Parents"})]}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(lp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",size:18}),o.jsx("input",{type:"text",placeholder:"Search...",value:r,onChange:c=>n(c.target.value),className:"pl-10 pr-4 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800"})]}),o.jsxs("select",{value:s,onChange:c=>i(c.target.value),className:"px-4 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[o.jsx("option",{value:"all",children:"All Types"}),o.jsx("option",{value:"article",children:"Articles"}),o.jsx("option",{value:"video",children:"Videos"}),o.jsx("option",{value:"interactive",children:"Interactive"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(c=>o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform",children:[o.jsx("img",{src:c.thumbnail,alt:c.title,className:"w-full h-40 object-cover"}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:`text-xs font-semibold uppercase tracking-wider ${c.type==="article"?"text-primary-600":c.type==="video"?"text-secondary-600":"text-accent-600"}`,children:c.type}),l(c.type)]}),o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-2",children:c.title}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:c.summary}),o.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(u=>o.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-100 dark:bg-neutral-700 rounded-full",children:u},u))})]})]},c.id))})]})},ete=async(e,t)=>(await q.get(`/recipes/${e}/recipes`,{params:t})).data,tte=async(e,t)=>(await q.get(`/recipes/${e}/recipes/${t}`)).data,rte=async(e,t)=>(await q.post(`/recipes/${e}/recipes`,t)).data,nte=async(e,t,r)=>(await q.put(`/recipes/${e}/recipes/${t}`,r)).data,ste=async(e,t)=>{await q.delete(`/recipes/${e}/recipes/${t}`)},ite=async(e,t)=>(await q.post(`/recipes/${e}/recipes/import`,{url:t})).data,ate=async(e,t)=>{const r=new FormData;return r.append("scan",t),(await q.post(`/recipes/${e}/recipes/import/scan`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},ote=async(e,t,r)=>(await q.post(`/recipes/${e}/recipes/${t}/share`,{visibility:r})).data,lte=async(e,t,r)=>(await q.post(`/recipes/${e}/recipes/${t}/memories`,r)).data,cte=async(e,t)=>(await q.get(`/recipes/${e}/recipes/${t}/memories`)).data,ute=async(e,t)=>(await q.post(`/recipes/${e}/recipes/${t}/favorite`)).data,dte=({isOpen:e,onClose:t,onSubmit:r,submitting:n})=>{const[s,i]=m.useState("");m.useEffect(()=>{e||i("")},[e]);const a=async l=>{if(l.preventDefault(),!s.trim()){ne.error("Paste a recipe link to import.");return}await r(s.trim())};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/60 backdrop-blur-sm p-4",children:o.jsxs(bt.form,{onSubmit:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-xl rounded-3xl bg-white dark:bg-neutral-900 shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-5 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white flex items-center gap-2",children:[o.jsx(tv,{size:18})," Import from the web"]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:"LinZ will invite Mealie to gently gather the ingredients and steps from the recipe you share."})]}),o.jsxs("div",{className:"px-6 py-6 space-y-4",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300",children:"Recipe URL"}),o.jsx("input",{type:"url",value:s,onChange:l=>i(l.target.value),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"https://example.com/best-family-lasagna",required:!0}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"We respect original creatorsimported recipes stay private to your family unless you choose to share."})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:t,className:"text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-secondary-600 text-white px-5 py-2 text-sm font-medium hover:bg-secondary-700 disabled:bg-secondary-300",children:[n&&o.jsx(dn,{size:16,className:"animate-spin"}),"Import recipe"]})]})]})}):null},fte=({isOpen:e,onClose:t,onSubmit:r,submitting:n})=>{const[s,i]=m.useState(null),[a,l]=m.useState(null);m.useEffect(()=>{e||(i(null),a&&(URL.revokeObjectURL(a),l(null)))},[e,a]);const c=d=>{var h;const f=((h=d.target.files)==null?void 0:h[0])??null;a&&(URL.revokeObjectURL(a),l(null)),f?(i(f),l(URL.createObjectURL(f))):i(null)},u=async d=>{if(d.preventDefault(),!s){ne.error("Choose a photo of the recipe to continue.");return}await r(s)};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/60 backdrop-blur-sm p-4",children:o.jsxs(bt.form,{onSubmit:u,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-xl rounded-3xl bg-white dark:bg-neutral-900 shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-5 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white flex items-center gap-2",children:[o.jsx(tv,{size:18})," Import from a photo"]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:"Upload a clear picture of a recipe card or magazine clipping. We will transcribe it and let you review before saving."})]}),o.jsxs("div",{className:"px-6 py-6 space-y-4",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300",children:"Recipe image"}),o.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/webp",onChange:c,className:"w-full text-sm text-neutral-600 dark:text-neutral-300"}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Tip: take the photo straight on, in good lighting, so the handwriting or print is easy to read."}),a&&o.jsx("div",{className:"rounded-2xl overflow-hidden border border-neutral-200 dark:border-neutral-700",children:o.jsx("img",{src:a,alt:"Recipe preview",className:"w-full max-h-64 object-cover"})})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:t,className:"text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:n||!s,className:"inline-flex items-center gap-2 rounded-full bg-secondary-600 text-white px-5 py-2 text-sm font-medium hover:bg-secondary-700 disabled:bg-secondary-300",children:[n&&o.jsx(dn,{size:16,className:"animate-spin"}),"Import scan"]})]})]})}):null},hte=({isOpen:e,onClose:t,onSubmit:r,submitting:n})=>{const[s,i]=m.useState(""),[a,l]=m.useState("");m.useEffect(()=>{e||(i(""),l(""))},[e]);const c=async u=>{if(u.preventDefault(),!a.trim()){ne.error("Share a memory to save it.");return}await r({Message:a.trim(),StoryTitle:s.trim()||void 0})};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/60 backdrop-blur-sm p-4",children:o.jsxs(bt.form,{onSubmit:c,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-lg rounded-3xl bg-white dark:bg-neutral-900 shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-5 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white flex items-center gap-2",children:[o.jsx(q0,{size:18})," Add a family memory"]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:"Your words become part of the recipes story for future generations."})]}),o.jsxs("div",{className:"px-6 py-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Memory title"}),o.jsx("input",{type:"text",value:s,onChange:u=>i(u.target.value),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-highlight-teal",placeholder:"First snow day stew, 1998"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Memory"}),o.jsx("textarea",{value:a,onChange:u=>l(u.target.value),rows:4,className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-highlight-teal",placeholder:"Share the laughter, the smell in the kitchen, the person who taught you the trick.",required:!0})]})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:t,className:"text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-highlight-teal text-white px-5 py-2 text-sm font-medium hover:bg-highlight-teal/80 disabled:bg-highlight-teal/50",children:[n&&o.jsx(dn,{size:16,className:"animate-spin"}),"Save memory"]})]})]})}):null},bN=()=>{const{family:e}=zr(),t=e==null?void 0:e.FamilyID,[r,n]=m.useState([]),[s,i]=m.useState(null),[a,l]=m.useState([]),[c,u]=m.useState(!0),[d,f]=m.useState(!1),[h,p]=m.useState(null),[g,y]=m.useState(!1),[b,v]=m.useState(null),[x,w]=m.useState(!1),[k,S]=m.useState(!1),[E,N]=m.useState(!1),[j,T]=m.useState(!1),[C,_]=m.useState(!1),[V,F]=m.useState(!1),R=m.useCallback(async()=>{if(t)try{u(!0);const M=await ete(t);if(n(M),M.length){const J=M[0];i(J),l(J.Memories??[])}else i(null),l([]);p(null)}catch(M){console.error("Failed to fetch recipes",M),p("We had trouble loading your recipes.")}finally{u(!1)}},[t]);m.useEffect(()=>{R()},[R]);const L=m.useCallback(async M=>{if(t)try{f(!0);const J=await tte(t,M);if(i(J),J.Memories)l(J.Memories);else{const P=await cte(t,M);l(P)}}catch(J){console.error("Failed to load recipe",J),ne.error("Could not open this recipe right now.")}finally{f(!1)}},[t]),O=async M=>{if(t)try{T(!0);const J=await rte(t,M);ne.success("Recipe tucked safely into your family collection."),n(P=>[J,...P]),i(J),l(J.Memories??[]),y(!1),v(null)}catch(J){console.error("Create recipe failed",J),ne.error("We couldnt save that recipe yet. Try again in a moment.")}finally{T(!1)}},z=async M=>{const J=b??s;if(!(!t||!J))try{T(!0);const P=await nte(t,J.RecipeID,M);ne.success("Updates saved. Your family history just grew richer."),n(oe=>oe.map(te=>te.RecipeID===P.RecipeID?P:te)),i(P),l(P.Memories??[]),y(!1),v(null)}catch(P){console.error("Update recipe failed",P),ne.error("Could not update the recipe yet.")}finally{T(!1)}},B=async M=>{if(t)try{T(!0);const J=await ite(t,M);ne.success("Recipe imported! Give it a quick glance and make it yours."),n(P=>[J,...P.filter(oe=>oe.RecipeID!==J.RecipeID)]),i(J),l(J.Memories??[]),w(!1)}catch(J){console.error("Import recipe failed",J),ne.error("We couldnt gather that recipe. Double-check the link and try again.")}finally{T(!1)}},W=async M=>{if(t)try{_(!0);const J=await ate(t,M);ne.success("Recipe scanned! Give it a review before serving."),n(P=>[J,...P.filter(oe=>oe.RecipeID!==J.RecipeID)]),i(J),l(J.Memories??[]),S(!1)}catch(J){console.error("Scan recipe failed",J),ne.error("We couldnt read that photo. Try a clearer, well-lit picture.")}finally{_(!1)}},se=async M=>{if(t)try{const{isFavorite:J}=await ute(t,M.RecipeID);n(P=>P.map(oe=>oe.RecipeID===M.RecipeID?{...oe,isFavorite:J}:oe)),(s==null?void 0:s.RecipeID)===M.RecipeID&&i(P=>P&&{...P,isFavorite:J}),ne.success(J?"Saved to your favorites.":"Removed from favorites.")}catch(J){console.error("Toggle favorite failed",J),ne.error("Favorites are unavailable right now.")}},X=async(M,J)=>{if(t)try{const P=await ote(t,M.RecipeID,J),oe=P.shareToken?`${window.location.origin}/share/recipes/${P.shareToken}`:void 0;n(te=>te.map(be=>be.RecipeID===M.RecipeID?{...be,Visibility:P.visibility,ShareToken:P.shareToken}:be)),(s==null?void 0:s.RecipeID)===M.RecipeID&&i(te=>te&&{...te,Visibility:P.visibility,ShareToken:P.shareToken??null}),oe?(await navigator.clipboard.writeText(oe).catch(()=>{}),ne.success("Link ready! We copied it so you can share with loved ones.")):ne.success("Sharing set to family only.")}catch(P){console.error("Share recipe failed",P),ne.error("We couldnt adjust sharing right now.")}},de=async M=>{if(t&&window.confirm(`Remove ${M.Title} from your family cookbook?`))try{await ste(t,M.RecipeID),ne.success("Recipe removed. You can always add it back."),n(J=>J.filter(P=>P.RecipeID!==M.RecipeID)),(s==null?void 0:s.RecipeID)===M.RecipeID&&(i(null),l([]))}catch(J){console.error("Delete recipe failed",J),ne.error("We couldnt remove that recipe yet.")}},fe=async M=>{if(!(!t||!s))try{F(!0);const J=await lte(t,s.RecipeID,M);ne.success("Memory saved. Future generations will smile reading this."),l(P=>[J,...P]),N(!1)}catch(J){console.error("Create memory failed",J),ne.error("We couldnt save that memory yet.")}finally{F(!1)}},ye=m.useMemo(()=>r.filter(M=>M.isFavorite).length,[r]),ie=s??r[0]??null;return o.jsxs("div",{className:"space-y-8",id:"recipes-page",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-amber-200 via-rose-200 to-sky-200 dark:from-amber-600/30 dark:via-rose-600/30 dark:to-sky-600/30 p-6 md:p-10",children:[o.jsxs("div",{className:"max-w-3xl space-y-4",children:[o.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 dark:bg-neutral-900/70 px-4 py-1 text-xs font-semibold uppercase tracking-wider text-amber-600 dark:text-amber-200 shadow-sm",children:[o.jsx(lu,{size:14})," Family Recipes"]}),o.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-neutral-900 dark:text-white",children:"Preserve the dishes that taste like home."}),o.jsx("p",{className:"text-neutral-600 dark:text-neutral-200 text-sm md:text-base",children:"Capture ingredients, memories, and little whispered tips so every generation can recreate the moments that matter."}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("button",{onClick:()=>{v(null),y(!0)},className:"inline-flex items-center gap-2 rounded-full bg-primary-600 text-white px-5 py-2 text-sm font-medium hover:bg-primary-700",children:[o.jsx(tr,{size:16})," Start a new recipe"]}),o.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center gap-2 rounded-full bg-white/90 text-primary-600 px-5 py-2 text-sm font-medium hover:bg-white shadow-sm",children:[o.jsx(tv,{size:16})," Import from URL"]}),o.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center gap-2 rounded-full bg-white/80 text-secondary-600 px-5 py-2 text-sm font-medium hover:bg-white shadow-sm",children:[o.jsx(Ho,{size:16})," Scan recipe card"]}),o.jsxs("button",{onClick:()=>N(!0),disabled:!s,className:"inline-flex items-center gap-2 rounded-full border border-white/60 text-white px-5 py-2 text-sm font-medium hover:bg-white/10 disabled:opacity-60",children:[o.jsx(q0,{size:16})," Share a memory"]})]})]}),ie&&o.jsx("div",{className:"mt-8 md:absolute md:top-8 md:right-8 md:w-72",children:o.jsxs("div",{className:"rounded-2xl bg-white/90 dark:bg-neutral-900/80 p-4 shadow-xl border border-white/40 dark:border-neutral-700",children:[o.jsx("p",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"Spotlight"}),o.jsx("p",{className:"text-lg font-semibold text-primary-600 dark:text-primary-300 mt-1",children:ie.Title}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-2 line-clamp-3",children:ie.Description??"A treasured family favorite."}),o.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(Ya,{size:14})," Serves ",ie.Servings??""]}),o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(tf,{size:14})," Prep ",ie.PrepMinutes??""," min"]})]})]})})]}),o.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr,3fr]",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Kitchen heirlooms"}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[r.length," recipes  ",ye," favorites"]})]})}),c?o.jsxs("div",{className:"flex items-center justify-center rounded-2xl border border-dashed border-neutral-300 dark:border-neutral-700 p-10 text-neutral-500",children:[o.jsx(dn,{size:20,className:"animate-spin mr-2"})," Gathering your family recipes..."]}):h?o.jsx("div",{className:"rounded-2xl border border-error-300 bg-error-50 px-4 py-6 text-error-600",children:h}):r.length===0?o.jsxs("div",{className:"rounded-2xl border border-dashed border-neutral-300 dark:border-neutral-700 p-10 text-center space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-100",children:"Start your family cookbook"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Add the first recipe that your family reaches for when comfort is needed."}),o.jsxs("button",{onClick:()=>{v(null),y(!0)},className:"inline-flex items-center gap-2 rounded-full bg-primary-600 text-white px-5 py-2 text-sm font-medium hover:bg-primary-700",children:[o.jsx(tr,{size:16})," Add a treasured recipe"]}),o.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center gap-2 rounded-full bg-white text-secondary-600 px-5 py-2 text-sm font-medium hover:bg-secondary-50 dark:bg-neutral-800 dark:text-secondary-300 dark:hover:bg-neutral-700",children:[o.jsx(Ho,{size:16})," Scan a recipe card"]})]}):o.jsx("div",{className:"grid gap-3",children:r.map(M=>{const J=(s==null?void 0:s.RecipeID)===M.RecipeID;return o.jsx("button",{onClick:()=>L(M.RecipeID),className:`w-full text-left rounded-2xl border px-4 py-3 transition-colors ${J?"border-primary-500 bg-primary-50 dark:bg-primary-900/40":"border-transparent hover:border-primary-200 dark:hover:border-primary-600/40"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:M.Title}),M.isFavorite&&o.jsx(M6,{size:16,className:"text-primary-500"})]}),M.Subtitle&&o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:M.Subtitle}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-2 line-clamp-2",children:M.Description??"A family staple."})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsx(al,{size:14})," ",jg(M.FirstCookedAt)]}),o.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsx(tf,{size:14})," ",M.PrepMinutes??""," min prep"]}),o.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),se(M)},className:`rounded-full border px-2 py-1 text-xs font-medium transition-colors ${M.isFavorite?"border-primary-400 text-primary-600 bg-primary-50 dark:bg-primary-900/40":"border-neutral-200 text-neutral-500 hover:border-primary-200 hover:text-primary-600 dark:border-neutral-700 dark:hover:border-primary-600/40"}`,children:M.isFavorite?"Favorited":"Favorite"})]})]})},M.RecipeID)})})]}),o.jsx("div",{className:"rounded-3xl bg-white dark:bg-neutral-900 shadow-lg border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:s?o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"relative",children:[s.CoverImageUrl?o.jsx("img",{src:s.CoverImageUrl,alt:s.Title,className:"h-56 w-full object-cover"}):o.jsx("div",{className:"h-56 w-full bg-gradient-to-br from-primary-100 via-secondary-100 to-amber-100 dark:from-primary-900/30 dark:via-secondary-900/30 dark:to-amber-900/30 flex items-center justify-center",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Ik,{size:36,className:"text-primary-500 mx-auto"}),o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"Add a cover photo to bring this story to life."})]})}),o.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[o.jsxs("button",{onClick:()=>se(s),className:"inline-flex items-center gap-2 rounded-full bg-white/90 backdrop-blur px-3 py-1 text-xs font-medium text-primary-600 shadow",children:[s.isFavorite?o.jsx(Mk,{size:14,className:"fill-primary-500 text-primary-500"}):o.jsx(Mk,{size:14})," Favorite"]}),o.jsxs("button",{onClick:()=>X(s,s.Visibility==="LINK"?"FAMILY":"LINK"),className:"inline-flex items-center gap-2 rounded-full bg-white/90 backdrop-blur px-3 py-1 text-xs font-medium text-secondary-600 shadow",children:[o.jsx(zu,{size:14})," ",s.Visibility==="LINK"?"Stop sharing link":"Share link"]})]})]}),o.jsxs("div",{className:"px-6 py-6 space-y-6 flex-1 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:s.Title}),s.Subtitle&&o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:s.Subtitle}),o.jsxs("div",{className:"mt-3 flex flex-wrap gap-3 text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsxs("span",{className:"inline-flex items-center gap-1 bg-neutral-100 dark:bg-neutral-800 px-3 py-1 rounded-full",children:[o.jsx(Ya,{size:14})," Serves ",s.Servings??""]}),o.jsxs("span",{className:"inline-flex items-center gap-1 bg-neutral-100 dark:bg-neutral-800 px-3 py-1 rounded-full",children:[o.jsx(tf,{size:14})," Prep ",s.PrepMinutes??""," min"]}),o.jsxs("span",{className:"inline-flex items-center gap-1 bg-neutral-100 dark:bg-neutral-800 px-3 py-1 rounded-full",children:[o.jsx(al,{size:14})," First shared ",jg(s.FirstCookedAt)]}),s.SourceUrl&&o.jsxs("a",{href:s.SourceUrl,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 bg-neutral-100 dark:bg-neutral-800 px-3 py-1 rounded-full text-primary-600 dark:text-primary-400 hover:underline",children:[o.jsx(D2,{size:14})," Original source"]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("button",{onClick:()=>{v(s),y(!0)},className:"inline-flex items-center gap-2 rounded-full border border-neutral-300 dark:border-neutral-600 px-4 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-300 hover:border-primary-300 hover:text-primary-600",children:[o.jsx(J6,{size:14})," Edit"]}),o.jsxs("button",{onClick:()=>de(s),className:"inline-flex items-center gap-2 rounded-full border border-error-300 px-4 py-1.5 text-xs font-medium text-error-500 hover:bg-error-50",children:[o.jsx(ri,{size:14})," Remove"]})]})]}),s.Description&&o.jsx("div",{className:"rounded-2xl bg-neutral-50 dark:bg-neutral-800/60 px-4 py-3 text-sm text-neutral-600 dark:text-neutral-300 border border-neutral-100 dark:border-neutral-700",children:s.Description}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-[1fr_1fr]",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Ingredients"}),o.jsx("div",{className:"space-y-2",children:s.Ingredients.sort((M,J)=>(M.SortOrder??0)-(J.SortOrder??0)).map(M=>o.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-800/70 border border-neutral-200 dark:border-neutral-700 px-3 py-2",children:[M.SectionTitle&&o.jsx("p",{className:"text-[10px] uppercase tracking-wide text-secondary-500 dark:text-secondary-300",children:M.SectionTitle}),o.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100",children:M.Name}),(M.Quantity||M.Notes)&&o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[M.Quantity,M.Notes].filter(Boolean).join("  ")})]},`${M.RecipeIngredientID}-${M.Name}`))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Steps"}),o.jsx("div",{className:"space-y-2",children:s.Steps.sort((M,J)=>(M.SortOrder??0)-(J.SortOrder??0)).map((M,J)=>o.jsx("div",{className:"rounded-xl border border-neutral-200 dark:border-neutral-700 px-3 py-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-primary-100 text-primary-600 dark:bg-primary-900/40 dark:text-primary-300 text-xs font-semibold",children:J+1}),o.jsxs("div",{className:"space-y-1",children:[M.SectionTitle&&o.jsx("p",{className:"text-[10px] uppercase tracking-wide text-secondary-500 dark:text-secondary-300",children:M.SectionTitle}),o.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:M.Instruction}),M.Tip&&o.jsxs("p",{className:"text-xs text-secondary-600 dark:text-secondary-300 flex items-center gap-1",children:[o.jsx(Ho,{size:12})," ",M.Tip]})]})]})},`${M.RecipeStepID}-${J}`))})]})]}),(s.OriginStory||s.TraditionNotes)&&o.jsxs("div",{className:"rounded-2xl bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-800 px-4 py-4 space-y-2",children:[o.jsxs("h3",{className:"text-sm font-semibold text-amber-700 dark:text-amber-200 inline-flex items-center gap-2",children:[o.jsx(lu,{size:16})," The story"]}),s.OriginStory&&o.jsx("p",{className:"text-sm text-amber-800/90 dark:text-amber-100 whitespace-pre-wrap",children:s.OriginStory}),s.TraditionNotes&&o.jsx("p",{className:"text-xs text-amber-700/70 dark:text-amber-200/80 whitespace-pre-wrap border-t border-amber-200/60 dark:border-amber-800/80 pt-2",children:s.TraditionNotes})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Family memories"}),o.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700",children:[o.jsx(q0,{size:14})," Add memory"]})]}),a.length===0?o.jsx("div",{className:"rounded-2xl border border-dashed border-neutral-300 dark:border-neutral-700 px-4 py-6 text-center text-sm text-neutral-500 dark:text-neutral-400",children:"Be the first to share what this dish means to you."}):o.jsx("div",{className:"space-y-3",children:a.map(M=>o.jsx("div",{className:"rounded-2xl border border-neutral-200 dark:border-neutral-700 px-4 py-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(rB,{size:18,className:"text-primary-500"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"flex items-center gap-2 text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:M.StoryTitle??"Shared memory"}),o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 whitespace-pre-wrap",children:M.Message}),o.jsxs("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[M.SharedBy?`${M.SharedBy.FirstName} ${M.SharedBy.LastName}`:"Family member","  ",jg(M.SharedAt)]})]})]})},M.RecipeMemoryID))})]})]})]}):o.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 p-10 text-center",children:[o.jsx(Ik,{size:48,className:"text-primary-500"}),o.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-100",children:"Select a recipe to see its story"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 max-w-sm",children:"Choose a recipe from the left to revisit ingredients, instructions, and the memories your family has shared."})]})})]}),o.jsx(er,{children:g&&o.jsx(gte,{title:b?"Edit recipe":"Add a family recipe",isOpen:g,onClose:()=>{y(!1),v(null)},onSubmit:b?z:O,submitting:j,initialRecipe:b??void 0,familyName:e==null?void 0:e.FamilyName})}),o.jsx(er,{children:x&&o.jsx(dte,{isOpen:x,onClose:()=>w(!1),onSubmit:B,submitting:j})}),o.jsx(er,{children:k&&o.jsx(fte,{isOpen:k,onClose:()=>S(!1),onSubmit:W,submitting:C})}),o.jsx(er,{children:E&&o.jsx(hte,{isOpen:E,onClose:()=>N(!1),onSubmit:fe,submitting:V})})]})},wN=e=>({Title:"",Subtitle:"",Description:e?`A beloved ${e} original.`:"",OriginStory:"",TraditionNotes:"",FirstCookedAt:"",Servings:"",PrepMinutes:"",CookMinutes:"",CoverImageUrl:"",Visibility:"FAMILY",Ingredients:[{SectionTitle:"",Name:"",Quantity:"",Notes:""}],Steps:[{SectionTitle:"",Instruction:"",Tip:""}]}),jg=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString()}catch{return e}},pte=e=>{const t=(n,s)=>s(n)?n:void 0,r=n=>{if(!n)return;const s=Number(n);return Number.isNaN(s)?void 0:s};return{Title:e.Title.trim(),Subtitle:t(e.Subtitle.trim(),Boolean),Description:t(e.Description.trim(),Boolean),OriginStory:t(e.OriginStory.trim(),Boolean),TraditionNotes:t(e.TraditionNotes.trim(),Boolean),FirstCookedAt:e.FirstCookedAt?new Date(e.FirstCookedAt).toISOString():void 0,Servings:r(e.Servings),PrepMinutes:r(e.PrepMinutes),CookMinutes:r(e.CookMinutes),Visibility:e.Visibility,CoverImageUrl:t(e.CoverImageUrl.trim(),Boolean),Ingredients:e.Ingredients.map((n,s)=>({SectionTitle:t(n.SectionTitle.trim(),Boolean),Name:n.Name.trim(),Quantity:t(n.Quantity.trim(),Boolean),Notes:t(n.Notes.trim(),Boolean),SortOrder:s})).filter(n=>n.Name.length>0),Steps:e.Steps.map((n,s)=>({SectionTitle:t(n.SectionTitle.trim(),Boolean),Instruction:n.Instruction.trim(),Tip:t(n.Tip.trim(),Boolean),SortOrder:s})).filter(n=>n.Instruction.length>0)}},mte=e=>({Title:e.Title??"",Subtitle:e.Subtitle??"",Description:e.Description??"",OriginStory:e.OriginStory??"",TraditionNotes:e.TraditionNotes??"",FirstCookedAt:e.FirstCookedAt?e.FirstCookedAt.split("T")[0]:"",Servings:e.Servings?String(e.Servings):"",PrepMinutes:e.PrepMinutes?String(e.PrepMinutes):"",CookMinutes:e.CookMinutes?String(e.CookMinutes):"",CoverImageUrl:e.CoverImageUrl??"",Visibility:e.Visibility??"FAMILY",Ingredients:(e.Ingredients||[]).length?e.Ingredients.sort((t,r)=>(t.SortOrder??0)-(r.SortOrder??0)).map(t=>({SectionTitle:t.SectionTitle??"",Name:t.Name??"",Quantity:t.Quantity??"",Notes:t.Notes??""})):[{SectionTitle:"",Name:"",Quantity:"",Notes:""}],Steps:(e.Steps||[]).length?e.Steps.sort((t,r)=>(t.SortOrder??0)-(r.SortOrder??0)).map(t=>({SectionTitle:t.SectionTitle??"",Instruction:t.Instruction??"",Tip:t.Tip??""})):[{SectionTitle:"",Instruction:"",Tip:""}]}),gte=({title:e,isOpen:t,onClose:r,onSubmit:n,submitting:s,initialRecipe:i,familyName:a})=>{const[l,c]=m.useState(()=>wN(a)),[u,d]=m.useState({});m.useEffect(()=>{if(!t){d({});return}c(i?mte(i):wN(a))},[a,i,t]);const f=(y,b)=>{c(v=>{const x=[...v.Ingredients];return x[y]={...x[y],...b},{...v,Ingredients:x}})},h=(y,b)=>{c(v=>{const x=[...v.Steps];return x[y]={...x[y],...b},{...v,Steps:x}})},p=()=>{const y={};return l.Title.trim()||(y.Title="Please give this recipe a name."),l.Ingredients.some(b=>b.Name.trim().length>0)||(y.Ingredients="Add at least one ingredient so everyone can recreate it."),l.Steps.some(b=>b.Instruction.trim().length>0)||(y.Steps="Share at least one instruction to guide future cooks."),d(y),Object.keys(y).length===0},g=async y=>{y.preventDefault(),p()&&await n(pte(l))};return t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/60 backdrop-blur-sm p-4",children:o.jsx(bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-3xl rounded-3xl bg-white dark:bg-neutral-900 shadow-2xl overflow-hidden",children:o.jsxs("form",{onSubmit:g,className:"max-h-[85vh] overflow-y-auto",children:[o.jsxs("div",{className:"px-6 py-5 border-b border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:e}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Capture the ingredients, story, and little secrets that make this dish family-famous."})]}),o.jsx("button",{type:"button",onClick:r,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:""})]}),o.jsxs("div",{className:"px-6 py-6 space-y-6",children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Recipe title"}),o.jsx("input",{type:"text",value:l.Title,onChange:y=>c(b=>({...b,Title:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Grandma's Sunday Roast",required:!0}),u.Title&&o.jsx("p",{className:"mt-1 text-xs text-error-500",children:u.Title})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Subtitle"}),o.jsx("input",{type:"text",value:l.Subtitle,onChange:y=>c(b=>({...b,Subtitle:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Comfort in a casserole dish"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Servings"}),o.jsx("input",{type:"number",min:1,value:l.Servings,onChange:y=>c(b=>({...b,Servings:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"6"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Prep (min)"}),o.jsx("input",{type:"number",min:0,value:l.PrepMinutes,onChange:y=>c(b=>({...b,PrepMinutes:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"20"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Cook (min)"}),o.jsx("input",{type:"number",min:0,value:l.CookMinutes,onChange:y=>c(b=>({...b,CookMinutes:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"45"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"First cooked"}),o.jsx("input",{type:"date",value:l.FirstCookedAt,max:new Date().toISOString().split("T")[0],onChange:y=>c(b=>({...b,FirstCookedAt:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Cover image URL"}),o.jsx("input",{type:"url",value:l.CoverImageUrl,onChange:y=>c(b=>({...b,CoverImageUrl:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"https://..."})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-2",children:"Description"}),o.jsx("textarea",{value:l.Description,onChange:y=>c(b=>({...b,Description:y.target.value})),rows:3,className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"A cozy classic requested at every family gathering."})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-2",children:"Origin story"}),o.jsx("textarea",{value:l.OriginStory,onChange:y=>c(b=>({...b,OriginStory:y.target.value})),rows:3,className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Grandma Bea created this when the garden overflowed with tomatoes..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-2",children:"Tradition notes"}),o.jsx("textarea",{value:l.TraditionNotes,onChange:y=>c(b=>({...b,TraditionNotes:y.target.value})),rows:3,className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Served every Christmas Eve with sparkling cider and board games."})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Ingredients"}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Group ingredients by section and note helpful brands or measurements."})]}),o.jsxs("button",{type:"button",onClick:()=>c(y=>({...y,Ingredients:[...y.Ingredients,{SectionTitle:"",Name:"",Quantity:"",Notes:""}]})),className:"inline-flex items-center gap-2 rounded-full bg-primary-100 text-primary-600 px-3 py-1.5 text-xs font-medium hover:bg-primary-200",children:[o.jsx(tr,{size:14})," Ingredient"]})]}),u.Ingredients&&o.jsx("p",{className:"text-xs text-error-500",children:u.Ingredients}),o.jsx("div",{className:"space-y-3",children:l.Ingredients.map((y,b)=>o.jsxs("div",{className:"rounded-2xl border border-neutral-200 dark:border-neutral-700 p-4 space-y-3",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-[2fr_1fr]",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Name *"}),o.jsx("input",{type:"text",value:y.Name,onChange:v=>f(b,{Name:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Sweet onion, diced"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Quantity"}),o.jsx("input",{type:"text",value:y.Quantity,onChange:v=>f(b,{Quantity:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"2 cups"})]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Section"}),o.jsx("input",{type:"text",value:y.SectionTitle,onChange:v=>f(b,{SectionTitle:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Sauce"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Notes"}),o.jsx("input",{type:"text",value:y.Notes,onChange:v=>f(b,{Notes:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Use Vidalia if in season"})]})]}),l.Ingredients.length>1&&o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",onClick:()=>c(v=>({...v,Ingredients:v.Ingredients.filter((x,w)=>w!==b)})),className:"text-xs text-error-500 hover:text-error-600",children:"Remove"})})]},b))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Steps"}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Share the little cues and tips that keep the dish true to its roots."})]}),o.jsxs("button",{type:"button",onClick:()=>c(y=>({...y,Steps:[...y.Steps,{SectionTitle:"",Instruction:"",Tip:""}]})),className:"inline-flex items-center gap-2 rounded-full bg-secondary-100 text-secondary-600 px-3 py-1.5 text-xs font-medium hover:bg-secondary-200",children:[o.jsx(tr,{size:14})," Step"]})]}),u.Steps&&o.jsx("p",{className:"text-xs text-error-500",children:u.Steps}),o.jsx("div",{className:"space-y-3",children:l.Steps.map((y,b)=>o.jsxs("div",{className:"rounded-2xl border border-neutral-200 dark:border-neutral-700 p-4 space-y-3",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Section"}),o.jsx("input",{type:"text",value:y.SectionTitle,onChange:v=>h(b,{SectionTitle:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-secondary-500",placeholder:"Prepare sauce"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Whispered tip"}),o.jsx("input",{type:"text",value:y.Tip,onChange:v=>h(b,{Tip:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-secondary-500",placeholder:"Stir clockwise for luck"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Instruction *"}),o.jsx("textarea",{value:y.Instruction,onChange:v=>h(b,{Instruction:v.target.value}),rows:2,className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-secondary-500",placeholder:"Saut onions in butter until translucent, humming dad's favorite tune."})]}),l.Steps.length>1&&o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",onClick:()=>c(v=>({...v,Steps:v.Steps.filter((x,w)=>w!==b)})),className:"text-xs text-error-500 hover:text-error-600",children:"Remove"})})]},b))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-2",children:"Sharing"}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-3",children:"Choose who can see this recipe. You can share a link later if you change your mind."}),o.jsx("div",{className:"flex gap-3",children:["FAMILY","LINK"].map(y=>o.jsx("button",{type:"button",onClick:()=>c(b=>({...b,Visibility:y})),className:`flex-1 rounded-2xl border px-4 py-2 text-sm font-medium transition-colors ${l.Visibility===y?"border-primary-500 bg-primary-50 text-primary-600 dark:bg-primary-900/40 dark:text-primary-300":"border-neutral-200 text-neutral-600 hover:border-primary-400 dark:border-neutral-700 dark:text-neutral-400"}`,children:y==="FAMILY"?"Family only":"Family + anyone with link"},y))})]})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:r,className:"text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:s,className:"inline-flex items-center gap-2 rounded-full bg-primary-600 text-white px-5 py-2 text-sm font-medium hover:bg-primary-700 disabled:bg-primary-300",children:[s&&o.jsx(dn,{size:16,className:"animate-spin"}),"Save recipe"]})]})]})})}):null},kN=({familyId:e,userId:t,audience:r,offerTrigger:n,extraSteps:s,onboardingState:i,markCompleted:a})=>{const{tourState:l,handleJoyrideCallback:c,hasSeenTour:u}=uI({familyId:e,userId:t,audience:r,offerTrigger:n,extraSteps:s});return re.useEffect(()=>{i.currentStep==="committed"&&u===!0&&a()},[u,a,i.currentStep]),o.jsxs(o.Fragment,{children:[o.jsx(C6,{...l,callback:c,disableOverlayClose:!0,disableScrollParentFix:!0,spotlightClicks:!0,spotlightPadding:14,tooltipComponent:()=>o.jsx("div",{style:{display:"none"}}),locale:{back:"",close:"",last:"",next:"",skip:""},styles:{options:{zIndex:12e3,overlayColor:"rgba(17, 24, 39, 0.65)",primaryColor:"#6366F1"},overlay:{mixBlendMode:"normal",pointerEvents:"auto"},spotlight:{borderRadius:16,boxShadow:"0 0 0 3px rgba(99, 102, 241, 0.75)"},buttonBack:{display:"none"},buttonClose:{display:"none"},buttonNext:{display:"none"},buttonSkip:{display:"none"},tooltip:{display:"none",background:"transparent",boxShadow:"none"},tooltipContainer:{display:"none"},tooltipTitle:{display:"none"},tooltipContent:{display:"none"},tooltipFooter:{display:"none"}}}),o.jsx(T8,{})]})},SN=({children:e,hasExistingFamily:t=!1,isFamilyContextReady:r=!1})=>{const{isAuthenticated:n,isLoading:s}=Ft(),{state:i}=zp(),a=Tn(),[l,c]=re.useState(!1);return re.useEffect(()=>{i.hydrated&&c(!0)},[i.hydrated]),s?o.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!l||i.loading?o.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n?r?!(i.currentStep==="committed"||i.currentStep==="completed")&&!t&&a.pathname!=="/onboarding"?o.jsx(_w,{to:"/onboarding",replace:!0,state:{from:a.pathname}}):o.jsx(o.Fragment,{children:e}):o.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsx(_w,{to:"/login"})},yte=({familyId:e,hasExistingFamily:t,isFamilyContextReady:r})=>{const n=Ft(),s=n.user,i=n.isAuthenticated,a=!!n.isLoading,l=Tn(),c=$n(),u=(s==null?void 0:s.id)??(s==null?void 0:s.UserID)??null,d=zp(),{state:f,markCompleted:h}=d,p=f.members.some(w=>{var S;const k=(S=w.email)==null?void 0:S.toLowerCase();return!k||k.endsWith("@famc.local")}),g=m.useMemo(()=>p?[{target:"#placeholder-members-callout",content:"These placeholders were added during onboarding. Tap Send Invitation to replace them with real accounts.",ensureSidebar:!1}]:[],[p]),y=m.useMemo(()=>{var E;const w=(s==null?void 0:s.role)??(s==null?void 0:s.Role)??(s==null?void 0:s.UserRole);if(typeof w=="string"){const N=w.toLowerCase();if(N.includes("child")||N.includes("kid"))return"child";if(N.includes("guardian"))return"guardian"}const k=f.members.find(N=>!N.email||!(s!=null&&s.email)?!1:N.email.toLowerCase()===s.email.toLowerCase()),S=(E=k==null?void 0:k.role)==null?void 0:E.toLowerCase();if(S){if(S.includes("child")||S.includes("kid"))return"child";if(S.includes("guardian"))return"guardian"}return"parent"},[f.members,s]),b=re.useMemo(()=>{const w=l.pathname;return w==="/"||w==="/app"||w.startsWith("/app/")},[l.pathname]),v=m.useMemo(()=>b&&["committed","completed"].includes(f.currentStep),[b,f.currentStep]),x=m.useMemo(()=>!i||a?(console.log(" Onboarding redirect: waiting for auth",{isAuthenticated:i,authLoading:a}),!1):b?!f.hydrated||f.loading?(console.log(" Onboarding redirect: waiting for onboarding state",{hydrated:f.hydrated,loading:f.loading}),!1):r?l.pathname!=="/"&&l.pathname!=="/app"?(console.log(" Onboarding redirect: user on specific app route, staying",{pathname:l.pathname}),!1):t?(console.log(" Onboarding redirect: user has existing family, staying on current page",{hasExistingFamily:t,familyId:e}),!1):f.currentStep==="committed"||f.currentStep==="completed"?(console.log(" Onboarding redirect: onboarding complete",{currentStep:f.currentStep}),!1):l.pathname.startsWith("/onboarding")?!1:(console.log(" Redirecting to onboarding",{hasExistingFamily:t,familyId:e,onboardingStep:f.currentStep,pathname:l.pathname}),!0):(console.log(" Onboarding redirect: waiting for family context",{isFamilyContextReady:r}),!1):!1,[t,b,i,a,f.currentStep,f.hydrated,f.loading,l.pathname,r,e]);return re.useEffect(()=>{x&&c("/onboarding",{replace:!0})},[x,c]),o.jsx(o.Fragment,{children:o.jsxs(zP,{children:[o.jsx(Ge,{path:"/login",element:o.jsx(Pee,{})}),o.jsx(Ge,{path:"/join",element:o.jsx(Lee,{})}),o.jsx(Ge,{path:"/onboarding",element:o.jsx(qee,{})}),o.jsx(Ge,{path:"/forgot-password",element:o.jsx(Kee,{})}),o.jsx(Ge,{path:"/reset-password",element:o.jsx(Qee,{})}),o.jsx(Ge,{path:"/share/wishlists/:token",element:o.jsx(Zee,{})}),o.jsx(Ge,{path:"/share/profiles/:token",element:o.jsx(Xee,{})}),o.jsxs(Ge,{path:"/",element:o.jsx(SN,{hasExistingFamily:t,isFamilyContextReady:r,children:o.jsx(kN,{familyId:e,userId:u,audience:y,offerTrigger:v,extraSteps:g,onboardingState:f,markCompleted:h})}),children:[o.jsx(Ge,{index:!0,element:o.jsx(YS,{})}),o.jsx(Ge,{path:"calendar",element:o.jsx(mE,{})}),o.jsx(Ge,{path:"tasks",element:o.jsx(gE,{})}),o.jsx(Ge,{path:"gigs",element:o.jsx(yE,{})}),o.jsx(Ge,{path:"gigs/settings",element:o.jsx(xE,{})}),o.jsx(Ge,{path:"messages",element:o.jsx(vE,{})}),o.jsx(Ge,{path:"recipes",element:o.jsx(bN,{})}),o.jsx(Ge,{path:"shopping",element:o.jsx(wE,{})}),o.jsx(Ge,{path:"wishlists",element:o.jsx(pN,{})}),o.jsx(Ge,{path:"budget",element:o.jsx(ZE,{})}),o.jsx(Ge,{path:"family",element:o.jsx(oN,{})}),o.jsx(Ge,{path:"family/values",element:o.jsx(dN,{})}),o.jsx(Ge,{path:"journal",element:o.jsx(fN,{})}),o.jsx(Ge,{path:"settings",element:o.jsx(mN,{})}),o.jsx(Ge,{path:"profile",element:o.jsx(gN,{})}),o.jsx(Ge,{path:"resources",element:o.jsx(vN,{})})]}),o.jsxs(Ge,{path:"/app",element:o.jsx(SN,{hasExistingFamily:t,isFamilyContextReady:r,children:o.jsx(kN,{familyId:e,userId:u,audience:y,offerTrigger:v,extraSteps:g,onboardingState:f,markCompleted:h})}),children:[o.jsx(Ge,{index:!0,element:o.jsx(YS,{})}),o.jsx(Ge,{path:"calendar",element:o.jsx(mE,{})}),o.jsx(Ge,{path:"tasks",element:o.jsx(gE,{})}),o.jsx(Ge,{path:"gigs",element:o.jsx(yE,{})}),o.jsx(Ge,{path:"gigs/settings",element:o.jsx(xE,{})}),o.jsx(Ge,{path:"messages",element:o.jsx(vE,{})}),o.jsx(Ge,{path:"recipes",element:o.jsx(bN,{})}),o.jsx(Ge,{path:"shopping",element:o.jsx(wE,{})}),o.jsx(Ge,{path:"wishlists",element:o.jsx(pN,{})}),o.jsx(Ge,{path:"budget",element:o.jsx(ZE,{})}),o.jsx(Ge,{path:"family",element:o.jsx(oN,{})}),o.jsx(Ge,{path:"family/values",element:o.jsx(dN,{})}),o.jsx(Ge,{path:"journal",element:o.jsx(fN,{})}),o.jsx(Ge,{path:"settings",element:o.jsx(mN,{})}),o.jsx(Ge,{path:"profile",element:o.jsx(gN,{})}),o.jsx(Ge,{path:"resources",element:o.jsx(vN,{})})]})]})})},xte=()=>{const{user:e}=Ft(),t=(e==null?void 0:e.id)??(e==null?void 0:e.UserID)??null,{activeFamilyId:r,family:n,families:s,isLoading:i}=zr(),a=(e==null?void 0:e.familyId)??(e==null?void 0:e.FamilyID)??null,l=r??(n==null?void 0:n.FamilyID)??a??null,c=!!l||((s==null?void 0:s.length)??0)>0,u=!i;return o.jsx(S8,{familyId:l,userId:t,children:o.jsx(see,{familyId:l,userId:t,children:o.jsx(yte,{familyId:l,hasExistingFamily:c,isFamilyContextReady:u})})})};function vte(){return o.jsx(zL,{children:o.jsx(P4,{children:o.jsx(L4,{children:o.jsx(xte,{})})})})}const EN=xr("app-entry");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/app/service-worker.js").then(e=>{EN.log("Service Worker registered with scope:",e.scope)}).catch(e=>{EN.error("Service Worker registration failed:",e)})});LC(document.getElementById("root")).render(o.jsx(m.StrictMode,{children:o.jsx(KP,{basename:"/app",children:o.jsx(vte,{})})}));export{er as A,o as j,bt as m,m as r};
//# sourceMappingURL=index-Q1KNv0Id.js.map
