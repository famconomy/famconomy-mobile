function eI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var tI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var mN={exports:{}},Sh={},gN={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gu=Symbol.for("react.element"),nI=Symbol.for("react.portal"),sI=Symbol.for("react.fragment"),iI=Symbol.for("react.strict_mode"),aI=Symbol.for("react.profiler"),oI=Symbol.for("react.provider"),lI=Symbol.for("react.context"),cI=Symbol.for("react.forward_ref"),uI=Symbol.for("react.suspense"),dI=Symbol.for("react.memo"),fI=Symbol.for("react.lazy"),lb=Symbol.iterator;function hI(e){return e===null||typeof e!="object"?null:(e=lb&&e[lb]||e["@@iterator"],typeof e=="function"?e:null)}var yN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xN=Object.assign,vN={};function ol(e,t,r){this.props=e,this.context=t,this.refs=vN,this.updater=r||yN}ol.prototype.isReactComponent={};ol.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ol.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bN(){}bN.prototype=ol.prototype;function Ay(e,t,r){this.props=e,this.context=t,this.refs=vN,this.updater=r||yN}var Dy=Ay.prototype=new bN;Dy.constructor=Ay;xN(Dy,ol.prototype);Dy.isPureReactComponent=!0;var cb=Array.isArray,wN=Object.prototype.hasOwnProperty,Ry={current:null},kN={key:!0,ref:!0,__self:!0,__source:!0};function SN(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)wN.call(t,n)&&!kN.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:gu,type:e,key:i,ref:a,props:s,_owner:Ry.current}}function pI(e,t){return{$$typeof:gu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _y(e){return typeof e=="object"&&e!==null&&e.$$typeof===gu}function mI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ub=/\/+/g;function Lp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mI(""+e.key):t.toString(36)}function jd(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case gu:case nI:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Lp(a,0):n,cb(s)?(r="",e!=null&&(r=e.replace(ub,"$&/")+"/"),jd(s,t,r,"",function(u){return u})):s!=null&&(_y(s)&&(s=pI(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ub,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",cb(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Lp(i,l);a+=jd(i,t,r,c,s)}else if(c=hI(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Lp(i,l++),a+=jd(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function $u(e,t,r){if(e==null)return e;var n=[],s=0;return jd(e,n,"","",function(i){return t.call(r,i,s++)}),n}function gI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Yr={current:null},Td={transition:null},yI={ReactCurrentDispatcher:Yr,ReactCurrentBatchConfig:Td,ReactCurrentOwner:Ry};function EN(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:$u,forEach:function(e,t,r){$u(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $u(e,function(){t++}),t},toArray:function(e){return $u(e,function(t){return t})||[]},only:function(e){if(!_y(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Je.Component=ol;Je.Fragment=sI;Je.Profiler=aI;Je.PureComponent=Ay;Je.StrictMode=iI;Je.Suspense=uI;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yI;Je.act=EN;Je.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=xN({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Ry.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)wN.call(t,c)&&!kN.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:gu,type:e.type,key:s,ref:i,props:n,_owner:a}};Je.createContext=function(e){return e={$$typeof:lI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oI,_context:e},e.Consumer=e};Je.createElement=SN;Je.createFactory=function(e){var t=SN.bind(null,e);return t.type=e,t};Je.createRef=function(){return{current:null}};Je.forwardRef=function(e){return{$$typeof:cI,render:e}};Je.isValidElement=_y;Je.lazy=function(e){return{$$typeof:fI,_payload:{_status:-1,_result:e},_init:gI}};Je.memo=function(e,t){return{$$typeof:dI,type:e,compare:t===void 0?null:t}};Je.startTransition=function(e){var t=Td.transition;Td.transition={};try{e()}finally{Td.transition=t}};Je.unstable_act=EN;Je.useCallback=function(e,t){return Yr.current.useCallback(e,t)};Je.useContext=function(e){return Yr.current.useContext(e)};Je.useDebugValue=function(){};Je.useDeferredValue=function(e){return Yr.current.useDeferredValue(e)};Je.useEffect=function(e,t){return Yr.current.useEffect(e,t)};Je.useId=function(){return Yr.current.useId()};Je.useImperativeHandle=function(e,t,r){return Yr.current.useImperativeHandle(e,t,r)};Je.useInsertionEffect=function(e,t){return Yr.current.useInsertionEffect(e,t)};Je.useLayoutEffect=function(e,t){return Yr.current.useLayoutEffect(e,t)};Je.useMemo=function(e,t){return Yr.current.useMemo(e,t)};Je.useReducer=function(e,t,r){return Yr.current.useReducer(e,t,r)};Je.useRef=function(e){return Yr.current.useRef(e)};Je.useState=function(e){return Yr.current.useState(e)};Je.useSyncExternalStore=function(e,t,r){return Yr.current.useSyncExternalStore(e,t,r)};Je.useTransition=function(){return Yr.current.useTransition()};Je.version="18.3.1";gN.exports=Je;var g=gN.exports;const te=Zi(g),xI=eI({__proto__:null,default:te},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI=g,bI=Symbol.for("react.element"),wI=Symbol.for("react.fragment"),kI=Object.prototype.hasOwnProperty,SI=vI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EI={key:!0,ref:!0,__self:!0,__source:!0};function NN(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)kI.call(t,n)&&!EI.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:bI,type:e,key:i,ref:a,props:s,_owner:SI.current}}Sh.Fragment=wI;Sh.jsx=NN;Sh.jsxs=NN;mN.exports=Sh;var o=mN.exports,CN={exports:{}},Sn={},jN={exports:{}},TN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,$){var ne=z.length;z.push($);e:for(;0<ne;){var X=ne-1>>>1,fe=z[X];if(0<s(fe,$))z[X]=$,z[ne]=fe,ne=X;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var $=z[0],ne=z.pop();if(ne!==$){z[0]=ne;e:for(var X=0,fe=z.length,de=fe>>>1;X<de;){var ge=2*(X+1)-1,se=z[ge],M=ge+1,re=z[M];if(0>s(se,ne))M<fe&&0>s(re,se)?(z[X]=re,z[M]=ne,X=M):(z[X]=se,z[ge]=ne,X=ge);else if(M<fe&&0>s(re,ne))z[X]=re,z[M]=ne,X=M;else break e}}return $}function s(z,$){var ne=z.sortIndex-$.sortIndex;return ne!==0?ne:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=z)n(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=r(u)}}function k(z){if(y=!1,w(z),!m)if(r(c)!==null)m=!0,P(S);else{var $=r(u);$!==null&&U(k,$.startTime-z)}}function S(z,$){m=!1,y&&(y=!1,v(C),C=-1),p=!0;var ne=h;try{for(w($),f=r(c);f!==null&&(!(f.expirationTime>$)||z&&!I());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var fe=X(f.expirationTime<=$);$=e.unstable_now(),typeof fe=="function"?f.callback=fe:f===r(c)&&n(c),w($)}else n(c);f=r(c)}if(f!==null)var de=!0;else{var ge=r(u);ge!==null&&U(k,ge.startTime-$),de=!1}return de}finally{f=null,h=ne,p=!1}}var E=!1,N=null,C=-1,T=5,j=-1;function I(){return!(e.unstable_now()-j<T)}function H(){if(N!==null){var z=e.unstable_now();j=z;var $=!0;try{$=N(!0,z)}finally{$?L():(E=!1,N=null)}}else E=!1}var L;if(typeof x=="function")L=function(){x(H)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,O=D.port2;D.port1.onmessage=H,L=function(){O.postMessage(null)}}else L=function(){b(H,0)};function P(z){N=z,E||(E=!0,L())}function U(z,$){C=b(function(){z(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,P(S))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var ne=h;h=$;try{return z()}finally{h=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=h;h=z;try{return $()}finally{h=ne}},e.unstable_scheduleCallback=function(z,$,ne){var X=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?X+ne:X):ne=X,z){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ne+fe,z={id:d++,callback:$,priorityLevel:z,startTime:ne,expirationTime:fe,sortIndex:-1},ne>X?(z.sortIndex=ne,t(u,z),r(c)===null&&z===r(u)&&(y?(v(C),C=-1):y=!0,U(k,ne-X))):(z.sortIndex=fe,t(c,z),m||p||(m=!0,P(S))),z},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(z){var $=h;return function(){var ne=h;h=$;try{return z.apply(this,arguments)}finally{h=ne}}}})(TN);jN.exports=TN;var NI=jN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI=g,bn=NI;function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AN=new Set,Rc={};function Ya(e,t){Uo(e,t),Uo(e+"Capture",t)}function Uo(e,t){for(Rc[e]=t,e=0;e<t.length;e++)AN.add(t[e])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xg=Object.prototype.hasOwnProperty,jI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,db={},fb={};function TI(e){return xg.call(fb,e)?!0:xg.call(db,e)?!1:jI.test(e)?fb[e]=!0:(db[e]=!0,!1)}function AI(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function DI(e,t,r,n){if(t===null||typeof t>"u"||AI(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gr(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wr[e]=new Gr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wr[t]=new Gr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wr[e]=new Gr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wr[e]=new Gr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wr[e]=new Gr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wr[e]=new Gr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wr[e]=new Gr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wr[e]=new Gr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wr[e]=new Gr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Iy=/[\-:]([a-z])/g;function My(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Iy,My);wr[t]=new Gr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Iy,My);wr[t]=new Gr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Iy,My);wr[t]=new Gr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wr[e]=new Gr(e,1,!1,e.toLowerCase(),null,!1,!1)});wr.xlinkHref=new Gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wr[e]=new Gr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oy(e,t,r,n){var s=wr.hasOwnProperty(t)?wr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(DI(t,r,s,n)&&(r=null),n||s===null?TI(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var si=CI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yu=Symbol.for("react.element"),co=Symbol.for("react.portal"),uo=Symbol.for("react.fragment"),Py=Symbol.for("react.strict_mode"),vg=Symbol.for("react.profiler"),DN=Symbol.for("react.provider"),RN=Symbol.for("react.context"),Ly=Symbol.for("react.forward_ref"),bg=Symbol.for("react.suspense"),wg=Symbol.for("react.suspense_list"),Fy=Symbol.for("react.memo"),mi=Symbol.for("react.lazy"),_N=Symbol.for("react.offscreen"),hb=Symbol.iterator;function El(e){return e===null||typeof e!="object"?null:(e=hb&&e[hb]||e["@@iterator"],typeof e=="function"?e:null)}var zt=Object.assign,Fp;function Ql(e){if(Fp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Fp=t&&t[1]||""}return`
`+Fp+e}var Bp=!1;function zp(e,t){if(!e||Bp)return"";Bp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Bp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ql(e):""}function RI(e){switch(e.tag){case 5:return Ql(e.type);case 16:return Ql("Lazy");case 13:return Ql("Suspense");case 19:return Ql("SuspenseList");case 0:case 2:case 15:return e=zp(e.type,!1),e;case 11:return e=zp(e.type.render,!1),e;case 1:return e=zp(e.type,!0),e;default:return""}}function kg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uo:return"Fragment";case co:return"Portal";case vg:return"Profiler";case Py:return"StrictMode";case bg:return"Suspense";case wg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case RN:return(e.displayName||"Context")+".Consumer";case DN:return(e._context.displayName||"Context")+".Provider";case Ly:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fy:return t=e.displayName||null,t!==null?t:kg(e.type)||"Memo";case mi:t=e._payload,e=e._init;try{return kg(e(t))}catch{}}return null}function _I(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kg(t);case 8:return t===Py?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function IN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function II(e){var t=IN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gu(e){e._valueTracker||(e._valueTracker=II(e))}function MN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=IN(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function lf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sg(e,t){var r=t.checked;return zt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function pb(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Vi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ON(e,t){t=t.checked,t!=null&&Oy(e,"checked",t,!1)}function Eg(e,t){ON(e,t);var r=Vi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ng(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ng(e,t.type,Vi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ng(e,t,r){(t!=="number"||lf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Zl=Array.isArray;function Ao(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Vi(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Cg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ue(91));return zt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ue(92));if(Zl(r)){if(1<r.length)throw Error(ue(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vi(r)}}function PN(e,t){var r=Vi(t.value),n=Vi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function yb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function LN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?LN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qu,FN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qu=qu||document.createElement("div"),qu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _c(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ac={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MI=["Webkit","ms","Moz","O"];Object.keys(ac).forEach(function(e){MI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ac[t]=ac[e]})});function BN(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ac.hasOwnProperty(e)&&ac[e]?(""+t).trim():t+"px"}function zN(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=BN(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var OI=zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tg(e,t){if(t){if(OI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ue(62))}}function Ag(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dg=null;function By(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rg=null,Do=null,Ro=null;function xb(e){if(e=vu(e)){if(typeof Rg!="function")throw Error(ue(280));var t=e.stateNode;t&&(t=Th(t),Rg(e.stateNode,e.type,t))}}function UN(e){Do?Ro?Ro.push(e):Ro=[e]:Do=e}function HN(){if(Do){var e=Do,t=Ro;if(Ro=Do=null,xb(e),t)for(e=0;e<t.length;e++)xb(t[e])}}function VN(e,t){return e(t)}function WN(){}var Up=!1;function $N(e,t,r){if(Up)return e(t,r);Up=!0;try{return VN(e,t,r)}finally{Up=!1,(Do!==null||Ro!==null)&&(WN(),HN())}}function Ic(e,t){var r=e.stateNode;if(r===null)return null;var n=Th(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ue(231,t,typeof r));return r}var _g=!1;if(Qs)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){_g=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{_g=!1}function PI(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var oc=!1,cf=null,uf=!1,Ig=null,LI={onError:function(e){oc=!0,cf=e}};function FI(e,t,r,n,s,i,a,l,c){oc=!1,cf=null,PI.apply(LI,arguments)}function BI(e,t,r,n,s,i,a,l,c){if(FI.apply(this,arguments),oc){if(oc){var u=cf;oc=!1,cf=null}else throw Error(ue(198));uf||(uf=!0,Ig=u)}}function Ga(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function YN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vb(e){if(Ga(e)!==e)throw Error(ue(188))}function zI(e){var t=e.alternate;if(!t){if(t=Ga(e),t===null)throw Error(ue(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return vb(s),e;if(i===n)return vb(s),t;i=i.sibling}throw Error(ue(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(ue(189))}}if(r.alternate!==n)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?e:t}function GN(e){return e=zI(e),e!==null?qN(e):null}function qN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qN(e);if(t!==null)return t;e=e.sibling}return null}var KN=bn.unstable_scheduleCallback,bb=bn.unstable_cancelCallback,UI=bn.unstable_shouldYield,HI=bn.unstable_requestPaint,Qt=bn.unstable_now,VI=bn.unstable_getCurrentPriorityLevel,zy=bn.unstable_ImmediatePriority,QN=bn.unstable_UserBlockingPriority,df=bn.unstable_NormalPriority,WI=bn.unstable_LowPriority,ZN=bn.unstable_IdlePriority,Eh=null,Es=null;function $I(e){if(Es&&typeof Es.onCommitFiberRoot=="function")try{Es.onCommitFiberRoot(Eh,e,void 0,(e.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:qI,YI=Math.log,GI=Math.LN2;function qI(e){return e>>>=0,e===0?32:31-(YI(e)/GI|0)|0}var Ku=64,Qu=4194304;function Xl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ff(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Xl(l):(i&=a,i!==0&&(n=Xl(i)))}else a=r&~s,a!==0?n=Xl(a):i!==0&&(n=Xl(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Zn(t),s=1<<r,n|=e[r],t&=~s;return n}function KI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QI(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Zn(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=KI(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Mg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function XN(){var e=Ku;return Ku<<=1,!(Ku&4194240)&&(Ku=64),e}function Hp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zn(t),e[t]=r}function ZI(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Zn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Uy(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Zn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var bt=0;function JN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var eC,Hy,tC,rC,nC,Og=!1,Zu=[],Ri=null,_i=null,Ii=null,Mc=new Map,Oc=new Map,xi=[],XI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wb(e,t){switch(e){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Mc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(t.pointerId)}}function Cl(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=vu(t),t!==null&&Hy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function JI(e,t,r,n,s){switch(t){case"focusin":return Ri=Cl(Ri,e,t,r,n,s),!0;case"dragenter":return _i=Cl(_i,e,t,r,n,s),!0;case"mouseover":return Ii=Cl(Ii,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Mc.set(i,Cl(Mc.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Oc.set(i,Cl(Oc.get(i)||null,e,t,r,n,s)),!0}return!1}function sC(e){var t=xa(e.target);if(t!==null){var r=Ga(t);if(r!==null){if(t=r.tag,t===13){if(t=YN(r),t!==null){e.blockedOn=t,nC(e.priority,function(){tC(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ad(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Pg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Dg=n,r.target.dispatchEvent(n),Dg=null}else return t=vu(r),t!==null&&Hy(t),e.blockedOn=r,!1;t.shift()}return!0}function kb(e,t,r){Ad(e)&&r.delete(t)}function eM(){Og=!1,Ri!==null&&Ad(Ri)&&(Ri=null),_i!==null&&Ad(_i)&&(_i=null),Ii!==null&&Ad(Ii)&&(Ii=null),Mc.forEach(kb),Oc.forEach(kb)}function jl(e,t){e.blockedOn===t&&(e.blockedOn=null,Og||(Og=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,eM)))}function Pc(e){function t(s){return jl(s,e)}if(0<Zu.length){jl(Zu[0],e);for(var r=1;r<Zu.length;r++){var n=Zu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ri!==null&&jl(Ri,e),_i!==null&&jl(_i,e),Ii!==null&&jl(Ii,e),Mc.forEach(t),Oc.forEach(t),r=0;r<xi.length;r++)n=xi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<xi.length&&(r=xi[0],r.blockedOn===null);)sC(r),r.blockedOn===null&&xi.shift()}var _o=si.ReactCurrentBatchConfig,hf=!0;function tM(e,t,r,n){var s=bt,i=_o.transition;_o.transition=null;try{bt=1,Vy(e,t,r,n)}finally{bt=s,_o.transition=i}}function rM(e,t,r,n){var s=bt,i=_o.transition;_o.transition=null;try{bt=4,Vy(e,t,r,n)}finally{bt=s,_o.transition=i}}function Vy(e,t,r,n){if(hf){var s=Pg(e,t,r,n);if(s===null)Xp(e,t,n,pf,r),wb(e,n);else if(JI(s,e,t,r,n))n.stopPropagation();else if(wb(e,n),t&4&&-1<XI.indexOf(e)){for(;s!==null;){var i=vu(s);if(i!==null&&eC(i),i=Pg(e,t,r,n),i===null&&Xp(e,t,n,pf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Xp(e,t,n,null,r)}}var pf=null;function Pg(e,t,r,n){if(pf=null,e=By(n),e=xa(e),e!==null)if(t=Ga(e),t===null)e=null;else if(r=t.tag,r===13){if(e=YN(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return pf=e,null}function iC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VI()){case zy:return 1;case QN:return 4;case df:case WI:return 16;case ZN:return 536870912;default:return 16}default:return 16}}var ki=null,Wy=null,Dd=null;function aC(){if(Dd)return Dd;var e,t=Wy,r=t.length,n,s="value"in ki?ki.value:ki.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return Dd=s.slice(e,1<n?1-n:void 0)}function Rd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xu(){return!0}function Sb(){return!1}function En(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xu:Sb,this.isPropagationStopped=Sb,this}return zt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),t}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$y=En(ll),xu=zt({},ll,{view:0,detail:0}),nM=En(xu),Vp,Wp,Tl,Nh=zt({},xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tl&&(Tl&&e.type==="mousemove"?(Vp=e.screenX-Tl.screenX,Wp=e.screenY-Tl.screenY):Wp=Vp=0,Tl=e),Vp)},movementY:function(e){return"movementY"in e?e.movementY:Wp}}),Eb=En(Nh),sM=zt({},Nh,{dataTransfer:0}),iM=En(sM),aM=zt({},xu,{relatedTarget:0}),$p=En(aM),oM=zt({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),lM=En(oM),cM=zt({},ll,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uM=En(cM),dM=zt({},ll,{data:0}),Nb=En(dM),fM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pM[e])?!!t[e]:!1}function Yy(){return mM}var gM=zt({},xu,{key:function(e){if(e.key){var t=fM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yy,charCode:function(e){return e.type==="keypress"?Rd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yM=En(gM),xM=zt({},Nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cb=En(xM),vM=zt({},xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yy}),bM=En(vM),wM=zt({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),kM=En(wM),SM=zt({},Nh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),EM=En(SM),NM=[9,13,27,32],Gy=Qs&&"CompositionEvent"in window,lc=null;Qs&&"documentMode"in document&&(lc=document.documentMode);var CM=Qs&&"TextEvent"in window&&!lc,oC=Qs&&(!Gy||lc&&8<lc&&11>=lc),jb=" ",Tb=!1;function lC(e,t){switch(e){case"keyup":return NM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fo=!1;function jM(e,t){switch(e){case"compositionend":return cC(t);case"keypress":return t.which!==32?null:(Tb=!0,jb);case"textInput":return e=t.data,e===jb&&Tb?null:e;default:return null}}function TM(e,t){if(fo)return e==="compositionend"||!Gy&&lC(e,t)?(e=aC(),Dd=Wy=ki=null,fo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oC&&t.locale!=="ko"?null:t.data;default:return null}}var AM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ab(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AM[e.type]:t==="textarea"}function uC(e,t,r,n){UN(n),t=mf(t,"onChange"),0<t.length&&(r=new $y("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var cc=null,Lc=null;function DM(e){wC(e,0)}function Ch(e){var t=mo(e);if(MN(t))return e}function RM(e,t){if(e==="change")return t}var dC=!1;if(Qs){var Yp;if(Qs){var Gp="oninput"in document;if(!Gp){var Db=document.createElement("div");Db.setAttribute("oninput","return;"),Gp=typeof Db.oninput=="function"}Yp=Gp}else Yp=!1;dC=Yp&&(!document.documentMode||9<document.documentMode)}function Rb(){cc&&(cc.detachEvent("onpropertychange",fC),Lc=cc=null)}function fC(e){if(e.propertyName==="value"&&Ch(Lc)){var t=[];uC(t,Lc,e,By(e)),$N(DM,t)}}function _M(e,t,r){e==="focusin"?(Rb(),cc=t,Lc=r,cc.attachEvent("onpropertychange",fC)):e==="focusout"&&Rb()}function IM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ch(Lc)}function MM(e,t){if(e==="click")return Ch(t)}function OM(e,t){if(e==="input"||e==="change")return Ch(t)}function PM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rs=typeof Object.is=="function"?Object.is:PM;function Fc(e,t){if(rs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!xg.call(t,s)||!rs(e[s],t[s]))return!1}return!0}function _b(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ib(e,t){var r=_b(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_b(r)}}function hC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pC(){for(var e=window,t=lf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=lf(e.document)}return t}function qy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LM(e){var t=pC(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hC(r.ownerDocument.documentElement,r)){if(n!==null&&qy(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Ib(r,i);var a=Ib(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FM=Qs&&"documentMode"in document&&11>=document.documentMode,ho=null,Lg=null,uc=null,Fg=!1;function Mb(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Fg||ho==null||ho!==lf(n)||(n=ho,"selectionStart"in n&&qy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),uc&&Fc(uc,n)||(uc=n,n=mf(Lg,"onSelect"),0<n.length&&(t=new $y("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ho)))}function Ju(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var po={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionend:Ju("Transition","TransitionEnd")},qp={},mC={};Qs&&(mC=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function jh(e){if(qp[e])return qp[e];if(!po[e])return e;var t=po[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in mC)return qp[e]=t[r];return e}var gC=jh("animationend"),yC=jh("animationiteration"),xC=jh("animationstart"),vC=jh("transitionend"),bC=new Map,Ob="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(e,t){bC.set(e,t),Ya(t,[e])}for(var Kp=0;Kp<Ob.length;Kp++){var Qp=Ob[Kp],BM=Qp.toLowerCase(),zM=Qp[0].toUpperCase()+Qp.slice(1);Xi(BM,"on"+zM)}Xi(gC,"onAnimationEnd");Xi(yC,"onAnimationIteration");Xi(xC,"onAnimationStart");Xi("dblclick","onDoubleClick");Xi("focusin","onFocus");Xi("focusout","onBlur");Xi(vC,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jl));function Pb(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,BI(n,t,void 0,e),e.currentTarget=null}function wC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Pb(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Pb(s,l,u),i=c}}}if(uf)throw e=Ig,uf=!1,Ig=null,e}function Ct(e,t){var r=t[Vg];r===void 0&&(r=t[Vg]=new Set);var n=e+"__bubble";r.has(n)||(kC(t,e,2,!1),r.add(n))}function Zp(e,t,r){var n=0;t&&(n|=4),kC(r,e,n,t)}var ed="_reactListening"+Math.random().toString(36).slice(2);function Bc(e){if(!e[ed]){e[ed]=!0,AN.forEach(function(r){r!=="selectionchange"&&(UM.has(r)||Zp(r,!1,e),Zp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ed]||(t[ed]=!0,Zp("selectionchange",!1,t))}}function kC(e,t,r,n){switch(iC(t)){case 1:var s=tM;break;case 4:s=rM;break;default:s=Vy}r=s.bind(null,t,r,e),s=void 0,!_g||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Xp(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=xa(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}$N(function(){var u=i,d=By(r),f=[];e:{var h=bC.get(e);if(h!==void 0){var p=$y,m=e;switch(e){case"keypress":if(Rd(r)===0)break e;case"keydown":case"keyup":p=yM;break;case"focusin":m="focus",p=$p;break;case"focusout":m="blur",p=$p;break;case"beforeblur":case"afterblur":p=$p;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Eb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=iM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=bM;break;case gC:case yC:case xC:p=lM;break;case vC:p=kM;break;case"scroll":p=nM;break;case"wheel":p=EM;break;case"copy":case"cut":case"paste":p=uM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Cb}var y=(t&4)!==0,b=!y&&e==="scroll",v=y?h!==null?h+"Capture":null:h;y=[];for(var x=u,w;x!==null;){w=x;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,v!==null&&(k=Ic(x,v),k!=null&&y.push(zc(x,k,w)))),b)break;x=x.return}0<y.length&&(h=new p(h,m,null,r,d),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Dg&&(m=r.relatedTarget||r.fromElement)&&(xa(m)||m[Zs]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?xa(m):null,m!==null&&(b=Ga(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=Eb,k="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=Cb,k="onPointerLeave",v="onPointerEnter",x="pointer"),b=p==null?h:mo(p),w=m==null?h:mo(m),h=new y(k,x+"leave",p,r,d),h.target=b,h.relatedTarget=w,k=null,xa(d)===u&&(y=new y(v,x+"enter",m,r,d),y.target=w,y.relatedTarget=b,k=y),b=k,p&&m)t:{for(y=p,v=m,x=0,w=y;w;w=io(w))x++;for(w=0,k=v;k;k=io(k))w++;for(;0<x-w;)y=io(y),x--;for(;0<w-x;)v=io(v),w--;for(;x--;){if(y===v||v!==null&&y===v.alternate)break t;y=io(y),v=io(v)}y=null}else y=null;p!==null&&Lb(f,h,p,y,!1),m!==null&&b!==null&&Lb(f,b,m,y,!0)}}e:{if(h=u?mo(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=RM;else if(Ab(h))if(dC)S=OM;else{S=IM;var E=_M}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=MM);if(S&&(S=S(e,u))){uC(f,S,r,d);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Ng(h,"number",h.value)}switch(E=u?mo(u):window,e){case"focusin":(Ab(E)||E.contentEditable==="true")&&(ho=E,Lg=u,uc=null);break;case"focusout":uc=Lg=ho=null;break;case"mousedown":Fg=!0;break;case"contextmenu":case"mouseup":case"dragend":Fg=!1,Mb(f,r,d);break;case"selectionchange":if(FM)break;case"keydown":case"keyup":Mb(f,r,d)}var N;if(Gy)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else fo?lC(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(oC&&r.locale!=="ko"&&(fo||C!=="onCompositionStart"?C==="onCompositionEnd"&&fo&&(N=aC()):(ki=d,Wy="value"in ki?ki.value:ki.textContent,fo=!0)),E=mf(u,C),0<E.length&&(C=new Nb(C,e,null,r,d),f.push({event:C,listeners:E}),N?C.data=N:(N=cC(r),N!==null&&(C.data=N)))),(N=CM?jM(e,r):TM(e,r))&&(u=mf(u,"onBeforeInput"),0<u.length&&(d=new Nb("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}wC(f,t)})}function zc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function mf(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ic(e,r),i!=null&&n.unshift(zc(e,i,s)),i=Ic(e,t),i!=null&&n.push(zc(e,i,s))),e=e.return}return n}function io(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lb(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Ic(r,i),c!=null&&a.unshift(zc(r,c,l))):s||(c=Ic(r,i),c!=null&&a.push(zc(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var HM=/\r\n?/g,VM=/\u0000|\uFFFD/g;function Fb(e){return(typeof e=="string"?e:""+e).replace(HM,`
`).replace(VM,"")}function td(e,t,r){if(t=Fb(t),Fb(e)!==t&&r)throw Error(ue(425))}function gf(){}var Bg=null,zg=null;function Ug(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hg=typeof setTimeout=="function"?setTimeout:void 0,WM=typeof clearTimeout=="function"?clearTimeout:void 0,Bb=typeof Promise=="function"?Promise:void 0,$M=typeof queueMicrotask=="function"?queueMicrotask:typeof Bb<"u"?function(e){return Bb.resolve(null).then(e).catch(YM)}:Hg;function YM(e){setTimeout(function(){throw e})}function Jp(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Pc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Pc(t)}function Mi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cl=Math.random().toString(36).slice(2),bs="__reactFiber$"+cl,Uc="__reactProps$"+cl,Zs="__reactContainer$"+cl,Vg="__reactEvents$"+cl,GM="__reactListeners$"+cl,qM="__reactHandles$"+cl;function xa(e){var t=e[bs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Zs]||r[bs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=zb(e);e!==null;){if(r=e[bs])return r;e=zb(e)}return t}e=r,r=e.parentNode}return null}function vu(e){return e=e[bs]||e[Zs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ue(33))}function Th(e){return e[Uc]||null}var Wg=[],go=-1;function Ji(e){return{current:e}}function Tt(e){0>go||(e.current=Wg[go],Wg[go]=null,go--)}function St(e,t){go++,Wg[go]=e.current,e.current=t}var Wi={},Pr=Ji(Wi),tn=Ji(!1),Ia=Wi;function Ho(e,t){var r=e.type.contextTypes;if(!r)return Wi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function rn(e){return e=e.childContextTypes,e!=null}function yf(){Tt(tn),Tt(Pr)}function Ub(e,t,r){if(Pr.current!==Wi)throw Error(ue(168));St(Pr,t),St(tn,r)}function SC(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(ue(108,_I(e)||"Unknown",s));return zt({},r,n)}function xf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wi,Ia=Pr.current,St(Pr,e),St(tn,tn.current),!0}function Hb(e,t,r){var n=e.stateNode;if(!n)throw Error(ue(169));r?(e=SC(e,t,Ia),n.__reactInternalMemoizedMergedChildContext=e,Tt(tn),Tt(Pr),St(Pr,e)):Tt(tn),St(tn,r)}var Us=null,Ah=!1,em=!1;function EC(e){Us===null?Us=[e]:Us.push(e)}function KM(e){Ah=!0,EC(e)}function ea(){if(!em&&Us!==null){em=!0;var e=0,t=bt;try{var r=Us;for(bt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Us=null,Ah=!1}catch(s){throw Us!==null&&(Us=Us.slice(e+1)),KN(zy,ea),s}finally{bt=t,em=!1}}return null}var yo=[],xo=0,vf=null,bf=0,An=[],Dn=0,Ma=null,Hs=1,Vs="";function ca(e,t){yo[xo++]=bf,yo[xo++]=vf,vf=e,bf=t}function NC(e,t,r){An[Dn++]=Hs,An[Dn++]=Vs,An[Dn++]=Ma,Ma=e;var n=Hs;e=Vs;var s=32-Zn(n)-1;n&=~(1<<s),r+=1;var i=32-Zn(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Hs=1<<32-Zn(t)+s|r<<s|n,Vs=i+e}else Hs=1<<i|r<<s|n,Vs=e}function Ky(e){e.return!==null&&(ca(e,1),NC(e,1,0))}function Qy(e){for(;e===vf;)vf=yo[--xo],yo[xo]=null,bf=yo[--xo],yo[xo]=null;for(;e===Ma;)Ma=An[--Dn],An[Dn]=null,Vs=An[--Dn],An[Dn]=null,Hs=An[--Dn],An[Dn]=null}var gn=null,pn=null,_t=!1,qn=null;function CC(e,t){var r=In(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Vb(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gn=e,pn=Mi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gn=e,pn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ma!==null?{id:Hs,overflow:Vs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=In(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,gn=e,pn=null,!0):!1;default:return!1}}function $g(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yg(e){if(_t){var t=pn;if(t){var r=t;if(!Vb(e,t)){if($g(e))throw Error(ue(418));t=Mi(r.nextSibling);var n=gn;t&&Vb(e,t)?CC(n,r):(e.flags=e.flags&-4097|2,_t=!1,gn=e)}}else{if($g(e))throw Error(ue(418));e.flags=e.flags&-4097|2,_t=!1,gn=e}}}function Wb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gn=e}function rd(e){if(e!==gn)return!1;if(!_t)return Wb(e),_t=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ug(e.type,e.memoizedProps)),t&&(t=pn)){if($g(e))throw jC(),Error(ue(418));for(;t;)CC(e,t),t=Mi(t.nextSibling)}if(Wb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){pn=Mi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}pn=null}}else pn=gn?Mi(e.stateNode.nextSibling):null;return!0}function jC(){for(var e=pn;e;)e=Mi(e.nextSibling)}function Vo(){pn=gn=null,_t=!1}function Zy(e){qn===null?qn=[e]:qn.push(e)}var QM=si.ReactCurrentBatchConfig;function Al(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var n=r.stateNode}if(!n)throw Error(ue(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,e))}return e}function nd(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $b(e){var t=e._init;return t(e._payload)}function TC(e){function t(v,x){if(e){var w=v.deletions;w===null?(v.deletions=[x],v.flags|=16):w.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Fi(v,x),v.index=0,v.sibling=null,v}function i(v,x,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<x?(v.flags|=2,x):w):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,w,k){return x===null||x.tag!==6?(x=om(w,v.mode,k),x.return=v,x):(x=s(x,w),x.return=v,x)}function c(v,x,w,k){var S=w.type;return S===uo?d(v,x,w.props.children,k,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===mi&&$b(S)===x.type)?(k=s(x,w.props),k.ref=Al(v,x,w),k.return=v,k):(k=Fd(w.type,w.key,w.props,null,v.mode,k),k.ref=Al(v,x,w),k.return=v,k)}function u(v,x,w,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=lm(w,v.mode,k),x.return=v,x):(x=s(x,w.children||[]),x.return=v,x)}function d(v,x,w,k,S){return x===null||x.tag!==7?(x=Ta(w,v.mode,k,S),x.return=v,x):(x=s(x,w),x.return=v,x)}function f(v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=om(""+x,v.mode,w),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yu:return w=Fd(x.type,x.key,x.props,null,v.mode,w),w.ref=Al(v,null,x),w.return=v,w;case co:return x=lm(x,v.mode,w),x.return=v,x;case mi:var k=x._init;return f(v,k(x._payload),w)}if(Zl(x)||El(x))return x=Ta(x,v.mode,w,null),x.return=v,x;nd(v,x)}return null}function h(v,x,w,k){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(v,x,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yu:return w.key===S?c(v,x,w,k):null;case co:return w.key===S?u(v,x,w,k):null;case mi:return S=w._init,h(v,x,S(w._payload),k)}if(Zl(w)||El(w))return S!==null?null:d(v,x,w,k,null);nd(v,w)}return null}function p(v,x,w,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(w)||null,l(x,v,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Yu:return v=v.get(k.key===null?w:k.key)||null,c(x,v,k,S);case co:return v=v.get(k.key===null?w:k.key)||null,u(x,v,k,S);case mi:var E=k._init;return p(v,x,w,E(k._payload),S)}if(Zl(k)||El(k))return v=v.get(w)||null,d(x,v,k,S,null);nd(x,k)}return null}function m(v,x,w,k){for(var S=null,E=null,N=x,C=x=0,T=null;N!==null&&C<w.length;C++){N.index>C?(T=N,N=null):T=N.sibling;var j=h(v,N,w[C],k);if(j===null){N===null&&(N=T);break}e&&N&&j.alternate===null&&t(v,N),x=i(j,x,C),E===null?S=j:E.sibling=j,E=j,N=T}if(C===w.length)return r(v,N),_t&&ca(v,C),S;if(N===null){for(;C<w.length;C++)N=f(v,w[C],k),N!==null&&(x=i(N,x,C),E===null?S=N:E.sibling=N,E=N);return _t&&ca(v,C),S}for(N=n(v,N);C<w.length;C++)T=p(N,v,C,w[C],k),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?C:T.key),x=i(T,x,C),E===null?S=T:E.sibling=T,E=T);return e&&N.forEach(function(I){return t(v,I)}),_t&&ca(v,C),S}function y(v,x,w,k){var S=El(w);if(typeof S!="function")throw Error(ue(150));if(w=S.call(w),w==null)throw Error(ue(151));for(var E=S=null,N=x,C=x=0,T=null,j=w.next();N!==null&&!j.done;C++,j=w.next()){N.index>C?(T=N,N=null):T=N.sibling;var I=h(v,N,j.value,k);if(I===null){N===null&&(N=T);break}e&&N&&I.alternate===null&&t(v,N),x=i(I,x,C),E===null?S=I:E.sibling=I,E=I,N=T}if(j.done)return r(v,N),_t&&ca(v,C),S;if(N===null){for(;!j.done;C++,j=w.next())j=f(v,j.value,k),j!==null&&(x=i(j,x,C),E===null?S=j:E.sibling=j,E=j);return _t&&ca(v,C),S}for(N=n(v,N);!j.done;C++,j=w.next())j=p(N,v,C,j.value,k),j!==null&&(e&&j.alternate!==null&&N.delete(j.key===null?C:j.key),x=i(j,x,C),E===null?S=j:E.sibling=j,E=j);return e&&N.forEach(function(H){return t(v,H)}),_t&&ca(v,C),S}function b(v,x,w,k){if(typeof w=="object"&&w!==null&&w.type===uo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Yu:e:{for(var S=w.key,E=x;E!==null;){if(E.key===S){if(S=w.type,S===uo){if(E.tag===7){r(v,E.sibling),x=s(E,w.props.children),x.return=v,v=x;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===mi&&$b(S)===E.type){r(v,E.sibling),x=s(E,w.props),x.ref=Al(v,E,w),x.return=v,v=x;break e}r(v,E);break}else t(v,E);E=E.sibling}w.type===uo?(x=Ta(w.props.children,v.mode,k,w.key),x.return=v,v=x):(k=Fd(w.type,w.key,w.props,null,v.mode,k),k.ref=Al(v,x,w),k.return=v,v=k)}return a(v);case co:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){r(v,x.sibling),x=s(x,w.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=lm(w,v.mode,k),x.return=v,v=x}return a(v);case mi:return E=w._init,b(v,x,E(w._payload),k)}if(Zl(w))return m(v,x,w,k);if(El(w))return y(v,x,w,k);nd(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(r(v,x.sibling),x=s(x,w),x.return=v,v=x):(r(v,x),x=om(w,v.mode,k),x.return=v,v=x),a(v)):r(v,x)}return b}var Wo=TC(!0),AC=TC(!1),wf=Ji(null),kf=null,vo=null,Xy=null;function Jy(){Xy=vo=kf=null}function ex(e){var t=wf.current;Tt(wf),e._currentValue=t}function Gg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Io(e,t){kf=e,Xy=vo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xr=!0),e.firstContext=null)}function Fn(e){var t=e._currentValue;if(Xy!==e)if(e={context:e,memoizedValue:t,next:null},vo===null){if(kf===null)throw Error(ue(308));vo=e,kf.dependencies={lanes:0,firstContext:e}}else vo=vo.next=e;return t}var va=null;function tx(e){va===null?va=[e]:va.push(e)}function DC(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,tx(t)):(r.next=s.next,s.next=r),t.interleaved=r,Xs(e,n)}function Xs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var gi=!1;function rx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ut&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Xs(e,r)}return s=n.interleaved,s===null?(t.next=t,tx(n)):(t.next=s.next,s.next=t),n.interleaved=t,Xs(e,r)}function _d(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Uy(e,r)}}function Yb(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Sf(e,t,r,n){var s=e.updateQueue;gi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,y=l;switch(h=t,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=zt({},f,h);break e;case 2:gi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Pa|=a,e.lanes=a,e.memoizedState=f}}function Gb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ue(191,s));s.call(n)}}}var bu={},Ns=Ji(bu),Hc=Ji(bu),Vc=Ji(bu);function ba(e){if(e===bu)throw Error(ue(174));return e}function nx(e,t){switch(St(Vc,t),St(Hc,e),St(Ns,bu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jg(t,e)}Tt(Ns),St(Ns,t)}function $o(){Tt(Ns),Tt(Hc),Tt(Vc)}function _C(e){ba(Vc.current);var t=ba(Ns.current),r=jg(t,e.type);t!==r&&(St(Hc,e),St(Ns,r))}function sx(e){Hc.current===e&&(Tt(Ns),Tt(Hc))}var Pt=Ji(0);function Ef(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tm=[];function ix(){for(var e=0;e<tm.length;e++)tm[e]._workInProgressVersionPrimary=null;tm.length=0}var Id=si.ReactCurrentDispatcher,rm=si.ReactCurrentBatchConfig,Oa=0,Ft=null,lr=null,dr=null,Nf=!1,dc=!1,Wc=0,ZM=0;function kr(){throw Error(ue(321))}function ax(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rs(e[r],t[r]))return!1;return!0}function ox(e,t,r,n,s,i){if(Oa=i,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Id.current=e===null||e.memoizedState===null?tO:rO,e=r(n,s),dc){i=0;do{if(dc=!1,Wc=0,25<=i)throw Error(ue(301));i+=1,dr=lr=null,t.updateQueue=null,Id.current=nO,e=r(n,s)}while(dc)}if(Id.current=Cf,t=lr!==null&&lr.next!==null,Oa=0,dr=lr=Ft=null,Nf=!1,t)throw Error(ue(300));return e}function lx(){var e=Wc!==0;return Wc=0,e}function hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Ft.memoizedState=dr=e:dr=dr.next=e,dr}function Bn(){if(lr===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=lr.next;var t=dr===null?Ft.memoizedState:dr.next;if(t!==null)dr=t,lr=e;else{if(e===null)throw Error(ue(310));lr=e,e={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},dr===null?Ft.memoizedState=dr=e:dr=dr.next=e}return dr}function $c(e,t){return typeof t=="function"?t(e):t}function nm(e){var t=Bn(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=lr,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Oa&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,Ft.lanes|=d,Pa|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,rs(n,t.memoizedState)||(Xr=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Ft.lanes|=i,Pa|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function sm(e){var t=Bn(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);rs(i,t.memoizedState)||(Xr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function IC(){}function MC(e,t){var r=Ft,n=Bn(),s=t(),i=!rs(n.memoizedState,s);if(i&&(n.memoizedState=s,Xr=!0),n=n.queue,cx(LC.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||dr!==null&&dr.memoizedState.tag&1){if(r.flags|=2048,Yc(9,PC.bind(null,r,n,s,t),void 0,null),pr===null)throw Error(ue(349));Oa&30||OC(r,t,s)}return s}function OC(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function PC(e,t,r,n){t.value=r,t.getSnapshot=n,FC(t)&&BC(e)}function LC(e,t,r){return r(function(){FC(t)&&BC(e)})}function FC(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rs(e,r)}catch{return!0}}function BC(e){var t=Xs(e,1);t!==null&&Xn(t,e,1,-1)}function qb(e){var t=hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:e},t.queue=e,e=e.dispatch=eO.bind(null,Ft,e),[t.memoizedState,e]}function Yc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function zC(){return Bn().memoizedState}function Md(e,t,r,n){var s=hs();Ft.flags|=e,s.memoizedState=Yc(1|t,r,void 0,n===void 0?null:n)}function Dh(e,t,r,n){var s=Bn();n=n===void 0?null:n;var i=void 0;if(lr!==null){var a=lr.memoizedState;if(i=a.destroy,n!==null&&ax(n,a.deps)){s.memoizedState=Yc(t,r,i,n);return}}Ft.flags|=e,s.memoizedState=Yc(1|t,r,i,n)}function Kb(e,t){return Md(8390656,8,e,t)}function cx(e,t){return Dh(2048,8,e,t)}function UC(e,t){return Dh(4,2,e,t)}function HC(e,t){return Dh(4,4,e,t)}function VC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function WC(e,t,r){return r=r!=null?r.concat([e]):null,Dh(4,4,VC.bind(null,t,e),r)}function ux(){}function $C(e,t){var r=Bn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ax(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function YC(e,t){var r=Bn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ax(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function GC(e,t,r){return Oa&21?(rs(r,t)||(r=XN(),Ft.lanes|=r,Pa|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xr=!0),e.memoizedState=r)}function XM(e,t){var r=bt;bt=r!==0&&4>r?r:4,e(!0);var n=rm.transition;rm.transition={};try{e(!1),t()}finally{bt=r,rm.transition=n}}function qC(){return Bn().memoizedState}function JM(e,t,r){var n=Li(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},KC(e))QC(t,r);else if(r=DC(e,t,r,n),r!==null){var s=$r();Xn(r,e,n,s),ZC(r,t,n)}}function eO(e,t,r){var n=Li(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(KC(e))QC(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,rs(l,a)){var c=t.interleaved;c===null?(s.next=s,tx(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=DC(e,t,s,n),r!==null&&(s=$r(),Xn(r,e,n,s),ZC(r,t,n))}}function KC(e){var t=e.alternate;return e===Ft||t!==null&&t===Ft}function QC(e,t){dc=Nf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ZC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Uy(e,r)}}var Cf={readContext:Fn,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},tO={readContext:Fn,useCallback:function(e,t){return hs().memoizedState=[e,t===void 0?null:t],e},useContext:Fn,useEffect:Kb,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Md(4194308,4,VC.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Md(4194308,4,e,t)},useInsertionEffect:function(e,t){return Md(4,2,e,t)},useMemo:function(e,t){var r=hs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=hs();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=JM.bind(null,Ft,e),[n.memoizedState,e]},useRef:function(e){var t=hs();return e={current:e},t.memoizedState=e},useState:qb,useDebugValue:ux,useDeferredValue:function(e){return hs().memoizedState=e},useTransition:function(){var e=qb(!1),t=e[0];return e=XM.bind(null,e[1]),hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ft,s=hs();if(_t){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=t(),pr===null)throw Error(ue(349));Oa&30||OC(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Kb(LC.bind(null,n,i,e),[e]),n.flags|=2048,Yc(9,PC.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=hs(),t=pr.identifierPrefix;if(_t){var r=Vs,n=Hs;r=(n&~(1<<32-Zn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Wc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ZM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rO={readContext:Fn,useCallback:$C,useContext:Fn,useEffect:cx,useImperativeHandle:WC,useInsertionEffect:UC,useLayoutEffect:HC,useMemo:YC,useReducer:nm,useRef:zC,useState:function(){return nm($c)},useDebugValue:ux,useDeferredValue:function(e){var t=Bn();return GC(t,lr.memoizedState,e)},useTransition:function(){var e=nm($c)[0],t=Bn().memoizedState;return[e,t]},useMutableSource:IC,useSyncExternalStore:MC,useId:qC,unstable_isNewReconciler:!1},nO={readContext:Fn,useCallback:$C,useContext:Fn,useEffect:cx,useImperativeHandle:WC,useInsertionEffect:UC,useLayoutEffect:HC,useMemo:YC,useReducer:sm,useRef:zC,useState:function(){return sm($c)},useDebugValue:ux,useDeferredValue:function(e){var t=Bn();return lr===null?t.memoizedState=e:GC(t,lr.memoizedState,e)},useTransition:function(){var e=sm($c)[0],t=Bn().memoizedState;return[e,t]},useMutableSource:IC,useSyncExternalStore:MC,useId:qC,unstable_isNewReconciler:!1};function Wn(e,t){if(e&&e.defaultProps){t=zt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function qg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:zt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Rh={isMounted:function(e){return(e=e._reactInternals)?Ga(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=$r(),s=Li(e),i=Gs(n,s);i.payload=t,r!=null&&(i.callback=r),t=Oi(e,i,s),t!==null&&(Xn(t,e,s,n),_d(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=$r(),s=Li(e),i=Gs(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Oi(e,i,s),t!==null&&(Xn(t,e,s,n),_d(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=$r(),n=Li(e),s=Gs(r,n);s.tag=2,t!=null&&(s.callback=t),t=Oi(e,s,n),t!==null&&(Xn(t,e,n,r),_d(t,e,n))}};function Qb(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!Fc(r,n)||!Fc(s,i):!0}function XC(e,t,r){var n=!1,s=Wi,i=t.contextType;return typeof i=="object"&&i!==null?i=Fn(i):(s=rn(t)?Ia:Pr.current,n=t.contextTypes,i=(n=n!=null)?Ho(e,s):Wi),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Rh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Zb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Rh.enqueueReplaceState(t,t.state,null)}function Kg(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},rx(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Fn(i):(i=rn(t)?Ia:Pr.current,s.context=Ho(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(qg(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Rh.enqueueReplaceState(s,s.state,null),Sf(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Yo(e,t){try{var r="",n=t;do r+=RI(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function im(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Qg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var sO=typeof WeakMap=="function"?WeakMap:Map;function JC(e,t,r){r=Gs(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Tf||(Tf=!0,a0=n),Qg(e,t)},r}function ej(e,t,r){r=Gs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Qg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Qg(e,t),typeof n!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function Xb(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new sO;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=xO.bind(null,e,t,r),t.then(e,e))}function Jb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ew(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gs(-1,1),t.tag=2,Oi(r,t,1))),r.lanes|=1),e)}var iO=si.ReactCurrentOwner,Xr=!1;function Hr(e,t,r,n){t.child=e===null?AC(t,null,r,n):Wo(t,e.child,r,n)}function tw(e,t,r,n,s){r=r.render;var i=t.ref;return Io(t,s),n=ox(e,t,r,n,i,s),r=lx(),e!==null&&!Xr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Js(e,t,s)):(_t&&r&&Ky(t),t.flags|=1,Hr(e,t,n,s),t.child)}function rw(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!xx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,tj(e,t,i,n,s)):(e=Fd(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Fc,r(a,n)&&e.ref===t.ref)return Js(e,t,s)}return t.flags|=1,e=Fi(i,n),e.ref=t.ref,e.return=t,t.child=e}function tj(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Fc(i,n)&&e.ref===t.ref)if(Xr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Xr=!0);else return t.lanes=e.lanes,Js(e,t,s)}return Zg(e,t,r,n,s)}function rj(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(wo,fn),fn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,St(wo,fn),fn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,St(wo,fn),fn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,St(wo,fn),fn|=n;return Hr(e,t,s,r),t.child}function nj(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Zg(e,t,r,n,s){var i=rn(r)?Ia:Pr.current;return i=Ho(t,i),Io(t,s),r=ox(e,t,r,n,i,s),n=lx(),e!==null&&!Xr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Js(e,t,s)):(_t&&n&&Ky(t),t.flags|=1,Hr(e,t,r,s),t.child)}function nw(e,t,r,n,s){if(rn(r)){var i=!0;xf(t)}else i=!1;if(Io(t,s),t.stateNode===null)Od(e,t),XC(t,r,n),Kg(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Fn(u):(u=rn(r)?Ia:Pr.current,u=Ho(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Zb(t,a,n,u),gi=!1;var h=t.memoizedState;a.state=h,Sf(t,n,a,s),c=t.memoizedState,l!==n||h!==c||tn.current||gi?(typeof d=="function"&&(qg(t,r,d,n),c=t.memoizedState),(l=gi||Qb(t,r,l,n,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,RC(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Wn(t.type,l),a.props=u,f=t.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Fn(c):(c=rn(r)?Ia:Pr.current,c=Ho(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&Zb(t,a,n,c),gi=!1,h=t.memoizedState,a.state=h,Sf(t,n,a,s);var m=t.memoizedState;l!==f||h!==m||tn.current||gi?(typeof p=="function"&&(qg(t,r,p,n),m=t.memoizedState),(u=gi||Qb(t,r,u,n,h,m,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Xg(e,t,r,n,i,s)}function Xg(e,t,r,n,s,i){nj(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Hb(t,r,!1),Js(e,t,i);n=t.stateNode,iO.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Wo(t,e.child,null,i),t.child=Wo(t,null,l,i)):Hr(e,t,l,i),t.memoizedState=n.state,s&&Hb(t,r,!0),t.child}function sj(e){var t=e.stateNode;t.pendingContext?Ub(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ub(e,t.context,!1),nx(e,t.containerInfo)}function sw(e,t,r,n,s){return Vo(),Zy(s),t.flags|=256,Hr(e,t,r,n),t.child}var Jg={dehydrated:null,treeContext:null,retryLane:0};function e0(e){return{baseLanes:e,cachePool:null,transitions:null}}function ij(e,t,r){var n=t.pendingProps,s=Pt.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),St(Pt,s&1),e===null)return Yg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Mh(a,n,0,null),e=Ta(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=e0(r),t.memoizedState=Jg,e):dx(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return aO(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Fi(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Fi(l,i):(i=Ta(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?e0(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=Jg,n}return i=e.child,e=i.sibling,n=Fi(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function dx(e,t){return t=Mh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sd(e,t,r,n){return n!==null&&Zy(n),Wo(t,e.child,null,r),e=dx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aO(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=im(Error(ue(422))),sd(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Mh({mode:"visible",children:n.children},s,0,null),i=Ta(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Wo(t,e.child,null,a),t.child.memoizedState=e0(a),t.memoizedState=Jg,i);if(!(t.mode&1))return sd(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ue(419)),n=im(i,n,void 0),sd(e,t,a,n)}if(l=(a&e.childLanes)!==0,Xr||l){if(n=pr,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xs(e,s),Xn(n,e,s,-1))}return yx(),n=im(Error(ue(421))),sd(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=vO.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,pn=Mi(s.nextSibling),gn=t,_t=!0,qn=null,e!==null&&(An[Dn++]=Hs,An[Dn++]=Vs,An[Dn++]=Ma,Hs=e.id,Vs=e.overflow,Ma=t),t=dx(t,n.children),t.flags|=4096,t)}function iw(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Gg(e.return,t,r)}function am(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function aj(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Hr(e,t,n.children,r),n=Pt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iw(e,r,t);else if(e.tag===19)iw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(St(Pt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ef(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),am(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ef(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}am(t,!0,r,null,i);break;case"together":am(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Od(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Js(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Pa|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ue(153));if(t.child!==null){for(e=t.child,r=Fi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Fi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function oO(e,t,r){switch(t.tag){case 3:sj(t),Vo();break;case 5:_C(t);break;case 1:rn(t.type)&&xf(t);break;case 4:nx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;St(wf,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(St(Pt,Pt.current&1),t.flags|=128,null):r&t.child.childLanes?ij(e,t,r):(St(Pt,Pt.current&1),e=Js(e,t,r),e!==null?e.sibling:null);St(Pt,Pt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return aj(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),St(Pt,Pt.current),n)break;return null;case 22:case 23:return t.lanes=0,rj(e,t,r)}return Js(e,t,r)}var oj,t0,lj,cj;oj=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};t0=function(){};lj=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ba(Ns.current);var i=null;switch(r){case"input":s=Sg(e,s),n=Sg(e,n),i=[];break;case"select":s=zt({},s,{value:void 0}),n=zt({},n,{value:void 0}),i=[];break;case"textarea":s=Cg(e,s),n=Cg(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=gf)}Tg(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ct("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};cj=function(e,t,r,n){r!==n&&(t.flags|=4)};function Dl(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Sr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function lO(e,t,r){var n=t.pendingProps;switch(Qy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(t),null;case 1:return rn(t.type)&&yf(),Sr(t),null;case 3:return n=t.stateNode,$o(),Tt(tn),Tt(Pr),ix(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(rd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qn!==null&&(c0(qn),qn=null))),t0(e,t),Sr(t),null;case 5:sx(t);var s=ba(Vc.current);if(r=t.type,e!==null&&t.stateNode!=null)lj(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ue(166));return Sr(t),null}if(e=ba(Ns.current),rd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[bs]=t,n[Uc]=i,e=(t.mode&1)!==0,r){case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":case"embed":Ct("load",n);break;case"video":case"audio":for(s=0;s<Jl.length;s++)Ct(Jl[s],n);break;case"source":Ct("error",n);break;case"img":case"image":case"link":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"input":pb(n,i),Ct("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ct("invalid",n);break;case"textarea":gb(n,i),Ct("invalid",n)}Tg(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&td(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&td(n.textContent,l,e),s=["children",""+l]):Rc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ct("scroll",n)}switch(r){case"input":Gu(n),mb(n,i,!0);break;case"textarea":Gu(n),yb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=gf)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=LN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[bs]=t,e[Uc]=n,oj(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ag(r,n),r){case"dialog":Ct("cancel",e),Ct("close",e),s=n;break;case"iframe":case"object":case"embed":Ct("load",e),s=n;break;case"video":case"audio":for(s=0;s<Jl.length;s++)Ct(Jl[s],e);s=n;break;case"source":Ct("error",e),s=n;break;case"img":case"image":case"link":Ct("error",e),Ct("load",e),s=n;break;case"details":Ct("toggle",e),s=n;break;case"input":pb(e,n),s=Sg(e,n),Ct("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=zt({},n,{value:void 0}),Ct("invalid",e);break;case"textarea":gb(e,n),s=Cg(e,n),Ct("invalid",e);break;default:s=n}Tg(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?zN(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&FN(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&_c(e,c):typeof c=="number"&&_c(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ct("scroll",e):c!=null&&Oy(e,i,c,a))}switch(r){case"input":Gu(e),mb(e,n,!1);break;case"textarea":Gu(e),yb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Vi(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ao(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ao(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=gf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Sr(t),null;case 6:if(e&&t.stateNode!=null)cj(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ue(166));if(r=ba(Vc.current),ba(Ns.current),rd(t)){if(n=t.stateNode,r=t.memoizedProps,n[bs]=t,(i=n.nodeValue!==r)&&(e=gn,e!==null))switch(e.tag){case 3:td(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&td(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[bs]=t,t.stateNode=n}return Sr(t),null;case 13:if(Tt(Pt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_t&&pn!==null&&t.mode&1&&!(t.flags&128))jC(),Vo(),t.flags|=98560,i=!1;else if(i=rd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ue(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ue(317));i[bs]=t}else Vo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Sr(t),i=!1}else qn!==null&&(c0(qn),qn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Pt.current&1?ur===0&&(ur=3):yx())),t.updateQueue!==null&&(t.flags|=4),Sr(t),null);case 4:return $o(),t0(e,t),e===null&&Bc(t.stateNode.containerInfo),Sr(t),null;case 10:return ex(t.type._context),Sr(t),null;case 17:return rn(t.type)&&yf(),Sr(t),null;case 19:if(Tt(Pt),i=t.memoizedState,i===null)return Sr(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)Dl(i,!1);else{if(ur!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ef(e),a!==null){for(t.flags|=128,Dl(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return St(Pt,Pt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Qt()>Go&&(t.flags|=128,n=!0,Dl(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ef(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Dl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!_t)return Sr(t),null}else 2*Qt()-i.renderingStartTime>Go&&r!==1073741824&&(t.flags|=128,n=!0,Dl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qt(),t.sibling=null,r=Pt.current,St(Pt,n?r&1|2:r&1),t):(Sr(t),null);case 22:case 23:return gx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?fn&1073741824&&(Sr(t),t.subtreeFlags&6&&(t.flags|=8192)):Sr(t),null;case 24:return null;case 25:return null}throw Error(ue(156,t.tag))}function cO(e,t){switch(Qy(t),t.tag){case 1:return rn(t.type)&&yf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $o(),Tt(tn),Tt(Pr),ix(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return sx(t),null;case 13:if(Tt(Pt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ue(340));Vo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tt(Pt),null;case 4:return $o(),null;case 10:return ex(t.type._context),null;case 22:case 23:return gx(),null;case 24:return null;default:return null}}var id=!1,Rr=!1,uO=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function bo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){$t(e,t,n)}else r.current=null}function r0(e,t,r){try{r()}catch(n){$t(e,t,n)}}var aw=!1;function dO(e,t){if(Bg=hf,e=pC(),qy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==i||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=a),h===i&&++d===n&&(c=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(zg={focusedElem:e,selectionRange:r},hf=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,b=m.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:Wn(t.type,y),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(k){$t(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return m=aw,aw=!1,m}function fc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&r0(t,r,i)}s=s.next}while(s!==n)}}function _h(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function n0(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function uj(e){var t=e.alternate;t!==null&&(e.alternate=null,uj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bs],delete t[Uc],delete t[Vg],delete t[GM],delete t[qM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dj(e){return e.tag===5||e.tag===3||e.tag===4}function ow(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function s0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=gf));else if(n!==4&&(e=e.child,e!==null))for(s0(e,t,r),e=e.sibling;e!==null;)s0(e,t,r),e=e.sibling}function i0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(i0(e,t,r),e=e.sibling;e!==null;)i0(e,t,r),e=e.sibling}var yr=null,$n=!1;function di(e,t,r){for(r=r.child;r!==null;)fj(e,t,r),r=r.sibling}function fj(e,t,r){if(Es&&typeof Es.onCommitFiberUnmount=="function")try{Es.onCommitFiberUnmount(Eh,r)}catch{}switch(r.tag){case 5:Rr||bo(r,t);case 6:var n=yr,s=$n;yr=null,di(e,t,r),yr=n,$n=s,yr!==null&&($n?(e=yr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):yr.removeChild(r.stateNode));break;case 18:yr!==null&&($n?(e=yr,r=r.stateNode,e.nodeType===8?Jp(e.parentNode,r):e.nodeType===1&&Jp(e,r),Pc(e)):Jp(yr,r.stateNode));break;case 4:n=yr,s=$n,yr=r.stateNode.containerInfo,$n=!0,di(e,t,r),yr=n,$n=s;break;case 0:case 11:case 14:case 15:if(!Rr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&r0(r,t,a),s=s.next}while(s!==n)}di(e,t,r);break;case 1:if(!Rr&&(bo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){$t(r,t,l)}di(e,t,r);break;case 21:di(e,t,r);break;case 22:r.mode&1?(Rr=(n=Rr)||r.memoizedState!==null,di(e,t,r),Rr=n):di(e,t,r);break;default:di(e,t,r)}}function lw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new uO),t.forEach(function(n){var s=bO.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Hn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:yr=l.stateNode,$n=!1;break e;case 3:yr=l.stateNode.containerInfo,$n=!0;break e;case 4:yr=l.stateNode.containerInfo,$n=!0;break e}l=l.return}if(yr===null)throw Error(ue(160));fj(i,a,s),yr=null,$n=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){$t(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hj(t,e),t=t.sibling}function hj(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hn(t,e),ds(e),n&4){try{fc(3,e,e.return),_h(3,e)}catch(y){$t(e,e.return,y)}try{fc(5,e,e.return)}catch(y){$t(e,e.return,y)}}break;case 1:Hn(t,e),ds(e),n&512&&r!==null&&bo(r,r.return);break;case 5:if(Hn(t,e),ds(e),n&512&&r!==null&&bo(r,r.return),e.flags&32){var s=e.stateNode;try{_c(s,"")}catch(y){$t(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ON(s,i),Ag(l,a);var u=Ag(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?zN(s,f):d==="dangerouslySetInnerHTML"?FN(s,f):d==="children"?_c(s,f):Oy(s,d,f,u)}switch(l){case"input":Eg(s,i);break;case"textarea":PN(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ao(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ao(s,!!i.multiple,i.defaultValue,!0):Ao(s,!!i.multiple,i.multiple?[]:"",!1))}s[Uc]=i}catch(y){$t(e,e.return,y)}}break;case 6:if(Hn(t,e),ds(e),n&4){if(e.stateNode===null)throw Error(ue(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){$t(e,e.return,y)}}break;case 3:if(Hn(t,e),ds(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Pc(t.containerInfo)}catch(y){$t(e,e.return,y)}break;case 4:Hn(t,e),ds(e);break;case 13:Hn(t,e),ds(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(px=Qt())),n&4&&lw(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Rr=(u=Rr)||d,Hn(t,e),Rr=u):Hn(t,e),ds(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ce=e,d=e.child;d!==null;){for(f=Ce=d;Ce!==null;){switch(h=Ce,p=h.child,h.tag){case 0:case 11:case 14:case 15:fc(4,h,h.return);break;case 1:bo(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){$t(n,r,y)}}break;case 5:bo(h,h.return);break;case 22:if(h.memoizedState!==null){uw(f);continue}}p!==null?(p.return=h,Ce=p):uw(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=BN("display",a))}catch(y){$t(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){$t(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Hn(t,e),ds(e),n&4&&lw(e);break;case 21:break;default:Hn(t,e),ds(e)}}function ds(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(dj(r)){var n=r;break e}r=r.return}throw Error(ue(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(_c(s,""),n.flags&=-33);var i=ow(e);i0(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=ow(e);s0(e,l,a);break;default:throw Error(ue(161))}}catch(c){$t(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fO(e,t,r){Ce=e,pj(e)}function pj(e,t,r){for(var n=(e.mode&1)!==0;Ce!==null;){var s=Ce,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||id;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Rr;l=id;var u=Rr;if(id=a,(Rr=c)&&!u)for(Ce=s;Ce!==null;)a=Ce,c=a.child,a.tag===22&&a.memoizedState!==null?dw(s):c!==null?(c.return=a,Ce=c):dw(s);for(;i!==null;)Ce=i,pj(i),i=i.sibling;Ce=s,id=l,Rr=u}cw(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ce=i):cw(e)}}function cw(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Rr||_h(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Rr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Wn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Gb(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Gb(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Pc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}Rr||t.flags&512&&n0(t)}catch(h){$t(t,t.return,h)}}if(t===e){Ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function uw(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function dw(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{_h(4,t)}catch(c){$t(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){$t(t,s,c)}}var i=t.return;try{n0(t)}catch(c){$t(t,i,c)}break;case 5:var a=t.return;try{n0(t)}catch(c){$t(t,a,c)}}}catch(c){$t(t,t.return,c)}if(t===e){Ce=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ce=l;break}Ce=t.return}}var hO=Math.ceil,jf=si.ReactCurrentDispatcher,fx=si.ReactCurrentOwner,Ln=si.ReactCurrentBatchConfig,ut=0,pr=null,sr=null,vr=0,fn=0,wo=Ji(0),ur=0,Gc=null,Pa=0,Ih=0,hx=0,hc=null,Qr=null,px=0,Go=1/0,zs=null,Tf=!1,a0=null,Pi=null,ad=!1,Si=null,Af=0,pc=0,o0=null,Pd=-1,Ld=0;function $r(){return ut&6?Qt():Pd!==-1?Pd:Pd=Qt()}function Li(e){return e.mode&1?ut&2&&vr!==0?vr&-vr:QM.transition!==null?(Ld===0&&(Ld=XN()),Ld):(e=bt,e!==0||(e=window.event,e=e===void 0?16:iC(e.type)),e):1}function Xn(e,t,r,n){if(50<pc)throw pc=0,o0=null,Error(ue(185));yu(e,r,n),(!(ut&2)||e!==pr)&&(e===pr&&(!(ut&2)&&(Ih|=r),ur===4&&vi(e,vr)),nn(e,n),r===1&&ut===0&&!(t.mode&1)&&(Go=Qt()+500,Ah&&ea()))}function nn(e,t){var r=e.callbackNode;QI(e,t);var n=ff(e,e===pr?vr:0);if(n===0)r!==null&&bb(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&bb(r),t===1)e.tag===0?KM(fw.bind(null,e)):EC(fw.bind(null,e)),$M(function(){!(ut&6)&&ea()}),r=null;else{switch(JN(n)){case 1:r=zy;break;case 4:r=QN;break;case 16:r=df;break;case 536870912:r=ZN;break;default:r=df}r=kj(r,mj.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function mj(e,t){if(Pd=-1,Ld=0,ut&6)throw Error(ue(327));var r=e.callbackNode;if(Mo()&&e.callbackNode!==r)return null;var n=ff(e,e===pr?vr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Df(e,n);else{t=n;var s=ut;ut|=2;var i=yj();(pr!==e||vr!==t)&&(zs=null,Go=Qt()+500,ja(e,t));do try{gO();break}catch(l){gj(e,l)}while(!0);Jy(),jf.current=i,ut=s,sr!==null?t=0:(pr=null,vr=0,t=ur)}if(t!==0){if(t===2&&(s=Mg(e),s!==0&&(n=s,t=l0(e,s))),t===1)throw r=Gc,ja(e,0),vi(e,n),nn(e,Qt()),r;if(t===6)vi(e,n);else{if(s=e.current.alternate,!(n&30)&&!pO(s)&&(t=Df(e,n),t===2&&(i=Mg(e),i!==0&&(n=i,t=l0(e,i))),t===1))throw r=Gc,ja(e,0),vi(e,n),nn(e,Qt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(ue(345));case 2:ua(e,Qr,zs);break;case 3:if(vi(e,n),(n&130023424)===n&&(t=px+500-Qt(),10<t)){if(ff(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){$r(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Hg(ua.bind(null,e,Qr,zs),t);break}ua(e,Qr,zs);break;case 4:if(vi(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Zn(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=Qt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hO(n/1960))-n,10<n){e.timeoutHandle=Hg(ua.bind(null,e,Qr,zs),n);break}ua(e,Qr,zs);break;case 5:ua(e,Qr,zs);break;default:throw Error(ue(329))}}}return nn(e,Qt()),e.callbackNode===r?mj.bind(null,e):null}function l0(e,t){var r=hc;return e.current.memoizedState.isDehydrated&&(ja(e,t).flags|=256),e=Df(e,t),e!==2&&(t=Qr,Qr=r,t!==null&&c0(t)),e}function c0(e){Qr===null?Qr=e:Qr.push.apply(Qr,e)}function pO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!rs(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vi(e,t){for(t&=~hx,t&=~Ih,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zn(t),n=1<<r;e[r]=-1,t&=~n}}function fw(e){if(ut&6)throw Error(ue(327));Mo();var t=ff(e,0);if(!(t&1))return nn(e,Qt()),null;var r=Df(e,t);if(e.tag!==0&&r===2){var n=Mg(e);n!==0&&(t=n,r=l0(e,n))}if(r===1)throw r=Gc,ja(e,0),vi(e,t),nn(e,Qt()),r;if(r===6)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ua(e,Qr,zs),nn(e,Qt()),null}function mx(e,t){var r=ut;ut|=1;try{return e(t)}finally{ut=r,ut===0&&(Go=Qt()+500,Ah&&ea())}}function La(e){Si!==null&&Si.tag===0&&!(ut&6)&&Mo();var t=ut;ut|=1;var r=Ln.transition,n=bt;try{if(Ln.transition=null,bt=1,e)return e()}finally{bt=n,Ln.transition=r,ut=t,!(ut&6)&&ea()}}function gx(){fn=wo.current,Tt(wo)}function ja(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,WM(r)),sr!==null)for(r=sr.return;r!==null;){var n=r;switch(Qy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&yf();break;case 3:$o(),Tt(tn),Tt(Pr),ix();break;case 5:sx(n);break;case 4:$o();break;case 13:Tt(Pt);break;case 19:Tt(Pt);break;case 10:ex(n.type._context);break;case 22:case 23:gx()}r=r.return}if(pr=e,sr=e=Fi(e.current,null),vr=fn=t,ur=0,Gc=null,hx=Ih=Pa=0,Qr=hc=null,va!==null){for(t=0;t<va.length;t++)if(r=va[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}va=null}return e}function gj(e,t){do{var r=sr;try{if(Jy(),Id.current=Cf,Nf){for(var n=Ft.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Nf=!1}if(Oa=0,dr=lr=Ft=null,dc=!1,Wc=0,fx.current=null,r===null||r.return===null){ur=1,Gc=t,sr=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=vr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Jb(a);if(p!==null){p.flags&=-257,ew(p,a,l,i,t),p.mode&1&&Xb(i,u,t),t=p,c=u;var m=t.updateQueue;if(m===null){var y=new Set;y.add(c),t.updateQueue=y}else m.add(c);break e}else{if(!(t&1)){Xb(i,u,t),yx();break e}c=Error(ue(426))}}else if(_t&&l.mode&1){var b=Jb(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ew(b,a,l,i,t),Zy(Yo(c,l));break e}}i=c=Yo(c,l),ur!==4&&(ur=2),hc===null?hc=[i]:hc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=JC(i,c,t);Yb(i,v);break e;case 1:l=c;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Pi===null||!Pi.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=ej(i,l,t);Yb(i,k);break e}}i=i.return}while(i!==null)}vj(r)}catch(S){t=S,sr===r&&r!==null&&(sr=r=r.return);continue}break}while(!0)}function yj(){var e=jf.current;return jf.current=Cf,e===null?Cf:e}function yx(){(ur===0||ur===3||ur===2)&&(ur=4),pr===null||!(Pa&268435455)&&!(Ih&268435455)||vi(pr,vr)}function Df(e,t){var r=ut;ut|=2;var n=yj();(pr!==e||vr!==t)&&(zs=null,ja(e,t));do try{mO();break}catch(s){gj(e,s)}while(!0);if(Jy(),ut=r,jf.current=n,sr!==null)throw Error(ue(261));return pr=null,vr=0,ur}function mO(){for(;sr!==null;)xj(sr)}function gO(){for(;sr!==null&&!UI();)xj(sr)}function xj(e){var t=wj(e.alternate,e,fn);e.memoizedProps=e.pendingProps,t===null?vj(e):sr=t,fx.current=null}function vj(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=cO(r,t),r!==null){r.flags&=32767,sr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ur=6,sr=null;return}}else if(r=lO(r,t,fn),r!==null){sr=r;return}if(t=t.sibling,t!==null){sr=t;return}sr=t=e}while(t!==null);ur===0&&(ur=5)}function ua(e,t,r){var n=bt,s=Ln.transition;try{Ln.transition=null,bt=1,yO(e,t,r,n)}finally{Ln.transition=s,bt=n}return null}function yO(e,t,r,n){do Mo();while(Si!==null);if(ut&6)throw Error(ue(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ZI(e,i),e===pr&&(sr=pr=null,vr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ad||(ad=!0,kj(df,function(){return Mo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ln.transition,Ln.transition=null;var a=bt;bt=1;var l=ut;ut|=4,fx.current=null,dO(e,r),hj(r,e),LM(zg),hf=!!Bg,zg=Bg=null,e.current=r,fO(r),HI(),ut=l,bt=a,Ln.transition=i}else e.current=r;if(ad&&(ad=!1,Si=e,Af=s),i=e.pendingLanes,i===0&&(Pi=null),$I(r.stateNode),nn(e,Qt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Tf)throw Tf=!1,e=a0,a0=null,e;return Af&1&&e.tag!==0&&Mo(),i=e.pendingLanes,i&1?e===o0?pc++:(pc=0,o0=e):pc=0,ea(),null}function Mo(){if(Si!==null){var e=JN(Af),t=Ln.transition,r=bt;try{if(Ln.transition=null,bt=16>e?16:e,Si===null)var n=!1;else{if(e=Si,Si=null,Af=0,ut&6)throw Error(ue(331));var s=ut;for(ut|=4,Ce=e.current;Ce!==null;){var i=Ce,a=i.child;if(Ce.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ce=u;Ce!==null;){var d=Ce;switch(d.tag){case 0:case 11:case 15:fc(8,d,i)}var f=d.child;if(f!==null)f.return=d,Ce=f;else for(;Ce!==null;){d=Ce;var h=d.sibling,p=d.return;if(uj(d),d===u){Ce=null;break}if(h!==null){h.return=p,Ce=h;break}Ce=p}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Ce=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Ce=a;else e:for(;Ce!==null;){if(i=Ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ce=v;break e}Ce=i.return}}var x=e.current;for(Ce=x;Ce!==null;){a=Ce;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Ce=w;else e:for(a=x;Ce!==null;){if(l=Ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_h(9,l)}}catch(S){$t(l,l.return,S)}if(l===a){Ce=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Ce=k;break e}Ce=l.return}}if(ut=s,ea(),Es&&typeof Es.onPostCommitFiberRoot=="function")try{Es.onPostCommitFiberRoot(Eh,e)}catch{}n=!0}return n}finally{bt=r,Ln.transition=t}}return!1}function hw(e,t,r){t=Yo(r,t),t=JC(e,t,1),e=Oi(e,t,1),t=$r(),e!==null&&(yu(e,1,t),nn(e,t))}function $t(e,t,r){if(e.tag===3)hw(e,e,r);else for(;t!==null;){if(t.tag===3){hw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Pi===null||!Pi.has(n))){e=Yo(r,e),e=ej(t,e,1),t=Oi(t,e,1),e=$r(),t!==null&&(yu(t,1,e),nn(t,e));break}}t=t.return}}function xO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=$r(),e.pingedLanes|=e.suspendedLanes&r,pr===e&&(vr&r)===r&&(ur===4||ur===3&&(vr&130023424)===vr&&500>Qt()-px?ja(e,0):hx|=r),nn(e,t)}function bj(e,t){t===0&&(e.mode&1?(t=Qu,Qu<<=1,!(Qu&130023424)&&(Qu=4194304)):t=1);var r=$r();e=Xs(e,t),e!==null&&(yu(e,t,r),nn(e,r))}function vO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),bj(e,r)}function bO(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(t),bj(e,r)}var wj;wj=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||tn.current)Xr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xr=!1,oO(e,t,r);Xr=!!(e.flags&131072)}else Xr=!1,_t&&t.flags&1048576&&NC(t,bf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Od(e,t),e=t.pendingProps;var s=Ho(t,Pr.current);Io(t,r),s=ox(null,t,n,e,s,r);var i=lx();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rn(n)?(i=!0,xf(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rx(t),s.updater=Rh,t.stateNode=s,s._reactInternals=t,Kg(t,n,e,r),t=Xg(null,t,n,!0,i,r)):(t.tag=0,_t&&i&&Ky(t),Hr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Od(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=kO(n),e=Wn(n,e),s){case 0:t=Zg(null,t,n,e,r);break e;case 1:t=nw(null,t,n,e,r);break e;case 11:t=tw(null,t,n,e,r);break e;case 14:t=rw(null,t,n,Wn(n.type,e),r);break e}throw Error(ue(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wn(n,s),Zg(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wn(n,s),nw(e,t,n,s,r);case 3:e:{if(sj(t),e===null)throw Error(ue(387));n=t.pendingProps,i=t.memoizedState,s=i.element,RC(e,t),Sf(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Yo(Error(ue(423)),t),t=sw(e,t,n,r,s);break e}else if(n!==s){s=Yo(Error(ue(424)),t),t=sw(e,t,n,r,s);break e}else for(pn=Mi(t.stateNode.containerInfo.firstChild),gn=t,_t=!0,qn=null,r=AC(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Vo(),n===s){t=Js(e,t,r);break e}Hr(e,t,n,r)}t=t.child}return t;case 5:return _C(t),e===null&&Yg(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Ug(n,s)?a=null:i!==null&&Ug(n,i)&&(t.flags|=32),nj(e,t),Hr(e,t,a,r),t.child;case 6:return e===null&&Yg(t),null;case 13:return ij(e,t,r);case 4:return nx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Wo(t,null,n,r):Hr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wn(n,s),tw(e,t,n,s,r);case 7:return Hr(e,t,t.pendingProps,r),t.child;case 8:return Hr(e,t,t.pendingProps.children,r),t.child;case 12:return Hr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,St(wf,n._currentValue),n._currentValue=a,i!==null)if(rs(i.value,a)){if(i.children===s.children&&!tn.current){t=Js(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Gs(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Gg(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ue(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Gg(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Hr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Io(t,r),s=Fn(s),n=n(s),t.flags|=1,Hr(e,t,n,r),t.child;case 14:return n=t.type,s=Wn(n,t.pendingProps),s=Wn(n.type,s),rw(e,t,n,s,r);case 15:return tj(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wn(n,s),Od(e,t),t.tag=1,rn(n)?(e=!0,xf(t)):e=!1,Io(t,r),XC(t,n,s),Kg(t,n,s,r),Xg(null,t,n,!0,e,r);case 19:return aj(e,t,r);case 22:return rj(e,t,r)}throw Error(ue(156,t.tag))};function kj(e,t){return KN(e,t)}function wO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,t,r,n){return new wO(e,t,r,n)}function xx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kO(e){if(typeof e=="function")return xx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ly)return 11;if(e===Fy)return 14}return 2}function Fi(e,t){var r=e.alternate;return r===null?(r=In(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Fd(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")xx(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case uo:return Ta(r.children,s,i,t);case Py:a=8,s|=8;break;case vg:return e=In(12,r,t,s|2),e.elementType=vg,e.lanes=i,e;case bg:return e=In(13,r,t,s),e.elementType=bg,e.lanes=i,e;case wg:return e=In(19,r,t,s),e.elementType=wg,e.lanes=i,e;case _N:return Mh(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case DN:a=10;break e;case RN:a=9;break e;case Ly:a=11;break e;case Fy:a=14;break e;case mi:a=16,n=null;break e}throw Error(ue(130,e==null?e:typeof e,""))}return t=In(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Ta(e,t,r,n){return e=In(7,e,n,t),e.lanes=r,e}function Mh(e,t,r,n){return e=In(22,e,n,t),e.elementType=_N,e.lanes=r,e.stateNode={isHidden:!1},e}function om(e,t,r){return e=In(6,e,null,t),e.lanes=r,e}function lm(e,t,r){return t=In(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SO(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hp(0),this.expirationTimes=Hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vx(e,t,r,n,s,i,a,l,c){return e=new SO(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=In(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},rx(i),e}function EO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:co,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Sj(e){if(!e)return Wi;e=e._reactInternals;e:{if(Ga(e)!==e||e.tag!==1)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ue(171))}if(e.tag===1){var r=e.type;if(rn(r))return SC(e,r,t)}return t}function Ej(e,t,r,n,s,i,a,l,c){return e=vx(r,n,!0,e,s,i,a,l,c),e.context=Sj(null),r=e.current,n=$r(),s=Li(r),i=Gs(n,s),i.callback=t??null,Oi(r,i,s),e.current.lanes=s,yu(e,s,n),nn(e,n),e}function Oh(e,t,r,n){var s=t.current,i=$r(),a=Li(s);return r=Sj(r),t.context===null?t.context=r:t.pendingContext=r,t=Gs(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Oi(s,t,a),e!==null&&(Xn(e,s,a,i),_d(e,s,a)),a}function Rf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function bx(e,t){pw(e,t),(e=e.alternate)&&pw(e,t)}function NO(){return null}var Nj=typeof reportError=="function"?reportError:function(e){console.error(e)};function wx(e){this._internalRoot=e}Ph.prototype.render=wx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ue(409));Oh(e,t,null,null)};Ph.prototype.unmount=wx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;La(function(){Oh(null,e,null,null)}),t[Zs]=null}};function Ph(e){this._internalRoot=e}Ph.prototype.unstable_scheduleHydration=function(e){if(e){var t=rC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xi.length&&t!==0&&t<xi[r].priority;r++);xi.splice(r,0,e),r===0&&sC(e)}};function kx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mw(){}function CO(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Rf(a);i.call(u)}}var a=Ej(t,n,e,0,null,!1,!1,"",mw);return e._reactRootContainer=a,e[Zs]=a.current,Bc(e.nodeType===8?e.parentNode:e),La(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Rf(c);l.call(u)}}var c=vx(e,0,!1,null,null,!1,!1,"",mw);return e._reactRootContainer=c,e[Zs]=c.current,Bc(e.nodeType===8?e.parentNode:e),La(function(){Oh(t,c,r,n)}),c}function Fh(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Rf(a);l.call(c)}}Oh(t,a,e,s)}else a=CO(r,t,e,s,n);return Rf(a)}eC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Xl(t.pendingLanes);r!==0&&(Uy(t,r|1),nn(t,Qt()),!(ut&6)&&(Go=Qt()+500,ea()))}break;case 13:La(function(){var n=Xs(e,1);if(n!==null){var s=$r();Xn(n,e,1,s)}}),bx(e,1)}};Hy=function(e){if(e.tag===13){var t=Xs(e,134217728);if(t!==null){var r=$r();Xn(t,e,134217728,r)}bx(e,134217728)}};tC=function(e){if(e.tag===13){var t=Li(e),r=Xs(e,t);if(r!==null){var n=$r();Xn(r,e,t,n)}bx(e,t)}};rC=function(){return bt};nC=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}};Rg=function(e,t,r){switch(t){case"input":if(Eg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Th(n);if(!s)throw Error(ue(90));MN(n),Eg(n,s)}}}break;case"textarea":PN(e,r);break;case"select":t=r.value,t!=null&&Ao(e,!!r.multiple,t,!1)}};VN=mx;WN=La;var jO={usingClientEntryPoint:!1,Events:[vu,mo,Th,UN,HN,mx]},Rl={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TO={bundleType:Rl.bundleType,version:Rl.version,rendererPackageName:Rl.rendererPackageName,rendererConfig:Rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=GN(e),e===null?null:e.stateNode},findFiberByHostInstance:Rl.findFiberByHostInstance||NO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{Eh=od.inject(TO),Es=od}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jO;Sn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kx(t))throw Error(ue(200));return EO(e,t,null,r)};Sn.createRoot=function(e,t){if(!kx(e))throw Error(ue(299));var r=!1,n="",s=Nj;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vx(e,1,!1,null,null,r,!1,n,s),e[Zs]=t.current,Bc(e.nodeType===8?e.parentNode:e),new wx(t)};Sn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ue(188)):(e=Object.keys(e).join(","),Error(ue(268,e)));return e=GN(t),e=e===null?null:e.stateNode,e};Sn.flushSync=function(e){return La(e)};Sn.hydrate=function(e,t,r){if(!Lh(t))throw Error(ue(200));return Fh(null,e,t,!0,r)};Sn.hydrateRoot=function(e,t,r){if(!kx(e))throw Error(ue(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=Nj;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=Ej(t,null,e,1,r??null,s,!1,i,a),e[Zs]=t.current,Bc(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Ph(t)};Sn.render=function(e,t,r){if(!Lh(t))throw Error(ue(200));return Fh(null,e,t,!1,r)};Sn.unmountComponentAtNode=function(e){if(!Lh(e))throw Error(ue(40));return e._reactRootContainer?(La(function(){Fh(null,null,e,!1,function(){e._reactRootContainer=null,e[Zs]=null})}),!0):!1};Sn.unstable_batchedUpdates=mx;Sn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Lh(r))throw Error(ue(200));if(e==null||e._reactInternals===void 0)throw Error(ue(38));return Fh(e,t,r,!1,n)};Sn.version="18.3.1-next-f1338f8080-20240426";function Cj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cj)}catch(e){console.error(e)}}Cj(),CN.exports=Sn;var Jn=CN.exports;const mc=Zi(Jn);var jj,gw=Jn;jj=gw.createRoot,gw.hydrateRoot;const AO=e=>e.trim()?e.split(",").map(t=>t.trim().toLowerCase()).filter(Boolean):[],Tj=e=>(e==null?void 0:e.trim().toLowerCase())??"",DO=(e,t)=>{if(!e)return!1;if(e==="*"||e==="all")return!0;if(e.endsWith("*"))return t.startsWith(e.slice(0,-1));if(e.startsWith("*"))return t.endsWith(e.slice(1));if(e.includes("*")){const[r,n]=e.split("*");return t.startsWith(r)&&t.endsWith(n)}return t===e||t.includes(e)},RO="linz-chat,onboarding-tour,notifications,auth,onboarding-stream,onboarding,onboarding-stream",cm="true".toLowerCase(),_O=cm==="true"||cm==="1"||cm==="yes",Sx=AO(RO),IO=Sx.some(e=>e==="*"||e==="all"),MO=Sx.length>0,OO=_O,Aj=(e,t)=>!OO||!MO?!1:IO?!0:e?Sx.some(r=>DO(r,e)):!1,PO=(e,t)=>e?["["+e+"]",...t]:t,ld=(e,t,r)=>{const n=Tj(t);if(!Aj(n))return;const s=PO(t,r);(console[e]??console.log)(...s)},mr=e=>{const t=Tj(e);return{element:e,enabled:Aj(t),log:(...r)=>ld("log",e,r),info:(...r)=>ld("info",e,r),warn:(...r)=>ld("warn",e,r),error:(...r)=>ld("error",e,r)}};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qc(){return qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qc.apply(this,arguments)}var Ei;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ei||(Ei={}));const yw="popstate";function LO(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:a,hash:l}=n.location;return u0("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:_f(s)}return BO(t,r,null,e)}function Bt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Dj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function FO(){return Math.random().toString(36).substr(2,8)}function xw(e,t){return{usr:e.state,key:e.key,idx:t}}function u0(e,t,r,n){return r===void 0&&(r=null),qc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ul(t):t,{state:r,key:t&&t.key||n||FO()})}function _f(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ul(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function BO(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=Ei.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(qc({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=Ei.Pop;let b=d(),v=b==null?null:b-u;u=b,c&&c({action:l,location:y.location,delta:v})}function h(b,v){l=Ei.Push;let x=u0(y.location,b,v);u=d()+1;let w=xw(x,u),k=y.createHref(x);try{a.pushState(w,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(k)}i&&c&&c({action:l,location:y.location,delta:1})}function p(b,v){l=Ei.Replace;let x=u0(y.location,b,v);u=d();let w=xw(x,u),k=y.createHref(x);a.replaceState(w,"",k),i&&c&&c({action:l,location:y.location,delta:0})}function m(b){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof b=="string"?b:_f(b);return x=x.replace(/ $/,"%20"),Bt(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let y={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(yw,f),c=b,()=>{s.removeEventListener(yw,f),c=null}},createHref(b){return t(s,b)},createURL:m,encodeLocation(b){let v=m(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(b){return a.go(b)}};return y}var vw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vw||(vw={}));function zO(e,t,r){return r===void 0&&(r="/"),UO(e,t,r)}function UO(e,t,r,n){let s=typeof t=="string"?ul(t):t,i=qo(s.pathname||"/",r);if(i==null)return null;let a=Rj(e);HO(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=JO(i);l=ZO(a[c],u)}return l}function Rj(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Bt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Bi([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Bt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Rj(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:KO(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of _j(i.path))s(i,a,c)}),t}function _j(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=_j(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function HO(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:QO(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const VO=/^:[\w-]+$/,WO=3,$O=2,YO=1,GO=10,qO=-2,bw=e=>e==="*";function KO(e,t){let r=e.split("/"),n=r.length;return r.some(bw)&&(n+=qO),t&&(n+=$O),r.filter(s=>!bw(s)).reduce((s,i)=>s+(VO.test(i)?WO:i===""?YO:GO),n)}function QO(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function ZO(e,t,r){let{routesMeta:n}=e,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=d0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Bi([i,f.pathname]),pathnameBase:nP(Bi([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Bi([i,f.pathnameBase]))}return a}function d0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=XO(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let y=l[f]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const m=l[f];return p&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function XO(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Dj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function JO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Dj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function eP(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?ul(e):e;return{pathname:r?r.startsWith("/")?r:tP(r,t):t,search:sP(n),hash:iP(s)}}function tP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function um(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rP(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ex(e,t){let r=rP(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Nx(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=ul(e):(s=qc({},e),Bt(!s.pathname||!s.pathname.includes("?"),um("?","pathname","search",s)),Bt(!s.pathname||!s.pathname.includes("#"),um("#","pathname","hash",s)),Bt(!s.search||!s.search.includes("#"),um("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let f=t.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=eP(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Bi=e=>e.join("/").replace(/\/\/+/g,"/"),nP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function aP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ij=["post","put","patch","delete"];new Set(Ij);const oP=["get",...Ij];new Set(oP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kc(){return Kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kc.apply(this,arguments)}const Bh=g.createContext(null),Mj=g.createContext(null),ii=g.createContext(null),zh=g.createContext(null),Ds=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Oj=g.createContext(null);function lP(e,t){let{relative:r}=t===void 0?{}:t;dl()||Bt(!1);let{basename:n,navigator:s}=g.useContext(ii),{hash:i,pathname:a,search:l}=Uh(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:Bi([n,a])),s.createHref({pathname:c,search:l,hash:i})}function dl(){return g.useContext(zh)!=null}function Nn(){return dl()||Bt(!1),g.useContext(zh).location}function Pj(e){g.useContext(ii).static||g.useLayoutEffect(e)}function zn(){let{isDataRoute:e}=g.useContext(Ds);return e?SP():cP()}function cP(){dl()||Bt(!1);let e=g.useContext(Bh),{basename:t,future:r,navigator:n}=g.useContext(ii),{matches:s}=g.useContext(Ds),{pathname:i}=Nn(),a=JSON.stringify(Ex(s,r.v7_relativeSplatPath)),l=g.useRef(!1);return Pj(()=>{l.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=Nx(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Bi([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,a,i,e])}const uP=g.createContext(null);function dP(e){let t=g.useContext(Ds).outlet;return t&&g.createElement(uP.Provider,{value:e},t)}function Lj(){let{matches:e}=g.useContext(Ds),t=e[e.length-1];return t?t.params:{}}function Uh(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=g.useContext(ii),{matches:s}=g.useContext(Ds),{pathname:i}=Nn(),a=JSON.stringify(Ex(s,n.v7_relativeSplatPath));return g.useMemo(()=>Nx(e,JSON.parse(a),i,r==="path"),[e,a,i,r])}function fP(e,t){return hP(e,t)}function hP(e,t,r,n){dl()||Bt(!1);let{navigator:s}=g.useContext(ii),{matches:i}=g.useContext(Ds),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Nn(),d;if(t){var f;let b=typeof t=="string"?ul(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Bt(!1),d=b}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=zO(e,{pathname:p}),y=xP(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Bi([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Bi([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&y?g.createElement(zh.Provider,{value:{location:Kc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ei.Pop}},y):y}function pP(){let e=kP(),t=aP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,null)}const mP=g.createElement(pP,null);class gP extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(Ds.Provider,{value:this.props.routeContext},g.createElement(Oj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yP(e){let{routeContext:t,match:r,children:n}=e,s=g.useContext(Bh);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Ds.Provider,{value:t},n)}function xP(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Bt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=r,m=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||m){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,h)=>{let p,m=!1,y=null,b=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||mP,c&&(u<0&&h===0?(EP("route-fallback"),m=!0,b=null):u===h&&(m=!0,b=f.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,h+1)),x=()=>{let w;return p?w=y:m?w=b:f.route.Component?w=g.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,g.createElement(yP,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?g.createElement(gP,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var Fj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Fj||{}),Bj=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bj||{});function vP(e){let t=g.useContext(Bh);return t||Bt(!1),t}function bP(e){let t=g.useContext(Mj);return t||Bt(!1),t}function wP(e){let t=g.useContext(Ds);return t||Bt(!1),t}function zj(e){let t=wP(),r=t.matches[t.matches.length-1];return r.route.id||Bt(!1),r.route.id}function kP(){var e;let t=g.useContext(Oj),r=bP(),n=zj();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function SP(){let{router:e}=vP(Fj.UseNavigateStable),t=zj(Bj.UseNavigateStable),r=g.useRef(!1);return Pj(()=>{r.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Kc({fromRouteId:t},i)))},[e,t])}const ww={};function EP(e,t,r){ww[e]||(ww[e]=!0)}function NP(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function kw(e){let{to:t,replace:r,state:n,relative:s}=e;dl()||Bt(!1);let{future:i,static:a}=g.useContext(ii),{matches:l}=g.useContext(Ds),{pathname:c}=Nn(),u=zn(),d=Nx(t,Ex(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function CP(e){return dP(e.context)}function $e(e){Bt(!1)}function jP(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ei.Pop,navigator:i,static:a=!1,future:l}=e;dl()&&Bt(!1);let c=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:i,static:a,future:Kc({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=ul(n));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:m="default"}=n,y=g.useMemo(()=>{let b=qo(d,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:p,key:m},navigationType:s}},[c,d,f,h,p,m,s]);return y==null?null:g.createElement(ii.Provider,{value:u},g.createElement(zh.Provider,{children:r,value:y}))}function TP(e){let{children:t,location:r}=e;return fP(f0(t),r)}new Promise(()=>{});function f0(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(n,s)=>{if(!g.isValidElement(n))return;let i=[...t,s];if(n.type===g.Fragment){r.push.apply(r,f0(n.props.children,i));return}n.type!==$e&&Bt(!1),!n.props.index||!n.props.children||Bt(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=f0(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function If(){return If=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},If.apply(this,arguments)}function Uj(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function AP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function DP(e,t){return e.button===0&&(!t||t==="_self")&&!AP(e)}function h0(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function RP(e,t){let r=h0(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const _P=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],MP="6";try{window.__reactRouterVersion=MP}catch{}const OP=g.createContext({isTransitioning:!1}),PP="startTransition",Sw=xI[PP];function LP(e){let{basename:t,children:r,future:n,window:s}=e,i=g.useRef();i.current==null&&(i.current=LO({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=g.useCallback(f=>{u&&Sw?Sw(()=>c(f)):c(f)},[c,u]);return g.useLayoutEffect(()=>a.listen(d),[a,d]),g.useEffect(()=>NP(n),[n]),g.createElement(jP,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const FP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,br=g.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=Uj(t,_P),{basename:p}=g.useContext(ii),m,y=!1;if(typeof u=="string"&&BP.test(u)&&(m=u,FP))try{let w=new URL(window.location.href),k=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=qo(k.pathname,p);k.origin===w.origin&&S!=null?u=S+k.search+k.hash:y=!0}catch{}let b=lP(u,{relative:s}),v=HP(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function x(w){n&&n(w),w.defaultPrevented||v(w)}return g.createElement("a",If({},h,{href:m||b,onClick:y||i?n:x,ref:r,target:c}))}),zP=g.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=t,f=Uj(t,IP),h=Uh(c,{relative:f.relative}),p=Nn(),m=g.useContext(Mj),{navigator:y,basename:b}=g.useContext(ii),v=m!=null&&VP(h)&&u===!0,x=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,w=p.pathname,k=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(w=w.toLowerCase(),k=k?k.toLowerCase():null,x=x.toLowerCase()),k&&b&&(k=qo(k,b)||k);const S=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let E=w===x||!a&&w.startsWith(x)&&w.charAt(S)==="/",N=k!=null&&(k===x||!a&&k.startsWith(x)&&k.charAt(x.length)==="/"),C={isActive:E,isPending:N,isTransitioning:v},T=E?n:void 0,j;typeof i=="function"?j=i(C):j=[i,E?"active":null,N?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let I=typeof l=="function"?l(C):l;return g.createElement(br,If({},f,{"aria-current":T,className:j,ref:r,style:I,to:c,viewTransition:u}),typeof d=="function"?d(C):d)});var p0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(p0||(p0={}));var Ew;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ew||(Ew={}));function UP(e){let t=g.useContext(Bh);return t||Bt(!1),t}function HP(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=zn(),u=Nn(),d=Uh(e,{relative:a});return g.useCallback(f=>{if(DP(f,r)){f.preventDefault();let h=n!==void 0?n:_f(u)===_f(d);c(e,{replace:h,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,n,s,r,e,i,a,l])}function Hh(e){let t=g.useRef(h0(e)),r=g.useRef(!1),n=Nn(),s=g.useMemo(()=>RP(n.search,r.current?null:t.current),[n.search]),i=zn(),a=g.useCallback((l,c)=>{const u=h0(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,a]}function VP(e,t){t===void 0&&(t={});let r=g.useContext(OP);r==null&&Bt(!1);let{basename:n}=UP(p0.useViewTransitionState),s=Uh(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=qo(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=qo(r.nextLocation.pathname,n)||r.nextLocation.pathname;return d0(s.pathname,a)!=null||d0(s.pathname,i)!=null}function Hj(e,t){return function(){return e.apply(t,arguments)}}const{toString:WP}=Object.prototype,{getPrototypeOf:Cx}=Object,{iterator:Vh,toStringTag:Vj}=Symbol,Wh=(e=>t=>{const r=WP.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),is=e=>(e=e.toLowerCase(),t=>Wh(t)===e),$h=e=>t=>typeof t===e,{isArray:fl}=Array,Qc=$h("undefined");function wu(e){return e!==null&&!Qc(e)&&e.constructor!==null&&!Qc(e.constructor)&&sn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Wj=is("ArrayBuffer");function $P(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Wj(e.buffer),t}const YP=$h("string"),sn=$h("function"),$j=$h("number"),ku=e=>e!==null&&typeof e=="object",GP=e=>e===!0||e===!1,Bd=e=>{if(Wh(e)!=="object")return!1;const t=Cx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Vj in e)&&!(Vh in e)},qP=e=>{if(!ku(e)||wu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},KP=is("Date"),QP=is("File"),ZP=is("Blob"),XP=is("FileList"),JP=e=>ku(e)&&sn(e.pipe),e3=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||sn(e.append)&&((t=Wh(e))==="formdata"||t==="object"&&sn(e.toString)&&e.toString()==="[object FormData]"))},t3=is("URLSearchParams"),[r3,n3,s3,i3]=["ReadableStream","Request","Response","Headers"].map(is),a3=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Su(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),fl(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(wu(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(n=0;n<a;n++)l=i[n],t.call(null,e[l],l,e)}}function Yj(e,t){if(wu(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const wa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Gj=e=>!Qc(e)&&e!==wa;function m0(){const{caseless:e}=Gj(this)&&this||{},t={},r=(n,s)=>{const i=e&&Yj(t,s)||s;Bd(t[i])&&Bd(n)?t[i]=m0(t[i],n):Bd(n)?t[i]=m0({},n):fl(n)?t[i]=n.slice():t[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Su(arguments[n],r);return t}const o3=(e,t,r,{allOwnKeys:n}={})=>(Su(t,(s,i)=>{r&&sn(s)?e[i]=Hj(s,r):e[i]=s},{allOwnKeys:n}),e),l3=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),c3=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},u3=(e,t,r,n)=>{let s,i,a;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],(!n||n(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=r!==!1&&Cx(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},d3=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},f3=e=>{if(!e)return null;if(fl(e))return e;let t=e.length;if(!$j(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},h3=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Cx(Uint8Array)),p3=(e,t)=>{const n=(e&&e[Vh]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},m3=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},g3=is("HTMLFormElement"),y3=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Nw=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),x3=is("RegExp"),qj=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Su(r,(s,i)=>{let a;(a=t(s,i,e))!==!1&&(n[i]=a||s)}),Object.defineProperties(e,n)},v3=e=>{qj(e,(t,r)=>{if(sn(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(sn(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},b3=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return fl(e)?n(e):n(String(e).split(t)),r},w3=()=>{},k3=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function S3(e){return!!(e&&sn(e.append)&&e[Vj]==="FormData"&&e[Vh])}const E3=e=>{const t=new Array(10),r=(n,s)=>{if(ku(n)){if(t.indexOf(n)>=0)return;if(wu(n))return n;if(!("toJSON"in n)){t[s]=n;const i=fl(n)?[]:{};return Su(n,(a,l)=>{const c=r(a,s+1);!Qc(c)&&(i[l]=c)}),t[s]=void 0,i}}return n};return r(e,0)},N3=is("AsyncFunction"),C3=e=>e&&(ku(e)||sn(e))&&sn(e.then)&&sn(e.catch),Kj=((e,t)=>e?setImmediate:t?((r,n)=>(wa.addEventListener("message",({source:s,data:i})=>{s===wa&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),wa.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",sn(wa.postMessage)),j3=typeof queueMicrotask<"u"?queueMicrotask.bind(wa):typeof process<"u"&&process.nextTick||Kj,T3=e=>e!=null&&sn(e[Vh]),G={isArray:fl,isArrayBuffer:Wj,isBuffer:wu,isFormData:e3,isArrayBufferView:$P,isString:YP,isNumber:$j,isBoolean:GP,isObject:ku,isPlainObject:Bd,isEmptyObject:qP,isReadableStream:r3,isRequest:n3,isResponse:s3,isHeaders:i3,isUndefined:Qc,isDate:KP,isFile:QP,isBlob:ZP,isRegExp:x3,isFunction:sn,isStream:JP,isURLSearchParams:t3,isTypedArray:h3,isFileList:XP,forEach:Su,merge:m0,extend:o3,trim:a3,stripBOM:l3,inherits:c3,toFlatObject:u3,kindOf:Wh,kindOfTest:is,endsWith:d3,toArray:f3,forEachEntry:p3,matchAll:m3,isHTMLForm:g3,hasOwnProperty:Nw,hasOwnProp:Nw,reduceDescriptors:qj,freezeMethods:v3,toObjectSet:b3,toCamelCase:y3,noop:w3,toFiniteNumber:k3,findKey:Yj,global:wa,isContextDefined:Gj,isSpecCompliantForm:S3,toJSONObject:E3,isAsyncFn:N3,isThenable:C3,setImmediate:Kj,asap:j3,isIterable:T3};function Ye(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}G.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const Qj=Ye.prototype,Zj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Zj[e]={value:e}});Object.defineProperties(Ye,Zj);Object.defineProperty(Qj,"isAxiosError",{value:!0});Ye.from=(e,t,r,n,s,i)=>{const a=Object.create(Qj);return G.toFlatObject(e,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ye.call(a,e.message,t,r,n,s),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const A3=null;function g0(e){return G.isPlainObject(e)||G.isArray(e)}function Xj(e){return G.endsWith(e,"[]")?e.slice(0,-2):e}function Cw(e,t,r){return e?e.concat(t).map(function(s,i){return s=Xj(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function D3(e){return G.isArray(e)&&!e.some(g0)}const R3=G.toFlatObject(G,{},null,function(t){return/^is[A-Z]/.test(t)});function Yh(e,t,r){if(!G.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=G.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!G.isUndefined(b[y])});const n=r.metaTokens,s=r.visitor||d,i=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(t);if(!G.isFunction(s))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(G.isDate(m))return m.toISOString();if(G.isBoolean(m))return m.toString();if(!c&&G.isBlob(m))throw new Ye("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(m)||G.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,y,b){let v=m;if(m&&!b&&typeof m=="object"){if(G.endsWith(y,"{}"))y=n?y:y.slice(0,-2),m=JSON.stringify(m);else if(G.isArray(m)&&D3(m)||(G.isFileList(m)||G.endsWith(y,"[]"))&&(v=G.toArray(m)))return y=Xj(y),v.forEach(function(w,k){!(G.isUndefined(w)||w===null)&&t.append(a===!0?Cw([y],k,i):a===null?y:y+"[]",u(w))}),!1}return g0(m)?!0:(t.append(Cw(b,y,i),u(m)),!1)}const f=[],h=Object.assign(R3,{defaultVisitor:d,convertValue:u,isVisitable:g0});function p(m,y){if(!G.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(m),G.forEach(m,function(v,x){(!(G.isUndefined(v)||v===null)&&s.call(t,v,G.isString(x)?x.trim():x,y,h))===!0&&p(v,y?y.concat(x):[x])}),f.pop()}}if(!G.isObject(e))throw new TypeError("data must be an object");return p(e),t}function jw(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function jx(e,t){this._pairs=[],e&&Yh(e,this,t)}const Jj=jx.prototype;Jj.append=function(t,r){this._pairs.push([t,r])};Jj.toString=function(t){const r=t?function(n){return t.call(this,n,jw)}:jw;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function _3(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eT(e,t,r){if(!t)return e;const n=r&&r.encode||_3;G.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=G.isURLSearchParams(t)?t.toString():new jx(t,r).toString(n),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Tw{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){G.forEach(this.handlers,function(n){n!==null&&t(n)})}}const tT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},I3=typeof URLSearchParams<"u"?URLSearchParams:jx,M3=typeof FormData<"u"?FormData:null,O3=typeof Blob<"u"?Blob:null,P3={isBrowser:!0,classes:{URLSearchParams:I3,FormData:M3,Blob:O3},protocols:["http","https","file","blob","url","data"]},Tx=typeof window<"u"&&typeof document<"u",y0=typeof navigator=="object"&&navigator||void 0,L3=Tx&&(!y0||["ReactNative","NativeScript","NS"].indexOf(y0.product)<0),F3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",B3=Tx&&window.location.href||"http://localhost",z3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tx,hasStandardBrowserEnv:L3,hasStandardBrowserWebWorkerEnv:F3,navigator:y0,origin:B3},Symbol.toStringTag,{value:"Module"})),_r={...z3,...P3};function U3(e,t){return Yh(e,new _r.classes.URLSearchParams,{visitor:function(r,n,s,i){return _r.isNode&&G.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function H3(e){return G.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function V3(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function rT(e){function t(r,n,s,i){let a=r[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=r.length;return a=!a&&G.isArray(s)?s.length:a,c?(G.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!l):((!s[a]||!G.isObject(s[a]))&&(s[a]=[]),t(r,n,s[a],i)&&G.isArray(s[a])&&(s[a]=V3(s[a])),!l)}if(G.isFormData(e)&&G.isFunction(e.entries)){const r={};return G.forEachEntry(e,(n,s)=>{t(H3(n),s,r,0)}),r}return null}function W3(e,t,r){if(G.isString(e))try{return(t||JSON.parse)(e),G.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Eu={transitional:tT,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=G.isObject(t);if(i&&G.isHTMLForm(t)&&(t=new FormData(t)),G.isFormData(t))return s?JSON.stringify(rT(t)):t;if(G.isArrayBuffer(t)||G.isBuffer(t)||G.isStream(t)||G.isFile(t)||G.isBlob(t)||G.isReadableStream(t))return t;if(G.isArrayBufferView(t))return t.buffer;if(G.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return U3(t,this.formSerializer).toString();if((l=G.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Yh(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),W3(t)):t}],transformResponse:[function(t){const r=this.transitional||Eu.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(G.isResponse(t)||G.isReadableStream(t))return t;if(t&&G.isString(t)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?Ye.from(l,Ye.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_r.classes.FormData,Blob:_r.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],e=>{Eu.headers[e]={}});const $3=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Y3=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||t[r]&&$3[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Aw=Symbol("internals");function _l(e){return e&&String(e).trim().toLowerCase()}function zd(e){return e===!1||e==null?e:G.isArray(e)?e.map(zd):String(e)}function G3(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const q3=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function dm(e,t,r,n,s){if(G.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!G.isString(t)){if(G.isString(n))return t.indexOf(n)!==-1;if(G.isRegExp(n))return n.test(t)}}function K3(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Q3(e,t){const r=G.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,a){return this[n].call(this,t,s,i,a)},configurable:!0})})}let an=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(l,c,u){const d=_l(c);if(!d)throw new Error("header name must be a non-empty string");const f=G.findKey(s,d);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=zd(l))}const a=(l,c)=>G.forEach(l,(u,d)=>i(u,d,c));if(G.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(G.isString(t)&&(t=t.trim())&&!q3(t))a(Y3(t),r);else if(G.isObject(t)&&G.isIterable(t)){let l={},c,u;for(const d of t){if(!G.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?G.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}a(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=_l(t),t){const n=G.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return G3(s);if(G.isFunction(r))return r.call(this,s,n);if(G.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=_l(t),t){const n=G.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||dm(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(a){if(a=_l(a),a){const l=G.findKey(n,a);l&&(!r||dm(n,n[l],l,r))&&(delete n[l],s=!0)}}return G.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||dm(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return G.forEach(this,(s,i)=>{const a=G.findKey(n,i);if(a){r[a]=zd(s),delete r[i];return}const l=t?K3(i):String(i).trim();l!==i&&delete r[i],r[l]=zd(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return G.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&G.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[Aw]=this[Aw]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=_l(a);n[l]||(Q3(s,a),n[l]=!0)}return G.isArray(t)?t.forEach(i):i(t),this}};an.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(an.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});G.freezeMethods(an);function fm(e,t){const r=this||Eu,n=t||r,s=an.from(n.headers);let i=n.data;return G.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function nT(e){return!!(e&&e.__CANCEL__)}function hl(e,t,r){Ye.call(this,e??"canceled",Ye.ERR_CANCELED,t,r),this.name="CanceledError"}G.inherits(hl,Ye,{__CANCEL__:!0});function sT(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Ye("Request failed with status code "+r.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Z3(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function X3(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,a;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=n[i];a||(a=u),r[s]=c,n[s]=u;let f=i,h=0;for(;f!==s;)h+=r[f++],f=f%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-a<t)return;const p=d&&u-d;return p?Math.round(h*1e3/p):void 0}}function J3(e,t){let r=0,n=1e3/t,s,i;const a=(u,d=Date.now())=>{r=d,s=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),f=d-r;f>=n?a(u,d):(s=u,i||(i=setTimeout(()=>{i=null,a(s)},n-f)))},()=>s&&a(s)]}const Mf=(e,t,r=3)=>{let n=0;const s=X3(50,250);return J3(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-n,u=s(c),d=a<=l;n=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},r)},Dw=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Rw=e=>(...t)=>G.asap(()=>e(...t)),eL=_r.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,_r.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(_r.origin),_r.navigator&&/(msie|trident)/i.test(_r.navigator.userAgent)):()=>!0,tL=_r.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const a=[e+"="+encodeURIComponent(t)];G.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),G.isString(n)&&a.push("path="+n),G.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function rL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function nL(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function iT(e,t,r){let n=!rL(t);return e&&(n||r==!1)?nL(e,t):t}const _w=e=>e instanceof an?{...e}:e;function Fa(e,t){t=t||{};const r={};function n(u,d,f,h){return G.isPlainObject(u)&&G.isPlainObject(d)?G.merge.call({caseless:h},u,d):G.isPlainObject(d)?G.merge({},d):G.isArray(d)?d.slice():d}function s(u,d,f,h){if(G.isUndefined(d)){if(!G.isUndefined(u))return n(void 0,u,f,h)}else return n(u,d,f,h)}function i(u,d){if(!G.isUndefined(d))return n(void 0,d)}function a(u,d){if(G.isUndefined(d)){if(!G.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,f){if(f in t)return n(u,d);if(f in e)return n(void 0,u)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,f)=>s(_w(u),_w(d),f,!0)};return G.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||s,h=f(e[d],t[d],d);G.isUndefined(h)&&f!==l||(r[d]=h)}),r}const aT=e=>{const t=Fa({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=t;t.headers=a=an.from(a),t.url=eT(iT(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(G.isFormData(r)){if(_r.hasStandardBrowserEnv||_r.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(_r.hasStandardBrowserEnv&&(n&&G.isFunction(n)&&(n=n(t)),n||n!==!1&&eL(t.url))){const u=s&&i&&tL.read(i);u&&a.set(s,u)}return t},sL=typeof XMLHttpRequest<"u",iL=sL&&function(e){return new Promise(function(r,n){const s=aT(e);let i=s.data;const a=an.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,f,h,p,m;function y(){p&&p(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function v(){if(!b)return;const w=an.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:e,request:b};sT(function(N){r(N),y()},function(N){n(N),y()},S),b=null}"onloadend"in b?b.onloadend=v:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(v)},b.onabort=function(){b&&(n(new Ye("Request aborted",Ye.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new Ye("Network Error",Ye.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||tT;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new Ye(k,S.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,e,b)),b=null},i===void 0&&a.setContentType(null),"setRequestHeader"in b&&G.forEach(a.toJSON(),function(k,S){b.setRequestHeader(S,k)}),G.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),u&&([h,m]=Mf(u,!0),b.addEventListener("progress",h)),c&&b.upload&&([f,p]=Mf(c),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(d=w=>{b&&(n(!w||w.type?new hl(null,e,b):w),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const x=Z3(s.url);if(x&&_r.protocols.indexOf(x)===-1){n(new Ye("Unsupported protocol "+x+":",Ye.ERR_BAD_REQUEST,e));return}b.send(i||null)})},aL=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Ye?d:new hl(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,i(new Ye(`timeout ${t} of ms exceeded`,Ye.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>G.asap(l),c}},oL=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},lL=async function*(e,t){for await(const r of cL(e))yield*oL(r,t)},cL=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Iw=(e,t,r,n)=>{const s=lL(e,t);let i=0,a,l=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let f=d.byteLength;if(r){let h=i+=f;r(h)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},Gh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",oT=Gh&&typeof ReadableStream=="function",uL=Gh&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),lT=(e,...t)=>{try{return!!e(...t)}catch{return!1}},dL=oT&&lT(()=>{let e=!1;const t=new Request(_r.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Mw=64*1024,x0=oT&&lT(()=>G.isReadableStream(new Response("").body)),Of={stream:x0&&(e=>e.body)};Gh&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Of[t]&&(Of[t]=G.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Ye(`Response type '${t}' is not supported`,Ye.ERR_NOT_SUPPORT,n)})})})(new Response);const fL=async e=>{if(e==null)return 0;if(G.isBlob(e))return e.size;if(G.isSpecCompliantForm(e))return(await new Request(_r.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(G.isArrayBufferView(e)||G.isArrayBuffer(e))return e.byteLength;if(G.isURLSearchParams(e)&&(e=e+""),G.isString(e))return(await uL(e)).byteLength},hL=async(e,t)=>{const r=G.toFiniteNumber(e.getContentLength());return r??fL(t)},pL=Gh&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:h}=aT(e);u=u?(u+"").toLowerCase():"text";let p=aL([s,i&&i.toAbortSignal()],a),m;const y=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&dL&&r!=="get"&&r!=="head"&&(b=await hL(d,n))!==0){let S=new Request(t,{method:"POST",body:n,duplex:"half"}),E;if(G.isFormData(n)&&(E=S.headers.get("content-type"))&&d.setContentType(E),S.body){const[N,C]=Dw(b,Mf(Rw(c)));n=Iw(S.body,Mw,N,C)}}G.isString(f)||(f=f?"include":"omit");const v="credentials"in Request.prototype;m=new Request(t,{...h,signal:p,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:v?f:void 0});let x=await fetch(m,h);const w=x0&&(u==="stream"||u==="response");if(x0&&(l||w&&y)){const S={};["status","statusText","headers"].forEach(T=>{S[T]=x[T]});const E=G.toFiniteNumber(x.headers.get("content-length")),[N,C]=l&&Dw(E,Mf(Rw(l),!0))||[];x=new Response(Iw(x.body,Mw,N,()=>{C&&C(),y&&y()}),S)}u=u||"text";let k=await Of[G.findKey(Of,u)||"text"](x,e);return!w&&y&&y(),await new Promise((S,E)=>{sT(S,E,{data:k,headers:an.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:m})})}catch(v){throw y&&y(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,e,m),{cause:v.cause||v}):Ye.from(v,v&&v.code,e,m)}}),v0={http:A3,xhr:iL,fetch:pL};G.forEach(v0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ow=e=>`- ${e}`,mL=e=>G.isFunction(e)||e===null||e===!1,cT={getAdapter:e=>{e=G.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){r=e[i];let a;if(n=r,!mL(r)&&(n=v0[(a=String(r)).toLowerCase()],n===void 0))throw new Ye(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+i]=n}if(!n){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(Ow).join(`
`):" "+Ow(i[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:v0};function hm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hl(null,e)}function Pw(e){return hm(e),e.headers=an.from(e.headers),e.data=fm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),cT.getAdapter(e.adapter||Eu.adapter)(e).then(function(n){return hm(e),n.data=fm.call(e,e.transformResponse,n),n.headers=an.from(n.headers),n},function(n){return nT(n)||(hm(e),n&&n.response&&(n.response.data=fm.call(e,e.transformResponse,n.response),n.response.headers=an.from(n.response.headers))),Promise.reject(n)})}const uT="1.11.0",qh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{qh[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Lw={};qh.transitional=function(t,r,n){function s(i,a){return"[Axios v"+uT+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,l)=>{if(t===!1)throw new Ye(s(a," has been removed"+(r?" in "+r:"")),Ye.ERR_DEPRECATED);return r&&!Lw[a]&&(Lw[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,l):!0}};qh.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function gL(e,t,r){if(typeof e!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],a=t[i];if(a){const l=e[i],c=l===void 0||a(l,i,e);if(c!==!0)throw new Ye("option "+i+" must be "+c,Ye.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ye("Unknown option "+i,Ye.ERR_BAD_OPTION)}}const Ud={assertOptions:gL,validators:qh},fs=Ud.validators;let Aa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Tw,response:new Tw}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Fa(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&Ud.assertOptions(n,{silentJSONParsing:fs.transitional(fs.boolean),forcedJSONParsing:fs.transitional(fs.boolean),clarifyTimeoutError:fs.transitional(fs.boolean)},!1),s!=null&&(G.isFunction(s)?r.paramsSerializer={serialize:s}:Ud.assertOptions(s,{encode:fs.function,serialize:fs.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ud.assertOptions(r,{baseUrl:fs.spelling("baseURL"),withXsrfToken:fs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&G.merge(i.common,i[r.method]);i&&G.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),r.headers=an.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,f=0,h;if(!c){const m=[Pw.bind(this),void 0];for(m.unshift(...l),m.push(...u),h=m.length,d=Promise.resolve(r);f<h;)d=d.then(m[f++],m[f++]);return d}h=l.length;let p=r;for(f=0;f<h;){const m=l[f++],y=l[f++];try{p=m(p)}catch(b){y.call(this,b);break}}try{d=Pw.call(this,p)}catch(m){return Promise.reject(m)}for(f=0,h=u.length;f<h;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=Fa(this.defaults,t);const r=iT(t.baseURL,t.url,t.allowAbsoluteUrls);return eT(r,t.params,t.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(t){Aa.prototype[t]=function(r,n){return this.request(Fa(n||{},{method:t,url:r,data:(n||{}).data}))}});G.forEach(["post","put","patch"],function(t){function r(n){return function(i,a,l){return this.request(Fa(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Aa.prototype[t]=r(),Aa.prototype[t+"Form"]=r(!0)});let yL=class dT{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{n.subscribe(l),i=l}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},t(function(i,a,l){n.reason||(n.reason=new hl(i,a,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new dT(function(s){t=s}),cancel:t}}};function xL(e){return function(r){return e.apply(null,r)}}function vL(e){return G.isObject(e)&&e.isAxiosError===!0}const b0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(b0).forEach(([e,t])=>{b0[t]=e});function fT(e){const t=new Aa(e),r=Hj(Aa.prototype.request,t);return G.extend(r,Aa.prototype,t,{allOwnKeys:!0}),G.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return fT(Fa(e,s))},r}const er=fT(Eu);er.Axios=Aa;er.CanceledError=hl;er.CancelToken=yL;er.isCancel=nT;er.VERSION=uT;er.toFormData=Yh;er.AxiosError=Ye;er.Cancel=er.CanceledError;er.all=function(t){return Promise.all(t)};er.spread=xL;er.isAxiosError=vL;er.mergeConfig=Fa;er.AxiosHeaders=an;er.formToJSON=e=>rT(G.isHTMLForm(e)?new FormData(e):e);er.getAdapter=cT.getAdapter;er.HttpStatusCode=b0;er.default=er;const{Axios:ste,AxiosError:ite,CanceledError:ate,isCancel:ote,CancelToken:lte,VERSION:cte,all:ute,Cancel:dte,isAxiosError:fte,spread:hte,toFormData:pte,AxiosHeaders:mte,HttpStatusCode:gte,formToJSON:yte,getAdapter:xte,mergeConfig:vte}=er,K=er.create({baseURL:"/api",withCredentials:!0,timeout:1e4}),Pf="famconomy.activeFamilyId",w0="famconomy:active-family-change",Kh=typeof window<"u"&&typeof window.localStorage<"u",bL=(e,t)=>{if(!Kh)return;const r=new CustomEvent(w0,{detail:{familyId:e}});window.dispatchEvent(r)},Fw=()=>{if(!Kh)return null;const e=window.localStorage.getItem(Pf);if(!e)return null;const t=Number(e);return Number.isFinite(t)?t:null},Ax=(e,t)=>{Kh&&(e===null?window.localStorage.removeItem(Pf):window.localStorage.setItem(Pf,String(e)),bL(e))},ga=e=>{Ax(null)},wL=e=>{if(!Kh)return()=>{};const t=n=>{var i;e(((i=n.detail)==null?void 0:i.familyId)??null)};window.addEventListener(w0,t);const r=n=>{if(n.key!==Pf)return;const s=n.newValue;if(s===null){e(null);return}const i=Number(s);e(Number.isFinite(i)?i:null)};return window.addEventListener("storage",r),()=>{window.removeEventListener(w0,t),window.removeEventListener("storage",r)}},hT=g.createContext(null),kL=({children:e})=>{const[t,r]=g.useState({user:null,isAuthenticated:!1,isLoading:!0,error:null}),n=mr("auth"),s=async()=>{n.log("checkAuthStatus: Starting..."),r(u=>({...u,isLoading:!0}));try{n.log("checkAuthStatus: Making /auth/me request...");const u=await K.get("/auth/me");n.log("checkAuthStatus: /auth/me successful.",u.data),r({user:u.data,isAuthenticated:!0,isLoading:!1,error:null})}catch(u){n.error("checkAuthStatus: /auth/me failed.",u),ga(),r(d=>({...d,isLoading:!1,isAuthenticated:!1,user:null,error:null}))}};g.useEffect(()=>{s()},[]);const i=async u=>{var d,f;r(h=>({...h,isLoading:!0,error:null}));try{if(u.email==="admin@example.com"&&u.password==="password"){r({user:{id:"demo-admin",full_name:"Demo Admin",email:"admin@example.com",role:"admin",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},isAuthenticated:!0,isLoading:!1,error:null});return}ga(),await K.post("/auth/login",u),await s()}catch(h){const p=((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||h.message||"Login failed";throw r({user:null,isAuthenticated:!1,isLoading:!1,error:p}),new Error(p)}},a=async u=>{var d,f;r(h=>({...h,isLoading:!0,error:null}));try{ga(),await K.post("/auth/register",u),await s()}catch(h){r({user:null,isAuthenticated:!1,isLoading:!1,error:((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||h.message||"Registration failed"})}},l=async u=>{window.location.href=`/api/auth/${u}`},c=async()=>{r(u=>({...u,isLoading:!0}));try{await K.post("/auth/logout"),ga(),r({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch{ga(),r({user:null,isAuthenticated:!1,isLoading:!1,error:null})}};return o.jsx(hT.Provider,{value:{...t,login:i,register:a,loginWithProvider:l,logout:c,checkAuthStatus:s},children:e})},Ot=()=>{const e=g.useContext(hT);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},SL=async e=>(await K.get(`/notifications/user/${e}`)).data.map(r=>({id:r.NotificationID,userId:r.UserID,message:r.Message,readStatus:r.IsRead,createdAt:r.CreatedAt,type:r.Type,link:r.Link})),EL=async e=>{await K.put(`/notifications/${e}/read`)},Ts=Object.create(null);Ts.open="0";Ts.close="1";Ts.ping="2";Ts.pong="3";Ts.message="4";Ts.upgrade="5";Ts.noop="6";const Hd=Object.create(null);Object.keys(Ts).forEach(e=>{Hd[Ts[e]]=e});const k0={type:"error",data:"parser error"},pT=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",mT=typeof ArrayBuffer=="function",gT=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Dx=({type:e,data:t},r,n)=>pT&&t instanceof Blob?r?n(t):Bw(t,n):mT&&(t instanceof ArrayBuffer||gT(t))?r?n(t):Bw(new Blob([t]),n):n(Ts[e]+(t||"")),Bw=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function zw(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let pm;function NL(e,t){if(pT&&e.data instanceof Blob)return e.data.arrayBuffer().then(zw).then(t);if(mT&&(e.data instanceof ArrayBuffer||gT(e.data)))return t(zw(e.data));Dx(e,!1,r=>{pm||(pm=new TextEncoder),t(pm.encode(r))})}const Uw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ec=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Uw.length;e++)ec[Uw.charCodeAt(e)]=e;const CL=e=>{let t=e.length*.75,r=e.length,n,s=0,i,a,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(n=0;n<r;n+=4)i=ec[e.charCodeAt(n)],a=ec[e.charCodeAt(n+1)],l=ec[e.charCodeAt(n+2)],c=ec[e.charCodeAt(n+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},jL=typeof ArrayBuffer=="function",Rx=(e,t)=>{if(typeof e!="string")return{type:"message",data:yT(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:TL(e.substring(1),t)}:Hd[r]?e.length>1?{type:Hd[r],data:e.substring(1)}:{type:Hd[r]}:k0},TL=(e,t)=>{if(jL){const r=CL(e);return yT(r,t)}else return{base64:!0,data:e}},yT=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},xT="",AL=(e,t)=>{const r=e.length,n=new Array(r);let s=0;e.forEach((i,a)=>{Dx(i,!1,l=>{n[a]=l,++s===r&&t(n.join(xT))})})},DL=(e,t)=>{const r=e.split(xT),n=[];for(let s=0;s<r.length;s++){const i=Rx(r[s],t);if(n.push(i),i.type==="error")break}return n};function RL(){return new TransformStream({transform(e,t){NL(e,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let mm;function cd(e){return e.reduce((t,r)=>t+r.length,0)}function ud(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let s=0;s<t;s++)r[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function _L(e,t){mm||(mm=new TextDecoder);const r=[];let n=0,s=-1,i=!1;return new TransformStream({transform(a,l){for(r.push(a);;){if(n===0){if(cd(r)<1)break;const c=ud(r,1);i=(c[0]&128)===128,s=c[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(cd(r)<2)break;const c=ud(r,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(cd(r)<8)break;const c=ud(r,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(k0);break}s=d*Math.pow(2,32)+u.getUint32(4),n=3}else{if(cd(r)<s)break;const c=ud(r,s);l.enqueue(Rx(i?c:mm.decode(c),t)),n=0}if(s===0||s>e){l.enqueue(k0);break}}}})}const vT=4;function ar(e){if(e)return IL(e)}function IL(e){for(var t in ar.prototype)e[t]=ar.prototype[t];return e}ar.prototype.on=ar.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ar.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};ar.prototype.off=ar.prototype.removeListener=ar.prototype.removeAllListeners=ar.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===t||n.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};ar.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,t)}return this};ar.prototype.emitReserved=ar.prototype.emit;ar.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ar.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Qh=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Rn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ML="arraybuffer";function bT(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const OL=Rn.setTimeout,PL=Rn.clearTimeout;function Zh(e,t){t.useNativeTimers?(e.setTimeoutFn=OL.bind(Rn),e.clearTimeoutFn=PL.bind(Rn)):(e.setTimeoutFn=Rn.setTimeout.bind(Rn),e.clearTimeoutFn=Rn.clearTimeout.bind(Rn))}const LL=1.33;function FL(e){return typeof e=="string"?BL(e):Math.ceil((e.byteLength||e.size)*LL)}function BL(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function wT(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zL(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function UL(e){let t={},r=e.split("&");for(let n=0,s=r.length;n<s;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class HL extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class _x extends ar{constructor(t){super(),this.writable=!1,Zh(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new HL(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Rx(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=zL(t);return r.length?"?"+r:""}}class VL extends _x{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};DL(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,AL(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=wT()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let kT=!1;try{kT=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const WL=kT;function $L(){}class YL extends VL{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let Oo=class Vd extends ar{constructor(t,r,n){super(),this.createRequest=t,Zh(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=bT(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Vd.requestsCount++,Vd.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=$L,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Vd.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Oo.requestsCount=0;Oo.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Hw);else if(typeof addEventListener=="function"){const e="onpagehide"in Rn?"pagehide":"unload";addEventListener(e,Hw,!1)}}function Hw(){for(let e in Oo.requests)Oo.requests.hasOwnProperty(e)&&Oo.requests[e].abort()}const GL=function(){const e=ST({xdomain:!1});return e&&e.responseType!==null}();class qL extends YL{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=GL&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Oo(ST,this.uri(),t)}}function ST(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||WL))return new XMLHttpRequest}catch{}if(!t)try{return new Rn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ET=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class KL extends _x{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=ET?{}:bT(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;Dx(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}s&&Qh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=wT()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const gm=Rn.WebSocket||Rn.MozWebSocket;class QL extends KL{createSocket(t,r,n){return ET?new gm(t,r,n):r?new gm(t,r):new gm(t)}doWrite(t,r){this.ws.send(r)}}class ZL extends _x{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=_L(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),s=RL();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;this._writer.write(n).then(()=>{s&&Qh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const XL={websocket:QL,webtransport:ZL,polling:qL},JL=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function S0(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=JL.exec(e||""),i={},a=14;for(;a--;)i[e4[a]]=s[a]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=t4(i,i.path),i.queryKey=r4(i,i.query),i}function t4(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function r4(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(r[s]=i)}),r}const E0=typeof addEventListener=="function"&&typeof removeEventListener=="function",Wd=[];E0&&addEventListener("offline",()=>{Wd.forEach(e=>e())},!1);class zi extends ar{constructor(t,r){if(super(),this.binaryType=ML,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=S0(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=S0(r.host).host);Zh(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=UL(this.opts.query)),E0&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Wd.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=vT,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&zi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",zi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=FL(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Qh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(zi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),E0&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Wd.indexOf(this._offlineEventListener);n!==-1&&Wd.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}zi.protocol=vT;class n4 extends zi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;zi.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;zi.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function i(){n||(n=!0,d(),r.close(),r=null)}const a=f=>{const h=new Error("probe error: "+f);h.transport=r.name,i(),this.emitReserved("upgradeError",h)};function l(){a("transport closed")}function c(){a("socket closed")}function u(f){r&&f.name!==r.name&&i()}const d=()=>{r.removeListener("open",s),r.removeListener("error",a),r.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};r.once("open",s),r.once("error",a),r.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let s4=class extends n4{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>XL[s]).filter(s=>!!s)),super(t,n)}};function i4(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=S0(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const a4=typeof ArrayBuffer=="function",o4=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,NT=Object.prototype.toString,l4=typeof Blob=="function"||typeof Blob<"u"&&NT.call(Blob)==="[object BlobConstructor]",c4=typeof File=="function"||typeof File<"u"&&NT.call(File)==="[object FileConstructor]";function Ix(e){return a4&&(e instanceof ArrayBuffer||o4(e))||l4&&e instanceof Blob||c4&&e instanceof File}function $d(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if($d(e[r]))return!0;return!1}if(Ix(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return $d(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&$d(e[r]))return!0;return!1}function u4(e){const t=[],r=e.data,n=e;return n.data=N0(r,t),n.attachments=t.length,{packet:n,buffers:t}}function N0(e,t){if(!e)return e;if(Ix(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=N0(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=N0(e[n],t));return r}return e}function d4(e,t){return e.data=C0(e.data,t),delete e.attachments,e}function C0(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=C0(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=C0(e[r],t));return e}const f4=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],h4=5;var nt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(nt||(nt={}));class p4{constructor(t){this.replacer=t}encode(t){return(t.type===nt.EVENT||t.type===nt.ACK)&&$d(t)?this.encodeAsBinary({type:t.type===nt.EVENT?nt.BINARY_EVENT:nt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===nt.BINARY_EVENT||t.type===nt.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=u4(t),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function Vw(e){return Object.prototype.toString.call(e)==="[object Object]"}class Mx extends ar{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===nt.BINARY_EVENT;n||r.type===nt.BINARY_ACK?(r.type=n?nt.EVENT:nt.ACK,this.reconstructor=new m4(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Ix(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(nt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===nt.BINARY_EVENT||n.type===nt.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const a=t.substring(i,r);if(a!=Number(a)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const i=r+1;for(;++r;){const a=t.charAt(r);if(a==null||Number(a)!=a){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(Mx.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case nt.CONNECT:return Vw(r);case nt.DISCONNECT:return r===void 0;case nt.CONNECT_ERROR:return typeof r=="string"||Vw(r);case nt.EVENT:case nt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&f4.indexOf(r[0])===-1);case nt.ACK:case nt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class m4{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=d4(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const g4=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Mx,Encoder:p4,get PacketType(){return nt},protocol:h4},Symbol.toStringTag,{value:"Module"}));function Yn(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const y4=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class CT extends ar{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Yn(t,"open",this.onopen.bind(this)),Yn(t,"packet",this.onpacket.bind(this)),Yn(t,"error",this.onerror.bind(this)),Yn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,s,i;if(y4.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const a={type:nt.EVENT,data:r};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,f=r.pop();this._registerAckCallback(d,f),a.id=d}const l=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},s),a=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...r){return new Promise((n,s)=>{const i=(a,l)=>a?s(a):n(l);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:nt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case nt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case nt.EVENT:case nt.BINARY_EVENT:this.onevent(t);break;case nt.ACK:case nt.BINARY_ACK:this.onack(t);break;case nt.DISCONNECT:this.ondisconnect();break;case nt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:nt.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:nt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function pl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}pl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};pl.prototype.reset=function(){this.attempts=0};pl.prototype.setMin=function(e){this.ms=e};pl.prototype.setMax=function(e){this.max=e};pl.prototype.setJitter=function(e){this.jitter=e};class j0 extends ar{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Zh(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new pl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||g4;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new s4(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Yn(r,"open",function(){n.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},a=Yn(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Yn(t,"ping",this.onping.bind(this)),Yn(t,"data",this.ondata.bind(this)),Yn(t,"error",this.onerror.bind(this)),Yn(t,"close",this.onclose.bind(this)),Yn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Qh(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new CT(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Il={};function Yd(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=i4(e,t.path||"/socket.io"),n=r.source,s=r.id,i=r.path,a=Il[s]&&i in Il[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let c;return l?c=new j0(n,t):(Il[s]||(Il[s]=new j0(n,t)),c=Il[s]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Yd,{Manager:j0,Socket:CT,io:Yd,connect:Yd});const jT=g.createContext(null),x4=({children:e})=>{const[t,r]=g.useState([]),[n,s]=g.useState(!1),[i,a]=g.useState(null),{user:l}=Ot(),c=mr("notifications"),u=async()=>{s(!0),a(null);try{if((l==null?void 0:l.id)==="demo-admin")r([{id:"1",userId:"demo-admin",message:"Welcome to the FamConomy demo!",readStatus:!1,timestamp:new Date().toISOString(),type:"system"},{id:"2",userId:"demo-admin",message:"You have a new task assigned.",readStatus:!1,timestamp:new Date().toISOString(),type:"task"}]);else if(l!=null&&l.id){const p=await SL(l.id);c.log("Fetched notifications data:",p),r(p)}else r([])}catch(p){a(p instanceof Error?p.message:"Failed to fetch notifications")}finally{s(!1)}};g.useEffect(()=>{let p;if(l&&(u(),l.id!=="demo-admin")){p=Yd("https://famconomy.com",{query:{userId:l.id},transports:["websocket"]}),p.on("connect",()=>{c.log("Socket.IO connected:",p==null?void 0:p.id)}),p.on("newNotification",y=>{c.log("New notification received via WebSocket:",y),r(b=>[y,...b])}),p.on("disconnect",()=>{c.log("Socket.IO disconnected.")}),p.on("connect_error",y=>{c.error("Socket.IO connection error:",y.message)});const m=setInterval(u,3e4);return()=>{clearInterval(m),p&&p.disconnect()}}},[l]);const d=async p=>{try{(l==null?void 0:l.id)!=="demo-admin"&&await EL(p),r(m=>m.map(y=>y.id===p?{...y,readStatus:!0}:y))}catch(m){a(m instanceof Error?m.message:"Failed to mark notification as read")}},f=async()=>{try{r(p=>p.map(m=>({...m,readStatus:!0})))}catch(p){a(p instanceof Error?p.message:"Failed to mark all notifications as read")}},h=t.filter(p=>!p.readStatus).length;return o.jsx(jT.Provider,{value:{notifications:t,unreadCount:h,isLoading:n,error:i,markAsRead:d,markAllAsRead:f,fetchNotificationData:u},children:e})},TT=()=>{const e=g.useContext(jT);if(!e)throw new Error("useNotifications must be used within a NotificationsProvider");return e},AT=g.createContext(void 0),v4=({children:e})=>{const[t,r]=g.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});g.useEffect(()=>{const i=window.document.documentElement;i.classList.remove(t?"light":"dark"),i.classList.add(t?"dark":"light"),localStorage.setItem("theme",t?"dark":"light")},[t]);const n=g.useCallback(()=>{r(i=>!i)},[]),s=g.useCallback(i=>{r(i==="dark")},[]);return o.jsx(AT.Provider,{value:{isDarkMode:t,toggleTheme:n,setTheme:s},children:e})},DT=()=>{const e=g.useContext(AT);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e};function RT(e){return t=>typeof t===e}var b4=RT("function"),w4=e=>e===null,Ww=e=>Object.prototype.toString.call(e).slice(8,-1)==="RegExp",$w=e=>!k4(e)&&!w4(e)&&(b4(e)||typeof e=="object"),k4=RT("undefined");function S4(e,t){const{length:r}=e;if(r!==t.length)return!1;for(let n=r;n--!==0;)if(!Wr(e[n],t[n]))return!1;return!0}function E4(e,t){if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e.buffer),n=new DataView(t.buffer);let s=e.byteLength;for(;s--;)if(r.getUint8(s)!==n.getUint8(s))return!1;return!0}function N4(e,t){if(e.size!==t.size)return!1;for(const r of e.entries())if(!t.has(r[0]))return!1;for(const r of e.entries())if(!Wr(r[1],t.get(r[0])))return!1;return!0}function C4(e,t){if(e.size!==t.size)return!1;for(const r of e.entries())if(!t.has(r[0]))return!1;return!0}function Wr(e,t){if(e===t)return!0;if(e&&$w(e)&&t&&$w(t)){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)&&Array.isArray(t))return S4(e,t);if(e instanceof Map&&t instanceof Map)return N4(e,t);if(e instanceof Set&&t instanceof Set)return C4(e,t);if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return E4(e,t);if(Ww(e)&&Ww(t))return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=r.length;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[s]))return!1;for(let s=r.length;s--!==0;){const i=r[s];if(!(i==="_owner"&&e.$$typeof)&&!Wr(e[i],t[i]))return!1}return!0}return Number.isNaN(e)&&Number.isNaN(t)?!0:e===t}var j4=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],T4=["bigint","boolean","null","number","string","symbol","undefined"];function Xh(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(/HTML\w+Element/.test(t))return"HTMLElement";if(A4(t))return t}function as(e){return t=>Xh(t)===e}function A4(e){return j4.includes(e)}function ml(e){return t=>typeof t===e}function D4(e){return T4.includes(e)}var R4=["innerHTML","ownerDocument","style","attributes","nodeValue"];function Se(e){if(e===null)return"null";switch(typeof e){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(Se.array(e))return"Array";if(Se.plainFunction(e))return"Function";const t=Xh(e);return t||"Object"}Se.array=Array.isArray;Se.arrayOf=(e,t)=>!Se.array(e)&&!Se.function(t)?!1:e.every(r=>t(r));Se.asyncGeneratorFunction=e=>Xh(e)==="AsyncGeneratorFunction";Se.asyncFunction=as("AsyncFunction");Se.bigint=ml("bigint");Se.boolean=e=>e===!0||e===!1;Se.date=as("Date");Se.defined=e=>!Se.undefined(e);Se.domElement=e=>Se.object(e)&&!Se.plainObject(e)&&e.nodeType===1&&Se.string(e.nodeName)&&R4.every(t=>t in e);Se.empty=e=>Se.string(e)&&e.length===0||Se.array(e)&&e.length===0||Se.object(e)&&!Se.map(e)&&!Se.set(e)&&Object.keys(e).length===0||Se.set(e)&&e.size===0||Se.map(e)&&e.size===0;Se.error=as("Error");Se.function=ml("function");Se.generator=e=>Se.iterable(e)&&Se.function(e.next)&&Se.function(e.throw);Se.generatorFunction=as("GeneratorFunction");Se.instanceOf=(e,t)=>!e||!t?!1:Object.getPrototypeOf(e)===t.prototype;Se.iterable=e=>!Se.nullOrUndefined(e)&&Se.function(e[Symbol.iterator]);Se.map=as("Map");Se.nan=e=>Number.isNaN(e);Se.null=e=>e===null;Se.nullOrUndefined=e=>Se.null(e)||Se.undefined(e);Se.number=e=>ml("number")(e)&&!Se.nan(e);Se.numericString=e=>Se.string(e)&&e.length>0&&!Number.isNaN(Number(e));Se.object=e=>!Se.nullOrUndefined(e)&&(Se.function(e)||typeof e=="object");Se.oneOf=(e,t)=>Se.array(e)?e.indexOf(t)>-1:!1;Se.plainFunction=as("Function");Se.plainObject=e=>{if(Xh(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.getPrototypeOf({})};Se.primitive=e=>Se.null(e)||D4(typeof e);Se.promise=as("Promise");Se.propertyOf=(e,t,r)=>{if(!Se.object(e)||!t)return!1;const n=e[t];return Se.function(r)?r(n):Se.defined(n)};Se.regexp=as("RegExp");Se.set=as("Set");Se.string=ml("string");Se.symbol=ml("symbol");Se.undefined=ml("undefined");Se.weakMap=as("WeakMap");Se.weakSet=as("WeakSet");var je=Se;function _4(...e){return e.every(t=>je.string(t)||je.array(t)||je.plainObject(t))}function I4(e,t,r){return _T(e,t)?[e,t].every(je.array)?!e.some(Qw(r))&&t.some(Qw(r)):[e,t].every(je.plainObject)?!Object.entries(e).some(Kw(r))&&Object.entries(t).some(Kw(r)):t===r:!1}function Yw(e,t,r){const{actual:n,key:s,previous:i,type:a}=r,l=ws(e,s),c=ws(t,s);let u=[l,c].every(je.number)&&(a==="increased"?l<c:l>c);return je.undefined(n)||(u=u&&c===n),je.undefined(i)||(u=u&&l===i),u}function Gw(e,t,r){const{key:n,type:s,value:i}=r,a=ws(e,n),l=ws(t,n),c=s==="added"?a:l,u=s==="added"?l:a;if(!je.nullOrUndefined(i)){if(je.defined(c)){if(je.array(c)||je.plainObject(c))return I4(c,u,i)}else return Wr(u,i);return!1}return[a,l].every(je.array)?!u.every(Ox(c)):[a,l].every(je.plainObject)?M4(Object.keys(c),Object.keys(u)):![a,l].every(d=>je.primitive(d)&&je.defined(d))&&(s==="added"?!je.defined(a)&&je.defined(l):je.defined(a)&&!je.defined(l))}function qw(e,t,{key:r}={}){let n=ws(e,r),s=ws(t,r);if(!_T(n,s))throw new TypeError("Inputs have different types");if(!_4(n,s))throw new TypeError("Inputs don't have length");return[n,s].every(je.plainObject)&&(n=Object.keys(n),s=Object.keys(s)),[n,s]}function Kw(e){return([t,r])=>je.array(e)?Wr(e,r)||e.some(n=>Wr(n,r)||je.array(r)&&Ox(r)(n)):je.plainObject(e)&&e[t]?!!e[t]&&Wr(e[t],r):Wr(e,r)}function M4(e,t){return t.some(r=>!e.includes(r))}function Qw(e){return t=>je.array(e)?e.some(r=>Wr(r,t)||je.array(t)&&Ox(t)(r)):Wr(e,t)}function Ml(e,t){return je.array(e)?e.some(r=>Wr(r,t)):Wr(e,t)}function Ox(e){return t=>e.some(r=>Wr(r,t))}function _T(...e){return e.every(je.array)||e.every(je.number)||e.every(je.plainObject)||e.every(je.string)}function ws(e,t){return je.plainObject(e)||je.array(e)?je.string(t)?t.split(".").reduce((n,s)=>n&&n[s],e):je.number(t)?e[t]:e:e}function Lf(e,t){if([e,t].some(je.nullOrUndefined))throw new Error("Missing required parameters");if(![e,t].every(d=>je.plainObject(d)||je.array(d)))throw new Error("Expected plain objects or array");return{added:(d,f)=>{try{return Gw(e,t,{key:d,type:"added",value:f})}catch{return!1}},changed:(d,f,h)=>{try{const p=ws(e,d),m=ws(t,d),y=je.defined(f),b=je.defined(h);if(y||b){const v=b?Ml(h,p):!Ml(f,p),x=Ml(f,m);return v&&x}return[p,m].every(je.array)||[p,m].every(je.plainObject)?!Wr(p,m):p!==m}catch{return!1}},changedFrom:(d,f,h)=>{if(!je.defined(d))return!1;try{const p=ws(e,d),m=ws(t,d),y=je.defined(h);return Ml(f,p)&&(y?Ml(h,m):!y)}catch{return!1}},decreased:(d,f,h)=>{if(!je.defined(d))return!1;try{return Yw(e,t,{key:d,actual:f,previous:h,type:"decreased"})}catch{return!1}},emptied:d=>{try{const[f,h]=qw(e,t,{key:d});return!!f.length&&!h.length}catch{return!1}},filled:d=>{try{const[f,h]=qw(e,t,{key:d});return!f.length&&!!h.length}catch{return!1}},increased:(d,f,h)=>{if(!je.defined(d))return!1;try{return Yw(e,t,{key:d,actual:f,previous:h,type:"increased"})}catch{return!1}},removed:(d,f)=>{try{return Gw(e,t,{key:d,type:"removed",value:f})}catch{return!1}}}}var O4=new Error("Element already at target scroll position"),P4=new Error("Scroll cancelled"),L4=Math.min,Zw=Date.now,F4={left:Xw("scrollLeft"),top:Xw("scrollTop")};function Xw(e){return function(r,n,s,i){s=s||{},typeof s=="function"&&(i=s,s={}),typeof i!="function"&&(i=z4);var a=Zw(),l=r[e],c=s.ease||B4,u=isNaN(s.duration)?350:+s.duration,d=!1;return l===n?i(O4,r[e]):requestAnimationFrame(h),f;function f(){d=!0}function h(p){if(d)return i(P4,r[e]);var m=Zw(),y=L4(1,(m-a)/u),b=c(y);r[e]=b*(n-l)+l,y<1?requestAnimationFrame(h):requestAnimationFrame(function(){i(null,r[e])})}}}function B4(e){return .5*(1-Math.cos(Math.PI*e))}function z4(){}const U4=Zi(F4);var IT={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.Scrollparent=r()})(tI,function(){function t(n){var s=getComputedStyle(n,null).getPropertyValue("overflow");return s.indexOf("scroll")>-1||s.indexOf("auto")>-1}function r(n){if(n instanceof HTMLElement||n instanceof SVGElement){for(var s=n.parentNode;s.parentNode;){if(t(s))return s;s=s.parentNode}return document.scrollingElement||document.documentElement}}return r})})(IT);var H4=IT.exports;const MT=Zi(H4);var V4=function(e){return Object.prototype.hasOwnProperty.call(e,"props")},W4=function(e,t){return e+Zc(t)},Zc=function(e){return e===null||typeof e=="boolean"||typeof e>"u"?"":typeof e=="number"?e.toString():typeof e=="string"?e:Array.isArray(e)?e.reduce(W4,""):V4(e)&&Object.prototype.hasOwnProperty.call(e.props,"children")?Zc(e.props.children):""};Zc.default=Zc;var $4=Zc;const Jw=Zi($4);var Y4=function(t){return G4(t)&&!q4(t)};function G4(e){return!!e&&typeof e=="object"}function q4(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Z4(e)}var K4=typeof Symbol=="function"&&Symbol.for,Q4=K4?Symbol.for("react.element"):60103;function Z4(e){return e.$$typeof===Q4}function X4(e){return Array.isArray(e)?[]:{}}function Xc(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Ko(X4(e),e,t):e}function J4(e,t,r){return e.concat(t).map(function(n){return Xc(n,r)})}function e5(e,t){if(!t.customMerge)return Ko;var r=t.customMerge(e);return typeof r=="function"?r:Ko}function t5(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function ek(e){return Object.keys(e).concat(t5(e))}function OT(e,t){try{return t in e}catch{return!1}}function r5(e,t){return OT(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function n5(e,t,r){var n={};return r.isMergeableObject(e)&&ek(e).forEach(function(s){n[s]=Xc(e[s],r)}),ek(t).forEach(function(s){r5(e,s)||(OT(e,s)&&r.isMergeableObject(t[s])?n[s]=e5(s,r)(e[s],t[s],r):n[s]=Xc(t[s],r))}),n}function Ko(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||J4,r.isMergeableObject=r.isMergeableObject||Y4,r.cloneUnlessOtherwiseSpecified=Xc;var n=Array.isArray(t),s=Array.isArray(e),i=n===s;return i?n?r.arrayMerge(e,t,r):n5(e,t,r):Xc(t,r)}Ko.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,s){return Ko(n,s,r)},{})};var s5=Ko,i5=s5;const Qn=Zi(i5);var PT={exports:{}},a5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",o5=a5,l5=o5;function LT(){}function FT(){}FT.resetWarningCache=LT;var c5=function(){function e(n,s,i,a,l,c){if(c!==l5){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:FT,resetWarningCache:LT};return r.PropTypes=r,r};PT.exports=c5();var Px=PT.exports;const pe=Zi(Px);/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var Nu=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",u5=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(Nu&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();function d5(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}function f5(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},u5))}}var h5=Nu&&window.Promise,p5=h5?d5:f5;function BT(e){var t={};return e&&t.toString.call(e)==="[object Function]"}function qa(e,t){if(e.nodeType!==1)return[];var r=e.ownerDocument.defaultView,n=r.getComputedStyle(e,null);return t?n[t]:n}function Lx(e){return e.nodeName==="HTML"?e:e.parentNode||e.host}function Cu(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=qa(e),r=t.overflow,n=t.overflowX,s=t.overflowY;return/(auto|scroll|overlay)/.test(r+s+n)?e:Cu(Lx(e))}function zT(e){return e&&e.referenceNode?e.referenceNode:e}var tk=Nu&&!!(window.MSInputMethodContext&&document.documentMode),rk=Nu&&/MSIE 10/.test(navigator.userAgent);function gl(e){return e===11?tk:e===10?rk:tk||rk}function Qo(e){if(!e)return document.documentElement;for(var t=gl(10)?document.body:null,r=e.offsetParent||null;r===t&&e.nextElementSibling;)r=(e=e.nextElementSibling).offsetParent;var n=r&&r.nodeName;return!n||n==="BODY"||n==="HTML"?e?e.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(r.nodeName)!==-1&&qa(r,"position")==="static"?Qo(r):r}function m5(e){var t=e.nodeName;return t==="BODY"?!1:t==="HTML"||Qo(e.firstElementChild)===e}function T0(e){return e.parentNode!==null?T0(e.parentNode):e}function Ff(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var r=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=r?e:t,s=r?t:e,i=document.createRange();i.setStart(n,0),i.setEnd(s,0);var a=i.commonAncestorContainer;if(e!==a&&t!==a||n.contains(s))return m5(a)?a:Qo(a);var l=T0(e);return l.host?Ff(l.host,t):Ff(e,T0(t).host)}function Zo(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",r=t==="top"?"scrollTop":"scrollLeft",n=e.nodeName;if(n==="BODY"||n==="HTML"){var s=e.ownerDocument.documentElement,i=e.ownerDocument.scrollingElement||s;return i[r]}return e[r]}function g5(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=Zo(t,"top"),s=Zo(t,"left"),i=r?-1:1;return e.top+=n*i,e.bottom+=n*i,e.left+=s*i,e.right+=s*i,e}function nk(e,t){var r=t==="x"?"Left":"Top",n=r==="Left"?"Right":"Bottom";return parseFloat(e["border"+r+"Width"])+parseFloat(e["border"+n+"Width"])}function sk(e,t,r,n){return Math.max(t["offset"+e],t["scroll"+e],r["client"+e],r["offset"+e],r["scroll"+e],gl(10)?parseInt(r["offset"+e])+parseInt(n["margin"+(e==="Height"?"Top":"Left")])+parseInt(n["margin"+(e==="Height"?"Bottom":"Right")]):0)}function UT(e){var t=e.body,r=e.documentElement,n=gl(10)&&getComputedStyle(r);return{height:sk("Height",t,r,n),width:sk("Width",t,r,n)}}var y5=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},x5=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Xo=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function $i(e){return Mn({},e,{right:e.left+e.width,bottom:e.top+e.height})}function A0(e){var t={};try{if(gl(10)){t=e.getBoundingClientRect();var r=Zo(e,"top"),n=Zo(e,"left");t.top+=r,t.left+=n,t.bottom+=r,t.right+=n}else t=e.getBoundingClientRect()}catch{}var s={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i=e.nodeName==="HTML"?UT(e.ownerDocument):{},a=i.width||e.clientWidth||s.width,l=i.height||e.clientHeight||s.height,c=e.offsetWidth-a,u=e.offsetHeight-l;if(c||u){var d=qa(e);c-=nk(d,"x"),u-=nk(d,"y"),s.width-=c,s.height-=u}return $i(s)}function Fx(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=gl(10),s=t.nodeName==="HTML",i=A0(e),a=A0(t),l=Cu(e),c=qa(t),u=parseFloat(c.borderTopWidth),d=parseFloat(c.borderLeftWidth);r&&s&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var f=$i({top:i.top-a.top-u,left:i.left-a.left-d,width:i.width,height:i.height});if(f.marginTop=0,f.marginLeft=0,!n&&s){var h=parseFloat(c.marginTop),p=parseFloat(c.marginLeft);f.top-=u-h,f.bottom-=u-h,f.left-=d-p,f.right-=d-p,f.marginTop=h,f.marginLeft=p}return(n&&!r?t.contains(l):t===l&&l.nodeName!=="BODY")&&(f=g5(f,t)),f}function v5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e.ownerDocument.documentElement,n=Fx(e,r),s=Math.max(r.clientWidth,window.innerWidth||0),i=Math.max(r.clientHeight,window.innerHeight||0),a=t?0:Zo(r),l=t?0:Zo(r,"left"),c={top:a-n.top+n.marginTop,left:l-n.left+n.marginLeft,width:s,height:i};return $i(c)}function HT(e){var t=e.nodeName;if(t==="BODY"||t==="HTML")return!1;if(qa(e,"position")==="fixed")return!0;var r=Lx(e);return r?HT(r):!1}function VT(e){if(!e||!e.parentElement||gl())return document.documentElement;for(var t=e.parentElement;t&&qa(t,"transform")==="none";)t=t.parentElement;return t||document.documentElement}function Bx(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,i={top:0,left:0},a=s?VT(e):Ff(e,zT(t));if(n==="viewport")i=v5(a,s);else{var l=void 0;n==="scrollParent"?(l=Cu(Lx(t)),l.nodeName==="BODY"&&(l=e.ownerDocument.documentElement)):n==="window"?l=e.ownerDocument.documentElement:l=n;var c=Fx(l,a,s);if(l.nodeName==="HTML"&&!HT(a)){var u=UT(e.ownerDocument),d=u.height,f=u.width;i.top+=c.top-c.marginTop,i.bottom=d+c.top,i.left+=c.left-c.marginLeft,i.right=f+c.left}else i=c}r=r||0;var h=typeof r=="number";return i.left+=h?r:r.left||0,i.top+=h?r:r.top||0,i.right-=h?r:r.right||0,i.bottom-=h?r:r.bottom||0,i}function b5(e){var t=e.width,r=e.height;return t*r}function WT(e,t,r,n,s){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(e.indexOf("auto")===-1)return e;var a=Bx(r,n,i,s),l={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},c=Object.keys(l).map(function(h){return Mn({key:h},l[h],{area:b5(l[h])})}).sort(function(h,p){return p.area-h.area}),u=c.filter(function(h){var p=h.width,m=h.height;return p>=r.clientWidth&&m>=r.clientHeight}),d=u.length>0?u[0].key:c[0].key,f=e.split("-")[1];return d+(f?"-"+f:"")}function $T(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=n?VT(t):Ff(t,zT(r));return Fx(r,s,n)}function YT(e){var t=e.ownerDocument.defaultView,r=t.getComputedStyle(e),n=parseFloat(r.marginTop||0)+parseFloat(r.marginBottom||0),s=parseFloat(r.marginLeft||0)+parseFloat(r.marginRight||0),i={width:e.offsetWidth+s,height:e.offsetHeight+n};return i}function Bf(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(r){return t[r]})}function GT(e,t,r){r=r.split("-")[0];var n=YT(e),s={width:n.width,height:n.height},i=["right","left"].indexOf(r)!==-1,a=i?"top":"left",l=i?"left":"top",c=i?"height":"width",u=i?"width":"height";return s[a]=t[a]+t[c]/2-n[c]/2,r===l?s[l]=t[l]-n[u]:s[l]=t[Bf(l)],s}function ju(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function w5(e,t,r){if(Array.prototype.findIndex)return e.findIndex(function(s){return s[t]===r});var n=ju(e,function(s){return s[t]===r});return e.indexOf(n)}function qT(e,t,r){var n=r===void 0?e:e.slice(0,w5(e,"name",r));return n.forEach(function(s){s.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=s.function||s.fn;s.enabled&&BT(i)&&(t.offsets.popper=$i(t.offsets.popper),t.offsets.reference=$i(t.offsets.reference),t=i(t,s))}),t}function k5(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=$T(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=WT(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=GT(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=qT(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function KT(e,t){return e.some(function(r){var n=r.name,s=r.enabled;return s&&n===t})}function zx(e){for(var t=[!1,"ms","Webkit","Moz","O"],r=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var s=t[n],i=s?""+s+r:e;if(typeof document.body.style[i]<"u")return i}return null}function S5(){return this.state.isDestroyed=!0,KT(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[zx("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function QT(e){var t=e.ownerDocument;return t?t.defaultView:window}function ZT(e,t,r,n){var s=e.nodeName==="BODY",i=s?e.ownerDocument.defaultView:e;i.addEventListener(t,r,{passive:!0}),s||ZT(Cu(i.parentNode),t,r,n),n.push(i)}function E5(e,t,r,n){r.updateBound=n,QT(e).addEventListener("resize",r.updateBound,{passive:!0});var s=Cu(e);return ZT(s,"scroll",r.updateBound,r.scrollParents),r.scrollElement=s,r.eventsEnabled=!0,r}function N5(){this.state.eventsEnabled||(this.state=E5(this.reference,this.options,this.state,this.scheduleUpdate))}function C5(e,t){return QT(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(r){r.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function j5(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=C5(this.reference,this.state))}function Ux(e){return e!==""&&!isNaN(parseFloat(e))&&isFinite(e)}function D0(e,t){Object.keys(t).forEach(function(r){var n="";["width","height","top","right","bottom","left"].indexOf(r)!==-1&&Ux(t[r])&&(n="px"),e.style[r]=t[r]+n})}function T5(e,t){Object.keys(t).forEach(function(r){var n=t[r];n!==!1?e.setAttribute(r,t[r]):e.removeAttribute(r)})}function A5(e){return D0(e.instance.popper,e.styles),T5(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&D0(e.arrowElement,e.arrowStyles),e}function D5(e,t,r,n,s){var i=$T(s,t,e,r.positionFixed),a=WT(r.placement,i,t,e,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return t.setAttribute("x-placement",a),D0(t,{position:r.positionFixed?"fixed":"absolute"}),r}function R5(e,t){var r=e.offsets,n=r.popper,s=r.reference,i=Math.round,a=Math.floor,l=function(v){return v},c=i(s.width),u=i(n.width),d=["left","right"].indexOf(e.placement)!==-1,f=e.placement.indexOf("-")!==-1,h=c%2===u%2,p=c%2===1&&u%2===1,m=t?d||f||h?i:a:l,y=t?i:l;return{left:m(p&&!f&&t?n.left-1:n.left),top:y(n.top),bottom:y(n.bottom),right:m(n.right)}}var _5=Nu&&/Firefox/i.test(navigator.userAgent);function I5(e,t){var r=t.x,n=t.y,s=e.offsets.popper,i=ju(e.instance.modifiers,function(w){return w.name==="applyStyle"}).gpuAcceleration;i!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=i!==void 0?i:t.gpuAcceleration,l=Qo(e.instance.popper),c=A0(l),u={position:s.position},d=R5(e,window.devicePixelRatio<2||!_5),f=r==="bottom"?"top":"bottom",h=n==="right"?"left":"right",p=zx("transform"),m=void 0,y=void 0;if(f==="bottom"?l.nodeName==="HTML"?y=-l.clientHeight+d.bottom:y=-c.height+d.bottom:y=d.top,h==="right"?l.nodeName==="HTML"?m=-l.clientWidth+d.right:m=-c.width+d.right:m=d.left,a&&p)u[p]="translate3d("+m+"px, "+y+"px, 0)",u[f]=0,u[h]=0,u.willChange="transform";else{var b=f==="bottom"?-1:1,v=h==="right"?-1:1;u[f]=y*b,u[h]=m*v,u.willChange=f+", "+h}var x={"x-placement":e.placement};return e.attributes=Mn({},x,e.attributes),e.styles=Mn({},u,e.styles),e.arrowStyles=Mn({},e.offsets.arrow,e.arrowStyles),e}function XT(e,t,r){var n=ju(e,function(l){var c=l.name;return c===t}),s=!!n&&e.some(function(l){return l.name===r&&l.enabled&&l.order<n.order});if(!s){var i="`"+t+"`",a="`"+r+"`";console.warn(a+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return s}function M5(e,t){var r;if(!XT(e.instance.modifiers,"arrow","keepTogether"))return e;var n=t.element;if(typeof n=="string"){if(n=e.instance.popper.querySelector(n),!n)return e}else if(!e.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var s=e.placement.split("-")[0],i=e.offsets,a=i.popper,l=i.reference,c=["left","right"].indexOf(s)!==-1,u=c?"height":"width",d=c?"Top":"Left",f=d.toLowerCase(),h=c?"left":"top",p=c?"bottom":"right",m=YT(n)[u];l[p]-m<a[f]&&(e.offsets.popper[f]-=a[f]-(l[p]-m)),l[f]+m>a[p]&&(e.offsets.popper[f]+=l[f]+m-a[p]),e.offsets.popper=$i(e.offsets.popper);var y=l[f]+l[u]/2-m/2,b=qa(e.instance.popper),v=parseFloat(b["margin"+d]),x=parseFloat(b["border"+d+"Width"]),w=y-e.offsets.popper[f]-v-x;return w=Math.max(Math.min(a[u]-m,w),0),e.arrowElement=n,e.offsets.arrow=(r={},Xo(r,f,Math.round(w)),Xo(r,h,""),r),e}function O5(e){return e==="end"?"start":e==="start"?"end":e}var JT=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ym=JT.slice(3);function ik(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=ym.indexOf(e),n=ym.slice(r+1).concat(ym.slice(0,r));return t?n.reverse():n}var xm={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function P5(e,t){if(KT(e.instance.modifiers,"inner")||e.flipped&&e.placement===e.originalPlacement)return e;var r=Bx(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split("-")[0],s=Bf(n),i=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case xm.FLIP:a=[n,s];break;case xm.CLOCKWISE:a=ik(n);break;case xm.COUNTERCLOCKWISE:a=ik(n,!0);break;default:a=t.behavior}return a.forEach(function(l,c){if(n!==l||a.length===c+1)return e;n=e.placement.split("-")[0],s=Bf(n);var u=e.offsets.popper,d=e.offsets.reference,f=Math.floor,h=n==="left"&&f(u.right)>f(d.left)||n==="right"&&f(u.left)<f(d.right)||n==="top"&&f(u.bottom)>f(d.top)||n==="bottom"&&f(u.top)<f(d.bottom),p=f(u.left)<f(r.left),m=f(u.right)>f(r.right),y=f(u.top)<f(r.top),b=f(u.bottom)>f(r.bottom),v=n==="left"&&p||n==="right"&&m||n==="top"&&y||n==="bottom"&&b,x=["top","bottom"].indexOf(n)!==-1,w=!!t.flipVariations&&(x&&i==="start"&&p||x&&i==="end"&&m||!x&&i==="start"&&y||!x&&i==="end"&&b),k=!!t.flipVariationsByContent&&(x&&i==="start"&&m||x&&i==="end"&&p||!x&&i==="start"&&b||!x&&i==="end"&&y),S=w||k;(h||v||S)&&(e.flipped=!0,(h||v)&&(n=a[c+1]),S&&(i=O5(i)),e.placement=n+(i?"-"+i:""),e.offsets.popper=Mn({},e.offsets.popper,GT(e.instance.popper,e.offsets.reference,e.placement)),e=qT(e.instance.modifiers,e,"flip"))}),e}function L5(e){var t=e.offsets,r=t.popper,n=t.reference,s=e.placement.split("-")[0],i=Math.floor,a=["top","bottom"].indexOf(s)!==-1,l=a?"right":"bottom",c=a?"left":"top",u=a?"width":"height";return r[l]<i(n[c])&&(e.offsets.popper[c]=i(n[c])-r[u]),r[c]>i(n[l])&&(e.offsets.popper[c]=i(n[l])),e}function F5(e,t,r,n){var s=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+s[1],a=s[2];if(!i)return e;if(a.indexOf("%")===0){var l=void 0;switch(a){case"%p":l=r;break;case"%":case"%r":default:l=n}var c=$i(l);return c[t]/100*i}else if(a==="vh"||a==="vw"){var u=void 0;return a==="vh"?u=Math.max(document.documentElement.clientHeight,window.innerHeight||0):u=Math.max(document.documentElement.clientWidth,window.innerWidth||0),u/100*i}else return i}function B5(e,t,r,n){var s=[0,0],i=["right","left"].indexOf(n)!==-1,a=e.split(/(\+|\-)/).map(function(d){return d.trim()}),l=a.indexOf(ju(a,function(d){return d.search(/,|\s/)!==-1}));a[l]&&a[l].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,u=l!==-1?[a.slice(0,l).concat([a[l].split(c)[0]]),[a[l].split(c)[1]].concat(a.slice(l+1))]:[a];return u=u.map(function(d,f){var h=(f===1?!i:i)?"height":"width",p=!1;return d.reduce(function(m,y){return m[m.length-1]===""&&["+","-"].indexOf(y)!==-1?(m[m.length-1]=y,p=!0,m):p?(m[m.length-1]+=y,p=!1,m):m.concat(y)},[]).map(function(m){return F5(m,h,t,r)})}),u.forEach(function(d,f){d.forEach(function(h,p){Ux(h)&&(s[f]+=h*(d[p-1]==="-"?-1:1))})}),s}function z5(e,t){var r=t.offset,n=e.placement,s=e.offsets,i=s.popper,a=s.reference,l=n.split("-")[0],c=void 0;return Ux(+r)?c=[+r,0]:c=B5(r,i,a,l),l==="left"?(i.top+=c[0],i.left-=c[1]):l==="right"?(i.top+=c[0],i.left+=c[1]):l==="top"?(i.left+=c[0],i.top-=c[1]):l==="bottom"&&(i.left+=c[0],i.top+=c[1]),e.popper=i,e}function U5(e,t){var r=t.boundariesElement||Qo(e.instance.popper);e.instance.reference===r&&(r=Qo(r));var n=zx("transform"),s=e.instance.popper.style,i=s.top,a=s.left,l=s[n];s.top="",s.left="",s[n]="";var c=Bx(e.instance.popper,e.instance.reference,t.padding,r,e.positionFixed);s.top=i,s.left=a,s[n]=l,t.boundaries=c;var u=t.priority,d=e.offsets.popper,f={primary:function(p){var m=d[p];return d[p]<c[p]&&!t.escapeWithReference&&(m=Math.max(d[p],c[p])),Xo({},p,m)},secondary:function(p){var m=p==="right"?"left":"top",y=d[m];return d[p]>c[p]&&!t.escapeWithReference&&(y=Math.min(d[m],c[p]-(p==="right"?d.width:d.height))),Xo({},m,y)}};return u.forEach(function(h){var p=["left","top"].indexOf(h)!==-1?"primary":"secondary";d=Mn({},d,f[p](h))}),e.offsets.popper=d,e}function H5(e){var t=e.placement,r=t.split("-")[0],n=t.split("-")[1];if(n){var s=e.offsets,i=s.reference,a=s.popper,l=["bottom","top"].indexOf(r)!==-1,c=l?"left":"top",u=l?"width":"height",d={start:Xo({},c,i[c]),end:Xo({},c,i[c]+i[u]-a[u])};e.offsets.popper=Mn({},a,d[n])}return e}function V5(e){if(!XT(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,r=ju(e.instance.modifiers,function(n){return n.name==="preventOverflow"}).boundaries;if(t.bottom<r.top||t.left>r.right||t.top>r.bottom||t.right<r.left){if(e.hide===!0)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(e.hide===!1)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}function W5(e){var t=e.placement,r=t.split("-")[0],n=e.offsets,s=n.popper,i=n.reference,a=["left","right"].indexOf(r)!==-1,l=["top","left"].indexOf(r)===-1;return s[a?"left":"top"]=i[r]-(l?s[a?"width":"height"]:0),e.placement=Bf(t),e.offsets.popper=$i(s),e}var $5={shift:{order:100,enabled:!0,fn:H5},offset:{order:200,enabled:!0,fn:z5,offset:0},preventOverflow:{order:300,enabled:!0,fn:U5,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:L5},arrow:{order:500,enabled:!0,fn:M5,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:P5,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:W5},hide:{order:800,enabled:!0,fn:V5},computeStyle:{order:850,enabled:!0,fn:I5,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:A5,onLoad:D5,gpuAcceleration:void 0}},Y5={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:$5},Jc=function(){function e(t,r){var n=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};y5(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=p5(this.update.bind(this)),this.options=Mn({},e.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(Mn({},e.Defaults.modifiers,s.modifiers)).forEach(function(a){n.options.modifiers[a]=Mn({},e.Defaults.modifiers[a]||{},s.modifiers?s.modifiers[a]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(a){return Mn({name:a},n.options.modifiers[a])}).sort(function(a,l){return a.order-l.order}),this.modifiers.forEach(function(a){a.enabled&&BT(a.onLoad)&&a.onLoad(n.reference,n.popper,n.options,a,n.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return x5(e,[{key:"update",value:function(){return k5.call(this)}},{key:"destroy",value:function(){return S5.call(this)}},{key:"enableEventListeners",value:function(){return N5.call(this)}},{key:"disableEventListeners",value:function(){return j5.call(this)}}]),e}();Jc.Utils=(typeof window<"u"?window:global).PopperUtils;Jc.placements=JT;Jc.Defaults=Y5;var G5=["innerHTML","ownerDocument","style","attributes","nodeValue"],q5=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],K5=["bigint","boolean","null","number","string","symbol","undefined"];function Jh(e){var t=Object.prototype.toString.call(e).slice(8,-1);if(/HTML\w+Element/.test(t))return"HTMLElement";if(Q5(t))return t}function os(e){return function(t){return Jh(t)===e}}function Q5(e){return q5.includes(e)}function yl(e){return function(t){return typeof t===e}}function Z5(e){return K5.includes(e)}function Z(e){if(e===null)return"null";switch(typeof e){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(Z.array(e))return"Array";if(Z.plainFunction(e))return"Function";var t=Jh(e);return t||"Object"}Z.array=Array.isArray;Z.arrayOf=function(e,t){return!Z.array(e)&&!Z.function(t)?!1:e.every(function(r){return t(r)})};Z.asyncGeneratorFunction=function(e){return Jh(e)==="AsyncGeneratorFunction"};Z.asyncFunction=os("AsyncFunction");Z.bigint=yl("bigint");Z.boolean=function(e){return e===!0||e===!1};Z.date=os("Date");Z.defined=function(e){return!Z.undefined(e)};Z.domElement=function(e){return Z.object(e)&&!Z.plainObject(e)&&e.nodeType===1&&Z.string(e.nodeName)&&G5.every(function(t){return t in e})};Z.empty=function(e){return Z.string(e)&&e.length===0||Z.array(e)&&e.length===0||Z.object(e)&&!Z.map(e)&&!Z.set(e)&&Object.keys(e).length===0||Z.set(e)&&e.size===0||Z.map(e)&&e.size===0};Z.error=os("Error");Z.function=yl("function");Z.generator=function(e){return Z.iterable(e)&&Z.function(e.next)&&Z.function(e.throw)};Z.generatorFunction=os("GeneratorFunction");Z.instanceOf=function(e,t){return!e||!t?!1:Object.getPrototypeOf(e)===t.prototype};Z.iterable=function(e){return!Z.nullOrUndefined(e)&&Z.function(e[Symbol.iterator])};Z.map=os("Map");Z.nan=function(e){return Number.isNaN(e)};Z.null=function(e){return e===null};Z.nullOrUndefined=function(e){return Z.null(e)||Z.undefined(e)};Z.number=function(e){return yl("number")(e)&&!Z.nan(e)};Z.numericString=function(e){return Z.string(e)&&e.length>0&&!Number.isNaN(Number(e))};Z.object=function(e){return!Z.nullOrUndefined(e)&&(Z.function(e)||typeof e=="object")};Z.oneOf=function(e,t){return Z.array(e)?e.indexOf(t)>-1:!1};Z.plainFunction=os("Function");Z.plainObject=function(e){if(Jh(e)!=="Object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.getPrototypeOf({})};Z.primitive=function(e){return Z.null(e)||Z5(typeof e)};Z.promise=os("Promise");Z.propertyOf=function(e,t,r){if(!Z.object(e)||!t)return!1;var n=e[t];return Z.function(r)?r(n):Z.defined(n)};Z.regexp=os("RegExp");Z.set=os("Set");Z.string=yl("string");Z.symbol=yl("symbol");Z.undefined=yl("undefined");Z.weakMap=os("WeakMap");Z.weakSet=os("WeakSet");function e2(e){return function(t){return typeof t===e}}var X5=e2("function"),J5=function(e){return e===null},ak=function(e){return Object.prototype.toString.call(e).slice(8,-1)==="RegExp"},ok=function(e){return!eF(e)&&!J5(e)&&(X5(e)||typeof e=="object")},eF=e2("undefined"),R0=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function tF(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=r;n--!==0;)if(!Jr(e[n],t[n]))return!1;return!0}function rF(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new DataView(e.buffer),n=new DataView(t.buffer),s=e.byteLength;s--;)if(r.getUint8(s)!==n.getUint8(s))return!1;return!0}function nF(e,t){var r,n,s,i;if(e.size!==t.size)return!1;try{for(var a=R0(e.entries()),l=a.next();!l.done;l=a.next()){var c=l.value;if(!t.has(c[0]))return!1}}catch(f){r={error:f}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}try{for(var u=R0(e.entries()),d=u.next();!d.done;d=u.next()){var c=d.value;if(!Jr(c[1],t.get(c[0])))return!1}}catch(f){s={error:f}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(s)throw s.error}}return!0}function sF(e,t){var r,n;if(e.size!==t.size)return!1;try{for(var s=R0(e.entries()),i=s.next();!i.done;i=s.next()){var a=i.value;if(!t.has(a[0]))return!1}}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!0}function Jr(e,t){if(e===t)return!0;if(e&&ok(e)&&t&&ok(t)){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)&&Array.isArray(t))return tF(e,t);if(e instanceof Map&&t instanceof Map)return nF(e,t);if(e instanceof Set&&t instanceof Set)return sF(e,t);if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return rF(e,t);if(ak(e)&&ak(t))return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var s=r.length;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[s]))return!1;for(var s=r.length;s--!==0;){var i=r[s];if(!(i==="_owner"&&e.$$typeof)&&!Jr(e[i],t[i]))return!1}return!0}return Number.isNaN(e)&&Number.isNaN(t)?!0:e===t}function iF(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every(function(r){return Z.string(r)||Z.array(r)||Z.plainObject(r)})}function aF(e,t,r){return t2(e,t)?[e,t].every(Z.array)?!e.some(fk(r))&&t.some(fk(r)):[e,t].every(Z.plainObject)?!Object.entries(e).some(dk(r))&&Object.entries(t).some(dk(r)):t===r:!1}function lk(e,t,r){var n=r.actual,s=r.key,i=r.previous,a=r.type,l=ks(e,s),c=ks(t,s),u=[l,c].every(Z.number)&&(a==="increased"?l<c:l>c);return Z.undefined(n)||(u=u&&c===n),Z.undefined(i)||(u=u&&l===i),u}function ck(e,t,r){var n=r.key,s=r.type,i=r.value,a=ks(e,n),l=ks(t,n),c=s==="added"?a:l,u=s==="added"?l:a;if(!Z.nullOrUndefined(i)){if(Z.defined(c)){if(Z.array(c)||Z.plainObject(c))return aF(c,u,i)}else return Jr(u,i);return!1}return[a,l].every(Z.array)?!u.every(Hx(c)):[a,l].every(Z.plainObject)?oF(Object.keys(c),Object.keys(u)):![a,l].every(function(d){return Z.primitive(d)&&Z.defined(d)})&&(s==="added"?!Z.defined(a)&&Z.defined(l):Z.defined(a)&&!Z.defined(l))}function uk(e,t,r){var n=r===void 0?{}:r,s=n.key,i=ks(e,s),a=ks(t,s);if(!t2(i,a))throw new TypeError("Inputs have different types");if(!iF(i,a))throw new TypeError("Inputs don't have length");return[i,a].every(Z.plainObject)&&(i=Object.keys(i),a=Object.keys(a)),[i,a]}function dk(e){return function(t){var r=t[0],n=t[1];return Z.array(e)?Jr(e,n)||e.some(function(s){return Jr(s,n)||Z.array(n)&&Hx(n)(s)}):Z.plainObject(e)&&e[r]?!!e[r]&&Jr(e[r],n):Jr(e,n)}}function oF(e,t){return t.some(function(r){return!e.includes(r)})}function fk(e){return function(t){return Z.array(e)?e.some(function(r){return Jr(r,t)||Z.array(t)&&Hx(t)(r)}):Jr(e,t)}}function Ol(e,t){return Z.array(e)?e.some(function(r){return Jr(r,t)}):Jr(e,t)}function Hx(e){return function(t){return e.some(function(r){return Jr(r,t)})}}function t2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every(Z.array)||e.every(Z.number)||e.every(Z.plainObject)||e.every(Z.string)}function ks(e,t){if(Z.plainObject(e)||Z.array(e)){if(Z.string(t)){var r=t.split(".");return r.reduce(function(n,s){return n&&n[s]},e)}return Z.number(t)?e[t]:e}return e}function lF(e,t){if([e,t].some(Z.nullOrUndefined))throw new Error("Missing required parameters");if(![e,t].every(function(f){return Z.plainObject(f)||Z.array(f)}))throw new Error("Expected plain objects or array");var r=function(f,h){try{return ck(e,t,{key:f,type:"added",value:h})}catch{return!1}},n=function(f,h,p){try{var m=ks(e,f),y=ks(t,f),b=Z.defined(h),v=Z.defined(p);if(b||v){var x=v?Ol(p,m):!Ol(h,m),w=Ol(h,y);return x&&w}return[m,y].every(Z.array)||[m,y].every(Z.plainObject)?!Jr(m,y):m!==y}catch{return!1}},s=function(f,h,p){if(!Z.defined(f))return!1;try{var m=ks(e,f),y=ks(t,f),b=Z.defined(p);return Ol(h,m)&&(b?Ol(p,y):!b)}catch{return!1}},i=function(f,h){return Z.defined(f)?n(f,h):!1},a=function(f,h,p){if(!Z.defined(f))return!1;try{return lk(e,t,{key:f,actual:h,previous:p,type:"decreased"})}catch{return!1}},l=function(f){try{var h=uk(e,t,{key:f}),p=h[0],m=h[1];return!!p.length&&!m.length}catch{return!1}},c=function(f){try{var h=uk(e,t,{key:f}),p=h[0],m=h[1];return!p.length&&!!m.length}catch{return!1}},u=function(f,h,p){if(!Z.defined(f))return!1;try{return lk(e,t,{key:f,actual:h,previous:p,type:"increased"})}catch{return!1}},d=function(f,h){try{return ck(e,t,{key:f,type:"removed",value:h})}catch{return!1}};return{added:r,changed:n,changedFrom:s,changedTo:i,decreased:a,emptied:l,filled:c,increased:u,removed:d}}function hk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hk(Object(r),!0).forEach(function(n){Tr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n2(n.key),n)}}function Au(e,t,r){return t&&cF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tr(e,t,r){return t=n2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Du(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_0(e,t)}function zf(e){return zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zf(e)}function _0(e,t){return _0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_0(e,t)}function uF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dF(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function r2(e,t){if(e==null)return{};var r=dF(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bs(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fF(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bs(e)}function Ru(e){var t=uF();return function(){var n=zf(e),s;if(t){var i=zf(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return fF(this,s)}}function hF(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n2(e){var t=hF(e,"string");return typeof t=="symbol"?t:String(t)}var pF={flip:{padding:20},preventOverflow:{padding:10}},mF="The typeValidator argument must be a function with the signature function(props, propName, componentName).",gF="The error message is optional, but must be a string if provided.";function yF(e,t,r,n){return typeof e=="boolean"?e:typeof e=="function"?e(t,r,n):e?!!e:!1}function xF(e,t){return Object.hasOwnProperty.call(e,t)}function vF(e,t,r,n){return new Error("Required ".concat(e[t]," `").concat(t,"` was not specified in `").concat(r,"`."))}function bF(e,t){if(typeof e!="function")throw new TypeError(mF);if(t&&typeof t!="string")throw new TypeError(gF)}function pk(e,t,r){return bF(e,r),function(n,s,i){for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];return yF(t,n,s,i)?xF(n,s)?e.apply(void 0,[n,s,i].concat(l)):vF(n,s,i):e.apply(void 0,[n,s,i].concat(l))}}var at={INIT:"init",IDLE:"idle",OPENING:"opening",OPEN:"open",CLOSING:"closing"},Pl=mc.createPortal!==void 0;function ms(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function vm(){return"ontouchstart"in window&&/Mobi/.test(navigator.userAgent)}function dd(e){var t=e.title,r=e.data,n=e.warn,s=n===void 0?!1:n,i=e.debug,a=i===void 0?!1:i,l=s?console.warn||console.error:console.log;a&&t&&r&&(console.groupCollapsed("%creact-floater: ".concat(t),"color: #9b00ff; font-weight: bold; font-size: 12px;"),Array.isArray(r)?r.forEach(function(c){Z.plainObject(c)&&c.key?l.apply(console,[c.key,c.value]):l.apply(console,[c])}):l.apply(console,[r]),console.groupEnd())}function wF(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;e.addEventListener(t,r,n)}function kF(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;e.removeEventListener(t,r,n)}function SF(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s;s=function(a){r(a),kF(e,t,s)},wF(e,t,s,n)}function mk(){}var s2=function(e){Du(r,e);var t=Ru(r);function r(){return Tu(this,r),t.apply(this,arguments)}return Au(r,[{key:"componentDidMount",value:function(){ms()&&(this.node||this.appendNode(),Pl||this.renderPortal())}},{key:"componentDidUpdate",value:function(){ms()&&(Pl||this.renderPortal())}},{key:"componentWillUnmount",value:function(){!ms()||!this.node||(Pl||mc.unmountComponentAtNode(this.node),this.node&&this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=void 0))}},{key:"appendNode",value:function(){var s=this.props,i=s.id,a=s.zIndex;this.node||(this.node=document.createElement("div"),i&&(this.node.id=i),a&&(this.node.style.zIndex=a),document.body.appendChild(this.node))}},{key:"renderPortal",value:function(){if(!ms())return null;var s=this.props,i=s.children,a=s.setRef;if(this.node||this.appendNode(),Pl)return mc.createPortal(i,this.node);var l=mc.unstable_renderSubtreeIntoContainer(this,i.length>1?te.createElement("div",null,i):i[0],this.node);return a(l),null}},{key:"renderReact16",value:function(){var s=this.props,i=s.hasChildren,a=s.placement,l=s.target;return i?this.renderPortal():l||a==="center"?this.renderPortal():null}},{key:"render",value:function(){return Pl?this.renderReact16():null}}]),r}(te.Component);Tr(s2,"propTypes",{children:pe.oneOfType([pe.element,pe.array]),hasChildren:pe.bool,id:pe.oneOfType([pe.string,pe.number]),placement:pe.string,setRef:pe.func.isRequired,target:pe.oneOfType([pe.object,pe.string]),zIndex:pe.number});var i2=function(e){Du(r,e);var t=Ru(r);function r(){return Tu(this,r),t.apply(this,arguments)}return Au(r,[{key:"parentStyle",get:function(){var s=this.props,i=s.placement,a=s.styles,l=a.arrow.length,c={pointerEvents:"none",position:"absolute",width:"100%"};return i.startsWith("top")?(c.bottom=0,c.left=0,c.right=0,c.height=l):i.startsWith("bottom")?(c.left=0,c.right=0,c.top=0,c.height=l):i.startsWith("left")?(c.right=0,c.top=0,c.bottom=0):i.startsWith("right")&&(c.left=0,c.top=0),c}},{key:"render",value:function(){var s=this.props,i=s.placement,a=s.setArrowRef,l=s.styles,c=l.arrow,u=c.color,d=c.display,f=c.length,h=c.margin,p=c.position,m=c.spread,y={display:d,position:p},b,v=m,x=f;return i.startsWith("top")?(b="0,0 ".concat(v/2,",").concat(x," ").concat(v,",0"),y.bottom=0,y.marginLeft=h,y.marginRight=h):i.startsWith("bottom")?(b="".concat(v,",").concat(x," ").concat(v/2,",0 0,").concat(x),y.top=0,y.marginLeft=h,y.marginRight=h):i.startsWith("left")?(x=m,v=f,b="0,0 ".concat(v,",").concat(x/2," 0,").concat(x),y.right=0,y.marginTop=h,y.marginBottom=h):i.startsWith("right")&&(x=m,v=f,b="".concat(v,",").concat(x," ").concat(v,",0 0,").concat(x/2),y.left=0,y.marginTop=h,y.marginBottom=h),te.createElement("div",{className:"__floater__arrow",style:this.parentStyle},te.createElement("span",{ref:a,style:y},te.createElement("svg",{width:v,height:x,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},te.createElement("polygon",{points:b,fill:u}))))}}]),r}(te.Component);Tr(i2,"propTypes",{placement:pe.string.isRequired,setArrowRef:pe.func.isRequired,styles:pe.object.isRequired});var EF=["color","height","width"];function a2(e){var t=e.handleClick,r=e.styles,n=r.color,s=r.height,i=r.width,a=r2(r,EF);return te.createElement("button",{"aria-label":"close",onClick:t,style:a,type:"button"},te.createElement("svg",{width:"".concat(i,"px"),height:"".concat(s,"px"),viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},te.createElement("g",null,te.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:n}))))}a2.propTypes={handleClick:pe.func.isRequired,styles:pe.object.isRequired};function o2(e){var t=e.content,r=e.footer,n=e.handleClick,s=e.open,i=e.positionWrapper,a=e.showCloseButton,l=e.title,c=e.styles,u={content:te.isValidElement(t)?t:te.createElement("div",{className:"__floater__content",style:c.content},t)};return l&&(u.title=te.isValidElement(l)?l:te.createElement("div",{className:"__floater__title",style:c.title},l)),r&&(u.footer=te.isValidElement(r)?r:te.createElement("div",{className:"__floater__footer",style:c.footer},r)),(a||i)&&!Z.boolean(s)&&(u.close=te.createElement(a2,{styles:c.close,handleClick:n})),te.createElement("div",{className:"__floater__container",style:c.container},u.close,u.title,u.content,u.footer)}o2.propTypes={content:pe.node.isRequired,footer:pe.node,handleClick:pe.func.isRequired,open:pe.bool,positionWrapper:pe.bool.isRequired,showCloseButton:pe.bool.isRequired,styles:pe.object.isRequired,title:pe.node};var l2=function(e){Du(r,e);var t=Ru(r);function r(){return Tu(this,r),t.apply(this,arguments)}return Au(r,[{key:"style",get:function(){var s=this.props,i=s.disableAnimation,a=s.component,l=s.placement,c=s.hideArrow,u=s.status,d=s.styles,f=d.arrow.length,h=d.floater,p=d.floaterCentered,m=d.floaterClosing,y=d.floaterOpening,b=d.floaterWithAnimation,v=d.floaterWithComponent,x={};return c||(l.startsWith("top")?x.padding="0 0 ".concat(f,"px"):l.startsWith("bottom")?x.padding="".concat(f,"px 0 0"):l.startsWith("left")?x.padding="0 ".concat(f,"px 0 0"):l.startsWith("right")&&(x.padding="0 0 0 ".concat(f,"px"))),[at.OPENING,at.OPEN].indexOf(u)!==-1&&(x=Dt(Dt({},x),y)),u===at.CLOSING&&(x=Dt(Dt({},x),m)),u===at.OPEN&&!i&&(x=Dt(Dt({},x),b)),l==="center"&&(x=Dt(Dt({},x),p)),a&&(x=Dt(Dt({},x),v)),Dt(Dt({},h),x)}},{key:"render",value:function(){var s=this.props,i=s.component,a=s.handleClick,l=s.hideArrow,c=s.setFloaterRef,u=s.status,d={},f=["__floater"];return i?te.isValidElement(i)?d.content=te.cloneElement(i,{closeFn:a}):d.content=i({closeFn:a}):d.content=te.createElement(o2,this.props),u===at.OPEN&&f.push("__floater__open"),l||(d.arrow=te.createElement(i2,this.props)),te.createElement("div",{ref:c,className:f.join(" "),style:this.style},te.createElement("div",{className:"__floater__body"},d.content,d.arrow))}}]),r}(te.Component);Tr(l2,"propTypes",{component:pe.oneOfType([pe.func,pe.element]),content:pe.node,disableAnimation:pe.bool.isRequired,footer:pe.node,handleClick:pe.func.isRequired,hideArrow:pe.bool.isRequired,open:pe.bool,placement:pe.string.isRequired,positionWrapper:pe.bool.isRequired,setArrowRef:pe.func.isRequired,setFloaterRef:pe.func.isRequired,showCloseButton:pe.bool,status:pe.string.isRequired,styles:pe.object.isRequired,title:pe.node});var c2=function(e){Du(r,e);var t=Ru(r);function r(){return Tu(this,r),t.apply(this,arguments)}return Au(r,[{key:"render",value:function(){var s=this.props,i=s.children,a=s.handleClick,l=s.handleMouseEnter,c=s.handleMouseLeave,u=s.setChildRef,d=s.setWrapperRef,f=s.style,h=s.styles,p;if(i)if(te.Children.count(i)===1)if(!te.isValidElement(i))p=te.createElement("span",null,i);else{var m=Z.function(i.type)?"innerRef":"ref";p=te.cloneElement(te.Children.only(i),Tr({},m,u))}else p=i;return p?te.createElement("span",{ref:d,style:Dt(Dt({},h),f),onClick:a,onMouseEnter:l,onMouseLeave:c},p):null}}]),r}(te.Component);Tr(c2,"propTypes",{children:pe.node,handleClick:pe.func.isRequired,handleMouseEnter:pe.func.isRequired,handleMouseLeave:pe.func.isRequired,setChildRef:pe.func.isRequired,setWrapperRef:pe.func.isRequired,style:pe.object,styles:pe.object.isRequired});var NF={zIndex:100};function CF(e){var t=Qn(NF,e.options||{});return{wrapper:{cursor:"help",display:"inline-flex",flexDirection:"column",zIndex:t.zIndex},wrapperPosition:{left:-1e3,position:"absolute",top:-1e3,visibility:"hidden"},floater:{display:"inline-block",filter:"drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))",maxWidth:300,opacity:0,position:"relative",transition:"opacity 0.3s",visibility:"hidden",zIndex:t.zIndex},floaterOpening:{opacity:1,visibility:"visible"},floaterWithAnimation:{opacity:1,transition:"opacity 0.3s, transform 0.2s",visibility:"visible"},floaterWithComponent:{maxWidth:"100%"},floaterClosing:{opacity:0,visibility:"visible"},floaterCentered:{left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)"},container:{backgroundColor:"#fff",color:"#666",minHeight:60,minWidth:200,padding:20,position:"relative",zIndex:10},title:{borderBottom:"1px solid #555",color:"#555",fontSize:18,marginBottom:5,paddingBottom:6,paddingRight:18},content:{fontSize:15},close:{backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",fontSize:0,height:15,outline:"none",padding:10,position:"absolute",right:0,top:0,width:15,WebkitAppearance:"none"},footer:{borderTop:"1px solid #ccc",fontSize:13,marginTop:10,paddingTop:5},arrow:{color:"#fff",display:"inline-flex",length:16,margin:8,position:"absolute",spread:32},options:t}}var jF=["arrow","flip","offset"],TF=["position","top","right","bottom","left"],Vx=function(e){Du(r,e);var t=Ru(r);function r(n){var s;return Tu(this,r),s=t.call(this,n),Tr(Bs(s),"setArrowRef",function(i){s.arrowRef=i}),Tr(Bs(s),"setChildRef",function(i){s.childRef=i}),Tr(Bs(s),"setFloaterRef",function(i){s.floaterRef=i}),Tr(Bs(s),"setWrapperRef",function(i){s.wrapperRef=i}),Tr(Bs(s),"handleTransitionEnd",function(){var i=s.state.status,a=s.props.callback;s.wrapperPopper&&s.wrapperPopper.instance.update(),s.setState({status:i===at.OPENING?at.OPEN:at.IDLE},function(){var l=s.state.status;a(l===at.OPEN?"open":"close",s.props)})}),Tr(Bs(s),"handleClick",function(){var i=s.props,a=i.event,l=i.open;if(!Z.boolean(l)){var c=s.state,u=c.positionWrapper,d=c.status;(s.event==="click"||s.event==="hover"&&u)&&(dd({title:"click",data:[{event:a,status:d===at.OPEN?"closing":"opening"}],debug:s.debug}),s.toggle())}}),Tr(Bs(s),"handleMouseEnter",function(){var i=s.props,a=i.event,l=i.open;if(!(Z.boolean(l)||vm())){var c=s.state.status;s.event==="hover"&&c===at.IDLE&&(dd({title:"mouseEnter",data:[{key:"originalEvent",value:a}],debug:s.debug}),clearTimeout(s.eventDelayTimeout),s.toggle())}}),Tr(Bs(s),"handleMouseLeave",function(){var i=s.props,a=i.event,l=i.eventDelay,c=i.open;if(!(Z.boolean(c)||vm())){var u=s.state,d=u.status,f=u.positionWrapper;s.event==="hover"&&(dd({title:"mouseLeave",data:[{key:"originalEvent",value:a}],debug:s.debug}),l?[at.OPENING,at.OPEN].indexOf(d)!==-1&&!f&&!s.eventDelayTimeout&&(s.eventDelayTimeout=setTimeout(function(){delete s.eventDelayTimeout,s.toggle()},l*1e3)):s.toggle(at.IDLE))}}),s.state={currentPlacement:n.placement,needsUpdate:!1,positionWrapper:n.wrapperOptions.position&&!!n.target,status:at.INIT,statusWrapper:at.INIT},s._isMounted=!1,s.hasMounted=!1,ms()&&window.addEventListener("load",function(){s.popper&&s.popper.instance.update(),s.wrapperPopper&&s.wrapperPopper.instance.update()}),s}return Au(r,[{key:"componentDidMount",value:function(){if(ms()){var s=this.state.positionWrapper,i=this.props,a=i.children,l=i.open,c=i.target;this._isMounted=!0,dd({title:"init",data:{hasChildren:!!a,hasTarget:!!c,isControlled:Z.boolean(l),positionWrapper:s,target:this.target,floater:this.floaterRef},debug:this.debug}),this.hasMounted||(this.initPopper(),this.hasMounted=!0),!a&&c&&Z.boolean(l)}}},{key:"componentDidUpdate",value:function(s,i){if(ms()){var a=this.props,l=a.autoOpen,c=a.open,u=a.target,d=a.wrapperOptions,f=lF(i,this.state),h=f.changedFrom,p=f.changed;if(s.open!==c){var m;Z.boolean(c)&&(m=c?at.OPENING:at.CLOSING),this.toggle(m)}(s.wrapperOptions.position!==d.position||s.target!==u)&&this.changeWrapperPosition(this.props),p("status",at.IDLE)&&c?this.toggle(at.OPEN):h("status",at.INIT,at.IDLE)&&l&&this.toggle(at.OPEN),this.popper&&p("status",at.OPENING)&&this.popper.instance.update(),this.floaterRef&&(p("status",at.OPENING)||p("status",at.CLOSING))&&SF(this.floaterRef,"transitionend",this.handleTransitionEnd),p("needsUpdate",!0)&&this.rebuildPopper()}}},{key:"componentWillUnmount",value:function(){ms()&&(this._isMounted=!1,this.popper&&this.popper.instance.destroy(),this.wrapperPopper&&this.wrapperPopper.instance.destroy())}},{key:"initPopper",value:function(){var s=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.target,a=this.state.positionWrapper,l=this.props,c=l.disableFlip,u=l.getPopper,d=l.hideArrow,f=l.offset,h=l.placement,p=l.wrapperOptions,m=h==="top"||h==="bottom"?"flip":["right","bottom-end","top-end","left","top-start","bottom-start"];if(h==="center")this.setState({status:at.IDLE});else if(i&&this.floaterRef){var y=this.options,b=y.arrow,v=y.flip,x=y.offset,w=r2(y,jF);new Jc(i,this.floaterRef,{placement:h,modifiers:Dt({arrow:Dt({enabled:!d,element:this.arrowRef},b),flip:Dt({enabled:!c,behavior:m},v),offset:Dt({offset:"0, ".concat(f,"px")},x)},w),onCreate:function(E){var N;if(s.popper=E,!((N=s.floaterRef)!==null&&N!==void 0&&N.isConnected)){s.setState({needsUpdate:!0});return}u(E,"floater"),s._isMounted&&s.setState({currentPlacement:E.placement,status:at.IDLE}),h!==E.placement&&setTimeout(function(){E.instance.update()},1)},onUpdate:function(E){s.popper=E;var N=s.state.currentPlacement;s._isMounted&&E.placement!==N&&s.setState({currentPlacement:E.placement})}})}if(a){var k=Z.undefined(p.offset)?0:p.offset;new Jc(this.target,this.wrapperRef,{placement:p.placement||h,modifiers:{arrow:{enabled:!1},offset:{offset:"0, ".concat(k,"px")},flip:{enabled:!1}},onCreate:function(E){s.wrapperPopper=E,s._isMounted&&s.setState({statusWrapper:at.IDLE}),u(E,"wrapper"),h!==E.placement&&setTimeout(function(){E.instance.update()},1)}})}}},{key:"rebuildPopper",value:function(){var s=this;this.floaterRefInterval=setInterval(function(){var i;(i=s.floaterRef)!==null&&i!==void 0&&i.isConnected&&(clearInterval(s.floaterRefInterval),s.setState({needsUpdate:!1}),s.initPopper())},50)}},{key:"changeWrapperPosition",value:function(s){var i=s.target,a=s.wrapperOptions;this.setState({positionWrapper:a.position&&!!i})}},{key:"toggle",value:function(s){var i=this.state.status,a=i===at.OPEN?at.CLOSING:at.OPENING;Z.undefined(s)||(a=s),this.setState({status:a})}},{key:"debug",get:function(){var s=this.props.debug;return s||ms()&&"ReactFloaterDebug"in window&&!!window.ReactFloaterDebug}},{key:"event",get:function(){var s=this.props,i=s.disableHoverToClick,a=s.event;return a==="hover"&&vm()&&!i?"click":a}},{key:"options",get:function(){var s=this.props.options;return Qn(pF,s||{})}},{key:"styles",get:function(){var s=this,i=this.state,a=i.status,l=i.positionWrapper,c=i.statusWrapper,u=this.props.styles,d=Qn(CF(u),u);if(l){var f;[at.IDLE].indexOf(a)===-1||[at.IDLE].indexOf(c)===-1?f=d.wrapperPosition:f=this.wrapperPopper.styles,d.wrapper=Dt(Dt({},d.wrapper),f)}if(this.target){var h=window.getComputedStyle(this.target);this.wrapperStyles?d.wrapper=Dt(Dt({},d.wrapper),this.wrapperStyles):["relative","static"].indexOf(h.position)===-1&&(this.wrapperStyles={},l||(TF.forEach(function(p){s.wrapperStyles[p]=h[p]}),d.wrapper=Dt(Dt({},d.wrapper),this.wrapperStyles),this.target.style.position="relative",this.target.style.top="auto",this.target.style.right="auto",this.target.style.bottom="auto",this.target.style.left="auto"))}return d}},{key:"target",get:function(){if(!ms())return null;var s=this.props.target;return s?Z.domElement(s)?s:document.querySelector(s):this.childRef||this.wrapperRef}},{key:"render",value:function(){var s=this.state,i=s.currentPlacement,a=s.positionWrapper,l=s.status,c=this.props,u=c.children,d=c.component,f=c.content,h=c.disableAnimation,p=c.footer,m=c.hideArrow,y=c.id,b=c.open,v=c.showCloseButton,x=c.style,w=c.target,k=c.title,S=te.createElement(c2,{handleClick:this.handleClick,handleMouseEnter:this.handleMouseEnter,handleMouseLeave:this.handleMouseLeave,setChildRef:this.setChildRef,setWrapperRef:this.setWrapperRef,style:x,styles:this.styles.wrapper},u),E={};return a?E.wrapperInPortal=S:E.wrapperAsChildren=S,te.createElement("span",null,te.createElement(s2,{hasChildren:!!u,id:y,placement:i,setRef:this.setFloaterRef,target:w,zIndex:this.styles.options.zIndex},te.createElement(l2,{component:d,content:f,disableAnimation:h,footer:p,handleClick:this.handleClick,hideArrow:m||i==="center",open:b,placement:i,positionWrapper:a,setArrowRef:this.setArrowRef,setFloaterRef:this.setFloaterRef,showCloseButton:v,status:l,styles:this.styles,title:k}),E.wrapperInPortal),E.wrapperAsChildren)}}]),r}(te.Component);Tr(Vx,"propTypes",{autoOpen:pe.bool,callback:pe.func,children:pe.node,component:pk(pe.oneOfType([pe.func,pe.element]),function(e){return!e.content}),content:pk(pe.node,function(e){return!e.component}),debug:pe.bool,disableAnimation:pe.bool,disableFlip:pe.bool,disableHoverToClick:pe.bool,event:pe.oneOf(["hover","click"]),eventDelay:pe.number,footer:pe.node,getPopper:pe.func,hideArrow:pe.bool,id:pe.oneOfType([pe.string,pe.number]),offset:pe.number,open:pe.bool,options:pe.object,placement:pe.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto","center"]),showCloseButton:pe.bool,style:pe.object,styles:pe.object,target:pe.oneOfType([pe.object,pe.string]),title:pe.node,wrapperOptions:pe.shape({offset:pe.number,placement:pe.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto"]),position:pe.bool})});Tr(Vx,"defaultProps",{autoOpen:!1,callback:mk,debug:!1,disableAnimation:!1,disableFlip:!1,disableHoverToClick:!1,event:"click",eventDelay:.4,getPopper:mk,hideArrow:!1,offset:15,placement:"bottom",showCloseButton:!1,styles:{},target:null,wrapperOptions:{position:!1}});var AF=Object.defineProperty,DF=(e,t,r)=>t in e?AF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Te=(e,t,r)=>DF(e,typeof t!="symbol"?t+"":t,r),yt={INIT:"init",START:"start",STOP:"stop",RESET:"reset",PREV:"prev",NEXT:"next",GO:"go",CLOSE:"close",SKIP:"skip",UPDATE:"update"},Kn={TOUR_START:"tour:start",STEP_BEFORE:"step:before",BEACON:"beacon",TOOLTIP:"tooltip",STEP_AFTER:"step:after",TOUR_END:"tour:end",TOUR_STATUS:"tour:status",TARGET_NOT_FOUND:"error:target_not_found"},Ve={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},et={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished"};function bi(){var e;return!!(typeof window<"u"&&((e=window.document)!=null&&e.createElement))}function u2(e){return e?e.getBoundingClientRect():null}function RF(e=!1){const{body:t,documentElement:r}=document;if(!t||!r)return 0;if(e){const n=[t.scrollHeight,t.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight].sort((i,a)=>i-a),s=Math.floor(n.length/2);return n.length%2===0?(n[s-1]+n[s])/2:n[s]}return Math.max(t.scrollHeight,t.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)}function Ws(e){if(typeof e=="string")try{return document.querySelector(e)}catch{return null}return e}function _F(e){return!e||e.nodeType!==1?null:getComputedStyle(e)}function eu(e,t,r){if(!e)return ka();const n=MT(e);if(n){if(n.isSameNode(ka()))return r?document:ka();if(!(n.scrollHeight>n.offsetHeight)&&!t)return n.style.overflow="initial",ka()}return n}function ep(e,t){if(!e)return!1;const r=eu(e,t);return r?!r.isSameNode(ka()):!1}function IF(e){return e.offsetParent!==document.body}function Jo(e,t="fixed"){if(!e||!(e instanceof HTMLElement))return!1;const{nodeName:r}=e,n=_F(e);return r==="BODY"||r==="HTML"?!1:n&&n.position===t?!0:e.parentNode?Jo(e.parentNode,t):!1}function MF(e){var t;if(!e)return!1;let r=e;for(;r&&r!==document.body;){if(r instanceof HTMLElement){const{display:n,visibility:s}=getComputedStyle(r);if(n==="none"||s==="hidden")return!1}r=(t=r.parentElement)!=null?t:null}return!0}function OF(e,t,r){var n,s,i;const a=u2(e),l=eu(e,r),c=ep(e,r),u=Jo(e);let d=0,f=(n=a==null?void 0:a.top)!=null?n:0;if(c&&u){const h=(s=e==null?void 0:e.offsetTop)!=null?s:0,p=(i=l==null?void 0:l.scrollTop)!=null?i:0;f=h-p}else l instanceof HTMLElement&&(d=l.scrollTop,!c&&!Jo(e)&&(f+=d),l.isSameNode(ka())||(f+=ka().scrollTop));return Math.floor(f-t)}function PF(e,t,r){var n;if(!e)return 0;const{offsetTop:s=0,scrollTop:i=0}=(n=MT(e))!=null?n:{};let a=e.getBoundingClientRect().top+i;s&&(ep(e,r)||IF(e))&&(a-=s);const l=Math.floor(a-t);return l<0?0:l}function ka(){var e;return(e=document.scrollingElement)!=null?e:document.documentElement}function LF(e,t){const{duration:r,element:n}=t;return new Promise((s,i)=>{const{scrollTop:a}=n,l=e>a?e-a:a-e;U4.top(n,e,{duration:l<100?50:r},c=>c&&c.message!=="Element already at target scroll position"?i(c):s())})}var Ll=Jn.createPortal!==void 0;function d2(e=navigator.userAgent){let t=e;return typeof window>"u"?t="node":document.documentMode?t="ie":/Edge/.test(e)?t="edge":window.opera||e.includes(" OPR/")?t="opera":typeof window.InstallTrigger<"u"?t="firefox":window.chrome?t="chrome":/(Version\/([\d._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(e)&&(t="safari"),t}function Gd(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function gs(e,t={}){const{defaultValue:r,step:n,steps:s}=t;let i=Jw(e);if(i)(i.includes("{step}")||i.includes("{steps}"))&&n&&s&&(i=i.replace("{step}",n.toString()).replace("{steps}",s.toString()));else if(g.isValidElement(e)&&!Object.values(e.props).length&&Gd(e.type)==="function"){const a=e.type({});i=gs(a,t)}else i=Jw(r);return i}function FF(e,t){return!je.plainObject(e)||!je.array(t)?!1:Object.keys(e).every(r=>t.includes(r))}function BF(e){const t=/^#?([\da-f])([\da-f])([\da-f])$/i,r=e.replace(t,(s,i,a,l)=>i+i+a+a+l+l),n=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(r);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[]}function gk(e){return e.disableBeacon||e.placement==="center"}function yk(){return!["chrome","safari","firefox","opera"].includes(d2())}function Ba({data:e,debug:t=!1,title:r,warn:n=!1}){const s=n?console.warn||console.error:console.log;t&&(r&&e?(console.groupCollapsed(`%creact-joyride: ${r}`,"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(e)?e.forEach(i=>{je.plainObject(i)&&i.key?s.apply(console,[i.key,i.value]):s.apply(console,[i])}):s.apply(console,[e]),console.groupEnd()):console.error("Missing title or data props"))}function zF(e){return Object.keys(e)}function f2(e,...t){if(!je.plainObject(e))throw new TypeError("Expected an object");const r={};for(const n in e)({}).hasOwnProperty.call(e,n)&&(t.includes(n)||(r[n]=e[n]));return r}function UF(e,...t){if(!je.plainObject(e))throw new TypeError("Expected an object");if(!t.length)return e;const r={};for(const n in e)({}).hasOwnProperty.call(e,n)&&t.includes(n)&&(r[n]=e[n]);return r}function I0(e,t,r){const n=i=>i.replace("{step}",String(t)).replace("{steps}",String(r));if(Gd(e)==="string")return n(e);if(!g.isValidElement(e))return e;const{children:s}=e.props;if(Gd(s)==="string"&&s.includes("{step}"))return g.cloneElement(e,{children:n(s)});if(Array.isArray(s))return g.cloneElement(e,{children:s.map(i=>typeof i=="string"?n(i):I0(i,t,r))});if(Gd(e.type)==="function"&&!Object.values(e.props).length){const i=e.type({});return I0(i,t,r)}return e}function HF(e){const{isFirstStep:t,lifecycle:r,previousLifecycle:n,scrollToFirstStep:s,step:i,target:a}=e;return!i.disableScrolling&&(!t||s||r===Ve.TOOLTIP)&&i.placement!=="center"&&(!i.isFixed||!Jo(a))&&n!==r&&[Ve.BEACON,Ve.TOOLTIP].includes(r)}var VF={options:{preventOverflow:{boundariesElement:"scrollParent"}},wrapperOptions:{offset:-18,position:!0}},h2={back:"Back",close:"Close",last:"Last",next:"Next",nextLabelWithProgress:"Next (Step {step} of {steps})",open:"Open the dialog",skip:"Skip"},WF={event:"click",placement:"bottom",offset:10,disableBeacon:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrollParentFix:!1,disableScrolling:!1,hideBackButton:!1,hideCloseButton:!1,hideFooter:!1,isFixed:!1,locale:h2,showProgress:!1,showSkipButton:!1,spotlightClicks:!1,spotlightPadding:10},$F={continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:void 0,hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]},YF={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",width:380,zIndex:100},Fl={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},xk={borderRadius:4,position:"absolute"};function GF(e,t){var r,n,s,i,a;const{floaterProps:l,styles:c}=e,u=Qn((r=t.floaterProps)!=null?r:{},l??{}),d=Qn(c??{},(n=t.styles)!=null?n:{}),f=Qn(YF,d.options||{}),h=t.placement==="center"||t.disableBeacon;let{width:p}=f;window.innerWidth>480&&(p=380),"width"in f&&(p=typeof f.width=="number"&&window.innerWidth<f.width?window.innerWidth-30:f.width);const m={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:f.zIndex},y={beacon:{...Fl,display:h?"none":"inline-block",height:f.beaconSize,position:"relative",width:f.beaconSize,zIndex:f.zIndex},beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:f.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:`rgba(${BF(f.primaryColor).join(",")}, 0.2)`,border:`2px solid ${f.primaryColor}`,borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:f.backgroundColor,borderRadius:5,boxSizing:"border-box",color:f.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:p},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:{...Fl,backgroundColor:f.primaryColor,borderRadius:4,color:"#fff"},buttonBack:{...Fl,color:f.primaryColor,marginLeft:"auto",marginRight:5},buttonClose:{...Fl,color:f.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14},buttonSkip:{...Fl,color:f.textColor,fontSize:14},overlay:{...m,backgroundColor:f.overlayColor,mixBlendMode:"hard-light"},overlayLegacy:{...m},overlayLegacyCenter:{...m,backgroundColor:f.overlayColor},spotlight:{...xk,backgroundColor:"gray"},spotlightLegacy:{...xk,boxShadow:`0 0 0 9999px ${f.overlayColor}, ${f.spotlightShadow}`},floaterStyles:{arrow:{color:(a=(i=(s=u==null?void 0:u.styles)==null?void 0:s.arrow)==null?void 0:i.color)!=null?a:f.arrowColor},options:{zIndex:f.zIndex+100}},options:f};return Qn(y,d)}function qF(e){return UF(e,"beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","hideCloseButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent")}function ao(e,t){var r,n,s,i,a,l;const c=t??{},u=Qn.all([WF,qF(e),c],{isMergeableObject:je.plainObject}),d=GF(e,u),f=ep(Ws(u.target),u.disableScrollParentFix),h=Qn.all([VF,(r=e.floaterProps)!=null?r:{},(n=u.floaterProps)!=null?n:{}]);return h.offset=u.offset,h.styles=Qn((s=h.styles)!=null?s:{},d.floaterStyles),h.offset+=(a=(i=e.spotlightPadding)!=null?i:u.spotlightPadding)!=null?a:0,u.placementBeacon&&h.wrapperOptions&&(h.wrapperOptions.placement=u.placementBeacon),f&&h.options.preventOverflow&&(h.options.preventOverflow.boundariesElement="window"),{...u,locale:Qn.all([h2,(l=e.locale)!=null?l:{},u.locale||{}]),floaterProps:h,styles:f2(d,"floaterStyles")}}function p2(e,t=!1){return je.plainObject(e)?e.target?!0:(Ba({title:"validateStep",data:"target is missing from the step",warn:!0,debug:t}),!1):(Ba({title:"validateStep",data:"step must be an object",warn:!0,debug:t}),!1)}function vk(e,t=!1){return je.array(e)?e.every(r=>p2(r,t)):(Ba({title:"validateSteps",data:"steps must be an array",warn:!0,debug:t}),!1)}var m2={action:"init",controlled:!1,index:0,lifecycle:Ve.INIT,origin:null,size:0,status:et.IDLE},bk=zF(f2(m2,"controlled","size")),KF=class{constructor(t){Te(this,"beaconPopper"),Te(this,"tooltipPopper"),Te(this,"data",new Map),Te(this,"listener"),Te(this,"store",new Map),Te(this,"addListener",i=>{this.listener=i}),Te(this,"setSteps",i=>{const{size:a,status:l}=this.getState(),c={size:i.length,status:l};this.data.set("steps",i),l===et.WAITING&&!a&&i.length&&(c.status=et.RUNNING),this.setState(c)}),Te(this,"getPopper",i=>i==="beacon"?this.beaconPopper:this.tooltipPopper),Te(this,"setPopper",(i,a)=>{i==="beacon"?this.beaconPopper=a:this.tooltipPopper=a}),Te(this,"cleanupPoppers",()=>{this.beaconPopper=null,this.tooltipPopper=null}),Te(this,"close",(i=null)=>{const{index:a,status:l}=this.getState();l===et.RUNNING&&this.setState({...this.getNextState({action:yt.CLOSE,index:a+1,origin:i})})}),Te(this,"go",i=>{const{controlled:a,status:l}=this.getState();if(a||l!==et.RUNNING)return;const c=this.getSteps()[i];this.setState({...this.getNextState({action:yt.GO,index:i}),status:c?l:et.FINISHED})}),Te(this,"info",()=>this.getState()),Te(this,"next",()=>{const{index:i,status:a}=this.getState();a===et.RUNNING&&this.setState(this.getNextState({action:yt.NEXT,index:i+1}))}),Te(this,"open",()=>{const{status:i}=this.getState();i===et.RUNNING&&this.setState({...this.getNextState({action:yt.UPDATE,lifecycle:Ve.TOOLTIP})})}),Te(this,"prev",()=>{const{index:i,status:a}=this.getState();a===et.RUNNING&&this.setState({...this.getNextState({action:yt.PREV,index:i-1})})}),Te(this,"reset",(i=!1)=>{const{controlled:a}=this.getState();a||this.setState({...this.getNextState({action:yt.RESET,index:0}),status:i?et.RUNNING:et.READY})}),Te(this,"skip",()=>{const{status:i}=this.getState();i===et.RUNNING&&this.setState({action:yt.SKIP,lifecycle:Ve.INIT,status:et.SKIPPED})}),Te(this,"start",i=>{const{index:a,size:l}=this.getState();this.setState({...this.getNextState({action:yt.START,index:je.number(i)?i:a},!0),status:l?et.RUNNING:et.WAITING})}),Te(this,"stop",(i=!1)=>{const{index:a,status:l}=this.getState();[et.FINISHED,et.SKIPPED].includes(l)||this.setState({...this.getNextState({action:yt.STOP,index:a+(i?1:0)}),status:et.PAUSED})}),Te(this,"update",i=>{var a,l;if(!FF(i,bk))throw new Error(`State is not valid. Valid keys: ${bk.join(", ")}`);this.setState({...this.getNextState({...this.getState(),...i,action:(a=i.action)!=null?a:yt.UPDATE,origin:(l=i.origin)!=null?l:null},!0)})});const{continuous:r=!1,stepIndex:n,steps:s=[]}=t??{};this.setState({action:yt.INIT,controlled:je.number(n),continuous:r,index:je.number(n)?n:0,lifecycle:Ve.INIT,origin:null,status:s.length?et.READY:et.IDLE},!0),this.beaconPopper=null,this.tooltipPopper=null,this.listener=null,this.setSteps(s)}getState(){return this.store.size?{action:this.store.get("action")||"",controlled:this.store.get("controlled")||!1,index:parseInt(this.store.get("index"),10),lifecycle:this.store.get("lifecycle")||"",origin:this.store.get("origin")||null,size:this.store.get("size")||0,status:this.store.get("status")||""}:{...m2}}getNextState(t,r=!1){var n,s,i,a,l;const{action:c,controlled:u,index:d,size:f,status:h}=this.getState(),p=je.number(t.index)?t.index:d,m=u&&!r?d:Math.min(Math.max(p,0),f);return{action:(n=t.action)!=null?n:c,controlled:u,index:m,lifecycle:(s=t.lifecycle)!=null?s:Ve.INIT,origin:(i=t.origin)!=null?i:null,size:(a=t.size)!=null?a:f,status:m===f?et.FINISHED:(l=t.status)!=null?l:h}}getSteps(){const t=this.data.get("steps");return Array.isArray(t)?t:[]}hasUpdatedState(t){const r=JSON.stringify(t),n=JSON.stringify(this.getState());return r!==n}setState(t,r=!1){const n=this.getState(),{action:s,index:i,lifecycle:a,origin:l=null,size:c,status:u}={...n,...t};this.store.set("action",s),this.store.set("index",i),this.store.set("lifecycle",a),this.store.set("origin",l),this.store.set("size",c),this.store.set("status",u),r&&(this.store.set("controlled",t.controlled),this.store.set("continuous",t.continuous)),this.listener&&this.hasUpdatedState(n)&&this.listener(this.getState())}getHelpers(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}};function QF(e){return new KF(e)}function ZF({styles:e}){return g.createElement("div",{key:"JoyrideSpotlight",className:"react-joyride__spotlight","data-test-id":"spotlight",style:e})}var XF=ZF,JF=class extends g.Component{constructor(){super(...arguments),Te(this,"isActive",!1),Te(this,"resizeTimeout"),Te(this,"scrollTimeout"),Te(this,"scrollParent"),Te(this,"state",{isScrolling:!1,mouseOverSpotlight:!1,showSpotlight:!0}),Te(this,"hideSpotlight",()=>{const{continuous:e,disableOverlay:t,lifecycle:r}=this.props,n=[Ve.INIT,Ve.BEACON,Ve.COMPLETE,Ve.ERROR];return t||(e?n.includes(r):r!==Ve.TOOLTIP)}),Te(this,"handleMouseMove",e=>{const{mouseOverSpotlight:t}=this.state,{height:r,left:n,position:s,top:i,width:a}=this.spotlightStyles,l=s==="fixed"?e.clientY:e.pageY,c=s==="fixed"?e.clientX:e.pageX,u=l>=i&&l<=i+r,f=c>=n&&c<=n+a&&u;f!==t&&this.updateState({mouseOverSpotlight:f})}),Te(this,"handleScroll",()=>{const{target:e}=this.props,t=Ws(e);if(this.scrollParent!==document){const{isScrolling:r}=this.state;r||this.updateState({isScrolling:!0,showSpotlight:!1}),clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.updateState({isScrolling:!1,showSpotlight:!0})},50)}else Jo(t,"sticky")&&this.updateState({})}),Te(this,"handleResize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.isActive&&this.forceUpdate()},100)})}componentDidMount(){const{debug:e,disableScrolling:t,disableScrollParentFix:r=!1,target:n}=this.props,s=Ws(n);this.scrollParent=eu(s??document.body,r,!0),this.isActive=!0,window.addEventListener("resize",this.handleResize)}componentDidUpdate(e){var t;const{disableScrollParentFix:r,lifecycle:n,spotlightClicks:s,target:i}=this.props,{changed:a}=Lf(e,this.props);if(a("target")||a("disableScrollParentFix")){const l=Ws(i);this.scrollParent=eu(l??document.body,r,!0)}a("lifecycle",Ve.TOOLTIP)&&((t=this.scrollParent)==null||t.addEventListener("scroll",this.handleScroll,{passive:!0}),setTimeout(()=>{const{isScrolling:l}=this.state;l||this.updateState({showSpotlight:!0})},100)),(a("spotlightClicks")||a("disableOverlay")||a("lifecycle"))&&(s&&n===Ve.TOOLTIP?window.addEventListener("mousemove",this.handleMouseMove,!1):n!==Ve.TOOLTIP&&window.removeEventListener("mousemove",this.handleMouseMove))}componentWillUnmount(){var e;this.isActive=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout),clearTimeout(this.scrollTimeout),(e=this.scrollParent)==null||e.removeEventListener("scroll",this.handleScroll)}get overlayStyles(){const{mouseOverSpotlight:e}=this.state,{disableOverlayClose:t,placement:r,styles:n}=this.props;let s=n.overlay;return yk()&&(s=r==="center"?n.overlayLegacyCenter:n.overlayLegacy),{cursor:t?"default":"pointer",height:RF(),pointerEvents:e?"none":"auto",...s}}get spotlightStyles(){var e,t,r;const{showSpotlight:n}=this.state,{disableScrollParentFix:s=!1,spotlightClicks:i,spotlightPadding:a=0,styles:l,target:c}=this.props,u=Ws(c),d=u2(u),f=Jo(u),h=OF(u,a,s);return{...yk()?l.spotlightLegacy:l.spotlight,height:Math.round(((e=d==null?void 0:d.height)!=null?e:0)+a*2),left:Math.round(((t=d==null?void 0:d.left)!=null?t:0)-a),opacity:n?1:0,pointerEvents:i?"none":"auto",position:f?"fixed":"absolute",top:h,transition:"opacity 0.2s",width:Math.round(((r=d==null?void 0:d.width)!=null?r:0)+a*2)}}updateState(e){this.isActive&&this.setState(t=>({...t,...e}))}render(){const{showSpotlight:e}=this.state,{onClickOverlay:t,placement:r}=this.props,{hideSpotlight:n,overlayStyles:s,spotlightStyles:i}=this;if(n())return null;let a=r!=="center"&&e&&g.createElement(XF,{styles:i});if(d2()==="safari"){const{mixBlendMode:l,zIndex:c,...u}=s;a=g.createElement("div",{style:{...u}},a),delete s.backgroundColor}return g.createElement("div",{className:"react-joyride__overlay","data-test-id":"overlay",onClick:t,role:"presentation",style:s},a)}},e6=class extends g.Component{constructor(){super(...arguments),Te(this,"node",null)}componentDidMount(){const{id:e}=this.props;bi()&&(this.node=document.createElement("div"),this.node.id=e,document.body.appendChild(this.node),Ll||this.renderReact15())}componentDidUpdate(){bi()&&(Ll||this.renderReact15())}componentWillUnmount(){!bi()||!this.node||(Ll||Jn.unmountComponentAtNode(this.node),this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=null))}renderReact15(){if(!bi())return;const{children:e}=this.props;this.node&&Jn.unstable_renderSubtreeIntoContainer(this,e,this.node)}renderReact16(){if(!bi()||!Ll)return null;const{children:e}=this.props;return this.node?Jn.createPortal(e,this.node):null}render(){return Ll?this.renderReact16():null}},t6=class{constructor(e,t){if(Te(this,"element"),Te(this,"options"),Te(this,"canBeTabbed",r=>{const{tabIndex:n}=r;return n===null||n<0?!1:this.canHaveFocus(r)}),Te(this,"canHaveFocus",r=>{const n=/input|select|textarea|button|object/,s=r.nodeName.toLowerCase();return(n.test(s)&&!r.getAttribute("disabled")||s==="a"&&!!r.getAttribute("href"))&&this.isVisible(r)}),Te(this,"findValidTabElements",()=>[].slice.call(this.element.querySelectorAll("*"),0).filter(this.canBeTabbed)),Te(this,"handleKeyDown",r=>{const{code:n="Tab"}=this.options;r.code===n&&this.interceptTab(r)}),Te(this,"interceptTab",r=>{r.preventDefault();const n=this.findValidTabElements(),{shiftKey:s}=r;if(!n.length)return;let i=document.activeElement?n.indexOf(document.activeElement):0;i===-1||!s&&i+1===n.length?i=0:s&&i===0?i=n.length-1:i+=s?-1:1,n[i].focus()}),Te(this,"isHidden",r=>{const n=r.offsetWidth<=0&&r.offsetHeight<=0,s=window.getComputedStyle(r);return n&&!r.innerHTML?!0:n&&s.getPropertyValue("overflow")!=="visible"||s.getPropertyValue("display")==="none"}),Te(this,"isVisible",r=>{let n=r;for(;n;)if(n instanceof HTMLElement){if(n===document.body)break;if(this.isHidden(n))return!1;n=n.parentNode}return!0}),Te(this,"removeScope",()=>{window.removeEventListener("keydown",this.handleKeyDown)}),Te(this,"checkFocus",r=>{document.activeElement!==r&&(r.focus(),window.requestAnimationFrame(()=>this.checkFocus(r)))}),Te(this,"setFocus",()=>{const{selector:r}=this.options;if(!r)return;const n=this.element.querySelector(r);n&&window.requestAnimationFrame(()=>this.checkFocus(n))}),!(e instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=e,this.options=t,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()}},r6=class extends g.Component{constructor(e){if(super(e),Te(this,"beacon",null),Te(this,"setBeaconRef",s=>{this.beacon=s}),e.beaconComponent)return;const t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.id="joyride-beacon-animation",e.nonce&&r.setAttribute("nonce",e.nonce),r.appendChild(document.createTextNode(`
        @keyframes joyride-beacon-inner {
          20% {
            opacity: 0.9;
          }
        
          90% {
            opacity: 0.7;
          }
        }
        
        @keyframes joyride-beacon-outer {
          0% {
            transform: scale(1);
          }
        
          45% {
            opacity: 0.7;
            transform: scale(0.75);
          }
        
          100% {
            opacity: 0.9;
            transform: scale(1);
          }
        }
      `)),t.appendChild(r)}componentDidMount(){const{shouldFocus:e}=this.props;setTimeout(()=>{je.domElement(this.beacon)&&e&&this.beacon.focus()},0)}componentWillUnmount(){const e=document.getElementById("joyride-beacon-animation");e!=null&&e.parentNode&&e.parentNode.removeChild(e)}render(){const{beaconComponent:e,continuous:t,index:r,isLastStep:n,locale:s,onClickOrHover:i,size:a,step:l,styles:c}=this.props,u=gs(s.open),d={"aria-label":u,onClick:i,onMouseEnter:i,ref:this.setBeaconRef,title:u};let f;if(e){const h=e;f=g.createElement(h,{continuous:t,index:r,isLastStep:n,size:a,step:l,...d})}else f=g.createElement("button",{key:"JoyrideBeacon",className:"react-joyride__beacon","data-test-id":"button-beacon",style:c.beacon,type:"button",...d},g.createElement("span",{style:c.beaconInner}),g.createElement("span",{style:c.beaconOuter}));return f}};function n6({styles:e,...t}){const{color:r,height:n,width:s,...i}=e;return te.createElement("button",{style:i,type:"button",...t},te.createElement("svg",{height:typeof n=="number"?`${n}px`:n,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:typeof s=="number"?`${s}px`:s,xmlns:"http://www.w3.org/2000/svg"},te.createElement("g",null,te.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:r}))))}var s6=n6;function i6(e){const{backProps:t,closeProps:r,index:n,isLastStep:s,primaryProps:i,skipProps:a,step:l,tooltipProps:c}=e,{content:u,hideBackButton:d,hideCloseButton:f,hideFooter:h,showSkipButton:p,styles:m,title:y}=l,b={};return b.primary=g.createElement("button",{"data-test-id":"button-primary",style:m.buttonNext,type:"button",...i}),p&&!s&&(b.skip=g.createElement("button",{"aria-live":"off","data-test-id":"button-skip",style:m.buttonSkip,type:"button",...a})),!d&&n>0&&(b.back=g.createElement("button",{"data-test-id":"button-back",style:m.buttonBack,type:"button",...t})),b.close=!f&&g.createElement(s6,{"data-test-id":"button-close",styles:m.buttonClose,...r}),g.createElement("div",{key:"JoyrideTooltip","aria-label":gs(y??u),className:"react-joyride__tooltip",style:m.tooltip,...c},g.createElement("div",{style:m.tooltipContainer},y&&g.createElement("h1",{"aria-label":gs(y),style:m.tooltipTitle},y),g.createElement("div",{style:m.tooltipContent},u)),!h&&g.createElement("div",{style:m.tooltipFooter},g.createElement("div",{style:m.tooltipFooterSpacer},b.skip),b.back,b.primary),b.close)}var a6=i6,o6=class extends g.Component{constructor(){super(...arguments),Te(this,"handleClickBack",e=>{e.preventDefault();const{helpers:t}=this.props;t.prev()}),Te(this,"handleClickClose",e=>{e.preventDefault();const{helpers:t}=this.props;t.close("button_close")}),Te(this,"handleClickPrimary",e=>{e.preventDefault();const{continuous:t,helpers:r}=this.props;if(!t){r.close("button_primary");return}r.next()}),Te(this,"handleClickSkip",e=>{e.preventDefault();const{helpers:t}=this.props;t.skip()}),Te(this,"getElementsProps",()=>{const{continuous:e,index:t,isLastStep:r,setTooltipRef:n,size:s,step:i}=this.props,{back:a,close:l,last:c,next:u,nextLabelWithProgress:d,skip:f}=i.locale,h=gs(a),p=gs(l),m=gs(c),y=gs(u),b=gs(f);let v=l,x=p;if(e){if(v=u,x=y,i.showProgress&&!r){const w=gs(d,{step:t+1,steps:s});v=I0(d,t+1,s),x=w}r&&(v=c,x=m)}return{backProps:{"aria-label":h,children:a,"data-action":"back",onClick:this.handleClickBack,role:"button",title:h},closeProps:{"aria-label":p,children:l,"data-action":"close",onClick:this.handleClickClose,role:"button",title:p},primaryProps:{"aria-label":x,children:v,"data-action":"primary",onClick:this.handleClickPrimary,role:"button",title:x},skipProps:{"aria-label":b,children:f,"data-action":"skip",onClick:this.handleClickSkip,role:"button",title:b},tooltipProps:{"aria-modal":!0,ref:n,role:"alertdialog"}}})}render(){const{continuous:e,index:t,isLastStep:r,setTooltipRef:n,size:s,step:i}=this.props,{beaconComponent:a,tooltipComponent:l,...c}=i;let u;if(l){const d={...this.getElementsProps(),continuous:e,index:t,isLastStep:r,size:s,step:c,setTooltipRef:n},f=l;u=g.createElement(f,{...d})}else u=g.createElement(a6,{...this.getElementsProps(),continuous:e,index:t,isLastStep:r,size:s,step:i});return u}},l6=class extends g.Component{constructor(){super(...arguments),Te(this,"scope",null),Te(this,"tooltip",null),Te(this,"handleClickHoverBeacon",e=>{const{step:t,store:r}=this.props;e.type==="mouseenter"&&t.event!=="hover"||r.update({lifecycle:Ve.TOOLTIP})}),Te(this,"setTooltipRef",e=>{this.tooltip=e}),Te(this,"setPopper",(e,t)=>{var r;const{action:n,lifecycle:s,step:i,store:a}=this.props;t==="wrapper"?a.setPopper("beacon",e):a.setPopper("tooltip",e),a.getPopper("beacon")&&(a.getPopper("tooltip")||i.placement==="center")&&s===Ve.INIT&&a.update({action:n,lifecycle:Ve.READY}),(r=i.floaterProps)!=null&&r.getPopper&&i.floaterProps.getPopper(e,t)}),Te(this,"renderTooltip",e=>{const{continuous:t,helpers:r,index:n,size:s,step:i}=this.props;return g.createElement(o6,{continuous:t,helpers:r,index:n,isLastStep:n+1===s,setTooltipRef:this.setTooltipRef,size:s,step:i,...e})})}componentDidMount(){const{debug:e,index:t}=this.props;Ba({title:`step:${t}`,data:[{key:"props",value:this.props}],debug:e})}componentDidUpdate(e){var t;const{action:r,callback:n,continuous:s,controlled:i,debug:a,helpers:l,index:c,lifecycle:u,shouldScroll:d,status:f,step:h,store:p}=this.props,{changed:m,changedFrom:y}=Lf(e,this.props),b=l.info(),v=s&&r!==yt.CLOSE&&(c>0||r===yt.PREV),x=m("action")||m("index")||m("lifecycle")||m("status"),w=y("lifecycle",[Ve.TOOLTIP,Ve.INIT],Ve.INIT),k=m("action",[yt.NEXT,yt.PREV,yt.SKIP,yt.CLOSE]),S=i&&c===e.index;if(k&&(w||S)&&n({...b,index:e.index,lifecycle:Ve.COMPLETE,step:e.step,type:Kn.STEP_AFTER}),h.placement==="center"&&f===et.RUNNING&&m("index")&&r!==yt.START&&u===Ve.INIT&&p.update({lifecycle:Ve.READY}),x){const E=Ws(h.target),N=!!E;N&&MF(E)?(y("status",et.READY,et.RUNNING)||y("lifecycle",Ve.INIT,Ve.READY))&&n({...b,step:h,type:Kn.STEP_BEFORE}):(console.warn(N?"Target not visible":"Target not mounted",h),n({...b,type:Kn.TARGET_NOT_FOUND,step:h}),i||p.update({index:c+(r===yt.PREV?-1:1)}))}y("lifecycle",Ve.INIT,Ve.READY)&&p.update({lifecycle:gk(h)||v?Ve.TOOLTIP:Ve.BEACON}),m("index")&&Ba({title:`step:${u}`,data:[{key:"props",value:this.props}],debug:a}),m("lifecycle",Ve.BEACON)&&n({...b,step:h,type:Kn.BEACON}),m("lifecycle",Ve.TOOLTIP)&&(n({...b,step:h,type:Kn.TOOLTIP}),d&&this.tooltip&&(this.scope=new t6(this.tooltip,{selector:"[data-action=primary]"}),this.scope.setFocus())),y("lifecycle",[Ve.TOOLTIP,Ve.INIT],Ve.INIT)&&((t=this.scope)==null||t.removeScope(),p.cleanupPoppers())}componentWillUnmount(){var e;(e=this.scope)==null||e.removeScope()}get open(){const{lifecycle:e,step:t}=this.props;return gk(t)||e===Ve.TOOLTIP}render(){const{continuous:e,debug:t,index:r,nonce:n,shouldScroll:s,size:i,step:a}=this.props,l=Ws(a.target);return!p2(a)||!je.domElement(l)?null:g.createElement("div",{key:`JoyrideStep-${r}`,className:"react-joyride__step"},g.createElement(Vx,{...a.floaterProps,component:this.renderTooltip,debug:t,getPopper:this.setPopper,id:`react-joyride-step-${r}`,open:this.open,placement:a.placement,target:a.target},g.createElement(r6,{beaconComponent:a.beaconComponent,continuous:e,index:r,isLastStep:r+1===i,locale:a.locale,nonce:n,onClickOrHover:this.handleClickHoverBeacon,shouldFocus:s,size:i,step:a,styles:a.styles})))}},g2=class extends g.Component{constructor(e){super(e),Te(this,"helpers"),Te(this,"store"),Te(this,"callback",a=>{const{callback:l}=this.props;je.function(l)&&l(a)}),Te(this,"handleKeyboard",a=>{const{index:l,lifecycle:c}=this.state,{steps:u}=this.props,d=u[l];c===Ve.TOOLTIP&&a.code==="Escape"&&d&&!d.disableCloseOnEsc&&this.store.close("keyboard")}),Te(this,"handleClickOverlay",()=>{const{index:a}=this.state,{steps:l}=this.props;ao(this.props,l[a]).disableOverlayClose||this.helpers.close("overlay")}),Te(this,"syncState",a=>{this.setState(a)});const{debug:t,getHelpers:r,run:n=!0,stepIndex:s}=e;this.store=QF({...e,controlled:n&&je.number(s)}),this.helpers=this.store.getHelpers();const{addListener:i}=this.store;Ba({title:"init",data:[{key:"props",value:this.props},{key:"state",value:this.state}],debug:t}),i(this.syncState),r&&r(this.helpers),this.state=this.store.getState()}componentDidMount(){if(!bi())return;const{debug:e,disableCloseOnEsc:t,run:r,steps:n}=this.props,{start:s}=this.store;vk(n,e)&&r&&s(),t||document.body.addEventListener("keydown",this.handleKeyboard,{passive:!0})}componentDidUpdate(e,t){if(!bi())return;const{action:r,controlled:n,index:s,status:i}=this.state,{debug:a,run:l,stepIndex:c,steps:u}=this.props,{stepIndex:d,steps:f}=e,{reset:h,setSteps:p,start:m,stop:y,update:b}=this.store,{changed:v}=Lf(e,this.props),{changed:x,changedFrom:w}=Lf(t,this.state),k=ao(this.props,u[s]),S=!Wr(f,u),E=je.number(c)&&v("stepIndex"),N=Ws(k.target);if(S&&(vk(u,a)?p(u):console.warn("Steps are not valid",u)),v("run")&&(l?m(c):y()),E){let j=je.number(d)&&d<c?yt.NEXT:yt.PREV;r===yt.STOP&&(j=yt.START),[et.FINISHED,et.SKIPPED].includes(i)||b({action:r===yt.CLOSE?yt.CLOSE:j,index:c,lifecycle:Ve.INIT})}!n&&i===et.RUNNING&&s===0&&!N&&(this.store.update({index:s+1}),this.callback({...this.state,type:Kn.TARGET_NOT_FOUND,step:k}));const C={...this.state,index:s,step:k};if(x("action",[yt.NEXT,yt.PREV,yt.SKIP,yt.CLOSE])&&x("status",et.PAUSED)){const j=ao(this.props,u[t.index]);this.callback({...C,index:t.index,lifecycle:Ve.COMPLETE,step:j,type:Kn.STEP_AFTER})}if(x("status",[et.FINISHED,et.SKIPPED])){const j=ao(this.props,u[t.index]);n||this.callback({...C,index:t.index,lifecycle:Ve.COMPLETE,step:j,type:Kn.STEP_AFTER}),this.callback({...C,type:Kn.TOUR_END,step:j,index:t.index}),h()}else w("status",[et.IDLE,et.READY],et.RUNNING)?this.callback({...C,type:Kn.TOUR_START}):(x("status")||x("action",yt.RESET))&&this.callback({...C,type:Kn.TOUR_STATUS});this.scrollToStep(t)}componentWillUnmount(){const{disableCloseOnEsc:e}=this.props;e||document.body.removeEventListener("keydown",this.handleKeyboard)}scrollToStep(e){const{index:t,lifecycle:r,status:n}=this.state,{debug:s,disableScrollParentFix:i=!1,scrollDuration:a,scrollOffset:l=20,scrollToFirstStep:c=!1,steps:u}=this.props,d=ao(this.props,u[t]),f=Ws(d.target),h=HF({isFirstStep:t===0,lifecycle:r,previousLifecycle:e.lifecycle,scrollToFirstStep:c,step:d,target:f});if(n===et.RUNNING&&h){const p=ep(f,i),m=eu(f,i);let y=Math.floor(PF(f,l,i))||0;Ba({title:"scrollToStep",data:[{key:"index",value:t},{key:"lifecycle",value:r},{key:"status",value:n}],debug:s});const b=this.store.getPopper("beacon"),v=this.store.getPopper("tooltip");if(r===Ve.BEACON&&b){const{offsets:x,placement:w}=b;!["bottom"].includes(w)&&!p&&(y=Math.floor(x.popper.top-l))}else if(r===Ve.TOOLTIP&&v){const{flipped:x,offsets:w,placement:k}=v;["top","right","left"].includes(k)&&!x&&!p?y=Math.floor(w.popper.top-l):y-=d.spotlightPadding}y=y>=0?y:0,n===et.RUNNING&&LF(y,{element:m,duration:a}).then(()=>{setTimeout(()=>{var x;(x=this.store.getPopper("tooltip"))==null||x.instance.update()},10)})}}render(){if(!bi())return null;const{index:e,lifecycle:t,status:r}=this.state,{continuous:n=!1,debug:s=!1,nonce:i,scrollToFirstStep:a=!1,steps:l}=this.props,c=r===et.RUNNING,u={};if(c&&l[e]){const d=ao(this.props,l[e]);u.step=g.createElement(l6,{...this.state,callback:this.callback,continuous:n,debug:s,helpers:this.helpers,nonce:i,shouldScroll:!d.disableScrolling&&(e!==0||a),step:d,store:this.store}),u.overlay=g.createElement(e6,{id:"react-joyride-portal"},g.createElement(JF,{...d,continuous:n,debug:s,lifecycle:t,onClickOverlay:this.handleClickOverlay}))}return g.createElement("div",{className:"react-joyride"},u.step,u.overlay)}};Te(g2,"defaultProps",$F);var c6=g2;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(e,t)=>{const r=g.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>g.createElement("svg",{ref:d,...u6,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${d6(e)}`,l].join(" "),...u},[...t.map(([f,h])=>g.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=ve("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=ve("BookHeart",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M16 8.2C16 7 15 6 13.8 6c-.8 0-1.4.3-1.8.9-.4-.6-1-.9-1.8-.9C9 6 8 7 8 8.2c0 .6.3 1.2.7 1.6h0C10 11.1 12 13 12 13s2-1.9 3.3-3.1h0c.4-.4.7-1 .7-1.7z",key:"1dlbw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ve("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=ve("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=ve("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=ve("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=ve("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=ve("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=ve("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ve("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ve("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=ve("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=ve("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=ve("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=ve("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=ve("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=ve("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=ve("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=ve("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=ve("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=ve("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=ve("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=ve("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=ve("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=ve("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=ve("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=ve("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=ve("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=ve("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=ve("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=ve("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=ve("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=ve("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=ve("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=ve("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=ve("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=ve("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ve("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ck="/app/assets/Logo-BrCGK4jM.png",Ua=({size:e="md",variant:t="full"})=>{const r={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12"},n={sm:"text-lg",md:"text-xl",lg:"text-2xl"};return t==="icon"?o.jsx("div",{className:`${r[e]} flex items-center justify-center`,children:o.jsx("img",{src:Ck,alt:"FamConomy Logo",className:"w-full h-full object-contain"})}):o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`${r[e]} flex items-center justify-center`,children:o.jsx("img",{src:Ck,alt:"FamConomy Logo",className:"w-full h-full object-contain"})}),o.jsx("span",{className:`ml-3 font-semibold bg-gradient-to-r from-primary-500 via-secondary-500 to-accent-500 bg-clip-text text-transparent ${n[e]}`,children:"FamConomy"})]})},q6=({isOpen:e,onClose:t,onSubmit:r})=>{const[n,s]=g.useState("general"),[i,a]=g.useState(""),[l,c]=g.useState(),u=g.useRef(null),d=h=>{h.preventDefault(),r(n,i,l),a(""),c(void 0),t()},f=h=>{h.target.files&&h.target.files.length>0&&c(h.target.files[0])};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-800 dark:text-neutral-200",children:"Submit Feedback"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:o.jsx(ti,{size:24})})]}),o.jsxs("form",{onSubmit:d,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"feedbackType",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Feedback Type"}),o.jsxs("select",{id:"feedbackType",value:n,onChange:h=>s(h.target.value),className:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"general",children:"General Feedback"}),o.jsx("option",{value:"bug",children:"Report a Bug"}),o.jsx("option",{value:"feature",children:"Feature Request"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Message"}),o.jsx("textarea",{id:"message",rows:4,value:i,onChange:h=>a(h.target.value),className:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Screenshot (optional)"}),o.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-neutral-300 dark:border-neutral-600 border-dashed rounded-md",children:o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsx("svg",{className:"mx-auto h-12 w-12 text-neutral-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:o.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),o.jsxs("div",{className:"flex text-sm text-neutral-600 dark:text-neutral-400",children:[o.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-neutral-700 rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500",children:[o.jsx("span",{children:"Upload a file"}),o.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:f,ref:u,accept:"image/*"})]}),o.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"PNG, JPG, GIF up to 10MB"})]})}),l&&o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-2",children:["Selected file: ",l.name]})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md text-sm font-medium text-neutral-700 dark:text-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-neutral-500",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Submit"})]})]})]})}):null},K6=async(e,t,r)=>{const n=new FormData;return n.append("feedbackType",e),n.append("message",t),r&&n.append("screenshot",r),K.post("/feedback",n,{headers:{"Content-Type":"multipart/form-data"}})},Q6=({onNavigate:e,collapsed:t,onCollapsedChange:r})=>{const[n,s]=g.useState(!1),{logout:i,user:a}=Ot(),{isDarkMode:l,toggleTheme:c}=DT(),u=zn(),d=g.useMemo(()=>mr("sidebar"),[]),f=()=>{u("/"),e==null||e()},h=async(b,v,x)=>{try{await K6(b,v,x),alert("Feedback submitted successfully!")}catch(w){d.error("Error submitting feedback:",w),alert("There was an error submitting your feedback. Please try again.")}},p=[{id:"nav-dashboard",name:"Dashboard",path:"/",icon:o.jsx(N6,{size:20}),color:"hover:bg-primary-100 hover:text-primary-600 dark:hover:bg-primary-900/30 dark:hover:text-primary-400"},{id:"nav-calendar",name:"Calendar",path:"/calendar",icon:o.jsx(O0,{size:20}),color:"hover:bg-secondary-100 hover:text-secondary-600 dark:hover:bg-secondary-900/30 dark:hover:text-secondary-400"},{id:"nav-tasks",name:"Tasks",path:"/tasks",icon:o.jsx(P0,{size:20}),color:"hover:bg-accent-100 hover:text-accent-600 dark:hover:bg-accent-900/30 dark:hover:text-accent-400"},{id:"nav-gigs",name:"Gigs",path:"/gigs",icon:o.jsx(y6,{size:20}),color:"hover:bg-primary-100 hover:text-primary-600 dark:hover:bg-primary-900/30 dark:hover:text-primary-400"},{id:"nav-messages",name:"Messages",path:"/messages",icon:o.jsx(w2,{size:20}),color:"hover:bg-secondary-100 hover:text-secondary-600 dark:hover:bg-secondary-900/30 dark:hover:text-secondary-400"},{id:"nav-recipes",name:"Recipes",path:"/recipes",icon:o.jsx(v6,{size:20}),color:"hover:bg-accent-100 hover:text-accent-600 dark:hover:bg-accent-900/30 dark:hover:text-accent-400"},{id:"nav-shopping",name:"Shopping",path:"/shopping",icon:o.jsx(Vf,{size:20}),color:"hover:bg-highlight-teal/20 hover:text-highlight-teal dark:hover:bg-highlight-teal/30 dark:hover:text-highlight-teal"},{id:"nav-wishlists",name:"Wishlists",path:"/wishlists",icon:o.jsx(Da,{size:20}),color:"hover:bg-primary-100 hover:text-primary-600 dark:hover:bg-primary-900/30 dark:hover:text-primary-400"},{id:"nav-budget",name:"Finance",path:"/budget",icon:o.jsx(k2,{size:20}),color:"hover:bg-secondary-100 hover:text-secondary-600 dark:hover:bg-secondary-900/30 dark:hover:text-secondary-400"},{id:"nav-family",name:"Family",path:"/family",icon:o.jsx(za,{size:20}),color:"hover:bg-accent-100 hover:text-accent-600 dark:hover:bg-accent-900/30 dark:hover:text-accent-400"},{id:"nav-values",name:"Values",path:"/family/values",icon:o.jsx(tu,{size:20}),color:"hover:bg-primary-100 hover:text-primary-600 dark:hover:bg-primary-900/30 dark:hover:text-primary-400"},{id:"nav-journal",name:"Journal",path:"/journal",icon:o.jsx(y2,{size:20}),color:"hover:bg-secondary-100 hover:text-secondary-600 dark:hover:bg-secondary-900/30 dark:hover:text-secondary-400"},{id:"nav-resources",name:"Resources",path:"/resources",icon:o.jsx(Uf,{size:20}),color:"hover:bg-accent-100 hover:text-accent-600 dark:hover:bg-accent-900/30 dark:hover:text-accent-400"},{id:"nav-settings",name:"Settings",path:"/settings",icon:o.jsx(S2,{size:20}),color:"hover:bg-neutral-100 hover:text-neutral-600 dark:hover:bg-neutral-700 dark:hover:text-neutral-300"}],m=()=>{e==null||e()},y=()=>{c()};return o.jsxs(o.Fragment,{children:[o.jsxs("aside",{className:`bg-white/80 dark:bg-neutral-800/80 backdrop-blur-lg h-screen border-r border-neutral-200 dark:border-neutral-700 transition-all duration-300 flex flex-col ${t?"w-20":"w-64"}`,children:[o.jsxs("div",{className:"flex items-center p-4 border-b border-neutral-200 dark:border-neutral-700 h-16",children:[o.jsx("button",{onClick:f,className:"flex-1",children:t?o.jsx(Ua,{variant:"icon",size:"sm"}):o.jsx(Ua,{size:"md"})}),o.jsx("button",{onClick:()=>r(!t),className:"p-1 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:t?o.jsx(Wx,{size:18}):o.jsx(tp,{size:18})})]}),o.jsx("nav",{className:"flex-1 py-4 overflow-y-auto",children:o.jsx("ul",{className:"px-2 space-y-1",children:p.map(b=>o.jsx("li",{children:o.jsxs(zP,{id:b.id,to:b.path,onClick:m,className:({isActive:v})=>`
                      flex items-center px-3 py-2 rounded-2xl transition-colors ${v?"bg-primary-50 text-primary-500 dark:bg-primary-900/50 dark:text-primary-400":`text-neutral-600 dark:text-neutral-400 ${b.color}`}
                    `,children:[o.jsx("span",{className:"flex-shrink-0",children:b.icon}),!t&&o.jsx("span",{className:"ml-3",children:b.name})]})},b.path))})}),o.jsxs("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-700 space-y-2",children:[o.jsxs("button",{id:"sidebar-feedback",onClick:()=>s(!0),className:"flex items-center w-full px-3 py-2 text-neutral-600 dark:text-neutral-400 rounded-2xl hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[o.jsx(_6,{size:20}),!t&&o.jsx("span",{className:"ml-3",children:"Feedback"})]}),o.jsxs("button",{onClick:y,className:"flex items-center w-full px-3 py-2 text-neutral-600 dark:text-neutral-400 rounded-2xl hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[l?o.jsx($6,{size:20}):o.jsx(I6,{size:20}),!t&&o.jsx("span",{className:"ml-3",children:"Theme"})]}),o.jsxs("button",{onClick:i,className:"flex items-center w-full px-3 py-2 text-neutral-600 dark:text-neutral-400 rounded-2xl hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[o.jsx(b2,{size:20}),!t&&o.jsx("span",{className:"ml-3",children:"Logout"})]})]})]}),o.jsx(q6,{isOpen:n,onClose:()=>s(!1),onSubmit:h})]})},Z6=({onMenuToggle:e,isMobileMenuOpen:t})=>{var f;const{user:r,logout:n}=Ot(),[s,i]=g.useState(!1),[a,l]=g.useState(!1),{notifications:c,markAsRead:u}=TT(),d=c.filter(h=>!h.readStatus).length;return o.jsxs("header",{className:"bg-white dark:bg-neutral-800 border-b border-neutral-200 dark:border-neutral-700 h-16 px-4 flex items-center justify-between",children:[o.jsx("div",{className:"lg:hidden flex items-center",children:o.jsx("button",{id:"nav-toggle",onClick:e,className:"p-2 rounded-2xl text-neutral-500 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:t?o.jsx(ti,{size:20}):o.jsx(R6,{size:20})})}),o.jsx("div",{className:"lg:hidden",children:o.jsx(Ua,{size:"sm"})}),o.jsx("div",{className:"hidden md:flex items-center flex-1 max-w-xl",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}),o.jsx(rp,{className:"absolute left-3 top-2.5 text-neutral-400 dark:text-neutral-500",size:18})]})}),o.jsxs("div",{className:"flex items-center ml-auto space-x-4",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>l(!a),className:"p-2 rounded-2xl hover:bg-neutral-100 dark:hover:bg-neutral-700 relative",children:[o.jsx(M0,{size:20,className:"text-neutral-600 dark:text-neutral-400"}),d>0&&o.jsx("span",{className:"absolute top-0 right-0 h-5 w-5 text-xs flex items-center justify-center bg-accent-400 text-white rounded-full",children:d>9?"9+":d})]}),a&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-neutral-800 rounded-2xl shadow-dropdown border border-neutral-200 dark:border-neutral-700 py-2 z-10 animate-fade-in",children:[o.jsx("div",{className:"px-4 py-2 border-b border-neutral-200 dark:border-neutral-700",children:o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:"Notifications"})}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.length>0?c.slice(0,5).map(h=>!h||!h.createdAt?null:o.jsxs(br,{to:h.link||"/notifications",onClick:()=>u(h.id),className:`block px-4 py-3 border-b border-neutral-100 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700/50 ${h.readStatus?"":"bg-primary-50 dark:bg-primary-900/30"}`,children:[o.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:h.message}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500 mt-1",children:new Date(h.createdAt).toLocaleString()})]},h.id)):o.jsx("div",{className:"px-4 py-3 text-sm text-neutral-500 dark:text-neutral-400",children:"No notifications"})})]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>i(!s),className:"flex items-center space-x-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-2xl p-2",children:[o.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-500 dark:text-primary-400",children:((f=r==null?void 0:r.fullName)==null?void 0:f.charAt(0))||"U"}),o.jsx("span",{className:"hidden md:block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:(r==null?void 0:r.fullName)||"User"})]}),s&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-neutral-800 rounded-2xl shadow-dropdown border border-neutral-200 dark:border-neutral-700 py-1 z-10 animate-fade-in",children:[o.jsx(br,{to:"/profile",className:"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Your Profile"}),o.jsx(br,{to:"/settings",className:"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Settings"}),o.jsx("hr",{className:"my-1 border-neutral-200 dark:border-neutral-700"}),o.jsx("button",{onClick:n,className:"block w-full text-left px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Sign out"})]})]})]})]})},N2=g.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),sp=g.createContext({}),ip=g.createContext(null),ap=typeof document<"u",Gx=ap?g.useLayoutEffect:g.useEffect,C2=g.createContext({strict:!1}),qx=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),X6="framerAppearId",j2="data-"+qx(X6);function J6(e,t,r,n){const{visualElement:s}=g.useContext(sp),i=g.useContext(C2),a=g.useContext(ip),l=g.useContext(N2).reducedMotion,c=g.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;g.useInsertionEffect(()=>{u&&u.update(r,a)});const d=g.useRef(!!(r[j2]&&!window.HandoffComplete));return Gx(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),g.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function ko(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function eB(e,t,r){return g.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):ko(r)&&(r.current=n))},[t])}function ru(e){return typeof e=="string"||Array.isArray(e)}function op(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Kx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Qx=["initial",...Kx];function lp(e){return op(e.animate)||Qx.some(t=>ru(e[t]))}function T2(e){return!!(lp(e)||e.variants)}function tB(e,t){if(lp(e)){const{initial:r,animate:n}=e;return{initial:r===!1||ru(r)?r:void 0,animate:ru(n)?n:void 0}}return e.inherit!==!1?t:{}}function rB(e){const{initial:t,animate:r}=tB(e,g.useContext(sp));return g.useMemo(()=>({initial:t,animate:r}),[jk(t),jk(r)])}function jk(e){return Array.isArray(e)?e.join(" "):e}const Tk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nu={};for(const e in Tk)nu[e]={isEnabled:t=>Tk[e].some(r=>!!t[r])};function nB(e){for(const t in e)nu[t]={...nu[t],...e[t]}}const Zx=g.createContext({}),A2=g.createContext({}),sB=Symbol.for("motionComponentSymbol");function iB({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&nB(e);function i(l,c){let u;const d={...g.useContext(N2),...l,layoutId:aB(l)},{isStatic:f}=d,h=rB(l),p=n(l,f);if(!f&&ap){h.visualElement=J6(s,p,d,t);const m=g.useContext(A2),y=g.useContext(C2).strict;h.visualElement&&(u=h.visualElement.loadFeatures(d,y,e,m))}return g.createElement(sp.Provider,{value:h},u&&h.visualElement?g.createElement(u,{visualElement:h.visualElement,...d}):null,r(s,l,eB(p,h.visualElement,c),p,f,h.visualElement))}const a=g.forwardRef(i);return a[sB]=s,a}function aB({layoutId:e}){const t=g.useContext(Zx).id;return t&&e!==void 0?t+"-"+e:e}function oB(e){function t(n,s={}){return iB(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const lB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xx(e){return typeof e!="string"||e.includes("-")?!1:!!(lB.indexOf(e)>-1||/[A-Z]/.test(e))}const Wf={};function cB(e){Object.assign(Wf,e)}const Iu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ka=new Set(Iu);function D2(e,{layout:t,layoutId:r}){return Ka.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Wf[e]||e==="opacity")}const cn=e=>!!(e&&e.getVelocity),uB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dB=Iu.length;function fB(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let i="";for(let a=0;a<dB;a++){const l=Iu[a];if(e[l]!==void 0){const c=uB[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,n?"":i):r&&n&&(i="none"),i}const R2=e=>t=>typeof t=="string"&&t.startsWith(e),_2=R2("--"),U0=R2("var(--"),hB=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,pB=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Yi=(e,t,r)=>Math.min(Math.max(r,e),t),Qa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},gc={...Qa,transform:e=>Yi(0,1,e)},fd={...Qa,default:1},yc=e=>Math.round(e*1e5)/1e5,cp=/(-)?([\d]*\.?[\d])+/g,I2=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,mB=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Mu(e){return typeof e=="string"}const Ou=e=>({test:t=>Mu(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),pi=Ou("deg"),Cs=Ou("%"),Oe=Ou("px"),gB=Ou("vh"),yB=Ou("vw"),Ak={...Cs,parse:e=>Cs.parse(e)/100,transform:e=>Cs.transform(e*100)},Dk={...Qa,transform:Math.round},M2={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,size:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,rotate:pi,rotateX:pi,rotateY:pi,rotateZ:pi,scale:fd,scaleX:fd,scaleY:fd,scaleZ:fd,skew:pi,skewX:pi,skewY:pi,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:gc,originX:Ak,originY:Ak,originZ:Oe,zIndex:Dk,fillOpacity:gc,strokeOpacity:gc,numOctaves:Dk};function Jx(e,t,r,n){const{style:s,vars:i,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const f in t){const h=t[f];if(_2(f)){i[f]=h;continue}const p=M2[f],m=pB(h,p);if(Ka.has(f)){if(c=!0,a[f]=m,!d)continue;h!==(p.default||0)&&(d=!1)}else f.startsWith("origin")?(u=!0,l[f]=m):s[f]=m}if(t.transform||(c||n?s.transform=fB(e.transform,r,d,n):s.transform&&(s.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:p=0}=l;s.transformOrigin=`${f} ${h} ${p}`}}const ev=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function O2(e,t,r){for(const n in t)!cn(t[n])&&!D2(n,r)&&(e[n]=t[n])}function xB({transformTemplate:e},t,r){return g.useMemo(()=>{const n=ev();return Jx(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function vB(e,t,r){const n=e.style||{},s={};return O2(s,n,e),Object.assign(s,xB(e,t,r)),e.transformValues?e.transformValues(s):s}function bB(e,t,r){const n={},s=vB(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const wB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $f(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wB.has(e)}let P2=e=>!$f(e);function kB(e){e&&(P2=t=>t.startsWith("on")?!$f(t):e(t))}try{kB(require("@emotion/is-prop-valid").default)}catch{}function SB(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(P2(s)||r===!0&&$f(s)||!t&&!$f(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function Rk(e,t,r){return typeof e=="string"?e:Oe.transform(t+r*e)}function EB(e,t,r){const n=Rk(t,e.x,e.width),s=Rk(r,e.y,e.height);return`${n} ${s}`}const NB={offset:"stroke-dashoffset",array:"stroke-dasharray"},CB={offset:"strokeDashoffset",array:"strokeDasharray"};function jB(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?NB:CB;e[i.offset]=Oe.transform(-n);const a=Oe.transform(t),l=Oe.transform(r);e[i.array]=`${a} ${l}`}function tv(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,f,h){if(Jx(e,u,d,h),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:m,dimensions:y}=e;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(s!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=EB(y,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(p.x=t),r!==void 0&&(p.y=r),n!==void 0&&(p.scale=n),a!==void 0&&jB(p,a,l,c,!1)}const L2=()=>({...ev(),attrs:{}}),rv=e=>typeof e=="string"&&e.toLowerCase()==="svg";function TB(e,t,r,n){const s=g.useMemo(()=>{const i=L2();return tv(i,t,{enableHardwareAcceleration:!1},rv(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};O2(i,e.style,e),s.style={...i,...s.style}}return s}function AB(e=!1){return(r,n,s,{latestValues:i},a)=>{const c=(Xx(r)?TB:bB)(n,i,a,r),d={...SB(n,typeof r=="string",e),...c,ref:s},{children:f}=n,h=g.useMemo(()=>cn(f)?f.get():f,[f]);return g.createElement(r,{...d,children:h})}}function F2(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const B2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function z2(e,t,r,n){F2(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(B2.has(s)?s:qx(s),t.attrs[s])}function nv(e,t){const{style:r}=e,n={};for(const s in r)(cn(r[s])||t.style&&cn(t.style[s])||D2(s,e))&&(n[s]=r[s]);return n}function U2(e,t){const r=nv(e,t);for(const n in e)if(cn(e[n])||cn(t[n])){const s=Iu.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function sv(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function H2(e){const t=g.useRef(null);return t.current===null&&(t.current=e()),t.current}const Yf=e=>Array.isArray(e),DB=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),RB=e=>Yf(e)?e[e.length-1]||0:e;function Kd(e){const t=cn(e)?e.get():e;return DB(t)?t.toValue():t}function _B({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,i){const a={latestValues:IB(n,s,i,e),renderState:t()};return r&&(a.mount=l=>r(n,l,a)),a}const V2=e=>(t,r)=>{const n=g.useContext(sp),s=g.useContext(ip),i=()=>_B(e,t,n,s);return r?i():H2(i)};function IB(e,t,r,n){const s={},i=n(e,{});for(const h in i)s[h]=Kd(i[h]);let{initial:a,animate:l}=e;const c=lp(e),u=T2(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const f=d?l:a;return f&&typeof f!="boolean"&&!op(f)&&(Array.isArray(f)?f:[f]).forEach(p=>{const m=sv(e,p);if(!m)return;const{transitionEnd:y,transition:b,...v}=m;for(const x in v){let w=v[x];if(Array.isArray(w)){const k=d?w.length-1:0;w=w[k]}w!==null&&(s[x]=w)}for(const x in y)s[x]=y[x]}),s}const Zt=e=>e;class _k{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function MB(e){let t=new _k,r=new _k,n=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const f=d&&s,h=f?t:r;return u&&a.add(c),h.add(c)&&f&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),a.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}s=!1,i&&(i=!1,l.process(c))}};return l}const hd=["prepare","read","update","preRender","render","postRender"],OB=40;function PB(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=hd.reduce((f,h)=>(f[h]=MB(()=>r=!0),f),{}),a=f=>i[f].process(s),l=()=>{const f=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(f-s.timestamp,OB),1),s.timestamp=f,s.isProcessing=!0,hd.forEach(a),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:hd.reduce((f,h)=>{const p=i[h];return f[h]=(m,y=!1,b=!1)=>(r||c(),p.schedule(m,y,b)),f},{}),cancel:f=>hd.forEach(h=>i[h].cancel(f)),state:s,steps:i}}const{schedule:Et,cancel:ri,state:jr,steps:bm}=PB(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zt,!0),LB={useVisualState:V2({scrapeMotionValuesFromProps:U2,createRenderState:L2,onMount:(e,t,{renderState:r,latestValues:n})=>{Et.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Et.render(()=>{tv(r,n,{enableHardwareAcceleration:!1},rv(t.tagName),e.transformTemplate),z2(t,r)})}})},FB={useVisualState:V2({scrapeMotionValuesFromProps:nv,createRenderState:ev})};function BB(e,{forwardMotionProps:t=!1},r,n){return{...Xx(e)?LB:FB,preloadedFeatures:r,useRender:AB(t),createVisualElement:n,Component:e}}function $s(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const W2=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function up(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const zB=e=>t=>W2(t)&&e(t,up(t));function qs(e,t,r,n){return $s(e,t,zB(r),n)}const UB=(e,t)=>r=>t(e(r)),Ui=(...e)=>e.reduce(UB);function $2(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const Ik=$2("dragHorizontal"),Mk=$2("dragVertical");function Y2(e){let t=!1;if(e==="y")t=Mk();else if(e==="x")t=Ik();else{const r=Ik(),n=Mk();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function G2(){const e=Y2(!0);return e?(e(),!1):!0}class ta{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Ok(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||G2())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Et.update(()=>l[n](i,a))};return qs(e.current,r,s,{passive:!e.getProps()[n]})}class HB extends ta{mount(){this.unmount=Ui(Ok(this.node,!0),Ok(this.node,!1))}unmount(){}}class VB extends ta{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ui($s(this.node.current,"focus",()=>this.onFocus()),$s(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const q2=(e,t)=>t?e===t?!0:q2(e,t.parentElement):!1;function wm(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,up(r))}class WB extends ta{constructor(){super(...arguments),this.removeStartListeners=Zt,this.removeEndListeners=Zt,this.removeAccessibleListeners=Zt,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=qs(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps();Et.update(()=>{!f&&!q2(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),a=qs(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Ui(i,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||wm("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Et.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=$s(this.node.current,"keyup",a),wm("down",(l,c)=>{this.startPress(l,c)})},r=$s(this.node.current,"keydown",t),n=()=>{this.isPressing&&wm("cancel",(i,a)=>this.cancelPress(i,a))},s=$s(this.node.current,"blur",n);this.removeAccessibleListeners=Ui(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Et.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!G2()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Et.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=qs(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=$s(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ui(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const H0=new WeakMap,km=new WeakMap,$B=e=>{const t=H0.get(e.target);t&&t(e)},YB=e=>{e.forEach($B)};function GB({root:e,...t}){const r=e||document;km.has(r)||km.set(r,{});const n=km.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(YB,{root:e,...t})),n[s]}function qB(e,t,r){const n=GB(t);return H0.set(e,r),n.observe(e),()=>{H0.delete(e),n.unobserve(e)}}const KB={some:0,all:1};class QB extends ta{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:KB[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return qB(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(ZB(t,r))&&this.startObserver()}unmount(){}}function ZB({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const XB={inView:{Feature:QB},tap:{Feature:WB},focus:{Feature:VB},hover:{Feature:HB}};function K2(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function JB(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function e7(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function dp(e,t,r){const n=e.getProps();return sv(n,t,r!==void 0?r:n.custom,JB(e),e7(e))}let iv=Zt;const Ra=e=>e*1e3,Ks=e=>e/1e3,t7={current:!1},Q2=e=>Array.isArray(e)&&typeof e[0]=="number";function Z2(e){return!!(!e||typeof e=="string"&&X2[e]||Q2(e)||Array.isArray(e)&&e.every(Z2))}const tc=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,X2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tc([0,.65,.55,1]),circOut:tc([.55,0,1,.45]),backIn:tc([.31,.01,.66,-.59]),backOut:tc([.33,1.53,.69,.99])};function J2(e){if(e)return Q2(e)?tc(e):Array.isArray(e)?e.map(J2):X2[e]}function r7(e,t,r,{delay:n=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=J2(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function n7(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const eA=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,s7=1e-7,i7=12;function a7(e,t,r,n,s){let i,a,l=0;do a=t+(r-t)/2,i=eA(a,n,s)-e,i>0?r=a:t=a;while(Math.abs(i)>s7&&++l<i7);return a}function Pu(e,t,r,n){if(e===t&&r===n)return Zt;const s=i=>a7(i,0,1,e,r);return i=>i===0||i===1?i:eA(s(i),t,n)}const o7=Pu(.42,0,1,1),l7=Pu(0,0,.58,1),tA=Pu(.42,0,.58,1),c7=e=>Array.isArray(e)&&typeof e[0]!="number",rA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,nA=e=>t=>1-e(1-t),av=e=>1-Math.sin(Math.acos(e)),sA=nA(av),u7=rA(av),iA=Pu(.33,1.53,.69,.99),ov=nA(iA),d7=rA(ov),f7=e=>(e*=2)<1?.5*ov(e):.5*(2-Math.pow(2,-10*(e-1))),h7={linear:Zt,easeIn:o7,easeInOut:tA,easeOut:l7,circIn:av,circInOut:u7,circOut:sA,backIn:ov,backInOut:d7,backOut:iA,anticipate:f7},Pk=e=>{if(Array.isArray(e)){iv(e.length===4);const[t,r,n,s]=e;return Pu(t,r,n,s)}else if(typeof e=="string")return h7[e];return e},lv=(e,t)=>r=>!!(Mu(r)&&mB.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),aA=(e,t,r)=>n=>{if(!Mu(n))return n;const[s,i,a,l]=n.match(cp);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},p7=e=>Yi(0,255,e),Sm={...Qa,transform:e=>Math.round(p7(e))},Sa={test:lv("rgb","red"),parse:aA("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Sm.transform(e)+", "+Sm.transform(t)+", "+Sm.transform(r)+", "+yc(gc.transform(n))+")"};function m7(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const V0={test:lv("#"),parse:m7,transform:Sa.transform},So={test:lv("hsl","hue"),parse:aA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Cs.transform(yc(t))+", "+Cs.transform(yc(r))+", "+yc(gc.transform(n))+")"},Ur={test:e=>Sa.test(e)||V0.test(e)||So.test(e),parse:e=>Sa.test(e)?Sa.parse(e):So.test(e)?So.parse(e):V0.parse(e),transform:e=>Mu(e)?e:e.hasOwnProperty("red")?Sa.transform(e):So.transform(e)},Lt=(e,t,r)=>-r*e+r*t+e;function Em(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function g7({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,a=0;if(!t)s=i=a=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Em(c,l,e+1/3),i=Em(c,l,e),a=Em(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:n}}const Nm=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},y7=[V0,Sa,So],x7=e=>y7.find(t=>t.test(e));function Lk(e){const t=x7(e);let r=t.parse(e);return t===So&&(r=g7(r)),r}const oA=(e,t)=>{const r=Lk(e),n=Lk(t),s={...r};return i=>(s.red=Nm(r.red,n.red,i),s.green=Nm(r.green,n.green,i),s.blue=Nm(r.blue,n.blue,i),s.alpha=Lt(r.alpha,n.alpha,i),Sa.transform(s))};function v7(e){var t,r;return isNaN(e)&&Mu(e)&&(((t=e.match(cp))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(I2))===null||r===void 0?void 0:r.length)||0)>0}const lA={regex:hB,countKey:"Vars",token:"${v}",parse:Zt},cA={regex:I2,countKey:"Colors",token:"${c}",parse:Ur.parse},uA={regex:cp,countKey:"Numbers",token:"${n}",parse:Qa.parse};function Cm(e,{regex:t,countKey:r,token:n,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(s)))}function Gf(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Cm(r,lA),Cm(r,cA),Cm(r,uA),r}function dA(e){return Gf(e).values}function fA(e){const{values:t,numColors:r,numVars:n,tokenised:s}=Gf(e),i=t.length;return a=>{let l=s;for(let c=0;c<i;c++)c<n?l=l.replace(lA.token,a[c]):c<n+r?l=l.replace(cA.token,Ur.transform(a[c])):l=l.replace(uA.token,yc(a[c]));return l}}const b7=e=>typeof e=="number"?0:e;function w7(e){const t=dA(e);return fA(e)(t.map(b7))}const Gi={test:v7,parse:dA,createTransformer:fA,getAnimatableNone:w7},hA=(e,t)=>r=>`${r>0?t:e}`;function pA(e,t){return typeof e=="number"?r=>Lt(e,t,r):Ur.test(e)?oA(e,t):e.startsWith("var(")?hA(e,t):gA(e,t)}const mA=(e,t)=>{const r=[...e],n=r.length,s=e.map((i,a)=>pA(i,t[a]));return i=>{for(let a=0;a<n;a++)r[a]=s[a](i);return r}},k7=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=pA(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}},gA=(e,t)=>{const r=Gi.createTransformer(t),n=Gf(e),s=Gf(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?Ui(mA(n.values,s.values),r):hA(e,t)},su=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},Fk=(e,t)=>r=>Lt(e,t,r);function S7(e){return typeof e=="number"?Fk:typeof e=="string"?Ur.test(e)?oA:gA:Array.isArray(e)?mA:typeof e=="object"?k7:Fk}function E7(e,t,r){const n=[],s=r||S7(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Zt:t;l=Ui(c,l)}n.push(l)}return n}function yA(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(iv(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=E7(t,n,s),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=su(e[d],e[d+1],u);return a[d](f)};return r?u=>c(Yi(e[0],e[i-1],u)):c}function N7(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=su(0,t,n);e.push(Lt(r,1,s))}}function C7(e){const t=[0];return N7(t,e.length-1),t}function j7(e,t){return e.map(r=>r*t)}function T7(e,t){return e.map(()=>t||tA).splice(0,e.length-1)}function qf({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=c7(n)?n.map(Pk):Pk(n),i={done:!1,value:t[0]},a=j7(r&&r.length===t.length?r:C7(t),e),l=yA(a,t,{ease:Array.isArray(s)?s:T7(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function xA(e,t){return t?e*(1e3/t):0}const A7=5;function vA(e,t,r){const n=Math.max(t-A7,0);return xA(r-e(n),t-n)}const jm=.001,D7=.01,R7=10,_7=.05,I7=1;function M7({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,i,a=1-t;a=Yi(_7,I7,a),e=Yi(D7,R7,Ks(e)),a<1?(s=u=>{const d=u*a,f=d*e,h=d-r,p=W0(u,a),m=Math.exp(-f);return jm-h/p*m},i=u=>{const f=u*a*e,h=f*r+r,p=Math.pow(a,2)*Math.pow(u,2)*e,m=Math.exp(-f),y=W0(Math.pow(u,2),a);return(-s(u)+jm>0?-1:1)*((h-p)*m)/y}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-jm+d*f},i=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const l=5/e,c=P7(s,i,l);if(e=Ra(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const O7=12;function P7(e,t,r){let n=r;for(let s=1;s<O7;s++)n=n-e(n)/t(n);return n}function W0(e,t){return e*Math.sqrt(1-t*t)}const L7=["duration","bounce"],F7=["stiffness","damping","mass"];function Bk(e,t){return t.some(r=>e[r]!==void 0)}function B7(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Bk(e,F7)&&Bk(e,L7)){const r=M7(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function bA({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],i=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=B7({...n,velocity:-Ks(n.velocity||0)}),p=f||0,m=c/(2*Math.sqrt(l*u)),y=i-s,b=Ks(Math.sqrt(l/u)),v=Math.abs(y)<5;r||(r=v?.01:2),t||(t=v?.005:.5);let x;if(m<1){const w=W0(b,m);x=k=>{const S=Math.exp(-m*b*k);return i-S*((p+m*b*y)/w*Math.sin(w*k)+y*Math.cos(w*k))}}else if(m===1)x=w=>i-Math.exp(-b*w)*(y+(p+b*y)*w);else{const w=b*Math.sqrt(m*m-1);x=k=>{const S=Math.exp(-m*b*k),E=Math.min(w*k,300);return i-S*((p+m*b*y)*Math.sinh(E)+w*y*Math.cosh(E))/w}}return{calculatedDuration:h&&d||null,next:w=>{const k=x(w);if(h)a.done=w>=d;else{let S=p;w!==0&&(m<1?S=vA(x,w,k):S=0);const E=Math.abs(S)<=r,N=Math.abs(i-k)<=t;a.done=E&&N}return a.value=a.done?i:k,a}}}function zk({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},p=C=>l!==void 0&&C<l||c!==void 0&&C>c,m=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let y=r*t;const b=f+y,v=a===void 0?b:a(b);v!==b&&(y=v-f);const x=C=>-y*Math.exp(-C/n),w=C=>v+x(C),k=C=>{const T=x(C),j=w(C);h.done=Math.abs(T)<=u,h.value=h.done?v:j};let S,E;const N=C=>{p(h.value)&&(S=C,E=bA({keyframes:[h.value,m(h.value)],velocity:vA(w,C,h.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:C=>{let T=!1;return!E&&S===void 0&&(T=!0,k(C),N(C)),S!==void 0&&C>S?E.next(C-S):(!T&&k(C),h)}}}const z7=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Et.update(t,!0),stop:()=>ri(t),now:()=>jr.isProcessing?jr.timestamp:performance.now()}},Uk=2e4;function Hk(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Uk;)t+=r,n=e.next(t);return t>=Uk?1/0:t}const U7={decay:zk,inertia:zk,tween:qf,keyframes:qf,spring:bA};function Kf({autoplay:e=!0,delay:t=0,driver:r=z7,keyframes:n,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:f,...h}){let p=1,m=!1,y,b;const v=()=>{b=new Promise(X=>{y=X})};v();let x;const w=U7[s]||qf;let k;w!==qf&&typeof n[0]!="number"&&(k=yA([0,100],n,{clamp:!1}),n=[0,100]);const S=w({...h,keyframes:n});let E;l==="mirror"&&(E=w({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let N="idle",C=null,T=null,j=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=Hk(S));const{calculatedDuration:I}=S;let H=1/0,L=1/0;I!==null&&(H=I+a,L=H*(i+1)-a);let D=0;const O=X=>{if(T===null)return;p>0&&(T=Math.min(T,X)),p<0&&(T=Math.min(X-L/p,T)),C!==null?D=C:D=Math.round(X-T)*p;const fe=D-t*(p>=0?1:-1),de=p>=0?fe<0:fe>L;D=Math.max(fe,0),N==="finished"&&C===null&&(D=L);let ge=D,se=S;if(i){const le=Math.min(D,L)/H;let ee=Math.floor(le),we=le%1;!we&&le>=1&&(we=1),we===1&&ee--,ee=Math.min(ee,i+1),!!(ee%2)&&(l==="reverse"?(we=1-we,a&&(we-=a/H)):l==="mirror"&&(se=E)),ge=Yi(0,1,we)*H}const M=de?{done:!1,value:n[0]}:se.next(ge);k&&(M.value=k(M.value));let{done:re}=M;!de&&I!==null&&(re=p>=0?D>=L:D<=0);const F=C===null&&(N==="finished"||N==="running"&&re);return f&&f(M.value),F&&z(),M},P=()=>{x&&x.stop(),x=void 0},U=()=>{N="idle",P(),y(),v(),T=j=null},z=()=>{N="finished",d&&d(),P(),y()},$=()=>{if(m)return;x||(x=r(O));const X=x.now();c&&c(),C!==null?T=X-C:(!T||N==="finished")&&(T=X),N==="finished"&&v(),j=T,C=null,N="running",x.start()};e&&$();const ne={then(X,fe){return b.then(X,fe)},get time(){return Ks(D)},set time(X){X=Ra(X),D=X,C!==null||!x||p===0?C=X:T=x.now()-X/p},get duration(){const X=S.calculatedDuration===null?Hk(S):S.calculatedDuration;return Ks(X)},get speed(){return p},set speed(X){X===p||!x||(p=X,ne.time=Ks(D))},get state(){return N},play:$,pause:()=>{N="paused",C=D},stop:()=>{m=!0,N!=="idle"&&(N="idle",u&&u(),U())},cancel:()=>{j!==null&&O(j),U()},complete:()=>{N="finished"},sample:X=>(T=0,O(X))};return ne}function H7(e){let t;return()=>(t===void 0&&(t=e()),t)}const V7=H7(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),W7=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),pd=10,$7=2e4,Y7=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Z2(t.ease);function G7(e,t,{onUpdate:r,onComplete:n,...s}){if(!(V7()&&W7.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:f,duration:h=300,ease:p,times:m}=s;if(Y7(t,s)){const w=Kf({...s,repeat:0,delay:0});let k={done:!1,value:f[0]};const S=[];let E=0;for(;!k.done&&E<$7;)k=w.sample(E),S.push(k.value),E+=pd;m=void 0,f=S,h=E-pd,p="linear"}const y=r7(e.owner.current,t,f,{...s,duration:h,ease:p,times:m}),b=()=>{u=!1,y.cancel()},v=()=>{u=!0,Et.update(b),l(),d()};return y.onfinish=()=>{u||(e.set(n7(f,s)),n&&n(),v())},{then(w,k){return c.then(w,k)},attachTimeline(w){return y.timeline=w,y.onfinish=null,Zt},get time(){return Ks(y.currentTime||0)},set time(w){y.currentTime=Ra(w)},get speed(){return y.playbackRate},set speed(w){y.playbackRate=w},get duration(){return Ks(h)},play:()=>{a||(y.play(),ri(b))},pause:()=>y.pause(),stop:()=>{if(a=!0,y.playState==="idle")return;const{currentTime:w}=y;if(w){const k=Kf({...s,autoplay:!1});e.setWithVelocity(k.sample(w-pd).value,k.sample(w).value,pd)}v()},complete:()=>{u||y.finish()},cancel:v}}function q7({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Zt,pause:Zt,stop:Zt,then:i=>(i(),Promise.resolve()),cancel:Zt,complete:Zt});return t?Kf({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const K7={type:"spring",stiffness:500,damping:25,restSpeed:10},Q7=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Z7={type:"keyframes",duration:.8},X7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},J7=(e,{keyframes:t})=>t.length>2?Z7:Ka.has(e)?e.startsWith("scale")?Q7(t[1]):K7:X7,$0=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Gi.test(t)||t==="0")&&!t.startsWith("url(")),ez=new Set(["brightness","contrast","saturate","opacity"]);function tz(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(cp)||[];if(!n)return e;const s=r.replace(n,"");let i=ez.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const rz=/([a-z-]*)\(.*?\)/g,Y0={...Gi,getAnimatableNone:e=>{const t=e.match(rz);return t?t.map(tz).join(" "):e}},nz={...M2,color:Ur,backgroundColor:Ur,outlineColor:Ur,fill:Ur,stroke:Ur,borderColor:Ur,borderTopColor:Ur,borderRightColor:Ur,borderBottomColor:Ur,borderLeftColor:Ur,filter:Y0,WebkitFilter:Y0},cv=e=>nz[e];function wA(e,t){let r=cv(e);return r!==Y0&&(r=Gi),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const kA=e=>/^0[^.\s]+$/.test(e);function sz(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||kA(e)}function iz(e,t,r,n){const s=$0(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const a=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?a:i[u-1]),sz(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=wA(t,l)}return i}function az({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function uv(e,t){return e[t]||e.default||e}const oz={skipAnimations:!1},dv=(e,t,r,n={})=>s=>{const i=uv(n,e)||{},a=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Ra(a);const c=iz(t,e,r,i),u=c[0],d=c[c.length-1],f=$0(e,u),h=$0(e,d);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:m=>{t.set(m),i.onUpdate&&i.onUpdate(m)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(az(i)||(p={...p,...J7(e,p)}),p.duration&&(p.duration=Ra(p.duration)),p.repeatDelay&&(p.repeatDelay=Ra(p.repeatDelay)),!f||!h||t7.current||i.type===!1||oz.skipAnimations)return q7(p);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const m=G7(t,e,p);if(m)return m}return Kf(p)};function Qf(e){return!!(cn(e)&&e.add)}const SA=e=>/^\-?\d*\.?\d+$/.test(e);function fv(e,t){e.indexOf(t)===-1&&e.push(t)}function hv(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class pv{constructor(){this.subscriptions=[]}add(t){return fv(this.subscriptions,t),()=>hv(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lz=e=>!isNaN(parseFloat(e));class cz{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:a}=jr;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,Et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=lz(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new pv);const n=this.events[t].add(r);return t==="change"?()=>{n(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?xA(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tl(e,t){return new cz(e,t)}const EA=e=>t=>t.test(e),uz={test:e=>e==="auto",parse:e=>e},NA=[Qa,Oe,Cs,pi,yB,gB,uz],Bl=e=>NA.find(EA(e)),dz=[...NA,Ur,Gi],fz=e=>dz.find(EA(e));function hz(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,tl(r))}function pz(e,t){const r=dp(e,t);let{transitionEnd:n={},transition:s={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const a in i){const l=RB(i[a]);hz(e,a,l)}}function mz(e,t,r){var n,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(SA(d)||kA(d))?d=parseFloat(d):!fz(d)&&Gi.test(u)&&(d=wA(c,u)),e.addValue(c,tl(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function gz(e,t){return t?(t[e]||t.default||t).from:void 0}function yz(e,t,r){const n={};for(const s in e){const i=gz(s,t);if(i!==void 0)n[s]=i;else{const a=r.getValue(s);a&&(n[s]=a.get())}}return n}function xz({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function vz(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function CA(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const f in l){const h=e.getValue(f),p=l[f];if(!h||p===void 0||d&&xz(d,f))continue;const m={delay:r,elapsed:0,...uv(i||{},f)};if(window.HandoffAppearAnimations){const v=e.getProps()[j2];if(v){const x=window.HandoffAppearAnimations(v,f,h,Et);x!==null&&(m.elapsed=x,m.isHandoff=!0)}}let y=!m.isHandoff&&!vz(h,p);if(m.type==="spring"&&(h.getVelocity()||m.velocity)&&(y=!1),h.animation&&(y=!1),y)continue;h.start(dv(f,h,p,e.shouldReduceMotion&&Ka.has(f)?{type:!1}:m));const b=h.animation;Qf(c)&&(c.add(f),b.then(()=>c.remove(f))),u.push(b)}return a&&Promise.all(u).then(()=>{a&&pz(e,a)}),u}function G0(e,t,r={}){const n=dp(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(CA(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return bz(e,t,u+c,d,f,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(r.delay)])}function bz(e,t,r=0,n=0,s=1,i){const a=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(wz).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(G0(u,t,{...i,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function wz(e,t){return e.sortNodePosition(t)}function kz(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>G0(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=G0(e,t,r);else{const s=typeof t=="function"?dp(e,t,r.custom):t;n=Promise.all(CA(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const Sz=[...Kx].reverse(),Ez=Kx.length;function Nz(e){return t=>Promise.all(t.map(({animation:r,options:n})=>kz(e,r,n)))}function Cz(e){let t=Nz(e);const r=Tz();let n=!0;const s=(c,u)=>{const d=dp(e,u);if(d){const{transition:f,transitionEnd:h,...p}=d;c={...c,...p,...h}}return c};function i(c){t=c(e)}function a(c,u){const d=e.getProps(),f=e.getVariantContext(!0)||{},h=[],p=new Set;let m={},y=1/0;for(let v=0;v<Ez;v++){const x=Sz[v],w=r[x],k=d[x]!==void 0?d[x]:f[x],S=ru(k),E=x===u?w.isActive:null;E===!1&&(y=v);let N=k===f[x]&&k!==d[x]&&S;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...m},!w.isActive&&E===null||!k&&!w.prevProp||op(k)||typeof k=="boolean")continue;let T=jz(w.prevProp,k)||x===u&&w.isActive&&!N&&S||v>y&&S,j=!1;const I=Array.isArray(k)?k:[k];let H=I.reduce(s,{});E===!1&&(H={});const{prevResolvedValues:L={}}=w,D={...L,...H},O=P=>{T=!0,p.has(P)&&(j=!0,p.delete(P)),w.needsAnimating[P]=!0};for(const P in D){const U=H[P],z=L[P];if(m.hasOwnProperty(P))continue;let $=!1;Yf(U)&&Yf(z)?$=!K2(U,z):$=U!==z,$?U!==void 0?O(P):p.add(P):U!==void 0&&p.has(P)?O(P):w.protectedKeys[P]=!0}w.prevProp=k,w.prevResolvedValues=H,w.isActive&&(m={...m,...H}),n&&e.blockInitialAnimation&&(T=!1),T&&(!N||j)&&h.push(...I.map(P=>({animation:P,options:{type:x,...c}})))}if(p.size){const v={};p.forEach(x=>{const w=e.getBaseTarget(x);w!==void 0&&(v[x]=w)}),h.push({animation:v})}let b=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(b=!1),n=!1,b?t(h):Promise.resolve()}function l(c,u,d){var f;if(r[c].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),r[c].isActive=u;const h=a(d,c);for(const p in r)r[p].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>r}}function jz(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!K2(t,e):!1}function oa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tz(){return{animate:oa(!0),whileInView:oa(),whileHover:oa(),whileTap:oa(),whileDrag:oa(),whileFocus:oa(),exit:oa()}}class Az extends ta{constructor(t){super(t),t.animationState||(t.animationState=Cz(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),op(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let Dz=0;class Rz extends ta{constructor(){super(...arguments),this.id=Dz++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const _z={animation:{Feature:Az},exit:{Feature:Rz}},Vk=(e,t)=>Math.abs(e-t);function Iz(e,t){const r=Vk(e.x,t.x),n=Vk(e.y,t.y);return Math.sqrt(r**2+n**2)}class jA{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Am(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=Iz(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:m}=f,{timestamp:y}=jr;this.history.push({...m,timestamp:y});const{onStart:b,onMove:v}=this.handlers;h||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Tm(h,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Am(f.type==="pointercancel"?this.lastMoveEventInfo:Tm(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,b),m&&m(f,b)},!W2(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const a=up(t),l=Tm(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=jr;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,Am(l,this.history)),this.removeListeners=Ui(qs(this.contextWindow,"pointermove",this.handlePointerMove),qs(this.contextWindow,"pointerup",this.handlePointerUp),qs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ri(this.updatePoint)}}function Tm(e,t){return t?{point:t(e.point)}:e}function Wk(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Am({point:e},t){return{point:e,delta:Wk(e,TA(t)),offset:Wk(e,Mz(t)),velocity:Oz(t,.1)}}function Mz(e){return e[0]}function TA(e){return e[e.length-1]}function Oz(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=TA(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Ra(t)));)r--;if(!n)return{x:0,y:0};const i=Ks(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function wn(e){return e.max-e.min}function q0(e,t=0,r=.01){return Math.abs(e-t)<=r}function $k(e,t,r,n=.5){e.origin=n,e.originPoint=Lt(t.min,t.max,e.origin),e.scale=wn(r)/wn(t),(q0(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Lt(r.min,r.max,e.origin)-e.originPoint,(q0(e.translate)||isNaN(e.translate))&&(e.translate=0)}function xc(e,t,r,n){$k(e.x,t.x,r.x,n?n.originX:void 0),$k(e.y,t.y,r.y,n?n.originY:void 0)}function Yk(e,t,r){e.min=r.min+t.min,e.max=e.min+wn(t)}function Pz(e,t,r){Yk(e.x,t.x,r.x),Yk(e.y,t.y,r.y)}function Gk(e,t,r){e.min=t.min-r.min,e.max=e.min+wn(t)}function vc(e,t,r){Gk(e.x,t.x,r.x),Gk(e.y,t.y,r.y)}function Lz(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Lt(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Lt(r,e,n.max):Math.min(e,r)),e}function qk(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Fz(e,{top:t,left:r,bottom:n,right:s}){return{x:qk(e.x,r,s),y:qk(e.y,t,n)}}function Kk(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function Bz(e,t){return{x:Kk(e.x,t.x),y:Kk(e.y,t.y)}}function zz(e,t){let r=.5;const n=wn(e),s=wn(t);return s>n?r=su(t.min,t.max-n,e.min):n>s&&(r=su(e.min,e.max-s,t.min)),Yi(0,1,r)}function Uz(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const K0=.35;function Hz(e=K0){return e===!1?e=0:e===!0&&(e=K0),{x:Qk(e,"left","right"),y:Qk(e,"top","bottom")}}function Qk(e,t,r){return{min:Zk(e,t),max:Zk(e,r)}}function Zk(e,t){return typeof e=="number"?e:e[t]||0}const Xk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Eo=()=>({x:Xk(),y:Xk()}),Jk=()=>({min:0,max:0}),rr=()=>({x:Jk(),y:Jk()});function Tn(e){return[e("x"),e("y")]}function AA({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Vz({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Wz(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Dm(e){return e===void 0||e===1}function Q0({scale:e,scaleX:t,scaleY:r}){return!Dm(e)||!Dm(t)||!Dm(r)}function da(e){return Q0(e)||DA(e)||e.z||e.rotate||e.rotateX||e.rotateY}function DA(e){return eS(e.x)||eS(e.y)}function eS(e){return e&&e!=="0%"}function Zf(e,t,r){const n=e-r,s=t*n;return r+s}function tS(e,t,r,n,s){return s!==void 0&&(e=Zf(e,s,n)),Zf(e,r,n)+t}function Z0(e,t=0,r=1,n,s){e.min=tS(e.min,t,r,n,s),e.max=tS(e.max,t,r,n,s)}function RA(e,{x:t,y:r}){Z0(e.x,t.translate,t.scale,t.originPoint),Z0(e.y,r.translate,r.scale,r.originPoint)}function $z(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=r[l],a=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&No(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,RA(e,a)),n&&da(i.latestValues)&&No(e,i.latestValues))}t.x=rS(t.x),t.y=rS(t.y)}function rS(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function yi(e,t){e.min=e.min+t,e.max=e.max+t}function nS(e,t,[r,n,s]){const i=t[s]!==void 0?t[s]:.5,a=Lt(e.min,e.max,i);Z0(e,t[r],t[n],a,t.scale)}const Yz=["x","scaleX","originX"],Gz=["y","scaleY","originY"];function No(e,t){nS(e.x,t,Yz),nS(e.y,t,Gz)}function _A(e,t){return AA(Wz(e.getBoundingClientRect(),t))}function qz(e,t,r){const n=_A(e,r),{scroll:s}=t;return s&&(yi(n.x,s.offset.x),yi(n.y,s.offset.y)),n}const IA=({current:e})=>e?e.ownerDocument.defaultView:null,Kz=new WeakMap;class Qz{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rr(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(up(d,"page").point)},i=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:m}=this.getProps();if(h&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Y2(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tn(b=>{let v=this.getAxisMotionValue(b).get()||0;if(Cs.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[b];w&&(v=wn(w)*(parseFloat(v)/100))}}this.originPoint[b]=v}),m&&Et.update(()=>m(d,f),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(d,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:m,onDrag:y}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:b}=f;if(p&&this.currentDirection===null){this.currentDirection=Zz(b),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),y&&y(d,f)},l=(d,f)=>this.stop(d,f),c=()=>Tn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new jA(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:IA(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Et.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!md(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=Lz(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&ko(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=Fz(s.layoutBox,r):this.constraints=!1,this.elastic=Hz(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Tn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Uz(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ko(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=qz(n,s.root,this.visualElement.getTransformPagePoint());let a=Bz(s.layout.layoutBox,i);if(r){const l=r(Vz(a));this.hasMutatedConstraints=!!l,l&&(a=AA(l))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Tn(d=>{if(!md(d,r,this.currentDirection))return;let f=c&&c[d]||{};a&&(f={min:0,max:0});const h=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(dv(t,n,0,r))}stopAnimation(){Tn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Tn(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Tn(r=>{const{drag:n}=this.getProps();if(!md(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];i.set(t[r]-Lt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!ko(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Tn(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=zz({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Tn(a=>{if(!md(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Lt(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;Kz.set(this.visualElement,this);const t=this.visualElement.current,r=qs(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();ko(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const a=$s(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Tn(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=K0,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function md(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Zz(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Xz extends ta{constructor(t){super(t),this.removeGroupControls=Zt,this.removeListeners=Zt,this.controls=new Qz(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zt}unmount(){this.removeGroupControls(),this.removeListeners()}}const sS=e=>(t,r)=>{e&&Et.update(()=>e(t,r))};class Jz extends ta{constructor(){super(...arguments),this.removePointerDownListener=Zt}onPointerDown(t){this.session=new jA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:IA(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:sS(t),onStart:sS(r),onMove:n,onEnd:(i,a)=>{delete this.session,s&&Et.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=qs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function eU(){const e=g.useContext(ip);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=g.useId();return g.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const Qd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Oe.test(e))e=parseFloat(e);else return e;const r=iS(e,t.target.x),n=iS(e,t.target.y);return`${r}% ${n}%`}},tU={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Gi.parse(e);if(s.length>5)return n;const i=Gi.createTransformer(e),a=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=Lt(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};class rU extends te.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;cB(nU),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Qd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,a=n.projection;return a&&(a.isPresent=i,s||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Et.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function MA(e){const[t,r]=eU(),n=g.useContext(Zx);return te.createElement(rU,{...e,layoutGroup:n,switchLayoutGroup:g.useContext(A2),isPresent:t,safeToRemove:r})}const nU={borderRadius:{...zl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zl,borderTopRightRadius:zl,borderBottomLeftRadius:zl,borderBottomRightRadius:zl,boxShadow:tU},OA=["TopLeft","TopRight","BottomLeft","BottomRight"],sU=OA.length,aS=e=>typeof e=="string"?parseFloat(e):e,oS=e=>typeof e=="number"||Oe.test(e);function iU(e,t,r,n,s,i){s?(e.opacity=Lt(0,r.opacity!==void 0?r.opacity:1,aU(n)),e.opacityExit=Lt(t.opacity!==void 0?t.opacity:1,0,oU(n))):i&&(e.opacity=Lt(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<sU;a++){const l=`border${OA[a]}Radius`;let c=lS(t,l),u=lS(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||oS(c)===oS(u)?(e[l]=Math.max(Lt(aS(c),aS(u),n),0),(Cs.test(u)||Cs.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Lt(t.rotate||0,r.rotate||0,n))}function lS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const aU=PA(0,.5,sA),oU=PA(.5,.95,Zt);function PA(e,t,r){return n=>n<e?0:n>t?1:r(su(e,t,n))}function cS(e,t){e.min=t.min,e.max=t.max}function jn(e,t){cS(e.x,t.x),cS(e.y,t.y)}function uS(e,t,r,n,s){return e-=t,e=Zf(e,1/r,n),s!==void 0&&(e=Zf(e,1/s,n)),e}function lU(e,t=0,r=1,n=.5,s,i=e,a=e){if(Cs.test(t)&&(t=parseFloat(t),t=Lt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Lt(i.min,i.max,n);e===i&&(l-=t),e.min=uS(e.min,t,r,l,s),e.max=uS(e.max,t,r,l,s)}function dS(e,t,[r,n,s],i,a){lU(e,t[r],t[n],t[s],t.scale,i,a)}const cU=["x","scaleX","originX"],uU=["y","scaleY","originY"];function fS(e,t,r,n){dS(e.x,t,cU,r?r.x:void 0,n?n.x:void 0),dS(e.y,t,uU,r?r.y:void 0,n?n.y:void 0)}function hS(e){return e.translate===0&&e.scale===1}function LA(e){return hS(e.x)&&hS(e.y)}function dU(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function FA(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function pS(e){return wn(e.x)/wn(e.y)}class fU{constructor(){this.members=[]}add(t){fv(this.members,t),t.scheduleRender()}remove(t){if(hv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mS(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(n=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const hU=(e,t)=>e.depth-t.depth;class pU{constructor(){this.children=[],this.isDirty=!1}add(t){fv(this.children,t),this.isDirty=!0}remove(t){hv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(hU),this.isDirty=!1,this.children.forEach(t)}}function mU(e,t){const r=performance.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(ri(n),e(i-t))};return Et.read(n,!0),()=>ri(n)}function gU(e){window.MotionDebug&&window.MotionDebug.record(e)}function yU(e){return e instanceof SVGElement&&e.tagName!=="svg"}function xU(e,t,r){const n=cn(e)?e:tl(e);return n.start(dv("",n,t,r)),n.animation}const gS=["","X","Y","Z"],vU={visibility:"hidden"},yS=1e3;let bU=0;const fa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function BA({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=bU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,fa.totalNodes=fa.resolvedTargetDeltas=fa.recalculatedProjection=0,this.nodes.forEach(SU),this.nodes.forEach(TU),this.nodes.forEach(AU),this.nodes.forEach(EU),gU(fa)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new pU)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new pv),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=yU(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=mU(h,250),Qd.hasAnimatedSinceResize&&(Qd.hasAnimatedSinceResize=!1,this.nodes.forEach(vS))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||MU,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=d.getProps(),x=!this.targetLayout||!FA(this.targetLayout,m)||p,w=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const k={...uv(y,"layout"),onPlay:b,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else h||vS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ri(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DU),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xS);return}this.isUpdating||this.nodes.forEach(CU),this.isUpdating=!1,this.nodes.forEach(jU),this.nodes.forEach(wU),this.nodes.forEach(kU),this.clearAllSnapshots();const l=performance.now();jr.delta=Yi(0,1e3/60,l-jr.timestamp),jr.timestamp=l,jr.isProcessing=!0,bm.update.process(jr),bm.preRender.process(jr),bm.render.process(jr),jr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(NU),this.sharedNodes.forEach(RU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!LA(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||da(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),OU(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return rr();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(yi(l.x,c.offset.x),yi(l.y,c.offset.y)),l}removeElementScroll(a){const l=rr();jn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;if(u!==this.root&&d&&f.layoutScroll){if(d.isRoot){jn(l,a);const{scroll:h}=this.root;h&&(yi(l.x,-h.offset.x),yi(l.y,-h.offset.y))}yi(l.x,d.offset.x),yi(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=rr();jn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&No(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),da(d.latestValues)&&No(c,d.latestValues)}return da(this.latestValues)&&No(c,this.latestValues),c}removeTransform(a){const l=rr();jn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!da(u.latestValues))continue;Q0(u.latestValues)&&u.updateSnapshot();const d=rr(),f=u.measurePageBox();jn(d,f),fS(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return da(this.latestValues)&&fS(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=jr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rr(),this.relativeTargetOrigin=rr(),vc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=rr(),this.targetWithTransforms=rr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Pz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jn(this.target,this.layout.layoutBox),RA(this.target,this.targetDelta)):jn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rr(),this.relativeTargetOrigin=rr(),vc(this.relativeTargetOrigin,this.target,p.target),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Q0(this.parent.latestValues)||DA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===jr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;jn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;$z(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:m}=l;if(!m){this.projectionTransform&&(this.projectionDelta=Eo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Eo(),this.projectionDeltaWithTransform=Eo());const y=this.projectionTransform;xc(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=mS(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==h||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),fa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Eo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=rr(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,y=p!==m,b=this.getStack(),v=!b||b.members.length<=1,x=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(IU));this.animationProgress=0;let w;this.mixTargetDelta=k=>{const S=k/1e3;bS(f.x,a.x,S),bS(f.y,a.y,S),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vc(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_U(this.relativeTarget,this.relativeTargetOrigin,h,S),w&&dU(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=rr()),jn(w,this.relativeTarget)),y&&(this.animationValues=d,iU(d,u,this.latestValues,S,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ri(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{Qd.hasAnimatedSinceResize=!0,this.currentAnimation=xU(0,yS,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&zA(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||rr();const f=wn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const h=wn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+h}jn(l,c),No(l,d),xc(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new fU),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<gS.length;d++){const f="rotate"+gS[d];c[f]&&(u[f]=c[f],a.setStaticValue(f,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return vU;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Kd(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Kd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!da(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=mS(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:p,y:m}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in Wf){if(h[y]===void 0)continue;const{correct:b,applyTo:v}=Wf[y],x=u.transform==="none"?h[y]:b(h[y],f);if(v){const w=v.length;for(let k=0;k<w;k++)u[v[k]]=x}else u[y]=x}return this.options.layoutId&&(u.pointerEvents=f===this?Kd(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(xS),this.root.sharedNodes.clear()}}}function wU(e){e.updateLayout()}function kU(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,a=r.source!==e.layout.source;i==="size"?Tn(f=>{const h=a?r.measuredBox[f]:r.layoutBox[f],p=wn(h);h.min=n[f].min,h.max=h.min+p}):zA(i,r.layoutBox,n)&&Tn(f=>{const h=a?r.measuredBox[f]:r.layoutBox[f],p=wn(n[f]);h.max=h.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+p)});const l=Eo();xc(l,n,r.layoutBox);const c=Eo();a?xc(c,e.applyTransform(s,!0),r.measuredBox):xc(c,n,r.layoutBox);const u=!LA(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const m=rr();vc(m,r.layoutBox,h.layoutBox);const y=rr();vc(y,n,p.layoutBox),FA(m,y)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=m,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function SU(e){fa.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function EU(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function NU(e){e.clearSnapshot()}function xS(e){e.clearMeasurements()}function CU(e){e.isLayoutDirty=!1}function jU(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function vS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function TU(e){e.resolveTargetDelta()}function AU(e){e.calcProjection()}function DU(e){e.resetRotation()}function RU(e){e.removeLeadSnapshot()}function bS(e,t,r){e.translate=Lt(t.translate,0,r),e.scale=Lt(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function wS(e,t,r,n){e.min=Lt(t.min,r.min,n),e.max=Lt(t.max,r.max,n)}function _U(e,t,r,n){wS(e.x,t.x,r.x,n),wS(e.y,t.y,r.y,n)}function IU(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const MU={duration:.45,ease:[.4,0,.1,1]},kS=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),SS=kS("applewebkit/")&&!kS("chrome/")?Math.round:Zt;function ES(e){e.min=SS(e.min),e.max=SS(e.max)}function OU(e){ES(e.x),ES(e.y)}function zA(e,t,r){return e==="position"||e==="preserve-aspect"&&!q0(pS(t),pS(r),.2)}const PU=BA({attachResizeListener:(e,t)=>$s(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rm={current:void 0},UA=BA({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Rm.current){const e=new PU({});e.mount(window),e.setOptions({layoutScroll:!0}),Rm.current=e}return Rm.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),LU={pan:{Feature:Jz},drag:{Feature:Xz,ProjectionNode:UA,MeasureLayout:MA}},FU=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function BU(e){const t=FU.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function X0(e,t,r=1){const[n,s]=BU(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const a=i.trim();return SA(a)?parseFloat(a):a}else return U0(s)?X0(s,t,r+1):s}function zU(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const i=s.get();if(!U0(i))return;const a=X0(i,n);a&&s.set(a)});for(const s in t){const i=t[s];if(!U0(i))continue;const a=X0(i,n);a&&(t[s]=a,r||(r={}),r[s]===void 0&&(r[s]=i))}return{target:t,transitionEnd:r}}const UU=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),HA=e=>UU.has(e),HU=e=>Object.keys(e).some(HA),NS=e=>e===Qa||e===Oe,CS=(e,t)=>parseFloat(e.split(", ")[t]),jS=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return CS(s[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?CS(i[1],e):0}},VU=new Set(["x","y","z"]),WU=Iu.filter(e=>!VU.has(e));function $U(e){const t=[];return WU.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const rl={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:jS(4,13),y:jS(5,14)};rl.translateX=rl.x;rl.translateY=rl.y;const YU=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=rl[u](n,i)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=rl[u](c,i)}),e},GU=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(HA);let i=[],a=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],f=Bl(d);const h=t[c];let p;if(Yf(h)){const m=h.length,y=h[0]===null?1:0;d=h[y],f=Bl(d);for(let b=y;b<m&&h[b]!==null;b++)p?iv(Bl(h[b])===p):p=Bl(h[b])}else p=Bl(h);if(f!==p)if(NS(f)&&NS(p)){const m=u.get();typeof m=="string"&&u.set(parseFloat(m)),typeof h=="string"?t[c]=parseFloat(h):Array.isArray(h)&&p===Oe&&(t[c]=h.map(parseFloat))}else f!=null&&f.transform&&(p!=null&&p.transform)&&(d===0||h===0)?d===0?u.set(p.transform(d)):t[c]=f.transform(h):(a||(i=$U(e),a=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(h))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=YU(t,e,l);return i.length&&i.forEach(([d,f])=>{e.getValue(d).set(f)}),e.render(),ap&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function qU(e,t,r,n){return HU(t)?GU(e,t,r,n):{target:t,transitionEnd:n}}const KU=(e,t,r,n)=>{const s=zU(e,t,n);return t=s.target,n=s.transitionEnd,qU(e,t,r,n)},J0={current:null},VA={current:!1};function QU(){if(VA.current=!0,!!ap)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>J0.current=e.matches;e.addListener(t),t()}else J0.current=!1}function ZU(e,t,r){const{willChange:n}=t;for(const s in t){const i=t[s],a=r[s];if(cn(i))e.addValue(s,i),Qf(n)&&n.add(s);else if(cn(a))e.addValue(s,tl(i,{owner:e})),Qf(n)&&n.remove(s);else if(a!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,tl(l!==void 0?l:i,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const TS=new WeakMap,WA=Object.keys(nu),XU=WA.length,AS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],JU=Qx.length;class eH{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Et.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=lp(r),this.isVariantNode=T2(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const f in d){const h=d[f];l[f]!==void 0&&cn(h)&&(h.set(l[f],!1),Qf(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,TS.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),VA.current||QU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:J0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){TS.delete(this.current),this.projection&&this.projection.unmount(),ri(this.notifyUpdate),ri(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=Ka.has(t),s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Et.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,i){let a,l;for(let c=0;c<XU;c++){const u=WA[c],{isEnabled:d,Feature:f,ProjectionNode:h,MeasureLayout:p}=nu[u];h&&(a=h),d(r)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:f,layoutScroll:h,layoutRoot:p}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||f&&ko(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<AS.length;n++){const s=AS[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=ZU(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<JU;n++){const s=Qx[n],i=this.props[s];(ru(i)||i===!1)&&(r[s]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=tl(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=sv(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!cn(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new pv),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class $A extends eH{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},i){let a=yz(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),a&&(a=s(a))),i){mz(this,n,a);const l=KU(this,n,a,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function tH(e){return window.getComputedStyle(e)}class rH extends $A{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(Ka.has(r)){const n=cv(r);return n&&n.default||0}else{const n=tH(t),s=(_2(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return _A(t,r)}build(t,r,n,s){Jx(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return nv(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;cn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){F2(t,r,n,s)}}class nH extends $A{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Ka.has(r)){const n=cv(r);return n&&n.default||0}return r=B2.has(r)?r:qx(r),t.getAttribute(r)}measureInstanceViewportBox(){return rr()}scrapeMotionValuesFromProps(t,r){return U2(t,r)}build(t,r,n,s){tv(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){z2(t,r,n,s)}mount(t){this.isSVGTag=rv(t.tagName),super.mount(t)}}const sH=(e,t)=>Xx(e)?new nH(t,{enableHardwareAcceleration:!1}):new rH(t,{enableHardwareAcceleration:!0}),iH={layout:{ProjectionNode:UA,MeasureLayout:MA}},aH={..._z,...XB,...LU,...iH},vt=oB((e,t)=>BB(e,t,aH,sH));function YA(){const e=g.useRef(!1);return Gx(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function oH(){const e=YA(),[t,r]=g.useState(0),n=g.useCallback(()=>{e.current&&r(t+1)},[t]);return[g.useCallback(()=>Et.postRender(n),[n]),t]}class lH extends g.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function cH({children:e,isPresent:t}){const r=g.useId(),n=g.useRef(null),s=g.useRef({width:0,height:0,top:0,left:0});return g.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=s.current;if(t||!n.current||!i||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),g.createElement(lH,{isPresent:t,childRef:n,sizeRef:s},g.cloneElement(e,{ref:n}))}const _m=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=H2(uH),c=g.useId(),u=g.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:d=>{l.set(d,!0);for(const f of l.values())if(!f)return;n&&n()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[r]);return g.useMemo(()=>{l.forEach((d,f)=>l.set(f,!1))},[r]),g.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),a==="popLayout"&&(e=g.createElement(cH,{isPresent:r},e)),g.createElement(ip.Provider,{value:u},e)};function uH(){return new Map}function dH(e){return g.useEffect(()=>()=>e(),[])}const ha=e=>e.key||"";function fH(e,t){e.forEach(r=>{const n=ha(r);t.set(n,r)})}function hH(e){const t=[];return g.Children.forEach(e,r=>{g.isValidElement(r)&&t.push(r)}),t}const Xt=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=g.useContext(Zx).forceRender||oH()[0],c=YA(),u=hH(e);let d=u;const f=g.useRef(new Map).current,h=g.useRef(d),p=g.useRef(new Map).current,m=g.useRef(!0);if(Gx(()=>{m.current=!1,fH(u,p),h.current=d}),dH(()=>{m.current=!0,p.clear(),f.clear()}),m.current)return g.createElement(g.Fragment,null,d.map(x=>g.createElement(_m,{key:ha(x),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:a},x)));d=[...d];const y=h.current.map(ha),b=u.map(ha),v=y.length;for(let x=0;x<v;x++){const w=y[x];b.indexOf(w)===-1&&!f.has(w)&&f.set(w,void 0)}return a==="wait"&&f.size&&(d=[]),f.forEach((x,w)=>{if(b.indexOf(w)!==-1)return;const k=p.get(w);if(!k)return;const S=y.indexOf(w);let E=x;if(!E){const N=()=>{f.delete(w);const C=Array.from(p.keys()).filter(T=>!b.includes(T));if(C.forEach(T=>p.delete(T)),h.current=u.filter(T=>{const j=ha(T);return j===w||C.includes(j)}),!f.size){if(c.current===!1)return;l(),n&&n()}};E=g.createElement(_m,{key:ha(k),isPresent:!1,onExitComplete:N,custom:t,presenceAffectsLayout:i,mode:a},k),f.set(w,E)}d.splice(S,0,E)}),d=d.map(x=>{const w=x.key;return f.has(w)?x:g.createElement(_m,{key:ha(x),isPresent:!0,presenceAffectsLayout:i,mode:a},x)}),g.createElement(g.Fragment,null,f.size?d:d.map(x=>g.cloneElement(x)))};var fp={exports:{}},GA={};function qA(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=qA(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function DS(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=qA(e))&&(n&&(n+=" "),n+=t);return n}const pH=Object.freeze(Object.defineProperty({__proto__:null,clsx:DS,default:DS},Symbol.toStringTag,{value:"Module"})),mH=rI(pH);var Gt={},Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.dontSetMe=bH;Rs.findInArray=gH;Rs.int=vH;Rs.isFunction=yH;Rs.isNum=xH;function gH(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function yH(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function xH(e){return typeof e=="number"&&!isNaN(e)}function vH(e){return parseInt(e,10)}function bH(e,t,r){if(e[t])return new Error(`Invalid prop ${t} passed to ${r} - do not set this, set it on the child.`)}var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.browserPrefixToKey=QA;Za.browserPrefixToStyle=wH;Za.default=void 0;Za.getPrefix=KA;const Im=["Moz","Webkit","O","ms"];function KA(){var r,n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=(r=window.document)==null?void 0:r.documentElement)==null?void 0:n.style;if(!t||e in t)return"";for(let s=0;s<Im.length;s++)if(QA(e,Im[s])in t)return Im[s];return""}function QA(e,t){return t?`${t}${kH(e)}`:e}function wH(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function kH(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}Za.default=KA();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.addClassName=JA;Gt.addEvent=EH;Gt.addUserSelectStyles=OH;Gt.createCSSTransform=RH;Gt.createSVGTransform=_H;Gt.getTouch=IH;Gt.getTouchIdentifier=MH;Gt.getTranslation=mv;Gt.innerHeight=TH;Gt.innerWidth=AH;Gt.matchesSelector=XA;Gt.matchesSelectorAndParentsTo=SH;Gt.offsetXYFromParent=DH;Gt.outerHeight=CH;Gt.outerWidth=jH;Gt.removeClassName=eD;Gt.removeEvent=NH;Gt.scheduleRemoveUserSelectStyles=PH;var yn=Rs,RS=ZA(Za);function ZA(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(ZA=function(s,i){if(!i&&s&&s.__esModule)return s;var a,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(a=i?n:r){if(a.has(s))return a.get(s);a.set(s,c)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(l.get||l.set)?a(c,u,l):c[u]=s[u]);return c})(e,t)}let gd="";function XA(e,t){return gd||(gd=(0,yn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,yn.isFunction)(e[r])})),(0,yn.isFunction)(e[gd])?e[gd](t):!1}function SH(e,t,r){let n=e;do{if(XA(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function EH(e,t,r,n){if(!e)return;const s={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,s):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function NH(e,t,r,n){if(!e)return;const s={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,s):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function CH(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,yn.int)(r.borderTopWidth),t+=(0,yn.int)(r.borderBottomWidth),t}function jH(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,yn.int)(r.borderLeftWidth),t+=(0,yn.int)(r.borderRightWidth),t}function TH(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,yn.int)(r.paddingTop),t-=(0,yn.int)(r.paddingBottom),t}function AH(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,yn.int)(r.paddingLeft),t-=(0,yn.int)(r.paddingRight),t}function DH(e,t,r){const s=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-s.left)/r,a=(e.clientY+t.scrollTop-s.top)/r;return{x:i,y:a}}function RH(e,t){const r=mv(e,t,"px");return{[(0,RS.browserPrefixToKey)("transform",RS.default)]:r}}function _H(e,t){return mv(e,t,"")}function mv(e,t,r){let{x:n,y:s}=e,i=`translate(${n}${r},${s}${r})`;if(t){const a=`${typeof t.x=="string"?t.x:t.x+r}`,l=`${typeof t.y=="string"?t.y:t.y+r}`;i=`translate(${a}, ${l})`+i}return i}function IH(e,t){return e.targetTouches&&(0,yn.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,yn.findInArray)(e.changedTouches,r=>t===r.identifier)}function MH(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function OH(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&JA(e.body,"react-draggable-transparent-selection")}function PH(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{_S(e)}):_S(e)}function _S(e){if(e)try{if(e.body&&eD(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function JA(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function eD(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.canDragX=BH;_s.canDragY=zH;_s.createCoreData=HH;_s.createDraggableData=VH;_s.getBoundPosition=LH;_s.getControlPosition=UH;_s.snapToGrid=FH;var dn=Rs,Co=Gt;function LH(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:WH(n);const s=gv(e);if(typeof n=="string"){const{ownerDocument:i}=s,a=i.defaultView;let l;if(n==="parent"?l=s.parentNode:l=s.getRootNode().querySelector(n),!(l instanceof a.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const c=l,u=a.getComputedStyle(s),d=a.getComputedStyle(c);n={left:-s.offsetLeft+(0,dn.int)(d.paddingLeft)+(0,dn.int)(u.marginLeft),top:-s.offsetTop+(0,dn.int)(d.paddingTop)+(0,dn.int)(u.marginTop),right:(0,Co.innerWidth)(c)-(0,Co.outerWidth)(s)-s.offsetLeft+(0,dn.int)(d.paddingRight)-(0,dn.int)(u.marginRight),bottom:(0,Co.innerHeight)(c)-(0,Co.outerHeight)(s)-s.offsetTop+(0,dn.int)(d.paddingBottom)-(0,dn.int)(u.marginBottom)}}return(0,dn.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,dn.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,dn.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,dn.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function FH(e,t,r){const n=Math.round(t/e[0])*e[0],s=Math.round(r/e[1])*e[1];return[n,s]}function BH(e){return e.props.axis==="both"||e.props.axis==="x"}function zH(e){return e.props.axis==="both"||e.props.axis==="y"}function UH(e,t,r){const n=typeof t=="number"?(0,Co.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const s=gv(r),i=r.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Co.offsetXYFromParent)(n||e,i,r.props.scale)}function HH(e,t,r){const n=!(0,dn.isNum)(e.lastX),s=gv(e);return n?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:s,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function VH(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function WH(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function gv(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var hp={},pp={};Object.defineProperty(pp,"__esModule",{value:!0});pp.default=$H;function $H(){}Object.defineProperty(hp,"__esModule",{value:!0});hp.default=void 0;var Mm=tD(g),Br=yv(Px),YH=yv(Jn),Er=Gt,fi=_s,Om=Rs,Ul=yv(pp);function yv(e){return e&&e.__esModule?e:{default:e}}function tD(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(tD=function(s,i){if(!i&&s&&s.__esModule)return s;var a,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(a=i?n:r){if(a.has(s))return a.get(s);a.set(s,c)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(l.get||l.set)?a(c,u,l):c[u]=s[u]);return c})(e,t)}function zr(e,t,r){return(t=GH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GH(e){var t=qH(e,"string");return typeof t=="symbol"?t:t+""}function qH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Vn={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let hi=Vn.mouse,mp=class extends Mm.Component{constructor(){super(...arguments),zr(this,"dragging",!1),zr(this,"lastX",NaN),zr(this,"lastY",NaN),zr(this,"touchIdentifier",null),zr(this,"mounted",!1),zr(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,Er.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,Er.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const s=(0,Er.getTouchIdentifier)(t);this.touchIdentifier=s;const i=(0,fi.getControlPosition)(t,s,this);if(i==null)return;const{x:a,y:l}=i,c=(0,fi.createCoreData)(this,a,l);(0,Ul.default)("DraggableCore: handleDragStart: %j",c),(0,Ul.default)("calling",this.props.onStart),!(this.props.onStart(t,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Er.addUserSelectStyles)(n),this.dragging=!0,this.lastX=a,this.lastY=l,(0,Er.addEvent)(n,hi.move,this.handleDrag),(0,Er.addEvent)(n,hi.stop,this.handleDragStop))}),zr(this,"handleDrag",t=>{const r=(0,fi.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:s}=r;if(Array.isArray(this.props.grid)){let l=n-this.lastX,c=s-this.lastY;if([l,c]=(0,fi.snapToGrid)(this.props.grid,l,c),!l&&!c)return;n=this.lastX+l,s=this.lastY+c}const i=(0,fi.createCoreData)(this,n,s);if((0,Ul.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(t,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=n,this.lastY=s}),zr(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,fi.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:s}=r;if(Array.isArray(this.props.grid)){let c=n-this.lastX||0,u=s-this.lastY||0;[c,u]=(0,fi.snapToGrid)(this.props.grid,c,u),n=this.lastX+c,s=this.lastY+u}const i=(0,fi.createCoreData)(this,n,s);if(this.props.onStop(t,i)===!1||this.mounted===!1)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,Er.scheduleRemoveUserSelectStyles)(l.ownerDocument),(0,Ul.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,Ul.default)("DraggableCore: Removing handlers"),(0,Er.removeEvent)(l.ownerDocument,hi.move,this.handleDrag),(0,Er.removeEvent)(l.ownerDocument,hi.stop,this.handleDragStop))}),zr(this,"onMouseDown",t=>(hi=Vn.mouse,this.handleDragStart(t))),zr(this,"onMouseUp",t=>(hi=Vn.mouse,this.handleDragStop(t))),zr(this,"onTouchStart",t=>(hi=Vn.touch,this.handleDragStart(t))),zr(this,"onTouchEnd",t=>(hi=Vn.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,Er.addEvent)(t,Vn.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,Er.removeEvent)(r,Vn.mouse.move,this.handleDrag),(0,Er.removeEvent)(r,Vn.touch.move,this.handleDrag),(0,Er.removeEvent)(r,Vn.mouse.stop,this.handleDragStop),(0,Er.removeEvent)(r,Vn.touch.stop,this.handleDragStop),(0,Er.removeEvent)(t,Vn.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Er.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var t,r,n;return(t=this.props)!=null&&t.nodeRef?(n=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:n.current:YH.default.findDOMNode(this)}render(){return Mm.cloneElement(Mm.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};hp.default=mp;zr(mp,"displayName","DraggableCore");zr(mp,"propTypes",{allowAnyClick:Br.default.bool,allowMobileScroll:Br.default.bool,children:Br.default.node.isRequired,disabled:Br.default.bool,enableUserSelectHack:Br.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Br.default.arrayOf(Br.default.number),handle:Br.default.string,cancel:Br.default.string,nodeRef:Br.default.object,onStart:Br.default.func,onDrag:Br.default.func,onStop:Br.default.func,onMouseDown:Br.default.func,scale:Br.default.number,className:Om.dontSetMe,style:Om.dontSetMe,transform:Om.dontSetMe});zr(mp,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=f(g),r=d(Px),n=d(Jn),s=mH,i=Gt,a=_s,l=Rs,c=d(hp),u=d(pp);function d(v){return v&&v.__esModule?v:{default:v}}function f(v,x){if(typeof WeakMap=="function")var w=new WeakMap,k=new WeakMap;return(f=function(S,E){if(!E&&S&&S.__esModule)return S;var N,C,T={__proto__:null,default:S};if(S===null||typeof S!="object"&&typeof S!="function")return T;if(N=E?k:w){if(N.has(S))return N.get(S);N.set(S,T)}for(const j in S)j!=="default"&&{}.hasOwnProperty.call(S,j)&&((C=(N=Object.defineProperty)&&Object.getOwnPropertyDescriptor(S,j))&&(C.get||C.set)?N(T,j,C):T[j]=S[j]);return T})(v,x)}function h(){return h=Object.assign?Object.assign.bind():function(v){for(var x=1;x<arguments.length;x++){var w=arguments[x];for(var k in w)({}).hasOwnProperty.call(w,k)&&(v[k]=w[k])}return v},h.apply(null,arguments)}function p(v,x,w){return(x=m(x))in v?Object.defineProperty(v,x,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[x]=w,v}function m(v){var x=y(v,"string");return typeof x=="symbol"?x:x+""}function y(v,x){if(typeof v!="object"||!v)return v;var w=v[Symbol.toPrimitive];if(w!==void 0){var k=w.call(v,x);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(v)}class b extends t.Component{static getDerivedStateFromProps(x,w){let{position:k}=x,{prevPropsPosition:S}=w;return k&&(!S||k.x!==S.x||k.y!==S.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:k,prevPropsPosition:S}),{x:k.x,y:k.y,prevPropsPosition:{...k}}):null}constructor(x){super(x),p(this,"onDragStart",(w,k)=>{if((0,u.default)("Draggable: onDragStart: %j",k),this.props.onStart(w,(0,a.createDraggableData)(this,k))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(w,k)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",k);const S=(0,a.createDraggableData)(this,k),E={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:T}=E;E.x+=this.state.slackX,E.y+=this.state.slackY;const[j,I]=(0,a.getBoundPosition)(this,E.x,E.y);E.x=j,E.y=I,E.slackX=this.state.slackX+(C-E.x),E.slackY=this.state.slackY+(T-E.y),S.x=E.x,S.y=E.y,S.deltaX=E.x-this.state.x,S.deltaY=E.y-this.state.y}if(this.props.onDrag(w,S)===!1)return!1;this.setState(E)}),p(this,"onDragStop",(w,k)=>{if(!this.state.dragging||this.props.onStop(w,(0,a.createDraggableData)(this,k))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",k);const E={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:T}=this.props.position;E.x=C,E.y=T}this.setState(E)}),this.state={dragging:!1,dragged:!1,x:x.position?x.position.x:x.defaultPosition.x,y:x.position?x.position.y:x.defaultPosition.y,prevPropsPosition:{...x.position},slackX:0,slackY:0,isElementSVG:!1},x.position&&!(x.onDrag||x.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var x,w;return((w=(x=this.props)==null?void 0:x.nodeRef)==null?void 0:w.current)??n.default.findDOMNode(this)}render(){const{axis:x,bounds:w,children:k,defaultPosition:S,defaultClassName:E,defaultClassNameDragging:N,defaultClassNameDragged:C,position:T,positionOffset:j,scale:I,...H}=this.props;let L={},D=null;const P=!!!T||this.state.dragging,U=T||S,z={x:(0,a.canDragX)(this)&&P?this.state.x:U.x,y:(0,a.canDragY)(this)&&P?this.state.y:U.y};this.state.isElementSVG?D=(0,i.createSVGTransform)(z,j):L=(0,i.createCSSTransform)(z,j);const $=(0,s.clsx)(k.props.className||"",E,{[N]:this.state.dragging,[C]:this.state.dragged});return t.createElement(c.default,h({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(k),{className:$,style:{...k.props.style,...L},transform:D}))}}e.default=b,p(b,"displayName","Draggable"),p(b,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(b,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(GA);const{default:rD,DraggableCore:KH}=GA;fp.exports=rD;fp.exports.default=rD;fp.exports.DraggableCore=KH;var QH=fp.exports;const ZH=Zi(QH),XH=mr("api-assistant"),JH=async(e,t,r)=>{try{const s=(await K.post("/assistant",{message:e},{headers:{"x-tenant-id":t,"x-user-id":r}})).data;return typeof s!="object"||s===null?{reply:"",suggestions:[],actions:[]}:{reply:typeof s.reply=="string"?s.reply:"",suggestions:Array.isArray(s.suggestions)?s.suggestions:[],actions:Array.isArray(s.actions)?s.actions:[]}}catch(n){throw XH.error("Error sending message to assistant:",n),n}},nD=g.createContext(null),rc=()=>Date.now().toString()+"-"+Math.random().toString(36).slice(2,8),e8=()=>`sugg-${rc()}`,t8=e=>!e||!e.length?[]:e.map(t=>({id:e8(),label:t.label,action:t.action,payload:t.payload,tone:t.tone??"neutral"})),nc=e=>typeof e=="string"&&e.trim().length>0,bc=e=>e.replace(/[_-]+/g," ").split(/\s+/).filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),r8=e=>{if(!nc(e))return;const t=e.split("@")[0];if(t)return bc(t.replace(/[\.|\-|_]+/g," "))},n8=e=>{var i,a,l,c;if(!e)return"Friend";const t=[e.fullName,e.full_name,e.displayName,e.preferredName,e.name,e.nickname,(i=e.profile)==null?void 0:i.displayName,(a=e.profile)==null?void 0:a.preferredName].find(nc);if(t)return bc(t);const r=[e.FirstName,e.firstName,e.given_name,(l=e.profile)==null?void 0:l.firstName].find(nc),n=[e.LastName,e.lastName,e.family_name,(c=e.profile)==null?void 0:c.lastName].find(nc);if(r&&n)return bc(r+" "+n);if(r)return bc(r);const s=r8([e.email,e.Email,e.username].find(nc));return s||"Friend"},s8=e=>{if(!e)return"Friend";const r=e.trim().split(/\s+/).filter(Boolean)[0]??"Friend";return bc(r)},i8=()=>{const e=new Date().getHours();return e>=5&&e<12?"Good morning":e>=12&&e<17?"Good afternoon":e>=17&&e<22?"Good evening":"Hello"},a8=({children:e,familyId:t=null,userId:r=null})=>{const[n,s]=g.useState([]),[i,a]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState(!1),f=g.useMemo(()=>mr("linz-chat"),[]),{user:h}=Ot(),p=g.useMemo(()=>s8(n8(h)),[h]),m=g.useMemo(()=>{if(typeof t=="number")return t;const L=(h==null?void 0:h.FamilyID)??(h==null?void 0:h.familyId);return typeof L=="number"?L:null},[t,h]),y=g.useRef(new Map),b=g.useCallback(L=>{s(D=>[...D,L])},[]),v=g.useMemo(()=>{const L=p,D=i8();return["{salutation}, {name}! How can I help you with FamConomy today?","Hey {name}! How are you doing? Need a hand with anything right now?","Hi {name}! Ready to explore FamConomy together?","Great to see you, {name}! What would you like to tackle next?","{name}, I'm here whenever you want a tour or quick tips."].map(P=>P.replace("{salutation}",D).replace(/\{name\}/g,L))},[p]);g.useEffect(()=>{d(!1)},[r,p]);const x=g.useCallback(()=>{if(u)return;const L=v[Math.floor(Math.random()*v.length)]??v[0];f.log("Greeting user on manual open",L),b({id:rc(),sender:"linz",text:L,createdAt:Date.now()}),d(!0)},[v,b,f,u]),w=g.useCallback((L,D)=>{if(!L&&!(D!=null&&D.allowEmpty))return null;const O={id:rc(),sender:"linz",text:L,createdAt:Date.now(),meta:D==null?void 0:D.meta,suggestions:D==null?void 0:D.suggestions};return b(O),D!=null&&D.autoOpen&&a(!0),O.id},[b]),k=g.useCallback((L,D)=>{if(!L&&!(D!=null&&D.allowEmpty))return null;const O={id:rc(),sender:"user",text:L,createdAt:Date.now(),meta:D==null?void 0:D.meta,suggestions:D==null?void 0:D.suggestions};return b(O),D!=null&&D.autoOpen&&a(!0),O.id},[b]),S=g.useCallback((L,D,O)=>{s(P=>P.map(U=>U.id===L?{...U,text:D,meta:(O==null?void 0:O.meta)??U.meta,suggestions:(O==null?void 0:O.suggestions)??U.suggestions}:U)),O!=null&&O.autoOpen&&a(!0)},[]),E=g.useCallback((L,D)=>{if(!L)return()=>{};const O=y.current,P=L.toLowerCase();return O.has(P)||O.set(P,new Set),O.get(P).add(D),()=>{const z=y.current.get(P);z==null||z.delete(D),z&&z.size===0&&y.current.delete(P)}},[]),N=g.useCallback((L,D)=>{if(!L)return;const O=y.current.get(L.toLowerCase());!O||O.size===0||O.forEach(P=>{try{P(D)}catch(U){f.error("Error handling LinZ chat action",L,U)}})},[f]),C=g.useCallback(async L=>{const D=L.trim();if(!D)return;b({id:rc(),sender:"user",text:D,createdAt:Date.now()});const O=m!==null?String(m):null,P=r??null;if(!O||!P){w("I'm still getting things readytry again once your profile and family are fully loaded.",{autoOpen:!0,meta:{reason:"missing-context"}});return}c(!0);try{const U=await JH(D,O,String(P)),z=t8(U.suggestions);w(U.reply??"",{autoOpen:!0,allowEmpty:!0,meta:{source:"assistant"},suggestions:z}),(U.actions??[]).forEach($=>{!$||!$.type||N($.type,$.payload)})}catch(U){f.error("Error sending message to LinZ:",U),w("Oops! Something went wrong. Please try again in a moment.",{autoOpen:!0,meta:{source:"assistant-error"}})}finally{c(!1)}},[b,w,f,m,N,r]),T=g.useCallback(L=>{a(!0),(L==null?void 0:L.greet)!==!1&&x()},[x]),j=g.useCallback(()=>a(!1),[]),I=g.useCallback(L=>{a(D=>{const O=!D;return O&&(L==null?void 0:L.greet)!==!1&&x(),O})},[x]),H=g.useMemo(()=>({messages:n,sendUserMessage:C,appendLinZMessage:w,appendUserMessage:k,updateLinZMessage:S,isOpen:i,isSending:l,openChat:T,closeChat:j,toggleChat:I,emitAction:N,registerActionHandler:E}),[w,k,S,j,N,i,l,n,T,E,C,I]);return o.jsx(nD.Provider,{value:H,children:e})},ai=()=>{const e=g.useContext(nD);if(!e)throw new Error("useLinZChat must be used within a LinZChatProvider");return e},o8=()=>{const{messages:e,sendUserMessage:t,isSending:r,emitAction:n,updateLinZMessage:s}=ai(),[i,a]=g.useState(""),l=g.useRef(null);g.useEffect(()=>{var h;(h=l.current)==null||h.scrollIntoView({behavior:"smooth"})},[e]);const c=async()=>{const h=i.trim();h&&(a(""),await t(h))},u=h=>{h.key==="Enter"&&(h.preventDefault(),c())},d=(h,p,m)=>{n(m.action,m.payload??void 0),s(h,p,{allowEmpty:!0,suggestions:[]})},f=h=>{switch(h){case"primary":return"bg-primary-600 text-white hover:bg-primary-700";case"secondary":return"bg-neutral-200 text-neutral-700 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-neutral-100 dark:hover:bg-neutral-600";default:return"bg-white text-primary-600 border border-primary-200 hover:bg-primary-50 dark:bg-neutral-800 dark:text-primary-300 dark:border-primary-400/40 dark:hover:bg-neutral-700"}};return o.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex-1 overflow-y-auto mb-4",children:[e.map((h,p)=>{const m="flex mb-2 "+(h.sender==="user"?"justify-end":"justify-start"),y="rounded-lg p-3 max-w-[70%] "+(h.sender==="user"?"bg-blue-500 text-white":"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200");return o.jsx("div",{className:m,children:o.jsxs("div",{className:"flex flex-col gap-2 max-w-full",children:[o.jsx("div",{className:y,children:h.text}),h.suggestions&&h.suggestions.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:h.suggestions.map(b=>o.jsx("button",{type:"button",className:`px-3 py-1 text-sm rounded-full transition-colors ${f(b.tone)}`,onClick:()=>d(h.id,h.text,b),children:b.label},b.id))})]})},h.id??p)}),o.jsx("div",{ref:l})]}),o.jsxs("div",{className:"flex",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-l-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Type your message...",value:i,onChange:h=>a(h.target.value),onKeyDown:u,disabled:r}),o.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-r-lg transition duration-300 disabled:opacity-60",onClick:c,disabled:r,children:r?"...":"Send"})]})]})},l8=()=>{const e=()=>typeof window>"u"?{x:0,y:0}:{x:window.innerWidth-88,y:window.innerHeight-88},[t,r]=g.useState(e),[n,s]=g.useState(!0),i=g.useRef(null),a=g.useRef(!1),l=g.useRef(!1),c=6,u=g.useRef(null),{isOpen:d,toggleChat:f,closeChat:h,openChat:p}=ai();g.useEffect(()=>{if(typeof window>"u")return;const x=()=>{l.current||r(e()),s(!0)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const m=g.useCallback(()=>{if(a.current){a.current=!1;return}f({greet:!0})},[f]),y=g.useCallback(x=>{if(x.preventDefault(),x.stopPropagation(),a.current){a.current=!1;return}f({greet:!0})},[f]),b=g.useMemo(()=>"bg-gradient-to-r from-primary-500 via-secondary-500 to-accent-500 text-white rounded-full p-4 shadow-lg hover:opacity-90 transition-opacity",[]),v=o.jsx(vt.button,{id:"linz-chat-toggle",className:`${b} ${n?"cursor-grab":""}`,onClick:m,onTouchEnd:y,type:"button","aria-label":d?"Close LinZ chat":"Open LinZ chat",children:d?o.jsx(ti,{size:28}):o.jsx(x2,{size:28})});return o.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:13e3},children:[o.jsx(ZH,{bounds:"parent",position:t,onStart:(x,w)=>{i.current={x:w.x,y:w.y},a.current=!1},onDrag:(x,w)=>{if(!i.current)return;Math.hypot(w.x-i.current.x,w.y-i.current.y)>c&&(a.current=!0)},onStop:(x,w)=>{r({x:w.x,y:w.y}),a.current&&(l.current=!0,p({greet:!1}),a.current=!1)},nodeRef:u,children:o.jsx("div",{ref:u,style:{position:"absolute",top:0,left:0,zIndex:13010,pointerEvents:"auto"},children:v})}),o.jsx(Xt,{children:d&&o.jsxs(vt.div,{className:"fixed bottom-20 right-6 w-80 h-[500px] bg-white dark:bg-gray-800 rounded-lg shadow-xl flex flex-col",style:{zIndex:13020,pointerEvents:"auto"},initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{type:"spring",stiffness:260,damping:20},children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"LinZ Chat"}),o.jsx("button",{onClick:()=>h(),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx(ti,{size:24})})]}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx(o8,{})})]})})]})},sD=g.createContext(null),c8=sD.Provider,u8=()=>g.useContext(sD),d8=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(!1),[s,i]=g.useState(window.innerWidth<1024),a=Nn(),{registerActionHandler:l}=ai(),{isDarkMode:c,toggleTheme:u,setTheme:d}=DT();g.useEffect(()=>{const m=()=>{i(window.innerWidth<1024),window.innerWidth>=1024&&t(!1)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),g.useEffect(()=>{s&&t(!1)},[a,s]);const f=g.useCallback(()=>{t(m=>!m)},[]),h=g.useCallback(()=>{n(!1),s&&t(!0)},[s]),p=g.useMemo(()=>({ensureSidebarExpanded:h,setSidebarCollapsed:n,openMobileMenu:()=>t(!0),closeMobileMenu:()=>t(!1),toggleMobileMenu:f,isSidebarCollapsed:r,isMobileMenuOpen:e,isMobile:s}),[h,r,e,s,f]);return g.useEffect(()=>{if(typeof window>"u")return;const m=y=>{const b=y.detail??{},v=()=>h();b.delay&&b.delay>0?window.setTimeout(v,b.delay):v()};return window.addEventListener("app-shell:openSidebar",m),()=>{window.removeEventListener("app-shell:openSidebar",m)}},[h]),g.useEffect(()=>{if(typeof window>"u")return;const m=y=>{const b=y.detail??{},v=()=>{n(!0),t(!1)};b.delay&&b.delay>0?window.setTimeout(v,b.delay):v()};return window.addEventListener("app-shell:closeSidebar",m),()=>{window.removeEventListener("app-shell:closeSidebar",m)}},[]),g.useEffect(()=>{const m=[],y=(w,k)=>{const S=l(w,k);m.push(S)},b=w=>{if(typeof w=="string"){const k=w.trim().toLowerCase();if(["dark","dark-mode","night","dim","moon"].includes(k))return"dark";if(["light","light-mode","day","bright","sun"].includes(k))return"light"}return typeof w=="boolean"?w?"dark":"light":null},v=w=>{const k=b((w==null?void 0:w.mode)??(w==null?void 0:w.theme)??(w==null?void 0:w.value)??(w==null?void 0:w.target)??w);k&&(k==="dark"&&!c?d("dark"):k==="light"&&c&&d("light"))},x=w=>{const k=b((w==null?void 0:w.mode)??(w==null?void 0:w.theme)??(w==null?void 0:w.value));if(k){v({mode:k});return}u()};return y("toggle-theme",x),y("theme-toggle",x),y("theme:toggle",x),y("set-theme",v),y("theme-set",v),y("theme:set",v),y("change-theme",v),y("theme-change",v),()=>{m.forEach(w=>w())}},[c,l,d,u]),o.jsx(c8,{value:p,children:o.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-neutral-50 via-neutral-100 to-neutral-200 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 text-neutral-900 dark:text-white",children:[o.jsx(Xt,{children:(!s||e)&&o.jsx(vt.div,{initial:{x:-320},animate:{x:0},exit:{x:-320},transition:{type:"spring",stiffness:300,damping:30},className:`${s?"fixed inset-y-0 left-0 z-40 w-64":"block"}`,children:o.jsx(Q6,{collapsed:r,onCollapsedChange:n,onNavigate:()=>s&&t(!1)})})}),o.jsx(Xt,{children:s&&e&&o.jsx(vt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm z-30",onClick:f})}),o.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[o.jsx(Z6,{onMenuToggle:f,isMobileMenuOpen:e}),o.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:o.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:o.jsx(CP,{})})})]}),o.jsx(l8,{})]})})},iD=async()=>(await K.get("/family")).data,ey=async(e,t)=>(await K.post("/family",{familyName:e,rewardMode:t})).data,aD=async(e,t,r,n,s)=>{await K.put(`/family/${e}`,{familyName:t,familyMantra:r,familyValues:n,rewardMode:s})},f8=async(e,t,r)=>{await K.put(`/family/${e}/members/${t}/role`,{relationshipId:r})},h8=async(e,t,r)=>{await K.put(`/family/${e}/members/${t}/permissions`,{permissions:r})},p8=async(e,t)=>{await K.delete(`/family/${e}/members/${t}`)},m8=async()=>{await K.delete("/family/leave")},Lr=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(null),[s,i]=g.useState(Fw),[a,l]=g.useState(!0),[c,u]=g.useState(null),d=g.useRef([]),f=g.useRef(!1),h=g.useCallback((y,b)=>{var w;if(!b.length){i(null),n(null);try{f.current=!0,ga()}finally{f.current=!1}return}let v=y;v!==null&&!b.some(k=>k.FamilyID===v)&&(v=null),v===null&&(v=((w=b[0])==null?void 0:w.FamilyID)??null),i(v);const x=v!==null?b.find(k=>k.FamilyID===v)??null:null;n(x??null);try{f.current=!0,Ax(v)}finally{f.current=!1}},[]),p=g.useCallback(async()=>{try{l(!0),u(null);const y=await iD(),b=y.families??[];t(b),d.current=b;const x=Fw()??s??y.activeFamilyId??null;return h(x,b),y}catch(y){u(y instanceof Error?y.message:"An unknown error occurred while fetching family data"),t([]),d.current=[],n(null),i(null);try{f.current=!0,ga()}finally{f.current=!1}return null}finally{l(!1)}},[s,h]);g.useEffect(()=>{p()},[p]),g.useEffect(()=>{d.current=e},[e]),g.useEffect(()=>{const y=wL(b=>{if(f.current)return;const v=d.current;if(b===null){h(null,[]);return}if(!v.some(x=>x.FamilyID===b)){p();return}h(b,v)});return()=>{y()}},[h,p]);const m=g.useCallback((y,b)=>{h(y,(b==null?void 0:b.families)??e)},[h,e]);return{family:r,families:e,activeFamilyId:s,setActiveFamilyId:m,isLoading:a,error:c,refetchFamily:p,rewardMode:(r==null?void 0:r.rewardMode)??"points"}},g8=async e=>(await K.get(`/dashboard/${e}`)).data,oD=({onFamilyCreated:e})=>{const[t,r]=g.useState(""),[n,s]=g.useState(!1),[i,a]=g.useState(null),l=async c=>{if(c.preventDefault(),!t.trim()){a("Family name is required.");return}s(!0),a(null);try{await ey(t),e()}catch(u){a(u instanceof Error?u.message:"An unknown error occurred"),s(!1)}};return o.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:o.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-neutral-800 p-8 rounded-2xl shadow-lg",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2",children:"Create Your Family Circle"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 mb-6",children:"Start by giving your family a name. You can invite members later."}),o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"familyName",className:"sr-only",children:"Family Name"}),o.jsx("input",{id:"familyName",type:"text",value:t,onChange:c=>r(c.target.value),placeholder:"e.g., The Smiths",className:"w-full px-4 py-3 rounded-xl border border-neutral-300 dark:border-neutral-600 bg-transparent focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:n})]}),i&&o.jsx("p",{className:"text-error-500 text-sm",children:i}),o.jsx("button",{type:"submit",className:"w-full px-4 py-3 rounded-xl bg-primary-500 text-white font-semibold hover:bg-primary-600 transition-colors disabled:bg-primary-300",disabled:n,children:n?"Creating...":"Create Family"})]})]})})};function ty(e){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ty(e)}function ls(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Mr(e){ls(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||ty(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var y8={};function x8(){return y8}function IS(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Zd(e,t){ls(2,arguments);var r=Mr(e),n=Mr(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function v8(e,t){ls(2,arguments);var r=Mr(e),n=Mr(t),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function b8(e,t){return ls(2,arguments),Mr(e).getTime()-Mr(t).getTime()}var w8={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},k8="trunc";function S8(e){return w8[k8]}function E8(e){ls(1,arguments);var t=Mr(e);return t.setHours(23,59,59,999),t}function N8(e){ls(1,arguments);var t=Mr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function C8(e){ls(1,arguments);var t=Mr(e);return E8(t).getTime()===N8(t).getTime()}function j8(e,t){ls(2,arguments);var r=Mr(e),n=Mr(t),s=Zd(r,n),i=Math.abs(v8(r,n)),a;if(i<1)a=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);var l=Zd(r,n)===-s;C8(Mr(e))&&i===1&&Zd(e,n)===1&&(l=!1),a=s*(i-Number(l))}return a===0?0:a}function T8(e,t,r){ls(2,arguments);var n=b8(e,t)/1e3;return S8()(n)}var A8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},D8=function(t,r,n){var s,i=A8[t];return typeof i=="string"?s=i:r===1?s=i.one:s=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Pm(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var R8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},I8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M8={date:Pm({formats:R8,defaultWidth:"full"}),time:Pm({formats:_8,defaultWidth:"full"}),dateTime:Pm({formats:I8,defaultWidth:"full"})},O8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},P8=function(t,r,n,s){return O8[t]};function Hl(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",s;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=r!=null&&r.width?String(r.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{var l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var L8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},F8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},B8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},z8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},U8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},H8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},V8=function(t,r){var n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},W8={ordinalNumber:V8,era:Hl({values:L8,defaultWidth:"wide"}),quarter:Hl({values:F8,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Hl({values:B8,defaultWidth:"wide"}),day:Hl({values:z8,defaultWidth:"wide"}),dayPeriod:Hl({values:U8,defaultWidth:"wide",formattingValues:H8,defaultFormattingWidth:"wide"})};function Vl(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;var a=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Y8(l,function(f){return f.test(a)}):$8(l,function(f){return f.test(a)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(a.length);return{value:u,rest:d}}}function $8(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function Y8(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function G8(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var s=n[0],i=t.match(e.parsePattern);if(!i)return null;var a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;var l=t.slice(s.length);return{value:a,rest:l}}}var q8=/^(\d+)(th|st|nd|rd)?/i,K8=/\d+/i,Q8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Z8={any:[/^b/i,/^(a|c)/i]},X8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},J8={any:[/1/i,/2/i,/3/i,/4/i]},eV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aV={ordinalNumber:G8({matchPattern:q8,parsePattern:K8,valueCallback:function(t){return parseInt(t,10)}}),era:Vl({matchPatterns:Q8,defaultMatchWidth:"wide",parsePatterns:Z8,defaultParseWidth:"any"}),quarter:Vl({matchPatterns:X8,defaultMatchWidth:"wide",parsePatterns:J8,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Vl({matchPatterns:eV,defaultMatchWidth:"wide",parsePatterns:tV,defaultParseWidth:"any"}),day:Vl({matchPatterns:rV,defaultMatchWidth:"wide",parsePatterns:nV,defaultParseWidth:"any"}),dayPeriod:Vl({matchPatterns:sV,defaultMatchWidth:"any",parsePatterns:iV,defaultParseWidth:"any"})},oV={code:"en-US",formatDistance:D8,formatLong:M8,formatRelative:P8,localize:W8,match:aV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lD(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function lV(e){return lD({},e)}var MS=1440,cV=2520,Lm=43200,uV=86400;function dV(e,t,r){var n,s;ls(2,arguments);var i=x8(),a=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:i.locale)!==null&&n!==void 0?n:oV;if(!a.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=Zd(e,t);if(isNaN(l))throw new RangeError("Invalid time value");var c=lD(lV(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:l}),u,d;l>0?(u=Mr(t),d=Mr(e)):(u=Mr(e),d=Mr(t));var f=T8(d,u),h=(IS(d)-IS(u))/1e3,p=Math.round((f-h)/60),m;if(p<2)return r!=null&&r.includeSeconds?f<5?a.formatDistance("lessThanXSeconds",5,c):f<10?a.formatDistance("lessThanXSeconds",10,c):f<20?a.formatDistance("lessThanXSeconds",20,c):f<40?a.formatDistance("halfAMinute",0,c):f<60?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",1,c):p===0?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",p,c);if(p<45)return a.formatDistance("xMinutes",p,c);if(p<90)return a.formatDistance("aboutXHours",1,c);if(p<MS){var y=Math.round(p/60);return a.formatDistance("aboutXHours",y,c)}else{if(p<cV)return a.formatDistance("xDays",1,c);if(p<Lm){var b=Math.round(p/MS);return a.formatDistance("xDays",b,c)}else if(p<uV)return m=Math.round(p/Lm),a.formatDistance("aboutXMonths",m,c)}if(m=j8(d,u),m<12){var v=Math.round(p/Lm);return a.formatDistance("xMonths",v,c)}else{var x=m%12,w=Math.floor(m/12);return x<3?a.formatDistance("aboutXYears",w,c):x<9?a.formatDistance("overXYears",w,c):a.formatDistance("almostXYears",w+1,c)}}function fV(e,t){return ls(1,arguments),dV(e,Date.now(),t)}const hV=()=>{const{notifications:e,markAsRead:t}=TT();return o.jsxs("div",{className:"bg-white/90 dark:bg-neutral-800/90 backdrop-blur-sm rounded-2xl shadow-card border border-neutral-200/60 dark:border-neutral-700/60 p-6 h-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Recent Notifications"}),o.jsx("button",{className:"text-primary-600 dark:text-primary-400 text-sm font-medium hover:text-primary-700 dark:hover:text-primary-300 transition-colors",children:"View all"})]}),o.jsx("div",{className:"space-y-3",children:e.length>0?e.slice(0,5).map(r=>{if(!r||!r.createdAt)return null;const n=o.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-2xl border transition-colors ${r.readStatus?"bg-neutral-50 border-neutral-100 dark:bg-neutral-800 dark:border-neutral-700":"bg-primary-50/70 border-primary-100 dark:bg-primary-900/30 dark:border-primary-800"}`,children:[o.jsx("div",{className:"p-2 rounded-full bg-primary-100 text-primary-600 dark:bg-primary-900/50 dark:text-primary-300",children:o.jsx(M0,{size:16})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-200",children:r.message}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:fV(new Date(r.createdAt),{addSuffix:!0})})]}),!r.readStatus&&o.jsx("button",{onClick:s=>{r.link&&s.preventDefault(),t(r.id)},className:"text-xs font-medium text-primary-600 dark:text-primary-300 hover:text-primary-700 dark:hover:text-primary-200",children:"Mark as read"})]});return r.link?o.jsx(br,{to:r.link,children:n},r.id):o.jsx("div",{children:n},r.id)}):o.jsxs("div",{className:"text-center py-6 text-neutral-500 dark:text-neutral-400",children:[o.jsx("div",{className:"mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-neutral-100 dark:bg-neutral-700/60",children:o.jsx(M0,{size:24,className:"text-neutral-400 dark:text-neutral-300"})}),o.jsx("p",{className:"text-sm",children:"No new notifications"})]})})]})},pV=({title:e,icon:t,description:r,link:n,stats:s,color:i,id:a})=>o.jsxs(br,{to:n,id:a,className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card hover:shadow-card-hover transition-all p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:`p-3 rounded-xl ${i}`,children:t}),s&&o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-2xl font-semibold text-neutral-900 dark:text-white",children:s.value}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:s.label})]})]}),o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-2",children:e}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:r})]}),mV=(e=[])=>Array.from(new Set(e.map(t=>t.trim()).filter(Boolean))),OS=()=>{var w;const{user:e}=Ot(),{family:t,isLoading:r}=Lr(),n=zn(),[s,i]=g.useState(null),[a,l]=g.useState(!0),[c,u]=g.useState(null),d=g.useMemo(()=>({upcomingEvents:0,pendingTasks:0,unreadMessages:0,activeMembers:0,familyName:(t==null?void 0:t.FamilyName)??null,familyMantra:(t==null?void 0:t.FamilyMantra)??null,familyValues:Array.isArray(t==null?void 0:t.FamilyValues)?[...(t==null?void 0:t.FamilyValues)??[]]:[],leaderboard:[]}),[t==null?void 0:t.FamilyName,t==null?void 0:t.FamilyMantra,t==null?void 0:t.FamilyValues]),f=g.useCallback(async()=>{if(!t){r||l(!1);return}try{l(!0);const k=await g8(t.FamilyID.toString());i(k),u(null)}catch(k){const S=k instanceof Error?k.message:"We had trouble loading the latest dashboard insights.";u(S),i(E=>E??d)}finally{l(!1)}},[t,d,r]);g.useEffect(()=>{r||f()},[f,r]);const h=(w=(s==null?void 0:s.familyName)??(t==null?void 0:t.FamilyName))==null?void 0:w.trim();h?`${h}`:e!=null&&e.fullName,(s==null?void 0:s.familyMantra)??(t==null||t.FamilyMantra);const p=g.useMemo(()=>{const k=s!=null&&s.familyValues&&s.familyValues.length?s.familyValues:(t==null?void 0:t.FamilyValues)??[];return mV(k)},[s==null?void 0:s.familyValues,t==null?void 0:t.FamilyValues]),[m,y]=g.useState(0);g.useEffect(()=>{if(!p.length){y(0);return}y(Math.floor(Math.random()*p.length))},[p]),g.useEffect(()=>{if(p.length<2)return;const k=window.setInterval(()=>{y(S=>(S+1)%p.length)},8e3);return()=>window.clearInterval(k)},[p]),p.length&&p[m];const b=[{title:"Family Calendar",icon:o.jsx(O0,{className:"text-primary-600 dark:text-primary-400",size:24}),description:"View and manage family events and schedules",link:"/calendar",stats:{value:(s==null?void 0:s.upcomingEvents.toString())||"0",label:"Upcoming events"},color:"bg-primary-100 dark:bg-primary-900/30"},{title:"Finance Overview",icon:o.jsx(k2,{className:"text-secondary-600 dark:text-secondary-400",size:24}),description:"Track family finances, expenses and savings",link:"/budget",stats:{value:"$0",label:"Monthly budget"},color:"bg-secondary-100 dark:bg-secondary-900/30",id:"budget-widget"},{title:"Family Members",icon:o.jsx(za,{className:"text-accent-600 dark:text-accent-400",size:24}),description:"Manage family members and permissions",link:"/family",stats:{value:(s==null?void 0:s.activeMembers.toString())||"0",label:"Active members"},color:"bg-accent-100 dark:bg-accent-900/30"},{title:"Shopping Lists",icon:o.jsx(Vf,{className:"text-highlight-teal",size:24}),description:"Organize household shopping and needs",link:"/shopping",stats:{value:"0",label:"Active lists"},color:"bg-highlight-teal/20 dark:bg-highlight-teal/30"}],v=[{title:"My Tasks",icon:o.jsx(P0,{className:"text-primary-600 dark:text-primary-400",size:24}),description:"View and complete your assigned tasks",link:"/tasks",stats:{value:(s==null?void 0:s.pendingTasks.toString())||"0",label:"Pending tasks"},color:"bg-primary-100 dark:bg-primary-900/30",id:"tasks-widget"},{title:"Messages",icon:o.jsx(w2,{className:"text-secondary-600 dark:text-secondary-400",size:24}),description:"Chat with family members",link:"/messages",stats:{value:(s==null?void 0:s.unreadMessages.toString())||"0",label:"Unread messages"},color:"bg-secondary-100 dark:bg-secondary-900/30"},{title:"Journal",icon:o.jsx(y2,{className:"text-accent-600 dark:text-accent-400",size:24}),description:"Write about your day and experiences",link:"/journal",color:"bg-accent-100 dark:bg-accent-900/30"},{title:"Achievements",icon:o.jsx(tu,{className:"text-highlight-teal",size:24}),description:"Track your progress and rewards",link:"/achievements",stats:{value:"0",label:"Points earned"},color:"bg-highlight-teal/20 dark:bg-highlight-teal/30"}],x=(e==null?void 0:e.role)==="parent"?b:v;return t?a?o.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:o.jsx(on,{className:"h-6 w-6 animate-spin text-primary-500"})}):o.jsxs("div",{className:"space-y-6",children:[c&&o.jsxs("div",{className:"rounded-xl border border-warning-200 bg-warning-50 px-4 py-3 text-warning-800 dark:border-warning-400/40 dark:bg-warning-900/30 dark:text-warning-200",children:[o.jsx("p",{className:"font-medium",children:"Some insights are unavailable right now."}),o.jsx("p",{className:"text-sm opacity-80",children:c})]}),o.jsxs("div",{id:"dashboard-title",children:[o.jsxs("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-2",children:["Welcome, ",(e==null?void 0:e.fullName)||"Guest"]}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Here's an overview of your family's activities and important updates"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map(k=>o.jsx(pV,{...k},k.title))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4",children:"Recent Activity"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2 rounded-lg bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400",children:o.jsx(O0,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-neutral-900 dark:text-white",children:"Family dinner scheduled for tomorrow at 7 PM"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"2 hours ago"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2 rounded-lg bg-secondary-100 dark:bg-secondary-900/30 text-secondary-600 dark:text-secondary-400",children:o.jsx(P0,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-neutral-900 dark:text-white",children:"Emma completed homework task"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"4 hours ago"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2 rounded-lg bg-accent-100 dark:bg-accent-900/30 text-accent-600 dark:text-accent-400",children:o.jsx(Vf,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-neutral-900 dark:text-white",children:"New items added to grocery list"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Yesterday"})]})]})]})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsx(hV,{})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Task Completion"}),o.jsx(Y6,{className:"text-success-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-2",children:"0%"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Weekly progress"})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Family Goals"}),o.jsx(tu,{className:"text-warning-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-2",children:"0/0"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Monthly goals achieved"})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Active Members"}),o.jsx(za,{className:"text-primary-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-2",children:(s==null?void 0:s.activeMembers.toString())||"0"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Currently online"})]})]})]}):r?o.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:o.jsx(on,{className:"h-6 w-6 animate-spin text-primary-500"})}):o.jsx(oD,{onFamilyCreated:()=>n("/family")})};var gp,Me,cD,uD,nl,ya,PS,dD,fD,Xf={},hD=[],gV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ci(e,t){for(var r in t)e[r]=t[r];return e}function pD(e){var t=e.parentNode;t&&t.removeChild(e)}function W(e,t,r){var n,s,i,a={};for(i in t)i=="key"?n=t[i]:i=="ref"?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?gp.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return Xd(e,a,n,s,null)}function Xd(e,t,r,n,s){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++cD};return s==null&&Me.vnode!=null&&Me.vnode(i),i}function ni(){return{current:null}}function Yt(e){return e.children}function yV(e,t,r,n,s){var i;for(i in r)i==="children"||i==="key"||i in t||Jf(e,i,null,r[i],n);for(i in t)s&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===t[i]||Jf(e,i,t[i],r[i],n)}function LS(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||gV.test(t)?r:r+"px"}function Jf(e,t,r,n,s){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||LS(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||LS(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n||e.addEventListener(t,i?BS:FS,i):e.removeEventListener(t,i?BS:FS,i);else if(t!=="dangerouslySetInnerHTML"){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,r))}}function FS(e){nl=!0;try{return this.l[e.type+!1](Me.event?Me.event(e):e)}finally{nl=!1}}function BS(e){nl=!0;try{return this.l[e.type+!0](Me.event?Me.event(e):e)}finally{nl=!1}}function xn(e,t){this.props=e,this.context=t}function iu(e,t){if(t==null)return e.__?iu(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?iu(e):null}function mD(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return mD(e)}}function xV(e){nl?setTimeout(e):dD(e)}function ry(e){(!e.__d&&(e.__d=!0)&&ya.push(e)&&!eh.__r++||PS!==Me.debounceRendering)&&((PS=Me.debounceRendering)||xV)(eh)}function eh(){var e,t,r,n,s,i,a,l;for(ya.sort(function(c,u){return c.__v.__b-u.__v.__b});e=ya.shift();)e.__d&&(t=ya.length,n=void 0,s=void 0,a=(i=(r=e).__v).__e,(l=r.__P)&&(n=[],(s=Ci({},i)).__v=i.__v+1,xv(l,i,s,r.__n,l.ownerSVGElement!==void 0,i.__h!=null?[a]:null,n,a??iu(i),i.__h),bD(n,i),i.__e!=a&&mD(i)),ya.length>t&&ya.sort(function(c,u){return c.__v.__b-u.__v.__b}));eh.__r=0}function gD(e,t,r,n,s,i,a,l,c,u){var d,f,h,p,m,y,b,v=n&&n.__k||hD,x=v.length;for(r.__k=[],d=0;d<t.length;d++)if((p=r.__k[d]=(p=t[d])==null||typeof p=="boolean"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?Xd(null,p,null,null,p):Array.isArray(p)?Xd(Yt,{children:p},null,null,null):p.__b>0?Xd(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null){if(p.__=r,p.__b=r.__b+1,(h=v[d])===null||h&&p.key==h.key&&p.type===h.type)v[d]=void 0;else for(f=0;f<x;f++){if((h=v[f])&&p.key==h.key&&p.type===h.type){v[f]=void 0;break}h=null}xv(e,p,h=h||Xf,s,i,a,l,c,u),m=p.__e,(f=p.ref)&&h.ref!=f&&(b||(b=[]),h.ref&&b.push(h.ref,null,p),b.push(f,p.__c||m,p)),m!=null?(y==null&&(y=m),typeof p.type=="function"&&p.__k===h.__k?p.__d=c=yD(p,c,e):c=xD(e,p,h,v,m,c),typeof r.type=="function"&&(r.__d=c)):c&&h.__e==c&&c.parentNode!=e&&(c=iu(h))}for(r.__e=y,d=x;d--;)v[d]!=null&&(typeof r.type=="function"&&v[d].__e!=null&&v[d].__e==r.__d&&(r.__d=vD(n).nextSibling),kD(v[d],v[d]));if(b)for(d=0;d<b.length;d++)wD(b[d],b[++d],b[++d])}function yD(e,t,r){for(var n,s=e.__k,i=0;s&&i<s.length;i++)(n=s[i])&&(n.__=e,t=typeof n.type=="function"?yD(n,t,r):xD(r,n,n,s,n.__e,t));return t}function th(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(r){th(r,t)}):t.push(e)),t}function xD(e,t,r,n,s,i){var a,l,c;if(t.__d!==void 0)a=t.__d,t.__d=void 0;else if(r==null||s!=i||s.parentNode==null)e:if(i==null||i.parentNode!==e)e.appendChild(s),a=null;else{for(l=i,c=0;(l=l.nextSibling)&&c<n.length;c+=1)if(l==s)break e;e.insertBefore(s,i),a=i}return a!==void 0?a:s.nextSibling}function vD(e){var t,r,n;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((r=e.__k[t])&&(n=vD(r)))return n}return null}function xv(e,t,r,n,s,i,a,l,c){var u,d,f,h,p,m,y,b,v,x,w,k,S,E,N,C=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(c=r.__h,l=t.__e=r.__e,t.__h=null,i=[l]),(u=Me.__b)&&u(t);try{e:if(typeof C=="function"){if(b=t.props,v=(u=C.contextType)&&n[u.__c],x=u?v?v.props.value:u.__:n,r.__c?y=(d=t.__c=r.__c).__=d.__E:("prototype"in C&&C.prototype.render?t.__c=d=new C(b,x):(t.__c=d=new xn(b,x),d.constructor=C,d.render=bV),v&&v.sub(d),d.props=b,d.state||(d.state={}),d.context=x,d.__n=n,f=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),C.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ci({},d.__s)),Ci(d.__s,C.getDerivedStateFromProps(b,d.__s))),h=d.props,p=d.state,d.__v=t,f)C.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(C.getDerivedStateFromProps==null&&b!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,x),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,x)===!1||t.__v===r.__v){for(t.__v!==r.__v&&(d.props=b,d.state=d.__s,d.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(T){T&&(T.__=t)}),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,x),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,p,m)})}if(d.context=x,d.props=b,d.__P=e,k=Me.__r,S=0,"prototype"in C&&C.prototype.render){for(d.state=d.__s,d.__d=!1,k&&k(t),u=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do d.__d=!1,k&&k(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++S<25);d.state=d.__s,d.getChildContext!=null&&(n=Ci(Ci({},n),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(m=d.getSnapshotBeforeUpdate(h,p)),N=u!=null&&u.type===Yt&&u.key==null?u.props.children:u,gD(e,Array.isArray(N)?N:[N],t,r,n,s,i,a,l,c),d.base=t.__e,t.__h=null,d.__h.length&&a.push(d),y&&(d.__E=d.__=null),d.__e=!1}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=vV(r.__e,t,r,n,s,i,a,c);(u=Me.diffed)&&u(t)}catch(T){t.__v=null,(c||i!=null)&&(t.__e=l,t.__h=!!c,i[i.indexOf(l)]=null),Me.__e(T,t,r)}}function bD(e,t){Me.__c&&Me.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){Me.__e(n,r.__v)}})}function vV(e,t,r,n,s,i,a,l){var c,u,d,f=r.props,h=t.props,p=t.type,m=0;if(p==="svg"&&(s=!0),i!=null){for(;m<i.length;m++)if((c=i[m])&&"setAttribute"in c==!!p&&(p?c.localName===p:c.nodeType===3)){e=c,i[m]=null;break}}if(e==null){if(p===null)return document.createTextNode(h);e=s?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,h.is&&h),i=null,l=!1}if(p===null)f===h||l&&e.data===h||(e.data=h);else{if(i=i&&gp.call(e.childNodes),u=(f=r.props||Xf).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,!l){if(i!=null)for(f={},m=0;m<e.attributes.length;m++)f[e.attributes[m].name]=e.attributes[m].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(yV(e,h,f,s,l),d)t.__k=[];else if(m=t.props.children,gD(e,Array.isArray(m)?m:[m],t,r,n,s&&p!=="foreignObject",i,a,i?i[0]:r.__k&&iu(r,0),l),i!=null)for(m=i.length;m--;)i[m]!=null&&pD(i[m]);l||("value"in h&&(m=h.value)!==void 0&&(m!==e.value||p==="progress"&&!m||p==="option"&&m!==f.value)&&Jf(e,"value",m,f.value,!1),"checked"in h&&(m=h.checked)!==void 0&&m!==e.checked&&Jf(e,"checked",m,f.checked,!1))}return e}function wD(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){Me.__e(n,r)}}function kD(e,t,r){var n,s;if(Me.unmount&&Me.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||wD(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){Me.__e(i,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(s=0;s<n.length;s++)n[s]&&kD(n[s],t,r||typeof e.type!="function");r||e.__e==null||pD(e.__e),e.__=e.__e=e.__d=void 0}function bV(e,t,r){return this.constructor(e,r)}function au(e,t,r){var n,s,i;Me.__&&Me.__(e,t),s=(n=!1)?null:t.__k,i=[],xv(t,e=t.__k=W(Yt,null,[e]),s||Xf,Xf,t.ownerSVGElement!==void 0,s?null:t.firstChild?gp.call(t.childNodes):null,i,s?s.__e:t.firstChild,n),bD(i,e)}function wV(e,t){var r={__c:t="__cC"+fD++,__:e,Consumer:function(n,s){return n.children(s)},Provider:function(n){var s,i;return this.getChildContext||(s=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&s.some(function(l){l.__e=!0,ry(l)})},this.sub=function(a){s.push(a);var l=a.componentWillUnmount;a.componentWillUnmount=function(){s.splice(s.indexOf(a),1),l&&l.call(a)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}gp=hD.slice,Me={__e:function(e,t,r,n){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,n||{}),a=s.__d),a)return s.__E=s}catch(l){e=l}throw e}},cD=0,uD=function(e){return e!=null&&e.constructor===void 0},nl=!1,xn.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ci({},this.state),typeof e=="function"&&(e=e(Ci({},r),this.props)),e&&Ci(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),ry(this))},xn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ry(this))},xn.prototype.render=Yt,ya=[],dD=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,eh.__r=0,fD=0;var ys,Fm,zS,SD=[],Bm=[],US=Me.__b,HS=Me.__r,VS=Me.diffed,WS=Me.__c,$S=Me.unmount;function kV(){for(var e;e=SD.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Jd),e.__H.__h.forEach(ny),e.__H.__h=[]}catch(t){e.__H.__h=[],Me.__e(t,e.__v)}}Me.__b=function(e){ys=null,US&&US(e)},Me.__r=function(e){HS&&HS(e);var t=(ys=e.__c).__H;t&&(Fm===ys?(t.__h=[],ys.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=Bm,r.__N=r.i=void 0})):(t.__h.forEach(Jd),t.__h.forEach(ny),t.__h=[])),Fm=ys},Me.diffed=function(e){VS&&VS(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(SD.push(t)!==1&&zS===Me.requestAnimationFrame||((zS=Me.requestAnimationFrame)||SV)(kV)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==Bm&&(r.__=r.__V),r.i=void 0,r.__V=Bm})),Fm=ys=null},Me.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Jd),r.__h=r.__h.filter(function(n){return!n.__||ny(n)})}catch(n){t.some(function(s){s.__h&&(s.__h=[])}),t=[],Me.__e(n,r.__v)}}),WS&&WS(e,t)},Me.unmount=function(e){$S&&$S(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Jd(n)}catch(s){t=s}}),r.__H=void 0,t&&Me.__e(t,r.__v))};var YS=typeof requestAnimationFrame=="function";function SV(e){var t,r=function(){clearTimeout(n),YS&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);YS&&(t=requestAnimationFrame(r))}function Jd(e){var t=ys,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),ys=t}function ny(e){var t=ys;e.__c=e.__(),ys=t}function EV(e,t){for(var r in t)e[r]=t[r];return e}function GS(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function qS(e){this.props=e}(qS.prototype=new xn).isPureReactComponent=!0,qS.prototype.shouldComponentUpdate=function(e,t){return GS(this.props,e)||GS(this.state,t)};var KS=Me.__b;Me.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),KS&&KS(e)};var NV=Me.__e;Me.__e=function(e,t,r,n){if(e.then){for(var s,i=t;i=i.__;)if((s=i.__c)&&s.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),s.__c(e,t)}NV(e,t,r,n)};var QS=Me.unmount;function ED(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=EV({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return ED(n,t,r)})),e}function ND(e,t,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return ND(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}function zm(){this.__u=0,this.t=null,this.__b=null}function CD(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function yd(){this.u=null,this.o=null}Me.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),QS&&QS(e)},(zm.prototype=new xn).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var s=CD(n.__v),i=!1,a=function(){i||(i=!0,r.__R=null,s?s(l):l())};r.__R=a;var l=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=ND(u,u.__c.__P,u.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.t.pop();)d.forceUpdate()}},c=t.__h===!0;n.__u++||c||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},zm.prototype.componentWillUnmount=function(){this.t=[]},zm.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=ED(this.__b,r,n.__O=n.__P)}this.__b=null}var s=t.__a&&W(Yt,null,e.fallback);return s&&(s.__h=null),[W(Yt,null,t.__a?null:e.children),s]};var ZS=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};function CV(e){return this.getChildContext=function(){return e.context},e.children}function jV(e){var t=this,r=e.i;t.componentWillUnmount=function(){au(null,t.l),t.l=null,t.i=null},t.i&&t.i!==r&&t.componentWillUnmount(),e.__v?(t.l||(t.i=r,t.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,s){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),au(W(CV,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function TV(e,t){var r=W(jV,{__v:e,i:t});return r.containerInfo=t,r}(yd.prototype=new xn).__a=function(e){var t=this,r=CD(t.__v),n=t.o.get(e);return n[0]++,function(s){var i=function(){t.props.revealOrder?(n.push(s),ZS(t,e,n)):s()};r?r(i):i()}},yd.prototype.render=function(e){this.u=null,this.o=new Map;var t=th(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},yd.prototype.componentDidUpdate=yd.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){ZS(e,r,t)})};var AV=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,DV=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,RV=typeof document<"u",_V=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};xn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(xn.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var XS=Me.event;function IV(){}function MV(){return this.cancelBubble}function OV(){return this.defaultPrevented}Me.event=function(e){return XS&&(e=XS(e)),e.persist=IV,e.isPropagationStopped=MV,e.isDefaultPrevented=OV,e.nativeEvent=e};var JS={configurable:!0,get:function(){return this.class}},e1=Me.vnode;Me.vnode=function(e){var t=e.type,r=e.props,n=r;if(typeof t=="string"){var s=t.indexOf("-")===-1;for(var i in n={},r){var a=r[i];RV&&i==="children"&&t==="noscript"||i==="value"&&"defaultValue"in r&&a==null||(i==="defaultValue"&&"value"in r&&r.value==null?i="value":i==="download"&&a===!0?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!_V(r.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():s&&DV.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),n[i]&&(i="oninputCapture")),n[i]=a)}t=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=th(r.children).forEach(function(l){l.props.selected=n.value.indexOf(l.props.value)!=-1})),t=="select"&&n.defaultValue!=null&&(n.value=th(r.children).forEach(function(l){l.props.selected=n.multiple?n.defaultValue.indexOf(l.props.value)!=-1:n.defaultValue==l.props.value})),e.props=n,r.class!=r.className&&(JS.enumerable="className"in r,r.className!=null&&(n.class=r.className),Object.defineProperty(n,"className",JS))}e.$$typeof=AV,e1&&e1(e)};var t1=Me.__r;Me.__r=function(e){t1&&t1(e),e.__c};const jD=[],sy=new Map;function TD(e){jD.push(e),sy.forEach(t=>{DD(t,e)})}function PV(e){e.isConnected&&e.getRootNode&&AD(e.getRootNode())}function AD(e){let t=sy.get(e);if(!t||!t.isConnected){if(t=e.querySelector("style[data-fullcalendar]"),!t){t=document.createElement("style"),t.setAttribute("data-fullcalendar","");const r=FV();r&&(t.nonce=r);const n=e===document?document.head:e,s=e===document?n.querySelector("script,link[rel=stylesheet],link[as=style],style"):n.firstChild;n.insertBefore(t,s)}sy.set(e,t),LV(t)}}function LV(e){for(const t of jD)DD(e,t)}function DD(e,t){const{sheet:r}=e,n=r.cssRules.length;t.split("}").forEach((s,i)=>{s=s.trim(),s&&r.insertRule(s+"}",n+i)})}let Um;function FV(){return Um===void 0&&(Um=BV()),Um}function BV(){const e=document.querySelector('meta[name="csp-nonce"]');if(e&&e.hasAttribute("content"))return e.getAttribute("content");const t=document.querySelector("script[nonce]");return t&&t.nonce||""}typeof document<"u"&&AD(document);var zV=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';TD(zV);class vv{constructor(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),t==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))}pause(t=""){let{pauseDepths:r}=this;r[t]=(r[t]||0)+1,this.clearTimeout()}resume(t="",r){let{pauseDepths:n}=this;t in n&&(r?delete n[t]:(n[t]-=1,n[t]<=0&&delete n[t]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function bv(e){e.parentNode&&e.parentNode.removeChild(e)}function Ir(e,t){if(e.closest)return e.closest(t);if(!document.documentElement.contains(e))return null;do{if(UV(e,t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}function UV(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector).call(e,t)}function HV(e,t){let r=e instanceof HTMLElement?[e]:e,n=[];for(let s=0;s<r.length;s+=1){let i=r[s].querySelectorAll(t);for(let a=0;a<i.length;a+=1)n.push(i[a])}return n}const VV=/(top|left|right|bottom|width|height)$/i;function wc(e,t){for(let r in t)RD(e,r,t[r])}function RD(e,t,r){r==null?e.style[t]="":typeof r=="number"&&VV.test(t)?e.style[t]=`${r}px`:e.style[t]=r}function _D(e){var t,r;return(r=(t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])!==null&&r!==void 0?r:e.target}let r1=0;function yp(){return r1+=1,"fc-dom-"+r1}function xp(e){e.preventDefault()}function WV(e,t){return r=>{let n=Ir(r.target,e);n&&t.call(n,r,n)}}function ID(e,t,r,n){let s=WV(r,n);return e.addEventListener(t,s),()=>{e.removeEventListener(t,s)}}function $V(e,t,r,n){let s;return ID(e,"mouseover",t,(i,a)=>{if(a!==s){s=a,r(i,a);let l=c=>{s=null,n(c,a),a.removeEventListener("mouseleave",l)};a.addEventListener("mouseleave",l)}})}const n1=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function YV(e,t){let r=n=>{t(n),n1.forEach(s=>{e.removeEventListener(s,r)})};n1.forEach(n=>{e.addEventListener(n,r)})}function MD(e){return Object.assign({onClick:e},OD(e))}function OD(e){return{tabIndex:0,onKeyDown(t){(t.key==="Enter"||t.key===" ")&&(e(t),t.preventDefault())}}}let s1=0;function Xa(){return s1+=1,String(s1)}function wv(){document.body.classList.add("fc-not-allowed")}function kv(){document.body.classList.remove("fc-not-allowed")}function GV(e){e.style.userSelect="none",e.style.webkitUserSelect="none",e.addEventListener("selectstart",xp)}function qV(e){e.style.userSelect="",e.style.webkitUserSelect="",e.removeEventListener("selectstart",xp)}function KV(e){e.addEventListener("contextmenu",xp)}function QV(e){e.removeEventListener("contextmenu",xp)}function ZV(e){let t=[],r=[],n,s;for(typeof e=="string"?r=e.split(/\s*,\s*/):typeof e=="function"?r=[e]:Array.isArray(e)&&(r=e),n=0;n<r.length;n+=1)s=r[n],typeof s=="string"?t.push(s.charAt(0)==="-"?{field:s.substring(1),order:-1}:{field:s,order:1}):typeof s=="function"&&t.push({func:s});return t}function XV(e,t,r){let n,s;for(n=0;n<r.length;n+=1)if(s=JV(e,t,r[n]),s)return s;return 0}function JV(e,t,r){return r.func?r.func(e,t):e9(e[r.field],t[r.field])*(r.order||1)}function e9(e,t){return!e&&!t?0:t==null?-1:e==null?1:typeof e=="string"||typeof t=="string"?String(e).localeCompare(String(t)):e-t}function Hm(e,t){let r=String(e);return"000".substr(0,t-r.length)+r}function kc(e,t,r){return typeof e=="function"?e(...t):typeof e=="string"?t.reduce((n,s,i)=>n.replace("$"+i,s||""),e):r}function t9(e,t){return e-t}function Vm(e){return e%1===0}function r9(e){let t=e.querySelector(".fc-scrollgrid-shrink-frame"),r=e.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!r)throw new Error("needs fc-scrollgrid-shrink-cushion className");return e.getBoundingClientRect().width-t.getBoundingClientRect().width+r.getBoundingClientRect().width}const n9=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function ft(e,t){return typeof e=="string"?s9(e):typeof e=="object"&&e?i1(e):typeof e=="number"?i1({[t||"milliseconds"]:e}):null}function s9(e){let t=n9.exec(e);if(t){let r=t[1]?-1:1;return{years:0,months:0,days:r*(t[2]?parseInt(t[2],10):0),milliseconds:r*((t[3]?parseInt(t[3],10):0)*60*60*1e3+(t[4]?parseInt(t[4],10):0)*60*1e3+(t[5]?parseInt(t[5],10):0)*1e3+(t[6]?parseInt(t[6],10):0))}}return null}function i1(e){let t={years:e.years||e.year||0,months:e.months||e.month||0,days:e.days||e.day||0,milliseconds:(e.hours||e.hour||0)*60*60*1e3+(e.minutes||e.minute||0)*60*1e3+(e.seconds||e.second||0)*1e3+(e.milliseconds||e.millisecond||e.ms||0)},r=e.weeks||e.week;return r&&(t.days+=r*7,t.specifiedWeeks=!0),t}function i9(e,t){return e.years===t.years&&e.months===t.months&&e.days===t.days&&e.milliseconds===t.milliseconds}function a9(e,t){return{years:e.years-t.years,months:e.months-t.months,days:e.days-t.days,milliseconds:e.milliseconds-t.milliseconds}}function o9(e){return Lo(e)/365}function l9(e){return Lo(e)/30}function Lo(e){return ou(e)/864e5}function ou(e){return e.years*(365*864e5)+e.months*(30*864e5)+e.days*864e5+e.milliseconds}function iy(e){let t=e.milliseconds;if(t){if(t%1e3!==0)return{unit:"millisecond",value:t};if(t%(1e3*60)!==0)return{unit:"second",value:t/1e3};if(t%(1e3*60*60)!==0)return{unit:"minute",value:t/(1e3*60)};if(t)return{unit:"hour",value:t/(1e3*60*60)}}return e.days?e.specifiedWeeks&&e.days%7===0?{unit:"week",value:e.days/7}:{unit:"day",value:e.days}:e.months?{unit:"month",value:e.months}:e.years?{unit:"year",value:e.years}:{unit:"millisecond",value:0}}function qi(e,t,r){if(e===t)return!0;let n=e.length,s;if(n!==t.length)return!1;for(s=0;s<n;s+=1)if(!(r?r(e[s],t[s]):e[s]===t[s]))return!1;return!0}const c9=["sun","mon","tue","wed","thu","fri","sat"];function a1(e,t){let r=ji(e);return r[2]+=t*7,en(r)}function or(e,t){let r=ji(e);return r[2]+=t,en(r)}function Ki(e,t){let r=ji(e);return r[6]+=t,en(r)}function u9(e,t){return xl(e,t)/7}function xl(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60*24)}function d9(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60)}function f9(e,t){return(t.valueOf()-e.valueOf())/(1e3*60)}function h9(e,t){return(t.valueOf()-e.valueOf())/1e3}function p9(e,t){let r=It(e),n=It(t);return{years:0,months:0,days:Math.round(xl(r,n)),milliseconds:t.valueOf()-n.valueOf()-(e.valueOf()-r.valueOf())}}function m9(e,t){let r=rh(e,t);return r!==null&&r%7===0?r/7:null}function rh(e,t){return Ti(e)===Ti(t)?Math.round(xl(e,t)):null}function It(e){return en([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()])}function g9(e){return en([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()])}function y9(e){return en([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()])}function x9(e){return en([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()])}function v9(e,t,r){let n=e.getUTCFullYear(),s=Wm(e,n,t,r);if(s<1)return Wm(e,n-1,t,r);let i=Wm(e,n+1,t,r);return i>=1?Math.min(s,i):s}function Wm(e,t,r,n){let s=en([t,0,1+b9(t,r,n)]),i=It(e),a=Math.round(xl(s,i));return Math.floor(a/7)+1}function b9(e,t,r){let n=7+t-r;return-((7+en([e,0,n]).getUTCDay()-t)%7)+n-1}function o1(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}function l1(e){return new Date(e[0],e[1]||0,e[2]==null?1:e[2],e[3]||0,e[4]||0,e[5]||0)}function ji(e){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}function en(e){return e.length===1&&(e=e.concat([0])),new Date(Date.UTC(...e))}function PD(e){return!isNaN(e.valueOf())}function Ti(e){return e.getUTCHours()*1e3*60*60+e.getUTCMinutes()*1e3*60+e.getUTCSeconds()*1e3+e.getUTCMilliseconds()}function w9(e,t,r=!1){let n=e.toISOString();return n=n.replace(".000",""),r&&(n=n.replace("T00:00:00Z","")),n.length>10&&(t==null?n=n.replace("Z",""):t!==0&&(n=n.replace("Z",Ev(t,!0)))),n}function Sv(e){return e.toISOString().replace(/T.*$/,"")}function k9(e){return e.toISOString().match(/^\d{4}-\d{2}/)[0]}function Ev(e,t=!1){let r=e<0?"-":"+",n=Math.abs(e),s=Math.floor(n/60),i=Math.round(n%60);return t?`${r+Hm(s,2)}:${Hm(i,2)}`:`GMT${r}${s}${i?`:${Hm(i,2)}`:""}`}function ht(e,t,r){let n,s;return function(...i){if(!n)s=e.apply(this,i);else if(!qi(n,i)){let a=e.apply(this,i);(!t||!t(a,s))&&(s=a)}return n=i,s}}function ef(e,t,r){let n,s;return i=>(n?ns(n,i)||(s=e.call(this,i)):s=e.call(this,i),n=i,s)}const $m={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},nh={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},xd=/\s*([ap])\.?m\.?/i,S9=/,/g,E9=/\s+/g,N9=/\u200e/g,C9=/UTC|GMT/;class j9{constructor(t){let r={},n={},s=9;for(let i in t)i in $m?(n[i]=t[i],$m[i]<9&&(s=Math.min($m[i],s))):(r[i]=t[i],i in nh&&(s=Math.min(nh[i],s)));this.standardDateProps=r,this.extendedSettings=n,this.smallestUnitNum=s,this.buildFormattingFunc=ht(c1)}format(t,r){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,r)(t)}formatRange(t,r,n,s){let{standardDateProps:i,extendedSettings:a}=this,l=I9(t.marker,r.marker,n.calendarSystem);if(!l)return this.format(t,n);let c=l;c>1&&(i.year==="numeric"||i.year==="2-digit")&&(i.month==="numeric"||i.month==="2-digit")&&(i.day==="numeric"||i.day==="2-digit")&&(c=1);let u=this.format(t,n),d=this.format(r,n);if(u===d)return u;let f=M9(i,c),h=c1(f,a,n),p=h(t),m=h(r),y=O9(u,p,d,m),b=a.separator||s||n.defaultSeparator||"";return y?y.before+p+b+m+y.after:u+b+d}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function c1(e,t,r){let n=Object.keys(e).length;return n===1&&e.timeZoneName==="short"?s=>Ev(s.timeZoneOffset):n===0&&t.week?s=>_9(r.computeWeekNumber(s.marker),r.weekText,r.weekTextLong,r.locale,t.week):T9(e,t,r)}function T9(e,t,r){e=Object.assign({},e),t=Object.assign({},t),A9(e,t),e.timeZone="UTC";let n=new Intl.DateTimeFormat(r.locale.codes,e),s;if(t.omitZeroMinute){let i=Object.assign({},e);delete i.minute,s=new Intl.DateTimeFormat(r.locale.codes,i)}return i=>{let{marker:a}=i,l;s&&!a.getUTCMinutes()?l=s:l=n;let c=l.format(a);return D9(c,i,e,t,r)}}function A9(e,t){e.timeZoneName&&(e.hour||(e.hour="2-digit"),e.minute||(e.minute="2-digit")),e.timeZoneName==="long"&&(e.timeZoneName="short"),t.omitZeroMinute&&(e.second||e.millisecond)&&delete t.omitZeroMinute}function D9(e,t,r,n,s){return e=e.replace(N9,""),r.timeZoneName==="short"&&(e=R9(e,s.timeZone==="UTC"||t.timeZoneOffset==null?"UTC":Ev(t.timeZoneOffset))),n.omitCommas&&(e=e.replace(S9,"").trim()),n.omitZeroMinute&&(e=e.replace(":00","")),n.meridiem===!1?e=e.replace(xd,"").trim():n.meridiem==="narrow"?e=e.replace(xd,(i,a)=>a.toLocaleLowerCase()):n.meridiem==="short"?e=e.replace(xd,(i,a)=>`${a.toLocaleLowerCase()}m`):n.meridiem==="lowercase"&&(e=e.replace(xd,i=>i.toLocaleLowerCase())),e=e.replace(E9," "),e=e.trim(),e}function R9(e,t){let r=!1;return e=e.replace(C9,()=>(r=!0,t)),r||(e+=` ${t}`),e}function _9(e,t,r,n,s){let i=[];return s==="long"?i.push(r):(s==="short"||s==="narrow")&&i.push(t),(s==="long"||s==="short")&&i.push(" "),i.push(n.simpleNumberFormat.format(e)),n.options.direction==="rtl"&&i.reverse(),i.join("")}function I9(e,t,r){return r.getMarkerYear(e)!==r.getMarkerYear(t)?5:r.getMarkerMonth(e)!==r.getMarkerMonth(t)?4:r.getMarkerDay(e)!==r.getMarkerDay(t)?2:Ti(e)!==Ti(t)?1:0}function M9(e,t){let r={};for(let n in e)(!(n in nh)||nh[n]<=t)&&(r[n]=e[n]);return r}function O9(e,t,r,n){let s=0;for(;s<e.length;){let i=e.indexOf(t,s);if(i===-1)break;let a=e.substr(0,i);s=i+t.length;let l=e.substr(s),c=0;for(;c<r.length;){let u=r.indexOf(n,c);if(u===-1)break;let d=r.substr(0,u);c=u+n.length;let f=r.substr(c);if(a===d&&l===f)return{before:a,after:l}}}return null}function u1(e,t){let r=t.markerToArray(e.marker);return{marker:e.marker,timeZoneOffset:e.timeZoneOffset,array:r,year:r[0],month:r[1],day:r[2],hour:r[3],minute:r[4],second:r[5],millisecond:r[6]}}function sh(e,t,r,n){let s=u1(e,r.calendarSystem),i=t?u1(t,r.calendarSystem):null;return{date:s,start:s,end:i,timeZone:r.timeZone,localeCodes:r.locale.codes,defaultSeparator:n||r.defaultSeparator}}class P9{constructor(t){this.cmdStr=t}format(t,r,n){return r.cmdFormatter(this.cmdStr,sh(t,null,r,n))}formatRange(t,r,n,s){return n.cmdFormatter(this.cmdStr,sh(t,r,n,s))}}class L9{constructor(t){this.func=t}format(t,r,n){return this.func(sh(t,null,r,n))}formatRange(t,r,n,s){return this.func(sh(t,r,n,s))}}function hr(e){return typeof e=="object"&&e?new j9(e):typeof e=="string"?new P9(e):typeof e=="function"?new L9(e):null}const d1={navLinkDayClick:V,navLinkWeekClick:V,duration:ft,bootstrapFontAwesome:V,buttonIcons:V,customButtons:V,defaultAllDayEventDuration:ft,defaultTimedEventDuration:ft,nextDayThreshold:ft,scrollTime:ft,scrollTimeReset:Boolean,slotMinTime:ft,slotMaxTime:ft,dayPopoverFormat:hr,slotDuration:ft,snapDuration:ft,headerToolbar:V,footerToolbar:V,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:hr,dayHeaderClassNames:V,dayHeaderContent:V,dayHeaderDidMount:V,dayHeaderWillUnmount:V,dayCellClassNames:V,dayCellContent:V,dayCellDidMount:V,dayCellWillUnmount:V,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:V,weekNumbers:Boolean,weekNumberClassNames:V,weekNumberContent:V,weekNumberDidMount:V,weekNumberWillUnmount:V,editable:Boolean,viewClassNames:V,viewDidMount:V,viewWillUnmount:V,nowIndicator:Boolean,nowIndicatorSnap:V,nowIndicatorClassNames:V,nowIndicatorContent:V,nowIndicatorDidMount:V,nowIndicatorWillUnmount:V,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:V,locale:V,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:V,eventOrder:ZV,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:V,contentHeight:V,direction:String,weekNumberFormat:hr,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:V,initialDate:V,now:V,eventDataTransform:V,stickyHeaderDates:V,stickyFooterScrollbar:V,viewHeight:V,defaultAllDay:Boolean,eventSourceFailure:V,eventSourceSuccess:V,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:V,eventConstraint:V,eventAllow:V,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:V,eventContent:V,eventDidMount:V,eventWillUnmount:V,selectConstraint:V,selectOverlap:V,selectAllow:V,droppable:Boolean,unselectCancel:String,slotLabelFormat:V,slotLaneClassNames:V,slotLaneContent:V,slotLaneDidMount:V,slotLaneWillUnmount:V,slotLabelClassNames:V,slotLabelContent:V,slotLabelDidMount:V,slotLabelWillUnmount:V,dayMaxEvents:V,dayMaxEventRows:V,dayMinWidth:Number,slotLabelInterval:ft,allDayText:String,allDayClassNames:V,allDayContent:V,allDayDidMount:V,allDayWillUnmount:V,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:hr,rerenderDelay:Number,moreLinkText:V,moreLinkHint:V,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:V,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:ft,hiddenDays:V,fixedWeekCount:Boolean,validRange:V,visibleRange:V,titleFormat:V,eventInteractive:Boolean,noEventsText:String,viewHint:V,navLinkHint:V,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:V,moreLinkClassNames:V,moreLinkContent:V,moreLinkDidMount:V,moreLinkWillUnmount:V,monthStartFormat:hr,handleCustomRendering:V,customRenderingMetaMap:V,customRenderingReplaces:Boolean},Sc={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},f1={datesSet:V,eventsSet:V,eventAdd:V,eventChange:V,eventRemove:V,windowResize:V,eventClick:V,eventMouseEnter:V,eventMouseLeave:V,select:V,unselect:V,loading:V,_unmount:V,_beforeprint:V,_afterprint:V,_noEventDrop:V,_noEventResize:V,_resize:V,_scrollRequest:V},h1={buttonText:V,buttonHints:V,views:V,plugins:V,initialEvents:V,events:V,eventSources:V},pa={headerToolbar:ma,footerToolbar:ma,buttonText:ma,buttonHints:ma,buttonIcons:ma,dateIncrement:ma,plugins:vd,events:vd,eventSources:vd,resources:vd};function ma(e,t){return typeof e=="object"&&typeof t=="object"&&e&&t?ns(e,t):e===t}function vd(e,t){return Array.isArray(e)&&Array.isArray(t)?qi(e,t):e===t}const F9={type:String,component:V,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:V,usesMinMaxTime:Boolean,classNames:V,content:V,didMount:V,willUnmount:V};function Ym(e){return Cv(e,pa)}function Nv(e,t){let r={},n={};for(let s in t)s in e&&(r[s]=t[s](e[s]));for(let s in e)s in t||(n[s]=e[s]);return{refined:r,extra:n}}function V(e){return e}const{hasOwnProperty:ih}=Object.prototype;function Cv(e,t){let r={};if(t){for(let n in t)if(t[n]===ma){let s=[];for(let i=e.length-1;i>=0;i-=1){let a=e[i][n];if(typeof a=="object"&&a)s.unshift(a);else if(a!==void 0){r[n]=a;break}}s.length&&(r[n]=Cv(s))}}for(let n=e.length-1;n>=0;n-=1){let s=e[n];for(let i in s)i in r||(r[i]=s[i])}return r}function Ha(e,t){let r={};for(let n in e)t(e[n],n)&&(r[n]=e[n]);return r}function Ja(e,t){let r={};for(let n in e)r[n]=t(e[n],n);return r}function LD(e){let t={};for(let r of e)t[r]=!0;return t}function jv(e){let t=[];for(let r in e)t.push(e[r]);return t}function ns(e,t){if(e===t)return!0;for(let r in e)if(ih.call(e,r)&&!(r in t))return!1;for(let r in t)if(ih.call(t,r)&&e[r]!==t[r])return!1;return!0}const B9=/^on[A-Z]/;function z9(e,t){const r=U9(e,t);for(let n of r)if(!B9.test(n))return!1;return!0}function U9(e,t){let r=[];for(let n in e)ih.call(e,n)&&(n in t||r.push(n));for(let n in t)ih.call(t,n)&&e[n]!==t[n]&&r.push(n);return r}function Gm(e,t,r={}){if(e===t)return!0;for(let n in t)if(!(n in e&&H9(e[n],t[n],r[n])))return!1;for(let n in e)if(!(n in t))return!1;return!0}function H9(e,t,r){return e===t||r===!0?!0:r?r(e,t):!1}function V9(e,t=0,r,n=1){let s=[];r==null&&(r=Object.keys(e).length);for(let i=t;i<r;i+=n){let a=e[i];a!==void 0&&s.push(a)}return s}let FD={};function W9(e,t){FD[e]=t}function $9(e){return new FD[e]}class Y9{getMarkerYear(t){return t.getUTCFullYear()}getMarkerMonth(t){return t.getUTCMonth()}getMarkerDay(t){return t.getUTCDate()}arrayToMarker(t){return en(t)}markerToArray(t){return ji(t)}}W9("gregory",Y9);const G9=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function vp(e){let t=G9.exec(e);if(t){let r=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?+`0.${t[12]}`*1e3:0));if(PD(r)){let n=null;return t[13]&&(n=(t[15]==="-"?-1:1)*(Number(t[16]||0)*60+Number(t[18]||0))),{marker:r,isTimeUnspecified:!t[6],timeZoneOffset:n}}}return null}class q9{constructor(t){let r=this.timeZone=t.timeZone,n=r!=="local"&&r!=="UTC";t.namedTimeZoneImpl&&n&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(r)),this.canComputeOffset=!!(!n||this.namedTimeZoneImpl),this.calendarSystem=$9(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,t.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof t.firstDay=="number"&&(this.weekDow=t.firstDay),typeof t.weekNumberCalculation=="function"&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=t.weekText!=null?t.weekText:t.locale.options.weekText,this.weekTextLong=(t.weekTextLong!=null?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}createMarker(t){let r=this.createMarkerMeta(t);return r===null?null:r.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):en(o1(new Date))}createMarkerMeta(t){if(typeof t=="string")return this.parse(t);let r=null;return typeof t=="number"?r=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(r=this.timestampToMarker(t))):Array.isArray(t)&&(r=en(t)),r===null||!PD(r)?null:{marker:r,isTimeUnspecified:!1,forcedTzo:null}}parse(t){let r=vp(t);if(r===null)return null;let{marker:n}=r,s=null;return r.timeZoneOffset!==null&&(this.canComputeOffset?n=this.timestampToMarker(n.valueOf()-r.timeZoneOffset*60*1e3):s=r.timeZoneOffset),{marker:n,isTimeUnspecified:r.isTimeUnspecified,forcedTzo:s}}getYear(t){return this.calendarSystem.getMarkerYear(t)}getMonth(t){return this.calendarSystem.getMarkerMonth(t)}getDay(t){return this.calendarSystem.getMarkerDay(t)}add(t,r){let n=this.calendarSystem.markerToArray(t);return n[0]+=r.years,n[1]+=r.months,n[2]+=r.days,n[6]+=r.milliseconds,this.calendarSystem.arrayToMarker(n)}subtract(t,r){let n=this.calendarSystem.markerToArray(t);return n[0]-=r.years,n[1]-=r.months,n[2]-=r.days,n[6]-=r.milliseconds,this.calendarSystem.arrayToMarker(n)}addYears(t,r){let n=this.calendarSystem.markerToArray(t);return n[0]+=r,this.calendarSystem.arrayToMarker(n)}addMonths(t,r){let n=this.calendarSystem.markerToArray(t);return n[1]+=r,this.calendarSystem.arrayToMarker(n)}diffWholeYears(t,r){let{calendarSystem:n}=this;return Ti(t)===Ti(r)&&n.getMarkerDay(t)===n.getMarkerDay(r)&&n.getMarkerMonth(t)===n.getMarkerMonth(r)?n.getMarkerYear(r)-n.getMarkerYear(t):null}diffWholeMonths(t,r){let{calendarSystem:n}=this;return Ti(t)===Ti(r)&&n.getMarkerDay(t)===n.getMarkerDay(r)?n.getMarkerMonth(r)-n.getMarkerMonth(t)+(n.getMarkerYear(r)-n.getMarkerYear(t))*12:null}greatestWholeUnit(t,r){let n=this.diffWholeYears(t,r);return n!==null?{unit:"year",value:n}:(n=this.diffWholeMonths(t,r),n!==null?{unit:"month",value:n}:(n=m9(t,r),n!==null?{unit:"week",value:n}:(n=rh(t,r),n!==null?{unit:"day",value:n}:(n=d9(t,r),Vm(n)?{unit:"hour",value:n}:(n=f9(t,r),Vm(n)?{unit:"minute",value:n}:(n=h9(t,r),Vm(n)?{unit:"second",value:n}:{unit:"millisecond",value:r.valueOf()-t.valueOf()}))))))}countDurationsBetween(t,r,n){let s;return n.years&&(s=this.diffWholeYears(t,r),s!==null)?s/o9(n):n.months&&(s=this.diffWholeMonths(t,r),s!==null)?s/l9(n):n.days&&(s=rh(t,r),s!==null)?s/Lo(n):(r.valueOf()-t.valueOf())/ou(n)}startOf(t,r){return r==="year"?this.startOfYear(t):r==="month"?this.startOfMonth(t):r==="week"?this.startOfWeek(t):r==="day"?It(t):r==="hour"?g9(t):r==="minute"?y9(t):r==="second"?x9(t):null}startOfYear(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])}startOfMonth(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])}startOfWeek(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):v9(t,this.weekDow,this.weekDoy)}format(t,r,n={}){return r.format({marker:t,timeZoneOffset:n.forcedTzo!=null?n.forcedTzo:this.offsetForMarker(t)},this)}formatRange(t,r,n,s={}){return s.isEndExclusive&&(r=Ki(r,-1)),n.formatRange({marker:t,timeZoneOffset:s.forcedStartTzo!=null?s.forcedStartTzo:this.offsetForMarker(t)},{marker:r,timeZoneOffset:s.forcedEndTzo!=null?s.forcedEndTzo:this.offsetForMarker(r)},this,s.defaultSeparator)}formatIso(t,r={}){let n=null;return r.omitTimeZoneOffset||(r.forcedTzo!=null?n=r.forcedTzo:n=this.offsetForMarker(t)),w9(t,n,r.omitTime)}timestampToMarker(t){return this.timeZone==="local"?en(o1(new Date(t))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(t):en(this.namedTimeZoneImpl.timestampToArray(t))}offsetForMarker(t){return this.timeZone==="local"?-l1(ji(t)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(ji(t)):null}toDate(t,r){return this.timeZone==="local"?l1(ji(t)):this.timeZone==="UTC"?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-this.namedTimeZoneImpl.offsetForArray(ji(t))*1e3*60):new Date(t.valueOf()-(r||0))}}class Lu{constructor(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}setIconOverride(t){let r,n;if(typeof t=="object"&&t){r=Object.assign({},this.iconClasses);for(n in t)r[n]=this.applyIconOverridePrefix(t[n]);this.iconClasses=r}else t===!1&&(this.iconClasses={})}applyIconOverridePrefix(t){let r=this.iconOverridePrefix;return r&&t.indexOf(r)!==0&&(t=r+t),t}getClass(t){return this.classes[t]||""}getIconClass(t,r){let n;return r&&this.rtlIconClasses?n=this.rtlIconClasses[t]||this.iconClasses[t]:n=this.iconClasses[t],n?`${this.baseIconClass} ${n}`:""}getCustomButtonIconClass(t){let r;return this.iconOverrideCustomButtonOption&&(r=t[this.iconOverrideCustomButtonOption],r)?`${this.baseIconClass} ${this.applyIconOverridePrefix(r)}`:""}}Lu.prototype.classes={};Lu.prototype.iconClasses={};Lu.prototype.baseIconClass="";Lu.prototype.iconOverridePrefix="";function ah(e){e();let t=Me.debounceRendering,r=[];function n(s){r.push(s)}for(Me.debounceRendering=n,au(W(K9,{}),document.createElement("div"));r.length;)r.shift()();Me.debounceRendering=t}class K9 extends xn{render(){return W("div",{})}componentDidMount(){this.setState({})}}function BD(e){let t=wV(e),r=t.Provider;return t.Provider=function(){let n=!this.getChildContext,s=r.apply(this,arguments);if(n){let i=[];this.shouldComponentUpdate=a=>{this.props.value!==a.value&&i.forEach(l=>{l.context=a.value,l.forceUpdate()})},this.sub=a=>{i.push(a);let l=a.componentWillUnmount;a.componentWillUnmount=()=>{i.splice(i.indexOf(a),1),l&&l.call(a)}}}return s},t}class Q9{constructor(t,r,n,s){this.execFunc=t,this.emitter=r,this.scrollTime=n,this.scrollTimeReset=s,this.handleScrollRequest=i=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},i),this.drain()},r.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const eo=BD({});function Z9(e,t,r,n,s,i,a,l,c,u,d,f,h,p){return{dateEnv:s,nowManager:i,options:r,pluginHooks:l,emitter:d,dispatch:c,getCurrentData:u,calendarApi:f,viewSpec:e,viewApi:t,dateProfileGenerator:n,theme:a,isRtl:r.direction==="rtl",addResizeHandler(m){d.on("_resize",m)},removeResizeHandler(m){d.off("_resize",m)},createScrollResponder(m){return new Q9(m,d,ft(r.scrollTime),r.scrollTimeReset)},registerInteractiveComponent:h,unregisterInteractiveComponent:p}}class to extends xn{shouldComponentUpdate(t,r){return!Gm(this.props,t,this.propEquality)||!Gm(this.state,r,this.stateEquality)}safeSetState(t){Gm(this.state,Object.assign(Object.assign({},this.state),t),this.stateEquality)||this.setState(t)}}to.addPropsEquality=X9;to.addStateEquality=J9;to.contextType=eo;to.prototype.propEquality={};to.prototype.stateEquality={};class Ut extends to{}Ut.contextType=eo;function X9(e){let t=Object.create(this.prototype.propEquality);Object.assign(t,e),this.prototype.propEquality=t}function J9(e){let t=Object.create(this.prototype.stateEquality);Object.assign(t,e),this.prototype.stateEquality=t}function As(e,t){typeof e=="function"?e(t):e&&(e.current=t)}class Tv extends Ut{constructor(){super(...arguments),this.id=Xa(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=t=>{const{options:r}=this.context,{generatorName:n}=this.props;(!r.customRenderingReplaces||!ay(n,r))&&this.updateElRef(t)},this.updateElRef=t=>{this.props.elRef&&As(this.props.elRef,t)}}render(){const{props:t,context:r}=this,{options:n}=r,{customGenerator:s,defaultGenerator:i,renderProps:a}=t,l=zD(t,[],this.handleEl);let c=!1,u,d=[],f;if(s!=null){const h=typeof s=="function"?s(a,W):s;if(h===!0)c=!0;else{const p=h&&typeof h=="object";p&&"html"in h?l.dangerouslySetInnerHTML={__html:h.html}:p&&"domNodes"in h?d=Array.prototype.slice.call(h.domNodes):(p?uD(h):typeof h!="function")?u=h:f=h}}else c=!ay(t.generatorName,n);return c&&i&&(u=i(a)),this.queuedDomNodes=d,this.currentGeneratorMeta=f,W(t.elTag,l,u)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(t){var r;const{props:n,context:s}=this,{handleCustomRendering:i,customRenderingMetaMap:a}=s.options;if(i){const l=(r=this.currentGeneratorMeta)!==null&&r!==void 0?r:a==null?void 0:a[n.generatorName];l&&i(Object.assign(Object.assign({id:this.id,isActive:t,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:l},n),{elClasses:(n.elClasses||[]).filter(eW)}))}}applyQueueudDomNodes(){const{queuedDomNodes:t,currentDomNodes:r}=this,n=this.base;if(!qi(t,r)){r.forEach(bv);for(let s of t)n.appendChild(s);this.currentDomNodes=t}}}Tv.addPropsEquality({elClasses:qi,elStyle:ns,elAttrs:z9,renderProps:ns});function ay(e,t){var r;return!!(t.handleCustomRendering&&e&&(!((r=t.customRenderingMetaMap)===null||r===void 0)&&r[e]))}function zD(e,t,r){const n=Object.assign(Object.assign({},e.elAttrs),{ref:r});return(e.elClasses||t)&&(n.className=(e.elClasses||[]).concat(t||[]).concat(n.className||[]).filter(Boolean).join(" ")),e.elStyle&&(n.style=e.elStyle),n}function eW(e){return!!e}const UD=BD(0);class oi extends xn{constructor(){super(...arguments),this.InnerContent=tW.bind(void 0,this),this.handleEl=t=>{this.el=t,this.props.elRef&&(As(this.props.elRef,t),t&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:t}=this,r=rW(t.classNameGenerator,t.renderProps);if(t.children){const n=zD(t,r,this.handleEl),s=t.children(this.InnerContent,t.renderProps,n);return t.elTag?W(t.elTag,n,s):s}else return W(Tv,Object.assign(Object.assign({},t),{elRef:this.handleEl,elTag:t.elTag||"div",elClasses:(t.elClasses||[]).concat(r),renderId:this.context}))}componentDidMount(){var t,r;this.el?(r=(t=this.props).didMount)===null||r===void 0||r.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var t,r;(r=(t=this.props).willUnmount)===null||r===void 0||r.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}oi.contextType=UD;function tW(e,t){const r=e.props;return W(Tv,Object.assign({renderProps:r.renderProps,generatorName:r.generatorName,customGenerator:r.customGenerator,defaultGenerator:r.defaultGenerator,renderId:e.context},t))}function rW(e,t){const r=typeof e=="function"?e(t):e||[];return typeof r=="string"?[r]:r}class p1 extends Ut{render(){let{props:t,context:r}=this,{options:n}=r,s={view:r.viewApi};return W(oi,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:[...HD(t.viewSpec),...t.elClasses||[]],elStyle:t.elStyle,renderProps:s,classNameGenerator:n.viewClassNames,generatorName:void 0,didMount:n.viewDidMount,willUnmount:n.viewWillUnmount},()=>t.children)}}function HD(e){return[`fc-${e.type}-view`,"fc-view"]}function nW(e,t){let r=null,n=null;return e.start&&(r=t.createMarker(e.start)),e.end&&(n=t.createMarker(e.end)),!r&&!n||r&&n&&n<r?null:{start:r,end:n}}function m1(e,t){let r=[],{start:n}=t,s,i;for(e.sort(sW),s=0;s<e.length;s+=1)i=e[s],i.start>n&&r.push({start:n,end:i.start}),i.end>n&&(n=i.end);return n<t.end&&r.push({start:n,end:t.end}),r}function sW(e,t){return e.start.valueOf()-t.start.valueOf()}function sl(e,t){let{start:r,end:n}=e,s=null;return t.start!==null&&(r===null?r=t.start:r=new Date(Math.max(r.valueOf(),t.start.valueOf()))),t.end!=null&&(n===null?n=t.end:n=new Date(Math.min(n.valueOf(),t.end.valueOf()))),(r===null||n===null||r<n)&&(s={start:r,end:n}),s}function iW(e,t){return(e.start===null?null:e.start.valueOf())===(t.start===null?null:t.start.valueOf())&&(e.end===null?null:e.end.valueOf())===(t.end===null?null:t.end.valueOf())}function Av(e,t){return(e.end===null||t.start===null||e.end>t.start)&&(e.start===null||t.end===null||e.start<t.end)}function bp(e,t){return(e.start===null||t.start!==null&&t.start>=e.start)&&(e.end===null||t.end!==null&&t.end<=e.end)}function Hi(e,t){return(e.start===null||t>=e.start)&&(e.end===null||t<e.end)}function aW(e,t){return t.start!=null&&e<t.start?t.start:t.end!=null&&e>=t.end?new Date(t.end.valueOf()-1):e}function VD(e){let t=Math.floor(xl(e.start,e.end))||1,r=It(e.start),n=or(r,t);return{start:r,end:n}}function WD(e,t=ft(0)){let r=null,n=null;if(e.end){n=It(e.end);let s=e.end.valueOf()-n.valueOf();s&&s>=ou(t)&&(n=or(n,1))}return e.start&&(r=It(e.start),n&&n<=r&&(n=or(r,1))),{start:r,end:n}}function jo(e,t,r,n){return n==="year"?ft(r.diffWholeYears(e,t),"year"):n==="month"?ft(r.diffWholeMonths(e,t),"month"):p9(e,t)}class $D{constructor(t){this.props=t,this.initHiddenDays()}buildPrev(t,r,n){let{dateEnv:s}=this.props,i=s.subtract(s.startOf(r,t.currentRangeUnit),t.dateIncrement);return this.build(i,-1,n)}buildNext(t,r,n){let{dateEnv:s}=this.props,i=s.add(s.startOf(r,t.currentRangeUnit),t.dateIncrement);return this.build(i,1,n)}build(t,r,n=!0){let{props:s}=this,i,a,l,c,u,d;return i=this.buildValidRange(),i=this.trimHiddenDays(i),n&&(t=aW(t,i)),a=this.buildCurrentRangeInfo(t,r),l=/^(year|month|week|day)$/.test(a.unit),c=this.buildRenderRange(this.trimHiddenDays(a.range),a.unit,l),c=this.trimHiddenDays(c),u=c,s.showNonCurrentDates||(u=sl(u,a.range)),u=this.adjustActiveRange(u),u=sl(u,i),d=Av(a.range,i),Hi(c,t)||(t=c.start),{currentDate:t,validRange:i,currentRange:a.range,currentRangeUnit:a.unit,isRangeAllDay:l,activeRange:u,renderRange:c,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,isValid:d,dateIncrement:this.buildDateIncrement(a.duration)}}buildValidRange(){let t=this.props.validRangeInput,r=typeof t=="function"?t.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):t;return this.refineRange(r)||{start:null,end:null}}buildCurrentRangeInfo(t,r){let{props:n}=this,s=null,i=null,a=null,l;return n.duration?(s=n.duration,i=n.durationUnit,a=this.buildRangeFromDuration(t,r,s,i)):(l=this.props.dayCount)?(i="day",a=this.buildRangeFromDayCount(t,r,l)):(a=this.buildCustomVisibleRange(t))?i=n.dateEnv.greatestWholeUnit(a.start,a.end).unit:(s=this.getFallbackDuration(),i=iy(s).unit,a=this.buildRangeFromDuration(t,r,s,i)),{duration:s,unit:i,range:a}}getFallbackDuration(){return ft({day:1})}adjustActiveRange(t){let{dateEnv:r,usesMinMaxTime:n,slotMinTime:s,slotMaxTime:i}=this.props,{start:a,end:l}=t;return n&&(Lo(s)<0&&(a=It(a),a=r.add(a,s)),Lo(i)>1&&(l=It(l),l=or(l,-1),l=r.add(l,i))),{start:a,end:l}}buildRangeFromDuration(t,r,n,s){let{dateEnv:i,dateAlignment:a}=this.props,l,c,u;if(!a){let{dateIncrement:f}=this.props;f&&ou(f)<ou(n)?a=iy(f).unit:a=s}Lo(n)<=1&&this.isHiddenDay(l)&&(l=this.skipHiddenDays(l,r),l=It(l));function d(){l=i.startOf(t,a),c=i.add(l,n),u={start:l,end:c}}return d(),this.trimHiddenDays(u)||(t=this.skipHiddenDays(t,r),d()),u}buildRangeFromDayCount(t,r,n){let{dateEnv:s,dateAlignment:i}=this.props,a=0,l=t,c;i&&(l=s.startOf(l,i)),l=It(l),l=this.skipHiddenDays(l,r),c=l;do c=or(c,1),this.isHiddenDay(c)||(a+=1);while(a<n);return{start:l,end:c}}buildCustomVisibleRange(t){let{props:r}=this,n=r.visibleRangeInput,s=typeof n=="function"?n.call(r.calendarApi,r.dateEnv.toDate(t)):n,i=this.refineRange(s);return i&&(i.start==null||i.end==null)?null:i}buildRenderRange(t,r,n){return t}buildDateIncrement(t){let{dateIncrement:r}=this.props,n;return r||((n=this.props.dateAlignment)?ft(1,n):t||ft({days:1}))}refineRange(t){if(t){let r=nW(t,this.props.dateEnv);return r&&(r=WD(r)),r}return null}initHiddenDays(){let t=this.props.hiddenDays||[],r=[],n=0,s;for(this.props.weekends===!1&&t.push(0,6),s=0;s<7;s+=1)(r[s]=t.indexOf(s)!==-1)||(n+=1);if(!n)throw new Error("invalid hiddenDays");this.isHiddenDayHash=r}trimHiddenDays(t){let{start:r,end:n}=t;return r&&(r=this.skipHiddenDays(r)),n&&(n=this.skipHiddenDays(n,-1,!0)),r==null||n==null||r<n?{start:r,end:n}:null}isHiddenDay(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]}skipHiddenDays(t,r=1,n=!1){for(;this.isHiddenDayHash[(t.getUTCDay()+(n?r:0)+7)%7];)t=or(t,r);return t}}function Dv(e,t,r,n){return{instanceId:Xa(),defId:e,range:t,forcedStartTzo:r??null,forcedEndTzo:n??null}}function oW(e,t,r,n){for(let s=0;s<n.length;s+=1){let i=n[s].parse(e,r);if(i){let{allDay:a}=e;return a==null&&(a=t,a==null&&(a=i.allDayGuess,a==null&&(a=!1))),{allDay:a,duration:i.duration,typeData:i.typeData,typeId:s}}}return null}function Va(e,t,r){let{dateEnv:n,pluginHooks:s,options:i}=r,{defs:a,instances:l}=e;l=Ha(l,c=>!a[c.defId].recurringDef);for(let c in a){let u=a[c];if(u.recurringDef){let{duration:d}=u.recurringDef;d||(d=u.allDay?i.defaultAllDayEventDuration:i.defaultTimedEventDuration);let f=lW(u,d,t,n,s.recurringTypes);for(let h of f){let p=Dv(c,{start:h,end:n.add(h,d)});l[p.instanceId]=p}}}return{defs:a,instances:l}}function lW(e,t,r,n,s){let a=s[e.recurringDef.typeId].expand(e.recurringDef.typeData,{start:n.subtract(r.start,t),end:r.end},n);return e.allDay&&(a=a.map(It)),a}const tf={id:String,groupId:String,title:String,url:String,interactive:Boolean},YD={start:V,end:V,date:V,allDay:Boolean},cW=Object.assign(Object.assign(Object.assign({},tf),YD),{extendedProps:V});function GD(e,t,r,n,s=Rv(r),i,a){let{refined:l,extra:c}=qD(e,r,s),u=dW(t,r),d=oW(l,u,r.dateEnv,r.pluginHooks.recurringTypes);if(d){let h=oy(l,c,t?t.sourceId:"",d.allDay,!!d.duration,r,i);return h.recurringDef={typeId:d.typeId,typeData:d.typeData,duration:d.duration},{def:h,instance:null}}let f=uW(l,u,r,n);if(f){let h=oy(l,c,t?t.sourceId:"",f.allDay,f.hasEnd,r,i),p=Dv(h.defId,f.range,f.forcedStartTzo,f.forcedEndTzo);return a&&h.publicId&&a[h.publicId]&&(p.instanceId=a[h.publicId]),{def:h,instance:p}}return null}function qD(e,t,r=Rv(t)){return Nv(e,r)}function Rv(e){return Object.assign(Object.assign(Object.assign({},oh),cW),e.pluginHooks.eventRefiners)}function oy(e,t,r,n,s,i,a){let l={title:e.title||"",groupId:e.groupId||"",publicId:e.id||"",url:e.url||"",recurringDef:null,defId:(a&&e.id?a[e.id]:"")||Xa(),sourceId:r,allDay:n,hasEnd:s,interactive:e.interactive,ui:lh(e,i),extendedProps:Object.assign(Object.assign({},e.extendedProps||{}),t)};for(let c of i.pluginHooks.eventDefMemberAdders)Object.assign(l,c(e));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function uW(e,t,r,n){let{allDay:s}=e,i,a=null,l=!1,c,u=null,d=e.start!=null?e.start:e.date;if(i=r.dateEnv.createMarkerMeta(d),i)a=i.marker;else if(!n)return null;return e.end!=null&&(c=r.dateEnv.createMarkerMeta(e.end)),s==null&&(t!=null?s=t:s=(!i||i.isTimeUnspecified)&&(!c||c.isTimeUnspecified)),s&&a&&(a=It(a)),c&&(u=c.marker,s&&(u=It(u)),a&&u<=a&&(u=null)),u?l=!0:n||(l=r.options.forceEventDuration||!1,u=r.dateEnv.add(a,s?r.options.defaultAllDayEventDuration:r.options.defaultTimedEventDuration)),{allDay:s,hasEnd:l,range:{start:a,end:u},forcedStartTzo:i?i.forcedTzo:null,forcedEndTzo:c?c.forcedTzo:null}}function dW(e,t){let r=null;return e&&(r=e.defaultAllDay),r==null&&(r=t.options.defaultAllDay),r}function lu(e,t,r,n,s,i){let a=es(),l=Rv(r);for(let c of e){let u=GD(c,t,r,n,l,s,i);u&&ly(u,a)}return a}function ly(e,t=es()){return t.defs[e.def.defId]=e.def,e.instance&&(t.instances[e.instance.instanceId]=e.instance),t}function _v(e,t){let r=e.instances[t];if(r){let n=e.defs[r.defId],s=wp(e,i=>fW(n,i));return s.defs[n.defId]=n,s.instances[r.instanceId]=r,s}return es()}function fW(e,t){return!!(e.groupId&&e.groupId===t.groupId)}function es(){return{defs:{},instances:{}}}function Iv(e,t){return{defs:Object.assign(Object.assign({},e.defs),t.defs),instances:Object.assign(Object.assign({},e.instances),t.instances)}}function wp(e,t){let r=Ha(e.defs,t),n=Ha(e.instances,s=>r[s.defId]);return{defs:r,instances:n}}function hW(e,t){let{defs:r,instances:n}=e,s={},i={};for(let a in r)t.defs[a]||(s[a]=r[a]);for(let a in n)!t.instances[a]&&s[n[a].defId]&&(i[a]=n[a]);return{defs:s,instances:i}}function pW(e,t){return Array.isArray(e)?lu(e,null,t,!0):typeof e=="object"&&e?lu([e],null,t,!0):e!=null?String(e):null}function g1(e){return Array.isArray(e)?e:typeof e=="string"?e.split(/\s+/):[]}const oh={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:V,overlap:V,allow:V,className:g1,classNames:g1,color:String,backgroundColor:String,borderColor:String,textColor:String},mW={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function lh(e,t){let r=pW(e.constraint,t);return{display:e.display||null,startEditable:e.startEditable!=null?e.startEditable:e.editable,durationEditable:e.durationEditable!=null?e.durationEditable:e.editable,constraints:r!=null?[r]:[],overlap:e.overlap!=null?e.overlap:null,allows:e.allow!=null?[e.allow]:[],backgroundColor:e.backgroundColor||e.color||"",borderColor:e.borderColor||e.color||"",textColor:e.textColor||"",classNames:(e.className||[]).concat(e.classNames||[])}}function gW(e){return e.reduce(yW,mW)}function yW(e,t){return{display:t.display!=null?t.display:e.display,startEditable:t.startEditable!=null?t.startEditable:e.startEditable,durationEditable:t.durationEditable!=null?t.durationEditable:e.durationEditable,constraints:e.constraints.concat(t.constraints),overlap:typeof t.overlap=="boolean"?t.overlap:e.overlap,allows:e.allows.concat(t.allows),backgroundColor:t.backgroundColor||e.backgroundColor,borderColor:t.borderColor||e.borderColor,textColor:t.textColor||e.textColor,classNames:e.classNames.concat(t.classNames)}}const xW={id:String,defaultAllDay:Boolean,url:String,format:String,events:V,eventDataTransform:V,success:V,failure:V};function KD(e,t,r=QD(t)){let n;if(typeof e=="string"?n={url:e}:typeof e=="function"||Array.isArray(e)?n={events:e}:typeof e=="object"&&e&&(n=e),n){let{refined:s,extra:i}=Nv(n,r),a=vW(s,t);if(a)return{_raw:e,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:s.defaultAllDay,eventDataTransform:s.eventDataTransform,success:s.success,failure:s.failure,publicId:s.id||"",sourceId:Xa(),sourceDefId:a.sourceDefId,meta:a.meta,ui:lh(s,t),extendedProps:i}}return null}function QD(e){return Object.assign(Object.assign(Object.assign({},oh),xW),e.pluginHooks.eventSourceRefiners)}function vW(e,t){let r=t.pluginHooks.eventSourceDefs;for(let n=r.length-1;n>=0;n-=1){let i=r[n].parseMeta(e);if(i)return{sourceDefId:n,meta:i}}return null}function bW(e,t,r,n,s){switch(t.type){case"RECEIVE_EVENTS":return wW(e,r[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,s);case"RESET_RAW_EVENTS":return kW(e,r[t.sourceId],t.rawEvents,n.activeRange,s);case"ADD_EVENTS":return SW(e,t.eventStore,n?n.activeRange:null,s);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return Iv(e,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?Va(e,n.activeRange,s):e;case"REMOVE_EVENTS":return hW(e,t.eventStore);case"REMOVE_EVENT_SOURCE":return XD(e,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return wp(e,i=>!i.sourceId);case"REMOVE_ALL_EVENTS":return es();default:return e}}function wW(e,t,r,n,s,i){if(t&&r===t.latestFetchId){let a=lu(ZD(s,t,i),t,i);return n&&(a=Va(a,n,i)),Iv(XD(e,t.sourceId),a)}return e}function kW(e,t,r,n,s){const{defIdMap:i,instanceIdMap:a}=NW(e);let l=lu(ZD(r,t,s),t,s,!1,i,a);return Va(l,n,s)}function ZD(e,t,r){let n=r.options.eventDataTransform,s=t?t.eventDataTransform:null;return s&&(e=y1(e,s)),n&&(e=y1(e,n)),e}function y1(e,t){let r;if(!t)r=e;else{r=[];for(let n of e){let s=t(n);s?r.push(s):s==null&&r.push(n)}}return r}function SW(e,t,r,n){return r&&(t=Va(t,r,n)),Iv(e,t)}function x1(e,t,r){let{defs:n}=e,s=Ja(e.instances,i=>n[i.defId].allDay?i:Object.assign(Object.assign({},i),{range:{start:r.createMarker(t.toDate(i.range.start,i.forcedStartTzo)),end:r.createMarker(t.toDate(i.range.end,i.forcedEndTzo))},forcedStartTzo:r.canComputeOffset?null:i.forcedStartTzo,forcedEndTzo:r.canComputeOffset?null:i.forcedEndTzo}));return{defs:n,instances:s}}function XD(e,t){return wp(e,r=>r.sourceId!==t)}function EW(e,t){return{defs:e.defs,instances:Ha(e.instances,r=>!t[r.instanceId])}}function NW(e){const{defs:t,instances:r}=e,n={},s={};for(let i in t){const a=t[i],{publicId:l}=a;l&&(n[l]=i)}for(let i in r){const a=r[i],l=t[a.defId],{publicId:c}=l;c&&(s[c]=i)}return{defIdMap:n,instanceIdMap:s}}class kp{constructor(){this.handlers={},this.thisContext=null}setThisContext(t){this.thisContext=t}setOptions(t){this.options=t}on(t,r){CW(this.handlers,t,r)}off(t,r){jW(this.handlers,t,r)}trigger(t,...r){let n=this.handlers[t]||[],s=this.options&&this.options[t],i=[].concat(s||[],n);for(let a of i)a.apply(this.thisContext,r)}hasHandlers(t){return!!(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])}}function CW(e,t,r){(e[t]||(e[t]=[])).push(r)}function jW(e,t,r){r?e[t]&&(e[t]=e[t].filter(n=>n!==r)):delete e[t]}const TW={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function AW(e,t){return lu(DW(e),null,t)}function DW(e){let t;return e===!0?t=[{}]:Array.isArray(e)?t=e.filter(r=>r.daysOfWeek):typeof e=="object"&&e?t=[e]:t=[],t=t.map(r=>Object.assign(Object.assign({},TW),r)),t}function JD(e,t,r){r.emitter.trigger("select",Object.assign(Object.assign({},Mv(e,r)),{jsEvent:t?t.origEvent:null,view:r.viewApi||r.calendarApi.view}))}function RW(e,t){t.emitter.trigger("unselect",{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view})}function Mv(e,t){let r={};for(let n of t.pluginHooks.dateSpanTransforms)Object.assign(r,n(e,t));return Object.assign(r,YW(e,t.dateEnv)),r}function v1(e,t,r){let{dateEnv:n,options:s}=r,i=t;return e?(i=It(i),i=n.add(i,s.defaultAllDayEventDuration)):i=n.add(i,s.defaultTimedEventDuration),i}function Ov(e,t,r,n){let s=ch(e.defs,t),i=es();for(let a in e.defs){let l=e.defs[a];i.defs[a]=_W(l,s[a],r,n)}for(let a in e.instances){let l=e.instances[a],c=i.defs[l.defId];i.instances[a]=IW(l,c,s[l.defId],r,n)}return i}function _W(e,t,r,n){let s=r.standardProps||{};s.hasEnd==null&&t.durationEditable&&(r.startDelta||r.endDelta)&&(s.hasEnd=!0);let i=Object.assign(Object.assign(Object.assign({},e),s),{ui:Object.assign(Object.assign({},e.ui),s.ui)});r.extendedProps&&(i.extendedProps=Object.assign(Object.assign({},i.extendedProps),r.extendedProps));for(let a of n.pluginHooks.eventDefMutationAppliers)a(i,r,n);return!i.hasEnd&&n.options.forceEventDuration&&(i.hasEnd=!0),i}function IW(e,t,r,n,s){let{dateEnv:i}=s,a=n.standardProps&&n.standardProps.allDay===!0,l=n.standardProps&&n.standardProps.hasEnd===!1,c=Object.assign({},e);return a&&(c.range=VD(c.range)),n.datesDelta&&r.startEditable&&(c.range={start:i.add(c.range.start,n.datesDelta),end:i.add(c.range.end,n.datesDelta)}),n.startDelta&&r.durationEditable&&(c.range={start:i.add(c.range.start,n.startDelta),end:c.range.end}),n.endDelta&&r.durationEditable&&(c.range={start:c.range.start,end:i.add(c.range.end,n.endDelta)}),l&&(c.range={start:c.range.start,end:v1(t.allDay,c.range.start,s)}),t.allDay&&(c.range={start:It(c.range.start),end:It(c.range.end)}),c.range.end<c.range.start&&(c.range.end=v1(t.allDay,c.range.start,s)),c}class lo{constructor(t,r){this.context=t,this.internalEventSource=r}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Mt{constructor(t,r,n){this._context=t,this._def=r,this._instance=n||null}setProp(t,r){if(t in YD)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(t==="id")r=tf[t](r),this.mutate({standardProps:{publicId:r}});else if(t in tf)r=tf[t](r),this.mutate({standardProps:{[t]:r}});else if(t in oh){let n=oh[t](r);t==="color"?n={backgroundColor:r,borderColor:r}:t==="editable"?n={startEditable:r,durationEditable:r}:n={[t]:r},this.mutate({standardProps:{ui:n}})}else console.warn(`Could not set prop '${t}'. Use setExtendedProp instead.`)}setExtendedProp(t,r){this.mutate({extendedProps:{[t]:r}})}setStart(t,r={}){let{dateEnv:n}=this._context,s=n.createMarker(t);if(s&&this._instance){let i=this._instance.range,a=jo(i.start,s,n,r.granularity);r.maintainDuration?this.mutate({datesDelta:a}):this.mutate({startDelta:a})}}setEnd(t,r={}){let{dateEnv:n}=this._context,s;if(!(t!=null&&(s=n.createMarker(t),!s))&&this._instance)if(s){let i=jo(this._instance.range.end,s,n,r.granularity);this.mutate({endDelta:i})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(t,r,n={}){let{dateEnv:s}=this._context,i={allDay:n.allDay},a=s.createMarker(t),l;if(a&&!(r!=null&&(l=s.createMarker(r),!l))&&this._instance){let c=this._instance.range;n.allDay===!0&&(c=VD(c));let u=jo(c.start,a,s,n.granularity);if(l){let d=jo(c.end,l,s,n.granularity);i9(u,d)?this.mutate({datesDelta:u,standardProps:i}):this.mutate({startDelta:u,endDelta:d,standardProps:i})}else i.hasEnd=!1,this.mutate({datesDelta:u,standardProps:i})}}moveStart(t){let r=ft(t);r&&this.mutate({startDelta:r})}moveEnd(t){let r=ft(t);r&&this.mutate({endDelta:r})}moveDates(t){let r=ft(t);r&&this.mutate({datesDelta:r})}setAllDay(t,r={}){let n={allDay:t},{maintainDuration:s}=r;s==null&&(s=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(n.hasEnd=s),this.mutate({standardProps:n})}formatRange(t){let{dateEnv:r}=this._context,n=this._instance,s=hr(t);return this._def.hasEnd?r.formatRange(n.range.start,n.range.end,s,{forcedStartTzo:n.forcedStartTzo,forcedEndTzo:n.forcedEndTzo}):r.format(n.range.start,s,{forcedTzo:n.forcedStartTzo})}mutate(t){let r=this._instance;if(r){let n=this._def,s=this._context,{eventStore:i}=s.getCurrentData(),a=_v(i,r.instanceId);a=Ov(a,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},t,s);let c=new Mt(s,n,r);this._def=a.defs[n.defId],this._instance=a.instances[r.instanceId],s.dispatch({type:"MERGE_EVENTS",eventStore:a}),s.emitter.trigger("eventChange",{oldEvent:c,event:this,relatedEvents:_a(a,s,r),revert(){s.dispatch({type:"RESET_EVENTS",eventStore:i})}})}}remove(){let t=this._context,r=eR(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:r}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:r})}})}get source(){let{sourceId:t}=this._def;return t?new lo(this._context,this._context.getCurrentData().eventSources[t]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""}get endStr(){let t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(t={}){let r=this._def,{ui:n}=r,{startStr:s,endStr:i}=this,a={allDay:r.allDay};return r.title&&(a.title=r.title),s&&(a.start=s),i&&(a.end=i),r.publicId&&(a.id=r.publicId),r.groupId&&(a.groupId=r.groupId),r.url&&(a.url=r.url),n.display&&n.display!=="auto"&&(a.display=n.display),t.collapseColor&&n.backgroundColor&&n.backgroundColor===n.borderColor?a.color=n.backgroundColor:(n.backgroundColor&&(a.backgroundColor=n.backgroundColor),n.borderColor&&(a.borderColor=n.borderColor)),n.textColor&&(a.textColor=n.textColor),n.classNames.length&&(a.classNames=n.classNames),Object.keys(r.extendedProps).length&&(t.collapseExtendedProps?Object.assign(a,r.extendedProps):a.extendedProps=r.extendedProps),a}toJSON(){return this.toPlainObject()}}function eR(e){let t=e._def,r=e._instance;return{defs:{[t.defId]:t},instances:r?{[r.instanceId]:r}:{}}}function _a(e,t,r){let{defs:n,instances:s}=e,i=[],a=r?r.instanceId:"";for(let l in s){let c=s[l],u=n[c.defId];c.instanceId!==a&&i.push(new Mt(t,u,c))}return i}function b1(e,t,r,n){let s={},i={},a={},l=[],c=[],u=ch(e.defs,t);for(let d in e.defs){let f=e.defs[d];u[f.defId].display==="inverse-background"&&(f.groupId?(s[f.groupId]=[],a[f.groupId]||(a[f.groupId]=f)):i[d]=[])}for(let d in e.instances){let f=e.instances[d],h=e.defs[f.defId],p=u[h.defId],m=f.range,y=!h.allDay&&n?WD(m,n):m,b=sl(y,r);b&&(p.display==="inverse-background"?h.groupId?s[h.groupId].push(b):i[f.defId].push(b):p.display!=="none"&&(p.display==="background"?l:c).push({def:h,ui:p,instance:f,range:b,isStart:y.start&&y.start.valueOf()===b.start.valueOf(),isEnd:y.end&&y.end.valueOf()===b.end.valueOf()}))}for(let d in s){let f=s[d],h=m1(f,r);for(let p of h){let m=a[d],y=u[m.defId];l.push({def:m,ui:y,instance:null,range:p,isStart:!1,isEnd:!1})}}for(let d in i){let f=i[d],h=m1(f,r);for(let p of h)l.push({def:e.defs[d],ui:u[d],instance:null,range:p,isStart:!1,isEnd:!1})}return{bg:l,fg:c}}function w1(e,t){e.fcSeg=t}function il(e){return e.fcSeg||e.parentNode.fcSeg||null}function ch(e,t){return Ja(e,r=>tR(r,t))}function tR(e,t){let r=[];return t[""]&&r.push(t[""]),t[e.defId]&&r.push(t[e.defId]),r.push(e.ui),gW(r)}function MW(e,t){let r=e.map(OW);return r.sort((n,s)=>XV(n,s,t)),r.map(n=>n._seg)}function OW(e){let{eventRange:t}=e,r=t.def,n=t.instance?t.instance.range:t.range,s=n.start?n.start.valueOf():0,i=n.end?n.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},r.extendedProps),r),{id:r.publicId,start:s,end:i,duration:i-s,allDay:Number(r.allDay),_seg:e})}function PW(e,t){let{pluginHooks:r}=t,n=r.isDraggableTransformers,{def:s,ui:i}=e.eventRange,a=i.startEditable;for(let l of n)a=l(a,s,i,t);return a}function LW(e,t){return e.isStart&&e.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function FW(e,t){return e.isEnd&&e.eventRange.ui.durationEditable}function rR(e,t,r,n,s,i,a){let{dateEnv:l,options:c}=r,{displayEventTime:u,displayEventEnd:d}=c,f=e.eventRange.def,h=e.eventRange.instance;u==null&&(u=n!==!1),d==null&&(d=s!==!1);let p=h.range.start,m=h.range.end,y=e.start||e.eventRange.range.start,b=e.end||e.eventRange.range.end,v=It(p).valueOf()===It(y).valueOf(),x=It(Ki(m,-1)).valueOf()===It(Ki(b,-1)).valueOf();return u&&!f.allDay&&(v||x)?(y=v?p:y,b=x?m:b,d&&f.hasEnd?l.formatRange(y,b,t,{forcedStartTzo:h.forcedStartTzo,forcedEndTzo:h.forcedEndTzo}):l.format(y,t,{forcedTzo:h.forcedStartTzo})):""}function Ec(e,t,r){let n=e.eventRange.range;return{isPast:n.end<=t.start,isFuture:n.start>=t.end,isToday:t&&Hi(t,n.start)}}function BW(e){let t=["fc-event"];return e.isMirror&&t.push("fc-event-mirror"),e.isDraggable&&t.push("fc-event-draggable"),(e.isStartResizable||e.isEndResizable)&&t.push("fc-event-resizable"),e.isDragging&&t.push("fc-event-dragging"),e.isResizing&&t.push("fc-event-resizing"),e.isSelected&&t.push("fc-event-selected"),e.isStart&&t.push("fc-event-start"),e.isEnd&&t.push("fc-event-end"),e.isPast&&t.push("fc-event-past"),e.isToday&&t.push("fc-event-today"),e.isFuture&&t.push("fc-event-future"),t}function zW(e){return e.instance?e.instance.instanceId:`${e.def.defId}:${e.range.start.toISOString()}`}function nR(e,t){let{def:r,instance:n}=e.eventRange,{url:s}=r;if(s)return{href:s};let{emitter:i,options:a}=t,{eventInteractive:l}=a;return l==null&&(l=r.interactive,l==null&&(l=!!i.hasHandlers("eventClick"))),l?OD(c=>{i.trigger("eventClick",{el:c.target,event:new Mt(t,r,n),jsEvent:c,view:t.viewApi})}):{}}const UW={start:V,end:V,allDay:Boolean};function HW(e,t,r){let n=VW(e,t),{range:s}=n;if(!s.start)return null;if(!s.end){if(r==null)return null;s.end=t.add(s.start,r)}return n}function VW(e,t){let{refined:r,extra:n}=Nv(e,UW),s=r.start?t.createMarkerMeta(r.start):null,i=r.end?t.createMarkerMeta(r.end):null,{allDay:a}=r;return a==null&&(a=s&&s.isTimeUnspecified&&(!i||i.isTimeUnspecified)),Object.assign({range:{start:s?s.marker:null,end:i?i.marker:null},allDay:a},n)}function WW(e,t){return iW(e.range,t.range)&&e.allDay===t.allDay&&$W(e,t)}function $W(e,t){for(let r in t)if(r!=="range"&&r!=="allDay"&&e[r]!==t[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}function YW(e,t){return Object.assign(Object.assign({},iR(e.range,t,e.allDay)),{allDay:e.allDay})}function sR(e,t,r){return Object.assign(Object.assign({},iR(e,t,r)),{timeZone:t.timeZone})}function iR(e,t,r){return{start:t.toDate(e.start),end:t.toDate(e.end),startStr:t.formatIso(e.start,{omitTime:r}),endStr:t.formatIso(e.end,{omitTime:r})}}function GW(e,t,r){let n=qD({editable:!1},r),s=oy(n.refined,n.extra,"",e.allDay,!0,r);return{def:s,ui:tR(s,t),instance:Dv(s.defId,e.range),range:e.range,isStart:!0,isEnd:!0}}function qW(e,t,r){let n=!1,s=function(l){n||(n=!0,t(l))},i=function(l){n||(n=!0,r(l))},a=e(s,i);a&&typeof a.then=="function"&&a.then(s,i)}class k1 extends Error{constructor(t,r){super(t),this.response=r}}function KW(e,t,r){e=e.toUpperCase();const n={method:e};return e==="GET"?t+=(t.indexOf("?")===-1?"?":"&")+new URLSearchParams(r):(n.body=new URLSearchParams(r),n.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(t,n).then(s=>{if(s.ok)return s.json().then(i=>[i,s],()=>{throw new k1("Failure parsing JSON",s)});throw new k1("Request failed",s)})}let qm;function aR(){return qm==null&&(qm=QW()),qm}function QW(){if(typeof document>"u")return!0;let e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML="<table><tr><td><div></div></td></tr></table>",e.querySelector("table").style.height="100px",e.querySelector("div").style.height="100%",document.body.appendChild(e);let r=e.querySelector("div").offsetHeight>0;return document.body.removeChild(e),r}class ZW extends Ut{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{ah(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{ah(()=>{this.setState({forPrint:!1})})}}render(){let{props:t}=this,{options:r}=t,{forPrint:n}=this.state,s=n||r.height==="auto"||r.contentHeight==="auto",i=!s&&r.height!=null?r.height:"",a=["fc",n?"fc-media-print":"fc-media-screen",`fc-direction-${r.direction}`,t.theme.getClass("root")];return aR()||a.push("fc-liquid-hack"),t.children(a,i,s,n)}componentDidMount(){let{emitter:t}=this.props;t.on("_beforeprint",this.handleBeforePrint),t.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:t}=this.props;t.off("_beforeprint",this.handleBeforePrint),t.off("_afterprint",this.handleAfterPrint)}}class vl{constructor(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}destroy(){}}function XW(e,t){return{component:e,el:t.el,useEventCenter:t.useEventCenter!=null?t.useEventCenter:!0,isHitComboAllowed:t.isHitComboAllowed||null}}function Pv(e){return{[e.component.uid]:e}}const cy={};class Sp extends xn{constructor(t,r){super(t,r),this.handleRefresh=()=>{let n=this.computeTiming();n.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(n.state),this.clearTimeout(),this.setTimeout(n.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:t,state:r}=this;return t.children(r.nowDate,r.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(t){t.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:t,context:r}=this,n=r.nowManager.getDateMarker(),{nowIndicatorSnap:s}=r.options;s==="auto"&&(s=/year|month|week|day/.test(t.unit)||(t.unitValue||1)===1);let i,a;return s?(i=r.dateEnv.startOf(n,t.unit),a=r.dateEnv.add(i,ft(1,t.unit)).valueOf()-n.valueOf()):(i=n,a=1e3*60),a=Math.min(1e3*60*60*24,a),{state:{nowDate:i,todayRange:JW(i)},waitMs:a}}setTimeout(t=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const r=this.computeTiming();this.setState(r.state,()=>{this.setTimeout(r.waitMs)})},t)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Sp.contextType=eo;function JW(e){let t=It(e),r=or(t,1);return{start:t,end:r}}class e${getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(t){this.currentDataManager.dispatch(t)}get view(){return this.getCurrentData().viewApi}batchRendering(t){t()}updateSize(){this.trigger("_resize",!0)}setOption(t,r){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:r})}getOption(t){return this.currentDataManager.currentCalendarOptionsInput[t]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(t,r){let{currentDataManager:n}=this;n.currentCalendarOptionsRefiners[t]?n.emitter.on(t,r):console.warn(`Unknown listener name '${t}'`)}off(t,r){this.currentDataManager.emitter.off(t,r)}trigger(t,...r){this.currentDataManager.emitter.trigger(t,...r)}changeView(t,r){this.batchRendering(()=>{if(this.unselect(),r)if(r.start&&r.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:r});else{let{dateEnv:n}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:n.createMarker(r)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})}zoomTo(t,r){let n=this.getCurrentData(),s;r=r||"day",s=n.viewSpecs[r]||this.getUnitViewSpec(r),this.unselect(),s?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:s.type,dateMarker:t}):this.dispatch({type:"CHANGE_DATE",dateMarker:t})}getUnitViewSpec(t){let{viewSpecs:r,toolbarConfig:n}=this.getCurrentData(),s=[].concat(n.header?n.header.viewsWithButtons:[],n.footer?n.footer.viewsWithButtons:[]),i,a;for(let l in r)s.push(l);for(i=0;i<s.length;i+=1)if(a=r[s[i]],a&&a.singleUnit===t)return a;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})}nextYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})}today(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.nowManager.getDateMarker()})}gotoDate(t){let r=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:r.dateEnv.createMarker(t)})}incrementDate(t){let r=this.getCurrentData(),n=ft(t);n&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:r.dateEnv.add(r.currentDate,n)}))}getDate(){let t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)}formatDate(t,r){let{dateEnv:n}=this.getCurrentData();return n.format(n.createMarker(t),hr(r))}formatRange(t,r,n){let{dateEnv:s}=this.getCurrentData();return s.formatRange(s.createMarker(t),s.createMarker(r),hr(n),n)}formatIso(t,r){let{dateEnv:n}=this.getCurrentData();return n.formatIso(n.createMarker(t),{omitTime:r})}select(t,r){let n;r==null?t.start!=null?n=t:n={start:t,end:null}:n={start:t,end:r};let s=this.getCurrentData(),i=HW(n,s.dateEnv,ft({days:1}));i&&(this.dispatch({type:"SELECT_DATES",selection:i}),JD(i,null,s))}unselect(t){let r=this.getCurrentData();r.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),RW(t,r))}addEvent(t,r){if(t instanceof Mt){let a=t._def,l=t._instance;return this.getCurrentData().eventStore.defs[a.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:ly({def:a,instance:l})}),this.triggerEventAdd(t)),t}let n=this.getCurrentData(),s;if(r instanceof lo)s=r.internalEventSource;else if(typeof r=="boolean")r&&([s]=jv(n.eventSources));else if(r!=null){let a=this.getEventSourceById(r);if(!a)return console.warn(`Could not find an event source with ID "${r}"`),null;s=a.internalEventSource}let i=GD(t,s,n,!1);if(i){let a=new Mt(n,i.def,i.def.recurringDef?null:i.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:ly(i)}),this.triggerEventAdd(a),a}return null}triggerEventAdd(t){let{emitter:r}=this.getCurrentData();r.trigger("eventAdd",{event:t,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:eR(t)})}})}getEventById(t){let r=this.getCurrentData(),{defs:n,instances:s}=r.eventStore;t=String(t);for(let i in n){let a=n[i];if(a.publicId===t){if(a.recurringDef)return new Mt(r,a,null);for(let l in s){let c=s[l];if(c.defId===a.defId)return new Mt(r,a,c)}}}return null}getEvents(){let t=this.getCurrentData();return _a(t.eventStore,t)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let t=this.getCurrentData(),r=t.eventSources,n=[];for(let s in r)n.push(new lo(t,r[s]));return n}getEventSourceById(t){let r=this.getCurrentData(),n=r.eventSources;t=String(t);for(let s in n)if(n[s].publicId===t)return new lo(r,n[s]);return null}addEventSource(t){let r=this.getCurrentData();if(t instanceof lo)return r.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;let n=KD(t,r);return n?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[n]}),new lo(r,n)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(t){let r=ft(t);r&&this.trigger("_scrollRequest",{time:r})}}function t$(e,t){return e.left>=t.left&&e.left<t.right&&e.top>=t.top&&e.top<t.bottom}function oR(e,t){let r={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return r.left<r.right&&r.top<r.bottom?r:!1}function r$(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function n$(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function s$(e,t){return{left:e.left-t.left,top:e.top-t.top}}function lR(e,t,r,n){return{dow:e.getUTCDay(),isDisabled:!!(n&&(!n.activeRange||!Hi(n.activeRange,e))),isOther:!!(n&&!Hi(n.currentRange,e)),isToday:!!(t&&Hi(t,e)),isPast:!!(t&&e<t.start),isFuture:!!(t&&e>=t.end)}}function Lv(e,t){let r=["fc-day",`fc-day-${c9[e.dow]}`];return e.isDisabled?r.push("fc-day-disabled"):(e.isToday&&(r.push("fc-day-today"),r.push(t.getClass("today"))),e.isPast&&r.push("fc-day-past"),e.isFuture&&r.push("fc-day-future"),e.isOther&&r.push("fc-day-other")),r}const i$=hr({year:"numeric",month:"long",day:"numeric"}),a$=hr({week:"long"});function uy(e,t,r="day",n=!0){const{dateEnv:s,options:i,calendarApi:a}=e;let l=s.format(t,r==="week"?a$:i$);if(i.navLinks){let c=s.toDate(t);const u=d=>{let f=r==="day"?i.navLinkDayClick:r==="week"?i.navLinkWeekClick:null;typeof f=="function"?f.call(a,s.toDate(t),d):(typeof f=="string"&&(r=f),a.zoomTo(t,r))};return Object.assign({title:kc(i.navLinkHint,[l,c],l),"data-navlink":""},n?MD(u):{onClick:u})}return{"aria-label":l}}let Km=null;function o$(){return Km===null&&(Km=l$()),Km}function l$(){let e=document.createElement("div");wc(e,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),e.innerHTML="<div></div>",document.body.appendChild(e);let r=e.firstChild.getBoundingClientRect().left>e.getBoundingClientRect().left;return bv(e),r}let Qm;function c$(){return Qm||(Qm=u$()),Qm}function u$(){let e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e);let t=cR(e);return document.body.removeChild(e),t}function cR(e){return{x:e.offsetHeight-e.clientHeight,y:e.offsetWidth-e.clientWidth}}function d$(e,t=!1){let r=window.getComputedStyle(e),n=parseInt(r.borderLeftWidth,10)||0,s=parseInt(r.borderRightWidth,10)||0,i=parseInt(r.borderTopWidth,10)||0,a=parseInt(r.borderBottomWidth,10)||0,l=cR(e),c=l.y-n-s,u=l.x-i-a,d={borderLeft:n,borderRight:s,borderTop:i,borderBottom:a,scrollbarBottom:u,scrollbarLeft:0,scrollbarRight:0};return o$()&&r.direction==="rtl"?d.scrollbarLeft=c:d.scrollbarRight=c,t&&(d.paddingLeft=parseInt(r.paddingLeft,10)||0,d.paddingRight=parseInt(r.paddingRight,10)||0,d.paddingTop=parseInt(r.paddingTop,10)||0,d.paddingBottom=parseInt(r.paddingBottom,10)||0),d}function f$(e,t=!1,r){let n=Fv(e),s=d$(e,t),i={left:n.left+s.borderLeft+s.scrollbarLeft,right:n.right-s.borderRight-s.scrollbarRight,top:n.top+s.borderTop,bottom:n.bottom-s.borderBottom-s.scrollbarBottom};return t&&(i.left+=s.paddingLeft,i.right-=s.paddingRight,i.top+=s.paddingTop,i.bottom-=s.paddingBottom),i}function Fv(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY,right:t.right+window.scrollX,bottom:t.bottom+window.scrollY}}function h$(e){let t=uR(e),r=e.getBoundingClientRect();for(let n of t){let s=oR(r,n.getBoundingClientRect());if(s)r=s;else return null}return r}function uR(e){let t=[];for(;e instanceof HTMLElement;){let r=window.getComputedStyle(e);if(r.position==="fixed")break;/(auto|scroll)/.test(r.overflow+r.overflowY+r.overflowX)&&t.push(e),e=e.parentNode}return t}class uh{constructor(t,r,n,s){this.els=r;let i=this.originClientRect=t.getBoundingClientRect();n&&this.buildElHorizontals(i.left),s&&this.buildElVerticals(i.top)}buildElHorizontals(t){let r=[],n=[];for(let s of this.els){let i=s.getBoundingClientRect();r.push(i.left-t),n.push(i.right-t)}this.lefts=r,this.rights=n}buildElVerticals(t){let r=[],n=[];for(let s of this.els){let i=s.getBoundingClientRect();r.push(i.top-t),n.push(i.bottom-t)}this.tops=r,this.bottoms=n}leftToIndex(t){let{lefts:r,rights:n}=this,s=r.length,i;for(i=0;i<s;i+=1)if(t>=r[i]&&t<n[i])return i}topToIndex(t){let{tops:r,bottoms:n}=this,s=r.length,i;for(i=0;i<s;i+=1)if(t>=r[i]&&t<n[i])return i}getWidth(t){return this.rights[t]-this.lefts[t]}getHeight(t){return this.bottoms[t]-this.tops[t]}similarTo(t){return bd(this.tops||[],t.tops||[])&&bd(this.bottoms||[],t.bottoms||[])&&bd(this.lefts||[],t.lefts||[])&&bd(this.rights||[],t.rights||[])}}function bd(e,t){const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(Math.round(e[n])!==Math.round(t[n]))return!1;return!0}class Bv{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class p$ extends Bv{constructor(t){super(),this.el=t}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(t){this.el.scrollTop=t}setScrollLeft(t){this.el.scrollLeft=t}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class m$ extends Bv{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(t){window.scroll(window.scrollX,t)}setScrollLeft(t){window.scroll(t,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class ro extends Ut{constructor(){super(...arguments),this.uid=Xa()}prepareHits(){}queryHit(t,r,n,s){return null}isValidSegDownEl(t){return!this.props.eventDrag&&!this.props.eventResize&&!Ir(t,".fc-event-mirror")}isValidDateDownEl(t){return!Ir(t,".fc-event:not(.fc-bg-event)")&&!Ir(t,".fc-more-link")&&!Ir(t,"a[data-navlink]")&&!Ir(t,".fc-popover")}}class g${constructor(t=r=>r.thickness||1){this.getEntryThickness=t,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(t){let r=[];for(let n of t)this.insertEntry(n,r);return r}insertEntry(t,r){let n=this.findInsertion(t);this.isInsertionValid(n,t)?this.insertEntryAt(t,n):this.handleInvalidInsertion(n,t,r)}isInsertionValid(t,r){return(this.maxCoord===-1||t.levelCoord+this.getEntryThickness(r)<=this.maxCoord)&&(this.maxStackCnt===-1||t.stackCnt<this.maxStackCnt)}handleInvalidInsertion(t,r,n){if(this.allowReslicing&&t.touchingEntry){const s=Object.assign(Object.assign({},r),{span:dR(r.span,t.touchingEntry.span)});n.push(s),this.splitEntry(r,t.touchingEntry,n)}else n.push(r)}splitEntry(t,r,n){let s=t.span,i=r.span;s.start<i.start&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:s.start,end:i.start}},n),s.end>i.end&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:i.end,end:s.end}},n)}insertEntryAt(t,r){let{entriesByLevel:n,levelCoords:s}=this;r.lateral===-1?(Zm(s,r.level,r.levelCoord),Zm(n,r.level,[t])):Zm(n[r.level],r.lateral,t),this.stackCnts[Nc(t)]=r.stackCnt}findInsertion(t){let{levelCoords:r,entriesByLevel:n,strictOrder:s,stackCnts:i}=this,a=r.length,l=0,c=-1,u=-1,d=null,f=0;for(let m=0;m<a;m+=1){const y=r[m];if(!s&&y>=l+this.getEntryThickness(t))break;let b=n[m],v,x=E1(b,t.span.start,S1),w=x[0]+x[1];for(;(v=b[w])&&v.span.start<t.span.end;){let k=y+this.getEntryThickness(v);k>l&&(l=k,d=v,c=m,u=w),k===l&&(f=Math.max(f,i[Nc(v)]+1)),w+=1}}let h=0;if(d)for(h=c+1;h<a&&r[h]<l;)h+=1;let p=-1;return h<a&&r[h]===l&&(p=E1(n[h],t.span.end,S1)[0]),{touchingLevel:c,touchingLateral:u,touchingEntry:d,stackCnt:f,levelCoord:l,level:h,lateral:p}}toRects(){let{entriesByLevel:t,levelCoords:r}=this,n=t.length,s=[];for(let i=0;i<n;i+=1){let a=t[i],l=r[i];for(let c of a)s.push(Object.assign(Object.assign({},c),{thickness:this.getEntryThickness(c),levelCoord:l}))}return s}}function S1(e){return e.span.end}function Nc(e){return e.index+":"+e.span.start}function dR(e,t){let r=Math.max(e.start,t.start),n=Math.min(e.end,t.end);return r<n?{start:r,end:n}:null}function Zm(e,t,r){e.splice(t,0,r)}function E1(e,t,r){let n=0,s=e.length;if(!s||t<r(e[n]))return[0,0];if(t>r(e[s-1]))return[s,0];for(;n<s;){let i=Math.floor(n+(s-n)/2),a=r(e[i]);if(t<a)s=i;else if(t>a)n=i+1;else return[i,1]}return[n,0]}class y${constructor(t,r){this.emitter=new kp}destroy(){}setMirrorIsVisible(t){}setMirrorNeedsRevert(t){}setAutoScrollEnabled(t){}}const zv={};function x$(e,t){return!e||t>10?hr({weekday:"short"}):t>1?hr({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):hr({weekday:"long"})}const fR="fc-col-header-cell";function hR(e){return e.text}class v$ extends Ut{render(){let{dateEnv:t,options:r,theme:n,viewApi:s}=this.context,{props:i}=this,{date:a,dateProfile:l}=i,c=lR(a,i.todayRange,null,l),u=[fR].concat(Lv(c,n)),d=t.format(a,i.dayHeaderFormat),f=!c.isDisabled&&i.colCnt>1?uy(this.context,a):{},h=t.toDate(a);t.namedTimeZoneImpl&&(h=Ki(h,36e5));let p=Object.assign(Object.assign(Object.assign({date:h,view:s},i.extraRenderProps),{text:d}),c);return W(oi,{elTag:"th",elClasses:u,elAttrs:Object.assign({role:"columnheader",colSpan:i.colSpan,"data-date":c.isDisabled?void 0:Sv(a)},i.extraDataAttrs),renderProps:p,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:hR,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},m=>W("div",{className:"fc-scrollgrid-sync-inner"},!c.isDisabled&&W(m,{elTag:"a",elAttrs:f,elClasses:["fc-col-header-cell-cushion",i.isSticky&&"fc-sticky"]})))}}const b$=hr({weekday:"long"});class w$ extends Ut{render(){let{props:t}=this,{dateEnv:r,theme:n,viewApi:s,options:i}=this.context,a=or(new Date(2592e5),t.dow),l={dow:t.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},c=r.format(a,t.dayHeaderFormat),u=Object.assign(Object.assign(Object.assign(Object.assign({date:a},l),{view:s}),t.extraRenderProps),{text:c});return W(oi,{elTag:"th",elClasses:[fR,...Lv(l,n),...t.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:t.colSpan},t.extraDataAttrs),renderProps:u,generatorName:"dayHeaderContent",customGenerator:i.dayHeaderContent,defaultGenerator:hR,classNameGenerator:i.dayHeaderClassNames,didMount:i.dayHeaderDidMount,willUnmount:i.dayHeaderWillUnmount},d=>W("div",{className:"fc-scrollgrid-sync-inner"},W(d,{elTag:"a",elClasses:["fc-col-header-cell-cushion",t.isSticky&&"fc-sticky"],elAttrs:{"aria-label":r.format(a,b$)}})))}}class k$ extends Ut{constructor(){super(...arguments),this.createDayHeaderFormatter=ht(S$)}render(){let{context:t}=this,{dates:r,dateProfile:n,datesRepDistinctDays:s,renderIntro:i}=this.props,a=this.createDayHeaderFormatter(t.options.dayHeaderFormat,s,r.length);return W(Sp,{unit:"day"},(l,c)=>W("tr",{role:"row"},i&&i("day"),r.map(u=>s?W(v$,{key:u.toISOString(),date:u,dateProfile:n,todayRange:c,colCnt:r.length,dayHeaderFormat:a}):W(w$,{key:u.getUTCDay(),dow:u.getUTCDay(),dayHeaderFormat:a}))))}}function S$(e,t,r){return e||x$(t,r)}class E${constructor(t,r){let n=t.start,{end:s}=t,i=[],a=[],l=-1;for(;n<s;)r.isHiddenDay(n)?i.push(l+.5):(l+=1,i.push(l),a.push(n)),n=or(n,1);this.dates=a,this.indices=i,this.cnt=a.length}sliceRange(t){let r=this.getDateDayIndex(t.start),n=this.getDateDayIndex(or(t.end,-1)),s=Math.max(0,r),i=Math.min(this.cnt-1,n);return s=Math.ceil(s),i=Math.floor(i),s<=i?{firstIndex:s,lastIndex:i,isStart:r===s,isEnd:n===i}:null}getDateDayIndex(t){let{indices:r}=this,n=Math.floor(xl(this.dates[0],t));return n<0?r[0]-1:n>=r.length?r[r.length-1]+1:r[n]}}class N${constructor(t,r){let{dates:n}=t,s,i,a;if(r){for(i=n[0].getUTCDay(),s=1;s<n.length&&n[s].getUTCDay()!==i;s+=1);a=Math.ceil(n.length/s)}else a=1,s=n.length;this.rowCnt=a,this.colCnt=s,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let t=[];for(let r=0;r<this.rowCnt;r+=1){let n=[];for(let s=0;s<this.colCnt;s+=1)n.push(this.buildCell(r,s));t.push(n)}return t}buildCell(t,r){let n=this.daySeries.dates[t*this.colCnt+r];return{key:n.toISOString(),date:n}}buildHeaderDates(){let t=[];for(let r=0;r<this.colCnt;r+=1)t.push(this.cells[0][r].date);return t}sliceRange(t){let{colCnt:r}=this,n=this.daySeries.sliceRange(t),s=[];if(n){let{firstIndex:i,lastIndex:a}=n,l=i;for(;l<=a;){let c=Math.floor(l/r),u=Math.min((c+1)*r,a+1);s.push({row:c,firstCol:l%r,lastCol:(u-1)%r,isStart:n.isStart&&l===i,isEnd:n.isEnd&&u-1===a}),l=u}}return s}}class C${constructor(){this.sliceBusinessHours=ht(this._sliceBusinessHours),this.sliceDateSelection=ht(this._sliceDateSpan),this.sliceEventStore=ht(this._sliceEventStore),this.sliceEventDrag=ht(this._sliceInteraction),this.sliceEventResize=ht(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(t,r,n,s,...i){let{eventUiBases:a}=t,l=this.sliceEventStore(t.eventStore,a,r,n,...i);return{dateSelectionSegs:this.sliceDateSelection(t.dateSelection,r,n,a,s,...i),businessHourSegs:this.sliceBusinessHours(t.businessHours,r,n,s,...i),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(t.eventDrag,a,r,n,...i),eventResize:this.sliceEventResize(t.eventResize,a,r,n,...i),eventSelection:t.eventSelection}}sliceNowDate(t,r,n,s,...i){return this._sliceDateSpan({range:{start:t,end:Ki(t,1)},allDay:!1},r,n,{},s,...i)}_sliceBusinessHours(t,r,n,s,...i){return t?this._sliceEventStore(Va(t,wd(r,!!n),s),{},r,n,...i).bg:[]}_sliceEventStore(t,r,n,s,...i){if(t){let a=b1(t,r,wd(n,!!s),s);return{bg:this.sliceEventRanges(a.bg,i),fg:this.sliceEventRanges(a.fg,i)}}return{bg:[],fg:[]}}_sliceInteraction(t,r,n,s,...i){if(!t)return null;let a=b1(t.mutatedEvents,r,wd(n,!!s),s);return{segs:this.sliceEventRanges(a.fg,i),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}}_sliceDateSpan(t,r,n,s,i,...a){if(!t)return[];let l=wd(r,!!n),c=sl(t.range,l);if(c){t=Object.assign(Object.assign({},t),{range:c});let u=GW(t,s,i),d=this.sliceRange(t.range,...a);for(let f of d)f.eventRange=u;return d}return[]}sliceEventRanges(t,r){let n=[];for(let s of t)n.push(...this.sliceEventRange(s,r));return n}sliceEventRange(t,r){let n=t.range;this.forceDayIfListItem&&t.ui.display==="list-item"&&(n={start:n.start,end:or(n.start,1)});let s=this.sliceRange(n,...r);for(let i of s)i.eventRange=t,i.isStart=t.isStart&&i.isStart,i.isEnd=t.isEnd&&i.isEnd;return s}}function wd(e,t){let r=e.activeRange;return t?r:{start:Ki(r.start,e.slotMinTime.milliseconds),end:Ki(r.end,e.slotMaxTime.milliseconds-864e5)}}function pR(e,t,r){let{instances:n}=e.mutatedEvents;for(let s in n)if(!bp(t.validRange,n[s].range))return!1;return mR({eventDrag:e},r)}function j$(e,t,r){return bp(t.validRange,e.range)?mR({dateSelection:e},r):!1}function mR(e,t){let r=t.getCurrentData(),n=Object.assign({businessHours:r.businessHours,dateSelection:"",eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},e);return(t.pluginHooks.isPropsValid||T$)(n,t)}function T$(e,t,r={},n){return!(e.eventDrag&&!A$(e,t,r,n)||e.dateSelection&&!D$(e,t,r,n))}function A$(e,t,r,n){let s=t.getCurrentData(),i=e.eventDrag,a=i.mutatedEvents,l=a.defs,c=a.instances,u=ch(l,i.isEvent?e.eventUiBases:{"":s.selectionConfig});n&&(u=Ja(u,n));let d=EW(e.eventStore,i.affectedEvents.instances),f=d.defs,h=d.instances,p=ch(f,e.eventUiBases);for(let m in c){let y=c[m],b=y.range,v=u[y.defId],x=l[y.defId];if(!gR(v.constraints,b,d,e.businessHours,t))return!1;let{eventOverlap:w}=t.options,k=typeof w=="function"?w:null;for(let E in h){let N=h[E];if(Av(b,N.range)&&(p[N.defId].overlap===!1&&i.isEvent||v.overlap===!1||k&&!k(new Mt(t,f[N.defId],N),new Mt(t,x,y))))return!1}let S=s.eventStore;for(let E of v.allows){let N=Object.assign(Object.assign({},r),{range:y.range,allDay:x.allDay}),C=S.defs[x.defId],T=S.instances[m],j;if(C?j=new Mt(t,C,T):j=new Mt(t,x),!E(Mv(N,t),j))return!1}}return!0}function D$(e,t,r,n){let s=e.eventStore,i=s.defs,a=s.instances,l=e.dateSelection,c=l.range,{selectionConfig:u}=t.getCurrentData();if(n&&(u=n(u)),!gR(u.constraints,c,s,e.businessHours,t))return!1;let{selectOverlap:d}=t.options,f=typeof d=="function"?d:null;for(let h in a){let p=a[h];if(Av(c,p.range)&&(u.overlap===!1||f&&!f(new Mt(t,i[p.defId],p),null)))return!1}for(let h of u.allows){let p=Object.assign(Object.assign({},r),l);if(!h(Mv(p,t),null))return!1}return!0}function gR(e,t,r,n,s){for(let i of e)if(!_$(R$(i,t,r,n,s),t))return!1;return!0}function R$(e,t,r,n,s){return e==="businessHours"?Xm(Va(n,t,s)):typeof e=="string"?Xm(wp(r,i=>i.groupId===e)):typeof e=="object"&&e?Xm(Va(e,t,s)):[]}function Xm(e){let{instances:t}=e,r=[];for(let n in t)r.push(t[n].range);return r}function _$(e,t){for(let r of e)if(bp(r,t))return!0;return!1}const kd=/^(visible|hidden)$/;class I$ extends Ut{constructor(){super(...arguments),this.handleEl=t=>{this.el=t,As(this.props.elRef,t)}}render(){let{props:t}=this,{liquid:r,liquidIsAbsolute:n}=t,s=r&&n,i=["fc-scroller"];return r&&(n?i.push("fc-scroller-liquid-absolute"):i.push("fc-scroller-liquid")),W("div",{ref:this.handleEl,className:i.join(" "),style:{overflowX:t.overflowX,overflowY:t.overflowY,left:s&&-(t.overcomeLeft||0)||"",right:s&&-(t.overcomeRight||0)||"",bottom:s&&-(t.overcomeBottom||0)||"",marginLeft:!s&&-(t.overcomeLeft||0)||"",marginRight:!s&&-(t.overcomeRight||0)||"",marginBottom:!s&&-(t.overcomeBottom||0)||"",maxHeight:t.maxHeight||""}},t.children)}needsXScrolling(){if(kd.test(this.props.overflowX))return!1;let{el:t}=this,r=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:n}=t;for(let s=0;s<n.length;s+=1)if(n[s].getBoundingClientRect().width>r)return!0;return!1}needsYScrolling(){if(kd.test(this.props.overflowY))return!1;let{el:t}=this,r=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:n}=t;for(let s=0;s<n.length;s+=1)if(n[s].getBoundingClientRect().height>r)return!0;return!1}getXScrollbarWidth(){return kd.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return kd.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Ea{constructor(t){this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(r,n)=>{let{depths:s,currentMap:i}=this,a=!1,l=!1;r!==null?(a=n in i,i[n]=r,s[n]=(s[n]||0)+1,l=!0):(s[n]-=1,s[n]||(delete i[n],delete this.callbackMap[n],a=!0)),this.masterCallback&&(a&&this.masterCallback(null,String(n)),l&&this.masterCallback(r,String(n)))}}createRef(t){let r=this.callbackMap[t];return r||(r=this.callbackMap[t]=n=>{this.handleValue(n,String(t))}),r}collect(t,r,n){return V9(this.currentMap,t,r,n)}getAll(){return jv(this.currentMap)}}function M$(e){let t=HV(e,".fc-scrollgrid-shrink"),r=0;for(let n of t)r=Math.max(r,r9(n));return Math.ceil(r)}function yR(e,t){return e.liquid&&t.liquid}function O$(e,t){return t.maxHeight!=null||yR(e,t)}function P$(e,t,r,n){let{expandRows:s}=r;return typeof t.content=="function"?t.content(r):W("table",{role:"presentation",className:[t.tableClassName,e.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:r.tableMinWidth,width:r.clientWidth,height:s?r.clientHeight:""}},r.tableColGroupNode,W(n?"thead":"tbody",{role:"presentation"},typeof t.rowContent=="function"?t.rowContent(r):t.rowContent))}function L$(e,t){return qi(e,t,ns)}function F$(e,t){let r=[];for(let n of e){let s=n.span||1;for(let i=0;i<s;i+=1)r.push(W("col",{style:{width:n.width==="shrink"?B$(t):n.width||"",minWidth:n.minWidth||""}}))}return W("colgroup",{},...r)}function B$(e){return e??4}function z$(e){for(let t of e)if(t.width==="shrink")return!0;return!1}function U$(e,t){let r=["fc-scrollgrid",t.theme.getClass("table")];return e&&r.push("fc-scrollgrid-liquid"),r}function H$(e,t){let r=["fc-scrollgrid-section",`fc-scrollgrid-section-${e.type}`,e.className];return t&&e.liquid&&e.maxHeight==null&&r.push("fc-scrollgrid-section-liquid"),e.isSticky&&r.push("fc-scrollgrid-section-sticky"),r}function V$(e){return W("div",{className:"fc-scrollgrid-sticky-shim",style:{width:e.clientWidth,minWidth:e.tableMinWidth}})}function N1(e){let{stickyHeaderDates:t}=e;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}function W$(e){let{stickyFooterScrollbar:t}=e;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}class xR extends Ut{constructor(){super(...arguments),this.processCols=ht(t=>t,L$),this.renderMicroColGroup=ht(F$),this.scrollerRefs=new Ea,this.scrollerElRefs=new Ea(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:t,state:r,context:n}=this,s=t.sections||[],i=this.processCols(t.cols),a=this.renderMicroColGroup(i,r.shrinkWidth),l=U$(t.liquid,n);t.collapsibleWidth&&l.push("fc-scrollgrid-collapsible");let c=s.length,u=0,d,f=[],h=[],p=[];for(;u<c&&(d=s[u]).type==="header";)f.push(this.renderSection(d,a,!0)),u+=1;for(;u<c&&(d=s[u]).type==="body";)h.push(this.renderSection(d,a,!1)),u+=1;for(;u<c&&(d=s[u]).type==="footer";)p.push(this.renderSection(d,a,!0)),u+=1;let m=!aR();const y={role:"rowgroup"};return W("table",{role:"grid",className:l.join(" "),style:{height:t.height}},!!(!m&&f.length)&&W("thead",y,...f),!!(!m&&h.length)&&W("tbody",y,...h),!!(!m&&p.length)&&W("tfoot",y,...p),m&&W("tbody",y,...f,...h,...p))}renderSection(t,r,n){return"outerContent"in t?W(Yt,{key:t.key},t.outerContent):W("tr",{key:t.key,role:"presentation",className:H$(t,this.props.liquid).join(" ")},this.renderChunkTd(t,r,t.chunk,n))}renderChunkTd(t,r,n,s){if("outerContent"in n)return n.outerContent;let{props:i}=this,{forceYScrollbars:a,scrollerClientWidths:l,scrollerClientHeights:c}=this.state,u=O$(i,t),d=yR(i,t),f=i.liquid?a?"scroll":u?"auto":"hidden":"visible",h=t.key,p=P$(t,n,{tableColGroupNode:r,tableMinWidth:"",clientWidth:!i.collapsibleWidth&&l[h]!==void 0?l[h]:null,clientHeight:c[h]!==void 0?c[h]:null,expandRows:t.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},s);return W(s?"th":"td",{ref:n.elRef,role:"presentation"},W("div",{className:`fc-scroller-harness${d?" fc-scroller-harness-liquid":""}`},W(I$,{ref:this.scrollerRefs.createRef(h),elRef:this.scrollerElRefs.createRef(h),overflowY:f,overflowX:i.liquid?"hidden":"visible",maxHeight:t.maxHeight,liquid:d,liquidIsAbsolute:!0},p)))}_handleScrollerEl(t,r){let n=$$(this.props.sections,r);n&&As(n.chunk.scrollerElRef,t)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return z$(this.props.cols)?M$(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let t=c$(),{scrollerRefs:r,scrollerElRefs:n}=this,s=!1,i={},a={};for(let l in r.currentMap){let c=r.currentMap[l];if(c&&c.needsYScrolling()){s=!0;break}}for(let l of this.props.sections){let c=l.key,u=n.currentMap[c];if(u){let d=u.parentNode;i[c]=Math.floor(d.getBoundingClientRect().width-(s?t.y:0)),a[c]=Math.floor(d.getBoundingClientRect().height)}}return{forceYScrollbars:s,scrollerClientWidths:i,scrollerClientHeights:a}}}xR.addStateEquality({scrollerClientWidths:ns,scrollerClientHeights:ns});function $$(e,t){for(let r of e)if(r.key===t)return r;return null}class Uv extends Ut{constructor(){super(...arguments),this.buildPublicEvent=ht((t,r,n)=>new Mt(t,r,n)),this.handleEl=t=>{this.el=t,As(this.props.elRef,t),t&&w1(t,this.props.seg)}}render(){const{props:t,context:r}=this,{options:n}=r,{seg:s}=t,{eventRange:i}=s,{ui:a}=i,l={event:this.buildPublicEvent(r,i.def,i.instance),view:r.viewApi,timeText:t.timeText,textColor:a.textColor,backgroundColor:a.backgroundColor,borderColor:a.borderColor,isDraggable:!t.disableDragging&&PW(s,r),isStartResizable:!t.disableResizing&&LW(s,r),isEndResizable:!t.disableResizing&&FW(s),isMirror:!!(t.isDragging||t.isResizing||t.isDateSelecting),isStart:!!s.isStart,isEnd:!!s.isEnd,isPast:!!t.isPast,isFuture:!!t.isFuture,isToday:!!t.isToday,isSelected:!!t.isSelected,isDragging:!!t.isDragging,isResizing:!!t.isResizing};return W(oi,{elRef:this.handleEl,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:[...BW(l),...s.eventRange.ui.classNames,...t.elClasses||[]],elStyle:t.elStyle,renderProps:l,generatorName:"eventContent",customGenerator:n.eventContent,defaultGenerator:t.defaultGenerator,classNameGenerator:n.eventClassNames,didMount:n.eventDidMount,willUnmount:n.eventWillUnmount},t.children)}componentDidUpdate(t){this.el&&this.props.seg!==t.seg&&w1(this.el,this.props.seg)}}class vR extends Ut{render(){let{props:t,context:r}=this,{options:n}=r,{seg:s}=t,{ui:i}=s.eventRange,a=n.eventTimeFormat||t.defaultTimeFormat,l=rR(s,a,r,t.defaultDisplayEventTime,t.defaultDisplayEventEnd);return W(Uv,Object.assign({},t,{elTag:"a",elStyle:{borderColor:i.borderColor,backgroundColor:i.backgroundColor},elAttrs:nR(s,r),defaultGenerator:Y$,timeText:l}),(c,u)=>W(Yt,null,W(c,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:u.textColor}}),!!u.isStartResizable&&W("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!u.isEndResizable&&W("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}vR.addPropsEquality({seg:ns});function Y$(e){return W("div",{className:"fc-event-main-frame"},e.timeText&&W("div",{className:"fc-event-time"},e.timeText),W("div",{className:"fc-event-title-container"},W("div",{className:"fc-event-title fc-sticky"},e.event.title||W(Yt,null,""))))}const G$=hr({day:"numeric"});class bR extends Ut{constructor(){super(...arguments),this.refineRenderProps=ef(q$)}render(){let{props:t,context:r}=this,{options:n}=r,s=this.refineRenderProps({date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,isMonthStart:t.isMonthStart||!1,showDayNumber:t.showDayNumber,extraRenderProps:t.extraRenderProps,viewApi:r.viewApi,dateEnv:r.dateEnv,monthStartFormat:n.monthStartFormat});return W(oi,{elRef:t.elRef,elTag:t.elTag,elAttrs:Object.assign(Object.assign({},t.elAttrs),s.isDisabled?{}:{"data-date":Sv(t.date)}),elClasses:[...Lv(s,r.theme),...t.elClasses||[]],elStyle:t.elStyle,renderProps:s,generatorName:"dayCellContent",customGenerator:n.dayCellContent,defaultGenerator:t.defaultGenerator,classNameGenerator:s.isDisabled?void 0:n.dayCellClassNames,didMount:n.dayCellDidMount,willUnmount:n.dayCellWillUnmount},t.children)}}function wR(e){return!!(e.dayCellContent||ay("dayCellContent",e))}function q$(e){let{date:t,dateEnv:r,dateProfile:n,isMonthStart:s}=e,i=lR(t,e.todayRange,null,n),a=e.showDayNumber?r.format(t,s?e.monthStartFormat:G$):"";return Object.assign(Object.assign(Object.assign({date:r.toDate(t),view:e.viewApi},i),{isMonthStart:s,dayNumberText:a}),e.extraRenderProps)}class K$ extends Ut{render(){let{props:t}=this,{seg:r}=t;return W(Uv,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:r.eventRange.ui.backgroundColor},defaultGenerator:Q$,seg:r,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:t.isPast,isFuture:t.isFuture,isToday:t.isToday,disableDragging:!0,disableResizing:!0})}}function Q$(e){let{title:t}=e.event;return t&&W("div",{className:"fc-event-title"},e.event.title)}function Z$(e){return W("div",{className:`fc-${e}`})}const X$=e=>W(eo.Consumer,null,t=>{let{dateEnv:r,options:n}=t,{date:s}=e,i=n.weekNumberFormat||e.defaultFormat,a=r.computeWeekNumber(s),l=r.format(s,i),c={num:a,text:l,date:s};return W(oi,{elRef:e.elRef,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:e.elClasses,elStyle:e.elStyle,renderProps:c,generatorName:"weekNumberContent",customGenerator:n.weekNumberContent,defaultGenerator:J$,classNameGenerator:n.weekNumberClassNames,didMount:n.weekNumberDidMount,willUnmount:n.weekNumberWillUnmount},e.children)});function J$(e){return e.text}const Jm=10;class eY extends Ut{constructor(){super(...arguments),this.state={titleId:yp()},this.handleRootEl=t=>{this.rootEl=t,this.props.elRef&&As(this.props.elRef,t)},this.handleDocumentMouseDown=t=>{const r=_D(t);this.rootEl.contains(r)||this.handleCloseClick()},this.handleDocumentKeyDown=t=>{t.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:t}=this.props;t&&t()}}render(){let{theme:t,options:r}=this.context,{props:n,state:s}=this,i=["fc-popover",t.getClass("popover")].concat(n.extraClassNames||[]);return TV(W("div",Object.assign({},n.extraAttrs,{id:n.id,className:i.join(" "),"aria-labelledby":s.titleId,ref:this.handleRootEl}),W("div",{className:"fc-popover-header "+t.getClass("popoverHeader")},W("span",{className:"fc-popover-title",id:s.titleId},n.title),W("span",{className:"fc-popover-close "+t.getIconClass("close"),title:r.closeHint,onClick:this.handleCloseClick})),W("div",{className:"fc-popover-body "+t.getClass("popoverContent")},n.children)),n.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:t}=this.context,{alignmentEl:r,alignGridTop:n}=this.props,{rootEl:s}=this,i=h$(r);if(i){let a=s.getBoundingClientRect(),l=n?Ir(r,".fc-scrollgrid").getBoundingClientRect().top:i.top,c=t?i.right-a.width:i.left;l=Math.max(l,Jm),c=Math.min(c,document.documentElement.clientWidth-Jm-a.width),c=Math.max(c,Jm);let u=s.offsetParent.getBoundingClientRect();wc(s,{top:l-u.top,left:c-u.left})}}}class tY extends ro{constructor(){super(...arguments),this.handleRootEl=t=>{this.rootEl=t,t?this.context.registerInteractiveComponent(this,{el:t,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:t,dateEnv:r}=this.context,{props:n}=this,{startDate:s,todayRange:i,dateProfile:a}=n,l=r.format(s,t.dayPopoverFormat);return W(bR,{elRef:this.handleRootEl,date:s,dateProfile:a,todayRange:i},(c,u,d)=>W(eY,{elRef:d.ref,id:n.id,title:l,extraClassNames:["fc-more-popover"].concat(d.className||[]),extraAttrs:d,parentEl:n.parentEl,alignmentEl:n.alignmentEl,alignGridTop:n.alignGridTop,onClose:n.onClose},wR(t)&&W(c,{elTag:"div",elClasses:["fc-more-popover-misc"]}),n.children))}queryHit(t,r,n,s){let{rootEl:i,props:a}=this;return t>=0&&t<n&&r>=0&&r<s?{dateProfile:a.dateProfile,dateSpan:Object.assign({allDay:!a.forceTimed,range:{start:a.startDate,end:a.endDate}},a.extraDateSpan),dayEl:i,rect:{left:0,top:0,right:n,bottom:s},layer:1}:null}}class rY extends Ut{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:yp()},this.handleLinkEl=t=>{this.linkEl=t,this.props.elRef&&As(this.props.elRef,t)},this.handleClick=t=>{let{props:r,context:n}=this,{moreLinkClick:s}=n.options,i=C1(r).start;function a(l){let{def:c,instance:u,range:d}=l.eventRange;return{event:new Mt(n,c,u),start:n.dateEnv.toDate(d.start),end:n.dateEnv.toDate(d.end),isStart:l.isStart,isEnd:l.isEnd}}typeof s=="function"&&(s=s({date:i,allDay:!!r.allDayDate,allSegs:r.allSegs.map(a),hiddenSegs:r.hiddenSegs.map(a),jsEvent:t,view:n.viewApi})),!s||s==="popover"?this.setState({isPopoverOpen:!0}):typeof s=="string"&&n.calendarApi.zoomTo(i,s)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:t,state:r}=this;return W(eo.Consumer,null,n=>{let{viewApi:s,options:i,calendarApi:a}=n,{moreLinkText:l}=i,{moreCnt:c}=t,u=C1(t),d=typeof l=="function"?l.call(a,c):`+${c} ${l}`,f=kc(i.moreLinkHint,[c],d),h={num:c,shortText:`+${c}`,text:d,view:s};return W(Yt,null,!!t.moreCnt&&W(oi,{elTag:t.elTag||"a",elRef:this.handleLinkEl,elClasses:[...t.elClasses||[],"fc-more-link"],elStyle:t.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},t.elAttrs),MD(this.handleClick)),{title:f,"aria-expanded":r.isPopoverOpen,"aria-controls":r.isPopoverOpen?r.popoverId:""}),renderProps:h,generatorName:"moreLinkContent",customGenerator:i.moreLinkContent,defaultGenerator:t.defaultGenerator||nY,classNameGenerator:i.moreLinkClassNames,didMount:i.moreLinkDidMount,willUnmount:i.moreLinkWillUnmount},t.children),r.isPopoverOpen&&W(tY,{id:r.popoverId,startDate:u.start,endDate:u.end,dateProfile:t.dateProfile,todayRange:t.todayRange,extraDateSpan:t.extraDateSpan,parentEl:this.parentEl,alignmentEl:t.alignmentElRef?t.alignmentElRef.current:this.linkEl,alignGridTop:t.alignGridTop,forceTimed:t.forceTimed,onClose:this.handlePopoverClose},t.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Ir(this.linkEl,".fc-view-harness"))}}function nY(e){return e.text}function C1(e){if(e.allDayDate)return{start:e.allDayDate,end:or(e.allDayDate,1)};let{hiddenSegs:t}=e;return{start:sY(t),end:aY(t)}}function sY(e){return e.reduce(iY).eventRange.range.start}function iY(e,t){return e.eventRange.range.start<t.eventRange.range.start?e:t}function aY(e){return e.reduce(oY).eventRange.range.end}function oY(e,t){return e.eventRange.range.end>t.eventRange.range.end?e:t}class lY{constructor(){this.handlers=[]}set(t){this.currentValue=t;for(let r of this.handlers)r(t)}subscribe(t){this.handlers.push(t),this.currentValue!==void 0&&t(this.currentValue)}}class cY extends lY{constructor(){super(...arguments),this.map=new Map}handle(t){const{map:r}=this;let n=!1;t.isActive?(r.set(t.id,t),n=!0):r.has(t.id)&&(r.delete(t.id),n=!0),n&&this.set(r)}}const uY=[],kR={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},SR=Object.assign(Object.assign({},kR),{buttonHints:{prev:"Previous $0",next:"Next $0",today(e,t){return t==="day"?"Today":`This ${e}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(e){return`Show ${e} more event${e===1?"":"s"}`}});function dY(e){let t=e.length>0?e[0].code:"en",r=uY.concat(e),n={en:SR};for(let s of r)n[s.code]=s;return{map:n,defaultCode:t}}function ER(e,t){return typeof e=="object"&&!Array.isArray(e)?NR(e.code,[e.code],e):fY(e,t)}function fY(e,t){let r=[].concat(e||[]),n=hY(r,t)||SR;return NR(e,r,n)}function hY(e,t){for(let r=0;r<e.length;r+=1){let n=e[r].toLocaleLowerCase().split("-");for(let s=n.length;s>0;s-=1){let i=n.slice(0,s).join("-");if(t[i])return t[i]}}return null}function NR(e,t,r){let n=Cv([kR,r],["buttonText"]);delete n.code;let{week:s}=n;return delete n.week,{codeArg:e,codes:t,week:s,simpleNumberFormat:new Intl.NumberFormat(e),options:n}}function li(e){return{id:Xa(),name:e.name,premiumReleaseDate:e.premiumReleaseDate?new Date(e.premiumReleaseDate):void 0,deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}}}function pY(e,t){let r={},n={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function s(i){for(let a of i){const l=a.name,c=r[l];c===void 0?(r[l]=a.id,s(a.deps),n=gY(n,a)):c!==a.id&&console.warn(`Duplicate plugin '${l}'`)}}return e&&s(e),s(t),n}function mY(){let e=[],t=[],r;return(n,s)=>((!r||!qi(n,e)||!qi(s,t))&&(r=pY(n,s)),e=n,t=s,r)}function gY(e,t){return{premiumReleaseDate:yY(e.premiumReleaseDate,t.premiumReleaseDate),reducers:e.reducers.concat(t.reducers),isLoadingFuncs:e.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:e.contextInit.concat(t.contextInit),eventRefiners:Object.assign(Object.assign({},e.eventRefiners),t.eventRefiners),eventDefMemberAdders:e.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},e.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:e.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:e.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:e.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:e.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:e.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:e.dateSpanTransforms.concat(t.dateSpanTransforms),views:Object.assign(Object.assign({},e.views),t.views),viewPropsTransformers:e.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||e.isPropsValid,externalDefTransforms:e.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:e.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:e.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:e.calendarInteractions.concat(t.calendarInteractions),componentInteractions:e.componentInteractions.concat(t.componentInteractions),themeClasses:Object.assign(Object.assign({},e.themeClasses),t.themeClasses),eventSourceDefs:e.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||e.cmdFormatter,recurringTypes:e.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||e.namedTimeZonedImpl,initialView:e.initialView||t.initialView,elementDraggingImpl:e.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},e.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||e.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},e.listenerRefiners),t.listenerRefiners),optionRefiners:Object.assign(Object.assign({},e.optionRefiners),t.optionRefiners),propSetHandlers:Object.assign(Object.assign({},e.propSetHandlers),t.propSetHandlers)}}function yY(e,t){return e===void 0?t:t===void 0?e:new Date(Math.max(e.valueOf(),t.valueOf()))}class ra extends Lu{}ra.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};ra.prototype.baseIconClass="fc-icon";ra.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};ra.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};ra.prototype.iconOverrideOption="buttonIcons";ra.prototype.iconOverrideCustomButtonOption="icon";ra.prototype.iconOverridePrefix="fc-icon-";function xY(e,t){let r={},n;for(n in e)dy(n,r,e,t);for(n in t)dy(n,r,e,t);return r}function dy(e,t,r,n){if(t[e])return t[e];let s=vY(e,t,r,n);return s&&(t[e]=s),s}function vY(e,t,r,n){let s=r[e],i=n[e],a=d=>s&&s[d]!==null?s[d]:i&&i[d]!==null?i[d]:null,l=a("component"),c=a("superType"),u=null;if(c){if(c===e)throw new Error("Can't have a custom view type that references itself");u=dy(c,t,r,n)}return!l&&u&&(l=u.component),l?{type:e,component:l,defaults:Object.assign(Object.assign({},u?u.defaults:{}),s?s.rawOptions:{}),overrides:Object.assign(Object.assign({},u?u.overrides:{}),i?i.rawOptions:{})}:null}function j1(e){return Ja(e,bY)}function bY(e){let t=typeof e=="function"?{component:e}:e,{component:r}=t;return t.content?r=T1(t):r&&!(r.prototype instanceof Ut)&&(r=T1(Object.assign(Object.assign({},t),{content:r}))),{superType:t.type,component:r,rawOptions:t}}function T1(e){return t=>W(eo.Consumer,null,r=>W(oi,{elTag:"div",elClasses:HD(r.viewSpec),renderProps:Object.assign(Object.assign({},t),{nextDayThreshold:r.options.nextDayThreshold}),generatorName:void 0,customGenerator:e.content,classNameGenerator:e.classNames,didMount:e.didMount,willUnmount:e.willUnmount}))}function wY(e,t,r,n){let s=j1(e),i=j1(t.views),a=xY(s,i);return Ja(a,l=>kY(l,i,t,r,n))}function kY(e,t,r,n,s){let i=e.overrides.duration||e.defaults.duration||n.duration||r.duration,a=null,l="",c="",u={};if(i&&(a=SY(i),a)){let h=iy(a);l=h.unit,h.value===1&&(c=l,u=t[l]?t[l].rawOptions:{})}let d=h=>{let p=h.buttonText||{},m=e.defaults.buttonTextKey;return m!=null&&p[m]!=null?p[m]:p[e.type]!=null?p[e.type]:p[c]!=null?p[c]:null},f=h=>{let p=h.buttonHints||{},m=e.defaults.buttonTextKey;return m!=null&&p[m]!=null?p[m]:p[e.type]!=null?p[e.type]:p[c]!=null?p[c]:null};return{type:e.type,component:e.component,duration:a,durationUnit:l,singleUnit:c,optionDefaults:e.defaults,optionOverrides:Object.assign(Object.assign({},u),e.overrides),buttonTextOverride:d(n)||d(r)||e.overrides.buttonText,buttonTextDefault:d(s)||e.defaults.buttonText||d(Sc)||e.type,buttonTitleOverride:f(n)||f(r)||e.overrides.buttonHint,buttonTitleDefault:f(s)||e.defaults.buttonHint||f(Sc)}}let A1={};function SY(e){let t=JSON.stringify(e),r=A1[t];return r===void 0&&(r=ft(e),A1[t]=r),r}function EY(e,t){switch(t.type){case"CHANGE_VIEW_TYPE":e=t.viewType}return e}function NY(e,t){switch(t.type){case"CHANGE_DATE":return t.dateMarker;default:return e}}function CY(e,t,r){let n=e.initialDate;return n!=null?t.createMarker(n):r.getDateMarker()}function jY(e,t){switch(t.type){case"SET_OPTION":return Object.assign(Object.assign({},e),{[t.optionName]:t.rawOptionValue});default:return e}}function TY(e,t,r,n){let s;switch(t.type){case"CHANGE_VIEW_TYPE":return n.build(t.dateMarker||r);case"CHANGE_DATE":return n.build(t.dateMarker);case"PREV":if(s=n.buildPrev(e,r),s.isValid)return s;break;case"NEXT":if(s=n.buildNext(e,r),s.isValid)return s;break}return e}function AY(e,t,r){let n=t?t.activeRange:null;return jR({},PY(e,r),n,r)}function DY(e,t,r,n){let s=r?r.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return jR(e,t.sources,s,n);case"REMOVE_EVENT_SOURCE":return _Y(e,t.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?TR(e,s,n):e;case"FETCH_EVENT_SOURCES":return Hv(e,t.sourceIds?LD(t.sourceIds):AR(e,n),s,t.isRefetch||!1,n);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return OY(e,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e}}function RY(e,t,r){let n=t?t.activeRange:null;return Hv(e,AR(e,r),n,!0,r)}function CR(e){for(let t in e)if(e[t].isFetching)return!0;return!1}function jR(e,t,r,n){let s={};for(let i of t)s[i.sourceId]=i;return r&&(s=TR(s,r,n)),Object.assign(Object.assign({},e),s)}function _Y(e,t){return Ha(e,r=>r.sourceId!==t)}function TR(e,t,r){return Hv(e,Ha(e,n=>IY(n,t,r)),t,!1,r)}function IY(e,t,r){return DR(e,r)?!r.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end:!e.latestFetchId}function Hv(e,t,r,n,s){let i={};for(let a in e){let l=e[a];t[a]?i[a]=MY(l,r,n,s):i[a]=l}return i}function MY(e,t,r,n){let{options:s,calendarApi:i}=n,a=n.pluginHooks.eventSourceDefs[e.sourceDefId],l=Xa();return a.fetch({eventSource:e,range:t,isRefetch:r,context:n},c=>{let{rawEvents:u}=c;s.eventSourceSuccess&&(u=s.eventSourceSuccess.call(i,u,c.response)||u),e.success&&(u=e.success.call(i,u,c.response)||u),n.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:l,fetchRange:t,rawEvents:u})},c=>{let u=!1;s.eventSourceFailure&&(s.eventSourceFailure.call(i,c),u=!0),e.failure&&(e.failure(c),u=!0),u||console.warn(c.message,c),n.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:l,fetchRange:t,error:c})}),Object.assign(Object.assign({},e),{isFetching:!0,latestFetchId:l})}function OY(e,t,r,n){let s=e[t];return s&&r===s.latestFetchId?Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},s),{isFetching:!1,fetchRange:n})}):e}function AR(e,t){return Ha(e,r=>DR(r,t))}function PY(e,t){let r=QD(t),n=[].concat(e.eventSources||[]),s=[];e.initialEvents&&n.unshift(e.initialEvents),e.events&&n.unshift(e.events);for(let i of n){let a=KD(i,t,r);a&&s.push(a)}return s}function DR(e,t){return!t.pluginHooks.eventSourceDefs[e.sourceDefId].ignoreRange}function LY(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e}}function FY(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e}}function BY(e,t){let r;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return r=t.state,{affectedEvents:r.affectedEvents,mutatedEvents:r.mutatedEvents,isEvent:r.isEvent};default:return e}}function zY(e,t){let r;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return r=t.state,{affectedEvents:r.affectedEvents,mutatedEvents:r.mutatedEvents,isEvent:r.isEvent};default:return e}}function UY(e,t,r,n,s){let i=e.headerToolbar?D1(e.headerToolbar,e,t,r,n,s):null,a=e.footerToolbar?D1(e.footerToolbar,e,t,r,n,s):null;return{header:i,footer:a}}function D1(e,t,r,n,s,i){let a={},l=[],c=!1;for(let u in e){let d=e[u],f=HY(d,t,r,n,s,i);a[u]=f.widgets,l.push(...f.viewsWithButtons),c=c||f.hasTitle}return{sectionWidgets:a,viewsWithButtons:l,hasTitle:c}}function HY(e,t,r,n,s,i){let a=t.direction==="rtl",l=t.customButtons||{},c=r.buttonText||{},u=t.buttonText||{},d=r.buttonHints||{},f=t.buttonHints||{},h=e?e.split(" "):[],p=[],m=!1;return{widgets:h.map(b=>b.split(",").map(v=>{if(v==="title")return m=!0,{buttonName:v};let x,w,k,S,E,N;if(x=l[v])k=C=>{x.click&&x.click.call(C.target,C,C.target)},(S=n.getCustomButtonIconClass(x))||(S=n.getIconClass(v,a))||(E=x.text),N=x.hint||x.text;else if(w=s[v]){p.push(v),k=()=>{i.changeView(v)},(E=w.buttonTextOverride)||(S=n.getIconClass(v,a))||(E=w.buttonTextDefault);let C=w.buttonTextOverride||w.buttonTextDefault;N=kc(w.buttonTitleOverride||w.buttonTitleDefault||t.viewHint,[C,v],C)}else if(i[v])if(k=()=>{i[v]()},(E=c[v])||(S=n.getIconClass(v,a))||(E=u[v]),v==="prevYear"||v==="nextYear"){let C=v==="prevYear"?"prev":"next";N=kc(d[C]||f[C],[u.year||"year","year"],u[v])}else N=C=>kc(d[v]||f[v],[u[C]||C,C],u[v]);return{buttonName:v,buttonClick:k,buttonIcon:S,buttonText:E,buttonHint:N}})),viewsWithButtons:p,hasTitle:m}}class VY{constructor(t,r,n){this.type=t,this.getCurrentData=r,this.dateEnv=n}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(t){return this.getCurrentData().options[t]}}let WY={ignoreRange:!0,parseMeta(e){return Array.isArray(e.events)?e.events:null},fetch(e,t){t({rawEvents:e.eventSource.meta})}};const $Y=li({name:"array-event-source",eventSourceDefs:[WY]});let YY={parseMeta(e){return typeof e.events=="function"?e.events:null},fetch(e,t,r){const{dateEnv:n}=e.context,s=e.eventSource.meta;qW(s.bind(null,sR(e.range,n)),i=>t({rawEvents:i}),r)}};const GY=li({name:"func-event-source",eventSourceDefs:[YY]}),qY={method:String,extraParams:V,startParam:String,endParam:String,timeZoneParam:String};let KY={parseMeta(e){return e.url&&(e.format==="json"||!e.format)?{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam}:null},fetch(e,t,r){const{meta:n}=e.eventSource,s=ZY(n,e.range,e.context);KW(n.method,n.url,s).then(([i,a])=>{t({rawEvents:i,response:a})},r)}};const QY=li({name:"json-event-source",eventSourceRefiners:qY,eventSourceDefs:[KY]});function ZY(e,t,r){let{dateEnv:n,options:s}=r,i,a,l,c,u={};return i=e.startParam,i==null&&(i=s.startParam),a=e.endParam,a==null&&(a=s.endParam),l=e.timeZoneParam,l==null&&(l=s.timeZoneParam),typeof e.extraParams=="function"?c=e.extraParams():c=e.extraParams||{},Object.assign(u,c),u[i]=n.formatIso(t.start),u[a]=n.formatIso(t.end),n.timeZone!=="local"&&(u[l]=n.timeZone),u}const XY={daysOfWeek:V,startTime:ft,endTime:ft,duration:ft,startRecur:V,endRecur:V};let JY={parse(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){let r={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null,dateEnv:t},n;return e.duration&&(n=e.duration),!n&&e.startTime&&e.endTime&&(n=a9(e.endTime,e.startTime)),{allDayGuess:!e.startTime&&!e.endTime,duration:n,typeData:r}}return null},expand(e,t,r){let n=sl(t,{start:e.startRecur,end:e.endRecur});return n?tG(e.daysOfWeek,e.startTime,e.dateEnv,r,n):[]}};const eG=li({name:"simple-recurring-event",recurringTypes:[JY],eventRefiners:XY});function tG(e,t,r,n,s){let i=e?LD(e):null,a=It(s.start),l=s.end,c=[];for(t&&(t.milliseconds<0?l=or(l,1):t.milliseconds>=1e3*60*60*24&&(a=or(a,-1)));a<l;){let u;(!i||i[a.getUTCDay()])&&(t?u=n.add(a,t):u=a,c.push(n.createMarker(r.toDate(u)))),a=or(a,1)}return c}const rG=li({name:"change-handler",optionChangeHandlers:{events(e,t){R1([e],t)},eventSources:R1}});function R1(e,t){let r=jv(t.getCurrentData().eventSources);if(r.length===1&&e.length===1&&Array.isArray(r[0]._raw)&&Array.isArray(e[0])){t.dispatch({type:"RESET_RAW_EVENTS",sourceId:r[0].sourceId,rawEvents:e[0]});return}let n=[];for(let s of e){let i=!1;for(let a=0;a<r.length;a+=1)if(r[a]._raw===s){r.splice(a,1),i=!0;break}i||n.push(s)}for(let s of r)t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:s.sourceId});for(let s of n)t.calendarApi.addEventSource(s)}function nG(e,t){t.emitter.trigger("datesSet",Object.assign(Object.assign({},sR(e.activeRange,t.dateEnv)),{view:t.viewApi}))}function sG(e,t){let{emitter:r}=t;r.hasHandlers("eventsSet")&&r.trigger("eventsSet",_a(e,t))}const iG=[$Y,GY,QY,eG,rG,li({name:"misc",isLoadingFuncs:[e=>CR(e.eventSources)],propSetHandlers:{dateProfile:nG,eventStore:sG}})];class aG{constructor(t,r){this.runTaskOption=t,this.drainedOption=r,this.queue=[],this.delayedRunner=new vv(this.drain.bind(this))}request(t,r){this.queue.push(t),this.delayedRunner.request(r)}pause(t){this.delayedRunner.pause(t)}resume(t,r){this.delayedRunner.resume(t,r)}drain(){let{queue:t}=this;for(;t.length;){let r=[],n;for(;n=t.shift();)this.runTask(n),r.push(n);this.drained(r)}}runTask(t){this.runTaskOption&&this.runTaskOption(t)}drained(t){this.drainedOption&&this.drainedOption(t)}}function oG(e,t,r){let n;return/^(year|month)$/.test(e.currentRangeUnit)?n=e.currentRange:n=e.activeRange,r.formatRange(n.start,n.end,hr(t.titleFormat||lG(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}function lG(e){let{currentRangeUnit:t}=e;if(t==="year")return{year:"numeric"};if(t==="month")return{year:"numeric",month:"long"};let r=rh(e.currentRange.start,e.currentRange.end);return r!==null&&r>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class _1{constructor(){this.resetListeners=new Set}handleInput(t,r){const n=this.dateEnv;if(t!==n&&(typeof r=="function"?this.nowFn=r:n||(this.nowAnchorDate=t.toDate(r?t.createMarker(r):t.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=t,n))for(const s of this.resetListeners.values())s()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(t){this.resetListeners.add(t)}removeResetListener(t){this.resetListeners.delete(t)}}class cG{constructor(t){this.computeCurrentViewData=ht(this._computeCurrentViewData),this.organizeRawLocales=ht(dY),this.buildLocale=ht(ER),this.buildPluginHooks=mY(),this.buildDateEnv=ht(uG),this.buildTheme=ht(dG),this.parseToolbars=ht(UY),this.buildViewSpecs=ht(wY),this.buildDateProfileGenerator=ef(fG),this.buildViewApi=ht(hG),this.buildViewUiProps=ef(gG),this.buildEventUiBySource=ht(pG,ns),this.buildEventUiBases=ht(mG),this.parseContextBusinessHours=ef(yG),this.buildTitle=ht(oG),this.nowManager=new _1,this.emitter=new kp,this.actionRunner=new aG(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=h=>{this.actionRunner.request(h)},this.props=t,this.actionRunner.pause(),this.nowManager=new _1;let r={},n=this.computeOptionsData(t.optionOverrides,r,t.calendarApi),s=n.calendarOptions.initialView||n.pluginHooks.initialView,i=this.computeCurrentViewData(s,n,t.optionOverrides,r);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(i.options);let a={nowManager:this.nowManager,dateEnv:n.dateEnv,options:n.calendarOptions,pluginHooks:n.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l=CY(n.calendarOptions,n.dateEnv,this.nowManager),c=i.dateProfileGenerator.build(l);Hi(c.activeRange,l)||(l=c.currentRange.start);for(let h of n.pluginHooks.contextInit)h(a);let u=AY(n.calendarOptions,c,a),d={dynamicOptionOverrides:r,currentViewType:s,currentDate:l,dateProfile:c,businessHours:this.parseContextBusinessHours(a),eventSources:u,eventUiBases:{},eventStore:es(),renderableEventStore:es(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(a).selectionConfig},f=Object.assign(Object.assign({},a),d);for(let h of n.pluginHooks.reducers)Object.assign(d,h(null,null,f));eg(d,a)&&this.emitter.trigger("loading",!0),this.state=d,this.updateData(),this.actionRunner.resume()}resetOptions(t,r){let{props:n}=this;r===void 0?n.optionOverrides=t:(n.optionOverrides=Object.assign(Object.assign({},n.optionOverrides||{}),t),this.optionsForRefining.push(...r)),(r===void 0||r.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(t){let{props:r,state:n,emitter:s}=this,i=jY(n.dynamicOptionOverrides,t),a=this.computeOptionsData(r.optionOverrides,i,r.calendarApi),l=EY(n.currentViewType,t),c=this.computeCurrentViewData(l,a,r.optionOverrides,i);r.calendarApi.currentDataManager=this,s.setThisContext(r.calendarApi),s.setOptions(c.options);let u={nowManager:this.nowManager,dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:r.calendarApi,dispatch:this.dispatch,emitter:s,getCurrentData:this.getCurrentData},{currentDate:d,dateProfile:f}=n;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(f=c.dateProfileGenerator.build(d)),d=NY(d,t),f=TY(f,t,d,c.dateProfileGenerator),(t.type==="PREV"||t.type==="NEXT"||!Hi(f.currentRange,d))&&(d=f.currentRange.start);let h=DY(n.eventSources,t,f,u),p=bW(n.eventStore,t,h,f,u),y=CR(h)&&!c.options.progressiveEventRendering&&n.renderableEventStore||p,{eventUiSingleBase:b,selectionConfig:v}=this.buildViewUiProps(u),x=this.buildEventUiBySource(h),w=this.buildEventUiBases(y.defs,b,x),k={dynamicOptionOverrides:i,currentViewType:l,currentDate:d,dateProfile:f,eventSources:h,eventStore:p,renderableEventStore:y,selectionConfig:v,eventUiBases:w,businessHours:this.parseContextBusinessHours(u),dateSelection:LY(n.dateSelection,t),eventSelection:FY(n.eventSelection,t),eventDrag:BY(n.eventDrag,t),eventResize:zY(n.eventResize,t)},S=Object.assign(Object.assign({},u),k);for(let C of a.pluginHooks.reducers)Object.assign(k,C(n,t,S));let E=eg(n,u),N=eg(k,u);!E&&N?s.trigger("loading",!0):E&&!N&&s.trigger("loading",!1),this.state=k,r.onAction&&r.onAction(t)}updateData(){let{props:t,state:r}=this,n=this.data,s=this.computeOptionsData(t.optionOverrides,r.dynamicOptionOverrides,t.calendarApi),i=this.computeCurrentViewData(r.currentViewType,s,t.optionOverrides,r.dynamicOptionOverrides),a=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(r.dateProfile,i.options,s.dateEnv),calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},s),i),r),l=s.pluginHooks.optionChangeHandlers,c=n&&n.calendarOptions,u=s.calendarOptions;if(c&&c!==u){c.timeZone!==u.timeZone&&(r.eventSources=a.eventSources=RY(a.eventSources,r.dateProfile,a),r.eventStore=a.eventStore=x1(a.eventStore,n.dateEnv,a.dateEnv),r.renderableEventStore=a.renderableEventStore=x1(a.renderableEventStore,n.dateEnv,a.dateEnv));for(let d in l)(this.optionsForHandling.indexOf(d)!==-1||c[d]!==u[d])&&l[d](u[d],a)}this.optionsForHandling=[],t.onData&&t.onData(a)}computeOptionsData(t,r,n){if(!this.optionsForRefining.length&&t===this.stableOptionOverrides&&r===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:s,pluginHooks:i,localeDefaults:a,availableLocaleData:l,extra:c}=this.processRawCalendarOptions(t,r);I1(c);let u=this.buildDateEnv(s.timeZone,s.locale,s.weekNumberCalculation,s.firstDay,s.weekText,i,l,s.defaultRangeSeparator),d=this.buildViewSpecs(i.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,a),f=this.buildTheme(s,i),h=this.parseToolbars(s,this.stableOptionOverrides,f,d,n);return this.stableCalendarOptionsData={calendarOptions:s,pluginHooks:i,dateEnv:u,viewSpecs:d,theme:f,toolbarConfig:h,localeDefaults:a,availableRawLocales:l.map}}processRawCalendarOptions(t,r){let{locales:n,locale:s}=Ym([Sc,t,r]),i=this.organizeRawLocales(n),a=i.map,l=this.buildLocale(s||i.defaultCode,a).options,c=this.buildPluginHooks(t.plugins||[],iG),u=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},d1),f1),h1),c.listenerRefiners),c.optionRefiners),d={},f=Ym([Sc,l,t,r]),h={},p=this.currentCalendarOptionsInput,m=this.currentCalendarOptionsRefined,y=!1;for(let b in f)this.optionsForRefining.indexOf(b)===-1&&(f[b]===p[b]||pa[b]&&b in p&&pa[b](p[b],f[b]))?h[b]=m[b]:u[b]?(h[b]=u[b](f[b]),y=!0):d[b]=p[b];return y&&(this.currentCalendarOptionsInput=f,this.currentCalendarOptionsRefined=h,this.stableOptionOverrides=t,this.stableDynamicOptionOverrides=r),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:i,localeDefaults:l,extra:d}}_computeCurrentViewData(t,r,n,s){let i=r.viewSpecs[t];if(!i)throw new Error(`viewType "${t}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:a,extra:l}=this.processRawViewOptions(i,r.pluginHooks,r.localeDefaults,n,s);I1(l),this.nowManager.handleInput(r.dateEnv,a.now);let c=this.buildDateProfileGenerator({dateProfileGeneratorClass:i.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:i.duration,durationUnit:i.durationUnit,usesMinMaxTime:i.optionDefaults.usesMinMaxTime,dateEnv:r.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,showNonCurrentDates:a.showNonCurrentDates,dayCount:a.dayCount,dateAlignment:a.dateAlignment,dateIncrement:a.dateIncrement,hiddenDays:a.hiddenDays,weekends:a.weekends,validRangeInput:a.validRange,visibleRangeInput:a.visibleRange,fixedWeekCount:a.fixedWeekCount}),u=this.buildViewApi(t,this.getCurrentData,r.dateEnv);return{viewSpec:i,options:a,dateProfileGenerator:c,viewApi:u}}processRawViewOptions(t,r,n,s,i){let a=Ym([Sc,t.optionDefaults,n,s,t.optionOverrides,i]),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},d1),f1),h1),F9),r.listenerRefiners),r.optionRefiners),c={},u=this.currentViewOptionsInput,d=this.currentViewOptionsRefined,f=!1,h={};for(let p in a)a[p]===u[p]||pa[p]&&pa[p](a[p],u[p])?c[p]=d[p]:(a[p]===this.currentCalendarOptionsInput[p]||pa[p]&&pa[p](a[p],this.currentCalendarOptionsInput[p])?p in this.currentCalendarOptionsRefined&&(c[p]=this.currentCalendarOptionsRefined[p]):l[p]?c[p]=l[p](a[p]):h[p]=a[p],f=!0);return f&&(this.currentViewOptionsInput=a,this.currentViewOptionsRefined=c),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}}}function uG(e,t,r,n,s,i,a,l){let c=ER(t||a.defaultCode,a.map);return new q9({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:i.namedTimeZonedImpl,locale:c,weekNumberCalculation:r,firstDay:n,weekText:s,cmdFormatter:i.cmdFormatter,defaultSeparator:l})}function dG(e,t){let r=t.themeClasses[e.themeSystem]||ra;return new r(e)}function fG(e){let t=e.dateProfileGeneratorClass||$D;return new t(e)}function hG(e,t,r){return new VY(e,t,r)}function pG(e){return Ja(e,t=>t.ui)}function mG(e,t,r){let n={"":t};for(let s in e){let i=e[s];i.sourceId&&r[i.sourceId]&&(n[s]=r[i.sourceId])}return n}function gG(e){let{options:t}=e;return{eventUiSingleBase:lh({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:typeof t.eventOverlap=="boolean"?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:lh({constraint:t.selectConstraint,overlap:typeof t.selectOverlap=="boolean"?t.selectOverlap:void 0,allow:t.selectAllow},e)}}function eg(e,t){for(let r of t.pluginHooks.isLoadingFuncs)if(r(e))return!0;return!1}function yG(e){return AW(e.options.businessHours,e)}function I1(e,t){for(let r in e)console.warn(`Unknown option '${r}'`)}class xG extends Ut{render(){let t=this.props.widgetGroups.map(r=>this.renderWidgetGroup(r));return W("div",{className:"fc-toolbar-chunk"},...t)}renderWidgetGroup(t){let{props:r}=this,{theme:n}=this.context,s=[],i=!0;for(let a of t){let{buttonName:l,buttonClick:c,buttonText:u,buttonIcon:d,buttonHint:f}=a;if(l==="title")i=!1,s.push(W("h2",{className:"fc-toolbar-title",id:r.titleId},r.title));else{let h=l===r.activeButton,p=!r.isTodayEnabled&&l==="today"||!r.isPrevEnabled&&l==="prev"||!r.isNextEnabled&&l==="next",m=[`fc-${l}-button`,n.getClass("button")];h&&m.push(n.getClass("buttonActive")),s.push(W("button",{type:"button",title:typeof f=="function"?f(r.navUnit):f,disabled:p,"aria-pressed":h,className:m.join(" "),onClick:c},u||(d?W("span",{className:d,role:"img"}):"")))}}if(s.length>1){let a=i&&n.getClass("buttonGroup")||"";return W("div",{className:a},...s)}return s[0]}}class M1 extends Ut{render(){let{model:t,extraClassName:r}=this.props,n=!1,s,i,a=t.sectionWidgets,l=a.center;return a.left?(n=!0,s=a.left):s=a.start,a.right?(n=!0,i=a.right):i=a.end,W("div",{className:[r||"","fc-toolbar",n?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",s||[]),this.renderSection("center",l||[]),this.renderSection("end",i||[]))}renderSection(t,r){let{props:n}=this;return W(xG,{key:t,widgetGroups:r,title:n.title,navUnit:n.navUnit,activeButton:n.activeButton,isTodayEnabled:n.isTodayEnabled,isPrevEnabled:n.isPrevEnabled,isNextEnabled:n.isNextEnabled,titleId:n.titleId})}}class vG extends Ut{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=t=>{this.el=t,As(this.props.elRef,t),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:t,state:r}=this,{aspectRatio:n}=t,s=["fc-view-harness",n||t.liquid||t.height?"fc-view-harness-active":"fc-view-harness-passive"],i="",a="";return n?r.availableWidth!==null?i=r.availableWidth/n:a=`${1/n*100}%`:i=t.height||"",W("div",{"aria-labelledby":t.labeledById,ref:this.handleEl,className:s.join(" "),style:{height:i,paddingBottom:a}},t.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class bG extends vl{constructor(t){super(t),this.handleSegClick=(r,n)=>{let{component:s}=this,{context:i}=s,a=il(n);if(a&&s.isValidSegDownEl(r.target)){let l=Ir(r.target,".fc-event-forced-url"),c=l?l.querySelector("a[href]").href:"";i.emitter.trigger("eventClick",{el:n,event:new Mt(s.context,a.eventRange.def,a.eventRange.instance),jsEvent:r,view:i.viewApi}),c&&!r.defaultPrevented&&(window.location.href=c)}},this.destroy=ID(t.el,"click",".fc-event",this.handleSegClick)}}class wG extends vl{constructor(t){super(t),this.handleEventElRemove=r=>{r===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(r,n)=>{il(n)&&(this.currentSegEl=n,this.triggerEvent("eventMouseEnter",r,n))},this.handleSegLeave=(r,n)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",r,n))},this.removeHoverListeners=$V(t.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(t,r,n){let{component:s}=this,{context:i}=s,a=il(n);(!r||s.isValidSegDownEl(r.target))&&i.emitter.trigger(t,{el:n,event:new Mt(i,a.eventRange.def,a.eventRange.instance),jsEvent:r,view:i.viewApi})}}class kG extends to{constructor(){super(...arguments),this.buildViewContext=ht(Z9),this.buildViewPropTransformers=ht(EG),this.buildToolbarProps=ht(SG),this.headerRef=ni(),this.footerRef=ni(),this.interactionsStore={},this.state={viewLabelId:yp()},this.registerInteractiveComponent=(t,r)=>{let n=XW(t,r),a=[bG,wG].concat(this.props.pluginHooks.componentInteractions).map(l=>new l(n));this.interactionsStore[t.uid]=a,cy[t.uid]=n},this.unregisterInteractiveComponent=t=>{let r=this.interactionsStore[t.uid];if(r){for(let n of r)n.destroy();delete this.interactionsStore[t.uid]}delete cy[t.uid]},this.resizeRunner=new vv(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=t=>{let{options:r}=this.props;r.handleWindowResize&&t.target===window&&this.resizeRunner.request(r.windowResizeDelay)}}render(){let{props:t}=this,{toolbarConfig:r,options:n}=t,s=!1,i="",a;t.isHeightAuto||t.forPrint?i="":n.height!=null?s=!0:n.contentHeight!=null?i=n.contentHeight:a=Math.max(n.aspectRatio,.5);let l=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.nowManager,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=r.header&&r.header.hasTitle?this.state.viewLabelId:void 0;return W(eo.Provider,{value:l},W(Sp,{unit:"day"},u=>{let d=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,u,t.viewTitle);return W(Yt,null,r.header&&W(M1,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:r.header,titleId:c},d)),W(vG,{liquid:s,height:i,aspectRatio:a,labeledById:c},this.renderView(t),this.buildAppendContent()),r.footer&&W(M1,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:r.footer,titleId:""},d)))}))}componentDidMount(){let{props:t}=this;this.calendarInteractions=t.pluginHooks.calendarInteractions.map(n=>new n(t)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:r}=t.pluginHooks;for(let n in r)r[n](t[n],t)}componentDidUpdate(t){let{props:r}=this,{propSetHandlers:n}=r.pluginHooks;for(let s in n)r[s]!==t[s]&&n[s](r[s],r)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let t of this.calendarInteractions)t.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:t}=this,r=t.pluginHooks.viewContainerAppends.map(n=>n(t));return W(Yt,{},...r)}renderView(t){let{pluginHooks:r}=t,{viewSpec:n}=t,s={dateProfile:t.dateProfile,businessHours:t.businessHours,eventStore:t.renderableEventStore,eventUiBases:t.eventUiBases,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isHeightAuto:t.isHeightAuto,forPrint:t.forPrint},i=this.buildViewPropTransformers(r.viewPropsTransformers);for(let l of i)Object.assign(s,l.transform(s,t));let a=n.component;return W(a,Object.assign({},s))}}function SG(e,t,r,n,s,i){let a=r.build(s,void 0,!1),l=r.buildPrev(t,n,!1),c=r.buildNext(t,n,!1);return{title:i,activeButton:e.type,navUnit:e.singleUnit,isTodayEnabled:a.isValid&&!Hi(t.currentRange,s),isPrevEnabled:l.isValid,isNextEnabled:c.isValid}}function EG(e){return e.map(t=>new t)}class NG extends e${constructor(t,r={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=n=>{switch(n.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=n=>{this.currentData=n,this.renderRunner.request(n.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:n}=this;ah(()=>{au(W(ZW,{options:n.calendarOptions,theme:n.theme,emitter:n.emitter},(s,i,a,l)=>(this.setClassNames(s),this.setHeight(i),W(UD.Provider,{value:this.customContentRenderId},W(kG,Object.assign({isHeightAuto:a,forPrint:l},n))))),this.el)})}else this.isRendered&&(this.isRendered=!1,au(null,this.el),this.setClassNames([]),this.setHeight(""))},PV(t),this.el=t,this.renderRunner=new vv(this.handleRenderRequest),new cG({optionOverrides:r,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let t=this.isRendering;t?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),t&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){ah(()=>{super.updateSize()})}batchRendering(t){this.renderRunner.pause("batchRendering"),t(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(t,r){this.currentDataManager.resetOptions(t,r)}setClassNames(t){if(!qi(t,this.currentClassNames)){let{classList:r}=this.el;for(let n of this.currentClassNames)r.remove(n);for(let n of t)r.add(n);this.currentClassNames=t}}setHeight(t){RD(this.el,"height",t)}}const CG=parseInt(String(te.version).split(".")[0]),jG=CG<18;class RR extends g.Component{constructor(){super(...arguments),this.elRef=g.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const t=[];for(const r of this.state.customRenderingMap.values())t.push(te.createElement(TG,{key:r.id,customRendering:r}));return te.createElement("div",{ref:this.elRef},t)}componentDidMount(){this.isUnmounting=!1;const t=new cY;this.handleCustomRendering=t.handle.bind(t),this.calendar=new NG(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Jn.flushSync(()=>{})});let r;t.subscribe(n=>{const s=Date.now(),i=!r;(jG||i||this.isUpdating||this.isUnmounting||s-r<100?_R:Jn.flushSync)(()=>{this.setState({customRenderingMap:n},()=>{r=s,i?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}RR.act=_R;class TG extends g.PureComponent{render(){const{customRendering:t}=this.props,{generatorMeta:r}=t,n=typeof r=="function"?r(t.renderProps):r;return Jn.createPortal(n,t.containerEl)}}function _R(e){e()}class AG extends ro{constructor(){super(...arguments),this.headerElRef=ni()}renderSimpleLayout(t,r){let{props:n,context:s}=this,i=[],a=N1(s.options);return t&&i.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),i.push({type:"body",key:"body",liquid:!0,chunk:{content:r}}),W(p1,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},W(xR,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[],sections:i}))}renderHScrollLayout(t,r,n,s){let i=this.context.pluginHooks.scrollGridImpl;if(!i)throw new Error("No ScrollGrid implementation");let{props:a,context:l}=this,c=!a.forPrint&&N1(l.options),u=!a.forPrint&&W$(l.options),d=[];return t&&d.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:r}]}),u&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:V$}]}),W(p1,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},W(i,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:n,minWidth:s}]}],sections:d}))}}function rf(e,t){let r=[];for(let n=0;n<t;n+=1)r[n]=[];for(let n of e)r[n.row].push(n);return r}function Sd(e,t){let r=[];for(let n=0;n<t;n+=1)r[n]=[];for(let n of e)r[n.firstCol].push(n);return r}function O1(e,t){let r=[];if(e){for(let n=0;n<t;n+=1)r[n]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let n of e.segs)r[n.row].segs.push(n)}else for(let n=0;n<t;n+=1)r[n]=null;return r}const IR=hr({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function MR(e){let{display:t}=e.eventRange.ui;return t==="list-item"||t==="auto"&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}class OR extends Ut{render(){let{props:t}=this;return W(vR,Object.assign({},t,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:IR,defaultDisplayEventEnd:t.defaultDisplayEventEnd,disableResizing:!t.seg.eventRange.def.allDay}))}}class PR extends Ut{render(){let{props:t,context:r}=this,{options:n}=r,{seg:s}=t,i=n.eventTimeFormat||IR,a=rR(s,i,r,!0,t.defaultDisplayEventEnd);return W(Uv,Object.assign({},t,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:nR(t.seg,r),defaultGenerator:DG,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function DG(e){return W(Yt,null,W("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&W("div",{className:"fc-event-time"},e.timeText),W("div",{className:"fc-event-title"},e.event.title||W(Yt,null,"")))}class RG extends Ut{constructor(){super(...arguments),this.compileSegs=ht(_G)}render(){let{props:t}=this,{allSegs:r,invisibleSegs:n}=this.compileSegs(t.singlePlacements);return W(rY,{elClasses:["fc-daygrid-more-link"],dateProfile:t.dateProfile,todayRange:t.todayRange,allDayDate:t.allDayDate,moreCnt:t.moreCnt,allSegs:r,hiddenSegs:n,alignmentElRef:t.alignmentElRef,alignGridTop:t.alignGridTop,extraDateSpan:t.extraDateSpan,popoverContent:()=>{let s=(t.eventDrag?t.eventDrag.affectedInstances:null)||(t.eventResize?t.eventResize.affectedInstances:null)||{};return W(Yt,null,r.map(i=>{let a=i.eventRange.instance.instanceId;return W("div",{className:"fc-daygrid-event-harness",key:a,style:{visibility:s[a]?"hidden":""}},MR(i)?W(PR,Object.assign({seg:i,isDragging:!1,isSelected:a===t.eventSelection,defaultDisplayEventEnd:!1},Ec(i,t.todayRange))):W(OR,Object.assign({seg:i,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===t.eventSelection,defaultDisplayEventEnd:!1},Ec(i,t.todayRange))))}))}})}}function _G(e){let t=[],r=[];for(let n of e)t.push(n.seg),n.isVisible||r.push(n.seg);return{allSegs:t,invisibleSegs:r}}const IG=hr({week:"narrow"});class MG extends ro{constructor(){super(...arguments),this.rootElRef=ni(),this.state={dayNumberId:yp()},this.handleRootEl=t=>{As(this.rootElRef,t),As(this.props.elRef,t)}}render(){let{context:t,props:r,state:n,rootElRef:s}=this,{options:i,dateEnv:a}=t,{date:l,dateProfile:c}=r;const u=r.showDayNumber&&PG(l,c.currentRange,a);return W(bR,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...r.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},r.extraDataAttrs),r.showDayNumber?{"aria-labelledby":n.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:OG,date:l,dateProfile:c,todayRange:r.todayRange,showDayNumber:r.showDayNumber,isMonthStart:u,extraRenderProps:r.extraRenderProps},(d,f)=>W("div",{ref:r.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:r.minHeight}},r.showWeekNumber&&W(X$,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:uy(t,l,"week"),date:l,defaultFormat:IG}),!f.isDisabled&&(r.showDayNumber||wR(i)||r.forceDayTop)?W("div",{className:"fc-daygrid-day-top"},W(d,{elTag:"a",elClasses:["fc-daygrid-day-number",u&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},uy(t,l)),{id:n.dayNumberId})})):r.showDayNumber?W("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},W("a",{className:"fc-daygrid-day-number"},"")):void 0,W("div",{className:"fc-daygrid-day-events",ref:r.fgContentElRef},r.fgContent,W("div",{className:"fc-daygrid-day-bottom",style:{marginTop:r.moreMarginTop}},W(RG,{allDayDate:l,singlePlacements:r.singlePlacements,moreCnt:r.moreCnt,alignmentElRef:s,alignGridTop:!r.showDayNumber,extraDateSpan:r.extraDateSpan,dateProfile:r.dateProfile,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,todayRange:r.todayRange}))),W("div",{className:"fc-daygrid-day-bg"},r.bgContent)))}}function OG(e){return e.dayNumberText||W(Yt,null,"")}function PG(e,t,r){const{start:n,end:s}=t,i=Ki(s,-1),a=r.getYear(n),l=r.getMonth(n),c=r.getYear(i),u=r.getMonth(i);return!(a===c&&l===u)&&(e.valueOf()===n.valueOf()||r.getDay(e)===1&&e.valueOf()<s.valueOf())}function LR(e){return e.eventRange.instance.instanceId+":"+e.firstCol}function FR(e){return LR(e)+":"+e.lastCol}function LG(e,t,r,n,s,i,a){let l=new zG(v=>{let x=e[v.index].eventRange.instance.instanceId+":"+v.span.start+":"+(v.span.end-1);return s[x]||1});l.allowReslicing=!0,l.strictOrder=n,t===!0||r===!0?(l.maxCoord=i,l.hiddenConsumes=!0):typeof t=="number"?l.maxStackCnt=t:typeof r=="number"&&(l.maxStackCnt=r,l.hiddenConsumes=!0);let c=[],u=[];for(let v=0;v<e.length;v+=1){let x=e[v],w=FR(x);s[w]!=null?c.push({index:v,span:{start:x.firstCol,end:x.lastCol+1}}):u.push(x)}let d=l.addSegs(c),f=l.toRects(),{singleColPlacements:h,multiColPlacements:p,leftoverMargins:m}=FG(f,e,a),y=[],b=[];for(let v of u){p[v.firstCol].push({seg:v,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let x=v.firstCol;x<=v.lastCol;x+=1)h[x].push({seg:Fo(v,x,x+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<a.length;v+=1)y.push(0);for(let v of d){let x=e[v.index],w=v.span;p[w.start].push({seg:Fo(x,w.start,w.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let k=w.start;k<w.end;k+=1)y[k]+=1,h[k].push({seg:Fo(x,k,k+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<a.length;v+=1)b.push(m[v]);return{singleColPlacements:h,multiColPlacements:p,moreCnts:y,moreMarginTops:b}}function FG(e,t,r){let n=BG(e,r.length),s=[],i=[],a=[];for(let l=0;l<r.length;l+=1){let c=n[l],u=[],d=0,f=0;for(let p of c){let m=t[p.index];u.push({seg:Fo(m,l,l+1,r),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:p.levelCoord-d}),d=p.levelCoord+p.thickness}let h=[];d=0,f=0;for(let p of c){let m=t[p.index],y=p.span.end-p.span.start>1,b=p.span.start===l;f+=p.levelCoord-d,d=p.levelCoord+p.thickness,y?(f+=p.thickness,b&&h.push({seg:Fo(m,p.span.start,p.span.end,r),isVisible:!0,isAbsolute:!0,absoluteTop:p.levelCoord,marginTop:0})):b&&(h.push({seg:Fo(m,p.span.start,p.span.end,r),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:f}),f=0)}s.push(u),i.push(h),a.push(f)}return{singleColPlacements:s,multiColPlacements:i,leftoverMargins:a}}function BG(e,t){let r=[];for(let n=0;n<t;n+=1)r.push([]);for(let n of e)for(let s=n.span.start;s<n.span.end;s+=1)r[s].push(n);return r}function Fo(e,t,r,n){if(e.firstCol===t&&e.lastCol===r-1)return e;let s=e.eventRange,i=s.range,a=sl(i,{start:n[t].date,end:or(n[r-1].date,1)});return Object.assign(Object.assign({},e),{firstCol:t,lastCol:r-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:a},isStart:e.isStart&&a.start.valueOf()===i.start.valueOf(),isEnd:e.isEnd&&a.end.valueOf()===i.end.valueOf()})}class zG extends g${constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(t){const r=super.addSegs(t),{entriesByLevel:n}=this,s=i=>!this.forceHidden[Nc(i)];for(let i=0;i<n.length;i+=1)n[i]=n[i].filter(s);return r}handleInvalidInsertion(t,r,n){const{entriesByLevel:s,forceHidden:i}=this,{touchingEntry:a,touchingLevel:l,touchingLateral:c}=t;if(this.hiddenConsumes&&a){const u=Nc(a);if(!i[u])if(this.allowReslicing){const d=Object.assign(Object.assign({},a),{span:dR(a.span,r.span)}),f=Nc(d);i[f]=!0,s[l][c]=d,n.push(d),this.splitEntry(a,r,n)}else i[u]=!0,n.push(a)}super.handleInvalidInsertion(t,r,n)}}class BR extends ro{constructor(){super(...arguments),this.cellElRefs=new Ea,this.frameElRefs=new Ea,this.fgElRefs=new Ea,this.segHarnessRefs=new Ea,this.rootElRef=ni(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=t=>{t&&this.updateSizing(!0)}}render(){let{props:t,state:r,context:n}=this,{options:s}=n,i=t.cells.length,a=Sd(t.businessHourSegs,i),l=Sd(t.bgEventSegs,i),c=Sd(this.getHighlightSegs(),i),u=Sd(this.getMirrorSegs(),i),{singleColPlacements:d,multiColPlacements:f,moreCnts:h,moreMarginTops:p}=LG(MW(t.fgEventSegs,s.eventOrder),t.dayMaxEvents,t.dayMaxEventRows,s.eventOrderStrict,r.segHeights,r.maxContentHeight,t.cells),m=t.eventDrag&&t.eventDrag.affectedInstances||t.eventResize&&t.eventResize.affectedInstances||{};return W("tr",{ref:this.rootElRef,role:"row"},t.renderIntro&&t.renderIntro(),t.cells.map((y,b)=>{let v=this.renderFgSegs(b,t.forPrint?d[b]:f[b],t.todayRange,m),x=this.renderFgSegs(b,UG(u[b],f),t.todayRange,{},!!t.eventDrag,!!t.eventResize,!1);return W(MG,{key:y.key,elRef:this.cellElRefs.createRef(y.key),innerElRef:this.frameElRefs.createRef(y.key),dateProfile:t.dateProfile,date:y.date,showDayNumber:t.showDayNumbers,showWeekNumber:t.showWeekNumbers&&b===0,forceDayTop:t.showWeekNumbers,todayRange:t.todayRange,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,extraRenderProps:y.extraRenderProps,extraDataAttrs:y.extraDataAttrs,extraClassNames:y.extraClassNames,extraDateSpan:y.extraDateSpan,moreCnt:h[b],moreMarginTop:p[b],singlePlacements:d[b],fgContentElRef:this.fgElRefs.createRef(y.key),fgContent:W(Yt,null,W(Yt,null,v),W(Yt,null,x)),bgContent:W(Yt,null,this.renderFillSegs(c[b],"highlight"),this.renderFillSegs(a[b],"non-business"),this.renderFillSegs(l[b],"bg-event")),minHeight:t.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(t,r){let n=this.props;this.updateSizing(!ns(t,n))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:t}=this;return t.eventDrag&&t.eventDrag.segs.length?t.eventDrag.segs:t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:t.dateSelectionSegs}getMirrorSegs(){let{props:t}=this;return t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:[]}renderFgSegs(t,r,n,s,i,a,l){let{context:c}=this,{eventSelection:u}=this.props,{framePositions:d}=this.state,f=this.props.cells.length===1,h=i||a||l,p=[];if(d)for(let m of r){let{seg:y}=m,{instanceId:b}=y.eventRange.instance,v=m.isVisible&&!s[b],x=m.isAbsolute,w="",k="";x&&(c.isRtl?(k=0,w=d.lefts[y.lastCol]-d.lefts[y.firstCol]):(w=0,k=d.rights[y.firstCol]-d.rights[y.lastCol])),p.push(W("div",{className:"fc-daygrid-event-harness"+(x?" fc-daygrid-event-harness-abs":""),key:LR(y),ref:h?null:this.segHarnessRefs.createRef(FR(y)),style:{visibility:v?"":"hidden",marginTop:x?"":m.marginTop,top:x?m.absoluteTop:"",left:w,right:k}},MR(y)?W(PR,Object.assign({seg:y,isDragging:i,isSelected:b===u,defaultDisplayEventEnd:f},Ec(y,n))):W(OR,Object.assign({seg:y,isDragging:i,isResizing:a,isDateSelecting:l,isSelected:b===u,defaultDisplayEventEnd:f},Ec(y,n)))))}return p}renderFillSegs(t,r){let{isRtl:n}=this.context,{todayRange:s}=this.props,{framePositions:i}=this.state,a=[];if(i)for(let l of t){let c=n?{right:0,left:i.lefts[l.lastCol]-i.lefts[l.firstCol]}:{left:0,right:i.rights[l.firstCol]-i.rights[l.lastCol]};a.push(W("div",{key:zW(l.eventRange),className:"fc-daygrid-bg-harness",style:c},r==="bg-event"?W(K$,Object.assign({seg:l},Ec(l,s))):Z$(r)))}return W(Yt,{},...a)}updateSizing(t){let{props:r,state:n,frameElRefs:s}=this;if(!r.forPrint&&r.clientWidth!==null){if(t){let c=r.cells.map(u=>s.currentMap[u.key]);if(c.length){let u=this.rootElRef.current,d=new uh(u,c,!0,!1);(!n.framePositions||!n.framePositions.similarTo(d))&&this.setState({framePositions:new uh(u,c,!0,!1)})}}const i=this.state.segHeights,a=this.querySegHeights(),l=r.dayMaxEvents===!0||r.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},i),a),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let t=this.segHarnessRefs.currentMap,r={};for(let n in t){let s=Math.round(t[n].getBoundingClientRect().height);r[n]=Math.max(r[n]||0,s)}return r}computeMaxContentHeight(){let t=this.props.cells[0].key,r=this.cellElRefs.currentMap[t],n=this.fgElRefs.currentMap[t];return r.getBoundingClientRect().bottom-n.getBoundingClientRect().top}getCellEls(){let t=this.cellElRefs.currentMap;return this.props.cells.map(r=>t[r.key])}}BR.addStateEquality({segHeights:ns});function UG(e,t){if(!e.length)return[];let r=HG(t);return e.map(n=>({seg:n,isVisible:!0,isAbsolute:!0,absoluteTop:r[n.eventRange.instance.instanceId],marginTop:0}))}function HG(e){let t={};for(let r of e)for(let n of r)t[n.seg.eventRange.instance.instanceId]=n.absoluteTop;return t}class VG extends ro{constructor(){super(...arguments),this.splitBusinessHourSegs=ht(rf),this.splitBgEventSegs=ht(WG),this.splitFgEventSegs=ht(rf),this.splitDateSelectionSegs=ht(rf),this.splitEventDrag=ht(O1),this.splitEventResize=ht(O1),this.rowRefs=new Ea}render(){let{props:t,context:r}=this,n=t.cells.length,s=this.splitBusinessHourSegs(t.businessHourSegs,n),i=this.splitBgEventSegs(t.bgEventSegs,n),a=this.splitFgEventSegs(t.fgEventSegs,n),l=this.splitDateSelectionSegs(t.dateSelectionSegs,n),c=this.splitEventDrag(t.eventDrag,n),u=this.splitEventResize(t.eventResize,n),d=n>=7&&t.clientWidth?t.clientWidth/r.options.aspectRatio/6:null;return W(Sp,{unit:"day"},(f,h)=>W(Yt,null,t.cells.map((p,m)=>W(BR,{ref:this.rowRefs.createRef(m),key:p.length?p[0].date.toISOString():m,showDayNumbers:n>1,showWeekNumbers:t.showWeekNumbers,todayRange:h,dateProfile:t.dateProfile,cells:p,renderIntro:t.renderRowIntro,businessHourSegs:s[m],eventSelection:t.eventSelection,bgEventSegs:i[m],fgEventSegs:a[m],dateSelectionSegs:l[m],eventDrag:c[m],eventResize:u[m],dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,clientWidth:t.clientWidth,clientHeight:t.clientHeight,cellMinHeight:d,forPrint:t.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const t=this.rowRefs.currentMap[0].getCellEls()[0],r=t?t.closest(".fc-daygrid-body"):null;r&&(this.rootEl=r,this.context.registerInteractiveComponent(this,{el:r,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new uh(this.rootEl,this.rowRefs.collect().map(t=>t.getCellEls()[0]),!1,!0),this.colPositions=new uh(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(t,r){let{colPositions:n,rowPositions:s}=this,i=n.leftToIndex(t),a=s.topToIndex(r);if(a!=null&&i!=null){let l=this.props.cells[a][i];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,i),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(a,i),rect:{left:n.lefts[i],right:n.rights[i],top:s.tops[a],bottom:s.bottoms[a]},layer:0}}return null}getCellEl(t,r){return this.rowRefs.currentMap[t].getCellEls()[r]}getCellRange(t,r){let n=this.props.cells[t][r].date,s=or(n,1);return{start:n,end:s}}}function WG(e,t){return rf(e.filter($G),t)}function $G(e){return e.eventRange.def.allDay}class YG extends ro{constructor(){super(...arguments),this.elRef=ni(),this.needsScrollReset=!1}render(){let{props:t}=this,{dayMaxEventRows:r,dayMaxEvents:n,expandRows:s}=t,i=n===!0||r===!0;i&&!s&&(i=!1,r=null,n=null);let a=["fc-daygrid-body",i?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return W("div",{ref:this.elRef,className:a.join(" "),style:{width:t.clientWidth,minWidth:t.tableMinWidth}},W("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:t.clientWidth,minWidth:t.tableMinWidth,height:s?t.clientHeight:""}},t.colGroupNode,W("tbody",{role:"presentation"},W(VG,{dateProfile:t.dateProfile,cells:t.cells,renderRowIntro:t.renderRowIntro,showWeekNumbers:t.showWeekNumbers,clientWidth:t.clientWidth,clientHeight:t.clientHeight,businessHourSegs:t.businessHourSegs,bgEventSegs:t.bgEventSegs,fgEventSegs:t.fgEventSegs,dateSelectionSegs:t.dateSelectionSegs,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,dayMaxEvents:n,dayMaxEventRows:r,forPrint:t.forPrint,isHitComboAllowed:t.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(t){t.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const t=GG(this.elRef.current,this.props.dateProfile);if(t){const r=t.closest(".fc-daygrid-body"),n=r.closest(".fc-scroller"),s=t.getBoundingClientRect().top-r.getBoundingClientRect().top;n.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}function GG(e,t){let r;return t.currentRangeUnit.match(/year|month/)&&(r=e.querySelector(`[data-date="${k9(t.currentDate)}-01"]`)),r||(r=e.querySelector(`[data-date="${Sv(t.currentDate)}"]`)),r}class qG extends C${constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(t,r){return r.sliceRange(t)}}class KG extends ro{constructor(){super(...arguments),this.slicer=new qG,this.tableRef=ni()}render(){let{props:t,context:r}=this;return W(YG,Object.assign({ref:this.tableRef},this.slicer.sliceProps(t,t.dateProfile,t.nextDayThreshold,r,t.dayTableModel),{dateProfile:t.dateProfile,cells:t.dayTableModel.cells,colGroupNode:t.colGroupNode,tableMinWidth:t.tableMinWidth,renderRowIntro:t.renderRowIntro,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.showWeekNumbers,expandRows:t.expandRows,headerAlignElRef:t.headerAlignElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:t.forPrint}))}}class QG extends AG{constructor(){super(...arguments),this.buildDayTableModel=ht(ZG),this.headerRef=ni(),this.tableRef=ni()}render(){let{options:t,dateProfileGenerator:r}=this.context,{props:n}=this,s=this.buildDayTableModel(n.dateProfile,r),i=t.dayHeaders&&W(k$,{ref:this.headerRef,dateProfile:n.dateProfile,dates:s.headerDates,datesRepDistinctDays:s.rowCnt===1}),a=l=>W(KG,{ref:this.tableRef,dateProfile:n.dateProfile,dayTableModel:s,businessHours:n.businessHours,dateSelection:n.dateSelection,eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,nextDayThreshold:t.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.weekNumbers,expandRows:!n.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:n.forPrint});return t.dayMinWidth?this.renderHScrollLayout(i,a,s.colCnt,t.dayMinWidth):this.renderSimpleLayout(i,a)}}function ZG(e,t){let r=new E$(e.renderRange,t);return new N$(r,/year|month|week/.test(e.currentRangeUnit))}class XG extends $D{buildRenderRange(t,r,n){let s=super.buildRenderRange(t,r,n),{props:i}=this;return JG({currentRange:s,snapToWeek:/^(year|month)$/.test(r),fixedWeekCount:i.fixedWeekCount,dateEnv:i.dateEnv})}}function JG(e){let{dateEnv:t,currentRange:r}=e,{start:n,end:s}=r,i;if(e.snapToWeek&&(n=t.startOfWeek(n),i=t.startOfWeek(s),i.valueOf()!==s.valueOf()&&(s=a1(i,1))),e.fixedWeekCount){let a=t.startOfWeek(t.startOfMonth(or(r.end,-1))),l=Math.ceil(u9(a,s));s=a1(s,6-l)}return{start:n,end:s}}var eq=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';TD(eq);var tq=li({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:QG,dateProfileGeneratorClass:XG},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});zv.touchMouseIgnoreWait=500;let fy=0,dh=0,hy=!1;class zR{constructor(t){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=r=>{if(!this.shouldIgnoreMouse()&&rq(r)&&this.tryStart(r)){let n=this.createEventFromMouse(r,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=r=>{let n=this.createEventFromMouse(r);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleMouseUp=r=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(r)),this.cleanup()},this.handleTouchStart=r=>{if(this.tryStart(r)){this.isTouchDragging=!0;let n=this.createEventFromTouch(r,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n);let s=r.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=r=>{let n=this.createEventFromTouch(r);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleTouchEnd=r=>{if(this.isDragging){let n=r.target;n.removeEventListener("touchmove",this.handleTouchMove),n.removeEventListener("touchend",this.handleTouchEnd),n.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(r)),this.cleanup(),this.isTouchDragging=!1,nq()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=r=>{if(!this.shouldIgnoreMove){let n=window.scrollX-this.prevScrollX+this.prevPageX,s=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:r,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:n,pageY:s,deltaX:n-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=t,this.emitter=new kp,t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),sq()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),iq()}tryStart(t){let r=this.querySubjectEl(t),n=t.target;return r&&(!this.handleSelector||Ir(n,this.handleSelector))?(this.subjectEl=r,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){hy=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(t){return this.selector?Ir(t.target,this.selector):this.containerEl}shouldIgnoreMouse(){return fy||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(hy=!0)}initScrollWatch(t){this.shouldWatchScroll&&(this.recordCoords(t),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(t){this.shouldWatchScroll&&(this.prevPageX=t.pageX,this.prevPageY=t.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(t,r){let n=0,s=0;return r?(this.origPageX=t.pageX,this.origPageY=t.pageY):(n=t.pageX-this.origPageX,s=t.pageY-this.origPageY),{origEvent:t,isTouch:!1,subjectEl:this.subjectEl,pageX:t.pageX,pageY:t.pageY,deltaX:n,deltaY:s}}createEventFromTouch(t,r){let n=t.touches,s,i,a=0,l=0;return n&&n.length?(s=n[0].pageX,i=n[0].pageY):(s=t.pageX,i=t.pageY),r?(this.origPageX=s,this.origPageY=i):(a=s-this.origPageX,l=i-this.origPageY),{origEvent:t,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:i,deltaX:a,deltaY:l}}}function rq(e){return e.button===0&&!e.ctrlKey}function nq(){fy+=1,setTimeout(()=>{fy-=1},zv.touchMouseIgnoreWait)}function sq(){dh+=1,dh===1&&window.addEventListener("touchmove",UR,{passive:!1})}function iq(){dh-=1,dh||window.removeEventListener("touchmove",UR,{passive:!1})}function UR(e){hy&&e.preventDefault()}class aq{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(t,r,n){this.sourceEl=t,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=r-window.scrollX,this.origScreenY=n-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(t,r){this.deltaX=t-window.scrollX-this.origScreenX,this.deltaY=r-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(t){t?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=t,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=t)}stop(t,r){let n=()=>{this.cleanup(),r()};t&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(n,this.revertDuration):setTimeout(n,0)}doRevertAnimation(t,r){let n=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();n.style.transition="top "+r+"ms,left "+r+"ms",wc(n,{left:s.left,top:s.top}),YV(n,()=>{n.style.transition="",t()})}cleanup(){this.mirrorEl&&(bv(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&wc(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let t=this.sourceElRect,r=this.mirrorEl;return r||(r=this.mirrorEl=this.sourceEl.cloneNode(!0),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.pointerEvents="none",r.classList.add("fc-event-dragging"),wc(r,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:t.right-t.left,height:t.bottom-t.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(r)),r}}class HR extends Bv{constructor(t,r){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=t,this.doesListening=r,this.scrollTop=this.origScrollTop=t.getScrollTop(),this.scrollLeft=this.origScrollLeft=t.getScrollLeft(),this.scrollWidth=t.getScrollWidth(),this.scrollHeight=t.getScrollHeight(),this.clientWidth=t.getClientWidth(),this.clientHeight=t.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class VR extends HR{constructor(t,r){super(new p$(t),r)}getEventTarget(){return this.scrollController.el}computeClientRect(){return f$(this.scrollController.el)}}class oq extends HR{constructor(t){super(new m$,t)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const P1=typeof performance=="function"?performance.now:Date.now;class lq{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let t=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(t){let r=P1();this.handleSide(t,(r-this.msSinceRequest)/1e3),this.requestAnimation(r)}else this.isAnimating=!1}}}start(t,r,n){this.isEnabled&&(this.scrollCaches=this.buildCaches(n),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(t,r))}handleMove(t,r){if(this.isEnabled){let n=t-window.scrollX,s=r-window.scrollY,i=this.pointerScreenY===null?0:s-this.pointerScreenY,a=this.pointerScreenX===null?0:n-this.pointerScreenX;i<0?this.everMovedUp=!0:i>0&&(this.everMovedDown=!0),a<0?this.everMovedLeft=!0:a>0&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(P1()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let t of this.scrollCaches)t.destroy();this.scrollCaches=null}}requestAnimation(t){this.msSinceRequest=t,requestAnimationFrame(this.animate)}handleSide(t,r){let{scrollCache:n}=t,{edgeThreshold:s}=this,i=s-t.distance,a=i*i/(s*s)*this.maxVelocity*r,l=1;switch(t.name){case"left":l=-1;case"right":n.setScrollLeft(n.getScrollLeft()+a*l);break;case"top":l=-1;case"bottom":n.setScrollTop(n.getScrollTop()+a*l);break}}computeBestEdge(t,r){let{edgeThreshold:n}=this,s=null,i=this.scrollCaches||[];for(let a of i){let l=a.clientRect,c=t-l.left,u=l.right-t,d=r-l.top,f=l.bottom-r;c>=0&&u>=0&&d>=0&&f>=0&&(d<=n&&this.everMovedUp&&a.canScrollUp()&&(!s||s.distance>d)&&(s={scrollCache:a,name:"top",distance:d}),f<=n&&this.everMovedDown&&a.canScrollDown()&&(!s||s.distance>f)&&(s={scrollCache:a,name:"bottom",distance:f}),c<=n&&this.everMovedLeft&&a.canScrollLeft()&&(!s||s.distance>c)&&(s={scrollCache:a,name:"left",distance:c}),u<=n&&this.everMovedRight&&a.canScrollRight()&&(!s||s.distance>u)&&(s={scrollCache:a,name:"right",distance:u}))}return s}buildCaches(t){return this.queryScrollEls(t).map(r=>r===window?new oq(!1):new VR(r,!1))}queryScrollEls(t){let r=[];for(let n of this.scrollQuery)typeof n=="object"?r.push(n):r.push(...Array.prototype.slice.call(t.getRootNode().querySelectorAll(n)));return r}}class Fu extends y${constructor(t,r){super(t),this.containerEl=t,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,GV(document.body),KV(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let i=this.minDistance,a,{deltaX:l,deltaY:c}=s;a=l*l+c*c,a>=i*i&&this.handleDistanceSurpassed(s)}this.isDragging&&(s.origEvent.type!=="scroll"&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,qV(document.body),QV(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let n=this.pointer=new zR(t);n.emitter.on("pointerdown",this.onPointerDown),n.emitter.on("pointermove",this.onPointerMove),n.emitter.on("pointerup",this.onPointerUp),r&&(n.selector=r),this.mirror=new aq,this.autoScroller=new lq}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(t){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)}handleDelayEnd(t){this.isDelayEnded=!0,this.tryStartDrag(t)}handleDistanceSurpassed(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)}tryStartDrag(t){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY,this.containerEl),this.emitter.trigger("dragstart",t),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))}stopDrag(t){this.isDragging=!1,this.emitter.trigger("dragend",t)}setIgnoreMove(t){this.pointer.shouldIgnoreMove=t}setMirrorIsVisible(t){this.mirror.setIsVisible(t)}setMirrorNeedsRevert(t){this.mirrorNeedsRevert=t}setAutoScrollEnabled(t){this.autoScroller.isEnabled=t}}class cq{constructor(t){this.el=t,this.origRect=Fv(t),this.scrollCaches=uR(t).map(r=>new VR(r,!0))}destroy(){for(let t of this.scrollCaches)t.destroy()}computeLeft(){let t=this.origRect.left;for(let r of this.scrollCaches)t+=r.origScrollLeft-r.getScrollLeft();return t}computeTop(){let t=this.origRect.top;for(let r of this.scrollCaches)t+=r.origScrollTop-r.getScrollTop();return t}isWithinClipping(t,r){let n={left:t,top:r};for(let s of this.scrollCaches)if(!uq(s.getEventTarget())&&!t$(n,s.clientRect))return!1;return!0}}function uq(e){let t=e.tagName;return t==="HTML"||t==="BODY"}class Ep{constructor(t,r){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=n=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(n),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",n)):s.setIgnoreMove(!0)},this.handleDragStart=n=>{this.emitter.trigger("dragstart",n),this.handleMove(n,!0)},this.handleDragMove=n=>{this.emitter.trigger("dragmove",n),this.handleMove(n)},this.handlePointerUp=n=>{this.releaseHits(),this.emitter.trigger("pointerup",n)},this.handleDragEnd=n=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,n),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",n)},this.droppableStore=r,t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragstart",this.handleDragStart),t.emitter.on("dragmove",this.handleDragMove),t.emitter.on("pointerup",this.handlePointerUp),t.emitter.on("dragend",this.handleDragEnd),this.dragging=t,this.emitter=new kp}processFirstCoord(t){let r={left:t.pageX,top:t.pageY},n=r,s=t.subjectEl,i;s instanceof HTMLElement&&(i=Fv(s),n=r$(n,i));let a=this.initialHit=this.queryHitForOffset(n.left,n.top);if(a){if(this.useSubjectCenter&&i){let l=oR(i,a.rect);l&&(n=n$(l))}this.coordAdjust=s$(n,r)}else this.coordAdjust={left:0,top:0}}handleMove(t,r){let n=this.queryHitForOffset(t.pageX+this.coordAdjust.left,t.pageY+this.coordAdjust.top);(r||!Np(this.movingHit,n))&&(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,t))}prepareHits(){this.offsetTrackers=Ja(this.droppableStore,t=>(t.component.prepareHits(),new cq(t.el)))}releaseHits(){let{offsetTrackers:t}=this;for(let r in t)t[r].destroy();this.offsetTrackers={}}queryHitForOffset(t,r){let{droppableStore:n,offsetTrackers:s}=this,i=null;for(let a in n){let l=n[a].component,c=s[a];if(c&&c.isWithinClipping(t,r)){let u=c.computeLeft(),d=c.computeTop(),f=t-u,h=r-d,{origRect:p}=c,m=p.right-p.left,y=p.bottom-p.top;if(f>=0&&f<m&&h>=0&&h<y){let b=l.queryHit(f,h,m,y);b&&bp(b.dateProfile.activeRange,b.dateSpan.range)&&(this.disablePointCheck||c.el.contains(c.el.getRootNode().elementFromPoint(f+u-window.scrollX,h+d-window.scrollY)))&&(!i||b.layer>i.layer)&&(b.componentId=a,b.context=l.context,b.rect.left+=u,b.rect.right+=u,b.rect.top+=d,b.rect.bottom+=d,i=b)}}}return i}}function Np(e,t){return!e&&!t?!0:!!e!=!!t?!1:WW(e.dateSpan,t.dateSpan)}function WR(e,t){let r={};for(let n of t.pluginHooks.datePointTransforms)Object.assign(r,n(e,t));return Object.assign(r,dq(e,t.dateEnv)),r}function dq(e,t){return{date:t.toDate(e.range.start),dateStr:t.formatIso(e.range.start,{omitTime:e.allDay}),allDay:e.allDay}}class fq extends vl{constructor(t){super(t),this.handlePointerDown=n=>{let{dragging:s}=this,i=n.origEvent.target;s.setIgnoreMove(!this.component.isValidDateDownEl(i))},this.handleDragEnd=n=>{let{component:s}=this,{pointer:i}=this.dragging;if(!i.wasTouchScroll){let{initialHit:a,finalHit:l}=this.hitDragging;if(a&&l&&Np(a,l)){let{context:c}=s,u=Object.assign(Object.assign({},WR(a.dateSpan,c)),{dayEl:a.dayEl,jsEvent:n.origEvent,view:c.viewApi||c.calendarApi.view});c.emitter.trigger("dateClick",u)}}},this.dragging=new Fu(t.el),this.dragging.autoScroller.isEnabled=!1;let r=this.hitDragging=new Ep(this.dragging,Pv(t));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class hq extends vl{constructor(t){super(t),this.dragSelection=null,this.handlePointerDown=a=>{let{component:l,dragging:c}=this,{options:u}=l.context,d=u.selectable&&l.isValidDateDownEl(a.origEvent.target);c.setIgnoreMove(!d),c.delay=a.isTouch?pq(l):null},this.handleDragStart=a=>{this.component.context.calendarApi.unselect(a)},this.handleHitUpdate=(a,l)=>{let{context:c}=this.component,u=null,d=!1;if(a){let f=this.hitDragging.initialHit;a.componentId===f.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(f,a)||(u=mq(f,a,c.pluginHooks.dateSelectionTransformers)),(!u||!j$(u,a.dateProfile,c))&&(d=!0,u=null)}u?c.dispatch({type:"SELECT_DATES",selection:u}):l||c.dispatch({type:"UNSELECT_DATES"}),d?wv():kv(),l||(this.dragSelection=u)},this.handlePointerUp=a=>{this.dragSelection&&(JD(this.dragSelection,a,this.component.context),this.dragSelection=null)};let{component:r}=t,{options:n}=r.context,s=this.dragging=new Fu(t.el);s.touchScrollAllowed=!1,s.minDistance=n.selectMinDistance||0,s.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new Ep(this.dragging,Pv(t));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function pq(e){let{options:t}=e.context,r=t.selectLongPressDelay;return r==null&&(r=t.longPressDelay),r}function mq(e,t,r){let n=e.dateSpan,s=t.dateSpan,i=[n.range.start,n.range.end,s.range.start,s.range.end];i.sort(t9);let a={};for(let l of r){let c=l(e,t);if(c===!1)return null;c&&Object.assign(a,c)}return a.range={start:i[0],end:i[3]},a.allDay=n.allDay,a}class Bu extends vl{constructor(t){super(t),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let l=a.origEvent.target,{component:c,dragging:u}=this,{mirror:d}=u,{options:f}=c.context,h=c.context;this.subjectEl=a.subjectEl;let p=this.subjectSeg=il(a.subjectEl),y=(this.eventRange=p.eventRange).instance.instanceId;this.relevantEvents=_v(h.getCurrentData().eventStore,y),u.minDistance=a.isTouch?0:f.eventDragMinDistance,u.delay=a.isTouch&&y!==c.props.eventSelection?yq(c):null,f.fixedMirrorParent?d.parentNode=f.fixedMirrorParent:d.parentNode=Ir(l,".fc"),d.revertDuration=f.dragRevertDuration;let b=c.isValidSegDownEl(l)&&!Ir(l,".fc-event-resizer");u.setIgnoreMove(!b),this.isDragging=b&&a.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=a=>{let l=this.component.context,c=this.eventRange,u=c.instance.instanceId;a.isTouch?u!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:u}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(a),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Mt(l,c.def,c.instance),jsEvent:a.origEvent,view:l.viewApi}))},this.handleHitUpdate=(a,l)=>{if(!this.isDragging)return;let c=this.relevantEvents,u=this.hitDragging.initialHit,d=this.component.context,f=null,h=null,p=null,m=!1,y={affectedEvents:c,mutatedEvents:es(),isEvent:!0};if(a){f=a.context;let b=f.options;d===f||b.editable&&b.droppable?(h=gq(u,a,this.eventRange.instance.range.start,f.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(p=Ov(c,f.getCurrentData().eventUiBases,h,f),y.mutatedEvents=p,pR(y,a.dateProfile,f)||(m=!0,h=null,p=null,y.mutatedEvents=es()))):f=null}this.displayDrag(f,y),m?wv():kv(),l||(d===f&&Np(u,a)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!a||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=f,this.validMutation=h,this.mutatedRelevantEvents=p)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=a=>{if(this.isDragging){let l=this.component.context,c=l.viewApi,{receivingContext:u,validMutation:d}=this,f=this.eventRange.def,h=this.eventRange.instance,p=new Mt(l,f,h),m=this.relevantEvents,y=this.mutatedRelevantEvents,{finalHit:b}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:p,jsEvent:a.origEvent,view:c}),d){if(u===l){let v=new Mt(l,y.defs[f.defId],h?y.instances[h.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:y});let x={oldEvent:p,event:v,relatedEvents:_a(y,l,h),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:m})}},w={};for(let k of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(w,k(d,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},x),w),{el:a.subjectEl,delta:d.datesDelta,jsEvent:a.origEvent,view:c})),l.emitter.trigger("eventChange",x)}else if(u){let v={event:p,relatedEvents:_a(m,l,h),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:m})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},v),{draggedEl:a.subjectEl,view:c})),l.dispatch({type:"REMOVE_EVENTS",eventStore:m}),l.emitter.trigger("eventRemove",v);let x=y.defs[f.defId],w=y.instances[h.instanceId],k=new Mt(u,x,w);u.dispatch({type:"MERGE_EVENTS",eventStore:y});let S={event:k,relatedEvents:_a(y,u,w),revert(){u.dispatch({type:"REMOVE_EVENTS",eventStore:y})}};u.emitter.trigger("eventAdd",S),a.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),u.emitter.trigger("drop",Object.assign(Object.assign({},WR(b.dateSpan,u)),{draggedEl:a.subjectEl,jsEvent:a.origEvent,view:b.context.viewApi})),u.emitter.trigger("eventReceive",Object.assign(Object.assign({},S),{draggedEl:a.subjectEl,view:b.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:r}=this,{options:n}=r.context,s=this.dragging=new Fu(t.el);s.pointer.selector=Bu.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new Ep(this.dragging,cy);i.useSubjectCenter=t.useEventCenter,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(t,r){let n=this.component.context,s=this.receivingContext;s&&s!==t&&(s===n?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:es(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),t&&t.dispatch({type:"SET_EVENT_DRAG",state:r})}clearDrag(){let t=this.component.context,{receivingContext:r}=this;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),t!==r&&t.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Bu.SELECTOR=".fc-event-draggable, .fc-event-resizable";function gq(e,t,r,n){let s=e.dateSpan,i=t.dateSpan,a=s.range.start,l=i.range.start,c={};s.allDay!==i.allDay&&(c.allDay=i.allDay,c.hasEnd=t.context.options.allDayMaintainDuration,i.allDay?a=It(r):a=r);let u=jo(a,l,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);u.milliseconds&&(c.allDay=!1);let d={datesDelta:u,standardProps:c};for(let f of n)f(d,e,t);return d}function yq(e){let{options:t}=e.context,r=t.eventLongPressDelay;return r==null&&(r=t.longPressDelay),r}class xq extends vl{constructor(t){super(t),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=i=>{let{component:a}=this,l=this.querySegEl(i),c=il(l),u=this.eventRange=c.eventRange;this.dragging.minDistance=a.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(i.origEvent.target)||i.isTouch&&this.component.props.eventSelection!==u.instance.instanceId)},this.handleDragStart=i=>{let{context:a}=this.component,l=this.eventRange;this.relevantEvents=_v(a.getCurrentData().eventStore,this.eventRange.instance.instanceId);let c=this.querySegEl(i);this.draggingSegEl=c,this.draggingSeg=il(c),a.calendarApi.unselect(),a.emitter.trigger("eventResizeStart",{el:c,event:new Mt(a,l.def,l.instance),jsEvent:i.origEvent,view:a.viewApi})},this.handleHitUpdate=(i,a,l)=>{let{context:c}=this.component,u=this.relevantEvents,d=this.hitDragging.initialHit,f=this.eventRange.instance,h=null,p=null,m=!1,y={affectedEvents:u,mutatedEvents:es(),isEvent:!0};i&&(i.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,i)||(h=vq(d,i,l.subjectEl.classList.contains("fc-event-resizer-start"),f.range))),h&&(p=Ov(u,c.getCurrentData().eventUiBases,h,c),y.mutatedEvents=p,pR(y,i.dateProfile,c)||(m=!0,h=null,p=null,y.mutatedEvents=null)),p?c.dispatch({type:"SET_EVENT_RESIZE",state:y}):c.dispatch({type:"UNSET_EVENT_RESIZE"}),m?wv():kv(),a||(h&&Np(d,i)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=p)},this.handleDragEnd=i=>{let{context:a}=this.component,l=this.eventRange.def,c=this.eventRange.instance,u=new Mt(a,l,c),d=this.relevantEvents,f=this.mutatedRelevantEvents;if(a.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:u,jsEvent:i.origEvent,view:a.viewApi}),this.validMutation){let h=new Mt(a,f.defs[l.defId],c?f.instances[c.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:f});let p={oldEvent:u,event:h,relatedEvents:_a(f,a,c),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:d})}};a.emitter.trigger("eventResize",Object.assign(Object.assign({},p),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||ft(0),endDelta:this.validMutation.endDelta||ft(0),jsEvent:i.origEvent,view:a.viewApi})),a.emitter.trigger("eventChange",p)}else a.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:r}=t,n=this.dragging=new Fu(t.el);n.pointer.selector=".fc-event-resizer",n.touchScrollAllowed=!1,n.autoScroller.isEnabled=r.context.options.dragScroll;let s=this.hitDragging=new Ep(this.dragging,Pv(t));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(t){return Ir(t.subjectEl,".fc-event")}}function vq(e,t,r,n){let s=e.context.dateEnv,i=e.dateSpan.range.start,a=t.dateSpan.range.start,l=jo(i,a,s,e.largeUnit);if(r){if(s.add(n.start,l)<n.end)return{startDelta:l}}else if(s.add(n.end,l)>n.start)return{endDelta:l};return null}class bq{constructor(t){this.context=t,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=n=>{n.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=n=>{let s=this.context.options.unselectCancel,i=_D(n.origEvent);this.matchesCancel=!!Ir(i,s),this.matchesEvent=!!Ir(i,Bu.SELECTOR)},this.onDocumentPointerUp=n=>{let{context:s}=this,{documentPointer:i}=this,a=s.getCurrentData();if(!i.wasTouchScroll){if(a.dateSelection&&!this.isRecentPointerDateSelect){let l=s.options.unselectAuto;l&&(!l||!this.matchesCancel)&&s.calendarApi.unselect(n)}a.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let r=this.documentPointer=new zR(document);r.shouldIgnoreMove=!0,r.shouldWatchScroll=!1,r.emitter.on("pointerdown",this.onDocumentPointerDown),r.emitter.on("pointerup",this.onDocumentPointerUp),t.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const wq={fixedMirrorParent:V},kq={dateClick:V,eventDragStart:V,eventDragStop:V,eventDrop:V,eventResizeStart:V,eventResizeStop:V,eventResize:V,drop:V,eventReceive:V,eventLeave:V};zv.dataAttrPrefix="";var Sq=li({name:"@fullcalendar/interaction",componentInteractions:[fq,hq,Bu,xq],calendarInteractions:[bq],elementDraggingImpl:Fu,optionRefiners:wq,listenerRefiners:kq}),py=["MO","TU","WE","TH","FR","SA","SU"],Vr=function(){function e(t,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=r}return e.fromStr=function(t){return new e(py.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=py[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}(),nr=function(e){return e!=null},ps=function(e){return typeof e=="number"},L1=function(e){return typeof e=="string"&&py.includes(e)},mn=Array.isArray,Is=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var r=[],n=e;n<t;n++)r.push(n);return r},dt=function(e,t){var r=0,n=[];if(mn(e))for(;r<t;r++)n[r]=[].concat(e);else for(;r<t;r++)n[r]=e;return n},Eq=function(e){return mn(e)?e:[e]};function oo(e,t,r){r===void 0&&(r=" ");var n=String(e);return t=t>>0,n.length>t?String(n):(t=t-n.length,t>r.length&&(r+=dt(r,t/r.length)),r.slice(0,t)+String(n))}var Nq=function(e,t,r){var n=e.split(t);return r?n.slice(0,r).concat([n.slice(r).join(t)]):n},_n=function(e,t){var r=e%t;return r*t<0?r+t:r},tg=function(e,t){return{div:Math.floor(e/t),mod:_n(e,t)}},xs=function(e){return!nr(e)||e.length===0},fr=function(e){return!xs(e)},wt=function(e,t){return fr(e)&&e.indexOf(t)!==-1},Wa=function(e,t,r,n,s,i){return n===void 0&&(n=0),s===void 0&&(s=0),i===void 0&&(i=0),new Date(Date.UTC(e,t-1,r,n,s,i))},Cq=[31,28,31,30,31,30,31,31,30,31,30,31],$R=1e3*60*60*24,YR=9999,GR=Wa(1970,1,1),jq=[6,0,1,2,3,4,5],Cc=function(e){return e%4===0&&e%100!==0||e%400===0},qR=function(e){return e instanceof Date},sc=function(e){return qR(e)&&!isNaN(e.getTime())},Tq=function(e,t){var r=e.getTime(),n=t.getTime(),s=r-n;return Math.round(s/$R)},my=function(e){return Tq(e,GR)},KR=function(e){return new Date(GR.getTime()+e*$R)},Aq=function(e){var t=e.getUTCMonth();return t===1&&Cc(e.getUTCFullYear())?29:Cq[t]},al=function(e){return jq[e.getUTCDay()]},F1=function(e,t){var r=Wa(e,t+1,1);return[al(r),Aq(r)]},QR=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},gy=function(e){var t=new Date(e.getTime());return t},B1=function(e){for(var t=[],r=0;r<e.length;r++)t.push(gy(e[r]));return t},cu=function(e){e.sort(function(t,r){return t.getTime()-r.getTime()})},Vv=function(e,t){t===void 0&&(t=!0);var r=new Date(e);return[oo(r.getUTCFullYear().toString(),4,"0"),oo(r.getUTCMonth()+1,2,"0"),oo(r.getUTCDate(),2,"0"),"T",oo(r.getUTCHours(),2,"0"),oo(r.getUTCMinutes(),2,"0"),oo(r.getUTCSeconds(),2,"0"),t?"Z":""].join("")},Wv=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,r=t.exec(e);if(!r)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[5],10)||0,parseInt(r[6],10)||0,parseInt(r[7],10)||0))},z1=function(e,t){var r=e.toLocaleString("sv-SE",{timeZone:t});return r.replace(" ","T")+"Z"},Dq=function(e,t){var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(z1(e,r)),s=new Date(z1(e,t??"UTC")),i=s.getTime()-n.getTime();return new Date(e.getTime()-i)},To=function(){function e(t,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=r,t==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):t==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):t==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var r=this.minDate&&t<this.minDate,n=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),yy=function(e,t){return yy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},yy(e,t)};function $v(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");yy(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var kn=function(){return kn=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},kn.apply(this,arguments)};function xe(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var U1=function(e){$v(t,e);function t(r,n,s){var i=e.call(this,r,n)||this;return i.iterator=s,i}return t.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},t}(To),fh={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},H1=function(e,t){return e.indexOf(t)!==-1},Rq=function(e){return e.toString()},_q=function(e,t,r){return"".concat(t," ").concat(r,", ").concat(e)},ci=function(){function e(t,r,n,s){if(r===void 0&&(r=Rq),n===void 0&&(n=fh),s===void 0&&(s=_q),this.text=[],this.language=n||fh,this.gettext=r,this.dateFormatter=s,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var i=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);i.sort(function(d,f){return d-f}),a.sort(function(d,f){return f-d}),this.bymonthday=i.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(nr(this.origOptions.byweekday)){var l=mn(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],c=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return!!d.n}),isWeekdays:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")===-1&&c.indexOf("SU")===-1,isEveryDay:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")!==-1&&c.indexOf("SU")!==-1};var u=function(d,f){return d.weekday-f.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var r=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var n in t.origOptions){if(H1(["dtstart","tzid","wkst","freq"],n))return!0;if(!H1(e.IMPLEMENTED[t.options.freq],n))return!1}return r},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[be.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var r,n=this.gettext;if(t===-1)return n("last");var s=Math.abs(t);switch(s){case 1:case 21:case 31:r=s+n("st");break;case 2:case 22:r=s+n("nd");break;case 3:case 23:r=s+n("rd");break;default:r=s+n("th")}return t<0?r+" "+n("last"):r},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var r=ps(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[r]},e.prototype.plural=function(t){return t%100!==1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,r,n,s){var i=this;s===void 0&&(s=","),mn(t)||(t=[t]);var a=function(c,u,d){for(var f="",h=0;h<c.length;h++)h!==0&&(h===c.length-1?f+=" "+d+" ":f+=u+" "),f+=c[h];return f};r=r||function(c){return c.toString()};var l=function(c){return r&&r.call(i,c)};return n?a(t.map(l),s,n):t.map(l).join(s+" ")},e}(),Iq=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,r;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;t=null;for(var s in this.rules){n=this.rules[s];var i=n.exec(this.text);i&&(t===null||i[0].length>t[0].length)&&(t=i,r=s)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function ZR(e,t){t===void 0&&(t=fh);var r={},n=new Iq(t.tokens);if(!n.start(e))return null;return s(),r;function s(){n.expect("every");var h=n.acceptNumber();if(h&&(r.interval=parseInt(h[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=be.DAILY,n.nextSymbol()&&(a(),f());break;case"weekday(s)":r.freq=be.WEEKLY,r.byweekday=[be.MO,be.TU,be.WE,be.TH,be.FR],n.nextSymbol(),a(),f();break;case"week(s)":r.freq=be.WEEKLY,n.nextSymbol()&&(i(),a(),f());break;case"hour(s)":r.freq=be.HOURLY,n.nextSymbol()&&(i(),f());break;case"minute(s)":r.freq=be.MINUTELY,n.nextSymbol()&&(i(),f());break;case"month(s)":r.freq=be.MONTHLY,n.nextSymbol()&&(i(),f());break;case"year(s)":r.freq=be.YEARLY,n.nextSymbol()&&(i(),f());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=be.WEEKLY;var p=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[be[p]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=c();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(be[m]),n.nextSymbol()}a(),d(),f();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=be.YEARLY,r.bymonth=[l()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=l();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(y),n.nextSymbol()}i(),f();break;default:throw new Error("Unknown symbol")}}function i(){var h=n.accept("on"),p=n.accept("the");if(h||p)do{var m=u(),y=c(),b=l();if(m)y?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(be[y].nth(m))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(m),n.accept("day(s)"));else if(y)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(be[y]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[be.MO,be.TU,be.WE,be.TH,be.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var v=n.acceptNumber();if(!v)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(v[0],10)];n.accept("comma");){if(v=n.acceptNumber(),!v)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(v[0],10))}}else if(b)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(b);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var h=n.accept("at");if(h)do{var p=n.acceptNumber();if(!p)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(p[0],10)];n.accept("comma");){if(p=n.acceptNumber(),!p)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(p[0],10))}}while(n.accept("comma")||n.accept("at"))}function l(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function c(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var h=parseInt(n.value[1],10);if(h<-366||h>366)throw new Error("Nth out of range: "+h);return n.nextSymbol(),n.accept("last")?-h:h;default:return!1}}function d(){n.accept("on"),n.accept("the");var h=u();if(h)for(r.bymonthday=[h],n.nextSymbol();n.accept("comma");){if(h=u(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(h),n.nextSymbol()}}function f(){if(n.symbol==="until"){var h=Date.parse(n.text);if(!h)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(h)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var pt;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(pt||(pt={}));function Yv(e){return e<pt.HOURLY}var Mq=function(e,t){return t===void 0&&(t=fh),new be(ZR(e,t)||void 0)},bl=["count","until","interval","byweekday","bymonthday","bymonth"];ci.IMPLEMENTED=[];ci.IMPLEMENTED[pt.HOURLY]=bl;ci.IMPLEMENTED[pt.MINUTELY]=bl;ci.IMPLEMENTED[pt.DAILY]=["byhour"].concat(bl);ci.IMPLEMENTED[pt.WEEKLY]=bl;ci.IMPLEMENTED[pt.MONTHLY]=bl;ci.IMPLEMENTED[pt.YEARLY]=["byweekno","byyearday"].concat(bl);var Oq=function(e,t,r,n){return new ci(e,t,r,n).toString()},Pq=ci.isFullyConvertible,hh=function(){function e(t,r,n,s){this.hour=t,this.minute=r,this.second=n,this.millisecond=s||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}(),Lq=function(e){$v(t,e);function t(r,n,s,i,a,l,c){var u=e.call(this,i,a,l,c)||this;return u.year=r,u.month=n,u.day=s,u}return t.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},t.prototype.getWeekday=function(){return al(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(r){this.year+=r},t.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),s=_n(this.month,12);this.month=s,this.year+=n,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},t.prototype.addDaily=function(r){this.day+=r,this.fixDay()},t.prototype.addHours=function(r,n,s){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var i=tg(this.hour,24),a=i.div,l=i.mod;if(a&&(this.hour=l,this.addDaily(a)),xs(s)||wt(s,this.hour))break}},t.prototype.addMinutes=function(r,n,s,i){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var a=tg(this.minute,60),l=a.div,c=a.mod;if(l&&(this.minute=c,this.addHours(l,!1,s)),(xs(s)||wt(s,this.hour))&&(xs(i)||wt(i,this.minute)))break}},t.prototype.addSeconds=function(r,n,s,i,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var l=tg(this.second,60),c=l.div,u=l.mod;if(c&&(this.second=u,this.addMinutes(c,!1,s,i)),(xs(s)||wt(s,this.hour))&&(xs(i)||wt(i,this.minute))&&(xs(a)||wt(a,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var r=F1(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>YR))return;r=F1(this.year,this.month-1)[1]}}},t.prototype.add=function(r,n){var s=r.freq,i=r.interval,a=r.wkst,l=r.byhour,c=r.byminute,u=r.bysecond;switch(s){case pt.YEARLY:return this.addYears(i);case pt.MONTHLY:return this.addMonths(i);case pt.WEEKLY:return this.addWeekly(i,a);case pt.DAILY:return this.addDaily(i);case pt.HOURLY:return this.addHours(i,n,l);case pt.MINUTELY:return this.addMinutes(i,n,l,c);case pt.SECONDLY:return this.addSeconds(i,n,l,c,u)}},t}(hh);function XR(e){for(var t=[],r=Object.keys(e),n=0,s=r;n<s.length;n++){var i=s[n];wt(hK,i)||t.push(i),qR(e[i])&&!sc(e[i])&&t.push(i)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return kn({},e)}function Fq(e){var t=kn(kn({},Gv),XR(e));if(nr(t.byeaster)&&(t.freq=be.YEARLY),!(nr(t.freq)&&be.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),nr(t.wkst)?ps(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=be.MO.weekday,nr(t.bysetpos)){ps(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var r=0;r<t.bysetpos.length;r++){var n=t.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(t.byweekno||fr(t.byweekno)||fr(t.byyearday)||t.bymonthday||fr(t.bymonthday)||nr(t.byweekday)||nr(t.byeaster)))switch(t.freq){case be.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case be.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case be.WEEKLY:t.byweekday=[al(t.dtstart)];break}if(nr(t.bymonth)&&!mn(t.bymonth)&&(t.bymonth=[t.bymonth]),nr(t.byyearday)&&!mn(t.byyearday)&&ps(t.byyearday)&&(t.byyearday=[t.byyearday]),!nr(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(mn(t.bymonthday)){for(var s=[],i=[],r=0;r<t.bymonthday.length;r++){var n=t.bymonthday[r];n>0?s.push(n):n<0&&i.push(n)}t.bymonthday=s,t.bynmonthday=i}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(nr(t.byweekno)&&!mn(t.byweekno)&&(t.byweekno=[t.byweekno]),!nr(t.byweekday))t.bynweekday=null;else if(ps(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(L1(t.byweekday))t.byweekday=[Vr.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof Vr)!t.byweekday.n||t.freq>be.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var a=[],l=[],r=0;r<t.byweekday.length;r++){var c=t.byweekday[r];if(ps(c)){a.push(c);continue}else if(L1(c)){a.push(Vr.fromStr(c).weekday);continue}!c.n||t.freq>be.MONTHLY?a.push(c.weekday):l.push([c.weekday,c.n])}t.byweekday=fr(a)?a:null,t.bynweekday=fr(l)?l:null}return nr(t.byhour)?ps(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<be.HOURLY?[t.dtstart.getUTCHours()]:null,nr(t.byminute)?ps(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<be.MINUTELY?[t.dtstart.getUTCMinutes()]:null,nr(t.bysecond)?ps(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<be.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function Bq(e){var t=e.dtstart.getTime()%1e3;if(!Yv(e.freq))return[];var r=[];return e.byhour.forEach(function(n){e.byminute.forEach(function(s){e.bysecond.forEach(function(i){r.push(new hh(n,s,i,t))})})}),r}function xy(e){var t=e.split(`
`).map(zq).filter(function(r){return r!==null});return kn(kn({},t[0]),t[1])}function ph(e){var t={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!r)return t;var n=r[1],s=r[2];return n&&(t.tzid=n),t.dtstart=Wv(s),t}function zq(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return V1(e);var r=t[1];switch(r.toUpperCase()){case"RRULE":case"EXRULE":return V1(e);case"DTSTART":return ph(e);default:throw new Error("Unsupported RFC prop ".concat(r," in ").concat(e))}}function V1(e){var t=e.replace(/^RRULE:/i,""),r=ph(t),n=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(s){var i=s.split("="),a=i[0],l=i[1];switch(a.toUpperCase()){case"FREQ":r.freq=pt[l.toUpperCase()];break;case"WKST":r.wkst=Gn[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var c=Uq(l),u=a.toLowerCase();r[u]=c;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=Hq(l);break;case"DTSTART":case"TZID":var d=ph(e);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=Wv(l);break;case"BYEASTER":r.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),r}function Uq(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map(W1)}return W1(e)}function W1(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function Hq(e){var t=e.split(",");return t.map(function(r){if(r.length===2)return Gn[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(r));var s=Number(n[1]),i=n[2],a=Gn[i].weekday;return new Vr(a,s)})}var mh=function(){function e(t,r){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=r}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=Vv(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:Dq(this.date,this.tzid)},e}();function vy(e){for(var t=[],r="",n=Object.keys(e),s=Object.keys(Gv),i=0;i<n.length;i++)if(n[i]!=="tzid"&&wt(s,n[i])){var a=n[i].toUpperCase(),l=e[n[i]],c="";if(!(!nr(l)||mn(l)&&!l.length)){switch(a){case"FREQ":c=be.FREQUENCIES[e.freq];break;case"WKST":ps(l)?c=new Vr(l).toString():c=l.toString();break;case"BYWEEKDAY":a="BYDAY",c=Eq(l).map(function(p){return p instanceof Vr?p:mn(p)?new Vr(p[0],p[1]):new Vr(p)}).toString();break;case"DTSTART":r=Vq(l,e.tzid);break;case"UNTIL":c=Vv(l,!e.tzid);break;default:if(mn(l)){for(var u=[],d=0;d<l.length;d++)u[d]=String(l[d]);c=u.toString()}else c=String(l)}c&&t.push([a,c])}}var f=t.map(function(p){var m=p[0],y=p[1];return"".concat(m,"=").concat(y.toString())}).join(";"),h="";return f!==""&&(h="RRULE:".concat(f)),[r,h].filter(function(p){return!!p}).join(`
`)}function Vq(e,t){return e?"DTSTART"+new mh(new Date(e),t).toString():""}function Wq(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(r,n){return r.getTime()===t[n].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var $q=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,r,n){r&&(r=r instanceof Date?gy(r):B1(r)),t==="all"?this.all=r:(n._value=r,this[t].push(n))},e.prototype._cacheGet=function(t,r){var n=!1,s=r?Object.keys(r):[],i=function(d){for(var f=0;f<s.length;f++){var h=s[f];if(!Wq(r[h],d[h]))return!0}return!1},a=this[t];if(t==="all")n=this.all;else if(mn(a))for(var l=0;l<a.length;l++){var c=a[l];if(!(s.length&&i(c))){n=c._value;break}}if(!n&&this.all){for(var u=new To(t,r),l=0;l<this.all.length&&u.accept(this.all[l]);l++);n=u.getValue(),this._cacheAdd(t,n,r)}return mn(n)?B1(n):n instanceof Date?gy(n):n},e}(),Yq=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],dt(1,31),!0),dt(2,28),!0),dt(3,31),!0),dt(4,30),!0),dt(5,31),!0),dt(6,30),!0),dt(7,31),!0),dt(8,31),!0),dt(9,30),!0),dt(10,31),!0),dt(11,30),!0),dt(12,31),!0),dt(1,7),!0),Gq=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],dt(1,31),!0),dt(2,29),!0),dt(3,31),!0),dt(4,30),!0),dt(5,31),!0),dt(6,30),!0),dt(7,31),!0),dt(8,31),!0),dt(9,30),!0),dt(10,31),!0),dt(11,30),!0),dt(12,31),!0),dt(1,7),!0),qq=Is(1,29),Kq=Is(1,30),Ai=Is(1,31),Ar=Is(1,32),Qq=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],Ar,!0),Kq,!0),Ar,!0),Ai,!0),Ar,!0),Ai,!0),Ar,!0),Ar,!0),Ai,!0),Ar,!0),Ai,!0),Ar,!0),Ar.slice(0,7),!0),Zq=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],Ar,!0),qq,!0),Ar,!0),Ai,!0),Ar,!0),Ai,!0),Ar,!0),Ar,!0),Ai,!0),Ar,!0),Ai,!0),Ar,!0),Ar.slice(0,7),!0),Xq=Is(-28,0),Jq=Is(-29,0),Di=Is(-30,0),Dr=Is(-31,0),eK=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],Dr,!0),Jq,!0),Dr,!0),Di,!0),Dr,!0),Di,!0),Dr,!0),Dr,!0),Di,!0),Dr,!0),Di,!0),Dr,!0),Dr.slice(0,7),!0),tK=xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(xe([],Dr,!0),Xq,!0),Dr,!0),Di,!0),Dr,!0),Di,!0),Dr,!0),Dr,!0),Di,!0),Dr,!0),Di,!0),Dr,!0),Dr.slice(0,7),!0),rK=[0,31,60,91,121,152,182,213,244,274,305,335,366],nK=[0,31,59,90,120,151,181,212,243,273,304,334,365],$1=function(){for(var e=[],t=0;t<55;t++)e=e.concat(Is(7));return e}();function sK(e,t){var r=Wa(e,1,1),n=Cc(e)?366:365,s=Cc(e+1)?366:365,i=my(r),a=al(r),l=kn(kn({yearlen:n,nextyearlen:s,yearordinal:i,yearweekday:a},iK(e)),{wnomask:null});if(xs(t.byweekno))return l;l.wnomask=dt(0,n+7);var c,u,d=c=_n(7-a+t.wkst,7);d>=4?(d=0,u=l.yearlen+_n(a-t.wkst,7)):u=n-d;for(var f=Math.floor(u/7),h=_n(u,7),p=Math.floor(f+h/4),m=0;m<t.byweekno.length;m++){var y=t.byweekno[m];if(y<0&&(y+=p+1),y>0&&y<=p){var b=void 0;y>1?(b=d+(y-1)*7,d!==c&&(b-=7-c)):b=d;for(var v=0;v<7&&(l.wnomask[b]=1,b++,l.wdaymask[b]!==t.wkst);v++);}}if(wt(t.byweekno,1)){var b=d+p*7;if(d!==c&&(b-=7-c),b<n)for(var m=0;m<7&&(l.wnomask[b]=1,b+=1,l.wdaymask[b]!==t.wkst);m++);}if(d){var x=void 0;if(wt(t.byweekno,-1))x=-1;else{var w=al(Wa(e-1,1,1)),k=_n(7-w.valueOf()+t.wkst,7),S=Cc(e-1)?366:365,E=void 0;k>=4?(k=0,E=S+_n(w-t.wkst,7)):E=n-d,x=Math.floor(52+_n(E,7)/4)}if(wt(t.byweekno,x))for(var b=0;b<d;b++)l.wnomask[b]=1}return l}function iK(e){var t=Cc(e)?366:365,r=Wa(e,1,1),n=al(r);return t===365?{mmask:Yq,mdaymask:Zq,nmdaymask:tK,wdaymask:$1.slice(n),mrange:nK}:{mmask:Gq,mdaymask:Qq,nmdaymask:eK,wdaymask:$1.slice(n),mrange:rK}}function aK(e,t,r,n,s,i){var a={lastyear:e,lastmonth:t,nwdaymask:[]},l=[];if(i.freq===be.YEARLY)if(xs(i.bymonth))l=[[0,r]];else for(var c=0;c<i.bymonth.length;c++)t=i.bymonth[c],l.push(n.slice(t-1,t+1));else i.freq===be.MONTHLY&&(l=[n.slice(t-1,t+1)]);if(xs(l))return a;a.nwdaymask=dt(0,r);for(var c=0;c<l.length;c++)for(var u=l[c],d=u[0],f=u[1]-1,h=0;h<i.bynweekday.length;h++){var p=void 0,m=i.bynweekday[h],y=m[0],b=m[1];b<0?(p=f+(b+1)*7,p-=_n(s[p]-y,7)):(p=d+(b-1)*7,p+=_n(7-s[p]+y,7)),d<=p&&p<=f&&(a.nwdaymask[p]=1)}return a}function oK(e,t){t===void 0&&(t=0);var r=e%19,n=Math.floor(e/100),s=e%100,i=Math.floor(n/4),a=n%4,l=Math.floor((n+8)/25),c=Math.floor((n-l+1)/3),u=Math.floor(19*r+n-i-c+15)%30,d=Math.floor(s/4),f=s%4,h=Math.floor(32+2*a+2*d-u-f)%7,p=Math.floor((r+11*u+22*h)/451),m=Math.floor((u+h-7*p+114)/31),y=(u+h-7*p+114)%31+1,b=Date.UTC(e,m-1,y+t),v=Date.UTC(e,0,1);return[Math.ceil((b-v)/(1e3*60*60*24))]}var lK=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,r){var n=this.options;if(t!==this.lastyear&&(this.yearinfo=sK(t,n)),fr(n.bynweekday)&&(r!==this.lastmonth||t!==this.lastyear)){var s=this.yearinfo,i=s.yearlen,a=s.mrange,l=s.wdaymask;this.monthinfo=aK(t,r,i,a,l,n)}nr(n.byeaster)&&(this.eastermask=oK(t,n.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[Is(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,r){for(var n=this.mrange[r-1],s=this.mrange[r],i=dt(null,this.yearlen),a=n;a<s;a++)i[a]=a;return[i,n,s]},e.prototype.wdayset=function(t,r,n){for(var s=dt(null,this.yearlen+7),i=my(Wa(t,r,n))-this.yearordinal,a=i,l=0;l<7&&(s[i]=i,++i,this.wdaymask[i]!==this.options.wkst);l++);return[s,a,i]},e.prototype.ddayset=function(t,r,n){var s=dt(null,this.yearlen),i=my(Wa(t,r,n))-this.yearordinal;return s[i]=i,[s,i,i+1]},e.prototype.htimeset=function(t,r,n,s){var i=this,a=[];return this.options.byminute.forEach(function(l){a=a.concat(i.mtimeset(t,l,n,s))}),cu(a),a},e.prototype.mtimeset=function(t,r,n,s){var i=this.options.bysecond.map(function(a){return new hh(t,r,a,s)});return cu(i),i},e.prototype.stimeset=function(t,r,n,s){return[new hh(t,r,n,s)]},e.prototype.getdayset=function(t){switch(t){case pt.YEARLY:return this.ydayset.bind(this);case pt.MONTHLY:return this.mdayset.bind(this);case pt.WEEKLY:return this.wdayset.bind(this);case pt.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case pt.HOURLY:return this.htimeset.bind(this);case pt.MINUTELY:return this.mtimeset.bind(this);case pt.SECONDLY:return this.stimeset.bind(this)}},e}();function cK(e,t,r,n,s,i){for(var a=[],l=0;l<e.length;l++){var c=void 0,u=void 0,d=e[l];d<0?(c=Math.floor(d/t.length),u=_n(d,t.length)):(c=Math.floor((d-1)/t.length),u=_n(d-1,t.length));for(var f=[],h=r;h<n;h++){var p=i[h];nr(p)&&f.push(p)}var m=void 0;c<0?m=f.slice(c)[0]:m=f[c];var y=t[u],b=KR(s.yearordinal+m),v=QR(b,y);wt(a,v)||a.push(v)}return cu(a),a}function JR(e,t){var r=t.dtstart,n=t.freq,s=t.interval,i=t.until,a=t.bysetpos,l=t.count;if(l===0||s===0)return Fs(e);var c=Lq.fromDate(r),u=new lK(t);u.rebuild(c.year,c.month);for(var d=fK(u,c,t);;){var f=u.getdayset(n)(c.year,c.month,c.day),h=f[0],p=f[1],m=f[2],y=dK(h,p,m,u,t);if(fr(a))for(var b=cK(a,d,p,m,u,h),v=0;v<b.length;v++){var x=b[v];if(i&&x>i)return Fs(e);if(x>=r){var w=Y1(x,t);if(!e.accept(w)||l&&(--l,!l))return Fs(e)}}else for(var v=p;v<m;v++){var k=h[v];if(nr(k))for(var S=KR(u.yearordinal+k),E=0;E<d.length;E++){var N=d[E],x=QR(S,N);if(i&&x>i)return Fs(e);if(x>=r){var w=Y1(x,t);if(!e.accept(w)||l&&(--l,!l))return Fs(e)}}}if(t.interval===0||(c.add(t,y),c.year>YR))return Fs(e);Yv(n)||(d=u.gettimeset(n)(c.hour,c.minute,c.second,0)),u.rebuild(c.year,c.month)}}function uK(e,t,r){var n=r.bymonth,s=r.byweekno,i=r.byweekday,a=r.byeaster,l=r.bymonthday,c=r.bynmonthday,u=r.byyearday;return fr(n)&&!wt(n,e.mmask[t])||fr(s)&&!e.wnomask[t]||fr(i)&&!wt(i,e.wdaymask[t])||fr(e.nwdaymask)&&!e.nwdaymask[t]||a!==null&&!wt(e.eastermask,t)||(fr(l)||fr(c))&&!wt(l,e.mdaymask[t])&&!wt(c,e.nmdaymask[t])||fr(u)&&(t<e.yearlen&&!wt(u,t+1)&&!wt(u,-e.yearlen+t)||t>=e.yearlen&&!wt(u,t+1-e.yearlen)&&!wt(u,-e.nextyearlen+t-e.yearlen))}function Y1(e,t){return new mh(e,t.tzid).rezonedDate()}function Fs(e){return e.getValue()}function dK(e,t,r,n,s){for(var i=!1,a=t;a<r;a++){var l=e[a];i=uK(n,l,s),i&&(e[l]=null)}return i}function fK(e,t,r){var n=r.freq,s=r.byhour,i=r.byminute,a=r.bysecond;return Yv(n)?Bq(r):n>=be.HOURLY&&fr(s)&&!wt(s,t.hour)||n>=be.MINUTELY&&fr(i)&&!wt(i,t.minute)||n>=be.SECONDLY&&fr(a)&&!wt(a,t.second)?[]:e.gettimeset(n)(t.hour,t.minute,t.second,t.millisecond)}var Gn={MO:new Vr(0),TU:new Vr(1),WE:new Vr(2),TH:new Vr(3),FR:new Vr(4),SA:new Vr(5),SU:new Vr(6)},Gv={freq:pt.YEARLY,dtstart:null,interval:1,wkst:Gn.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},hK=Object.keys(Gv),be=function(){function e(t,r){t===void 0&&(t={}),r===void 0&&(r=!1),this._cache=r?null:new $q,this.origOptions=XR(t);var n=Fq(t).parsedOptions;this.options=n}return e.parseText=function(t,r){return ZR(t,r)},e.fromText=function(t,r){return Mq(t,r)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return JR(t,this.options)},e.prototype._cacheGet=function(t,r){return this._cache?this._cache._cacheGet(t,r):!1},e.prototype._cacheAdd=function(t,r,n){if(this._cache)return this._cache._cacheAdd(t,r,n)},e.prototype.all=function(t){if(t)return this._iter(new U1("all",{},t));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new To("all",{})),this._cacheAdd("all",r)),r},e.prototype.between=function(t,r,n,s){if(n===void 0&&(n=!1),!sc(t)||!sc(r))throw new Error("Invalid date passed in to RRule.between");var i={before:r,after:t,inc:n};if(s)return this._iter(new U1("between",i,s));var a=this._cacheGet("between",i);return a===!1&&(a=this._iter(new To("between",i)),this._cacheAdd("between",a,i)),a},e.prototype.before=function(t,r){if(r===void 0&&(r=!1),!sc(t))throw new Error("Invalid date passed in to RRule.before");var n={dt:t,inc:r},s=this._cacheGet("before",n);return s===!1&&(s=this._iter(new To("before",n)),this._cacheAdd("before",s,n)),s},e.prototype.after=function(t,r){if(r===void 0&&(r=!1),!sc(t))throw new Error("Invalid date passed in to RRule.after");var n={dt:t,inc:r},s=this._cacheGet("after",n);return s===!1&&(s=this._iter(new To("after",n)),this._cacheAdd("after",s,n)),s},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return vy(this.origOptions)},e.prototype.toText=function(t,r,n){return Oq(this,t,r,n)},e.prototype.isFullyConvertibleToText=function(){return Pq(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=pt.YEARLY,e.MONTHLY=pt.MONTHLY,e.WEEKLY=pt.WEEKLY,e.DAILY=pt.DAILY,e.HOURLY=pt.HOURLY,e.MINUTELY=pt.MINUTELY,e.SECONDLY=pt.SECONDLY,e.MO=Gn.MO,e.TU=Gn.TU,e.WE=Gn.WE,e.TH=Gn.TH,e.FR=Gn.FR,e.SA=Gn.SA,e.SU=Gn.SU,e.parseString=xy,e.optionsToString=vy,e}();function pK(e,t,r,n,s,i){var a={},l=e.accept;function c(h,p){r.forEach(function(m){m.between(h,p,!0).forEach(function(y){a[Number(y)]=!0})})}s.forEach(function(h){var p=new mh(h,i).rezonedDate();a[Number(p)]=!0}),e.accept=function(h){var p=Number(h);return isNaN(p)?l.call(this,h):!a[p]&&(c(new Date(p-1),new Date(p+1)),!a[p])?(a[p]=!0,l.call(this,h)):!0},e.method==="between"&&(c(e.args.after,e.args.before),e.accept=function(h){var p=Number(h);return a[p]?!0:(a[p]=!0,l.call(this,h))});for(var u=0;u<n.length;u++){var d=new mh(n[u],i).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(h){JR(e,h.options)});var f=e._result;switch(cu(f),e.method){case"all":case"between":return f;case"before":return f.length&&f[f.length-1]||null;case"after":default:return f.length&&f[0]||null}}var G1={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function mK(e,t){var r=[],n=[],s=[],i=[],a=ph(e),l=a.dtstart,c=a.tzid,u=bK(e,t.unfold);return u.forEach(function(d){var f;if(d){var h=vK(d),p=h.name,m=h.parms,y=h.value;switch(p.toUpperCase()){case"RRULE":if(m.length)throw new Error("unsupported RRULE parm: ".concat(m.join(",")));r.push(xy(d));break;case"RDATE":var b=(f=/RDATE(?:;TZID=([^:=]+))?/i.exec(d))!==null&&f!==void 0?f:[],v=b[1];v&&!c&&(c=v),n=n.concat(q1(y,m));break;case"EXRULE":if(m.length)throw new Error("unsupported EXRULE parm: ".concat(m.join(",")));s.push(xy(y));break;case"EXDATE":i=i.concat(q1(y,m));break;case"DTSTART":break;default:throw new Error("unsupported property: "+p)}}}),{dtstart:l,tzid:c,rrulevals:r,rdatevals:n,exrulevals:s,exdatevals:i}}function gK(e,t){var r=mK(e,t),n=r.rrulevals,s=r.rdatevals,i=r.exrulevals,a=r.exdatevals,l=r.dtstart,c=r.tzid,u=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||n.length>1||s.length||i.length||a.length){var d=new e_(u);return d.dtstart(l),d.tzid(c||void 0),n.forEach(function(h){d.rrule(new be(rg(h,l,c),u))}),s.forEach(function(h){d.rdate(h)}),i.forEach(function(h){d.exrule(new be(rg(h,l,c),u))}),a.forEach(function(h){d.exdate(h)}),t.compatible&&t.dtstart&&d.rdate(l),d}var f=n[0]||{};return new be(rg(f,f.dtstart||t.dtstart||l,f.tzid||t.tzid||c),u)}function by(e,t){return t===void 0&&(t={}),gK(e,yK(t))}function rg(e,t,r){return kn(kn({},e),{dtstart:t,tzid:r})}function yK(e){var t=[],r=Object.keys(e),n=Object.keys(G1);if(r.forEach(function(s){wt(n,s)||t.push(s)}),t.length)throw new Error("Invalid options: "+t.join(", "));return kn(kn({},G1),e)}function xK(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=Nq(e,":",1),r=t[0],n=t[1];return{name:r,value:n}}function vK(e){var t=xK(e),r=t.name,n=t.value,s=r.split(";");if(!s)throw new Error("empty property name");return{name:s[0].toUpperCase(),parms:s.slice(1),value:n}}function bK(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var r=e.split(`
`),n=0;n<r.length;){var s=r[n]=r[n].replace(/\s+$/g,"");s?n>0&&s[0]===" "?(r[n-1]+=s.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function wK(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function q1(e,t){return wK(t),e.split(",").map(function(r){return Wv(r)})}function K1(e){var t=this;return function(r){if(r!==void 0&&(t["_".concat(e)]=r),t["_".concat(e)]!==void 0)return t["_".concat(e)];for(var n=0;n<t._rrule.length;n++){var s=t._rrule[n].origOptions[e];if(s)return s}}}var e_=function(e){$v(t,e);function t(r){r===void 0&&(r=!1);var n=e.call(this,{},r)||this;return n.dtstart=K1.apply(n,["dtstart"]),n.tzid=K1.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return t.prototype._iter=function(r){return pK(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(r){Q1(r,this._rrule)},t.prototype.exrule=function(r){Q1(r,this._exrule)},t.prototype.rdate=function(r){Z1(r,this._rdate)},t.prototype.exdate=function(r){Z1(r,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(r){return by(r.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(r){return by(r.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},t.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(vy({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(s){return s.replace(/^RRULE:/,"EXRULE:")}).filter(function(s){return!/^DTSTART/.test(s)}))}),this._rdate.length&&r.push(X1("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(X1("EXDATE",this._exdate,this.tzid())),r},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var r=new t(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},t}(be);function Q1(e,t){if(!(e instanceof be))throw new TypeError(String(e)+" is not RRule instance");wt(t.map(String),String(e))||t.push(e)}function Z1(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");wt(t.map(Number),Number(e))||(t.push(e),cu(t))}function X1(e,t,r){var n=!r||r.toUpperCase()==="UTC",s=n?"".concat(e,":"):"".concat(e,";TZID=").concat(r,":"),i=t.map(function(a){return Vv(a.valueOf(),n)}).join(",");return"".concat(s).concat(i)}const kK={parse(e,t){if(e.rrule!=null){let r=SK(e,t);if(r)return{typeData:{rruleSet:r.rruleSet,dateEnv:r.isTimeZoneSpecified?void 0:t},allDayGuess:!r.isTimeSpecified,duration:e.duration}}return null},expand(e,t,r){return e.rruleSet.between(or(t.start,-1),or(t.end,1)).map(n=>r.createMarker(e.dateEnv?e.dateEnv.toDate(n):n))}};function SK(e,t){let r,n=!1,s=!1;if(typeof e.rrule=="string"){let l=EK(e.rrule);r=l.rruleSet,n=l.isTimeSpecified,s=l.isTimeZoneSpecified}if(typeof e.rrule=="object"&&e.rrule){let l=J1(e.rrule,t);r=new e_,r.rrule(l.rrule),n=l.isTimeSpecified,s=l.isTimeZoneSpecified}let i=[].concat(e.exdate||[]),a=[].concat(e.exrule||[]);for(let l of i){let c=vp(l);n=n||!c.isTimeUnspecified,s=s||c.timeZoneOffset!==null,r.exdate(new Date(c.marker.valueOf()-(c.timeZoneOffset||0)*60*1e3))}for(let l of a){let c=J1(l,t);n=n||c.isTimeSpecified,s=s||c.isTimeZoneSpecified,r.exrule(c.rrule)}return{rruleSet:r,isTimeSpecified:n,isTimeZoneSpecified:s}}function J1(e,t){let r=!1,n=!1;function s(a){if(typeof a=="string"){let l=vp(a);return l?(r=r||!l.isTimeUnspecified,n=n||l.timeZoneOffset!==null,new Date(l.marker.valueOf()-(l.timeZoneOffset||0)*60*1e3)):null}return a}let i=Object.assign(Object.assign({},e),{dtstart:s(e.dtstart),until:s(e.until),freq:gh(e.freq),wkst:e.wkst==null?(t.weekDow-1+7)%7:gh(e.wkst),byweekday:CK(e.byweekday)});return{rrule:new be(i),isTimeSpecified:r,isTimeZoneSpecified:n}}function EK(e){let t=by(e,{forceset:!0}),r=NK(e);return Object.assign({rruleSet:t},r)}function NK(e){let t=!1,r=!1;function n(s,i,a){let l=vp(a);t=t||!l.isTimeUnspecified,r=r||l.timeZoneOffset!==null}return e.replace(/\b(DTSTART:)([^\n]*)/,n),e.replace(/\b(EXDATE:)([^\n]*)/,n),e.replace(/\b(UNTIL=)([^;\n]*)/,n),{isTimeSpecified:t,isTimeZoneSpecified:r}}function CK(e){return Array.isArray(e)?e.map(gh):gh(e)}function gh(e){return typeof e=="string"?be[e.toUpperCase()]:e}const jK={rrule:V,exrule:V,exdate:V,duration:ft};var TK=li({name:"@fullcalendar/rrule",recurringTypes:[kK],eventRefiners:jK});const AK=async e=>(await K.get(`/calendar/${e}`)).data,ng=async e=>(await K.post("/calendar",e)).data,la=async(e,t)=>{await K.put(`/calendar/${e}`,t)},DK=async e=>{await K.delete(`/calendar/${e}`)},t_=async e=>(await K.get(`/tasks/family/${e}`)).data,RK=async e=>(await K.post("/tasks",e)).data,sg=async(e,t)=>(await K.put(`/tasks/${e}`,t)).data,_K=async(e,t)=>{const r=new FormData;r.append("attachment",t),await K.post(`/tasks/${e}/attachments`,r,{headers:{"Content-Type":"multipart/form-data"}})},IK=async(e,t)=>{await K.delete(`/tasks/${e}/attachments/${t}`)},MK="#3788d8",eE="#f97316",yh=["SU","MO","TU","WE","TH","FR","SA"],OK=["MO","TU","WE","TH","FR","SA","SU"],tE=[{value:"SU",label:"Sunday"},{value:"MO",label:"Monday"},{value:"TU",label:"Tuesday"},{value:"WE",label:"Wednesday"},{value:"TH",label:"Thursday"},{value:"FR",label:"Friday"},{value:"SA",label:"Saturday"}],PK=[{value:"1",label:"First"},{value:"2",label:"Second"},{value:"3",label:"Third"},{value:"4",label:"Fourth"},{value:"last",label:"Last"}],LK=[{value:"DAILY",label:"Daily"},{value:"WEEKLY",label:"Weekly"},{value:"MONTHLY",label:"Monthly"},{value:"YEARLY",label:"Yearly"}],ig={SU:be.SU,MO:be.MO,TU:be.TU,WE:be.WE,TH:be.TH,FR:be.FR,SA:be.SA},FK=e=>yh.includes(e),ag=e=>{if(typeof e=="number"){const r=(e%7+7)%7;return OK[r]}const t=e.toString().slice(0,2).toUpperCase();return FK(t)?t:"MO"},jc=e=>{const t=e?new Date(e):new Date;return Number.isNaN(t.getTime())?"MO":yh[t.getDay()]},r_=e=>{const t=e?new Date(e):new Date;if(Number.isNaN(t.getTime()))return"1";const r=t.getDate(),n=new Date(t.getFullYear(),t.getMonth()+1,0).getDate();if(r>n-7)return"last";const s=Math.min(Math.ceil(r/7),4);return String(s)},rE=e=>e==="last"?-1:parseInt(e,10),nE=e=>{if(e===void 0)return"1";if(e===-1)return"last";const t=Math.min(Math.max(e,1),4);return String(t)},BK=e=>e.toISOString().split("T")[0],n_=e=>{const t=e?new Date(e):new Date,r=jc(e),n=Number.isNaN(t.getDate())?1:t.getDate();return{frequency:"WEEKLY",interval:1,weekDays:[r],monthlyMode:"dayOfMonth",ordinal:r_(e),ordinalWeekday:r,monthlyDay:n,ends:"never"}},zK=(e,t)=>{if(!t)return;const r=new Date(e),n=new Date(t);if(Number.isNaN(r.getTime())||Number.isNaN(n.getTime()))return;const s=n.getTime()-r.getTime();if(s<=0)return;const i=Math.floor(s/1e3),a=Math.floor(i/3600),l=Math.floor(i%3600/60),c=i%60,u={};return a&&(u.hours=a),l&&(u.minutes=l),!a&&!l&&c&&(u.seconds=c),Object.keys(u).length>0?u:void 0},UK=(e,t)=>{const n={freq:{DAILY:be.DAILY,WEEKLY:be.WEEKLY,MONTHLY:be.MONTHLY,YEARLY:be.YEARLY}[e.frequency],interval:Math.max(e.interval,1),dtstart:new Date(t)};if(e.frequency==="WEEKLY"){const i=e.weekDays.length?e.weekDays:[jc(t)];n.byweekday=i.map(a=>ig[a])}if(e.frequency==="MONTHLY"&&(e.monthlyMode==="dayOfMonth"?n.bymonthday=[e.monthlyDay]:(n.byweekday=[ig[e.ordinalWeekday]],n.bysetpos=[rE(e.ordinal)])),e.frequency==="YEARLY"){const i=new Date(t);n.bymonth=[i.getMonth()+1],e.monthlyMode==="ordinalWeekday"?(n.byweekday=[ig[e.ordinalWeekday]],n.bysetpos=[rE(e.ordinal)]):n.bymonthday=[e.monthlyDay]}return e.ends==="onDate"&&e.until?n.until=new Date(`${e.until}T23:59:59`):e.ends==="after"&&e.count&&e.count>0&&(n.count=e.count),new be(n).toString()},HK=(e,t)=>{const r=n_(t);try{const n=be.parseString(e),s=n.freq??be.WEEKLY;let i="WEEKLY";s===be.DAILY&&(i="DAILY"),s===be.WEEKLY&&(i="WEEKLY"),s===be.MONTHLY&&(i="MONTHLY"),s===be.YEARLY&&(i="YEARLY");const a={...r,frequency:i,interval:n.interval??1,weekDays:r.weekDays,monthlyMode:r.monthlyMode,ordinal:r.ordinal,ordinalWeekday:r.ordinalWeekday,monthlyDay:r.monthlyDay,ends:"never"};if(i==="WEEKLY"&&n.byweekday){const l=Array.isArray(n.byweekday)?n.byweekday:[n.byweekday];a.weekDays=l.map(c=>ag(c))}if(i==="MONTHLY"){if(n.bysetpos&&n.byweekday){const l=Array.isArray(n.byweekday)?n.byweekday:[n.byweekday];a.monthlyMode="ordinalWeekday",a.ordinalWeekday=ag(l[0]);const c=Array.isArray(n.bysetpos)?n.bysetpos[0]:n.bysetpos;a.ordinal=nE(c)}else if(n.bymonthday){const l=Array.isArray(n.bymonthday)?n.bymonthday[0]:n.bymonthday;typeof l=="number"&&(a.monthlyMode="dayOfMonth",a.monthlyDay=l)}}if(i==="YEARLY"){if(n.bysetpos&&n.byweekday){const l=Array.isArray(n.byweekday)?n.byweekday:[n.byweekday];a.monthlyMode="ordinalWeekday",a.ordinalWeekday=ag(l[0]);const c=Array.isArray(n.bysetpos)?n.bysetpos[0]:n.bysetpos;a.ordinal=nE(c)}else if(n.bymonthday){const l=Array.isArray(n.bymonthday)?n.bymonthday[0]:n.bymonthday;typeof l=="number"&&(a.monthlyMode="dayOfMonth",a.monthlyDay=l)}}return n.until?(a.ends="onDate",a.until=BK(new Date(n.until))):n.count&&(a.ends="after",a.count=n.count),a}catch(n){return console.error("Failed to parse recurrence rule:",e,n),r}},sE=()=>{const{family:e}=Lr(),{user:t,isAuthenticated:r,isLoading:n}=Ot(),s=g.useRef(null),[i,a]=g.useState([]),[l,c]=g.useState([]),[u,d]=g.useState(!0),[f,h]=g.useState(null),[p,m]=g.useState(!1),[y,b]=g.useState(null),[v,x]=g.useState(!1),[w,k]=g.useState(""),[S,E]=g.useState("UTC"),[N,C]=g.useState(""),[T,j]=g.useState(""),[I,H]=g.useState(""),[L,D]=g.useState(""),[O,P]=g.useState(""),[U,z]=g.useState(!1),[$,ne]=g.useState("WEEKLY"),[X,fe]=g.useState(1),[de,ge]=g.useState([]),[se,M]=g.useState("dayOfMonth"),[re,F]=g.useState(1),[le,ee]=g.useState("1"),[we,ke]=g.useState("MO"),[Ie,Pe]=g.useState("never"),[We,Ze]=g.useState(""),[it,Ue]=g.useState(""),[Ne,ze]=g.useState([]),[R,Q]=g.useState(null),[_,A]=g.useState("all"),[q,me]=g.useState(!1),[ye,gt]=g.useState({}),[Ht,qt]=g.useState(!0),ot=g.useMemo(()=>mr("calendar-page"),[]),Fr=g.useCallback(Y=>{const Fe=n_(Y);z(!1),ne(Fe.frequency),fe(Fe.interval),ge(Fe.weekDays),M(Fe.monthlyMode),F(Fe.monthlyDay),ee(Fe.ordinal),ke(Fe.ordinalWeekday),Pe(Fe.ends),Ze(""),Ue(""),ze([])},[]),ui=g.useCallback(Y=>{ne(Y.frequency),fe(Y.interval),ge(Y.weekDays),M(Y.monthlyMode),F(Y.monthlyDay),ee(Y.ordinal),ke(Y.ordinalWeekday),Pe(Y.ends),Ze(Y.until??""),Ue(Y.count?String(Y.count):"")},[]),Vt=g.useMemo(()=>{const Y=Number(it);return{frequency:$,interval:X,weekDays:de,monthlyMode:se,ordinal:le,ordinalWeekday:we,monthlyDay:re,ends:Ie,until:Ie==="onDate"?We:void 0,count:Ie==="after"&&!Number.isNaN(Y)&&Y>0?Y:void 0}},[it,Ie,$,X,re,se,le,we,We,de]),tr=g.useMemo(()=>{if(!U||!T)return null;try{return UK(Vt,T)}catch(Y){return console.error("Failed to build recurrence rule preview:",Y),null}},[U,T,Vt]),un=g.useMemo(()=>{if(!T)return null;const Y=new Date(T);return Number.isNaN(Y.getTime())?null:Y},[T]),cs=g.useMemo(()=>un?un.toLocaleString(void 0,{month:"long"}):"",[un]),ae=g.useCallback(Y=>{!v||_==="one"||y!=null&&y.RecurrenceParentID||ge(Fe=>Fe.includes(Y)?Fe.filter(Nt=>Nt!==Y):[...Fe,Y].sort((Nt,B)=>yh.indexOf(Nt)-yh.indexOf(B)))},[v,_,y==null?void 0:y.RecurrenceParentID]);g.useEffect(()=>{if(!U||$!=="WEEKLY"||de.length>0)return;const Y=jc(T||new Date().toISOString());ge([Y])},[U,$,de.length,T]),g.useEffect(()=>{if(y||!T)return;const Y=new Date(T);Number.isNaN(Y.getTime())||(F(Y.getDate()),ee(r_(T)),ke(jc(T)),de.length===0&&ge([jc(T)]))},[T,de.length,y]),g.useEffect(()=>{if(!y){A("all");return}y.RecurrenceParentID?A("one"):A("all")},[y]),g.useEffect(()=>{(_==="one"||y!=null&&y.RecurrenceParentID)&&z(!1)},[_,y==null?void 0:y.RecurrenceParentID]);const ce=!v||_==="one"||!!(y!=null&&y.RecurrenceParentID),qe=()=>{const Y={};if(N||(Y.newEventTitle="Event title is required."),T||(Y.newEventStart="Start date is required."),U&&!ce&&($==="WEEKLY"&&de.length===0&&(Y.recurrenceWeekdays="Select at least one weekday."),$==="MONTHLY"&&se==="dayOfMonth"&&(re<1||re>31)&&(Y.recurrenceMonthlyDay="Choose a valid day of the month (1-31)."),Ie==="onDate"&&!We&&(Y.recurrenceUntil="Please choose when the repeating series should end."),Ie==="after")){const Fe=Number(it);(!it||Number.isNaN(Fe)||Fe<=0)&&(Y.recurrenceCount="Enter how many occurrences should be created.")}return gt(Y),Object.keys(Y).length===0},Xe=g.useCallback(async()=>{if(ot.log("fetchEvents: Called. Family:",e),!e){ot.log("fetchEvents: Family not available, returning.");return}try{d(!0);const Y=await AK(e.FamilyID.toString());ot.log("fetchEvents: Received eventsData:",Y),a(Y)}catch(Y){ot.error("fetchEvents: Error fetching events:",Y),h(Y instanceof Error?Y.message:"An unknown error occurred")}finally{d(!1)}},[e,ot]),Kr=g.useCallback(async()=>{if(ot.log("fetchTasks: Called. Family:",e),!e){ot.log("fetchTasks: Family not available, clearing tasks."),c([]);return}try{const Fe=(await t_(e.FamilyID.toString())).filter(Re=>!!Re.DueDate);ot.log("fetchTasks: Received tasksData count:",Fe.length),c(Fe)}catch(Y){ot.error("fetchTasks: Error fetching tasks for calendar sync:",Y),c([])}},[e,ot]);g.useEffect(()=>{E(Intl.DateTimeFormat().resolvedOptions().timeZone)},[]),g.useEffect(()=>{ot.log("useEffect: Calling fetchEvents and fetchTasks..."),Xe(),Kr(),s.current&&k(s.current.getApi().view.title)},[Xe,Kr,ot]);const Os=Y=>{var Ae,ct,gr;if(((Ae=Y.event.extendedProps)==null?void 0:Ae.eventKind)==="task"){const tt=(ct=Y.event.extendedProps)==null?void 0:ct.task;ot.log("handleEventClick: Task event clicked",{taskId:tt==null?void 0:tt.TaskID,title:tt==null?void 0:tt.Title});return}const Re=((gr=Y.event.extendedProps)==null?void 0:gr.rawEvent)??i.find(tt=>tt.EventID===Number(Y.event.id));if(!Re){ot.warn("Event not found for id:",Y.event.id);return}b(Re),C(Re.Title),j(Re.StartTime?new Date(Re.StartTime).toISOString().substring(0,16):""),H(Re.EndTime?new Date(Re.EndTime).toISOString().substring(0,16):""),D(Re.Description||""),P(Re.Location||""),Fr(Re.StartTime);const Wt=Array.isArray(Re.RecurrenceExceptionDates)?Re.RecurrenceExceptionDates:[];if(ze(Wt),Re.RecurrencePattern){z(!0);const tt=HK(Re.RecurrencePattern,Re.StartTime);ui(tt)}else z(!1);const Nt=Y.event.start?Y.event.start.toISOString():Re.StartTime,B=Y.event.end?Y.event.end.toISOString():Re.EndTime??null;if(Nt){const tt=new Date(Nt);if(!Number.isNaN(tt.getTime())){const Un=new Date(tt.getTime()-tt.getTimezoneOffset()*6e4).toISOString().substring(0,16);j(Un)}}if(B){const tt=new Date(B);if(!Number.isNaN(tt.getTime())){const Un=new Date(tt.getTime()-tt.getTimezoneOffset()*6e4).toISOString().substring(0,16);H(Un)}}Q({start:Nt,end:B,isOverride:!!Re.RecurrenceParentID}),A(Re.RecurrenceParentID?"one":"all"),me(!1),x(!1),m(!0)},J=Y=>{b(null),C("");const Fe=`${Y.dateStr}T00:00`;j(Fe),H(""),D(""),P(""),Fr(Fe),Q({start:Fe,end:null,isOverride:!1}),A("all"),me(!1),x(!0),m(!0)},De=async()=>{if(!qe())return;if(n||!r||!e||!t){ot.error("Cannot save event: Auth status loading, not authenticated, or family/user data missing.");return}const Y=U&&T&&!ce?tr:null,Fe=new Date(T);if(Number.isNaN(Fe.getTime())){gt(Ae=>({...Ae,newEventStart:"Start date is invalid."}));return}const Re=I?new Date(I):void 0,Wt=Re&&!Number.isNaN(Re.getTime())?Re.toISOString():void 0,Nt=Fe.toISOString(),B={familyId:e.FamilyID,title:N,description:L||void 0,startTime:Nt,endTime:Wt,location:O||void 0,createdByUserId:t.id,recurrenceRule:Y,recurrenceExceptionDates:Y!==null?Ne:void 0};ot.log("handleSaveEvent: Attempting to save event with data:",B,{editScope:_,occurrenceContext:R});try{if(!y)await ng(B);else if(y.RecurrenceParentID){const Ae={title:B.title,description:B.description,startTime:B.startTime,endTime:B.endTime,location:B.location,recurrenceRule:null};await la(y.EventID.toString(),Ae)}else if(y.RecurrencePattern){const Ae=y.EventID.toString(),ct=R==null?void 0:R.start,gr=(R==null?void 0:R.end)??null;if(_==="all"){const tt={title:B.title,description:B.description,startTime:B.startTime,endTime:B.endTime,location:B.location,recurrenceRule:B.recurrenceRule,recurrenceExceptionDates:B.recurrenceRule?Ne:[]};await la(Ae,tt)}else if(_==="one"){if(!ct)throw new Error("Unable to determine occurrence start for single-instance edit.");const tt=new Set(Ne);tt.add(ct);const Un={title:y.Title,description:y.Description||void 0,startTime:new Date(y.StartTime).toISOString(),endTime:y.EndTime?new Date(y.EndTime).toISOString():void 0,location:y.Location||void 0,recurrenceRule:y.RecurrencePattern||null,recurrenceExceptionDates:Array.from(tt)};await la(Ae,Un);const us={...B,recurrenceRule:null,recurrenceExceptionDates:void 0,recurrenceParentId:y.EventID,recurrenceOriginalStart:ct,recurrenceOriginalEnd:gr};await ng(us)}else if(_==="future"){if(!ct)throw new Error("Unable to determine occurrence start for series split.");let tt=y.RecurrencePattern||null;if(y.RecurrencePattern)try{const Ls=be.parseString(y.RecurrencePattern),Wu=new Date(new Date(ct).getTime()-1e3);Ls.until=Wu,Ls.dtstart=new Date(y.StartTime),tt=new be(Ls).toString()}catch(Ls){console.error("Failed to truncate recurrence rule during split.",Ls)}const Un={title:y.Title,description:y.Description||void 0,startTime:new Date(y.StartTime).toISOString(),endTime:y.EndTime?new Date(y.EndTime).toISOString():void 0,location:y.Location||void 0,recurrenceRule:tt,recurrenceExceptionDates:Ne};await la(Ae,Un);const us={...B,recurrenceParentId:void 0,recurrenceOriginalStart:ct,recurrenceOriginalEnd:gr};await ng(us)}}else{const Ae={title:B.title,description:B.description,startTime:B.startTime,endTime:B.endTime,location:B.location,recurrenceRule:B.recurrenceRule,recurrenceExceptionDates:B.recurrenceExceptionDates};await la(y.EventID.toString(),Ae)}m(!1),me(!1),Xe()}catch(Ae){h(Ae instanceof Error?Ae.message:"Failed to save event")}},Ke=async Y=>{if(y)try{const Fe=y.EventID.toString();if(Y==="all"||y.RecurrenceParentID||!y.RecurrencePattern)await DK(Fe);else if(Y==="one"){const Re=R==null?void 0:R.start;if(!Re)throw new Error("Unable to determine occurrence start for deletion.");const Wt=new Set(Array.isArray(Ne)?Ne:[]);Wt.add(Re);const Nt={title:y.Title,description:y.Description||void 0,startTime:new Date(y.StartTime).toISOString(),endTime:y.EndTime?new Date(y.EndTime).toISOString():void 0,location:y.Location||void 0,recurrenceRule:y.RecurrencePattern||null,recurrenceExceptionDates:Array.from(Wt)};await la(Fe,Nt)}else if(Y==="future"){const Re=R==null?void 0:R.start;if(!Re)throw new Error("Unable to determine occurrence start for deletion.");let Wt=y.RecurrencePattern||null;if(y.RecurrencePattern)try{const B=be.parseString(y.RecurrencePattern),Ae=new Date(new Date(Re).getTime()-1e3);B.until=Ae,B.dtstart=new Date(y.StartTime),Wt=new be(B).toString()}catch(B){console.error("Failed to truncate recurrence rule during deletion.",B)}const Nt={title:y.Title,description:y.Description||void 0,startTime:new Date(y.StartTime).toISOString(),endTime:y.EndTime?new Date(y.EndTime).toISOString():void 0,location:y.Location||void 0,recurrenceRule:Wt,recurrenceExceptionDates:Ne};await la(Fe,Nt)}me(!1),m(!1),Xe()}catch(Fe){h(Fe instanceof Error?Fe.message:"Failed to delete event")}},lt=Y=>{if(s.current){const Fe=s.current.getApi();Y==="prev"?Fe.prev():Y==="next"?Fe.next():Y==="today"?Fe.today():Fe.changeView(Y),k(Fe.view.title)}},Ps=g.useMemo(()=>{const Y=i.map(Re=>{const Wt=Re.Color||MK,Nt={id:Re.EventID.toString(),title:Re.Title,backgroundColor:Wt,borderColor:Wt,extendedProps:{rawEvent:Re,isOverride:!!Re.RecurrenceParentID}};if(Re.RecurrencePattern)try{const B=be.parseString(Re.RecurrencePattern);B.dtstart=new Date(Re.StartTime);const Ae={...Nt,rrule:B,extendedProps:{...Nt.extendedProps??{},isSeriesMaster:!0}},ct=zK(Re.StartTime,Re.EndTime);return ct&&(Ae.duration=ct),Array.isArray(Re.RecurrenceExceptionDates)&&Re.RecurrenceExceptionDates.length>0&&(Ae.exdate=Re.RecurrenceExceptionDates),Ae}catch(B){console.error("Failed to parse recurrence pattern for event",Re.EventID,B)}return{...Nt,start:Re.StartTime,end:Re.EndTime??void 0,extendedProps:{...Nt.extendedProps??{},isSeriesMaster:!!Re.RecurrencePattern}}});if(!Ht)return Y;const Fe=l.reduce((Re,Wt)=>{if(!Wt.DueDate)return Re;const Nt=new Date(Wt.DueDate);if(Number.isNaN(Nt.getTime()))return Re;const B=/\d{2}:\d{2}/.test(Wt.DueDate),Ae=Nt.getUTCHours()===0&&Nt.getUTCMinutes()===0,ct={id:`task-${Wt.TaskID}`,title:`Task: ${Wt.Title}`,start:Nt.toISOString(),allDay:!B||Ae,backgroundColor:eE,borderColor:eE,extendedProps:{eventKind:"task",task:Wt}};return Re.push(ct),Re},[]);return[...Y,...Fe]},[i,l,Ht]);return u?o.jsx("div",{children:"Loading calendar..."}):f?o.jsxs("div",{className:"text-error-500",children:["Error: ",f]}):o.jsxs("div",{id:"calendar-board",className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:"Family Calendar"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Plan and coordinate family activities"})]}),o.jsx("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 justify-end",children:o.jsxs("button",{onClick:()=>{b(null),C("");const Y=new Date,Fe=new Date(Y.getTime()-Y.getTimezoneOffset()*6e4).toISOString().substring(0,16);j(Fe),H(""),D(""),P(""),Fr(Y.toISOString()),Q(null),A("all"),me(!1),x(!0),m(!0)},className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(Jt,{size:18,className:"mr-2"}),o.jsx("span",{children:"Add Event"})]})})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4",children:[o.jsxs("div",{className:"flex gap-1 nav-button-container",children:[o.jsx("button",{onClick:()=>lt("prev"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"<"}),o.jsx("button",{onClick:()=>lt("dayGridDay"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"Day"}),o.jsx("button",{onClick:()=>lt("dayGridWeek"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"Week"}),o.jsx("button",{onClick:()=>lt("today"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"Today"}),o.jsx("button",{onClick:()=>lt("dayGridMonth"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:"Month"}),o.jsx("button",{onClick:()=>lt("next"),className:"px-3 py-2 rounded-xl text-white hover:bg-white/10 transition-colors nav-button",children:">"})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-neutral-600 dark:text-neutral-300",children:[o.jsx("input",{type:"checkbox",checked:Ht,onChange:Y=>qt(Y.target.checked),className:"h-4 w-4 rounded border-neutral-300 dark:border-neutral-600 text-primary-500 focus:ring-primary-500"}),"Show tasks"]})})]}),o.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:o.jsx(RR,{ref:s,plugins:[tq,Sq,TK],initialView:"dayGridMonth",timeZone:S,events:Ps,eventClick:Os,dateClick:J,height:"auto",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1},eventDisplay:"block",eventClassNames:"rounded-lg",dayMaxEvents:3,moreLinkContent:({num:Y})=>o.jsxs("div",{className:"text-xs text-primary-500 dark:text-primary-400 font-medium",children:["+",Y," more"]})})}),o.jsx(Xt,{children:p&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:y?"Edit Event":"New Event"}),o.jsx("button",{onClick:()=>m(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Event Title"}),o.jsx("input",{type:"text",value:N,onChange:v?Y=>C(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border ${ye.newEventTitle?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`,placeholder:"Enter event title"}),ye.newEventTitle&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ye.newEventTitle})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Start Date"}),o.jsx("input",{type:"datetime-local",value:T,onChange:v?Y=>j(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border ${ye.newEventStart?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`}),ye.newEventStart&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ye.newEventStart})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"End Date"}),o.jsx("input",{type:"datetime-local",value:I,onChange:v?Y=>H(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Description"}),o.jsx("textarea",{rows:3,value:L,onChange:v?Y=>D(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`,placeholder:"Add event description"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Location"}),o.jsx("input",{type:"text",value:O,onChange:v?Y=>P(Y.target.value):void 0,readOnly:!v,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${v?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed"}`,placeholder:"Add location"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Repeat"}),o.jsxs("div",{className:`flex items-center gap-2 ${ce?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"checkbox",checked:U&&!ce,onChange:ce?void 0:Y=>{z(Y.target.checked),Y.target.checked||(ge([]),Pe("never"),Ze(""),Ue(""))},disabled:ce,className:"h-4 w-4"}),o.jsx("span",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:"Repeating event"})]}),U&&!ce&&o.jsxs("div",{className:"space-y-4 mt-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Frequency"}),o.jsx("select",{value:$,onChange:Y=>ne(Y.target.value),disabled:ce,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${ce?"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed":""}`,children:LK.map(Y=>o.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Interval"}),o.jsx("input",{type:"number",min:1,value:X,onChange:Y=>fe(Math.max(1,Number(Y.target.value)||1)),readOnly:ce,className:`w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${ce?"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed":""}`}),o.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:["Every ",X," ",$.toLowerCase(),"(s)"]})]})]}),$==="WEEKLY"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Repeat on"}),o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:tE.map(Y=>{const Fe=de.includes(Y.value);return o.jsx("button",{type:"button",disabled:ce,onClick:()=>ae(Y.value),className:`px-3 py-1 rounded-lg border text-sm transition-colors ${Fe?"bg-primary-500 text-white border-primary-500":"border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300"} ${ce?"opacity-60 cursor-not-allowed":"hover:border-primary-400 dark:hover:border-primary-400"}`,children:Y.label.slice(0,3)},Y.value)})}),ye.recurrenceWeekdays&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ye.recurrenceWeekdays})]}),($==="MONTHLY"||$==="YEARLY")&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Repeat on"}),o.jsxs("div",{className:"space-y-3 text-sm text-neutral-700 dark:text-neutral-300",children:[o.jsxs("label",{className:`flex flex-wrap items-center gap-2 ${ce?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:se==="dayOfMonth",onChange:ce?void 0:()=>M("dayOfMonth"),disabled:ce}),o.jsx("span",{children:"Day"}),o.jsx("input",{type:"number",min:1,max:31,value:re,onChange:Y=>F(Math.min(31,Math.max(1,Number(Y.target.value)||1))),disabled:ce||se!=="dayOfMonth",className:`w-16 px-2 py-1 rounded-lg border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${ce||se!=="dayOfMonth"?"cursor-not-allowed opacity-60":""}`}),o.jsxs("span",{children:["of ",$==="YEARLY"&&cs||"the month"]})]}),o.jsxs("label",{className:`flex flex-wrap items-center gap-2 ${ce?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:se==="ordinalWeekday",onChange:ce?void 0:()=>M("ordinalWeekday"),disabled:ce}),o.jsx("span",{children:"The"}),o.jsx("select",{value:le,onChange:Y=>ee(Y.target.value),disabled:ce||se!=="ordinalWeekday",className:`px-2 py-1 rounded-lg border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${ce||se!=="ordinalWeekday"?"cursor-not-allowed opacity-60":""}`,children:PK.map(Y=>o.jsx("option",{value:Y.value,children:Y.label},Y.value))}),o.jsx("select",{value:we,onChange:Y=>ke(Y.target.value),disabled:ce||se!=="ordinalWeekday",className:`px-2 py-1 rounded-lg border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${ce||se!=="ordinalWeekday"?"cursor-not-allowed opacity-60":""}`,children:tE.map(Y=>o.jsx("option",{value:Y.value,children:Y.label},Y.value))}),o.jsx("span",{children:$==="YEARLY"?`of ${cs||"the month"}`:"each month"})]})]}),ye.recurrenceMonthlyDay&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ye.recurrenceMonthlyDay})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Ends"}),o.jsxs("div",{className:"flex flex-col gap-2 text-sm text-neutral-700 dark:text-neutral-300",children:[o.jsxs("label",{className:`flex items-center gap-2 ${ce?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:Ie==="never",onChange:ce?void 0:()=>Pe("never"),disabled:ce}),o.jsx("span",{children:"Never"})]}),o.jsxs("label",{className:`flex flex-wrap items-center gap-2 ${ce?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:Ie==="onDate",onChange:ce?void 0:()=>Pe("onDate"),disabled:ce}),o.jsx("span",{children:"On"}),o.jsx("input",{type:"date",value:We,onChange:Y=>Ze(Y.target.value),disabled:ce||Ie!=="onDate",className:`px-3 py-2 rounded-xl border ${ye.recurrenceUntil?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${ce||Ie!=="onDate"?"cursor-not-allowed opacity-60":""}`}),ye.recurrenceUntil&&o.jsx("span",{className:"text-red-500 text-xs",children:ye.recurrenceUntil})]}),o.jsxs("label",{className:`flex flex-wrap items-center gap-2 ${ce?"opacity-60 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",checked:Ie==="after",onChange:ce?void 0:()=>Pe("after"),disabled:ce}),o.jsx("span",{children:"After"}),o.jsx("input",{type:"number",min:1,value:it,onChange:Y=>Ue(Y.target.value),disabled:ce||Ie!=="after",className:`w-20 px-2 py-1 rounded-lg border ${ye.recurrenceCount?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 ${ce||Ie!=="after"?"cursor-not-allowed opacity-60":""}`}),o.jsx("span",{children:"occurrence(s)"}),ye.recurrenceCount&&o.jsx("span",{className:"text-red-500 text-xs",children:ye.recurrenceCount})]})]})]}),tr&&o.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-300 border border-dashed border-neutral-300 dark:border-neutral-600 rounded-lg px-3 py-2 bg-neutral-50 dark:bg-neutral-700/30",children:["RRULE: ",tr]}),Ne.length>0&&o.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[Ne.length," exception",Ne.length===1?"":"s"," in this series."]})]})]}),v&&y&&y.RecurrencePattern&&R&&!y.RecurrenceParentID&&o.jsxs("div",{className:"border border-neutral-200 dark:border-neutral-700 rounded-xl px-3 py-3",children:[o.jsx("p",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Apply changes to"}),o.jsxs("div",{className:"flex flex-col gap-2 mt-2 text-sm text-neutral-700 dark:text-neutral-300",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",value:"one",checked:_==="one",onChange:()=>A("one")}),o.jsx("span",{children:"This event only"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",value:"future",checked:_==="future",onChange:()=>A("future")}),o.jsx("span",{children:"This and following events"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",value:"all",checked:_==="all",onChange:()=>A("all")}),o.jsx("span",{children:"Entire series"})]})]})]}),(y==null?void 0:y.RecurrenceParentID)&&o.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"This occurrence is already detached from its original series."})]})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[y&&!v&&o.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Edit"}),o.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),v&&o.jsx("button",{onClick:De,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:y?"Save Changes":"Create Event"}),y&&o.jsxs("div",{className:"relative",children:[o.jsx("button",{"data-testid":"delete-event-button",onClick:()=>{y.RecurrencePattern&&!y.RecurrenceParentID&&R?me(Y=>!Y):Ke("all")},className:"px-4 py-2 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-xl",children:"Delete"}),q&&y.RecurrencePattern&&!y.RecurrenceParentID&&R&&o.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-lg border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 shadow-lg z-10",children:[o.jsx("button",{onClick:()=>{Ke("one")},className:"w-full text-left px-4 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-t-lg",children:"Delete this event only"}),o.jsx("button",{onClick:()=>{Ke("future")},className:"w-full text-left px-4 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Delete this and following events"}),o.jsx("button",{onClick:()=>{Ke("all")},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-b-lg",children:"Delete entire series"})]})]})]})]})})})]})},VK=async()=>(await K.get("/task-statuses")).data,WK=({attachments:e})=>{const[t,r]=g.useState(null);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mt-3",children:o.jsx("div",{className:"flex justify-end gap-2",children:e.map(n=>o.jsxs("div",{className:"relative group cursor-pointer w-20 h-20",onClick:()=>r(n.Url),children:[o.jsx("img",{src:n.Url,alt:n.FileName,className:"w-full h-full object-cover rounded-lg group-hover:opacity-75 transition-opacity"}),o.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(D6,{size:24,className:"text-white"})})]},n.AttachmentID))})}),o.jsx(Xt,{children:t&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative",children:[o.jsx("img",{src:t,alt:"Full screen attachment",className:"max-w-full max-h-[90vh] rounded-lg"}),o.jsx("button",{onClick:()=>r(null),className:"absolute -top-4 -right-4 bg-white dark:bg-neutral-800 rounded-full p-2 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(ti,{size:20})})]})})})]})},iE=()=>{const{user:e}=Ot(),{family:t}=Lr(),[r,n]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState(!0),[c,u]=g.useState(null),[d,f]=g.useState("my"),[h,p]=g.useState(!1),[m,y]=g.useState(null),[b,v]=g.useState("all"),[x,w]=g.useState(0),k=g.useMemo(()=>mr("tasks-page"),[]),[S,E]=g.useState(""),[N,C]=g.useState(""),[T,j]=g.useState(""),[I,H]=g.useState(""),[L,D]=g.useState(null),[O,P]=g.useState([]),[U,z]=g.useState(!1);g.useEffect(()=>{m?(E(m.Title),C(m.Description||""),j(m.DueDate?new Date(m.DueDate).toISOString().substring(0,16):""),H(m.AssignedToUserID||""),X(m.RewardType||"points"),de(m.RewardValue||0),P(m.attachments||[])):(E(""),C(""),j(new Date().toISOString().substring(0,16)),H(""),X("points"),de(0),P([]))},[m]);const $=g.useCallback(async()=>{if(t)try{l(!0);const[R,Q]=await Promise.all([t_(t.FamilyID.toString()),VK()]);k.log("Tasks received by frontend:",JSON.stringify(R,null,2)),n(R),i(Q)}catch(R){u(R instanceof Error?R.message:"An unknown error occurred")}finally{l(!1)}},[t,k]);g.useEffect(()=>{$()},[$]);const[ne,X]=g.useState("points"),[fe,de]=g.useState(0),[ge,se]=g.useState({}),M=()=>{const R={};return S||(R.newTaskTitle="Task title is required."),I===""&&(R.newTaskAssignedTo="Please assign this task to a family member."),se(R),Object.keys(R).length===0},[re,F]=g.useState(!1),le=R=>{P(Q=>Q.filter(_=>_.AttachmentID!==R))},ee=()=>{E(""),C(""),j(new Date().toISOString().substring(0,16)),H(""),X("points"),de(0),D(null),P([]),se({}),y(null)},we=async()=>{if(!M()||!t||!e)return;const R={FamilyID:t.FamilyID,Title:S,Description:N,DueDate:T?new Date(T).toISOString():void 0,AssignedToUserID:I,CreatedByUserID:e.id,RewardType:ne,RewardValue:fe};try{let Q;if(m){const _=m.attachments.filter(A=>!O.some(q=>q.AttachmentID===A.AttachmentID));for(const A of _)await IK(m.TaskID.toString(),A.AttachmentID);Q=await sg(m.TaskID.toString(),R)}else Q=await RK(R);if(L){F(!0);try{await _K(Q.TaskID.toString(),L)}catch(_){u(_ instanceof Error?_.message:"Failed to upload attachment")}finally{F(!1),D(null)}}p(!1),ee(),$()}catch(Q){u(Q instanceof Error?Q.message:"Failed to save task")}},ke=R=>{const Q=s.find(_=>_.StatusName.toLowerCase()==="completed");return Q?R.TaskStatusID===Q.TaskStatusID:!1},Ie=async R=>{if(s.length===0){u("Task statuses have not been loaded yet.");return}const Q=s.find(q=>q.StatusName.toLowerCase()==="completed"),_=s.find(q=>q.StatusName.toLowerCase()==="pending");if(!Q||!_){u("Could not find task statuses.");return}const A=ke(R)?_.TaskStatusID:Q.TaskStatusID;try{const q=await sg(R.TaskID.toString(),{TaskStatusID:A});n(r.map(me=>me.TaskID===R.TaskID?q:me))}catch(q){u(q instanceof Error?q.message:"Failed to update task")}},Pe=async R=>{try{await sg(R.TaskID.toString(),{ApprovalStatusID:2}),$()}catch(Q){u(Q instanceof Error?Q.message:"Failed to approve task")}},We=r.filter(R=>{const Q=s.find(A=>A.StatusName.toLowerCase()==="completed"),_=Q?R.TaskStatusID===Q.TaskStatusID:!1;return d==="my"?R.AssignedToUserID===(e==null?void 0:e.id)&&!_:d==="family"?!_:d==="completed"?_&&R.ApprovalStatusID===1:!0}),Ze=r,it=Ze.filter(ke).length,Ue=Ze.length-it,Ne=We.filter(R=>d==="my"&&R.AssignedToUserID===(e==null?void 0:e.id)),ze=Ne.length>0&&Ne.every(ke);return a?o.jsx("div",{children:"Loading tasks..."}):c?o.jsxs("div",{className:"text-error-500",children:["Error: ",c]}):o.jsxs("div",{id:"tasks-board",className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:"Tasks"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Manage and track family responsibilities"})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("button",{onClick:()=>z(!U),className:"flex items-center px-3 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:[o.jsx(v2,{size:18,className:"mr-2"}),o.jsx("span",{children:"Filter"})]}),o.jsxs("button",{onClick:()=>{y(null),p(!0)},className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(Jt,{size:18,className:"mr-2"}),o.jsx("span",{children:"Add Task"})]})]})]}),U&&o.jsxs(vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-2",children:"Filter Options"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"More filter options will go here."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>f("completed"),children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Completed"}),o.jsx(Ni,{className:"text-success-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:it}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Tasks completed"})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Pending"}),o.jsx(L0,{className:"text-warning-500",size:24})]}),o.jsx("p",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:Ue}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Tasks to complete"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card overflow-hidden",children:[o.jsxs("div",{className:"flex border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>f("my"),className:`flex-1 px-6 py-4 text-sm font-medium ${d==="my"?"text-primary-600 border-b-2 border-primary-500":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300"}`,children:"My Tasks"}),o.jsx("button",{onClick:()=>f("family"),className:`flex-1 px-6 py-4 text-sm font-medium ${d==="family"?"text-primary-600 border-b-2 border-primary-500":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300"}`,children:"Family Tasks"}),(e==null?void 0:e.role)==="parent"&&o.jsx("button",{onClick:()=>f("completed"),className:`flex-1 px-6 py-4 text-sm font-medium ${d==="completed"?"text-primary-600 border-b-2 border-primary-500":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300"}`,children:"Completed"})]}),o.jsx("div",{className:"p-6",children:d==="my"&&ze?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"h-16 w-16 rounded-full bg-success-100 dark:bg-success-900/30 text-success-600 dark:text-success-400 flex items-center justify-center mx-auto mb-4",children:o.jsx(Ni,{size:32})}),o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white mb-2",children:"All Tasks Complete!"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 mb-4",children:"Great job! Why not help out a family member?"}),o.jsxs("button",{onClick:()=>f("family"),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:["Check Family Tasks",o.jsx(p6,{size:16,className:"ml-2"})]})]}):o.jsx("div",{className:"space-y-4",children:We.map(R=>{var Q;return o.jsx(vt.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`p-4 rounded-xl border border-neutral-200 dark:border-neutral-700 min-h-[120px] ${ke(R)?"bg-neutral-50 dark:bg-neutral-800/50":"bg-white dark:bg-neutral-800"}`,children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("button",{onClick:()=>Ie(R),disabled:a,className:`p-2 rounded-xl ${ke(R)?"text-primary-500 dark:text-primary-400":"text-neutral-400 dark:text-neutral-500 hover:text-primary-500 dark:hover:text-primary-400"}`,children:ke(R)?o.jsx(Ni,{size:20}):o.jsx(L0,{size:20})}),o.jsxs("div",{className:"flex-1 ml-3",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsx("h3",{className:`font-medium ${ke(R)?"text-neutral-400 dark:text-neutral-500 line-through":"text-neutral-900 dark:text-white"}`,children:R.Title})}),o.jsxs("div",{className:"flex items-center space-x-2 ml-auto",children:[R.attachments&&R.attachments.length>0&&o.jsx("div",{className:"ml-4",children:o.jsx(WK,{attachments:R.attachments})}),ke(R)&&R.ApprovalStatusID===1&&(e==null?void 0:e.role)==="parent"&&o.jsx("button",{onClick:()=>Pe(R),className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-success-500 dark:text-success-400",children:o.jsx(Ni,{size:18})}),o.jsx("button",{onClick:()=>{y(R),p(!0)},className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-400 dark:text-neutral-500",children:o.jsx(M6,{size:18})})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[R.DueDate&&o.jsxs("span",{className:"flex items-center text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsx(el,{size:12,className:"mr-1"}),new Date(R.DueDate).toLocaleDateString()]}),R.AssignedToUserID&&o.jsx("div",{className:"flex -space-x-2 ml-auto",children:o.jsx("div",{className:"h-6 w-6 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-xs text-primary-700 dark:text-primary-300 ring-2 ring-white dark:ring-neutral-800 cursor-default select-none",children:(Q=t==null?void 0:t.members.find(_=>_.UserID===R.AssignedToUserID))==null?void 0:Q.FirstName.charAt(0)},R.AssignedToUserID)})]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:R.Description})]})]})},R.TaskID)})})})]}),o.jsx(Xt,{children:h&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-lg my-8",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:m?"Edit Task":"New Task"}),o.jsx("button",{onClick:()=>p(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4 max-h-[calc(100vh-16rem)] overflow-y-auto",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Task Title"}),o.jsx("input",{type:"text",value:S,onChange:R=>E(R.target.value),className:`w-full px-3 py-2 rounded-xl border ${ge.newTaskTitle?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,placeholder:"Enter task title"}),ge.newTaskTitle&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ge.newTaskTitle})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Description"}),o.jsx("textarea",{rows:3,value:N,onChange:R=>C(R.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Add task description"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Due Date"}),o.jsx("input",{type:"datetime-local",value:T,onChange:R=>j(R.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Reward"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{value:ne,onChange:R=>X(R.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:[o.jsx("option",{value:"points",children:"Points"}),o.jsx("option",{value:"screentime",children:"Screen Time (minutes)"}),o.jsx("option",{value:"currency",children:"Currency"})]}),o.jsx("input",{type:"number",value:fe,onChange:R=>de(Number(R.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Value"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Assign To"}),o.jsxs("select",{value:I,onChange:R=>H(R.target.value),className:`w-full px-3 py-2 rounded-xl border ${ge.newTaskAssignedTo?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,children:[o.jsx("option",{value:"",children:"Unassigned"}),t==null?void 0:t.members.map(R=>o.jsxs("option",{value:R.UserID,children:[R.FirstName," ",R.LastName]},R.UserID))]}),ge.newTaskAssignedTo&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ge.newTaskAssignedTo})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Attachment"}),o.jsx("input",{type:"file",onChange:R=>D(R.target.files?R.target.files[0]:null),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),m&&O.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Existing Attachments"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(R=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:R.Url,alt:R.FileName,className:"w-20 h-20 object-cover rounded-lg"}),o.jsx("button",{onClick:()=>le(R.AttachmentID),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(ti,{size:16})})]},R.AttachmentID))})]})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 p-4 border-t border-neutral-200 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>p(!1),className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:we,disabled:re,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl disabled:bg-primary-300 dark:disabled:bg-primary-700 flex items-center justify-center",children:re?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):m?"Save Changes":"Create Task"})]})]})})})]})},og=mr("api-gigs"),s_=async()=>(await K.get("/gigs/templates")).data,$K=async e=>(await K.get(`/gigs?familyId=${e}`)).data,YK=async(e,t,r,n,s)=>(og.log("addGigToFamily: gigTemplateId",e),og.log("addGigToFamily: roomId",t),og.log("addGigToFamily: cadenceType",r),(await K.post("/gigs",{gigTemplateId:e,roomId:t,cadenceType:r,maxPerDay:n,visible:s})).data),GK=async e=>{await K.delete(`/gigs/${e}`)},i_=async e=>(await K.get(`/rooms?familyId=${e}`)).data,a_=async(e,t,r)=>(await K.post("/rooms",{familyId:e,name:t,roomTemplateId:r})).data,qK=async(e,t)=>(await K.put(`/rooms/${e}`,t)).data,KK=async e=>{await K.delete(`/rooms/${e}`)},QK=async e=>{await K.post("/rooms/reset",{familyId:e})},ZK=async e=>(await K.post(`/gigs/${e}/claim`)).data,XK=async e=>(await K.post(`/gigs/${e}/complete`)).data,JK=e=>e.overridePoints?`${e.overridePoints} points`:e.overrideCurrencyCents?`$${(e.overrideCurrencyCents/100).toFixed(2)}`:e.overrideScreenMinutes?`${e.overrideScreenMinutes} min screen time`:"Auto reward",Wl=e=>{if(!e)return;const t=e.trim();if(t)return t.split(/\s+/)[0]},lg=e=>Wl(e==null?void 0:e.FirstName)??Wl(e==null?void 0:e.firstName)??Wl(e==null?void 0:e.fullName)??Wl(e==null?void 0:e.displayName)??Wl(e==null?void 0:e.name)??"You",eQ=({gig:e,onDetailsClick:t,isClaimed:r,overdueDays:n,onStatusChange:s})=>{var I,H,L,D,O;const{user:i}=Ot(),a=g.useMemo(()=>mr("gig-card"),[]),l=g.useMemo(()=>{const P=new Date;return`${P.getFullYear()}-${P.getMonth()+1}-${P.getDate()}`},[]),c=(I=e.claims)==null?void 0:I.find(P=>(P==null?void 0:P.periodKey)===l&&(P==null?void 0:P.status)==="claimed"),u=c!=null&&c.user?lg(c.user):void 0,[d,f]=g.useState(!!c||r),[h,p]=g.useState(u??null),[m,y]=g.useState("idle"),[b,v]=g.useState(null),[x,w]=g.useState("info");g.useEffect(()=>{f(!!c||r),p(u??null)},[c,u,r]);const k=P=>{w("success"),v(P)},S=P=>{w("error"),v(P)},E=async()=>{var P,U,z;if(m==="idle")try{y("claiming"),v(null);const $=await ZK(e.id);a.log("Gig claimed successfully:",$);const ne=(P=$.claims)==null?void 0:P.find(fe=>(fe==null?void 0:fe.periodKey)===l&&(fe==null?void 0:fe.status)==="claimed"),X=ne!=null&&ne.user?lg(ne.user):lg(i);f(!0),p(X),k("Gig claimed! Mark it complete once you finish."),s==null||s($,"claimed")}catch($){a.error("Failed to claim gig:",$);const ne=((z=(U=$==null?void 0:$.response)==null?void 0:U.data)==null?void 0:z.error)??"Failed to claim gig. Please try again.";S(ne)}finally{y("idle")}},N=async()=>{var P,U;if(m==="idle")try{y("completing"),v(null);const z=await XK(e.id);a.log("Gig completed successfully:",z),f(!1),p(null),k("Great job! Gig marked as complete."),s==null||s(z,"completed")}catch(z){a.error("Failed to complete gig:",z);const $=((U=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:U.error)??"Failed to complete gig. Please try again.";S($)}finally{y("idle")}},C=((H=e.familyRoom)==null?void 0:H.name)??(e==null?void 0:e.familyRoomName)??((L=e.room)==null?void 0:L.name)??"Shared Space",T=m!=="idle",j=`bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 transition-opacity ${d?"opacity-90":""} ${n>0?n>7?"border border-red-400 dark:border-red-600":"border border-amber-300 dark:border-amber-500":""}`;return o.jsxs("div",{className:j,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:((D=e.gigTemplate)==null?void 0:D.name)??"House Gig"}),o.jsx("div",{className:"text-xs px-2 py-1 rounded-full bg-primary-100 text-primary-600 dark:bg-primary-900/30 dark:text-primary-400",children:e.cadenceType})]}),o.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:C}),h&&o.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-2",children:["Claimed by: ",h]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(qd,{size:16,className:"mr-2"}),o.jsxs("span",{children:[((O=e.gigTemplate)==null?void 0:O.estimatedMinutes)??e.estimatedMinutes??0," min"]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Da,{size:16,className:"mr-2"}),o.jsx("span",{children:JK(e)})]})]}),o.jsxs("div",{className:"mt-6 flex gap-2",children:[d?o.jsx("button",{onClick:N,disabled:T,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:opacity-60 disabled:cursor-not-allowed",children:m==="completing"?"Completing":"Complete"}):o.jsx("button",{onClick:E,disabled:T,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed",children:m==="claiming"?"Claiming":"Claim"}),o.jsx("button",{onClick:()=>t(e),className:"flex-1 bg-neutral-200 text-neutral-800 py-2 px-4 rounded-md hover:bg-neutral-300 dark:bg-neutral-700 dark:text-white dark:hover:bg-neutral-600",children:"Details"})]}),b&&o.jsx("p",{className:`mt-3 text-sm ${x==="error"?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:b})]})},tQ=({isOpen:e,onClose:t,gig:r})=>{var n;return!e||!r?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gig Details"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Name:"})," ",r.gigTemplate.name]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Room:"})," ",((n=r.familyRoom)==null?void 0:n.name)??"Shared Space"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Cadence:"})," ",r.cadenceType]}),r.gigTemplate.estimatedMinutes&&o.jsxs("p",{children:[o.jsx("strong",{children:"Estimated Time:"})," ",r.gigTemplate.estimatedMinutes," min"]}),r.overridePoints&&o.jsxs("p",{children:[o.jsx("strong",{children:"Reward Points:"})," ",r.overridePoints]}),r.overrideCurrencyCents&&o.jsxs("p",{children:[o.jsx("strong",{children:"Reward Currency:"})," $",(r.overrideCurrencyCents/100).toFixed(2)]}),r.overrideScreenMinutes&&o.jsxs("p",{children:[o.jsx("strong",{children:"Reward Screen Time:"})," ",r.overrideScreenMinutes," min"]})]}),o.jsx("div",{className:"mt-6 flex justify-end",children:o.jsx("button",{onClick:t,className:"bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700",children:"Close"})})]})})},rQ=()=>{const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`},cg=(e,t)=>{var n;if(!t)return!1;const r=rQ();return(n=e.claims)==null?void 0:n.some(s=>{var i,a;return(s.userId===t||((i=s.user)==null?void 0:i.UserID)===t||((a=s.user)==null?void 0:a.id)===t)&&s.periodKey===r&&s.status==="claimed"})},ug=(e,t)=>{var l;const r=new Date,n=e,s=(l=e.claims)==null?void 0:l.find(c=>{var u,d;return c.userId===t||((u=c.user)==null?void 0:u.UserID)===t||((d=c.user)==null?void 0:d.id)===t});if(!s){const c=n.claimedAt??n.createdAt,u=c?new Date(c):r,d=Math.abs(r.getTime()-u.getTime()),f=Math.ceil(d/(1e3*60*60*24));return f>0?f:0}const i=new Date(s.claimedAt??s.createdAt??r),a=Math.abs(r.getTime()-i.getTime());switch(e.cadenceType){case"daily":return Math.max(0,Math.ceil(a/(1e3*60*60*24))-1);case"weekly":return Math.max(0,Math.ceil(a/(1e3*60*60*24*7))-1);case"monthly":return Math.max(0,Math.ceil(a/(1e3*60*60*24*30))-1);default:return 0}},aE=()=>{const{family:e,isLoading:t,error:r}=Lr(),{user:n}=Ot(),[s,i]=g.useState([]),[a,l]=g.useState(!0),[c,u]=g.useState(null),[d,f]=g.useState(!1),[h,p]=g.useState(null),m=g.useMemo(()=>{const w=(n==null?void 0:n.id)??(n==null?void 0:n.UserID)??(n==null?void 0:n.userId)??null;return w?String(w):""},[n]),y=g.useCallback(w=>m?[...w].sort((k,S)=>{const E=cg(k,m),N=cg(S,m);if(E&&!N)return-1;if(!E&&N)return 1;const C=ug(k,m);return ug(S,m)-C}):[...w],[m]),b=g.useCallback(w=>{i(k=>{const E=k.some(N=>N.id===w.id)?k.map(N=>N.id===w.id?w:N):[...k,w];return y(E)})},[y]);g.useEffect(()=>{if(!e)return;(async()=>{try{l(!0);const S=(await K.get(`/gigs?familyId=${e.FamilyID}`)).data;i(y(S)),u(null)}catch(k){u(k instanceof Error?k.message:"An unknown error occurred")}finally{l(!1)}})()},[e,y]);const v=w=>{p(w),f(!0)},x=g.useCallback((w,k)=>{b(w)},[b]);return t?o.jsx("div",{children:"Loading family data..."}):r?o.jsxs("div",{className:"text-error-500",children:["Error loading family data: ",r]}):a?o.jsx("div",{children:"Loading gigs..."}):c?o.jsxs("div",{className:"text-error-500",children:["Error: ",c]}):o.jsxs("div",{id:"gigs-board",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Gigs"}),o.jsx(br,{id:"cta-manage-gigs",to:"/gigs/settings",className:"bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700",children:"Manage Gigs"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(w=>o.jsx(eQ,{gig:w,onDetailsClick:v,isClaimed:m?cg(w,m):!1,overdueDays:m?ug(w,m):0,onStatusChange:x},w.id))}),o.jsx(tQ,{isOpen:d,onClose:()=>f(!1),gig:h})]})},nQ=({isOpen:e,onClose:t,onConfirm:r,rooms:n})=>{const[s,i]=g.useState(""),a=()=>{s&&r(parseInt(s,10))};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Select a Room"}),o.jsxs("select",{value:s,onChange:l=>i(l.target.value),className:"w-full p-2 border rounded-md bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600",children:[o.jsx("option",{value:"",disabled:!0,children:"Select a room"}),n.map(l=>o.jsx("option",{value:l.id,children:l.name},l.id))]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:t,className:"text-neutral-600 dark:text-neutral-300 px-4 py-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:a,disabled:!s,className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 disabled:bg-primary-300",children:"Confirm"})]})]})}):null},sQ=({isOpen:e,onClose:t,onConfirm:r})=>{const[n,s]=g.useState(""),i=()=>{n&&r(n)};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create a New Room"}),o.jsx("input",{type:"text",value:n,onChange:a=>s(a.target.value),placeholder:"E.g., Kitchen, Living Room",className:"w-full p-2 border rounded-md bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}),o.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:t,className:"text-neutral-600 dark:text-neutral-300 px-4 py-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:i,disabled:!n,className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 disabled:bg-primary-300",children:"Create"})]})]})}):null},oE=()=>{const{family:e}=Lr(),[t,r]=g.useState([]),[n,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState(!0),[u,d]=g.useState(null),[f,h]=g.useState(!1),[p,m]=g.useState(!1),[y,b]=g.useState(null),v=g.useMemo(()=>mr("gigs-settings-page"),[]);g.useEffect(()=>{if(!e)return;(async()=>{try{const[C,T,j]=await Promise.all([s_(),$K(e.FamilyID),i_(e.FamilyID)]);r(C),s(T),a(j)}catch(C){d(C instanceof Error?C.message:"An unknown error occurred")}finally{c(!1)}})()},[e]);const x=N=>{b(N),h(!0)},w=async N=>{if(!(!y||!e)){v.log("handleConfirmAddGig: selectedTemplateId",y),v.log("handleConfirmAddGig: roomId",N);try{const C=await YK(y,N,"daily");s([...n,C])}catch(C){v.error("Failed to add gig",C)}finally{h(!1),b(null)}}},k=async N=>{if(e)try{const C=await a_(e.FamilyID,N);a([...i,C])}catch(C){v.error("Failed to create room",C)}finally{m(!1)}},S=async N=>{try{await GK(N),s(n.filter(C=>C.id!==N))}catch(C){v.error("Failed to remove gig",C)}};if(l)return o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-primary-600"})});if(u)return o.jsxs("div",{className:"text-red-500 bg-red-100 border border-red-400 rounded-lg p-4",children:["Error: ",u]});const E=t.filter(N=>!n.some(C=>C.gigTemplateId===N.id));return o.jsxs("div",{className:"space-y-8 p-4 md:p-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:"Gigs Settings"}),o.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-primary-700",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Room"]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"My Gigs"}),n.length===0?o.jsx("div",{className:"text-center py-12 border-2 border-dashed border-neutral-200 dark:border-neutral-700 rounded-2xl",children:o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"You haven't added any gigs yet. Add some from the list below!"})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(N=>{var C;return o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg overflow-hidden transition-transform hover:scale-105",children:[o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:N.gigTemplate.name}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:((C=N.familyRoom)==null?void 0:C.name)??"Shared Space"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 capitalize",children:N.cadenceType})]}),o.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-700/50 px-6 py-3 flex justify-end",children:o.jsx("button",{onClick:()=>S(N.id),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400",children:o.jsx(ei,{className:"h-5 w-5"})})})]},N.id)})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Available Gigs"}),i.length===0?o.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-red-400 bg-red-50 dark:bg-red-900/20 rounded-2xl",children:[o.jsx("p",{className:"text-red-600 dark:text-red-300",children:"You need to create at least one room before you can add gigs."}),o.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:'Click the "Create Room" button above to get started.'})]}):E.length===0?o.jsx("div",{className:"text-center py-12 border-2 border-dashed border-neutral-200 dark:border-neutral-700 rounded-2xl",children:o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"All available gigs have been added to your family."})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(N=>o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg overflow-hidden transition-transform hover:scale-105",children:[o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:N.name}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[N.estimatedMinutes," min"]})]}),o.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-700/50 px-6 py-4 flex justify-end",children:o.jsxs("button",{onClick:()=>x(N.id),className:"inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-primary-700",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Add to My Gigs"]})})]},N.id))})]}),o.jsx(nQ,{isOpen:f,onClose:()=>h(!1),onConfirm:w,rooms:i}),o.jsx(sQ,{isOpen:p,onClose:()=>m(!1),onConfirm:k})]})},iQ=async e=>(await K.get(`/messages/${e}`)).data,aQ=async e=>(await K.post("/messages",e)).data,oQ=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),lQ=e=>{const t=new Date(e);return Number.isNaN(t.getTime())?"":oQ.format(t)},lE=()=>{const{user:e}=Ot(),{family:t}=Lr(),[r,n]=g.useState([]),[s,i]=g.useState(!0),[a,l]=g.useState(null),[c,u]=g.useState(""),d=g.useRef(null),f=()=>{var m;(m=d.current)==null||m.scrollIntoView({behavior:"smooth"})},h=g.useCallback(async()=>{if(t)try{i(!0);const m=await iQ(t.FamilyID.toString());n(m)}catch(m){l(m instanceof Error?m.message:"Failed to fetch messages")}finally{i(!1)}},[t]);g.useEffect(()=>{h()},[h]),g.useEffect(()=>{f()},[r]);const p=async()=>{if(!(!c.trim()||!t||!e))try{await aQ({FamilyID:t.FamilyID,MessageText:c,SenderID:e.id}),u(""),h()}catch(m){l(m instanceof Error?m.message:"Failed to send message")}};return s?o.jsx("div",{children:"Loading messages..."}):a?o.jsxs("div",{className:"text-error-500",children:["Error: ",a]}):o.jsxs("div",{className:"h-[calc(100vh-7rem)] flex flex-col bg-white dark:bg-neutral-800 rounded-2xl shadow-card",children:[o.jsx("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300",children:o.jsx(za,{size:18})}),o.jsxs("div",{children:[o.jsxs("h2",{className:"font-semibold text-neutral-900 dark:text-white",children:[t==null?void 0:t.FamilyName," Chat"]}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[t==null?void 0:t.members.length," members"]})]})]})}),o.jsxs("div",{id:"messages-thread",className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map(m=>{const y=m.SenderID===(e==null?void 0:e.id),b=t==null?void 0:t.members.find(v=>v.UserID===m.SenderID);return o.jsx("div",{className:`flex ${y?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-[70%] flex ${y?"flex-row-reverse":"flex-row"} items-end space-x-2`,children:[!y&&b&&o.jsx("img",{src:b.ProfilePhotoUrl||"",alt:b.FirstName,className:"h-8 w-8 rounded-full object-cover"}),o.jsxs("div",{className:`px-4 py-2 rounded-2xl ${y?"bg-primary-500 text-white":"bg-neutral-100 dark:bg-neutral-700"}`,children:[!y&&o.jsx("p",{className:"text-xs font-bold mb-1",children:b==null?void 0:b.FirstName}),o.jsx("p",{children:m.MessageText}),o.jsx("p",{className:"text-xs mt-1 opacity-70 text-right",children:lQ(m.Timestamp)})]})]})},m.MessageID)}),o.jsx("div",{ref:d})]}),o.jsx("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-700",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:c,onChange:m=>u(m.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 rounded-xl border bg-white dark:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-primary-500",onKeyPress:m=>{m.key==="Enter"&&p()}}),o.jsx("button",{onClick:p,disabled:!c.trim(),className:"p-2 rounded-xl bg-primary-500 text-white disabled:opacity-50",children:o.jsx(V6,{size:20})})]})})]})};function cQ(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}cQ(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var qv=e=>typeof e=="number"&&!isNaN(e),uu=e=>typeof e=="string",o_=e=>typeof e=="function",uQ=e=>uu(e)||qv(e),dQ=e=>g.isValidElement(e)||uu(e)||o_(e)||qv(e),fQ=1,l_=()=>`${fQ++}`,js=new Map,wy=[],cE=new Set,c_=()=>js.size>0,hQ=(e,{containerId:t})=>{var r;return(r=js.get(t||1))==null?void 0:r.toasts.get(e)};function pQ(e,t){var r;if(t)return!!((r=js.get(t))!=null&&r.isToastActive(e));let n=!1;return js.forEach(s=>{s.isToastActive(e)&&(n=!0)}),n}function mQ(e){if(!c_()){wy=wy.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||uQ(e))js.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=js.get(e.containerId);t?t.removeToast(e.id):js.forEach(r=>{r.removeToast(e.id)})}}var gQ=(e={})=>{js.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function yQ(e,t){dQ(e)&&(c_()||wy.push({content:e,options:t}),js.forEach(r=>{r.buildToast(e,t)}))}function u_(e,t){js.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function xQ(e){return cE.add(e),()=>{cE.delete(e)}}function vQ(e){return e&&(uu(e.toastId)||qv(e.toastId))?e.toastId:l_()}function zu(e,t){return yQ(e,t),t.toastId}function Cp(e,t){return{...t,type:t&&t.type||e,toastId:vQ(t)}}function jp(e){return(t,r)=>zu(t,Cp(e,r))}function ie(e,t){return zu(e,Cp("default",t))}ie.loading=(e,t)=>zu(e,Cp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function bQ(e,{pending:t,error:r,success:n},s){let i;t&&(i=uu(t)?ie.loading(t,s):ie.loading(t.render,{...s,...t}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,f)=>{if(d==null){ie.dismiss(i);return}let h={type:u,...a,...s,data:f},p=uu(d)?{render:d}:d;return i?ie.update(i,{...h,...p}):ie(p.render,{...h,...p}),f},c=o_(e)?e():e;return c.then(u=>l("success",n,u)).catch(u=>l("error",r,u)),c}ie.promise=bQ;ie.success=jp("success");ie.info=jp("info");ie.error=jp("error");ie.warning=jp("warning");ie.warn=ie.warning;ie.dark=(e,t)=>zu(e,Cp("default",{theme:"dark",...t}));function wQ(e){mQ(e)}ie.dismiss=wQ;ie.clearWaitingQueue=gQ;ie.isActive=pQ;ie.update=(e,t={})=>{let r=hQ(e,t);if(r){let{props:n,content:s}=r,i={delay:100,...n,...t,toastId:t.toastId||e,updateId:l_()};i.toastId!==e&&(i.staleId=e);let a=i.render||s;delete i.render,zu(a,i)}};ie.done=e=>{ie.update(e,{progress:1})};ie.onChange=xQ;ie.play=e=>u_(!0,e);ie.pause=e=>u_(!1,e);const kQ=async(e,t)=>(await K.get(`/shopping-lists/family/${e}`,{params:{filter:t}})).data,SQ=async e=>(await K.post("/shopping-lists",e)).data,EQ=async e=>{await K.delete(`/shopping-lists/${e}`)},NQ=async e=>{await K.patch(`/shopping-lists/${e}/archive`)},CQ=async(e,t,r)=>(await K.post("/shopping-lists/add-meal-plan",{familyId:e,weekStart:t,shoppingListId:r})).data,jQ=async e=>(await K.post("/shopping-items",e)).data,TQ=async(e,t)=>{await K.put(`/shopping-items/${e}`,t)},AQ=async e=>(await K.get(`/meals/${e}/meals`)).data,DQ=async(e,t)=>(await K.get(`/meals/${e}/plan`,{params:t})).data,RQ=async(e,t)=>(await K.post(`/meals/${e}/plan`,t)).data,_Q=async e=>(await K.get("/linz/meal-suggestions",{params:{familyId:e}})).data,IQ=async e=>(await K.get("/linz/meal-name-suggestions",{params:{familyId:e}})).data,uE=async(e,t,r)=>(await K.post("/linz/generate-ingredients",{mealName:e,familyId:t,userId:r})).data,MQ=async(e,t)=>{var s,i;const r={familyId:String(e)};return t!=null&&t.userId&&(r.userId=t.userId),(s=t==null?void 0:t.keys)!=null&&s.length&&(r.keys=t.keys.join(",")),((i=(await K.get("/linz/facts",{params:r})).data)==null?void 0:i.facts)??[]},OQ=async e=>{await K.post("/linz/facts",{facts:e})},d_=async()=>(await K.get("/integrations/status")).data.activeProviders||[],PQ=async()=>{await K.delete("/integrations/instacart/disconnect")},LQ=async e=>(await K.post("/integrations/instacart/search",{query:e})).data,FQ=async(e,t)=>{await K.post("/integrations/instacart/add-to-cart",{productId:e,quantity:t})},BQ=({items:e})=>{const[t,r]=g.useState(e[0]||null),[n,s]=g.useState([]),[i,a]=g.useState(!1),[l,c]=g.useState(null);g.useEffect(()=>{if(!t)return;(async()=>{a(!0),c(null);try{const f=await LQ(t.Name);s(f)}catch{c("Failed to search for products."),ie.error("Failed to search for products.")}a(!1)})()},[t]);const u=async d=>{if(t)try{await FQ(d.id,t.Quantity),ie.success(`Added "${d.name}" to your Instacart cart.`)}catch{ie.error(`Failed to add "${d.name}" to cart.`)}};return o.jsxs("div",{className:"flex h-[70vh]",children:[o.jsxs("div",{className:"w-1/3 border-r border-neutral-200 dark:border-neutral-700 pr-4 overflow-y-auto",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Your Shopping List"}),o.jsx("div",{className:"space-y-2",children:e.map(d=>o.jsxs("button",{onClick:()=>r(d),className:`w-full text-left p-3 rounded-lg transition-colors ${(t==null?void 0:t.ShoppingItemID)===d.ShoppingItemID?"bg-primary-100 dark:bg-primary-900/50":"hover:bg-neutral-100 dark:hover:bg-neutral-700"}`,children:[o.jsx("p",{className:"font-medium",children:d.Name}),o.jsxs("p",{className:"text-sm text-neutral-500",children:[d.Quantity," ",d.Unit]})]},d.ShoppingItemID))})]}),o.jsxs("div",{className:"w-2/3 pl-4 overflow-y-auto",children:[o.jsxs("h2",{className:"text-lg font-semibold mb-4",children:['Instacart Results for "',t==null?void 0:t.Name,'"']}),i&&o.jsx("p",{children:"Searching..."}),l&&o.jsx("p",{className:"text-red-500",children:l}),!i&&!l&&n.length===0&&o.jsx("p",{children:"No results found."}),o.jsx("div",{className:"space-y-3",children:n.map(d=>o.jsxs("div",{className:"flex items-center gap-4 p-2 border rounded-lg",children:[o.jsx("img",{src:d.thumbnail_url,alt:d.name,className:"w-16 h-16 rounded-md"}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("p",{className:"font-semibold",children:d.name}),o.jsxs("p",{className:"text-sm text-neutral-500",children:[d.brand," - ",d.size]})]}),o.jsx("button",{onClick:()=>u(d),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",children:"Add"})]},d.id))})]})]})},dE=()=>{const{user:e}=Ot(),{family:t}=Lr(),{openChat:r,appendLinZMessage:n}=ai(),[s,i]=g.useState(!1),[a,l]=g.useState([]);g.useEffect(()=>{d_().then(l)},[]);const[c,u]=g.useState(!1),[d,f]=g.useState(!1),[h,p]=g.useState([]),[m,y]=g.useState(!1),[b,v]=g.useState([]),[x,w]=g.useState(!1),k=()=>{M.length===0&&(b.length>0?(r(),n(`Here are all the meal suggestions I have for you: ${b.join(", ")}. Would you like me to create any of these meals with ingredients?`)):(r(),n("Let's talk about your family's favorite meals to get some suggestions started!")))},[S,E]=g.useState([]),[N,C]=g.useState(null),[T,j]=g.useState(!0),[I,H]=g.useState(null),[L,D]=g.useState(!1),[O,P]=g.useState(!1),[U,z]=g.useState(!1),[$,ne]=g.useState(!1),[X,fe]=g.useState(!1),de=g.useRef(null);g.useEffect(()=>{const B=Ae=>{de.current&&!de.current.contains(Ae.target)&&fe(!1)};return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[de]);const[ge,se]=g.useState("lists"),[M,re]=g.useState([]),[F,le]=g.useState([]),[ee,we]=g.useState(()=>{const B=new Date,Ae=new Date(B),ct=Ae.getDay(),gr=ct===0?-6:1-ct;return Ae.setDate(Ae.getDate()+gr),Ae.setHours(0,0,0,0),Ae.toISOString().split("T")[0]}),[ke,Ie]=g.useState("all"),[Pe,We]=g.useState(""),[Ze,it]=g.useState(""),[Ue,Ne]=g.useState(""),[ze,R]=g.useState(""),[Q,_]=g.useState(""),[A,q]=g.useState(1),me=()=>{const B={};return Q||(B.newItemName="Item name is required."),Fr(B),Object.keys(B).length===0},[ye,gt]=g.useState(""),[Ht,qt]=g.useState(null),[ot,Fr]=g.useState({}),ui=()=>{const B={};return Ze||(B.newListName="List name is required."),Fr(B),Object.keys(B).length===0},Vt=g.useCallback(async()=>{if(t)try{j(!0);const B=await kQ(t.FamilyID.toString(),ke);E(B),B.length>0&&C(B[0])}catch(B){H(B instanceof Error?B.message:"An unknown error occurred")}finally{j(!1)}},[t,ke]),tr=g.useCallback(async()=>{if(t)try{const[B,Ae]=await Promise.all([AQ(t.FamilyID),DQ(t.FamilyID,{weekStart:ee})]);re(B),le(Ae)}catch(B){H(B instanceof Error?B.message:"Failed to load meals")}},[t,ee]);g.useEffect(()=>{Vt()},[Vt,ke]),g.useEffect(()=>{ge==="meal-planner"&&tr()},[ge,tr]);const un=async()=>{if(ui()&&!(!t||!e))try{await SQ({FamilyID:t.FamilyID,Name:Ze,CreatedByUserID:e.id}),it(""),D(!1),Vt()}catch(B){H(B instanceof Error?B.message:"Failed to create list")}},cs=async()=>{if(me()&&!(!N||!e))try{await jQ({ShoppingListID:N.ShoppingListID,Name:Q,Quantity:A,Unit:ye,AddedByUserID:e.id,CategoryID:Ht}),_(""),q(1),gt(""),qt(null),P(!1),Vt()}catch(B){H(B instanceof Error?B.message:"Failed to create item")}},ae=async()=>{if(!(!t||!e||!Ue.trim())){u(!0);try{await uE(Ue,t.FamilyID,e.id),ie.success(`Successfully created meal "${Ue}" with ingredients!`),Ne(""),R(""),z(!1),tr()}catch(B){ie.error(B instanceof Error?B.message:"Failed to create meal with LinZ"),H(B instanceof Error?B.message:"Failed to create meal with LinZ")}finally{u(!1)}}},ce=async()=>{if(t){y(!0);try{const B=await _Q(t.FamilyID);if(B.length===0){w(!0);try{const Ae=await IQ(t.FamilyID);Ae.length>0?(v(Ae),ie.info("LinZ has some meal ideas to get you started! Try creating some of these meals.")):(r(),n("I don't have enough information about your family's meal preferences yet. Let's talk about your favorite meals and dietary preferences so I can suggest some ideas!"),ie.info("LinZ needs to learn more about your preferences first."))}catch(Ae){console.error("Error getting meal name suggestions:",Ae),r(),n("Let's chat about your family's favorite meals and dietary preferences so I can suggest some ideas!"),ie.info("LinZ is ready to learn about your meal preferences!")}finally{w(!1)}}else p(B),ie.success("LinZ has some ideas for your meal plan!")}catch(B){console.error("Error getting meal suggestions:",B),r(),n("I'm having trouble generating meal suggestions right now. Let's chat about your family's favorite meals and I'll help you plan some meals!"),ie.error("LinZ had trouble coming up with suggestions, but is ready to chat!")}finally{y(!1)}}},qe=async()=>{if(N)try{await EQ(N.ShoppingListID.toString()),ne(!1),Vt()}catch(B){H(B instanceof Error?B.message:"Failed to delete list")}},Xe=()=>{if(!N)return;const B=N.ShoppingItems.map(Ae=>`${Ae.Quantity} ${Ae.Unit||""} ${Ae.Name}`.trim()).join(`
`);navigator.clipboard.writeText(B).then(()=>{ie.success("List copied to clipboard!")},Ae=>{ie.error("Failed to copy list."),console.error("Could not copy text: ",Ae)})},Kr=async()=>{if(N)try{await NQ(N.ShoppingListID.toString()),Vt()}catch(B){H(B instanceof Error?B.message:"Failed to archive list")}},Os=async B=>{try{await TQ(B.ShoppingItemID.toString(),{Completed:!B.Completed}),Vt()}catch(Ae){H(Ae instanceof Error?Ae.message:"Failed to update item")}},J=S.filter(B=>B.Name.toLowerCase().includes(Pe.toLowerCase())||B.ShoppingItems.some(Ae=>Ae.Name.toLowerCase().includes(Pe.toLowerCase()))),De=(N==null?void 0:N.ShoppingItems.filter(B=>B.Completed).length)||0,Ke=(N==null?void 0:N.ShoppingItems.length)||0,lt=()=>o.jsx("div",{className:"border-b border-neutral-200 dark:border-neutral-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>se("lists"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${ge==="lists"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300 dark:text-neutral-400"}`,children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx(j6,{size:16})," Lists"]})}),o.jsx("button",{onClick:()=>se("meal-planner"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${ge==="meal-planner"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300 dark:text-neutral-400"}`,children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx(el,{size:16})," Meal Planner"]})})]})}),Ps=g.useMemo(()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],[]),Y=[{slot:"BREAKFAST",label:"Breakfast"},{slot:"LUNCH",label:"Lunch"},{slot:"DINNER",label:"Dinner"},{slot:"SNACK",label:"Snack"}],Fe=g.useMemo(()=>{const B=F.find(ct=>ct.WeekStart.startsWith(ee)),Ae={};if(B)for(const ct of B.Entries)Ae[`${ct.DayOfWeek}-${ct.MealSlot}`]=ct;return Ae},[F,ee]),Re=async(B,Ae,ct)=>{var gr;if(!(!t||!e))try{await RQ(t.FamilyID,{WeekStart:ee,DayOfWeek:B,MealSlot:Ae,MealID:ct,Servings:((gr=M.find(tt=>tt.MealID===ct))==null?void 0:gr.DefaultServings)??4,AddedByUserID:e.id}),tr()}catch(tt){H(tt instanceof Error?tt.message:"Failed to add meal")}},Wt=async()=>{if(!N){ie.info("Please select a shopping list first.");return}if(t){f(!0);try{await CQ(t.FamilyID,ee,N.ShoppingListID),ie.success("Ingredients from your meal plan have been added to the list!"),Vt()}catch(B){ie.error(B instanceof Error?B.message:"Could not generate shopping list.")}finally{f(!1)}}},Nt=()=>o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[o.jsxs("div",{className:"lg:w-2/3 bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:"Weekly Meal Plan"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Assign meals to each day and slot. LinZ will sync picked meals to your lists."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"date",value:ee,onChange:B=>we(B.target.value),className:"px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),o.jsxs("button",{onClick:Wt,disabled:d,className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors disabled:bg-primary-300 dark:disabled:bg-primary-700",children:[o.jsx(Po,{size:18,className:"mr-2"}),o.jsx("span",{children:d?"Generating...":"Generate Shopping List"})]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border-separate border-spacing-y-3",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left text-xs font-semibold uppercase text-neutral-500 dark:text-neutral-400 w-28",children:"Meal"}),Ps.map((B,Ae)=>o.jsx("th",{className:"text-left text-xs font-semibold uppercase text-neutral-500 dark:text-neutral-400 px-2",children:B},B))]})}),o.jsx("tbody",{children:Y.map(({slot:B,label:Ae})=>o.jsxs("tr",{children:[o.jsx("td",{className:"align-top pr-2 pt-3 text-sm font-medium text-neutral-700 dark:text-neutral-300",children:Ae}),Ps.map((ct,gr)=>{var Wu;const tt=`${gr}-${B}`,Un=Fe[tt],us=h.find(Cn=>Cn.dayOfWeek===gr&&Cn.mealSlot===B),Ls=us?M.find(Cn=>Cn.MealID===us.mealId):null;return o.jsx("td",{className:"align-top px-2",children:o.jsxs("div",{className:`rounded-xl border border-dashed p-3 min-h-[110px] flex flex-col gap-3 transition-all ${us?"border-primary-500 animate-pulse-slow":"border-neutral-200 dark:border-neutral-700"} bg-neutral-50/60 dark:bg-neutral-800/40`,children:[Un?o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-neutral-900 dark:text-white truncate",children:((Wu=Un.Meal)==null?void 0:Wu.Title)??"Meal removed"}),o.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Serves ",Un.Servings]})]}):us&&Ls?o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsx("p",{className:"text-xs text-primary-500 font-semibold",children:"Suggestion:"}),o.jsx("p",{className:"font-semibold text-neutral-900 dark:text-white truncate",children:Ls.Title}),o.jsxs("div",{className:"mt-auto flex gap-2",children:[o.jsx("button",{onClick:()=>{Re(gr,B,Ls.MealID),p(Cn=>Cn.filter(Pp=>Pp!==us))},className:"text-xs px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Accept"}),o.jsx("button",{onClick:()=>p(Cn=>Cn.filter(Pp=>Pp!==us)),className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-700",children:"Decline"})]})]}):o.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Tap a meal to assign"}),o.jsxs("div",{className:"mt-auto",children:[o.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-1",children:"Suggestions"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:M.slice(0,3).map(Cn=>o.jsx("button",{onClick:()=>Re(gr,B,Cn.MealID),className:"text-xs px-2 py-1 rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900/40 dark:text-primary-300 hover:bg-primary-200 dark:hover:bg-primary-800/60",children:Cn.Title},`${tt}-${Cn.MealID}`))})]})]})},tt)})]},B))})]})})]}),o.jsxs("div",{className:"lg:w-1/3 space-y-4",children:[o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Family Suggestions"}),o.jsx("button",{onClick:k,className:"text-sm text-primary-600 dark:text-primary-400 hover:underline",children:"See all"})]}),o.jsx("div",{className:"space-y-3",children:M.length>0?M.slice(0,5).map(B=>{var Ae;return o.jsx("div",{className:"flex items-start gap-3 p-3 rounded-xl border border-neutral-200 dark:border-neutral-700",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-semibold text-neutral-900 dark:text-white",children:B.Title}),B.IsFavorite&&o.jsx("span",{className:"text-xs text-primary-500",children:"Favorite"})]}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 line-clamp-2",children:B.Description||"No description yet."}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(Ae=B.Tags)==null?void 0:Ae.map(ct=>o.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-neutral-100 dark:bg-neutral-700/60 text-neutral-600 dark:text-neutral-300",children:ct.Tag},ct.MealTagID))})]})},B.MealID)}):b.length>0?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-3",children:"LinZ suggests these meals to get you started:"}),b.slice(0,6).map((B,Ae)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl border border-dashed border-primary-200 dark:border-primary-700 bg-primary-50/30 dark:bg-primary-900/20",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-neutral-900 dark:text-white",children:B}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Click to create with LinZ"})]}),o.jsx("button",{onClick:async()=>{if(!(!e||!t)){u(!0);try{await uE(B,t.FamilyID,e.id),ie.success(`Successfully created "${B}" with ingredients!`),v(ct=>ct.filter(gr=>gr!==B)),tr()}catch{ie.error(`Failed to create "${B}"`)}finally{u(!1)}}},disabled:c,className:"text-xs px-3 py-1 rounded-full bg-primary-500 text-white hover:bg-primary-600 disabled:opacity-50",children:"Create"})]},Ae))]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-3",children:"No meals yet"}),o.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:'Chat with LinZ about your favorites or tap "Get Meal Suggestions" to start'})]})})]}),o.jsxs("div",{className:"bg-primary-50/70 dark:bg-primary-900/40 rounded-2xl p-4",children:[o.jsx("h3",{className:"text-sm font-semibold text-primary-700 dark:text-primary-300 mb-2",children:"LinZ Assist"}),o.jsx("p",{className:"text-xs text-primary-700/80 dark:text-primary-200/80",children:"LinZ will import ingredients from your confirmed meals into the active shopping list. Tap the bubble to ask for recipe ideas or substitutions."}),o.jsxs("button",{className:"mt-3 inline-flex items-center gap-2 text-xs text-primary-700 hover:text-primary-800 dark:text-primary-200",onClick:()=>{r(),n("Can you give me some recipe ideas?")},children:[o.jsx(Po,{size:14})," Ask LinZ for a recipe"]}),o.jsxs("button",{onClick:ce,disabled:m,className:"mt-3 inline-flex items-center gap-2 text-xs text-primary-700 hover:text-primary-800 dark:text-primary-200 disabled:opacity-50",children:[o.jsx(Po,{size:14})," ",m?"Thinking...":"Get Meal Suggestions"]})]})]})]})});return T&&ge==="lists"?o.jsx("div",{children:"Loading shopping lists..."}):I?o.jsxs("div",{className:"text-error-500",children:["Error: ",I]}):o.jsxs("div",{id:"shopping-lists-panel",className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:"Shopping Lists"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Manage family shopping lists and track expenses"})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"relative flex-1 md:flex-none md:min-w-[200px]",children:[o.jsx("input",{type:"text",placeholder:"Search lists...",value:Pe,onChange:B=>We(B.target.value),className:"w-full pl-10 pr-4 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}),o.jsx(rp,{className:"absolute left-3 top-2.5 text-neutral-400 dark:text-neutral-500",size:18})]}),ge==="lists"?o.jsxs("button",{onClick:()=>D(!0),className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(Jt,{size:18,className:"mr-2"}),o.jsx("span",{children:"New List"})]}):o.jsxs("button",{onClick:()=>z(!0),className:"flex items-center px-3 py-2 rounded-2xl bg-secondary-500 text-white hover:bg-secondary-600 dark:hover:bg-secondary-400 transition-colors",children:[o.jsx(Jt,{size:18,className:"mr-2"}),o.jsx("span",{children:"New Meal"})]})]})]}),lt(),ge==="meal-planner"?Nt():o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-neutral-800 rounded-2xl shadow-card overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-semibold text-neutral-900 dark:text-white",children:"Your Lists"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>Ie("all"),className:`px-2 py-1 text-xs rounded-lg ${ke==="all"?"bg-primary-100 text-primary-700":"text-neutral-500"}`,children:"All"}),o.jsx("button",{onClick:()=>Ie("active"),className:`px-2 py-1 text-xs rounded-lg ${ke==="active"?"bg-primary-100 text-primary-700":"text-neutral-500"}`,children:"Active"}),o.jsx("button",{onClick:()=>Ie("archived"),className:`px-2 py-1 text-xs rounded-lg ${ke==="archived"?"bg-primary-100 text-primary-700":"text-neutral-500"}`,children:"Archived"})]})]})}),o.jsx("div",{className:"divide-y divide-neutral-200 dark:divide-neutral-700",children:J.map(B=>o.jsxs("button",{onClick:()=>C(B),className:`w-full p-4 text-left transition-colors ${(N==null?void 0:N.ShoppingListID)===B.ShoppingListID?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-neutral-50 dark:hover:bg-neutral-700"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:B.Name}),o.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:new Date(B.CreatedAt).toLocaleDateString()})]}),o.jsx("div",{className:"mt-2 flex items-center justify-between text-sm",children:o.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:[B.ShoppingItems.length," items"]})})]},B.ShoppingListID))})]}),N?o.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-neutral-800 rounded-2xl shadow-card",children:[o.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:N.Name}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[De," of ",Ke," items completed"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:Xe,className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx($x,{size:18})}),a.includes("INSTACART")&&o.jsx("button",{onClick:()=>i(!0),className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(_u,{size:18})}),o.jsx("button",{onClick:Kr,className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(h6,{size:18})}),o.jsxs("div",{className:"relative",ref:de,children:[o.jsx("button",{onClick:()=>fe(B=>!B),className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(Hf,{size:18})}),X&&o.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-neutral-800 rounded-md shadow-lg z-10",children:o.jsx("button",{onClick:()=>{ne(!0),fe(!1)},className:"block w-full text-left px-4 py-2 text-sm text-error-600 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Delete"})})]})]})]}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"h-2 bg-neutral-100 dark:bg-neutral-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all",style:{width:`${De/Ke*100}%`}})})}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Est. Total"}),o.jsxs("p",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:["$",(Ke*3.5).toFixed(2)]})]})]})]}),o.jsxs("div",{className:"p-4",children:[o.jsxs("button",{onClick:()=>P(!0),className:"w-full p-3 rounded-xl border-2 border-dashed border-neutral-200 dark:border-neutral-700 text-neutral-500 dark:text-neutral-400 hover:border-primary-500 hover:text-primary-500 dark:hover:border-primary-400 dark:hover:text-primary-400 transition-colors",children:[o.jsx(Jt,{size:20,className:"mx-auto"}),o.jsx("span",{className:"block mt-1 text-sm",children:"Add Item"})]}),o.jsx("div",{className:"mt-4 space-y-2",children:N.ShoppingItems.map(B=>o.jsx(vt.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`p-3 rounded-xl border border-neutral-200 dark:border-neutral-700 ${B.Completed?"bg-neutral-50 dark:bg-neutral-800/50":"bg-white dark:bg-neutral-800"}`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>Os(B),className:`p-2 rounded-xl ${B.Completed?"text-primary-500 dark:text-primary-400":"text-neutral-400 dark:text-neutral-500 hover:text-primary-500 dark:hover:text-primary-400"}`,children:B.Completed?o.jsx(x6,{size:20}):o.jsx(L0,{size:20})}),o.jsxs("div",{className:"flex-1 ml-3",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("h3",{className:`font-medium ${B.Completed?"text-neutral-400 dark:text-neutral-500 line-through":"text-neutral-900 dark:text-white"}`,children:B.Name})}),o.jsxs("div",{className:"mt-1 text-sm text-neutral-500 dark:text-neutral-400",children:[B.Quantity," ",B.Unit]})]}),o.jsx("button",{onClick:()=>ie.info("More options coming soon!"),className:"p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-700",children:o.jsx(Hf,{size:18})})]})},B.ShoppingItemID))})]})]}):o.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-neutral-800 rounded-2xl shadow-card flex items-center justify-center p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 w-16 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-700 dark:text-primary-300 mx-auto mb-4",children:o.jsx(Vf,{size:32})}),o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white mb-2",children:"No list selected"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Select a list from the sidebar or create a new one"})]})})]}),o.jsx(Xt,{children:L&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Create New List"}),o.jsx("button",{onClick:()=>D(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"List Name"}),o.jsx("input",{type:"text",value:Ze,onChange:B=>it(B.target.value),className:`w-full px-3 py-2 rounded-xl border ${ot.newListName?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,placeholder:"Enter list name"}),ot.newListName&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ot.newListName})]})})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:un,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Create List"})]})]})})}),o.jsx(Xt,{children:O&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Add New Item"}),o.jsx("button",{onClick:()=>P(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Item Name"}),o.jsx("input",{type:"text",value:Q,onChange:B=>_(B.target.value),className:`w-full px-3 py-2 rounded-xl border ${ot.newItemName?"border-red-500":"border-neutral-200 dark:border-neutral-700"} bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,placeholder:"Enter item name"}),ot.newItemName&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:ot.newItemName})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Quantity"}),o.jsx("input",{type:"number",min:"1",value:A,onChange:B=>q(parseInt(B.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Unit"}),o.jsx("input",{type:"text",value:ye,onChange:B=>gt(B.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"e.g., pieces, lbs"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Category"}),o.jsxs("select",{value:Ht??"",onChange:B=>qt(parseInt(B.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:[o.jsx("option",{value:"",children:"Select a category"}),o.jsx("option",{value:"1",children:"Groceries"}),o.jsx("option",{value:"2",children:"Household"}),o.jsx("option",{value:"3",children:"Personal"}),o.jsx("option",{value:"4",children:"School"}),o.jsx("option",{value:"5",children:"Other"})]})]})]})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:cs,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Add Item"})]})]})})}),o.jsx(Xt,{children:U&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Create New Meal"}),o.jsx("button",{onClick:()=>z(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Meal Name"}),o.jsx("input",{type:"text",value:Ue,onChange:B=>Ne(B.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Enter meal name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Description"}),o.jsx("textarea",{value:ze,onChange:B=>R(B.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Enter a brief description",rows:3})]})]})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:ae,disabled:c,className:"px-4 py-2 text-sm font-medium text-white bg-secondary-500 hover:bg-secondary-600 dark:hover:bg-secondary-400 rounded-xl disabled:bg-secondary-300 dark:disabled:bg-secondary-700",children:c?"LinZ is thinking...":"Create Meal"})]})]})})}),o.jsx(Xt,{children:$&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Delete List"}),o.jsx("button",{onClick:()=>ne(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4",children:o.jsx("p",{children:"Are you sure you want to delete this list? This action cannot be undone."})}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:()=>ne(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:qe,className:"px-4 py-2 text-sm font-medium text-white bg-error-600 hover:bg-error-700 rounded-xl",children:"Delete"})]})]})})}),o.jsx(Xt,{children:s&&N&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-4xl w-full h-full max-h-[80vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700 flex-shrink-0",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Export to Instacart"}),o.jsx("button",{onClick:()=>i(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsx("div",{className:"p-4 flex-grow overflow-hidden",children:o.jsx(BQ,{items:N.ShoppingItems})})]})})})]})},zQ="modulepreload",UQ=function(e){return"/app/"+e},fE={},wl=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=UQ(c),c in fE)return;fE[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":zQ,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function hE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(r),!0).forEach(function(n){f_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HQ(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function VQ(e,t){if(e==null)return{};var r=HQ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bo(e,t){return WQ(e)||$Q(e,t)||YQ(e,t)||GQ()}function WQ(e){if(Array.isArray(e))return e}function $Q(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],s=!0,i=!1,a,l;try{for(r=r.call(e);!(s=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));s=!0);}catch(c){i=!0,l=c}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function YQ(e,t){if(e){if(typeof e=="string")return pE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pE(e,t)}}function pE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qQ=["src","checkForExisting"],ic={},mE=function(t){var r=document.querySelector('script[src="'.concat(t,'"]'));if(r)return ic[t]={loading:!1,error:null,scriptEl:r}},gE=typeof window<"u"&&typeof window.document<"u";function KQ(e){var t=e.src,r=e.checkForExisting,n=r===void 0?!1:r,s=VQ(e,qQ),i=t?ic[t]:void 0;!i&&n&&t&&gE&&(i=mE(t));var a=g.useState(i?i.loading:!!t),l=Bo(a,2),c=l[0],u=l[1],d=g.useState(i?i.error:null),f=Bo(d,2),h=f[0],p=f[1],m=g.useState(!1),y=Bo(m,2),b=y[0],v=y[1];return g.useEffect(function(){if(!(!gE||!t||b||h)){i=ic[t],!i&&n&&(i=mE(t));var x;i?x=i.scriptEl:(x=document.createElement("script"),x.src=t,Object.keys(s).forEach(function(S){x[S]===void 0?x.setAttribute(S,s[S]):x[S]=s[S]}),i=ic[t]={loading:!0,error:null,scriptEl:x});var w=function(){i&&(i.loading=!1),u(!1),v(!0)},k=function(E){i&&(i.error=E),p(E)};return x.addEventListener("load",w),x.addEventListener("error",k),document.body.appendChild(x),function(){x.removeEventListener("load",w),x.removeEventListener("error",k),i&&i.loading&&(x.remove(),delete ic[t])}}},[t]),[c,h]}var QQ=function(t,r,n){var s={};return delete Object.assign(s,t,f_({},n,t[r]))[r],s},ZQ=function(t,r){var n={plaid:null,open:!1,onExitCallback:null};if(typeof window>"u"||!window.Plaid)throw new Error("Plaid not loaded");n.plaid=r(xh(xh({},t),{},{onExit:function(u,d){n.open=!1,t.onExit&&t.onExit(u,d),n.onExitCallback&&n.onExitCallback()}}));var s=function(){n.plaid&&(n.open=!0,n.onExitCallback=null,n.plaid.open())},i=function(u){n.plaid&&n.plaid.submit(u)},a=function(u,d){if(!n.open||!n.plaid){d&&d();return}n.onExitCallback=d,n.plaid.exit(u),u&&u.force&&(n.open=!1)},l=function(){n.plaid&&(n.plaid.destroy(),n.plaid=null)};return{open:s,submit:i,exit:a,destroy:l}},XQ=function(t,r){var n=QQ(t,"publicKey","key");return ZQ(n,r)},JQ="https://cdn.plaid.com/link/v2/stable/link-initialize.js",yE=function(){},eZ=function(t){var r=KQ({src:JQ,checkForExisting:!0}),n=Bo(r,2),s=n[0],i=n[1],a=g.useState(null),l=Bo(a,2),c=l[0],u=l[1],d=g.useState(!1),f=Bo(d,2),h=f[0],p=f[1],m=(t.product||[]).slice().sort().join(",");g.useEffect(function(){if(!s&&!(!t.token&&!t.publicKey&&!t.receivedRedirectUri)){if(i||!window.Plaid){console.error("Error loading Plaid",i);return}c!=null&&c.exit({force:!0},function(){return c.destroy()});var v=XQ(xh(xh({},t),{},{onLoad:function(){p(!0),t.onLoad&&t.onLoad()}}),window.Plaid.create);return u(v),function(){return v.exit({force:!0},function(){return v.destroy()})}}},[s,i,t.publicKey,t.token,m]);var y=c!=null&&(!s||h),b=function(){t.token||console.warn("react-plaid-link: You cannot call open() without a valid token supplied to usePlaidLink. This is a no-op.")};return{error:i,ready:y,submit:c?c.submit:yE,exit:c?c.exit:yE,open:c?c.open:b}},xE;(function(e){e.OPEN="OPEN",e.EXIT="EXIT",e.HANDOFF="HANDOFF",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.ERROR="ERROR",e.BANK_INCOME_INSIGHTS_COMPLETED="BANK_INCOME_INSIGHTS_COMPLETED",e.IDENTITY_VERIFICATION_PASS_SESSION="IDENTITY_VERIFICATION_PASS_SESSION",e.IDENTITY_VERIFICATION_FAIL_SESSION="IDENTITY_VERIFICATION_FAIL_SESSION"})(xE||(xE={}));function tZ(e,t){const[r,n]=g.useState(e);return g.useEffect(()=>{const s=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(s)}},[e,t]),r}const rZ=async e=>(await K.get(`/budget/family/${e}`)).data,nZ=async e=>(await K.post("/budget",e)).data,sZ=async(e,t)=>{await K.put(`/budget/${e}`,t)},iZ=async e=>{await K.delete(`/budget/${e}`)},aZ=async e=>(await K.get(`/savings-goals/family/${e}`)).data,oZ=async e=>(await K.post("/savings-goals",e)).data,lZ=async(e,t)=>{await K.put(`/savings-goals/${e}`,t)},cZ=async e=>{await K.delete(`/savings-goals/${e}`)},uZ=async(e,t)=>{const r=new URLSearchParams;return t&&(r.append("startDate",t.startDate.toISOString()),r.append("endDate",t.endDate.toISOString())),(await K.post(`/transactions/accounts?${r.toString()}`,{accountIds:e})).data},dZ=async e=>(await K.post("/transactions",e)).data,vE=async e=>{const t=e?`/plaid/accounts?familyId=${e}`:"/plaid/accounts";return(await K.get(t)).data},fZ=async e=>{await K.delete(`/plaid/accounts/${e}`)},hZ=async(e,t)=>{await K.put(`/plaid/accounts/${e}`,{customName:t})},bE=({onEdit:e,onDelete:t})=>{const[r,n]=g.useState(!1);return o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>n(!r),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:o.jsx(Hf,{size:18})}),o.jsx(Xt,{children:r&&o.jsxs(vt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg z-10",children:[o.jsxs("button",{onClick:()=>{e(),n(!1)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[o.jsx(np,{size:14,className:"mr-2"})," Edit"]}),o.jsxs("button",{onClick:()=>{t(),n(!1)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:[o.jsx(ei,{size:14,className:"mr-2"})," Delete"]})]})})]})},Tp=0,na=1,kl=2,h_=4;function wE(e){return()=>e}function pZ(e){e()}function p_(e,t){return r=>e(t(r))}function kE(e,t){return()=>e(t)}function mZ(e,t){return r=>e(t,r)}function Kv(e){return e!==void 0}function gZ(...e){return()=>{e.map(pZ)}}function Sl(){}function Ap(e,t){return t(e),e}function yZ(e,t){return t(e)}function At(...e){return e}function xt(e,t){return e(na,t)}function Ge(e,t){e(Tp,t)}function Qv(e){e(kl)}function Kt(e){return e(h_)}function _e(e,t){return xt(e,mZ(t,Tp))}function ts(e,t){const r=e(na,n=>{r(),t(n)});return r}function SE(e){let t,r;return n=>s=>{t=s,r&&clearTimeout(r),r=setTimeout(()=>{n(t)},e)}}function m_(e,t){return e===t}function jt(e=m_){let t;return r=>n=>{e(t,n)||(t=n,r(n))}}function Be(e){return t=>r=>{e(r)&&t(r)}}function Ee(e){return t=>p_(t,e)}function vs(e){return t=>()=>{t(e)}}function oe(e,...t){const r=xZ(...t);return(n,s)=>{switch(n){case kl:Qv(e);return;case na:return xt(e,r(s))}}}function Ss(e,t){return r=>n=>{r(t=e(t,n))}}function $a(e){return t=>r=>{e>0?e--:t(r)}}function Ys(e){let t=null,r;return n=>s=>{t=s,!r&&(r=setTimeout(()=>{r=void 0,n(t)},e))}}function Qe(...e){const t=new Array(e.length);let r=0,n=null;const s=Math.pow(2,e.length)-1;return e.forEach((i,a)=>{const l=Math.pow(2,a);xt(i,c=>{const u=r;r=r|l,t[a]=c,u!==s&&r===s&&n&&(n(),n=null)})}),i=>a=>{const l=()=>{i([a].concat(t))};r===s?l():n=l}}function xZ(...e){return t=>e.reduceRight(yZ,t)}function vZ(e){let t,r;const n=()=>t==null?void 0:t();return function(s,i){switch(s){case na:return i?r===i?void 0:(n(),r=i,t=xt(e,i),t):(n(),Sl);case kl:n(),r=null;return}}}function he(e){let t=e;const r=st();return(n,s)=>{switch(n){case Tp:t=s;break;case na:{s(t);break}case h_:return t}return r(n,s)}}function Or(e,t){return Ap(he(t),r=>_e(e,r))}function st(){const e=[];return(t,r)=>{switch(t){case Tp:e.slice().forEach(n=>{n(r)});return;case kl:e.splice(0,e.length);return;case na:return e.push(r),()=>{const n=e.indexOf(r);n>-1&&e.splice(n,1)}}}}function vn(e){return Ap(st(),t=>_e(e,t))}function mt(e,t=[],{singleton:r}={singleton:!0}){return{constructor:e,dependencies:t,id:bZ(),singleton:r}}const bZ=()=>Symbol();function wZ(e){const t=new Map,r=({constructor:n,dependencies:s,id:i,singleton:a})=>{if(a&&t.has(i))return t.get(i);const l=n(s.map(c=>r(c)));return a&&t.set(i,l),l};return r(e)}function ir(...e){const t=st(),r=new Array(e.length);let n=0;const s=Math.pow(2,e.length)-1;return e.forEach((i,a)=>{const l=Math.pow(2,a);xt(i,c=>{r[a]=c,n=n|l,n===s&&Ge(t,r)})}),function(i,a){switch(i){case kl:{Qv(t);return}case na:return n===s&&a(r),xt(t,a)}}}function Le(e,t=m_){return oe(e,jt(t))}function ky(...e){return function(t,r){switch(t){case kl:return;case na:return gZ(...e.map(n=>xt(n,r)))}}}var ln=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(ln||{});const kZ={0:"debug",3:"error",1:"log",2:"warn"},SZ=()=>typeof globalThis>"u"?window:globalThis,sa=mt(()=>{const e=he(3);return{log:he((t,r,n=1)=>{var s;const i=(s=SZ().VIRTUOSO_LOG_LEVEL)!=null?s:Kt(e);n>=i&&console[kZ[n]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,r)}),logLevel:e}},[],{singleton:!0});function no(e,t,r){return Zv(e,t,r).callbackRef}function Zv(e,t,r){const n=te.useRef(null);let s=a=>{};const i=te.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(a=>{const l=()=>{const c=a[0].target;c.offsetParent!==null&&e(c)};r?l():requestAnimationFrame(l)}):null,[e,r]);return s=a=>{a&&t?(i==null||i.observe(a),n.current=a):(n.current&&(i==null||i.unobserve(n.current)),n.current=null)},{callbackRef:s,ref:n}}function EZ(e,t,r,n,s,i,a,l,c){const u=te.useCallback(d=>{const f=NZ(d.children,t,l?"offsetWidth":"offsetHeight",s);let h=d.parentElement;for(;!h.dataset.virtuosoScroller;)h=h.parentElement;const p=h.lastElementChild.dataset.viewportType==="window";let m;p&&(m=h.ownerDocument.defaultView);const y=a?l?a.scrollLeft:a.scrollTop:p?l?m.scrollX||m.document.documentElement.scrollLeft:m.scrollY||m.document.documentElement.scrollTop:l?h.scrollLeft:h.scrollTop,b=a?l?a.scrollWidth:a.scrollHeight:p?l?m.document.documentElement.scrollWidth:m.document.documentElement.scrollHeight:l?h.scrollWidth:h.scrollHeight,v=a?l?a.offsetWidth:a.offsetHeight:p?l?m.innerWidth:m.innerHeight:l?h.offsetWidth:h.offsetHeight;n({scrollHeight:b,scrollTop:Math.max(y,0),viewportHeight:v}),i==null||i(l?EE("column-gap",getComputedStyle(d).columnGap,s):EE("row-gap",getComputedStyle(d).rowGap,s)),f!==null&&e(f)},[e,t,s,i,a,n,l]);return Zv(u,r,c)}function NZ(e,t,r,n){const s=e.length;if(s===0)return null;const i=[];for(let a=0;a<s;a++){const l=e.item(a);if(l.dataset.index===void 0)continue;const c=parseInt(l.dataset.index),u=parseFloat(l.dataset.knownSize),d=t(l,r);if(d===0&&n("Zero-sized element, this should not happen",{child:l},ln.ERROR),d===u)continue;const f=i[i.length-1];i.length===0||f.size!==d||f.endIndex!==c-1?i.push({endIndex:c,size:d,startIndex:c}):i[i.length-1].endIndex++}return i}function EE(e,t,r){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&r(`${e} was not resolved to pixel value correctly`,t,ln.WARN),t==="normal"?0:parseInt(t??"0",10)}function g_(e,t,r){const n=te.useRef(null),s=te.useCallback(c=>{if(!(c!=null&&c.offsetParent))return;const u=c.getBoundingClientRect(),d=u.width;let f,h;if(t){const p=t.getBoundingClientRect(),m=u.top-p.top;h=p.height-Math.max(0,m),f=m+t.scrollTop}else{const p=a.current.ownerDocument.defaultView;h=p.innerHeight-Math.max(0,u.top),f=u.top+p.scrollY}n.current={offsetTop:f,visibleHeight:h,visibleWidth:d},e(n.current)},[e,t]),{callbackRef:i,ref:a}=Zv(s,!0,r),l=te.useCallback(()=>{s(a.current)},[s,a]);return te.useEffect(()=>{var c;if(t){t.addEventListener("scroll",l);const u=new ResizeObserver(()=>{requestAnimationFrame(l)});return u.observe(t),()=>{t.removeEventListener("scroll",l),u.unobserve(t)}}else{const u=(c=a.current)==null?void 0:c.ownerDocument.defaultView;return u==null||u.addEventListener("scroll",l),u==null||u.addEventListener("resize",l),()=>{u==null||u.removeEventListener("scroll",l),u==null||u.removeEventListener("resize",l)}}},[l,t,a]),i}const qr=mt(()=>{const e=st(),t=st(),r=he(0),n=st(),s=he(0),i=st(),a=st(),l=he(0),c=he(0),u=he(0),d=he(0),f=st(),h=st(),p=he(!1),m=he(!1),y=he(!1);return _e(oe(e,Ee(({scrollTop:b})=>b)),t),_e(oe(e,Ee(({scrollHeight:b})=>b)),a),_e(t,s),{deviation:r,fixedFooterHeight:u,fixedHeaderHeight:c,footerHeight:d,headerHeight:l,horizontalDirection:m,scrollBy:h,scrollContainerState:e,scrollHeight:a,scrollingInProgress:p,scrollTo:f,scrollTop:t,skipAnimationFrameInResizeObserver:y,smoothScrollTargetReached:n,statefulScrollTop:s,viewportHeight:i}},[],{singleton:!0}),du={lvl:0};function y_(e,t){const r=e.length;if(r===0)return[];let{index:n,value:s}=t(e[0]);const i=[];for(let a=1;a<r;a++){const{index:l,value:c}=t(e[a]);i.push({end:l-1,start:n,value:s}),n=l,s=c}return i.push({end:1/0,start:n,value:s}),i}function kt(e){return e===du}function fu(e,t){if(!kt(e))return t===e.k?e.v:t<e.k?fu(e.l,t):fu(e.r,t)}function ss(e,t,r="k"){if(kt(e))return[-1/0,void 0];if(Number(e[r])===t)return[e.k,e.v];if(Number(e[r])<t){const n=ss(e.r,t,r);return n[0]===-1/0?[e.k,e.v]:n}return ss(e.l,t,r)}function hn(e,t,r){return kt(e)?b_(t,r,1):t===e.k?cr(e,{k:t,v:r}):t<e.k?NE(cr(e,{l:hn(e.l,t,r)})):NE(cr(e,{r:hn(e.r,t,r)}))}function zo(){return du}function Dp(e,t,r){if(kt(e))return[];const n=ss(e,t)[0];return CZ(Ey(e,n,r))}function Sy(e,t){if(kt(e))return du;const{k:r,l:n,r:s}=e;if(t===r){if(kt(n))return s;if(kt(s))return n;{const[i,a]=v_(n);return nf(cr(e,{k:i,l:x_(n),v:a}))}}else return t<r?nf(cr(e,{l:Sy(n,t)})):nf(cr(e,{r:Sy(s,t)}))}function Na(e){return kt(e)?[]:[...Na(e.l),{k:e.k,v:e.v},...Na(e.r)]}function Ey(e,t,r){if(kt(e))return[];const{k:n,l:s,r:i,v:a}=e;let l=[];return n>t&&(l=l.concat(Ey(s,t,r))),n>=t&&n<=r&&l.push({k:n,v:a}),n<=r&&(l=l.concat(Ey(i,t,r))),l}function nf(e){const{l:t,lvl:r,r:n}=e;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(dg(t))return w_(cr(e,{lvl:r-1}));if(!kt(t)&&!kt(t.r))return cr(t.r,{l:cr(t,{r:t.r.l}),lvl:r,r:cr(e,{l:t.r.r,lvl:r-1})});throw new Error("Unexpected empty nodes")}else{if(dg(e))return Ny(cr(e,{lvl:r-1}));if(!kt(n)&&!kt(n.l)){const s=n.l,i=dg(s)?n.lvl-1:n.lvl;return cr(s,{l:cr(e,{lvl:r-1,r:s.l}),lvl:s.lvl+1,r:Ny(cr(n,{l:s.r,lvl:i}))})}else throw new Error("Unexpected empty nodes")}}function cr(e,t){return b_(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function x_(e){return kt(e.r)?e.l:nf(cr(e,{r:x_(e.r)}))}function dg(e){return kt(e)||e.lvl>e.r.lvl}function v_(e){return kt(e.r)?[e.k,e.v]:v_(e.r)}function b_(e,t,r,n=du,s=du){return{k:e,l:n,lvl:r,r:s,v:t}}function NE(e){return Ny(w_(e))}function w_(e){const{l:t}=e;return!kt(t)&&t.lvl===e.lvl?cr(t,{r:cr(e,{l:t.r})}):e}function Ny(e){const{lvl:t,r}=e;return!kt(r)&&!kt(r.r)&&r.lvl===t&&r.r.lvl===t?cr(r,{l:cr(e,{r:r.l}),lvl:t+1}):e}function CZ(e){return y_(e,({k:t,v:r})=>({index:t,value:r}))}function k_(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function hu(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const Xv=mt(()=>({recalcInProgress:he(!1)}),[],{singleton:!0});function S_(e,t,r){return e[vh(e,t,r)]}function vh(e,t,r,n=0){let s=e.length-1;for(;n<=s;){const i=Math.floor((n+s)/2),a=e[i],l=r(a,t);if(l===0)return i;if(l===-1){if(s-n<2)return i-1;s=i-1}else{if(s===n)return i;n=i+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function jZ(e,t,r,n){const s=vh(e,t,n),i=vh(e,r,n,s);return e.slice(s,i+1)}function Qi(e,t){return Math.round(e.getBoundingClientRect()[t])}function Rp(e){return!kt(e.groupOffsetTree)}function Jv({index:e},t){return t===e?0:t<e?-1:1}function TZ(){return{groupIndices:[],groupOffsetTree:zo(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:zo()}}function AZ(e,t){let r=kt(e)?0:1/0;for(const n of t){const{endIndex:s,size:i,startIndex:a}=n;if(r=Math.min(r,a),kt(e)){e=hn(e,0,i);continue}const l=Dp(e,a-1,s+1);if(l.some(PZ(n)))continue;let c=!1,u=!1;for(const{end:d,start:f,value:h}of l)c?(s>=f||i===h)&&(e=Sy(e,f)):(u=h!==i,c=!0),d>s&&s>=f&&h!==i&&(e=hn(e,s+1,h));u&&(e=hn(e,a,i))}return[e,r]}function DZ(e){return typeof e.groupIndex<"u"}function RZ({offset:e},t){return t===e?0:t<e?-1:1}function pu(e,t,r){if(t.length===0)return 0;const{index:n,offset:s,size:i}=S_(t,e,Jv),a=e-n,l=i*a+(a-1)*r+s;return l>0?l+r:l}function E_(e,t){if(!Rp(t))return e;let r=0;for(;t.groupIndices[r]<=e+r;)r++;return e+r}function N_(e,t,r){if(DZ(e))return t.groupIndices[e.groupIndex]+1;{const n=e.index==="LAST"?r:e.index;let s=E_(n,t);return s=Math.max(0,s,Math.min(r,s)),s}}function _Z(e,t,r,n=0){return n>0&&(t=Math.max(t,S_(e,n,Jv).offset)),y_(jZ(e,t,r,RZ),OZ)}function IZ(e,[t,r,n,s]){t.length>0&&n("received item sizes",t,ln.DEBUG);const i=e.sizeTree;let a=i,l=0;if(r.length>0&&kt(i)&&t.length===2){const h=t[0].size,p=t[1].size;a=r.reduce((m,y)=>hn(hn(m,y,h),y+1,p),a)}else[a,l]=AZ(a,t);if(a===i)return e;const{lastIndex:c,lastOffset:u,lastSize:d,offsetTree:f}=Cy(e.offsetTree,l,a,s);return{groupIndices:r,groupOffsetTree:r.reduce((h,p)=>hn(h,p,pu(p,f,s)),zo()),lastIndex:c,lastOffset:u,lastSize:d,offsetTree:f,sizeTree:a}}function MZ(e){return Na(e).map(({k:t,v:r},n,s)=>{const i=s[n+1];return{endIndex:i?i.k-1:1/0,size:r,startIndex:t}})}function CE(e,t){let r=0,n=0;for(;r<e;)r+=t[n+1]-t[n]-1,n++;return n-(r===e?0:1)}function Cy(e,t,r,n){let s=e,i=0,a=0,l=0,c=0;if(t!==0){c=vh(s,t-1,Jv),l=s[c].offset;const u=ss(r,t-1);i=u[0],a=u[1],s.length&&s[c].size===ss(r,t)[1]&&(c-=1),s=s.slice(0,c+1)}else s=[];for(const{start:u,value:d}of Dp(r,t,1/0)){const f=u-i,h=f*a+l+f*n;s.push({index:u,offset:h,size:d}),i=u,l=h,a=d}return{lastIndex:i,lastOffset:l,lastSize:a,offsetTree:s}}function OZ(e){return{index:e.index,value:e}}function PZ(e){const{endIndex:t,size:r,startIndex:n}=e;return s=>s.start===n&&(s.end===t||s.end===1/0)&&s.value===r}const LZ={offsetHeight:"height",offsetWidth:"width"},Ms=mt(([{log:e},{recalcInProgress:t}])=>{const r=st(),n=st(),s=Or(n,0),i=st(),a=st(),l=he(0),c=he([]),u=he(void 0),d=he(void 0),f=he((S,E)=>Qi(S,LZ[E])),h=he(void 0),p=he(0),m=TZ(),y=Or(oe(r,Qe(c,e,p),Ss(IZ,m),jt()),m),b=Or(oe(c,jt(),Ss((S,E)=>({current:E,prev:S.current}),{current:[],prev:[]}),Ee(({prev:S})=>S)),[]);_e(oe(c,Be(S=>S.length>0),Qe(y,p),Ee(([S,E,N])=>{const C=S.reduce((T,j,I)=>hn(T,j,pu(j,E.offsetTree,N)||I),zo());return{...E,groupIndices:S,groupOffsetTree:C}})),y),_e(oe(n,Qe(y),Be(([S,{lastIndex:E}])=>S<E),Ee(([S,{lastIndex:E,lastSize:N}])=>[{endIndex:E,size:N,startIndex:S}])),r),_e(u,d);const v=Or(oe(u,Ee(S=>S===void 0)),!0);_e(oe(d,Be(S=>S!==void 0&&kt(Kt(y).sizeTree)),Ee(S=>[{endIndex:0,size:S,startIndex:0}])),r);const x=vn(oe(r,Qe(y),Ss(({sizes:S},[E,N])=>({changed:N!==S,sizes:N}),{changed:!1,sizes:m}),Ee(S=>S.changed)));xt(oe(l,Ss((S,E)=>({diff:S.prev-E,prev:E}),{diff:0,prev:0}),Ee(S=>S.diff)),S=>{const{groupIndices:E}=Kt(y);if(S>0)Ge(t,!0),Ge(i,S+CE(S,E));else if(S<0){const N=Kt(b);N.length>0&&(S-=CE(-S,N)),Ge(a,S)}}),xt(oe(l,Qe(e)),([S,E])=>{S<0&&E("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},ln.ERROR)});const w=vn(i);_e(oe(i,Qe(y),Ee(([S,E])=>{const N=E.groupIndices.length>0,C=[],T=E.lastSize;if(N){const j=fu(E.sizeTree,0);let I=0,H=0;for(;I<S;){const D=E.groupIndices[H],O=E.groupIndices.length===H+1?1/0:E.groupIndices[H+1]-D-1;C.push({endIndex:D,size:j,startIndex:D}),C.push({endIndex:D+1+O-1,size:T,startIndex:D+1}),H++,I+=O+1}const L=Na(E.sizeTree);return I!==S&&L.shift(),L.reduce((D,{k:O,v:P})=>{let U=D.ranges;return D.prevSize!==0&&(U=[...D.ranges,{endIndex:O+S-1,size:D.prevSize,startIndex:D.prevIndex}]),{prevIndex:O+S,prevSize:P,ranges:U}},{prevIndex:S,prevSize:0,ranges:C}).ranges}return Na(E.sizeTree).reduce((j,{k:I,v:H})=>({prevIndex:I+S,prevSize:H,ranges:[...j.ranges,{endIndex:I+S-1,size:j.prevSize,startIndex:j.prevIndex}]}),{prevIndex:0,prevSize:T,ranges:[]}).ranges})),r);const k=vn(oe(a,Qe(y,p),Ee(([S,{offsetTree:E},N])=>{const C=-S;return pu(C,E,N)})));return _e(oe(a,Qe(y,p),Ee(([S,E,N])=>{if(E.groupIndices.length>0){if(kt(E.sizeTree))return E;let C=zo();const T=Kt(b);let j=0,I=0,H=0;for(;j<-S;){H=T[I];const L=T[I+1]-H-1;I++,j+=L+1}if(C=Na(E.sizeTree).reduce((L,{k:D,v:O})=>hn(L,Math.max(0,D+S),O),C),j!==-S){const L=fu(E.sizeTree,H);C=hn(C,0,L);const D=ss(E.sizeTree,-S+1)[1];C=hn(C,1,D)}return{...E,sizeTree:C,...Cy(E.offsetTree,0,C,N)}}else{const C=Na(E.sizeTree).reduce((T,{k:j,v:I})=>hn(T,Math.max(0,j+S),I),zo());return{...E,sizeTree:C,...Cy(E.offsetTree,0,C,N)}}})),y),{beforeUnshiftWith:w,data:h,defaultItemSize:d,firstItemIndex:l,fixedItemSize:u,gap:p,groupIndices:c,itemSize:f,listRefresh:x,shiftWith:a,shiftWithOffset:k,sizeRanges:r,sizes:y,statefulTotalCount:s,totalCount:n,trackItemSizes:v,unshiftWith:i}},At(sa,Xv),{singleton:!0});function FZ(e){return e.reduce((t,r)=>(t.groupIndices.push(t.totalCount),t.totalCount+=r+1,t),{groupIndices:[],totalCount:0})}const C_=mt(([{groupIndices:e,sizes:t,totalCount:r},{headerHeight:n,scrollTop:s}])=>{const i=st(),a=st(),l=vn(oe(i,Ee(FZ)));return _e(oe(l,Ee(c=>c.totalCount)),r),_e(oe(l,Ee(c=>c.groupIndices)),e),_e(oe(ir(s,t,n),Be(([c,u])=>Rp(u)),Ee(([c,u,d])=>ss(u.groupOffsetTree,Math.max(c-d,0),"v")[0]),jt(),Ee(c=>[c])),a),{groupCounts:i,topItemsIndexes:a}},At(Ms,qr)),ia=mt(([{log:e}])=>{const t=he(!1),r=vn(oe(t,Be(n=>n),jt()));return xt(t,n=>{n&&Kt(e)("props updated",{},ln.DEBUG)}),{didMount:r,propsReady:t}},At(sa),{singleton:!0}),BZ=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function j_(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!BZ)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const Uu=mt(([{gap:e,listRefresh:t,sizes:r,totalCount:n},{fixedFooterHeight:s,fixedHeaderHeight:i,footerHeight:a,headerHeight:l,scrollingInProgress:c,scrollTo:u,smoothScrollTargetReached:d,viewportHeight:f},{log:h}])=>{const p=st(),m=st(),y=he(0);let b=null,v=null,x=null;function w(){b&&(b(),b=null),x&&(x(),x=null),v&&(clearTimeout(v),v=null),Ge(c,!1)}return _e(oe(p,Qe(r,f,n,y,l,a,h),Qe(e,i,s),Ee(([[k,S,E,N,C,T,j,I],H,L,D])=>{const O=j_(k),{align:P,behavior:U,offset:z}=O,$=N-1,ne=N_(O,S,$);let X=pu(ne,S.offsetTree,H)+T;P==="end"?(X+=L+ss(S.sizeTree,ne)[1]-E+D,ne===$&&(X+=j)):P==="center"?X+=(L+ss(S.sizeTree,ne)[1]-E+D)/2:X-=C,z&&(X+=z);const fe=de=>{w(),de?(I("retrying to scroll to",{location:k},ln.DEBUG),Ge(p,k)):(Ge(m,!0),I("list did not change, scroll successful",{},ln.DEBUG))};if(w(),U==="smooth"){let de=!1;x=xt(t,ge=>{de=de||ge}),b=ts(d,()=>{fe(de)})}else b=ts(oe(t,zZ(150)),fe);return v=setTimeout(()=>{w()},1200),Ge(c,!0),I("scrolling from index to",{behavior:U,index:ne,top:X},ln.DEBUG),{behavior:U,top:X}})),u),{scrollTargetReached:m,scrollToIndex:p,topListHeight:y}},At(Ms,qr,sa),{singleton:!0});function zZ(e){return t=>{const r=setTimeout(()=>{t(!1)},e);return n=>{n&&(t(!0),clearTimeout(r))}}}function eb(e,t){e==0?t():requestAnimationFrame(()=>{eb(e-1,t)})}function tb(e,t){const r=t-1;return typeof e=="number"?e:e.index==="LAST"?r:e.index}const Hu=mt(([{defaultItemSize:e,listRefresh:t,sizes:r},{scrollTop:n},{scrollTargetReached:s,scrollToIndex:i},{didMount:a}])=>{const l=he(!0),c=he(0),u=he(!0);return _e(oe(a,Qe(c),Be(([d,f])=>!!f),vs(!1)),l),_e(oe(a,Qe(c),Be(([d,f])=>!!f),vs(!1)),u),xt(oe(ir(t,a),Qe(l,r,e,u),Be(([[,d],f,{sizeTree:h},p,m])=>d&&(!kt(h)||Kv(p))&&!f&&!m),Qe(c)),([,d])=>{ts(s,()=>{Ge(u,!0)}),eb(4,()=>{ts(n,()=>{Ge(l,!0)}),Ge(i,d)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:c,scrolledToInitialItem:l}},At(Ms,qr,Uu,ia),{singleton:!0});function T_(e,t){return Math.abs(e-t)<1.01}const mu="up",Tc="down",UZ="none",HZ={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},VZ=0,Vu=mt(([{footerHeight:e,headerHeight:t,scrollBy:r,scrollContainerState:n,scrollTop:s,viewportHeight:i}])=>{const a=he(!1),l=he(!0),c=st(),u=st(),d=he(4),f=he(VZ),h=Or(oe(ky(oe(Le(s),$a(1),vs(!0)),oe(Le(s),$a(1),vs(!1),SE(100))),jt()),!1),p=Or(oe(ky(oe(r,vs(!0)),oe(r,vs(!1),SE(200))),jt()),!1);_e(oe(ir(Le(s),Le(f)),Ee(([x,w])=>x<=w),jt()),l),_e(oe(l,Ys(50)),u);const m=vn(oe(ir(n,Le(i),Le(t),Le(e),Le(d)),Ss((x,[{scrollHeight:w,scrollTop:k},S,E,N,C])=>{const T=k+S-w>-C,j={scrollHeight:w,scrollTop:k,viewportHeight:S};if(T){let H,L;return k>x.state.scrollTop?(H="SCROLLED_DOWN",L=x.state.scrollTop-k):(H="SIZE_DECREASED",L=x.state.scrollTop-k||x.scrollTopDelta),{atBottom:!0,atBottomBecause:H,scrollTopDelta:L,state:j}}let I;return j.scrollHeight>x.state.scrollHeight?I="SIZE_INCREASED":S<x.state.viewportHeight?I="VIEWPORT_HEIGHT_DECREASING":k<x.state.scrollTop?I="SCROLLING_UPWARDS":I="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:I,state:j}},HZ),jt((x,w)=>x&&x.atBottom===w.atBottom))),y=Or(oe(n,Ss((x,{scrollHeight:w,scrollTop:k,viewportHeight:S})=>{if(T_(x.scrollHeight,w))return{changed:!1,jump:0,scrollHeight:w,scrollTop:k};{const E=w-(k+S)<1;return x.scrollTop!==k&&E?{changed:!0,jump:x.scrollTop-k,scrollHeight:w,scrollTop:k}:{changed:!0,jump:0,scrollHeight:w,scrollTop:k}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),Be(x=>x.changed),Ee(x=>x.jump)),0);_e(oe(m,Ee(x=>x.atBottom)),a),_e(oe(a,Ys(50)),c);const b=he(Tc);_e(oe(n,Ee(({scrollTop:x})=>x),jt(),Ss((x,w)=>Kt(p)?{direction:x.direction,prevScrollTop:w}:{direction:w<x.prevScrollTop?mu:Tc,prevScrollTop:w},{direction:Tc,prevScrollTop:0}),Ee(x=>x.direction)),b),_e(oe(n,Ys(50),vs(UZ)),b);const v=he(0);return _e(oe(h,Be(x=>!x),vs(0)),v),_e(oe(s,Ys(100),Qe(h),Be(([x,w])=>!!w),Ss(([x,w],[k])=>[w,k],[0,0]),Ee(([x,w])=>w-x)),v),{atBottomState:m,atBottomStateChange:c,atBottomThreshold:d,atTopStateChange:u,atTopThreshold:f,isAtBottom:a,isAtTop:l,isScrolling:h,lastJumpDueToItemResize:y,scrollDirection:b,scrollVelocity:v}},At(qr)),bh="top",wh="bottom",jE="none";function TE(e,t,r){return typeof e=="number"?r===mu&&t===bh||r===Tc&&t===wh?e:0:r===mu?t===bh?e.main:e.reverse:t===wh?e.main:e.reverse}function AE(e,t){var r;return typeof e=="number"?e:(r=e[t])!=null?r:0}const rb=mt(([{deviation:e,fixedHeaderHeight:t,headerHeight:r,scrollTop:n,viewportHeight:s}])=>{const i=st(),a=he(0),l=he(0),c=he(0),u=Or(oe(ir(Le(n),Le(s),Le(r),Le(i,hu),Le(c),Le(a),Le(t),Le(e),Le(l)),Ee(([d,f,h,[p,m],y,b,v,x,w])=>{const k=d-x,S=b+v,E=Math.max(h-k,0);let N=jE;const C=AE(w,bh),T=AE(w,wh);return p-=x,p+=h+v,m+=h+v,m-=x,p>d+S-C&&(N=mu),m<d-E+f+T&&(N=Tc),N!==jE?[Math.max(k-h-TE(y,bh,N)-C,0),k-E-v+f+TE(y,wh,N)+T]:null}),Be(d=>d!=null),jt(hu)),[0,0]);return{increaseViewportBy:l,listBoundary:i,overscan:c,topListHeight:a,visibleRange:u}},At(qr),{singleton:!0});function WZ(e,t,r){if(Rp(t)){const n=E_(e,t);return[{index:ss(t.groupOffsetTree,n)[0],offset:0,size:0},{data:r==null?void 0:r[0],index:n,offset:0,size:0}]}return[{data:r==null?void 0:r[0],index:e,offset:0,size:0}]}const fg={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function sf(e,t,r,n,s,i){const{lastIndex:a,lastOffset:l,lastSize:c}=s;let u=0,d=0;if(e.length>0){u=e[0].offset;const y=e[e.length-1];d=y.offset+y.size}const f=r-a,h=l+f*c+(f-1)*n,p=u,m=h-d;return{bottom:d,firstItemIndex:i,items:DE(e,s,i),offsetBottom:m,offsetTop:u,top:p,topItems:DE(t,s,i),topListHeight:t.reduce((y,b)=>b.size+y,0),totalCount:r}}function A_(e,t,r,n,s,i){let a=0;if(r.groupIndices.length>0)for(const d of r.groupIndices){if(d-a>=e)break;a++}const l=e+a,c=tb(t,l),u=Array.from({length:l}).map((d,f)=>({data:i[f+c],index:f+c,offset:0,size:0}));return sf(u,[],l,s,r,n)}function DE(e,t,r){if(e.length===0)return[];if(!Rp(t))return e.map(u=>({...u,index:u.index+r,originalIndex:u.index}));const n=e[0].index,s=e[e.length-1].index,i=[],a=Dp(t.groupOffsetTree,n,s);let l,c=0;for(const u of e){(!l||l.end<u.index)&&(l=a.shift(),c=t.groupIndices.indexOf(l.start));let d;u.index===l.start?d={index:c,type:"group"}:d={groupIndex:c,index:u.index-(c+1)+r},i.push({...d,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return i}const so=mt(([{data:e,firstItemIndex:t,gap:r,sizes:n,totalCount:s},i,{listBoundary:a,topListHeight:l,visibleRange:c},{initialTopMostItemIndex:u,scrolledToInitialItem:d},{topListHeight:f},h,{didMount:p},{recalcInProgress:m}])=>{const y=he([]),b=he(0),v=st();_e(i.topItemsIndexes,y);const x=Or(oe(ir(p,m,Le(c,hu),Le(s),Le(n),Le(u),d,Le(y),Le(t),Le(r),e),Be(([E,N,,C,,,,,,,T])=>{const j=T&&T.length!==C;return E&&!N&&!j}),Ee(([,,[E,N],C,T,j,I,H,L,D,O])=>{const P=T,{offsetTree:U,sizeTree:z}=P,$=Kt(b);if(C===0)return{...fg,totalCount:C};if(E===0&&N===0)return $===0?{...fg,totalCount:C}:A_($,j,T,L,D,O||[]);if(kt(z))return $>0?null:sf(WZ(tb(j,C),P,O),[],C,D,P,L);const ne=[];if(H.length>0){const se=H[0],M=H[H.length-1];let re=0;for(const F of Dp(z,se,M)){const le=F.value,ee=Math.max(F.start,se),we=Math.min(F.end,M);for(let ke=ee;ke<=we;ke++)ne.push({data:O==null?void 0:O[ke],index:ke,offset:re,size:le}),re+=le}}if(!I)return sf([],ne,C,D,P,L);const X=H.length>0?H[H.length-1]+1:0,fe=_Z(U,E,N,X);if(fe.length===0)return null;const de=C-1,ge=Ap([],se=>{for(const M of fe){const re=M.value;let F=re.offset,le=M.start;const ee=re.size;if(re.offset<E){le+=Math.floor((E-re.offset+D)/(ee+D));const ke=le-M.start;F+=ke*ee+ke*D}le<X&&(F+=(X-le)*ee,le=X);const we=Math.min(M.end,de);for(let ke=le;ke<=we&&!(F>=N);ke++)se.push({data:O==null?void 0:O[ke],index:ke,offset:F,size:ee}),F+=ee+D}});return sf(ge,ne,C,D,P,L)}),Be(E=>E!==null),jt()),fg);_e(oe(e,Be(Kv),Ee(E=>E==null?void 0:E.length)),s),_e(oe(x,Ee(E=>E.topListHeight)),f),_e(f,l),_e(oe(x,Ee(E=>[E.top,E.bottom])),a),_e(oe(x,Ee(E=>E.items)),v);const w=vn(oe(x,Be(({items:E})=>E.length>0),Qe(s,e),Be(([{items:E},N])=>E[E.length-1].originalIndex===N-1),Ee(([,E,N])=>[E-1,N]),jt(hu),Ee(([E])=>E))),k=vn(oe(x,Ys(200),Be(({items:E,topItems:N})=>E.length>0&&E[0].originalIndex===N.length),Ee(({items:E})=>E[0].index),jt())),S=vn(oe(x,Be(({items:E})=>E.length>0),Ee(({items:E})=>{let N=0,C=E.length-1;for(;E[N].type==="group"&&N<C;)N++;for(;E[C].type==="group"&&C>N;)C--;return{endIndex:E[C].index,startIndex:E[N].index}}),jt(k_)));return{endReached:w,initialItemCount:b,itemsRendered:v,listState:x,rangeChanged:S,startReached:k,topItemsIndexes:y,...h}},At(Ms,C_,rb,Hu,Uu,Vu,ia,Xv),{singleton:!0}),D_=mt(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:r,headerHeight:n},{listState:s}])=>{const i=st(),a=Or(oe(ir(r,e,n,t,s),Ee(([l,c,u,d,f])=>l+c+u+d+f.offsetBottom+f.bottom)),0);return _e(Le(a),i),{totalListHeight:a,totalListHeightChanged:i}},At(qr,so),{singleton:!0}),$Z=mt(([{viewportHeight:e},{totalListHeight:t}])=>{const r=he(!1),n=Or(oe(ir(r,e,t),Be(([s])=>s),Ee(([,s,i])=>Math.max(0,s-i)),Ys(0),jt()),0);return{alignToBottom:r,paddingTopAddition:n}},At(qr,D_),{singleton:!0}),R_=mt(()=>({context:he(null)})),YZ=({itemBottom:e,itemTop:t,locationParams:{align:r,behavior:n,...s},viewportBottom:i,viewportTop:a})=>t<a?{...s,align:r??"start",behavior:n}:e>i?{...s,align:r??"end",behavior:n}:null,__=mt(([{gap:e,sizes:t,totalCount:r},{fixedFooterHeight:n,fixedHeaderHeight:s,headerHeight:i,scrollingInProgress:a,scrollTop:l,viewportHeight:c},{scrollToIndex:u}])=>{const d=st();return _e(oe(d,Qe(t,c,r,i,s,n,l),Qe(e),Ee(([[f,h,p,m,y,b,v,x],w])=>{const{align:k,behavior:S,calculateViewLocation:E=YZ,done:N,...C}=f,T=N_(f,h,m-1),j=pu(T,h.offsetTree,w)+y+b,I=j+ss(h.sizeTree,T)[1],H=x+b,L=x+p-v,D=E({itemBottom:I,itemTop:j,locationParams:{align:k,behavior:S,...C},viewportBottom:L,viewportTop:H});return D?N&&ts(oe(a,Be(O=>!O),$a(Kt(a)?1:2)),N):N&&N(),D}),Be(f=>f!==null)),u),{scrollIntoView:d}},At(Ms,qr,Uu,so,sa),{singleton:!0});function RE(e){return e?e==="smooth"?"smooth":"auto":!1}const GZ=(e,t)=>typeof e=="function"?RE(e(t)):t&&RE(e),qZ=mt(([{listRefresh:e,totalCount:t,fixedItemSize:r,data:n},{atBottomState:s,isAtBottom:i},{scrollToIndex:a},{scrolledToInitialItem:l},{didMount:c,propsReady:u},{log:d},{scrollingInProgress:f},{context:h},{scrollIntoView:p}])=>{const m=he(!1),y=st();let b=null;function v(S){Ge(a,{align:"end",behavior:S,index:"LAST"})}xt(oe(ir(oe(Le(t),$a(1)),c),Qe(Le(m),i,l,f),Ee(([[S,E],N,C,T,j])=>{let I=E&&T,H="auto";return I&&(H=GZ(N,C||j),I=I&&!!H),{followOutputBehavior:H,shouldFollow:I,totalCount:S}}),Be(({shouldFollow:S})=>S)),({followOutputBehavior:S,totalCount:E})=>{b&&(b(),b=null),Kt(r)?requestAnimationFrame(()=>{Kt(d)("following output to ",{totalCount:E},ln.DEBUG),v(S)}):b=ts(e,()=>{Kt(d)("following output to ",{totalCount:E},ln.DEBUG),v(S),b=null})});function x(S){const E=ts(s,N=>{S&&!N.atBottom&&N.notAtBottomBecause==="SIZE_INCREASED"&&!b&&(Kt(d)("scrolling to bottom due to increased size",{},ln.DEBUG),v("auto"))});setTimeout(E,100)}xt(oe(ir(Le(m),t,u),Be(([S,,E])=>S&&E),Ss(({value:S},[,E])=>({refreshed:S===E,value:E}),{refreshed:!1,value:0}),Be(({refreshed:S})=>S),Qe(m,t)),([,S])=>{Kt(l)&&x(S!==!1)}),xt(y,()=>{x(Kt(m)!==!1)}),xt(ir(Le(m),s),([S,E])=>{S&&!E.atBottom&&E.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&v("auto")});const w=he(null),k=st();return _e(ky(oe(Le(n),Ee(S=>{var E;return(E=S==null?void 0:S.length)!=null?E:0})),oe(Le(t))),k),xt(oe(ir(oe(k,$a(1)),c),Qe(Le(w),l,f,h),Ee(([[S,E],N,C,T,j])=>E&&C&&(N==null?void 0:N({context:j,totalCount:S,scrollingInProgress:T}))),Be(S=>!!S),Ys(0)),S=>{b&&(b(),b=null),Kt(r)?requestAnimationFrame(()=>{Kt(d)("scrolling into view",{}),Ge(p,S)}):b=ts(e,()=>{Kt(d)("scrolling into view",{}),Ge(p,S),b=null})}),{autoscrollToBottom:y,followOutput:m,scrollIntoViewOnChange:w}},At(Ms,Vu,Uu,Hu,ia,sa,qr,R_,__)),KZ=mt(([{data:e,firstItemIndex:t,gap:r,sizes:n},{initialTopMostItemIndex:s},{initialItemCount:i,listState:a},{didMount:l}])=>(_e(oe(l,Qe(i),Be(([,c])=>c!==0),Qe(s,n,t,r,e),Ee(([[,c],u,d,f,h,p=[]])=>A_(c,u,d,f,h,p))),a),{}),At(Ms,Hu,so,ia),{singleton:!0}),QZ=mt(([{didMount:e},{scrollTo:t},{listState:r}])=>{const n=he(0);return xt(oe(e,Qe(n),Be(([,s])=>s!==0),Ee(([,s])=>({top:s}))),s=>{ts(oe(r,$a(1),Be(i=>i.items.length>1)),()=>{requestAnimationFrame(()=>{Ge(t,s)})})}),{initialScrollTop:n}},At(ia,qr,so),{singleton:!0}),I_=mt(([{scrollVelocity:e}])=>{const t=he(!1),r=st(),n=he(!1);return _e(oe(e,Qe(n,t,r),Be(([s,i])=>!!i),Ee(([s,i,a,l])=>{const{enter:c,exit:u}=i;if(a){if(u(s,l))return!1}else if(c(s,l))return!0;return a}),jt()),t),xt(oe(ir(t,e,r),Qe(n)),([[s,i,a],l])=>{s&&l&&l.change&&l.change(i,a)}),{isSeeking:t,scrollSeekConfiguration:n,scrollSeekRangeChanged:r,scrollVelocity:e}},At(Vu),{singleton:!0}),nb=mt(([{scrollContainerState:e,scrollTo:t}])=>{const r=st(),n=st(),s=st(),i=he(!1),a=he(void 0);return _e(oe(ir(r,n),Ee(([{scrollHeight:l,scrollTop:c,viewportHeight:u},{offsetTop:d}])=>({scrollHeight:l,scrollTop:Math.max(0,c-d),viewportHeight:u}))),e),_e(oe(t,Qe(n),Ee(([l,{offsetTop:c}])=>({...l,top:l.top+c}))),s),{customScrollParent:a,useWindowScroll:i,windowScrollContainerState:r,windowScrollTo:s,windowViewportRect:n}},At(qr)),ZZ=mt(([{sizeRanges:e,sizes:t},{headerHeight:r,scrollTop:n},{initialTopMostItemIndex:s},{didMount:i},{useWindowScroll:a,windowScrollContainerState:l,windowViewportRect:c}])=>{const u=st(),d=he(void 0),f=he(null),h=he(null);return _e(l,f),_e(c,h),xt(oe(u,Qe(t,n,a,f,h,r)),([p,m,y,b,v,x,w])=>{const k=MZ(m.sizeTree);b&&v!==null&&x!==null&&(y=v.scrollTop-x.offsetTop),y-=w,p({ranges:k,scrollTop:y})}),_e(oe(d,Be(Kv),Ee(XZ)),s),_e(oe(i,Qe(d),Be(([,p])=>p!==void 0),jt(),Ee(([,p])=>p.ranges)),e),{getState:u,restoreStateFrom:d}},At(Ms,qr,Hu,ia,nb));function XZ(e){return{align:"start",index:0,offset:e.scrollTop}}const JZ=mt(([{topItemsIndexes:e}])=>{const t=he(0);return _e(oe(t,Be(r=>r>=0),Ee(r=>Array.from({length:r}).map((n,s)=>s))),e),{topItemCount:t}},At(so));function M_(e){let t=!1,r;return()=>(t||(t=!0,r=e()),r)}const eX=M_(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),tX=mt(([{deviation:e,scrollBy:t,scrollingInProgress:r,scrollTop:n},{isAtBottom:s,isScrolling:i,lastJumpDueToItemResize:a,scrollDirection:l},{listState:c},{beforeUnshiftWith:u,gap:d,shiftWithOffset:f,sizes:h},{log:p},{recalcInProgress:m}])=>{const y=vn(oe(c,Qe(a),Ss(([,v,x,w],[{bottom:k,items:S,offsetBottom:E,totalCount:N},C])=>{const T=k+E;let j=0;return x===N&&v.length>0&&S.length>0&&(S[0].originalIndex===0&&v[0].originalIndex===0||(j=T-w,j!==0&&(j+=C))),[j,S,N,T]},[0,[],0,0]),Be(([v])=>v!==0),Qe(n,l,r,s,p,m),Be(([,v,x,w,,,k])=>!k&&!w&&v!==0&&x===mu),Ee(([[v],,,,,x])=>(x("Upward scrolling compensation",{amount:v},ln.DEBUG),v))));function b(v){v>0?(Ge(t,{behavior:"auto",top:-v}),Ge(e,0)):(Ge(e,0),Ge(t,{behavior:"auto",top:-v}))}return xt(oe(y,Qe(e,i)),([v,x,w])=>{w&&eX()?Ge(e,x-v):b(-v)}),xt(oe(ir(Or(i,!1),e,m),Be(([v,x,w])=>!v&&!w&&x!==0),Ee(([v,x])=>x),Ys(1)),b),_e(oe(f,Ee(v=>({top:-v}))),t),xt(oe(u,Qe(h,d),Ee(([v,{groupIndices:x,lastSize:w,sizeTree:k},S])=>{function E(N){return N*(w+S)}if(x.length===0)return E(v);{let N=0;const C=fu(k,0);let T=0,j=0;for(;T<v;){T++,N+=C;let I=x.length===j+1?1/0:x[j+1]-x[j]-1;T+I>v&&(N-=C,I=v-T+1),T+=I,N+=E(I),j++}return N}})),v=>{Ge(e,v),requestAnimationFrame(()=>{Ge(t,{top:v}),requestAnimationFrame(()=>{Ge(e,0),Ge(m,!1)})})}),{deviation:e}},At(qr,Vu,so,Ms,sa,Xv)),rX=mt(([e,t,r,n,s,i,a,l,c,u,d])=>({...e,...t,...r,...n,...s,...i,...a,...l,...c,...u,...d}),At(rb,KZ,ia,I_,D_,QZ,$Z,nb,__,sa,R_)),O_=mt(([{data:e,defaultItemSize:t,firstItemIndex:r,fixedItemSize:n,gap:s,groupIndices:i,itemSize:a,sizeRanges:l,sizes:c,statefulTotalCount:u,totalCount:d,trackItemSizes:f},{initialItemFinalLocationReached:h,initialTopMostItemIndex:p,scrolledToInitialItem:m},y,b,v,{listState:x,topItemsIndexes:w,...k},{scrollToIndex:S},E,{topItemCount:N},{groupCounts:C},T])=>(_e(k.rangeChanged,T.scrollSeekRangeChanged),_e(oe(T.windowViewportRect,Ee(j=>j.visibleHeight)),y.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:r,fixedItemHeight:n,gap:s,groupCounts:C,initialItemFinalLocationReached:h,initialTopMostItemIndex:p,scrolledToInitialItem:m,sizeRanges:l,topItemCount:N,topItemsIndexes:w,totalCount:d,...v,groupIndices:i,itemSize:a,listState:x,scrollToIndex:S,statefulTotalCount:u,trackItemSizes:f,...k,...T,...y,sizes:c,...b}),At(Ms,Hu,qr,ZZ,qZ,so,Uu,tX,JZ,C_,rX));function nX(e,t){const r={},n={};let s=0;const i=e.length;for(;s<i;)n[e[s]]=1,s+=1;for(const a in t)Object.hasOwn(n,a)||(r[a]=t[a]);return r}const Ed=typeof document<"u"?te.useLayoutEffect:te.useEffect;function P_(e,t,r){const n=Object.keys(t.required||{}),s=Object.keys(t.optional||{}),i=Object.keys(t.methods||{}),a=Object.keys(t.events||{}),l=te.createContext({});function c(b,v){b.propsReady&&Ge(b.propsReady,!1);for(const x of n){const w=b[t.required[x]];Ge(w,v[x])}for(const x of s)if(x in v){const w=b[t.optional[x]];Ge(w,v[x])}b.propsReady&&Ge(b.propsReady,!0)}function u(b){return i.reduce((v,x)=>(v[x]=w=>{const k=b[t.methods[x]];Ge(k,w)},v),{})}function d(b){return a.reduce((v,x)=>(v[x]=vZ(b[t.events[x]]),v),{})}const f=te.forwardRef((b,v)=>{const{children:x,...w}=b,[k]=te.useState(()=>Ap(wZ(e),N=>{c(N,w)})),[S]=te.useState(kE(d,k));Ed(()=>{for(const N of a)N in w&&xt(S[N],w[N]);return()=>{Object.values(S).map(Qv)}},[w,S,k]),Ed(()=>{c(k,w)}),te.useImperativeHandle(v,wE(u(k)));const E=r;return o.jsx(l.Provider,{value:k,children:r?o.jsx(E,{...nX([...n,...s,...a],w),children:x}):x})}),h=b=>{const v=te.useContext(l);return te.useCallback(x=>{Ge(v[b],x)},[v,b])},p=b=>{const v=te.useContext(l)[b],x=te.useCallback(w=>xt(v,w),[v]);return te.useSyncExternalStore(x,()=>Kt(v),()=>Kt(v))},m=b=>{const v=te.useContext(l)[b],[x,w]=te.useState(kE(Kt,v));return Ed(()=>xt(v,k=>{k!==x&&w(wE(k))}),[v,x]),x},y=te.version.startsWith("18")?p:m;return{Component:f,useEmitter:(b,v)=>{const x=te.useContext(l)[b];Ed(()=>xt(x,v),[v,x])},useEmitterValue:y,usePublisher:h}}const L_=te.createContext(void 0),F_=te.createContext(void 0),B_=typeof document<"u"?te.useLayoutEffect:te.useEffect;function hg(e){return"self"in e}function sX(e){return"body"in e}function z_(e,t,r,n=Sl,s,i){const a=te.useRef(null),l=te.useRef(null),c=te.useRef(null),u=te.useCallback(h=>{let p,m,y;const b=h.target;if(sX(b)||hg(b)){const x=hg(b)?b:b.defaultView;y=i?x.scrollX:x.scrollY,p=i?x.document.documentElement.scrollWidth:x.document.documentElement.scrollHeight,m=i?x.innerWidth:x.innerHeight}else y=i?b.scrollLeft:b.scrollTop,p=i?b.scrollWidth:b.scrollHeight,m=i?b.offsetWidth:b.offsetHeight;const v=()=>{e({scrollHeight:p,scrollTop:Math.max(y,0),viewportHeight:m})};h.suppressFlushSync?v():mc.flushSync(v),l.current!==null&&(y===l.current||y<=0||y===p-m)&&(l.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t,i]);te.useEffect(()=>{const h=s||a.current;return n(s||a.current),u({suppressFlushSync:!0,target:h}),h.addEventListener("scroll",u,{passive:!0}),()=>{n(null),h.removeEventListener("scroll",u)}},[a,u,r,n,s]);function d(h){const p=a.current;if(!p||(i?"offsetWidth"in p&&p.offsetWidth===0:"offsetHeight"in p&&p.offsetHeight===0))return;const m=h.behavior==="smooth";let y,b,v;hg(p)?(b=Math.max(Qi(p.document.documentElement,i?"width":"height"),i?p.document.documentElement.scrollWidth:p.document.documentElement.scrollHeight),y=i?p.innerWidth:p.innerHeight,v=i?window.scrollX:window.scrollY):(b=p[i?"scrollWidth":"scrollHeight"],y=Qi(p,i?"width":"height"),v=p[i?"scrollLeft":"scrollTop"]);const x=b-y;if(h.top=Math.ceil(Math.max(Math.min(x,h.top),0)),T_(y,b)||h.top===v){e({scrollHeight:b,scrollTop:v,viewportHeight:y}),m&&t(!0);return}m?(l.current=h.top,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,l.current=null,t(!0)},1e3)):l.current=null,i&&(h={behavior:h.behavior,left:h.top}),p.scrollTo(h)}function f(h){i&&(h={behavior:h.behavior,left:h.top}),a.current.scrollBy(h)}return{scrollByCallback:f,scrollerRef:a,scrollToCallback:d}}const pg="-webkit-sticky",_E="sticky",sb=M_(()=>{if(typeof document>"u")return _E;const e=document.createElement("div");return e.style.position=pg,e.style.position===pg?pg:_E});function ib(e){return e}const iX=mt(()=>{const e=he(l=>`Item ${l}`),t=he(l=>`Group ${l}`),r=he({}),n=he(ib),s=he("div"),i=he(Sl),a=(l,c=null)=>Or(oe(r,Ee(u=>u[l]),jt()),c);return{components:r,computeItemKey:n,EmptyPlaceholder:a("EmptyPlaceholder"),FooterComponent:a("Footer"),GroupComponent:a("Group","div"),groupContent:t,HeaderComponent:a("Header"),HeaderFooterTag:s,ItemComponent:a("Item","div"),itemContent:e,ListComponent:a("List","div"),ScrollerComponent:a("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:a("ScrollSeekPlaceholder"),TopItemListComponent:a("TopItemList")}}),aX=mt(([e,t])=>({...e,...t}),At(O_,iX)),oX=({height:e})=>o.jsx("div",{style:{height:e}}),lX={overflowAnchor:"none",position:sb(),zIndex:1},U_={overflowAnchor:"none"},cX={...U_,display:"inline-block",height:"100%"},IE=te.memo(function({showTopList:e=!1}){const t=He("listState"),r=On("sizeRanges"),n=He("useWindowScroll"),s=He("customScrollParent"),i=On("windowScrollContainerState"),a=On("scrollContainerState"),l=s||n?i:a,c=He("itemContent"),u=He("context"),d=He("groupContent"),f=He("trackItemSizes"),h=He("itemSize"),p=He("log"),m=On("gap"),y=He("horizontalDirection"),{callbackRef:b}=EZ(r,h,f,e?Sl:l,p,m,s,y,He("skipAnimationFrameInResizeObserver")),[v,x]=te.useState(0);ab("deviation",D=>{v!==D&&x(D)});const w=He("EmptyPlaceholder"),k=He("ScrollSeekPlaceholder")||oX,S=He("ListComponent"),E=He("ItemComponent"),N=He("GroupComponent"),C=He("computeItemKey"),T=He("isSeeking"),j=He("groupIndices").length>0,I=He("alignToBottom"),H=He("initialItemFinalLocationReached"),L=e?{}:{boxSizing:"border-box",...y?{display:"inline-block",height:"100%",marginLeft:v!==0?v:I?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:v!==0?v:I?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...H?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&w?o.jsx(w,{...xr(w,u)}):o.jsx(S,{...xr(S,u),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:b,style:L,children:(e?t.topItems:t.items).map(D=>{const O=D.originalIndex,P=C(O+t.firstItemIndex,D.data,u);return T?g.createElement(k,{...xr(k,u),height:D.size,index:D.index,key:P,type:D.type||"item",...D.type==="group"?{}:{groupIndex:D.groupIndex}}):D.type==="group"?g.createElement(N,{...xr(N,u),"data-index":O,"data-item-index":D.index,"data-known-size":D.size,key:P,style:lX},d(D.index,u)):g.createElement(E,{...xr(E,u),...hX(E,D.data),"data-index":O,"data-item-group-index":D.groupIndex,"data-item-index":D.index,"data-known-size":D.size,key:P,style:y?cX:U_},j?c(D.index,D.groupIndex,D.data,u):c(D.index,D.data,u))})})}),uX={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},dX={outline:"none",overflowX:"auto",position:"relative"},_p=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),fX={position:sb(),top:0,width:"100%",zIndex:1};function xr(e,t){if(typeof e!="string")return{context:t}}function hX(e,t){return{item:typeof e=="string"?void 0:t}}const pX=te.memo(function(){const e=He("HeaderComponent"),t=On("headerHeight"),r=He("HeaderFooterTag"),n=no(te.useMemo(()=>i=>{t(Qi(i,"height"))},[t]),!0,He("skipAnimationFrameInResizeObserver")),s=He("context");return e?o.jsx(r,{ref:n,children:o.jsx(e,{...xr(e,s)})}):null}),mX=te.memo(function(){const e=He("FooterComponent"),t=On("footerHeight"),r=He("HeaderFooterTag"),n=no(te.useMemo(()=>i=>{t(Qi(i,"height"))},[t]),!0,He("skipAnimationFrameInResizeObserver")),s=He("context");return e?o.jsx(r,{ref:n,children:o.jsx(e,{...xr(e,s)})}):null});function H_({useEmitter:e,useEmitterValue:t,usePublisher:r}){return te.memo(function({children:n,style:s,...i}){const a=r("scrollContainerState"),l=t("ScrollerComponent"),c=r("smoothScrollTargetReached"),u=t("scrollerRef"),d=t("context"),f=t("horizontalDirection")||!1,{scrollByCallback:h,scrollerRef:p,scrollToCallback:m}=z_(a,c,l,u,void 0,f);return e("scrollTo",m),e("scrollBy",h),o.jsx(l,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:p,style:{...f?dX:uX,...s},tabIndex:0,...i,...xr(l,d),children:n})})}function V_({useEmitter:e,useEmitterValue:t,usePublisher:r}){return te.memo(function({children:n,style:s,...i}){const a=r("windowScrollContainerState"),l=t("ScrollerComponent"),c=r("smoothScrollTargetReached"),u=t("totalListHeight"),d=t("deviation"),f=t("customScrollParent"),h=t("context"),p=te.useRef(null),m=t("scrollerRef"),{scrollByCallback:y,scrollerRef:b,scrollToCallback:v}=z_(a,c,l,m,f);return B_(()=>{var x;return b.current=f||((x=p.current)==null?void 0:x.ownerDocument.defaultView),()=>{b.current=null}},[b,f]),e("windowScrollTo",v),e("scrollBy",y),o.jsx(l,{ref:p,"data-virtuoso-scroller":!0,style:{position:"relative",...s,...u!==0?{height:u+d}:{}},...i,...xr(l,h),children:n})})}const gX=({children:e})=>{const t=te.useContext(L_),r=On("viewportHeight"),n=On("fixedItemHeight"),s=He("alignToBottom"),i=He("horizontalDirection"),a=te.useMemo(()=>p_(r,c=>Qi(c,i?"width":"height")),[r,i]),l=no(a,!0,He("skipAnimationFrameInResizeObserver"));return te.useEffect(()=>{t&&(r(t.viewportHeight),n(t.itemHeight))},[t,r,n]),o.jsx("div",{"data-viewport-type":"element",ref:l,style:_p(s),children:e})},yX=({children:e})=>{const t=te.useContext(L_),r=On("windowViewportRect"),n=On("fixedItemHeight"),s=He("customScrollParent"),i=g_(r,s,He("skipAnimationFrameInResizeObserver")),a=He("alignToBottom");return te.useEffect(()=>{t&&(n(t.itemHeight),r({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,r,n]),o.jsx("div",{"data-viewport-type":"window",ref:i,style:_p(a),children:e})},xX=({children:e})=>{const t=He("TopItemListComponent")||"div",r=He("headerHeight"),n={...fX,marginTop:`${r}px`},s=He("context");return o.jsx(t,{style:n,...xr(t,s),children:e})},vX=te.memo(function(e){const t=He("useWindowScroll"),r=He("topItemsIndexes").length>0,n=He("customScrollParent"),s=He("context"),i=n||t?kX:wX,a=n||t?yX:gX;return o.jsxs(i,{...e,...xr(i,s),children:[r&&o.jsx(xX,{children:o.jsx(IE,{showTopList:!0})}),o.jsxs(a,{children:[o.jsx(pX,{}),o.jsx(IE,{}),o.jsx(mX,{})]})]})}),{Component:bX,useEmitter:ab,useEmitterValue:He,usePublisher:On}=P_(aX,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},vX),wX=H_({useEmitter:ab,useEmitterValue:He,usePublisher:On}),kX=V_({useEmitter:ab,useEmitterValue:He,usePublisher:On}),SX=bX,EX=mt(()=>{const e=he(u=>o.jsxs("td",{children:["Item $",u]})),t=he(null),r=he(u=>o.jsxs("td",{colSpan:1e3,children:["Group ",u]})),n=he(null),s=he(null),i=he({}),a=he(ib),l=he(Sl),c=(u,d=null)=>Or(oe(i,Ee(f=>f[u]),jt()),d);return{components:i,computeItemKey:a,context:t,EmptyPlaceholder:c("EmptyPlaceholder"),FillerRow:c("FillerRow"),fixedFooterContent:s,fixedHeaderContent:n,itemContent:e,groupContent:r,ScrollerComponent:c("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TableBodyComponent:c("TableBody","tbody"),TableComponent:c("Table","table"),TableFooterComponent:c("TableFoot","tfoot"),TableHeadComponent:c("TableHead","thead"),TableRowComponent:c("TableRow","tr"),GroupComponent:c("Group","tr")}});At(O_,EX);sb();const ME={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},NX={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:OE,floor:kh,max:Ac,min:mg,round:PE}=Math;function LE(e,t,r){return Array.from({length:t-e+1}).map((n,s)=>({data:r===null?null:r[s+e],index:s+e}))}function CX(e){return{...NX,items:e}}function Nd(e,t){return e&&e.width===t.width&&e.height===t.height}function jX(e,t){return e&&e.column===t.column&&e.row===t.row}const TX=mt(([{increaseViewportBy:e,listBoundary:t,overscan:r,visibleRange:n},{footerHeight:s,headerHeight:i,scrollBy:a,scrollContainerState:l,scrollTo:c,scrollTop:u,smoothScrollTargetReached:d,viewportHeight:f},h,p,{didMount:m,propsReady:y},{customScrollParent:b,useWindowScroll:v,windowScrollContainerState:x,windowScrollTo:w,windowViewportRect:k},S])=>{const E=he(0),N=he(0),C=he(ME),T=he({height:0,width:0}),j=he({height:0,width:0}),I=st(),H=st(),L=he(0),D=he(null),O=he({column:0,row:0}),P=st(),U=st(),z=he(!1),$=he(0),ne=he(!0),X=he(!1),fe=he(!1);xt(oe(m,Qe($),Be(([F,le])=>!!le)),()=>{Ge(ne,!1)}),xt(oe(ir(m,ne,j,T,$,X),Be(([F,le,ee,we,,ke])=>F&&!le&&ee.height!==0&&we.height!==0&&!ke)),([,,,,F])=>{Ge(X,!0),eb(1,()=>{Ge(I,F)}),ts(oe(u),()=>{Ge(t,[0,0]),Ge(ne,!0)})}),_e(oe(U,Be(F=>F!=null&&F.scrollTop>0),vs(0)),N),xt(oe(m,Qe(U),Be(([,F])=>F!=null)),([,F])=>{F&&(Ge(T,F.viewport),Ge(j,F.item),Ge(O,F.gap),F.scrollTop>0&&(Ge(z,!0),ts(oe(u,$a(1)),le=>{Ge(z,!1)}),Ge(c,{top:F.scrollTop})))}),_e(oe(T,Ee(({height:F})=>F)),f),_e(oe(ir(Le(T,Nd),Le(j,Nd),Le(O,(F,le)=>F&&F.column===le.column&&F.row===le.row),Le(u)),Ee(([F,le,ee,we])=>({gap:ee,item:le,scrollTop:we,viewport:F}))),P),_e(oe(ir(Le(E),n,Le(O,jX),Le(j,Nd),Le(T,Nd),Le(D),Le(N),Le(z),Le(ne),Le($)),Be(([,,,,,,,F])=>!F),Ee(([F,[le,ee],we,ke,Ie,Pe,We,,Ze,it])=>{const{column:Ue,row:Ne}=we,{height:ze,width:R}=ke,{width:Q}=Ie;if(We===0&&(F===0||Q===0))return ME;if(R===0){const ot=tb(it,F),Fr=ot+Math.max(We-1,0);return CX(LE(ot,Fr,Pe))}const _=W_(Q,R,Ue);let A,q;Ze?le===0&&ee===0&&We>0?(A=0,q=We-1):(A=_*kh((le+Ne)/(ze+Ne)),q=_*OE((ee+Ne)/(ze+Ne))-1,q=mg(F-1,Ac(q,_-1)),A=mg(q,Ac(0,A))):(A=0,q=-1);const me=LE(A,q,Pe),{bottom:ye,top:gt}=FE(Ie,we,ke,me),Ht=OE(F/_),qt=Ht*ze+(Ht-1)*Ne-ye;return{bottom:ye,itemHeight:ze,items:me,itemWidth:R,offsetBottom:qt,offsetTop:gt,top:gt}})),C),_e(oe(D,Be(F=>F!==null),Ee(F=>F.length)),E),_e(oe(ir(T,j,C,O),Be(([F,le,{items:ee}])=>ee.length>0&&le.height!==0&&F.height!==0),Ee(([F,le,{items:ee},we])=>{const{bottom:ke,top:Ie}=FE(F,we,le,ee);return[Ie,ke]}),jt(hu)),t);const de=he(!1);_e(oe(u,Qe(de),Ee(([F,le])=>le||F!==0)),de);const ge=vn(oe(ir(C,E),Be(([{items:F}])=>F.length>0),Qe(de),Be(([[F,le],ee])=>{const we=F.items[F.items.length-1].index===le-1;return(ee||F.bottom>0&&F.itemHeight>0&&F.offsetBottom===0&&F.items.length===le)&&we}),Ee(([[,F]])=>F-1),jt())),se=vn(oe(Le(C),Be(({items:F})=>F.length>0&&F[0].index===0),vs(0),jt())),M=vn(oe(Le(C),Qe(z),Be(([{items:F},le])=>F.length>0&&!le),Ee(([{items:F}])=>({endIndex:F[F.length-1].index,startIndex:F[0].index})),jt(k_),Ys(0)));_e(M,p.scrollSeekRangeChanged),_e(oe(I,Qe(T,j,E,O),Ee(([F,le,ee,we,ke])=>{const Ie=j_(F),{align:Pe,behavior:We,offset:Ze}=Ie;let it=Ie.index;it==="LAST"&&(it=we-1),it=Ac(0,it,mg(we-1,it));let Ue=jy(le,ke,ee,it);return Pe==="end"?Ue=PE(Ue-le.height+ee.height):Pe==="center"&&(Ue=PE(Ue-le.height/2+ee.height/2)),Ze&&(Ue+=Ze),{behavior:We,top:Ue}})),c);const re=Or(oe(C,Ee(F=>F.offsetBottom+F.bottom)),0);return _e(oe(k,Ee(F=>({height:F.visibleHeight,width:F.visibleWidth}))),T),{customScrollParent:b,data:D,deviation:L,footerHeight:s,gap:O,headerHeight:i,increaseViewportBy:e,initialItemCount:N,itemDimensions:j,overscan:r,restoreStateFrom:U,scrollBy:a,scrollContainerState:l,scrollHeight:H,scrollTo:c,scrollToIndex:I,scrollTop:u,smoothScrollTargetReached:d,totalCount:E,useWindowScroll:v,viewportDimensions:T,windowScrollContainerState:x,windowScrollTo:w,windowViewportRect:k,...p,gridState:C,horizontalDirection:fe,initialTopMostItemIndex:$,totalListHeight:re,...h,endReached:ge,propsReady:y,rangeChanged:M,startReached:se,stateChanged:P,stateRestoreInProgress:z,...S}},At(rb,qr,Vu,I_,ia,nb,sa));function W_(e,t,r){return Ac(1,kh((e+r)/(kh(t)+r)))}function FE(e,t,r,n){const{height:s}=r;if(s===void 0||n.length===0)return{bottom:0,top:0};const i=jy(e,t,r,n[0].index);return{bottom:jy(e,t,r,n[n.length-1].index)+s,top:i}}function jy(e,t,r,n){const s=W_(e.width,r.width,t.column),i=kh(n/s),a=i*r.height+Ac(0,i-1)*t.row;return a>0?a+t.row:a}const AX=mt(()=>{const e=he(f=>`Item ${f}`),t=he({}),r=he(null),n=he("virtuoso-grid-item"),s=he("virtuoso-grid-list"),i=he(ib),a=he("div"),l=he(Sl),c=(f,h=null)=>Or(oe(t,Ee(p=>p[f]),jt()),h),u=he(!1),d=he(!1);return _e(Le(d),u),{components:t,computeItemKey:i,context:r,FooterComponent:c("Footer"),HeaderComponent:c("Header"),headerFooterTag:a,itemClassName:n,ItemComponent:c("Item","div"),itemContent:e,listClassName:s,ListComponent:c("List","div"),readyStateChanged:u,reportReadyState:d,ScrollerComponent:c("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder","div")}}),DX=mt(([e,t])=>({...e,...t}),At(TX,AX)),RX=te.memo(function(){const e=Rt("gridState"),t=Rt("listClassName"),r=Rt("itemClassName"),n=Rt("itemContent"),s=Rt("computeItemKey"),i=Rt("isSeeking"),a=Pn("scrollHeight"),l=Rt("ItemComponent"),c=Rt("ListComponent"),u=Rt("ScrollSeekPlaceholder"),d=Rt("context"),f=Pn("itemDimensions"),h=Pn("gap"),p=Rt("log"),m=Rt("stateRestoreInProgress"),y=Pn("reportReadyState"),b=no(te.useMemo(()=>v=>{const x=v.parentElement.parentElement.scrollHeight;a(x);const w=v.firstChild;if(w){const{height:k,width:S}=w.getBoundingClientRect();f({height:k,width:S})}h({column:BE("column-gap",getComputedStyle(v).columnGap,p),row:BE("row-gap",getComputedStyle(v).rowGap,p)})},[a,f,h,p]),!0,!1);return B_(()=>{e.itemHeight>0&&e.itemWidth>0&&y(!0)},[e]),m?null:o.jsx(c,{className:t,ref:b,...xr(c,d),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(v=>{const x=s(v.index,v.data,d);return i?o.jsx(u,{...xr(u,d),height:e.itemHeight,index:v.index,width:e.itemWidth},x):g.createElement(l,{...xr(l,d),className:r,"data-index":v.index,key:x},n(v.index,v.data,d))})})}),_X=te.memo(function(){const e=Rt("HeaderComponent"),t=Pn("headerHeight"),r=Rt("headerFooterTag"),n=no(te.useMemo(()=>i=>{t(Qi(i,"height"))},[t]),!0,!1),s=Rt("context");return e?o.jsx(r,{ref:n,children:o.jsx(e,{...xr(e,s)})}):null}),IX=te.memo(function(){const e=Rt("FooterComponent"),t=Pn("footerHeight"),r=Rt("headerFooterTag"),n=no(te.useMemo(()=>i=>{t(Qi(i,"height"))},[t]),!0,!1),s=Rt("context");return e?o.jsx(r,{ref:n,children:o.jsx(e,{...xr(e,s)})}):null}),MX=({children:e})=>{const t=te.useContext(F_),r=Pn("itemDimensions"),n=Pn("viewportDimensions"),s=no(te.useMemo(()=>i=>{n(i.getBoundingClientRect())},[n]),!0,!1);return te.useEffect(()=>{t&&(n({height:t.viewportHeight,width:t.viewportWidth}),r({height:t.itemHeight,width:t.itemWidth}))},[t,n,r]),o.jsx("div",{ref:s,style:_p(!1),children:e})},OX=({children:e})=>{const t=te.useContext(F_),r=Pn("windowViewportRect"),n=Pn("itemDimensions"),s=Rt("customScrollParent"),i=g_(r,s,!1);return te.useEffect(()=>{t&&(n({height:t.itemHeight,width:t.itemWidth}),r({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,r,n]),o.jsx("div",{ref:i,style:_p(!1),children:e})},PX=te.memo(function({...e}){const t=Rt("useWindowScroll"),r=Rt("customScrollParent"),n=r||t?FX:LX,s=r||t?OX:MX,i=Rt("context");return o.jsx(n,{...e,...xr(n,i),children:o.jsxs(s,{children:[o.jsx(_X,{}),o.jsx(RX,{}),o.jsx(IX,{})]})})}),{useEmitter:$_,useEmitterValue:Rt,usePublisher:Pn}=P_(DX,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},PX),LX=H_({useEmitter:$_,useEmitterValue:Rt,usePublisher:Pn}),FX=V_({useEmitter:$_,useEmitterValue:Rt,usePublisher:Pn});function BE(e,t,r){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&r(`${e} was not resolved to pixel value correctly`,t,ln.WARN),t==="normal"?0:parseInt(t??"0",10)}const BX=te.lazy(()=>wl(()=>import("./NewEditBudgetModal-QRLu0n5K.js"),[])),zX=te.lazy(()=>wl(()=>import("./NewEditSavingsGoalModal-CyUy5Gld.js"),[])),UX=te.lazy(()=>wl(()=>import("./NewTransactionModal-DSs_SZkq.js"),[])),HX=te.lazy(()=>wl(()=>import("./FilterTransactionsModal-CZoT20lV.js"),[])),VX=te.lazy(()=>wl(()=>import("./ConfirmationModal-ho2vtY2j.js"),[])),WX=te.lazy(()=>wl(()=>import("./EditAccountNameModal-Df0F8HI8.js"),[])),zE={housing:"bg-blue-100 text-blue-800",utilities:"bg-yellow-100 text-yellow-800",groceries:"bg-green-100 text-green-800",transportation:"bg-indigo-100 text-indigo-800",healthcare:"bg-red-100 text-red-800",education:"bg-purple-100 text-purple-800",entertainment:"bg-pink-100 text-pink-800",savings:"bg-teal-100 text-teal-800",other:"bg-gray-100 text-gray-800"},Nr=({className:e})=>o.jsx("div",{className:`animate-pulse bg-gray-200 dark:bg-gray-700 rounded-md ${e}`}),UE=()=>{const{user:e}=Ot(),{family:t}=Lr(),r=(t==null?void 0:t.FamilyID)??null,[n,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState([]),[u,d]=g.useState([]),[f,h]=g.useState([]),p=tZ(f,300),[m,y]=g.useState(!0),[b,v]=g.useState(!0),[x,w]=g.useState(!0),[k,S]=g.useState(!0),[E,N]=g.useState(null),C=g.useMemo(()=>mr("budget-page"),[]),[T,j]=g.useState("my-finances"),[I,H]=g.useState(!1),[L,D]=g.useState(!1),[O,P]=g.useState(!1),[U,z]=g.useState(!1),[$,ne]=g.useState(null),[X,fe]=g.useState(null),[de,ge]=g.useState(null),[se,M]=g.useState(null),[re,F]=g.useState(new Date),le=g.useRef(""),[ee,we]=g.useState(null),ke=g.useCallback(async ae=>{const[ce,qe]=await Promise.all([rZ(ae.toString()),aZ(ae.toString())]);return{budgetsData:ce,savingsGoalsData:qe}},[]),Ie=g.useCallback(async()=>{if(!(T!=="family-finances"||!r))try{const{budgetsData:ae,savingsGoalsData:ce}=await ke(r);s(ae),a(ce),N(null)}catch(ae){N(ae instanceof Error?ae.message:"Failed to refresh family financial data")}},[T,r,ke]);g.useEffect(()=>{if(T!=="family-finances"){s([]),a([]),w(!1),S(!1);return}if(!r){s([]),a([]),w(!1),S(!1);return}let ae=!1;return(async()=>{w(!0),S(!0);try{const{budgetsData:qe,savingsGoalsData:Xe}=await ke(r);if(ae)return;s(qe),a(Xe),N(null)}catch(qe){if(ae)return;N(qe instanceof Error?qe.message:"Failed to load family financial data")}finally{if(ae)return;w(!1),S(!1)}})(),()=>{ae=!0}},[T,r,ke]);const Pe=g.useCallback(async()=>{if(T==="family-finances"&&!r){s([]),a([]),w(!1),S(!1),v(!1);return}if(p.length===0){c([]),v(!1);return}const ae=`${T}:${r??"personal"}:${re.toISOString()}:${p.slice().sort().join(",")}`;if(ae===le.current)return;le.current=ae,v(!0),N(null);const ce=new Date(re.getFullYear(),re.getMonth(),1),qe=new Date(re.getFullYear(),re.getMonth()+1,0);try{const Xe=await uZ(p,{startDate:ce,endDate:qe});c(Xe)}catch(Xe){N(Xe instanceof Error?Xe.message:"An unknown error occurred"),v(!1);return}v(!1)},[r,p,T,re]);g.useEffect(()=>{Pe()},[Pe]),g.useEffect(()=>{let ae=!1;const ce=T==="family-finances"?"family":"personal";if(ce==="family"&&!r){we(null);return}return(async()=>{try{we(null);const Xe={scope:ce};ce==="family"&&r&&(Xe.familyId=r);const Kr=await K.post("/plaid/create_link_token",Xe);if(ae)return;we(Kr.data.link_token)}catch(Xe){if(ae)return;we(null),C.error("Failed to create link token",Xe)}})(),()=>{ae=!0}},[T,r,C]),g.useEffect(()=>{let ae=!1;const ce=async()=>{y(!0);try{if(T==="my-finances"){const qe=await vE();if(ae)return;d(qe),h(qe.map(Xe=>Xe.id))}else if(r){const qe=await vE(r.toString());if(ae)return;d(qe),h(qe.map(Xe=>Xe.id))}else d([]),h([])}catch(qe){ae||N(qe instanceof Error?qe.message:"Failed to load accounts")}finally{ae||y(!1)}};return le.current="",ce(),()=>{ae=!0}},[T,r]);const We=g.useMemo(()=>ee?{token:ee,onSuccess:async ae=>{const ce=T==="family-finances"?"family":"personal",qe={public_token:ae,scope:ce};ce==="family"&&r&&(qe.familyId=r),await K.post("/plaid/exchange_public_token",qe),le.current="",Pe()},onExit:(ae,ce)=>{C.log("Plaid Link exited:",ae,ce)}}:null,[ee,T,r,C,Pe]),{open:Ze,ready:it}=eZ(We??{token:"",onSuccess:()=>{},onExit:()=>{}}),Ue=T==="family-finances"?"Link Family Account":"Link Personal Account",Ne=!it||!ee||T==="family-finances"&&!r,ze=g.useCallback(()=>{Ne||Ze()},[Ne,Ze]),R=ae=>{ae!==T&&(j(ae),le.current="")},Q=ae=>{h(ce=>ce.includes(ae)?ce.filter(qe=>qe!==ae):[...ce,ae])},_=g.useCallback(()=>{F(ae=>new Date(ae.getFullYear(),ae.getMonth()-1,1)),le.current=""},[le]),A=g.useCallback(()=>{F(ae=>new Date(ae.getFullYear(),ae.getMonth()+1,1)),le.current=""},[le]),q=async ae=>{if(!r||!e)return;const ce={...ae,familyId:r.toString(),period:"monthly",spent:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};$?await sZ($.id,ce):await nZ(ce),await Ie(),le.current="",await Pe(),H(!1),ne(null)},me=async ae=>{await iZ(ae),await Ie(),le.current="",await Pe()},ye=async ae=>{if(!r||!e)return;const ce={...ae,familyId:r.toString(),category:"savings",CreatedByUserID:e.id};X?await lZ(X.id,ce):await oZ(ce),await Ie(),le.current="",await Pe(),D(!1),fe(null)},gt=async ae=>{await cZ(ae),await Ie(),le.current="",await Pe()},Ht=async()=>{de&&(await fZ(de),le.current="",await Pe(),ge(null))},qt=async ae=>{se&&(await hZ(se.id,ae),le.current="",await Pe(),M(null))},ot=async ae=>{!r||!e||(await dZ({...ae,familyId:r.toString(),createdBy:e.id}),le.current="",await Pe(),P(!1))},{totalSpent:Fr,byBudget:ui}=g.useMemo(()=>{let ae=0;const ce=new Map,qe=new Map;for(const Xe of n)qe.set(Xe.category,Xe.id);for(const Xe of l)if(ae+=Xe.amount,Xe.category){const Kr=qe.get(Xe.category);Kr&&ce.set(Kr,(ce.get(Kr)??0)+Xe.amount)}return{totalSpent:ae,byBudget:ce}},[l,n]),Vt=g.useMemo(()=>n.reduce((ae,ce)=>ae+ce.amount,0),[n]),tr=g.useMemo(()=>i.reduce((ae,ce)=>ae+ce.currentAmount,0),[i]),un=Vt-Fr,cs=Vt>0?Fr/Vt*100:0;return E?o.jsxs("div",{className:"p-4 sm:p-6 text-red-500",children:["Error: ",E]}):o.jsxs("div",{id:"budget-overview",className:"p-4 sm:p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Finances"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:_,className:"p-2 rounded-full hover:bg-gray-100",children:o.jsx(tp,{size:20})}),o.jsx("span",{className:"font-semibold whitespace-nowrap",children:re.toLocaleString("default",{month:"long",year:"numeric"})}),o.jsx("button",{onClick:A,className:"p-2 rounded-full hover:bg-gray-100",children:o.jsx(Wx,{size:20})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2",children:[o.jsx("button",{onClick:()=>P(!0),className:"w-full sm:w-auto px-4 py-2 bg-secondary-500 text-white rounded-lg",children:"Add Transaction"}),o.jsx("button",{onClick:ze,disabled:Ne,className:"w-full sm:w-auto px-4 py-2 bg-primary-500 text-white rounded-lg disabled:bg-gray-300",children:Ue})]})]}),o.jsx("div",{className:"border-b border-gray-200",children:o.jsxs("nav",{className:"-mb-px flex overflow-x-auto scrollbar-thin gap-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>R("my-finances"),className:`${T==="my-finances"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"My Finances"}),o.jsx("button",{onClick:()=>R("family-finances"),className:`${T==="family-finances"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Family Finances"})]})}),T==="my-finances"?o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl shadow-soft p-6",children:m?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Nr,{className:"h-8 w-full"}),o.jsx(Nr,{className:"h-8 w-full"}),o.jsx(Nr,{className:"h-8 w-full"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-[1fr,auto,auto] gap-4 items-center mb-2 font-semibold",children:[o.jsx("div",{children:"Account"}),o.jsx("div",{className:"text-right",children:"Balance"}),o.jsx("div",{})]}),u.map(ae=>o.jsxs("div",{className:"grid grid-cols-[1fr,auto,auto] gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:ae.id,checked:f.includes(ae.id),onChange:()=>Q(ae.id)}),o.jsxs("label",{htmlFor:ae.id,children:[ae.customName||ae.name," (",ae.mask,")"]})]}),o.jsxs("div",{className:"text-right",children:["$",(ae.balance||0).toLocaleString()]}),o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>M(ae),className:"p-2 rounded-full hover:bg-gray-100 text-gray-500",children:o.jsx(np,{size:16})}),o.jsx("button",{onClick:()=>ge(ae.id),className:"p-2 rounded-full hover:bg-gray-100 text-red-500",children:o.jsx(ei,{size:16})})]})]},ae.id))]})}),o.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl shadow-soft p-6",children:b?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Nr,{className:"h-8 w-full"}),o.jsx(Nr,{className:"h-8 w-full"}),o.jsx(Nr,{className:"h-8 w-full"}),o.jsx(Nr,{className:"h-8 w-full"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-bold",children:"Recent Transactions"}),o.jsx("button",{onClick:()=>z(!0),className:"p-2 rounded-full hover:bg-gray-100",children:o.jsx(v2,{size:18})})]}),o.jsx("div",{style:{height:400},children:o.jsx(SX,{data:l,components:{Table:({style:ae,...ce})=>o.jsx("table",{...ce,style:{...ae,width:"100%"},className:"w-full"}),TableHead:()=>o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left py-2",children:"Description"}),o.jsx("th",{className:"text-left py-2",children:"Category"}),o.jsx("th",{className:"text-left py-2",children:"Date"}),o.jsx("th",{className:"text-right py-2",children:"Amount"})]})})},itemContent:(ae,ce)=>{const qe=n.find(Os=>Os.category===ce.category),Xe=qe&&qe.category?qe.category.toLowerCase():"other",Kr=zE[Xe]||zE.other;return o.jsxs("tr",{children:[o.jsxs("td",{className:"py-2",children:[ce.description,ce.recurring&&o.jsxs("span",{className:"ml-2 text-xs bg-gray-200 text-gray-800 px-2 py-1 rounded-full",children:["Recurring  ",ce.recurringPeriod]})]}),o.jsx("td",{className:"py-2",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Kr}`,children:Xe})}),o.jsx("td",{className:"py-2",children:ce.date?new Date(ce.date).toLocaleDateString():""}),o.jsxs("td",{className:"text-right py-2",children:["$",(ce.amount||0).toLocaleString()]})]},ce.id)}})})]})})]}):o.jsxs("div",{className:"space-y-6",children:[x||b||k?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(Nr,{className:"h-24"}),o.jsx(Nr,{className:"h-24"}),o.jsx(Nr,{className:"h-24"}),o.jsx(Nr,{className:"h-24"})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-soft",children:[o.jsx("h4",{className:"text-gray-500",children:"Total Budget"}),o.jsxs("p",{className:"text-2xl font-bold",children:["$",(Vt||0).toLocaleString()]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-soft",children:[o.jsx("h4",{className:"text-gray-500",children:"Total Spent"}),o.jsxs("p",{className:"text-2xl font-bold",children:["$",(Fr||0).toLocaleString()]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-soft",children:[o.jsx("h4",{className:"text-gray-500",children:"Remaining"}),o.jsxs("p",{className:"text-2xl font-bold",children:["$",(un||0).toLocaleString()]}),o.jsxs("p",{className:"text-sm text-gray-400",children:[cs.toFixed(1),"% spent"]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-soft",children:[o.jsx("h4",{className:"text-gray-500",children:"Total Savings"}),o.jsxs("p",{className:"text-2xl font-bold",children:["$",(tr||0).toLocaleString()]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-soft p-6",children:x?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Nr,{className:"h-16 w-full"}),o.jsx(Nr,{className:"h-16 w-full"}),o.jsx(Nr,{className:"h-16 w-full"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-bold",children:"Finance Categories"}),o.jsx("button",{onClick:()=>{ne(null),H(!0)},className:"p-2 rounded-full bg-primary-500 text-white",children:o.jsx(Jt,{size:18})})]}),n.map(ae=>{const ce=ui.get(ae.id)??0,qe=ae.amount>0?ce/ae.amount*100:0,Xe=qe>90?"bg-red-500":"bg-primary-500";return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{children:ae.category}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{children:["$",(ce||0).toLocaleString()," of $",(ae.amount||0).toLocaleString()]}),o.jsx(bE,{onEdit:()=>{ne(ae),H(!0)},onDelete:()=>me(ae.id)})]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:o.jsx("div",{className:`${Xe} h-2.5 rounded-full`,style:{width:`${qe}%`}})})]},ae.id)})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-soft p-6",children:k?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Nr,{className:"h-16 w-full"}),o.jsx(Nr,{className:"h-16 w-full"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-bold",children:"Savings Goals"}),o.jsx("button",{onClick:()=>{fe(null),D(!0)},className:"p-2 rounded-full bg-primary-500 text-white",children:o.jsx(Jt,{size:18})})]}),i.map(ae=>{const ce=ae.targetAmount>0?ae.currentAmount/ae.targetAmount*100:0;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{children:ae.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{children:["$",(ae.currentAmount||0).toLocaleString()," of $",(ae.targetAmount||0).toLocaleString()]}),o.jsx(bE,{onEdit:()=>{fe(ae),D(!0)},onDelete:()=>gt(ae.id)})]})]}),ae.deadline&&o.jsxs("p",{className:"text-sm text-gray-400",children:["Due ",new Date(ae.deadline).toLocaleDateString()]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:o.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${ce}%`}})})]},ae.id)})]})})]})]}),o.jsxs(g.Suspense,{fallback:o.jsx("div",{children:"Loading..."}),children:[o.jsx(BX,{isOpen:I,onClose:()=>H(!1),onSave:q,editingBudget:$}),o.jsx(zX,{isOpen:L,onClose:()=>D(!1),onSave:ye,editingGoal:X}),o.jsx(UX,{isOpen:O,onClose:()=>P(!1),onSave:ot,budgets:n}),o.jsx(HX,{isOpen:U,onClose:()=>z(!1)}),o.jsx(VX,{isOpen:!!de,onClose:()=>ge(null),onConfirm:Ht,title:"Delete Account",message:"Are you sure you want to delete this account? All associated transactions will also be deleted."}),o.jsx(WX,{isOpen:!!se,onClose:()=>M(null),onSave:qt,account:se})]})]})},$X=({isOpen:e,onClose:t,onConfirm:r,roomTemplates:n})=>{const[s,i]=g.useState(""),[a,l]=g.useState(null);if(g.useEffect(()=>{var u;e&&(i(""),l(((u=n[0])==null?void 0:u.id)??null))},[e,n]),!e)return null;const c=()=>{s&&a!==null&&r(s.trim(),a)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create New Room"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"roomName",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Room Name"}),o.jsx("input",{type:"text",id:"roomName",value:s,onChange:u=>i(u.target.value),className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Living Room, John's Bedroom"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"roomTemplate",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Based on Template"}),o.jsxs("select",{id:"roomTemplate",value:a??"",onChange:u=>l(u.target.value?parseInt(u.target.value,10):null),className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!n.length,children:[o.jsx("option",{value:"",disabled:!0,children:n.length?"Select a template":"No templates available"}),n.map(u=>o.jsx("option",{value:u.id,children:u.name},u.id))]}),!n.length&&o.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-300",children:"No room templates available. Please contact support."})]})]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:t,className:"text-neutral-600 dark:text-neutral-300",children:"Cancel"}),o.jsx("button",{onClick:c,disabled:!s.trim()||a===null,className:"bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed",children:"Create Room"})]})]})})},YX=({isOpen:e,initialName:t,onClose:r,onSave:n})=>{const[s,i]=g.useState(t);if(g.useEffect(()=>{e&&i(t)},[t,e]),!e)return null;const a=l=>{l.preventDefault(),s.trim()&&n(s.trim())};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:o.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-lg dark:bg-neutral-800",children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:"Rename Room"}),o.jsx("p",{className:"mt-1 text-sm text-neutral-500 dark:text-neutral-400",children:"Update how this room appears across your household."}),o.jsxs("form",{onSubmit:a,className:"mt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"roomName",className:"mb-1 block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Room name"}),o.jsx("input",{id:"roomName",type:"text",value:s,onChange:l=>i(l.target.value),className:"w-full rounded-md border border-neutral-300 bg-neutral-100 px-4 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-700 dark:text-white",placeholder:"e.g., Upstairs Loft"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{type:"submit",className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white hover:bg-primary-700",children:"Save Changes"})]})]})]})})},GX=async()=>(await K.get("/relationships")).data,qX=({isOpen:e,onClose:t,onInvite:r,relationships:n,initialEmail:s,initialRelationshipId:i,inviteeName:a})=>{var f;const[l,c]=g.useState(s??""),[u,d]=g.useState(i??((f=n[0])==null?void 0:f.RelationshipID)??0);return g.useEffect(()=>{var h;e&&(c(s??""),d(i??((h=n[0])==null?void 0:h.RelationshipID)??0))},[e,s,i,n]),e?o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-lg my-8",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Invite Family Member"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[a&&o.jsxs("div",{className:"rounded-xl bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-200 px-3 py-2 text-sm",children:["Replace the placeholder for ",o.jsx("strong",{children:a})," by sending them an invitation."]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Email Address"}),o.jsx("input",{type:"email",value:l,onChange:h=>c(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Enter email address"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Role"}),o.jsx("select",{value:u,onChange:h=>d(parseInt(h.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:n.map(h=>o.jsx("option",{value:h.RelationshipID,children:h.RelationshipName},h.RelationshipID))})]})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:()=>r(l,u),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Send Invitation"})]})]})}):null},KX=({isOpen:e,onClose:t,onSave:r,onLeaveFamily:n,onCreateNewFamily:s,family:i})=>{const[a,l]=g.useState(""),[c,u]=g.useState(""),[d,f]=g.useState("points");return g.useEffect(()=>{i&&(l(i.FamilyName),u(i.FamilyMantra||""),f(i.rewardMode||"points"))},[i]),e?o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-lg my-8",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Family Settings"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Family Name"}),o.jsx("input",{type:"text",value:a,onChange:h=>l(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Reward System"}),o.jsxs("select",{value:d,onChange:h=>f(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:[o.jsx("option",{value:"points",children:"Points"}),o.jsx("option",{value:"screenTime",children:"Screen Time"}),o.jsx("option",{value:"currency",children:"Currency"}),o.jsx("option",{value:"hybrid",children:"Hybrid"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Family Mantra"}),o.jsx("textarea",{rows:3,value:c,onChange:h=>u(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border-t border-neutral-200 dark:border-neutral-700 space-y-3 sm:space-y-0 sm:space-x-3",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[o.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-xl",children:"Leave Family"}),o.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-xl",children:"Create Another Household"})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:()=>r(a,c,void 0,d),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Save Changes"})]})]})]})}):null},QX=({isOpen:e,onClose:t,onView:r,onEdit:n,onRemove:s})=>e?o.jsx(vt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-12 right-0 bg-white dark:bg-neutral-700 rounded-xl shadow-lg w-48 z-10",children:o.jsxs("ul",{className:"py-2",children:[o.jsxs("li",{onClick:()=>{r(),t()},className:"flex items-center px-4 py-2 text-sm text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-600 cursor-pointer",children:[o.jsx(E2,{size:16,className:"mr-2"}),"View Profile"]}),o.jsxs("li",{onClick:n,className:"flex items-center px-4 py-2 text-sm text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-600 cursor-pointer",children:[o.jsx(np,{size:16,className:"mr-2"}),"Edit Profile"]}),o.jsxs("li",{onClick:s,className:"flex items-center px-4 py-2 text-sm text-error-600 hover:bg-error-50 dark:hover:bg-error-900/30 cursor-pointer",children:[o.jsx(ei,{size:16,className:"mr-2"}),"Remove from Family"]})]})}):null,ZX=({isOpen:e,onClose:t,onSave:r,user:n,relationships:s,availablePermissions:i=[],currentPermissions:a=[]})=>{const[l,c]=g.useState(n.FirstName),[u,d]=g.useState(n.LastName),[f,h]=g.useState(n.Email),[p,m]=g.useState(n.BirthDate?new Date(n.BirthDate).toISOString().split("T")[0]:""),[y,b]=g.useState(n.RelationshipID??null),[v,x]=g.useState(""),[w,k]=g.useState(a);return g.useEffect(()=>{c(n.FirstName),d(n.LastName),h(n.Email),m(n.BirthDate?new Date(n.BirthDate).toISOString().split("T")[0]:""),b(n.RelationshipID??null),k(a)},[n,a]),e?o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-lg my-8",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Edit Profile"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"First Name"}),o.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Last Name"}),o.jsx("input",{type:"text",value:u,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Email Address"}),o.jsx("input",{type:"email",value:f,onChange:S=>h(S.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Phone Number"}),o.jsx("input",{type:"tel",value:v,onChange:S=>x(S.target.value),placeholder:"Optional",className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Birth Date"}),o.jsx("input",{type:"date",value:p,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Role"}),o.jsxs("select",{value:y??"",onChange:S=>{const E=S.target.value;b(E?parseInt(E,10):null)},className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",children:[o.jsx("option",{value:"",children:"Select role"}),s.map(S=>o.jsx("option",{value:S.RelationshipID,children:S.RelationshipName},S.RelationshipID))]})]}),i.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Permissions"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:i.map(S=>{const E=w.includes(S.id);return o.jsxs("label",{className:"flex items-start gap-3 rounded-xl border border-neutral-200 p-3 text-sm text-neutral-700 dark:border-neutral-700 dark:text-neutral-200",children:[o.jsx("input",{type:"checkbox",className:"mt-1",checked:E,onChange:()=>{k(N=>N.includes(S.id)?N.filter(C=>C!==S.id):[...N,S.id])}}),o.jsxs("span",{children:[o.jsx("span",{className:"font-medium",children:S.label}),S.description&&o.jsx("span",{className:"block text-xs text-neutral-500 dark:text-neutral-400",children:S.description})]})]},S.id)})})]})]})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:()=>r({userData:{FirstName:l,LastName:u,Email:f,BirthDate:p||null},relationshipId:y,permissions:w}),className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Save Changes"})]})]})}):null},XX=async(e,t)=>{const{data:r}=await K.get(`/family/${e}/members/${t}/profile`);return r},JX=async(e,t,r)=>{const{data:n}=await K.put(`/family/${e}/members/${t}/profile`,r);return n},eJ=async(e,t)=>{const{data:r}=await K.post(`/family/${e}/members/${t}/profile/share`);return r},tJ=async(e,t)=>{await K.post(`/family/${e}/members/${t}/profile/share/revoke`)},rJ=async e=>{const{data:t}=await K.get(`/profiles/shared/${e}`);return t},$l=e=>e&&e.length?e.join(", "):"",Yl=e=>e.split(",").map(t=>t.trim()).filter(t=>t.length>0),nJ=e=>Object.entries(e).map(([t,r])=>t+": "+String(r)),sJ=e=>{const t={};return e.split(`
`).forEach(r=>{const n=r.trim();if(!n)return;const s=n.indexOf(":");if(s===-1)t[n]="";else{const i=n.slice(0,s).trim(),a=n.slice(s+1).trim();i&&(t[i]=a)}}),t},iJ=({member:e,relationshipName:t,isOpen:r,onClose:n,familyId:s,currentUserId:i})=>{const[a,l]=g.useState(null),[c,u]=g.useState(!1),[d,f]=g.useState(null),[h,p]=g.useState(null),[m,y]=g.useState(!1),[b,v]=g.useState(""),[x,w]=g.useState(""),[k,S]=g.useState(""),[E,N]=g.useState(""),[C,T]=g.useState(""),[j,I]=g.useState(""),[H,L]=g.useState(""),[D,O]=g.useState(""),[P,U]=g.useState("FAMILY"),z=e.FirstName||"",$=e.LastName||"",ne=(z+" "+$).trim()||e.Email||"Household Member",X=e.CreatedDate?new Date(e.CreatedDate).toLocaleDateString():void 0,fe=t?t.charAt(0).toUpperCase()+t.slice(1):"Member",de=ee=>{v(ee?nJ(ee.clothingSizes||{}).join(`
`):""),w(ee?$l(ee.favoriteColors||[]):""),S(ee?$l(ee.favoriteFoods||[]):""),N(ee?$l(ee.interests||[]):""),T(ee?$l(ee.allergies||[]):""),I(ee?$l(ee.favoriteBrands||[]):""),L(ee&&ee.notes||""),O(ee&&ee.wishlistSummary||""),U(ee?ee.Visibility:"FAMILY")};g.useEffect(()=>{if(!r||!s)return;(async()=>{try{u(!0),f(null);const we=await XX(s,e.UserID);l(we.profile),de(we.profile),p(null)}catch(we){f(we instanceof Error?we.message:"Unable to load care details")}finally{u(!1)}})()},[s,r,e.UserID]),g.useEffect(()=>{r||y(!1)},[r]);const ge=async()=>{if(s)try{const ee=await eJ(s,e.UserID);p(ee),await navigator.clipboard.writeText(ee.shareUrl),ie.success("Share link copied to clipboard")}catch(ee){ie.error(ee instanceof Error?ee.message:"Unable to generate share link")}},se=async()=>{if(s)try{await tJ(s,e.UserID),p(null),ie.info("Share link revoked")}catch(ee){ie.error(ee instanceof Error?ee.message:"Unable to revoke share link")}},M=async()=>{if(s)try{const ee={clothingSizes:b.trim()?sJ(b):{},favoriteColors:Yl(x),favoriteFoods:Yl(k),interests:Yl(E),allergies:Yl(C),favoriteBrands:Yl(j),notes:H.trim()||null,wishlistSummary:D.trim()||null,visibility:P},we=await JX(s,e.UserID,ee);l(we.profile),de(we.profile),y(!1),ie.success("Care profile updated")}catch(ee){ie.error(ee instanceof Error?ee.message:"Unable to update care profile")}},re=()=>{if(c)return o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading favorites and sizes..."});if(d)return o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-4 py-3 text-sm text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:d});if(!a)return o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-neutral-600 dark:border-neutral-700 dark:bg-neutral-900/30 dark:text-neutral-300",children:"No care details captured yet. Add sizes, favorites, and notes so gifting is easy."});const ee=Object.entries(a.clothingSizes||{});return o.jsxs("div",{className:"space-y-4",children:[ee.length?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:"Clothing sizes"}),o.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2 sm:grid-cols-2",children:ee.map(([we,ke])=>o.jsxs("div",{className:"rounded-lg bg-neutral-100 px-3 py-2 text-sm text-neutral-700 dark:bg-neutral-800 dark:text-neutral-200",children:[o.jsxs("span",{className:"font-medium",children:[we,": "]}),o.jsx("span",{children:String(ke)})]},we))})]}):null,Gl("Favorite colors",a.favoriteColors||[]),Gl("Favorite foods",a.favoriteFoods||[]),Gl("Interests",a.interests||[]),Gl("Allergies",a.allergies||[]),Gl("Favorite brands",a.favoriteBrands||[]),a.notes?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:"Notes"}),o.jsx("p",{className:"mt-1 text-sm text-neutral-700 dark:text-neutral-200",children:a.notes})]}):null,a.wishlistSummary?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:"Wishlist summary"}),o.jsx("p",{className:"mt-1 text-sm text-neutral-700 dark:text-neutral-200",children:a.wishlistSummary})]}):null]})},F=()=>{const ee=!!h||!!(a&&a.shareLinkActive);return o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("button",{onClick:ge,className:"inline-flex items-center gap-2 rounded-xl bg-secondary-600 px-3 py-2 text-sm font-medium text-white transition hover:bg-secondary-500",children:[o.jsx(_u,{className:"h-4 w-4"}),"Generate share link"]}),o.jsxs("button",{onClick:se,className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(ti,{className:"h-4 w-4"}),"Revoke link"]}),h?o.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500 dark:text-neutral-400",children:["Link expires ",new Date(h.expiresAt).toLocaleString(),o.jsxs("button",{onClick:()=>navigator.clipboard.writeText(h.shareUrl).then(()=>ie.success("Link copied")),className:"inline-flex items-center gap-1 rounded-full border border-primary-200 px-3 py-1 text-xs text-primary-600 transition hover:bg-primary-100 dark:border-primary-500/40 dark:text-primary-200",children:[o.jsx($x,{className:"h-3 w-3"})," Copy"]})]}):ee?o.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"A share link is currently active."}):null]})},le=()=>m?o.jsxs("div",{className:"mt-4 space-y-4 rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"Update care profile"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Clothing sizes (one per line, format: Item: Size)"}),o.jsx("textarea",{value:b,onChange:ee=>v(ee.target.value),rows:4,className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),ql("Favorite colors (comma separated)",x,w),ql("Favorite foods (comma separated)",k,S),ql("Interests (comma separated)",E,N),ql("Allergies (comma separated)",C,T),ql("Favorite brands (comma separated)",j,I),HE("Notes",H,L),HE("Wishlist summary",D,O),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Visibility"}),o.jsxs("select",{value:P,onChange:ee=>U(ee.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",children:[o.jsx("option",{value:"FAMILY",children:"Whole family"}),o.jsx("option",{value:"PARENTS",children:"Parents and guardians"}),o.jsx("option",{value:"LINK",children:"Anyone with link"}),o.jsx("option",{value:"PRIVATE",children:"Private"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>{y(!1),de(a)},className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:M,className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-500",children:"Save details"})]})]}):null;return r?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"w-full max-w-2xl rounded-3xl bg-white shadow-2xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Household Member"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Care details and favorites"})]}),o.jsx("button",{type:"button",onClick:n,className:"rounded-full p-2 text-neutral-500 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700","aria-label":"Close member details",children:o.jsx(ti,{size:18})})]}),o.jsxs("div",{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:gap-6",children:[o.jsx("img",{src:e.ProfilePhotoUrl||"https://i.pravatar.cc/120",alt:ne,className:"h-20 w-20 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:ne}),o.jsx("div",{className:"mt-1 inline-flex items-center rounded-full bg-primary-100 px-2.5 py-0.5 text-xs font-medium text-primary-700 dark:bg-primary-900/40 dark:text-primary-200",children:fe}),X?o.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-neutral-500 dark:text-neutral-400",children:[o.jsx(el,{size:16})," Joined ",X]}):null,o.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[e.Email?o.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-300",children:[o.jsx(A6,{size:16}),o.jsx("span",{className:"truncate",children:e.Email})]}):null,e.PhoneNumber?o.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-300",children:[o.jsx(L6,{size:16}),o.jsx("span",{children:e.PhoneNumber})]}):null]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsxs("button",{onClick:()=>{y(!0)},className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(z0,{className:"h-4 w-4"})," Update care details"]}),F()]}),re(),le()]})]})}):null},Gl=(e,t)=>t.length?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:e}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.map(r=>o.jsx("span",{className:"rounded-full bg-neutral-100 px-3 py-1 text-xs text-neutral-700 dark:bg-neutral-800 dark:text-neutral-200",children:r},r))})]}):null,ql=(e,t,r)=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:e}),o.jsx("input",{value:t,onChange:n=>r(n.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),HE=(e,t,r)=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:e}),o.jsx("textarea",{value:t,onChange:n=>r(n.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),aJ=async(e,t,r,n)=>(await K.post("/invitations",{familyId:e,email:t,invitedBy:r,relationshipId:n})).data,oJ=async()=>(await K.get("/invitations/pending")).data,lJ=async e=>(await K.post("/invitations/accept",{token:e})).data,cJ=async e=>(await K.post("/invitations/decline",{token:e})).data,uJ=({invitations:e,onAccept:t,onDecline:r,searchParams:n,setSearchParams:s})=>(g.useEffect(()=>{const i=n.get("token");i&&(e.find(l=>l.Token===i)?(t(i),s({},{replace:!0})):s({},{replace:!0}))},[n,e,t,s]),e.length===0?null:o.jsxs("div",{className:"bg-primary-100 dark:bg-primary-900/50 p-4 rounded-2xl space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-primary-800 dark:text-primary-200",children:"Pending Invitations"}),o.jsx("div",{className:"space-y-3",children:e.map(i=>o.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-3 rounded-lg",children:[o.jsx("div",{children:o.jsxs("p",{className:"font-medium text-neutral-900 dark:text-white",children:["You have been invited to join the ",o.jsx("span",{className:"font-bold",children:i.Family.FamilyName})," family."]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>t(i.Token),className:"px-3 py-1 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-lg",children:"Accept"}),o.jsx("button",{onClick:()=>r(i.Token),className:"px-3 py-1 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg",children:"Decline"})]})]},i.InvitationID))})]})),dJ=({isOpen:e,onClose:t,token:r,onAccept:n,onDecline:s,setSearchParams:i,currentUser:a})=>{const[l,c]=g.useState(null),[u,d]=g.useState(!0),[f,h]=g.useState(null),p=g.useMemo(()=>mr("invitation-modal"),[]);return p.log("InvitationActionModal: isOpen",e),p.log("InvitationActionModal: token",r),g.useEffect(()=>{e&&(async()=>{var y,b;if(!r){d(!1),h("No invitation token provided.");return}try{d(!0),h(null);const v=await K.get(`/invitations/details?token=${r}`);c(v.data)}catch(v){p.error("Error fetching invitation details:",v),h(((b=(y=v.response)==null?void 0:y.data)==null?void 0:b.message)||"Failed to fetch invitation details.")}finally{d(!1)}})()},[r,e,p]),e?o.jsx(Xt,{children:e&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-md",children:o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white mb-4",children:u?"Loading invitation details...":f?`Error: ${f}`:l?`You've been invited to join ${l.familyName} by ${l.inviterName}!`:"You have a pending family invitation!"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-6",children:u||f?"":"Would you like to accept or decline this invitation?"}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:()=>{s(r),t(),i({},{replace:!0})},className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Decline"}),o.jsx("button",{onClick:()=>{n(r),t(),i({},{replace:!0})},className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-xl",children:"Accept"})]})]})})})}):(p.log("InvitationActionModal: Not rendering because isOpen is false"),null)},fJ=async(e,t)=>{await K.put(`/users/${e}`,t)},Dc=()=>({currentStep:"greeting",family_name:"",members:[],rooms:[],slot_status:{family_name:"empty",members:"empty",rooms:"empty"},loading:!1,error:null,messages:[{sender:"LinZ",text:`Hi! I'm LinZ  Welcome to FamConomythanks for inviting me along. To start, what name should we use for your family? (e.g., "The Parkers")`}],hydrated:!1,awaitingResetConfirmation:!1,streamingMessage:null}),VE=Dc(),hJ=()=>({...Dc(),hydrated:!0}),Cr=mr("onboarding"),Ca=mr("onboarding-stream"),pJ=3500,mJ=e=>new Promise(t=>setTimeout(t,e));function Cd(e,t,r){const n=e?"filled":"empty",s=t.length>0?"filled":"empty",i=r.length>0?"filled":"empty";return{family_name:n,members:s,rooms:i}}function WE(e){return e.family_name==="filled"&&e.members==="filled"&&e.rooms==="filled"?"committed":e.family_name==="filled"&&e.members==="filled"?"rooms":e.family_name==="filled"?"members":"greeting"}async function gJ(e,t,r,n,s,i){var a;try{const l=await fetch("/api/assistant/onboarding",{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream",...t!==null?{"x-tenant-id":String(t)}:{},"x-user-id":r},credentials:"include",body:JSON.stringify({message:e,familyId:t,userId:r,history:n}),signal:i==null?void 0:i.signal});if(!l.ok||!l.body)throw new Error(`Streaming assistant error: ${l.status}`);const c=l.body.getReader(),u=new TextDecoder;let d="",f="",h="",p=null,m,y=!1,b=!1;const v=k=>{const S=k.indexOf(`\r
\r
`),E=k.indexOf(`

`);return S!==-1&&(E===-1||S<E)?{index:S,length:4}:E!==-1?{index:E,length:2}:null},x=k=>{if(!k.trim())return;const S=k.split(/\r?\n/);let E="message";const N=[];for(const j of S)j&&(j.startsWith("event:")?E=j.slice(6).trim():j.startsWith("data:")&&N.push(j.slice(5)));if(!N.length)return;const C=N.join(`
`);let T=C;try{T=JSON.parse(C)}catch{}switch(E){case"token":if(T&&typeof T.content=="string"){const j=T.content;f+=j,j.trim()&&(y=!0),s==null||s(f)}break;case"assistant":if(T&&typeof T.content=="string"){const j=T.content;h=j,j.trim()&&(y=!0),s==null||s(h)}break;case"state":p=T;break;case"done":T&&typeof T.next_step=="string"&&(m=T.next_step,p?p={...p,next_step:m}:p={next_step:m}),b=!0;break;case"error":throw new Error((T==null?void 0:T.message)||"Streaming assistant reported an error.");default:break}};for(;;){const{value:k,done:S}=await c.read();if(S)break;d+=u.decode(k,{stream:!0});let E=v(d);for(;E;){const N=d.slice(0,E.index);d=d.slice(E.index+E.length),x(N),E=v(d)}}d.trim()&&x(d),b=!0;const w=(h||f||"").trim();return Ca.log("stream result",{assistant_reply:w,hasTokens:!!f.trim(),hasAssistantMessage:!!h.trim(),latestState:p,receivedContent:y,completed:b}),{assistant_reply:w,state:p,hasContent:y,completed:b}}catch(l){if(((a=i==null?void 0:i.signal)==null?void 0:a.aborted)||typeof l=="object"&&l!==null&&"name"in l&&l.name==="AbortError")throw Ca.log("Streaming onboarding assistant request aborted"),l;return Ca.error("Streaming onboarding assistant failed:",l),null}}function Zr(e){return e.split(/\s+/).map(t=>t?t[0].toUpperCase()+t.slice(1):"").join(" ")}function aa(e){return e.replace(/^["']+|["']+$/g,"")}function Y_(e){const t=aa(e.trim());if(!(!t||/[?\r\n]/.test(t)||t.split(/\s+/).length>6))return Zr(t.replace(/\s+/g," "))}function G_(e){const t=e.toLowerCase().replace(/\b(my|the|a|an|our|of|with|for|to)\b/g,"").replace(/\b(one|two|three|four|five|six|seven|eight|nine|ten)\b/g,"").replace(/\s+/g," ").trim(),r={wife:"Wife",husband:"Husband",partner:"Partner",spouse:"Spouse",mom:"Mom",mother:"Mother",dad:"Dad",father:"Father",daughter:"Daughter",daughters:"Daughter",son:"Son",sons:"Son",boy:"Son",boys:"Son",girl:"Daughter",girls:"Daughter",kid:"Child",kids:"Child",child:"Child",children:"Child",baby:"Baby",toddler:"Toddler",cousin:"Cousin",nephew:"Nephew",niece:"Niece",grandma:"Grandma",grandpa:"Grandpa",grandfather:"Grandfather",grandmother:"Grandmother",aunt:"Aunt",uncle:"Uncle",friend:"Friend",roommate:"Roommate",fiance:"Fiance",fiancee:"Fiancee"};if(t&&Object.prototype.hasOwnProperty.call(r,t))return r[t];const n=t.split(" ").filter(s=>s&&!bJ.has(s)).join(" ").trim();return n?Zr(n):"Family Member"}const $E=new Set(["mom","mother","dad","father","parent","parents","son","sons","daughter","daughters","boy","boys","girl","girls","kid","kids","child","children","wife","husband","partner","partners","spouse","friend","friends","roommate","roommates","cousin","cousins","nephew","niece","uncle","aunt","grandma","grandmother","grandpa","grandfather","grandson","granddaughter","sister","sisters","brother","brothers","siblings","guardian","mentor","coach","stepmom","stepmother","stepdad","stepfather","stepbrother","stepsister","stepchild","stepchildren","twin","twins","fiance","fiancee","pet","pets","dog","cat"]),yJ=new Set(["oldest","youngest","older","younger","little","big","only","eldest","middle","newborn","baby","bonus","step","twin","twins","first","second","third","fourth","fifth","pregnant","expecting","future","lovely","awesome","amazing","wonderful","beautiful","sweet"]),xJ=new Set(["one","two","three","four","five","six","seven","eight","nine","ten","couple","few","pair","pairs","dozen"]),YE=new Set(["and","&"]),GE=new Set(["named","called","is","=","as"]),vJ=new Set(["the","a","an","my","our"]),bJ=new Set(["lovely","awesome","amazing","wonderful","beautiful","sweet"]),ob=["no thanks","nope","no that's all","no that is all","nope that's all of us","done","that's all","thats all","that's everyone","thats everyone","that's everyone actually","thats everyone actually","that's it","thats it","all set","we're good","we are good","we good","no more","stop"],Ip=[...ob,"i think that's all","i think thats all","nothing else","none","no other rooms","no other spaces","that is everything","that is all","no other","we are good on rooms","we are good on spaces","we are set","all good"],wJ=["yes","yeah","yep","yup","sure","absolutely","of course","start over","restart","reset","reset it","reset onboarding","lets start over","let's start over","start from scratch","lets do it"],kJ=["no","nope","not now","maybe later","keep it","leave it","stay as is","dont","don't"],SJ=["reset onboarding","restart onboarding","start over onboarding"],Ty=new Set([...Ip,"what do you mean","i am confused","im confused","not sure","no idea"]),EJ=e=>e.replace(/[.!?]+$/g,"").trim().toLowerCase(),q_=e=>{const t=EJ(e);return!!(!t||Ty.has(t)||t==="n/a"||t==="na")},NJ=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t.trim():"").filter(Boolean).filter(t=>!q_(t)):[];function wi(e,t){const r=e.toLowerCase();return t.some(n=>r.includes(n))}function CJ(e){const t=(e||"").toLowerCase();return/son|daughter|child|kid|boy|girl|teen/.test(t)}function qE(e){const t=Zr(e.trim());if(!t)return"";const n=t.toLowerCase().endsWith("s")?"'":"'s";return`${t}${n} Room`}function gg(e,t,r){const n=t.filter(c=>CJ(c.role));if(!n.length)return[];const s=new Set(r.map(c=>c.toLowerCase())),i=new Set,a=n.map(c=>Zr(c.name)).filter(c=>{if(!c)return!1;const u=c.toLowerCase();if(i.has(u))return!1;i.add(u);const d=qE(c);return d&&!s.has(d.toLowerCase())}).map(c=>qE(c)).filter(Boolean);if(!a.length)return[];let l=e??a.length;return l<=0&&(l=a.length),a.slice(0,Math.min(l,a.length))}const jJ=["Master Bedroom","Master Bathroom","Primary Bedroom","Primary Bathroom","Kids Bedrooms","Kids Rooms","Kids Room","Kids Bathroom","Guest Bedroom","Guest Bathroom","Guest Room","Living Room","Dining Room","Kitchen","Study","Library","Office","Workout Room","Gym","Garage","Front Porch","Enclosed Front Porch","Porch","Basement","Attic","Laundry Room","Mud Room","Yard","Backyard","Deck","Patio","Loft","Playroom"],TJ=[...jJ].sort((e,t)=>t.length-e.length);function AJ(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function DJ(e){const t=new Set;return TJ.forEach(r=>{if(new RegExp(`\\b${AJ(r)}\\b`,"gi").test(e)){let s=r;r==="Primary Bedroom"&&(s="Master Bedroom"),r==="Primary Bathroom"&&(s="Master Bathroom"),r==="Kids Room"&&(s="Kids Rooms"),(r==="Enclosed Front Porch"||r==="Porch")&&(s="Front Porch"),r==="Gym"&&(s="Workout Room"),r==="Backyard"&&(s="Yard"),r==="Guest Bedroom"&&(s="Guest Room"),t.add(s)}}),Array.from(t)}function RJ(e){let t=e.trim();if(!t)return[];t=t.replace(/^(?:and|&)+\s*/i,"").trim();let r=t.split(/\s+/).filter(Boolean);if(r.length<2)return[];for(;r.length>0&&xJ.has(r[0].toLowerCase());)r=r.slice(1);if(r.length<2)return[];const n=[];let s=0;for(;s<r.length;){const d=r[s],f=d.toLowerCase();if(GE.has(f)){s+=1;break}if(YE.has(f)&&n.length){s+=1;break}if(s===0){n.push(d),s+=1;continue}if(yJ.has(f)||$E.has(f)||d.includes("-")){n.push(d),s+=1;continue}break}if(!n.length)return[];let i=r.slice(s);for(;i.length>0&&(YE.has(i[0].toLowerCase())||vJ.has(i[0].toLowerCase())||GE.has(i[0].toLowerCase()));)i=i.slice(1);if(!i.length)return[];const l=i.join(" ").split(/\band\b|,|&/i).map(d=>d.trim()).filter(Boolean),c=G_(n.join(" ")),u=[];return l.forEach(d=>{const f=d.replace(/^(?:the|a|an|my|our)\s+/i,"").replace(/'s$/i,"").trim();f&&($E.has(f.toLowerCase())||u.push({name:Zr(f),role:c}))}),u}function _J(e){var i;const t=[],r=aa(e.trim());if(!r)return t;const n=/\b(?:my|our)\s+(.+?)(?=(?:\s*[,:;])?\s*(?:and\s+)?(?:my|our)\b|[.!?]|$)/gi;let s;for(;(s=n.exec(r))!==null;){const a=(i=s[1])==null?void 0:i.trim();if(!a)continue;RJ(a).forEach(c=>{t.some(u=>u.name.toLowerCase()===c.name.toLowerCase())||t.push(c)})}return t}function KE(e,t,r){let n=aa(e.trim());if(!n)return[];n=n.replace(/^[\-*]+\s*/,"").replace(/:+$/,"").trim();const s=n.toLowerCase();if(!n||Ty.has(s))return[];if(/that's all/i.test(n)||/nothing else/i.test(n))return[];if(/\b(kids?'?|children|sons|daughters|boys|girls)\b[^,.;]*\b(room|rooms|bedroom|bedrooms)\b/i.test(n)){const f=n.match(/(\d+)\s+(?:kids?'?|children|sons|daughters|boys|girls)/i),h=f&&parseInt(f[1],10)||null,p=gg(h,t,r);return p.length?p:["Kids Rooms"]}if([/^(?:well|so|also|and|oh|yeah|yep|yup|sure|plus|anyway|honestly|actually|maybe|um|uh|okay|ok|alright)[,\s]+/i,/^oh\s+yeah[,\s]+/i,/^oh\s+ok[,\s]+/i].forEach(f=>{n=n.replace(f,"").trim()}),[/^(?:my|our)\s+(?:home|house)\s+has(?:\s+the\s+following\s+rooms?)?[:\s]*/i,/^home\s+has\s+/i,/^house\s+has\s+/i,/^we(?:'ve)?\s+(?:also\s+)?(?:got|have)\s+/i,/^we\s+also\s+keep\s+/i,/^there'?s\s+/i,/^here'?s\s+/i,/^it's\s+/i,/^its\s+/i,/^this\s+is\s+/i,/^just\s+/i,/^all\s+of\s+the\s+/i,/^all\s+of\s+/i,/^all\s+the\s+/i].forEach(f=>{n=n.replace(f,"").trim()}),!n)return[];if(/each of the kids? have their own room/i.test(n)||/each kid has their own room/i.test(n)){const f=gg(null,t,r);return f.length?f:["Kids Rooms"]}if(/master\s+bed\s+and\s+bath/i.test(n))return["Master Bedroom","Master Bathroom"];n=n.replace(/^an\s+/i,"").replace(/^the\s+/i,"").replace(/^a\s+/i,""),n=n.replace(/\bbed\b$/i,"Bedroom"),n=n.replace(/\bbedroom room$/i,"Bedroom"),n=n.replace(/\bbath\b$/i,"Bathroom"),n=n.replace(/\bmaster bedroom bathroom$/i,"Master Bathroom");let c=Zr(n.replace(/\s+/g," ").trim());const u=c.toLowerCase();if(!c||Ty.has(u))return[];const d=DJ(c);if(d.length)return d;if(/^bath$/i.test(c)&&(c="Bathroom"),/^room$/i.test(c))return[];if(/^rooms$/i.test(c))return[];if(/^kids$/i.test(c))return[];if(/^kids Rooms$/i.test(c)){const f=gg(null,t,r);if(f.length)return f;c="Kids Rooms"}return/^basement$/i.test(c)&&(c="Basement"),/^garage$/i.test(c)&&(c="Garage"),c?[c]:[]}function IJ(e,t,r){const n=e.trim();if(!n)return[];if(wi(n,Ip))return[];let s=aa(n);if(s=s.replace(/[.!?]+$/,"").trim(),s.includes(":")){const l=s.split(":").slice(1).join(":").trim();l&&(s=l)}s=s.replace(/master\s+bed\s+and\s+bath/gi,"master bedroom, master bathroom"),s=s.replace(/master\s+bedroom\s+and\s+bathroom/gi,"master bedroom, master bathroom");const i=s.split(/[,;]|\band\b/gi).map(l=>l.trim()).filter(Boolean),a=[];return i.forEach(l=>{KE(l,r,[...t,...a]).forEach(u=>{const d=u.toLowerCase();u&&!t.some(f=>f.toLowerCase()===d)&&!a.some(f=>f.toLowerCase()===d)&&a.push(u)})}),a.length||KE(s,r,[...t,...a]).forEach(c=>{const u=c.toLowerCase();c&&!t.some(d=>d.toLowerCase()===u)&&!a.some(d=>d.toLowerCase()===u)&&a.push(c)}),a}function af(e){const t=new Set;return e.filter(r=>{const n=`${r.name.toLowerCase()}|${r.role.toLowerCase()}`;return t.has(n)?!1:(t.add(n),!0)})}function of(e){const t=new Set;return e.filter(r=>{const n=r.toLowerCase();return t.has(n)?!1:(t.add(n),!0)})}function MJ(e){const t=aa((e??"").trim());if(!t)return"";const r=t.replace(/\s+/g," ");return Y_(r)??Zr(r)}function OJ(e){const t=(e??"").trim();if(t)return t.toLowerCase()}function PJ(e){const t=new Set,r=e.map(s=>{const i=Zr(aa((s.name??"").trim())),a=G_((s.role??"").trim()),l=OJ(s.email);return{name:i,role:a,...l?{email:l}:{}}}).filter(s=>s.name&&s.role);return af(r).filter(s=>{if(!s.email)return!0;const i=s.email.toLowerCase();return t.has(i)?!1:(t.add(i),!0)})}function K_(e){return of(e.map(t=>aa((t??"").trim())).filter(Boolean).filter(t=>!q_(t)).map(t=>Zr(t.replace(/\s+/g," "))))}function LJ(e){const t=MJ(e.family_name),r=PJ(e.members),n=K_(e.rooms);return{familyName:t,members:r,rooms:n,diagnostics:{rawFamily:e.family_name,rawMemberCount:e.members.length,normalizedMemberCount:r.length,rawRoomCount:e.rooms.length,normalizedRoomCount:n.length}}}function FJ(e,t){var s;const r=t.trim(),n=r.toLowerCase();if(e.currentStep==="greeting"){const i=e.family_name?void 0:Y_(t),a=e.family_name||i;return{assistant_reply:a?`Wonderful. I'd love to get to know the people who make up ${a}. Who should we invite first?`:"Thanks for kicking things off! I'd love to know who will be using FamConomy with youwho should we invite first?",extracted:i?{family_name:i}:{},next_step:a?"members":"greeting"}}if(e.currentStep==="members"){if(wi(t,ob)){const l=e.members.length>0;return{assistant_reply:l?"Perfect, I feel like I'm getting to know your family already. Let's talk about your spacewhat rooms or areas should we keep track of?":"I'd love to know at least one person in your crew. Share a name and role, or tell me you'd like to skip this part for now.",extracted:{},next_step:l?"rooms":"members"}}if(n.includes("spell")||n.includes("name")&&n.includes("wrong"))return{assistant_reply:"Thanks for pointing that outI'd love to get the names right. Could you share each name again so I can fix them?",extracted:{},next_step:"members"};const i=_J(t);if(i.length>0){const l=i.filter(c=>!e.members.some(u=>u.name.toLowerCase()===c.name.toLowerCase()));if(l.length>0)return{assistant_reply:`Love it! I'll add ${l.map(u=>`${u.name} (${u.role})`).join(", ")}. Anyone else to invite?`,extracted:{members_add:l},next_step:"members"}}const a=(s=e.members[e.members.length-1])==null?void 0:s.name;return{assistant_reply:a?`I bet ${a} has a partner in crime. Tell me about another person in your crewname and role work great!`:"I'd love to meet everyone. Who's the first family member we should add, and how are they connected to you?",extracted:{},next_step:"members"}}if(e.currentStep==="rooms"){const i=wi(t,Ip),a=IJ(t,e.rooms,e.members);if(a.length>0){const c=a.join(", ");return{assistant_reply:i?`Great! I'll note ${c}. That should cover everything for nowif another space pops up later, just let me know.`:`Great! I'll note ${c}. Any other spaces you rely on?`,extracted:{rooms_add:a},next_step:i?"committed":"rooms"}}if(i)return{assistant_reply:"Sounds goodI'll get those spaces set up. If you think of another room later, just let me know.",extracted:{},next_step:"committed"};const l=e.rooms[e.rooms.length-1];return{assistant_reply:l?`I'm picturing ${l}. What other spaces should I know about so we can keep things organized for you?`:"Paint me a picture of your home. What's one room or space your family relies on a lot?",extracted:{},next_step:"rooms"}}return e.currentStep==="committed"?{assistant_reply:"Amazing, I have what I need. Give me just a sec while I set everything up behind the scenes.",extracted:{},next_step:"committed"}:{assistant_reply:r?"Thanks for sharing that with me! Let me know anything else you'd like me to remember about your family.":"I'm here and ready whenever you want to tell me more about your family setup.",extracted:{},next_step:e.currentStep}}const BJ=({familyId:e,userId:t})=>{const[r,n]=g.useState(Dc()),s=g.useRef(null),{checkAuthStatus:i}=Ot(),{appendLinZMessage:a,appendUserMessage:l,updateLinZMessage:c}=ai(),[u,d]=g.useState(e),f=g.useRef(e??null),[h,p]=g.useState(!0),m=g.useRef(0),y=g.useRef(null),b=g.useRef(null),v=g.useRef(null);g.useEffect(()=>{const j=`${e??"none"}:${t??"none"}`;if(s.current===j)return;const I=s.current;s.current=j;const H=typeof e=="number"?e:null;if(f.current=H,d(H),p(!0),!I){b.current=null,n(Dc()),m.current=0;return}const[L="none",D="none"]=I.split(":"),[O="none",P="none"]=j.split(":");(D!==P||L!=="none"&&L!==O)&&(b.current=null,n(Dc()),m.current=0)},[e,t]),g.useEffect(()=>{h&&typeof e=="number"&&e!==u&&(f.current=e,d(e))},[h,e,u]),g.useEffect(()=>{f.current=u},[u]),g.useEffect(()=>()=>{v.current&&(v.current.abort(),v.current=null)},[]);const x=g.useCallback(async j=>{var L,D,O;const I=f.current;if(I)return I;if(!t)return null;const H=(j==null?void 0:j.trim())||r.family_name.trim()||"My Family";try{Cr.log("Ensuring family id",{preferredName:j??r.family_name});const P=await K.post("/family",{familyName:H||"My Family"}),U=((L=P.data)==null?void 0:L.FamilyID)??((D=P.data)==null?void 0:D.familyId)??((O=P.data)==null?void 0:O.id);if(typeof U!="number")throw new Error("Family creation did not return a valid FamilyID.");f.current=U,d(U),p(!0);try{await i()}catch(z){Ca.warn("Failed to refresh auth after family creation",z)}return Cr.log("Family id resolved",{newFamilyId:U}),U}catch(P){return Ca.error("Failed to ensure familyId during onboarding",P),null}},[u,t,r.family_name,i]),w=r.messages.some(j=>j.sender==="user");g.useEffect(()=>{(async()=>{if(w){Cr.log("Skipping hydration because user has already interacted.");return}if(!u||!t){n(I=>({...I,hydrated:!0}));return}n(I=>({...I,loading:!0,error:null}));try{const I=await K.get(`/linz/context/hydrate?familyId=${u}&userId=${t}`),{onboardingMemory:H,existingFacts:L}=I.data;let D="",O=[],P=[];const U=[];H==null||H.forEach(se=>{if(!(se.namespace&&se.namespace!=="onboarding"))try{const M=JSON.parse(se.value);se.key==="family_name"&&typeof M=="string"&&(D=M),se.key==="member_candidates"&&Array.isArray(M)&&(O=M),se.key==="room_candidates"&&Array.isArray(M)&&(P=M)}catch{}});const z=new Map((L==null?void 0:L.map(se=>[se.key,se.value]))??[]);if(!D){const se=z.get("family.name");typeof se=="string"?D=se:se&&typeof se=="object"&&"value"in se&&typeof se.value=="string"&&(D=se.value)}if(!O.length){const se=z.get("onboarding.members");Array.isArray(se)&&(O=se.map(M=>({name:typeof(M==null?void 0:M.name)=="string"?M.name:"",role:typeof(M==null?void 0:M.relationshipName)=="string"?M.relationshipName:typeof(M==null?void 0:M.role)=="string"?M.role:"",email:typeof(M==null?void 0:M.email)=="string"?M.email:void 0})).filter(M=>M.name))}if(!P.length){const se=z.get("onboarding.rooms");Array.isArray(se)&&(P=se.filter(M=>typeof M=="string"))}O=af(O.map(se=>({...se,name:Zr(se.name),role:se.role?Zr(se.role):""}))),P=of(P.map(se=>Zr(se)));const $=Cd(D,O,P);let ne=WE($),X=!1,fe=[...VE.messages];const de=z.get("onboarding.status"),ge=typeof de=="string"?de:de&&typeof de=="object"&&"state"in de?de.state:void 0;ge==="completed"?(ne="completed",X=!0,fe=[{sender:"LinZ",text:"Welcome back to onboarding! Would you like to start over?"}]):ge==="committed"&&(ne="committed"),X?U.push(...fe):U.push(...VE.messages),n(se=>se.messages.some(re=>re.sender==="user")?{...se,family_name:D,members:O,rooms:P,slot_status:$,currentStep:ne,loading:!1,hydrated:!0,awaitingResetConfirmation:X,streamingMessage:se.streamingMessage}:(b.current=null,{...se,family_name:D,members:O,rooms:P,slot_status:$,currentStep:ne,messages:U,loading:!1,hydrated:!0,awaitingResetConfirmation:X,streamingMessage:null}))}catch(I){n(H=>{const L=H.messages.some(D=>D.sender==="user");return L||(b.current=null),{...H,loading:!1,error:I.message??"Failed to hydrate",hydrated:!0,streamingMessage:L?H.streamingMessage:null}})}})()},[u,t,w]);const k=g.useCallback(async(j,I,H="onboarding")=>{if(!t)return;let L=u;if(L||(j==="family_name"&&typeof I=="string"?L=await x(I):r.family_name&&(L=await x(r.family_name))),!!L)try{Cr.log("Persisting memory item",{key:j,hasValue:I!==void 0,namespace:H}),await K.put("/linz/memory",{items:[{familyId:L,userId:t,namespace:H,key:j,value:JSON.stringify(I)}]})}catch{n(O=>({...O,error:`Failed to save ${j}.`}))}},[u,x,t,r.family_name]),S=g.useCallback(async j=>{var $,ne,X,fe;if(!t)return!1;const I=u??await x();if(!I)return n(de=>({...de,error:"Unable to create family record."})),!1;const H=(j==null?void 0:j.family_name)??r.family_name,L=(j==null?void 0:j.members)??r.members,D=(j==null?void 0:j.rooms)??r.rooms,O=LJ({family_name:H,members:L,rooms:D}),P=O.familyName||aa(H.trim()),U=O.members,z=O.rooms;if(Cr.log("Commit evaluation",{familyId:I,...O.diagnostics}),!P)return n(de=>({...de,loading:!1,error:"Family name is incompleteplease confirm it before continuing."})),!1;if(!U.length)return n(de=>({...de,loading:!1,error:"Member details need another look before we can continue."})),!1;if(!z.length)return n(de=>({...de,loading:!1,error:"Please share at least one room or space to finish onboarding."})),!1;Cr.log("Committing onboarding data",{familyId:I,memberCount:U.length,roomCount:z.length}),n(de=>({...de,loading:!0}));try{const ge=(await K.post("/onboarding/commit",{familyId:I,userId:t,family_name:P,members:U,rooms:z})).data,se=($=ge==null?void 0:ge.rooms)!=null&&$.length?K_(ge.rooms):z,M=Cd(P,U,se);return Cr.log("Commit successful",{familyId:I,message:ge==null?void 0:ge.message,returnedRooms:((ne=ge==null?void 0:ge.rooms)==null?void 0:ne.length)??0}),Ax(I),p(!0),n(re=>({...re,loading:!1,family_name:P,members:U,rooms:se,slot_status:M,currentStep:"committed",error:null})),!0}catch(de){const ge=((fe=(X=de==null?void 0:de.response)==null?void 0:X.data)==null?void 0:fe.error)||de.message||"Failed to commit onboarding";return Cr.error("Commit failed",ge),n(se=>({...se,loading:!1,error:ge})),!1}},[u,x,t,r.family_name,r.members,r.rooms]),E=g.useCallback(async j=>{var Ze,it,Ue;Cr.log("Processing user response",{currentStep:r.currentStep,message:j,memberCount:r.members.length,roomCount:r.rooms.length}),v.current&&(v.current.abort(),v.current=null),b.current=null,n(Ne=>{const R=Ne.messages.some(Q=>Q.sender==="user")?"":null;return b.current=R,{...Ne,streamingMessage:R}});let I=null,H=!1,L=null;if(t){const Ne=r.messages.slice(-10),ze=new AbortController;v.current=ze;try{I=await gJ(j,u,t,Ne,R=>{n(Q=>(b.current=R,{...Q,streamingMessage:R}))},{signal:ze.signal})}catch(R){ze.signal.aborted||typeof R=="object"&&R!==null&&"name"in R&&R.name==="AbortError"?(H=!0,Ca.log("Streaming onboarding assistant request aborted for latest prompt")):(L=R,Ca.error("Streaming onboarding assistant call failed",R))}finally{v.current===ze&&(v.current=null)}}if(H)return;L&&Cr.warn("Continuing after streaming assistant error",L);let D=((Ze=I==null?void 0:I.assistant_reply)==null?void 0:Ze.trim())??"",O=r.family_name,P=[...r.members],U=[...r.rooms],z,$={},ne=!1;const X=I==null?void 0:I.state,fe=(I==null?void 0:I.hasContent)??!1,de=(I==null?void 0:I.completed)??!1,ge=!!X;let se=D.length>0;if(!se){const Ne=(it=b.current)==null?void 0:it.trim();Ne&&(D=Ne,se=!0)}if(X){const{family_name:Ne,members:ze,rooms:R,next_step:Q}=X;if(Ne){const _=Ne.trim();_&&_!==O&&(O=_,await k("family_name",O))}if(Array.isArray(ze)){const _=ze.map(A=>{var q,me,ye;return{name:(q=A.name)==null?void 0:q.trim(),role:(me=A.role)==null?void 0:me.trim(),email:((ye=A.email)==null?void 0:ye.trim())||void 0}}).filter(A=>A.name&&A.role);if(_.length){const A=af(_),q=JSON.stringify(P.map(ye=>({name:ye.name,role:ye.role,email:ye.email??null}))),me=JSON.stringify(A.map(ye=>({name:ye.name,role:ye.role,email:ye.email??null})));q!==me&&(P=A,await k("member_candidates",P))}}if(Array.isArray(R)){const _=of(R.map(A=>Zr((A||"").trim())).filter(Boolean));if(_.length){const A=JSON.stringify(U),q=JSON.stringify(_);A!==q&&(U=_,await k("room_candidates",U))}}Q&&["greeting","members","rooms","committed","completed"].includes(Q)&&(z=Q)}const M=Ne=>{if(!Ne)return null;const{next_step:ze,family_name:R,members:Q,rooms:_}=Ne,A=(R==null?void 0:R.trim())||"your family",q=Array.isArray(Q)?Q.length:0,me=Array.isArray(_)?_.length:0,ye=q?`${q} member${q===1?"":"s"}`:"no members yet",gt=me?`${me} room${me===1?"":"s"}`:"no rooms yet";switch(ze){case"members":return"Great! Tell me about the people we should include next.";case"rooms":return"Awesomelet's talk about the rooms or spaces you want to track.";case"committed":case"completed":return`All set! I've saved ${A} with ${ye} and ${gt}. You're ready to continue.`;default:return null}},re=async Ne=>{var Q;const ze={...r,family_name:O,members:P,rooms:U,slot_status:Cd(O,P,U)};if(ne)return;{await mJ(pJ);const _=((Q=b.current)==null?void 0:Q.trim())??"";if(D.trim()||_){!D.trim()&&_&&(D=_),se=D.length>0,Cr.warn("Skipping fallback after delay because assistant reply arrived",{assistantReply:D,streamHasContent:fe,streamCompleted:de,streamingRef:b.current});return}}ne=!0;const R=FJ(ze,j);D=R.assistant_reply,se=D.length>0,$=R.extracted??{},R.next_step&&(z=R.next_step),b.current=D,Cr.warn("Fallback applied",{assistantReply:D,extracted:$,streamHasContent:fe,streamCompleted:de,userMessage:j})};if(!I)Cr.warn("Applying fallback",{reason:"streamResult null",userMessage:j}),await re();else{if(!se&&fe&&(D=((Ue=I.assistant_reply)==null?void 0:Ue.trim())??"",se=D.length>0),!se){const Ne=M(X??null);Ne&&(D=Ne,se=!0)}!se&&de&&!ge&&(Cr.warn("Applying fallback",{reason:"completed without assistant reply",assistantReply:D,streamHasContent:fe,streamCompleted:de,streamingRef:b.current}),await re())}if(!ne&&!se&&!fe&&!ge&&(Cr.warn("Applying fallback",{reason:"no content received",assistantReply:D,streamHasContent:fe,streamCompleted:de,streamingRef:b.current}),await re()),$.family_name&&!O&&(O=$.family_name.trim(),await k("family_name",O)),Array.isArray($.members_add)&&$.members_add.length>0){const Ne=$.members_add.map(ze=>{var R,Q,_;return{name:(R=ze.name)==null?void 0:R.trim(),role:(Q=ze.role)==null?void 0:Q.trim(),email:(_=ze.email)==null?void 0:_.trim()}}).filter(ze=>ze.name&&ze.role);Ne.length&&(P=af([...P,...Ne]),await k("member_candidates",P))}if(ne){const Ne=NJ($.rooms_add);Ne.length&&(U=of([...U,...Ne.map(ze=>Zr(ze))]),await k("room_candidates",U))}const F=wi(j,ob);r.currentStep==="members"&&F&&(z=P.length>0?"rooms":"members",D||(D=P.length>0?"Perfect, let's talk about your spacewhat rooms or areas should we keep track of?":"I'd love to know at least one person in your crew. Share a name and role, or tell me you'd like to skip this part for now."));const le=wi(j,Ip);r.currentStep==="rooms"&&le&&(z="committed",D||(D="Sounds goodI'll get those spaces set up. If you think of another room later, just let me know."));const ee=Cd(O,P,U),we=z??r.currentStep,ke=WE(ee),Ie=we&&["greeting","members","rooms","committed","completed"].includes(we)?we:ke,Pe=D;n(Ne=>(b.current=null,{...Ne,family_name:O,members:P,rooms:U,slot_status:ee,currentStep:Ie,messages:[...Ne.messages,{sender:"LinZ",text:Pe}],streamingMessage:null}));const We=ee.family_name==="filled"&&ee.members==="filled"&&ee.rooms==="filled"&&(Ie==="committed"||Ie==="completed"||(X==null?void 0:X.next_step)==="completed");Cr.log("Commit evaluation",{currentStep:r.currentStep,nextStep:Ie,streamNextStep:X==null?void 0:X.next_step,slot_status:ee,membersCount:P.length,roomsCount:U.length,shouldCommit:We}),We&&await S({family_name:O,members:P,rooms:U})},[r,k,S,u,t]),N=g.useCallback(async j=>{var L,D;const I=(j==null?void 0:j.skipServer)??!1,H=(O=!0)=>{m.current=0,y.current=null,O?p(!0):(p(!1),f.current=null,d(null)),b.current=null,n(()=>hJ())};if(I){H(!1);return}if(!t){H(!1);return}n(O=>({...O,loading:!0,error:null}));try{const O=u??e??null;await K.post("/onboarding/reset",{userId:t,...O?{familyId:O}:{}}),H(!0)}catch(O){const P=((D=(L=O==null?void 0:O.response)==null?void 0:L.data)==null?void 0:D.error)||O.message||"Failed to reset onboarding";n(U=>(b.current="",{...U,loading:!1,error:P,streamingMessage:""}))}},[e,u,t]),C=g.useCallback(async j=>{const I=j.trim();if(!I)return;const H=I.toLowerCase(),L=async O=>{if(O==="accept")return n(U=>(b.current="",{...U,awaitingResetConfirmation:!1,messages:[...U.messages,{sender:"user",text:I}],streamingMessage:""})),await N(),n(U=>(b.current="",{...U,messages:[{sender:"LinZ",text:"All rightstarting fresh! Tell me what your family should be called."}],streamingMessage:""})),!0;const P=O==="decline"?'No problem! Everything will stay just the way it is. If you change your mind, just say "reset onboarding."':'Totally fine! If you decide you want to start over later, just let me know by saying "reset onboarding."';return n(U=>(b.current="",{...U,awaitingResetConfirmation:!1,messages:[...U.messages,{sender:"user",text:I},{sender:"LinZ",text:P}],streamingMessage:""})),!0},D=wi(H,SJ);if(r.awaitingResetConfirmation||D){if(D&&!r.awaitingResetConfirmation){n(P=>({...P,awaitingResetConfirmation:!0})),await L("accept");return}const O=wi(H,wJ)?"accept":wi(H,kJ)?"decline":"unknown";await L(O);return}n(O=>({...O,messages:[...O.messages,{sender:"user",text:I}]})),await E(I)},[E,r.awaitingResetConfirmation,N]);g.useEffect(()=>{if(!a||!l||!r.messages.length)return;const j=m.current;if(r.messages.length<=j)return;r.messages.slice(j).forEach(H=>{const L=H.text.trim();L&&(H.sender==="LinZ"?a(L,{meta:{source:"onboarding"}}):l(L,{meta:{source:"onboarding"}}))}),m.current=r.messages.length},[r.messages,a,l]);const T=g.useCallback(()=>{n(j=>({...j,currentStep:"completed",awaitingResetConfirmation:!1}))},[]);return{state:r,sendUserMessage:C,commitOnboardingData:S,resetOnboarding:N,markCompleted:T}},Q_=g.createContext(null),zJ=({familyId:e,userId:t,children:r})=>{const n=BJ({familyId:e,userId:t});return o.jsx(Q_.Provider,{value:n,children:r})},Mp=()=>{const e=g.useContext(Q_);if(!e)throw new Error("useOnboardingContext must be used within an OnboardingProvider");return e},QE={parent:{bg:"bg-primary-100",text:"text-primary-800"},guardian:{bg:"bg-secondary-100",text:"text-secondary-800"},child:{bg:"bg-accent-100",text:"text-accent-800"},other:{bg:"bg-neutral-100",text:"text-neutral-800"}},ZE=()=>{const e=zn(),{user:t}=Ot(),{family:r,families:n,activeFamilyId:s,setActiveFamilyId:i,isLoading:a,error:l,refetchFamily:c}=Lr(),[u,d]=g.useState([]),[f,h]=g.useState([]),[p,m]=g.useState([]),[y,b]=g.useState(!1),[v,x]=g.useState(null),[w,k]=g.useState(!1),[S,E]=g.useState(null),[N,C]=g.useState(!1),[T,j]=g.useState(!1),[I,H]=g.useState(null),[L,D]=g.useState(!1),[O,P]=g.useState(null),[U,z]=g.useState([]),[$,ne]=g.useState(!1),[X,fe]=g.useState(null),[de,ge]=g.useState(!1),[se,M]=g.useState(null),[re,F]=g.useState(!1),[le,ee]=g.useState(""),[we,ke]=g.useState(!1),[Ie,Pe]=g.useState(null),We=g.useMemo(()=>mr("family-page"),[]),Ze=l??v,it=a||y,Ue=Mp(),[Ne,ze]=Hh(),R=g.useCallback(async()=>{try{const J=await GX();d(J)}catch(J){x(J instanceof Error?J.message:"Failed to load relationships")}},[]),Q=g.useCallback(async()=>{try{const J=await s_();We.log("roomTemplatesData from API",J);const De=J.map(lt=>lt.roomTemplate?[lt.roomTemplate.id,lt.roomTemplate]:null).filter(lt=>lt!==null),Ke=Array.from(new Map(De).values());m(Ke)}catch(J){x(J instanceof Error?J.message:"Failed to load room templates")}},[We]),_=g.useCallback(async J=>{if(!J){h([]),z([]),x(null);return}try{b(!0),x(null);const[De,Ke]=await Promise.all([oJ(),i_(J)]);z(De.filter(lt=>lt.FamilyID===J)),h(Ke)}catch(De){x(De instanceof Error?De.message:"Failed to load family data")}finally{b(!1)}},[]),A=g.useCallback(async()=>{try{const De=await ey("New Household"),Ke=await iD(),lt=(De==null?void 0:De.FamilyID)??Ke.activeFamilyId??null;lt!==null&&(i(lt,{families:Ke.families??n}),await _(lt)),Ue!=null&&Ue.resetOnboarding&&await Ue.resetOnboarding(),e("/onboarding?new=1")}catch(J){x(J instanceof Error?J.message:"Failed to start a new household")}},[n,_,e,Ue,i]);g.useEffect(()=>{R(),Q()},[R,Q]),g.useEffect(()=>{_(s??null)},[s,_]),g.useEffect(()=>{const J=Ne.get("token");We.log("FamilyPage useEffect: token from URL",J),J&&(fe(J),ne(!0),We.log("FamilyPage useEffect: setting invitationToken",J),We.log("FamilyPage useEffect: setting showInvitationActionModal",!0))},[Ne,ze,We]);const q=async()=>{var Ke,lt;const J=await c(),De=(J==null?void 0:J.activeFamilyId)??((lt=(Ke=J==null?void 0:J.families)==null?void 0:Ke[0])==null?void 0:lt.FamilyID)??null;De!==null&&(i(De,{families:(J==null?void 0:J.families)??n}),await _(De))},[me,ye]=g.useState(null),gt=g.useCallback(J=>{const De=Number(J.target.value);Number.isNaN(De)?i(null):i(De)},[i]),Ht=async(J,De)=>{if(!(!r||!t))try{await aJ(r.FamilyID.toString(),J,t.id??t.UserID,De),k(!1),E(null),await _(r.FamilyID)}catch(Ke){x(Ke instanceof Error?Ke.message:"Failed to send invitation")}},qt=async(J,De,Ke,lt)=>{if(r)try{await aD(r.FamilyID.toString(),J,De,r.FamilyValues??[],lt),C(!1),await c()}catch(Ps){x(Ps instanceof Error?Ps.message:"Failed to save settings")}},ot=async({userData:J,relationshipId:De,permissions:Ke})=>{if(I)try{await fJ(I.UserID,J),r&&De!==null&&De!==I.RelationshipID&&await f8(String(r.FamilyID),I.UserID,De),r&&await h8(String(r.FamilyID),I.UserID,Ke),D(!1),await c()}catch(lt){x(lt instanceof Error?lt.message:"Failed to update profile")}},Fr=async J=>{if(r)try{await p8(r.FamilyID.toString(),String(J)),await c()}catch(De){x(De instanceof Error?De.message:"Failed to remove member")}},ui=async()=>{if(!(!r||!t))try{await m8(),j(!1),await c()}catch(J){x(J instanceof Error?J.message:"Failed to leave family")}},Vt=async J=>{try{await lJ(J),await _((r==null?void 0:r.FamilyID)??s??null),await c()}catch(De){x(De instanceof Error?De.message:"Failed to accept invitation")}},tr=async J=>{try{await cJ(J),await _((r==null?void 0:r.FamilyID)??s??null)}catch(De){x(De instanceof Error?De.message:"Failed to decline invitation")}},un=async(J,De)=>{if(r)try{await a_(r.FamilyID,J,De),ge(!1),await _(r.FamilyID)}catch(Ke){x(Ke instanceof Error?Ke.message:"Failed to create room")}},cs=async J=>{if(!(!r||!window.confirm("Remove this room? Any gigs assigned to it will also be cleared.")))try{await KK(J),await _(r.FamilyID)}catch(Ke){x(Ke instanceof Error?Ke.message:"Failed to delete room")}},ae=async(J,De)=>{if(r)try{await qK(J,{name:De}),await _(r.FamilyID),M(null)}catch(Ke){x(Ke instanceof Error?Ke.message:"Failed to rename room")}},ce=async()=>{if(!(!r||!window.confirm("Reset the entire floor plan? This removes every room and its assignments.")))try{await QK(r.FamilyID),await _(r.FamilyID),Ue!=null&&Ue.resetOnboarding&&await Ue.resetOnboarding(),sessionStorage.setItem("onboarding-focus","rooms"),e("/onboarding?focus=rooms")}catch(De){x(De instanceof Error?De.message:"Failed to reset floor plan")}},qe=J=>{if(!J)return"other";const De=u.find(Ke=>Ke.RelationshipID===J);return De?De.RelationshipName.toLowerCase():"other"};if(it)return o.jsx("div",{children:"Loading family data..."});if(Ze)return o.jsxs("div",{className:"text-error-500",children:["Error: ",Ze]});const Xe="famc.local",Kr=J=>!J||J.toLowerCase().endsWith(`@${Xe}`);let Os=!1;return o.jsxs("div",{className:"space-y-6",children:[!r&&!X&&o.jsx(oD,{onFamilyCreated:q}),r&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Active household"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsx("select",{value:s??"",onChange:gt,className:"px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary-500",children:n.map(J=>o.jsx("option",{value:J.FamilyID,children:J.FamilyName},J.FamilyID))}),o.jsx("button",{onClick:A,className:"px-3 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:"Start New Household"})]})]}),n.length>1&&o.jsx("div",{className:"flex flex-wrap gap-2",children:n.filter(J=>J.FamilyID!==s).map(J=>o.jsxs("button",{onClick:()=>i(J.FamilyID),className:"px-3 py-1 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:["Switch to ",J.FamilyName]},J.FamilyID))})]}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:r.FamilyName}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Manage your family circle and permissions"})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs(br,{to:"/family/values",className:"flex items-center px-3 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:[o.jsx(tu,{size:18,className:"mr-2"}),o.jsx("span",{children:"Family Values"})]}),o.jsxs("button",{onClick:()=>C(!0),className:"flex items-center px-3 py-2 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:[o.jsx(S2,{size:18,className:"mr-2"}),o.jsx("span",{children:"Settings"})]}),o.jsxs("button",{onClick:()=>{E(null),k(!0)},className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(G6,{size:18,className:"mr-2"}),o.jsx("span",{children:"Invite Member"})]})]})]}),o.jsx("div",{id:"family-members-panel",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.members.map(J=>{const De=qe(J.RelationshipID),Ke=QE[De]||QE.other,lt=Kr(J.Email),Ps=lt&&!Os?"placeholder-members-callout":void 0;return lt&&!Os&&(Os=!0),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card hover:shadow-card-hover transition-all p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:J.ProfilePhotoUrl||"https://i.pravatar.cc/100",alt:`${J.FirstName} ${J.LastName}`,className:"h-12 w-12 rounded-full object-cover"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:`${J.FirstName} ${J.LastName}`}),o.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full mt-1 ${Ke.bg} ${Ke.text}`,children:De.charAt(0).toUpperCase()+De.slice(1)}),lt&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 text-xs rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-200",children:"Placeholder"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>ye(Y=>Y===J.UserID?null:J.UserID),className:"text-neutral-400 hover:text-neutral-600 dark:text-neutral-500 dark:hover:text-neutral-300","aria-label":"Open member actions",children:o.jsx(Hf,{size:18})}),o.jsx(Xt,{children:me===J.UserID&&o.jsx(QX,{isOpen:me===J.UserID,onClose:()=>ye(null),onView:()=>P(J),onEdit:()=>{H(J),D(!0)},onRemove:()=>Fr(J.UserID)})})]})]}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"flex items-center text-neutral-500 dark:text-neutral-400",children:[o.jsx(el,{size:16,className:"mr-2"}),o.jsxs("span",{children:["Joined ",new Date(J.CreatedDate).toLocaleDateString()]})]}),J.BirthDate&&o.jsxs("div",{className:"flex items-center text-neutral-500 dark:text-neutral-400",children:[o.jsx(tu,{size:16,className:"mr-2"}),o.jsxs("span",{children:["Born ",new Date(J.BirthDate).toLocaleDateString()]})]}),lt&&o.jsxs("div",{id:Ps,className:"rounded-xl border border-dashed border-primary-300 dark:border-primary-700 bg-primary-50/60 dark:bg-primary-900/20 px-3 py-3 text-sm text-primary-700 dark:text-primary-200",children:[o.jsxs("p",{className:"mb-2",children:["This profile was created during onboarding. Send an email invite to let ",J.FirstName," join FamConomy."]}),o.jsx("button",{onClick:()=>{var Y;E({email:"",relationshipId:J.RelationshipID??((Y=u[0])==null?void 0:Y.RelationshipID)??0,name:`${J.FirstName} ${J.LastName}`.trim()}),k(!0)},className:"inline-flex items-center px-3 py-2 rounded-xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400",children:"Send Invitation"})]})]})]},J.UserID)})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Rooms"}),f.length>0&&o.jsxs("button",{onClick:ce,className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-2xl border border-neutral-200 dark:border-neutral-700 text-sm text-neutral-600 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800",children:[o.jsx(U6,{size:16}),"Reset Floor Plan"]})]}),o.jsxs("button",{onClick:()=>ge(!0),className:"flex items-center px-3 py-2 rounded-2xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(Jt,{size:18,className:"mr-2"}),o.jsx("span",{children:"Add Room"})]})]}),f.length===0?o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"No rooms configured yet. Add your first room!"}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(J=>{var De;return o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:J.name}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:J.roomTemplateId?"Based on template":"Custom room"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>M(J),className:"text-neutral-400 hover:text-primary-500 transition-colors","aria-label":`Rename ${J.name}`,children:o.jsx(np,{size:16})}),o.jsx("button",{onClick:()=>cs(J.id),className:"text-neutral-400 hover:text-red-500 transition-colors","aria-label":`Delete ${J.name}`,children:o.jsx(ei,{size:16})})]})]}),((De=J.roomTemplate)==null?void 0:De.description)&&o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 line-clamp-3",children:J.roomTemplate.description})]},J.id)})})]}),o.jsx(uJ,{invitations:U,onAccept:Vt,onDecline:tr,searchParams:Ne,setSearchParams:ze}),o.jsx(qX,{isOpen:w,onClose:()=>{k(!1),E(null)},onInvite:Ht,relationships:u,initialEmail:S==null?void 0:S.email,initialRelationshipId:S==null?void 0:S.relationshipId,inviteeName:S==null?void 0:S.name}),r&&o.jsx(KX,{isOpen:N,onClose:()=>C(!1),onSave:qt,onLeaveFamily:()=>j(!0),onCreateNewFamily:()=>{C(!1),ee(""),Pe(null),F(!0)},family:r}),I&&o.jsx(ZX,{isOpen:L,onClose:()=>D(!1),onSave:ot,user:I,relationships:u,availablePermissions:[],currentPermissions:[]}),O&&o.jsx(iJ,{isOpen:!!O,member:O,relationshipName:qe(O.RelationshipID),onClose:()=>P(null),familyId:(r==null?void 0:r.FamilyID)??null,currentUserId:(t==null?void 0:t.UserID)??null}),se&&o.jsx(YX,{isOpen:!!se,initialName:se.name,onClose:()=>M(null),onSave:J=>ae(se.id,J)}),o.jsx(Xt,{children:T&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-md",children:o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white mb-4",children:"Are you sure you want to leave this family?"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-6",children:"You will lose access to all family data."}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:ui,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 hover:bg-red-600 rounded-xl",children:"Leave Family"})]})]})})})}),o.jsx($X,{isOpen:de,onClose:()=>ge(!1),onConfirm:un,roomTemplates:p})]}),X&&o.jsx(dJ,{isOpen:$,onClose:()=>ne(!1),token:X,onAccept:Vt,onDecline:tr,setSearchParams:ze,currentUser:t}),o.jsx(Xt,{children:re&&o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg w-full max-w-md",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Create a New Household"}),o.jsx("button",{onClick:()=>F(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"Give your new household a name. You can invite members or run the onboarding assistant once its created."}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Household Name"}),o.jsx("input",{type:"text",value:le,onChange:J=>ee(J.target.value),placeholder:"e.g., The Andersons",className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:we})]}),Ie&&o.jsx("p",{className:"text-sm text-error-500",children:Ie})]}),o.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-neutral-200 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",disabled:we,children:"Cancel"}),o.jsx("button",{onClick:async()=>{if(!le.trim()){Pe("Household name is required.");return}try{ke(!0),Pe(null);const J=await ey(le.trim()),De=await c();i(J.FamilyID,{families:(De==null?void 0:De.families)??n}),await _(J.FamilyID),F(!1),ee(""),ke(!1),window.confirm("Household created! Would you like to run the onboarding assistant now?")&&e("/onboarding")}catch(J){Pe(J instanceof Error?J.message:"Failed to create household"),ke(!1)}},className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl disabled:opacity-60",disabled:we,children:we?"Creating":"Create Household"})]})]})})})]})},XE=async(e,t)=>{const{data:r}=await K.get(`/family/${e}/guidelines`,{params:{type:t}});return r},UJ=async(e,t)=>{const{data:r}=await K.post(`/family/${e}/guidelines`,t);return r},HJ=async(e,t,r)=>{const{data:n}=await K.post(`/family/${e}/guidelines/${t}/approve`,{approved:r});return n},VJ=[{key:"VALUE",label:"Values"},{key:"RULE",label:"Rules"}],JE=parseInt("21",10),eN=e=>{const t=[],r=n=>{n.forEach(s=>{var i;t.push(s),(i=s.children)!=null&&i.length&&r(s.children)})};return r(e),t},WJ=e=>{const t=e.approvals.length,r=e.approvals.filter(n=>n.Approved).length;return{total:t,approved:r}},tN=()=>{const{user:e}=Ot(),{family:t,isLoading:r,refetchFamily:n}=Lr(),{appendLinZMessage:s}=ai(),i=(t==null?void 0:t.FamilyID)??null,[a,l]=g.useState("VALUE"),[c,u]=g.useState((t==null?void 0:t.FamilyMantra)??""),[d,f]=g.useState(!1),[h,p]=g.useState(!1),[m,y]=g.useState(null),[b,v]=g.useState(null),[x,w]=g.useState(null),[k,S]=g.useState(!1),[E,N]=g.useState(!1),[C,T]=g.useState(null),[j,I]=g.useState(null),[H,L]=g.useState(!1),[D,O]=g.useState("VALUE"),[P,U]=g.useState(""),[z,$]=g.useState(""),[ne,X]=g.useState(""),[fe,de]=g.useState(""),[ge,se]=g.useState(!1);g.useEffect(()=>{u((t==null?void 0:t.FamilyMantra)??"")},[t==null?void 0:t.FamilyMantra]);const M=g.useCallback(async A=>{if(i)if(A==="VALUE")try{S(!0),T(null);const q=await XE(i,"VALUE");v(q)}catch(q){T(q instanceof Error?q.message:"Unable to load family values")}finally{S(!1)}else try{N(!0),I(null);const q=await XE(i,"RULE");w(q)}catch(q){I(q instanceof Error?q.message:"Unable to load family rules")}finally{N(!1)}},[i]);g.useEffect(()=>{i&&(M("VALUE"),M("RULE"))},[i,M]);const re=async()=>{if(!(!t||d))try{f(!0),y(null),p(!1),await aD(t.FamilyID.toString(),t.FamilyName,c,t.FamilyValues??[]),await n(),p(!0)}catch(A){y(A instanceof Error?A.message:"Unable to update family mantra")}finally{f(!1)}},F=async(A,q)=>{if(i)try{await HJ(i,A.GuidelineID,q),M(A.Type)}catch(me){ie.error(me instanceof Error?me.message:"Unable to update approval")}},le=A=>{O(A),U(""),$(""),X(""),de(""),L(!0)},ee=async()=>{if(!i)return;if(!P.trim()){ie.error("A title is required");return}const A={type:D,title:P.trim(),description:z.trim()?z.trim():void 0,parentId:ne===""?void 0:Number(ne),metadata:fe.trim()?{note:fe.trim()}:void 0};try{se(!0),await UJ(i,A),L(!1),se(!1),s("I added that idea to your family review queue."),M(D)}catch(q){se(!1),ie.error(q instanceof Error?q.message:"Unable to submit suggestion")}},we=g.useMemo(()=>eN((b==null?void 0:b.active)??[]),[b]),ke=g.useMemo(()=>eN((x==null?void 0:x.active)??[]),[x]),Ie=A=>{if(!A||typeof A!="object")return null;const q=A.note;return typeof q=="string"&&q.trim()?q.trim():null},Pe=A=>{if(!A)return null;const q=[A.FirstName,A.LastName].filter(Boolean).join(" ").trim();return q||(A.Email?A.Email:null)},We=A=>{if(!A)return"recently";const q=new Date(A);return Number.isNaN(q.getTime())?"recently":q.toLocaleDateString()},Ze=(A,q=0)=>o.jsx("ul",{className:q===0?"space-y-2":"space-y-1 pl-4 border-l border-neutral-200 dark:border-neutral-700",children:A.map(me=>{var gt;const ye=Ie(me.Metadata);return o.jsxs("li",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("div",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-primary-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-neutral-800 dark:text-neutral-200",children:me.Title}),me.Description?o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:me.Description}):null,ye?o.jsx("p",{className:"text-xs italic text-neutral-400 dark:text-neutral-500",children:ye}):null]})]}),(gt=me.children)!=null&&gt.length?Ze(me.children,q+1):null]},me.GuidelineID)})}),it=A=>{if(!A.approvals.length)return null;const q=WJ(A),me=A.approvals.find(ye=>ye.UserID===(e==null?void 0:e.UserID));return o.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsxs("span",{children:[q.approved,"/",q.total," approvals"]}),me?o.jsxs("span",{className:me.Approved?"inline-flex items-center gap-1 rounded-full bg-success-100 px-2 py-0.5 text-success-700 dark:bg-success-900/30 dark:text-success-200":"inline-flex items-center gap-1 rounded-full bg-warning-100 px-2 py-0.5 text-warning-700 dark:bg-warning-900/30 dark:text-warning-200",children:[o.jsx(Ni,{className:"h-3 w-3"}),me.Approved?"You approved":"Awaiting your approval"]}):null]})},Ue=A=>{const q=A.ProposedBy,me=A.approvals.find(qt=>qt.UserID===(e==null?void 0:e.UserID)),ye=Pe(q),gt=We(A.ProposedAt),Ht=Ie(A.Metadata);return o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-5 shadow-sm transition hover:border-primary-200 dark:border-neutral-700 dark:bg-neutral-900/40",children:o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:A.Title}),A.Description?o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:A.Description}):null,o.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Proposed ",gt,ye?o.jsxs("span",{children:[" by ",ye]}):null]}),Ht?o.jsx("div",{className:"rounded-xl bg-neutral-100 px-3 py-2 text-xs text-neutral-600 dark:bg-neutral-800/60 dark:text-neutral-300",children:Ht}):null,it(A)]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{onClick:()=>F(A,!0),disabled:!me||me.Approved,className:"inline-flex items-center gap-2 rounded-xl border border-success-200 px-3 py-2 text-sm font-medium text-success-700 transition hover:bg-success-50 disabled:opacity-60 dark:border-success-500/40 dark:text-success-200",children:[o.jsx(Ni,{className:"h-4 w-4"})," Approve"]}),o.jsxs("button",{onClick:()=>F(A,!1),className:"inline-flex items-center gap-2 rounded-xl border border-warning-200 px-3 py-2 text-sm font-medium text-warning-700 transition hover:bg-warning-50 dark:border-warning-500/40 dark:text-warning-200",children:[o.jsx(f6,{className:"h-4 w-4"})," Needs more time"]})]})]})},A.GuidelineID)},Ne=()=>{var A,q;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("section",{className:"space-y-3",children:[o.jsxs("header",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Values under review"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Approve ideas so they become part of your family culture."})]}),o.jsxs("button",{onClick:()=>le("VALUE"),className:"inline-flex items-center gap-2 rounded-xl border border-primary-200 px-3 py-2 text-sm font-medium text-primary-600 transition hover:bg-primary-50 dark:border-primary-500/40 dark:text-primary-200 dark:hover:bg-primary-900/30",children:[o.jsx(Jt,{className:"h-4 w-4"})," Suggest a value"]})]}),k?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading"}):C?o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-4 py-3 text-sm text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:C}):(((A=b==null?void 0:b.underReview)==null?void 0:A.length)??0)===0?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Nothing is waiting right now. Ask LinZ to collect new value ideas!"}):o.jsx("div",{className:"space-y-3",children:b==null?void 0:b.underReview.map(Ue)})]}),o.jsxs("section",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Agreed values"}),k?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading"}):(((q=b==null?void 0:b.active)==null?void 0:q.length)??0)===0?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"No agreed values yet. Suggest one to start your list."}):o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-6 dark:border-neutral-700 dark:bg-neutral-900/30",children:Ze((b==null?void 0:b.active)??[])})]})]})},ze=()=>{const A=(x==null?void 0:x.newRules)??[];return A.length?o.jsxs("section",{className:"space-y-3",children:[o.jsx("header",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"New rules"}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:["These rules are new for ",JE," days so everyone can adjust."]})]})}),o.jsx("div",{className:"space-y-3",children:A.map(q=>{var gt;const me=Ie(q.Metadata),ye=q.ExpiresAt?We(q.ExpiresAt):null;return o.jsx("div",{className:"rounded-2xl border border-warning-200 bg-warning-50 p-5 dark:border-warning-500/40 dark:bg-warning-900/30",children:o.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-warning-800 dark:text-warning-200",children:q.Title}),q.Description?o.jsx("p",{className:"text-sm text-warning-700 dark:text-warning-200/80",children:q.Description}):null,me?o.jsx("p",{className:"text-xs italic text-warning-700 dark:text-warning-200/70",children:me}):null,o.jsxs("p",{className:"text-xs text-warning-700 dark:text-warning-200/80",children:["Active since ",We(q.ActivatedAt)]}),ye?o.jsxs("p",{className:"text-xs text-warning-700 dark:text-warning-200/70",children:["Becomes permanent on ",ye]}):null,(gt=q.children)!=null&&gt.length?Ze(q.children):null]})})},q.GuidelineID)})})]}):null},R=()=>{var me;const A=new Set(((x==null?void 0:x.newRules)??[]).map(ye=>ye.GuidelineID)),q=((x==null?void 0:x.active)??[]).filter(ye=>!A.has(ye.GuidelineID));return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("section",{className:"space-y-3",children:[o.jsxs("header",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Rules under review"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Approve rules to make them official family expectations."})]}),o.jsxs("button",{onClick:()=>le("RULE"),className:"inline-flex items-center gap-2 rounded-xl border border-primary-200 px-3 py-2 text-sm font-medium text-primary-600 transition hover:bg-primary-50 dark:border-primary-500/40 dark:text-primary-200 dark:hover:bg-primary-900/30",children:[o.jsx(Jt,{className:"h-4 w-4"})," Suggest a rule"]})]}),E?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading"}):j?o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-4 py-3 text-sm text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:j}):(((me=x==null?void 0:x.underReview)==null?void 0:me.length)??0)===0?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"No rules waiting right now. Ask LinZ to draft one when you need it."}):o.jsx("div",{className:"space-y-3",children:x==null?void 0:x.underReview.map(Ue)})]}),ze(),o.jsxs("section",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Family rules"}),E?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"Loading"}):q.length===0?o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-6 text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-900/30",children:"No active rules yet. Suggest one to set expectations together."}):o.jsx("div",{className:"space-y-3",children:q.map(ye=>{var qt;const gt=Ie(ye.Metadata),Ht=We(ye.ActivatedAt);return o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-5 shadow-sm dark:border-neutral-700 dark:bg-neutral-900/30",children:o.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:ye.Title}),ye.Description?o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:ye.Description}):null,gt?o.jsx("p",{className:"text-xs italic text-neutral-500 dark:text-neutral-400",children:gt}):null,o.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Active since ",Ht]}),(qt=ye.children)!=null&&qt.length?Ze(ye.children):null]})})},ye.GuidelineID)})})]})]})},Q=()=>a==="VALUE"?Ne():R(),_=D==="VALUE"?we:ke;return r&&!t?o.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:o.jsx(on,{className:"h-6 w-6 animate-spin text-primary-500"})}):t?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:[t.FamilyName," Values & Rules"]}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Review what your household stands for and keep new ideas moving forward."})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs(br,{to:"/family",className:"inline-flex items-center px-4 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-colors",children:[o.jsx(wk,{size:16,className:"mr-2"}),"Family Overview"]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Family mantra"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Display this on your dashboard to keep everyone focused."})]}),h?o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-success-100 px-3 py-1 text-xs font-medium text-success-700 dark:bg-success-900/30 dark:text-success-200",children:[o.jsx(W6,{className:"h-3 w-3"})," Saved"]}):null]}),o.jsx("textarea",{rows:3,value:c,onChange:A=>{u(A.target.value),p(!1)},placeholder:"Together we...",className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}),m?o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-3 py-2 text-sm text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:m}):null,o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsxs("button",{onClick:()=>u(t.FamilyMantra??""),className:"inline-flex items-center gap-2 rounded-xl border border-neutral-200 px-3 py-2 text-sm text-neutral-600 transition hover:bg-neutral-50 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(z6,{className:"h-4 w-4"})," Reset"]}),o.jsxs("button",{onClick:re,disabled:d,className:"inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-primary-500 disabled:opacity-50",children:[d?o.jsx(on,{className:"h-4 w-4 animate-spin"}):o.jsx(H6,{className:"h-4 w-4"}),"Save mantra"]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-2",children:[o.jsx("div",{className:"flex rounded-xl bg-neutral-100 p-1 dark:bg-neutral-900/40",children:VJ.map(A=>o.jsx("button",{onClick:()=>l(A.key),className:`w-full rounded-lg px-4 py-2 text-sm font-medium transition-colors focus:outline-none ${a===A.key?"bg-white text-primary-600 shadow dark:bg-neutral-700 dark:text-white":"text-neutral-600 hover:bg-white/60 dark:text-neutral-300 dark:hover:bg-neutral-700/60"}`,children:A.label},A.key))}),o.jsx("div",{className:"p-4 lg:p-6",children:Q()})]})]}),o.jsx("aside",{className:"space-y-4",children:o.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-5 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-white",children:"Tips"}),o.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-neutral-600 dark:text-neutral-300",children:[o.jsx("li",{children:"Any family member can suggest a value or rule."}),o.jsx("li",{children:"Everything stays in review until everyone approves it."}),o.jsxs("li",{children:['Rules stay "new" for ',JE," days so the household can adjust."]})]})]})})]}),H?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-white shadow-2xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsxs("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:["Suggest a ",D==="VALUE"?"family value":"family rule"]}),o.jsx("button",{onClick:()=>L(!1),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:""})]}),o.jsxs("div",{className:"space-y-4 p-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Title"}),o.jsx("input",{value:P,onChange:A=>U(A.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Description"}),o.jsx("textarea",{rows:3,value:z,onChange:A=>$(A.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",placeholder:D==="VALUE"?"Add context so everyone understands the idea":"Describe when this rule applies and why it matters"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:["Parent ",D==="VALUE"?"value":"rule"," (optional)"]}),o.jsxs("select",{value:ne,onChange:A=>X(A.target.value?Number(A.target.value):""),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",children:[o.jsx("option",{value:"",children:"Top level"}),_.map(A=>o.jsx("option",{value:A.GuidelineID,children:A.Title},A.GuidelineID))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Notes for your family (optional)"}),o.jsx("textarea",{rows:3,value:fe,onChange:A=>de(A.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",placeholder:D==="RULE"?"Explain how this rule connects to your values":"Add examples, stories, or inspiration"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 border-t border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>L(!1),className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsxs("button",{onClick:ee,disabled:ge,className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-500 disabled:opacity-50",children:[ge?o.jsx(on,{className:"h-4 w-4 animate-spin"}):o.jsx(Jt,{className:"h-4 w-4"})," Submit"]})]})]})}):null]}):o.jsxs("div",{className:"rounded-2xl bg-white dark:bg-neutral-800 shadow-card p-8",children:[o.jsx("h1",{className:"text-2xl font-semibold text-neutral-900 dark:text-white mb-2",children:"No Family Selected"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 mb-4",children:"Join or create a family to define shared values and rules."}),o.jsxs(br,{to:"/family",className:"inline-flex items-center px-4 py-2 rounded-xl bg-primary-500 text-white hover:bg-primary-600 dark:hover:bg-primary-400 transition-colors",children:[o.jsx(wk,{size:18,className:"mr-2"}),"Go to Family Settings"]})]})},$J=async e=>(await K.get(`/journal/family/${e}`)).data,YJ=async e=>(await K.post("/journal",e)).data,GJ=async(e,t)=>{await K.put(`/journal/${e}`,t)},qJ=async e=>{await K.delete(`/journal/${e}`)},rN=()=>{const{user:e}=Ot(),{family:t}=Lr(),[r,n]=g.useState([]),[s,i]=g.useState(null),[a,l]=g.useState(!0),[c,u]=g.useState(null),[d,f]=g.useState(!1),[h,p]=g.useState(!1),[m,y]=g.useState(window.innerWidth<1024);g.useEffect(()=>{const k=()=>{y(window.innerWidth<1024)};return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const b=g.useCallback(async()=>{if(t)try{l(!0);const k=await $J(t.FamilyID.toString());n(k)}catch(k){u(k instanceof Error?k.message:"An unknown error occurred")}finally{l(!1)}},[t]);g.useEffect(()=>{b()},[b]);const v=async(k,S)=>{if(!(!t||!e))try{const E=await YJ({FamilyID:t.FamilyID,Title:k,EntryText:"",IsPrivate:S,CreatedByUserID:e.id});await b(),i(E),f(!1)}catch(E){u(E instanceof Error?E.message:"Failed to create entry")}},x=async(k,S)=>{try{await GJ(k.toString(),S),b()}catch(E){u(E instanceof Error?E.message:"Failed to update entry")}},w=async k=>{try{await qJ(k.toString()),b(),i(null)}catch(S){u(S instanceof Error?S.message:"Failed to delete entry")}};return a?o.jsx("div",{children:"Loading journal entries..."}):c?o.jsxs("div",{className:"text-error-500",children:["Error: ",c]}):o.jsxs("div",{id:"journal-board",className:`h-full flex ${h?"fixed inset-0 z-50 bg-white dark:bg-neutral-800":"bg-white dark:bg-neutral-800 rounded-2xl shadow-card"}`,children:[o.jsxs("div",{className:`${m&&s&&!h?"hidden":"w-full lg:w-1/3"} ${h&&s?"hidden lg:flex":"flex"} flex-col border-r border-neutral-200 dark:border-neutral-700`,children:[o.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Journal Entries"}),o.jsx("button",{onClick:()=>f(!0),className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:o.jsx(Jt,{size:20})})]}),o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"relative",children:[o.jsx(rp,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400"}),o.jsx("input",{type:"text",placeholder:"Search entries...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:r.map(k=>o.jsxs("div",{onClick:()=>i(k),className:`px-4 py-3 border-b border-neutral-200 dark:border-neutral-700 cursor-pointer ${(s==null?void 0:s.EntryID)===k.EntryID?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-neutral-50 dark:hover:bg-neutral-700/50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:k.Title}),o.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:new Date(k.CreatedAt).toLocaleDateString()})]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 truncate",children:k.EntryText||"No content"})]},k.EntryID))})]}),o.jsx("div",{className:`${m&&!s?"hidden":"w-full lg:w-2/3"} ${h?"w-full":"lg:w-2/3"} flex flex-col`,children:s?o.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[o.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>{i(null),p(!1)},className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400 lg:hidden",children:o.jsx(tp,{size:18})}),o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:s.Title})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>p(!h),className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:h?o.jsx(b6,{size:18}):o.jsx(w6,{size:18})}),o.jsx("button",{onClick:()=>w(s.EntryID),className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:o.jsx(ei,{size:18})})]})]}),o.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:o.jsx("textarea",{value:s.EntryText,onChange:k=>i({...s,EntryText:k.target.value}),onBlur:()=>x(s.EntryID,{EntryText:s.EntryText}),className:"w-full h-full bg-transparent text-neutral-800 dark:text-neutral-200 focus:outline-none resize-none"})})]}):o.jsx("div",{className:`${m?"hidden":"flex"} flex-1 items-center justify-center text-center`,children:o.jsxs("div",{children:[o.jsx(m6,{size:48,className:"mx-auto text-neutral-300 dark:text-neutral-600"}),o.jsx("h3",{className:"mt-4 text-lg font-medium text-neutral-900 dark:text-white",children:"Select an entry"}),o.jsx("p",{className:"mt-1 text-sm text-neutral-500 dark:text-neutral-400",children:"Choose an entry from the list to view or edit it, or create a new one."})]})})}),o.jsx(KJ,{isOpen:d,onClose:()=>f(!1),onCreate:v})]})},KJ=({isOpen:e,onClose:t,onCreate:r})=>{const[n,s]=g.useState(""),[i,a]=g.useState(!1),l=()=>{r(n,i),s(""),a(!1)};return e?o.jsx(Xt,{children:o.jsx("div",{className:"fixed inset-0 bg-neutral-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs(vt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"New Journal Entry"}),o.jsx("button",{onClick:t,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",children:""})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Title"}),o.jsx("input",{type:"text",value:n,onChange:c=>s(c.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter a title for your entry"})]}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:i,onChange:c=>a(c.target.checked),className:"rounded border-neutral-300 dark:border-neutral-600 text-primary-500 focus:ring-primary-500"}),o.jsx("span",{className:"ml-2 text-sm text-neutral-700 dark:text-neutral-300",children:"Make this entry private"})]})})]}),o.jsxs("div",{className:"flex justify-end p-4 border-t border-neutral-200 dark:border-neutral-700 space-x-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-xl",children:"Cancel"}),o.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Create Entry"})]})]})})}):null},QJ=async e=>{const{data:t}=await K.get(`/family/${e}/wishlists`);return t},ZJ=async(e,t)=>{const{data:r}=await K.post(`/family/${e}/wishlists`,t);return r},XJ=async(e,t,r)=>{const{data:n}=await K.patch(`/family/${e}/wishlists/${t}`,r);return n},JJ=async(e,t)=>{await K.delete(`/family/${e}/wishlists/${t}`)},eee=async(e,t,r)=>{const{data:n}=await K.post(`/family/${e}/wishlists/${t}/items`,r);return n},nN=async(e,t,r,n)=>{const{data:s}=await K.patch(`/family/${e}/wishlists/${t}/items/${r}`,n);return s},tee=async(e,t,r)=>{await K.delete(`/family/${e}/wishlists/${t}/items/${r}`)},ree=async(e,t,r,n,s)=>{const{data:i}=await K.post(`/family/${e}/wishlists/${t}/items/${r}/claim`,{action:n,note:s});return i},nee=async(e,t)=>{const{data:r}=await K.post(`/family/${e}/wishlists/${t}/share`);return r},see=async(e,t)=>{await K.post(`/family/${e}/wishlists/${t}/share/revoke`)},iee=async e=>{const{data:t}=await K.get(`/wishlists/shared/${e}`);return t},aee=e=>e==="PURCHASED"?"Purchased":e==="RESERVED"?"Reserved":"Idea",sN=()=>{const{family:e,activeFamilyId:t,isLoading:r}=Lr(),{registerActionHandler:n,appendLinZMessage:s}=ai(),[i,a]=g.useState([]),[l,c]=g.useState({}),[u,d]=g.useState(null),[f,h]=g.useState(!1),[p,m]=g.useState(!1),[y,b]=g.useState(null),[v,x]=g.useState(""),[w,k]=g.useState(""),[S,E]=g.useState(""),[N,C]=g.useState("FAMILY"),[T,j]=g.useState(null),[I,H]=g.useState(null),[L,D]=g.useState(""),[O,P]=g.useState(""),[U,z]=g.useState(""),[$,ne]=g.useState(""),[X,fe]=g.useState(""),[de,ge]=g.useState("IDEA"),se=g.useMemo(()=>!e||!e.members?[]:e.members.map(_=>{const A=[];_.FirstName&&A.push(_.FirstName),_.LastName&&A.push(_.LastName);const q=A.length?A.join(" "):_.Email||"Family member";return{id:_.UserID,name:q}}),[e]),M=()=>{x(""),k(""),E(""),C("FAMILY"),b(null)},re=()=>{D(""),P(""),z(""),ne(""),fe(""),ge("IDEA"),j(null),H(null)},F=g.useCallback(async()=>{if(!t){a([]);return}try{h(!0),d(null);const _=await QJ(t);a(_),c(A=>{const q={...A};return _.forEach(me=>{!me.shareLinkActive&&q[me.WishListID]&&delete q[me.WishListID]}),q})}catch(_){d(_ instanceof Error?_.message:"Failed to load wishlists")}finally{h(!1)}},[t]);g.useEffect(()=>{F()},[F]),g.useEffect(()=>{const _=n("wishlist.create",()=>{M(),m(!0)}),A=n("wishlist.add_item",q=>{if(!i.length){ie.info("Create a wishlist first so LinZ can add ideas for you."),s("Once you have a wishlist I can add gift ideas to it automatically.");return}let me=i[0];if(q&&typeof q=="object"){const ye=q.title;if(typeof ye=="string"){const gt=ye.trim().toLowerCase(),Ht=i.find(qt=>qt.Title.trim().toLowerCase()===gt);Ht&&(me=Ht)}}j(me.WishListID),H(null)});return()=>{_(),A()}},[s,n,i]);const le=async()=>{if(!t)return;if(!v.trim()){ie.error("A title is required");return}const _={title:v.trim(),description:w.trim()?w.trim():void 0,ownerUserId:S||null,visibility:N};try{y?(await XJ(t,y.WishListID,_),ie.success("Wishlist updated")):(await ZJ(t,_),ie.success("Wishlist created")),m(!1),M(),F()}catch(A){ie.error(A instanceof Error?A.message:"Unable to save wishlist")}},ee=async _=>{if(t)try{await JJ(t,_),ie.success("Wishlist deleted"),F()}catch(A){ie.error(A instanceof Error?A.message:"Unable to delete wishlist")}},we=(_,A)=>{A?(H(A),D(A.Name),P(A.Details||""),z(A.TargetUrl||""),ne(A.PriceMin||""),fe(A.PriceMax||""),ge(A.Status)):re(),j(_.WishListID)},ke=async()=>{if(!t||T===null)return;if(!L.trim()){ie.error("Item name is required");return}const _={name:L.trim(),details:O.trim()?O.trim():void 0,targetUrl:U.trim()?U.trim():void 0,priceMin:$===""?null:$,priceMax:X===""?null:X,status:de};try{I?(await nN(t,T,I.WishListItemID,_),ie.success("Idea updated")):(await eee(t,T,_),ie.success("Idea added")),re(),F()}catch(A){ie.error(A instanceof Error?A.message:"Unable to save idea")}},Ie=async(_,A,q)=>{if(t)try{await nN(t,_,A,{status:q}),ie.success("Status updated"),F()}catch(me){ie.error(me instanceof Error?me.message:"Unable to update status")}},Pe=async(_,A)=>{if(t)try{await tee(t,_,A),ie.success("Idea removed"),F()}catch(q){ie.error(q instanceof Error?q.message:"Unable to remove idea")}},We=async(_,A,q)=>{if(t)try{await ree(t,_,A,q),ie.success(q==="claim"?"Idea reserved":"Reservation cleared"),F()}catch(me){ie.error(me instanceof Error?me.message:"Unable to update reservation")}},Ze=async _=>{if(t)try{const A=await nee(t,_.WishListID);c(q=>({...q,[_.WishListID]:A})),F(),await navigator.clipboard.writeText(A.shareUrl),ie.success("Share link copied to clipboard")}catch(A){ie.error(A instanceof Error?A.message:"Unable to generate share link")}},it=async _=>{if(t)try{await see(t,_.WishListID),c(A=>{const q={...A};return delete q[_.WishListID],q}),F(),ie.info("Share link revoked")}catch(A){ie.error(A instanceof Error?A.message:"Unable to revoke share link")}},Ue=_=>{const A=l[_];return A?A.shareUrl:void 0},Ne=(_,A)=>{const q=statusBadgeClass(A.Status),me=!!A.ClaimedByUserID,ye=A.PriceMin||A.PriceMax?(A.PriceMin||"")+(A.PriceMin&&A.PriceMax?" - ":"")+(A.PriceMax||""):"";return o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 p-4 dark:border-neutral-700 dark:bg-neutral-900/40",children:o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:A.Name}),o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium "+q,children:[o.jsx(Ni,{className:"h-3 w-3"})," ",aee(A.Status)]}),me&&A.claimedBy?o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-accent-100 px-2 py-0.5 text-xs font-medium text-accent-700 dark:bg-accent-900/30 dark:text-accent-200",children:["Reserved by ",A.claimedBy.FirstName||"someone"]}):null]}),A.Details?o.jsx("p",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-300",children:A.Details}):null,o.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-neutral-500 dark:text-neutral-400",children:[ye?o.jsx("span",{children:ye}):null,A.TargetUrl?o.jsxs("a",{href:A.TargetUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary-600 hover:underline dark:text-primary-300",children:[o.jsx(F0,{className:"h-3 w-3"})," View link"]}):null]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{onClick:()=>we(_,A),className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:o.jsx(z0,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>Ie(_.WishListID,A.WishListItemID,"PURCHASED"),className:"inline-flex items-center gap-2 rounded-xl border border-success-200 px-3 py-2 text-sm text-success-700 transition hover:bg-success-50 dark:border-success-500/40 dark:text-success-200",children:o.jsx(Ni,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>We(_.WishListID,A.WishListItemID,me?"unclaim":"claim"),className:"inline-flex items-center gap-2 rounded-xl border border-warning-200 px-3 py-2 text-sm text-warning-700 transition hover:bg-warning-50 dark:border-warning-500/40 dark:text-warning-200",children:me?o.jsx(Nk,{className:"h-4 w-4"}):o.jsx(T6,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>Pe(_.WishListID,A.WishListItemID),className:"inline-flex items-center gap-2 rounded-xl border border-error-200 px-3 py-2 text-sm text-error-600 transition hover:bg-error-50 dark:border-error-500/40 dark:text-error-200",children:o.jsx(ei,{className:"h-4 w-4"})})]})]})},A.WishListItemID)},ze=_=>{const A=Ue(_.WishListID);return A?o.jsxs("div",{className:"mt-4 rounded-xl border border-primary-200 bg-primary-50 px-4 py-3 text-sm text-primary-700 dark:border-primary-500/40 dark:bg-primary-900/30 dark:text-primary-200",children:[o.jsx("p",{className:"font-medium",children:"Share link"}),o.jsx("p",{className:"mt-1 break-words text-xs",children:A}),o.jsxs("div",{className:"mt-2 flex gap-2",children:[o.jsxs("button",{onClick:()=>navigator.clipboard.writeText(A).then(()=>ie.success("Link copied")),className:"inline-flex items-center gap-2 rounded-xl border border-primary-300 px-3 py-2 text-xs font-medium text-primary-600 transition hover:bg-primary-100 dark:border-primary-500/40 dark:text-primary-200",children:[o.jsx($x,{className:"h-3 w-3"})," Copy"]}),o.jsxs("button",{onClick:()=>window.open(A,"_blank","noopener"),className:"inline-flex items-center gap-2 rounded-xl border border-primary-300 px-3 py-2 text-xs font-medium text-primary-600 transition hover:bg-primary-100 dark:border-primary-500/40 dark:text-primary-200",children:[o.jsx(F0,{className:"h-3 w-3"})," Open"]})]})]}):null},R=_=>{const A=se.find(ye=>ye.id===_.OwnerUserID),q=_.Visibility==="PARENTS"?"Parents only":_.Visibility==="LINK"?"Shareable link":"Family",me=_.Visibility==="PARENTS"?"text-xs inline-flex items-center gap-1 rounded-full bg-secondary-100 px-2 py-0.5 text-secondary-700 dark:bg-secondary-900/30 dark:text-secondary-200":_.Visibility==="LINK"?"text-xs inline-flex items-center gap-1 rounded-full bg-primary-100 px-2 py-0.5 text-primary-700 dark:bg-primary-900/30 dark:text-primary-200":"text-xs inline-flex items-center gap-1 rounded-full bg-neutral-100 px-2 py-0.5 text-neutral-700 dark:bg-neutral-700/40 dark:text-neutral-200";return o.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-6 shadow-card transition hover:shadow-card-hover dark:border-neutral-700 dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:_.Title}),_.Description?o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1",children:_.Description}):null,o.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[o.jsx("span",{className:me,children:q}),A?o.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-primary-100 px-3 py-1 text-sm font-medium text-primary-700 dark:bg-primary-900/30 dark:text-primary-200",children:[o.jsx(za,{className:"h-4 w-4"})," ",A.name]}):null]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{onClick:()=>we(_),className:"inline-flex items-center gap-2 rounded-xl border border-primary-200 px-3 py-2 text-sm font-medium text-primary-600 transition hover:bg-primary-50 dark:border-primary-500/40 dark:text-primary-200 dark:hover:bg-primary-900/30",children:[o.jsx(Jt,{className:"h-4 w-4"})," Idea"]}),o.jsxs("button",{onClick:()=>{const ye=Ue(_.WishListID);ye?navigator.clipboard.writeText(ye).then(()=>ie.success("Share link copied")):Ze(_)},className:"inline-flex items-center gap-2 rounded-xl bg-secondary-600 px-3 py-2 text-sm font-medium text-white transition hover:bg-secondary-500",children:[o.jsx(_u,{className:"h-4 w-4"})," Share"]}),_.shareLinkActive?o.jsxs("button",{onClick:()=>it(_),className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(Nk,{className:"h-4 w-4"})," Revoke"]}):null,o.jsxs("button",{onClick:()=>{b(_),x(_.Title),k(_.Description||""),E(_.OwnerUserID||""),C(_.Visibility),m(!0)},className:"inline-flex items-center gap-2 rounded-xl border border-neutral-300 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700",children:[o.jsx(z0,{className:"h-4 w-4"})," Edit"]}),o.jsxs("button",{onClick:()=>ee(_.WishListID),className:"inline-flex items-center gap-2 rounded-xl border border-error-200 px-3 py-2 text-sm font-medium text-error-600 transition hover:bg-error-50 dark:border-error-500/40 dark:text-error-200",children:[o.jsx(ei,{className:"h-4 w-4"})," Remove"]})]})]}),o.jsx("div",{className:"mt-6 space-y-3",children:_.items.length?_.items.map(ye=>Ne(_,ye)):o.jsx("div",{className:"rounded-xl border border-dashed border-neutral-300 p-4 text-sm text-neutral-500 dark:border-neutral-700 dark:text-neutral-400",children:"No ideas yet. Add the first gift to get started!"})}),ze(_)]},_.WishListID)},Q=()=>f?o.jsx("div",{className:"min-h-[30vh] flex items-center justify-center",children:o.jsx(on,{className:"h-8 w-8 animate-spin text-primary-500"})}):i.length?o.jsx("div",{className:"grid grid-cols-1 gap-5 xl:grid-cols-2",children:i.map(R)}):o.jsxs("div",{className:"rounded-2xl border border-dashed border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 p-12 text-center",children:[o.jsx(Da,{className:"mx-auto h-12 w-12 text-primary-500"}),o.jsx("h2",{className:"mt-4 text-xl font-semibold text-neutral-900 dark:text-white",children:"No wishlists yet"}),o.jsx("p",{className:"mt-2 text-neutral-600 dark:text-neutral-400",children:"Start a list for birthdays, holidays, or just to remember favorites."}),o.jsxs("button",{onClick:()=>{M(),m(!0)},className:"mt-4 inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-white shadow-sm transition hover:bg-primary-500",children:[o.jsx(Jt,{className:"h-5 w-5"})," Create your first wishlist"]})]});return r?o.jsx("div",{className:"min-h-[40vh] flex items-center justify-center",children:o.jsx(on,{className:"h-8 w-8 animate-spin text-primary-500"})}):!t||!e?o.jsxs("div",{className:"max-w-3xl mx-auto py-16 text-center",children:[o.jsx(Da,{className:"mx-auto h-12 w-12 text-primary-500"}),o.jsx("h1",{className:"mt-4 text-2xl font-semibold text-neutral-900 dark:text-white",children:"Wishlists live inside a household"}),o.jsx("p",{className:"mt-2 text-neutral-600 dark:text-neutral-400",children:"Join or create a family to start collecting gift ideas and favorites."})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white flex items-center gap-3",children:[o.jsx(Da,{className:"h-8 w-8 text-primary-500"})," Family Wishlists"]}),o.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Collect gift ideas, clothing sizes, and favorites so celebrations are easier for everyone."})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:o.jsxs("button",{onClick:()=>{M(),m(!0)},className:"inline-flex items-center gap-2 rounded-xl bg-primary-600 px-4 py-2 text-white shadow-sm transition hover:bg-primary-500",children:[o.jsx(Jt,{className:"h-5 w-5"})," New wishlist"]})})]}),u?o.jsx("div",{className:"rounded-xl border border-error-200 bg-error-50 px-4 py-3 text-error-700 dark:border-error-500/30 dark:bg-error-900/30 dark:text-error-200",children:u}):null,Q(),p?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-white shadow-2xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:y?"Edit wishlist":"Create wishlist"}),o.jsx("button",{onClick:()=>{m(!1),M()},className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:""})]}),o.jsxs("div",{className:"space-y-4 p-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Title"}),o.jsx("input",{value:v,onChange:_=>x(_.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Description"}),o.jsx("textarea",{value:w,onChange:_=>k(_.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Owner"}),o.jsxs("select",{value:S,onChange:_=>E(_.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",children:[o.jsx("option",{value:"",children:"No specific owner"}),se.map(_=>o.jsx("option",{value:_.id,children:_.name},_.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Visibility"}),o.jsx("div",{className:"mt-2 space-y-2",children:visibilityOptions.map(_=>o.jsxs("label",{className:"flex cursor-pointer flex-col rounded-xl border px-3 py-3 transition "+(N===_.value?"border-primary-400 bg-primary-50 dark:border-primary-400/40 dark:bg-primary-900/30":"border-neutral-200 dark:border-neutral-700"),children:[o.jsxs("span",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-semibold text-neutral-900 dark:text-white",children:_.label}),o.jsx("input",{type:"radio",checked:N===_.value,onChange:()=>C(_.value)})]}),o.jsx("span",{className:"mt-1 text-xs text-neutral-500 dark:text-neutral-400",children:_.description})]},_.value))})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 border-t border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>{m(!1),M()},className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:le,className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-500",children:"Save"})]})]})}):null,T!==null?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-white shadow-2xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:I?"Edit idea":"Add idea"}),o.jsx("button",{onClick:()=>re(),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:""})]}),o.jsxs("div",{className:"space-y-4 p-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Name"}),o.jsx("input",{value:L,onChange:_=>D(_.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Details"}),o.jsx("textarea",{value:O,onChange:_=>P(_.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Link"}),o.jsx("input",{value:U,onChange:_=>z(_.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Min price"}),o.jsx("input",{value:$,onChange:_=>ne(_.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Max price"}),o.jsx("input",{value:X,onChange:_=>fe(_.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Status"}),o.jsxs("select",{value:de,onChange:_=>ge(_.target.value),className:"mt-1 w-full rounded-xl border border-neutral-300 px-3 py-2 text-neutral-900 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-white",children:[o.jsx("option",{value:"IDEA",children:"Idea"}),o.jsx("option",{value:"RESERVED",children:"Reserved"}),o.jsx("option",{value:"PURCHASED",children:"Purchased"})]})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 border-t border-neutral-200 p-4 dark:border-neutral-700",children:[o.jsx("button",{onClick:()=>re(),className:"rounded-xl px-4 py-2 text-sm font-medium text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),o.jsx("button",{onClick:ke,className:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-500",children:"Save"})]})]})}):null]})},oee=async(e,t)=>(await K.put(`/users/${e}`,t)).data,lee=async(e,t)=>{const r=new FormData;return r.append("profilePhoto",t),(await K.post(`/users/${e}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},cee=async e=>{await K.delete(`/users/${e}`)},Op="/api/screen-time";async function uee(e){return(await fetch(`${Op}/connect/${e}`,{method:"POST"})).json()}async function dee(){return(await fetch(`${Op}/children`)).json()}async function fee(e){return(await fetch(`${Op}/grants`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}async function hee(e){return(await fetch(`${Op}/ledger?childId=${encodeURIComponent(e)}`)).json()}function pee(){const[e,t]=g.useState([]),[r,n]=g.useState([]),[s,i]=g.useState(!1),[a,l]=g.useState(null),c=g.useCallback(async()=>{i(!0),l(null);try{const h=await dee();t(h)}catch(h){l(h.message||"Failed to fetch children")}finally{i(!1)}},[]),u=g.useCallback(async h=>{i(!0),l(null);try{const p=await hee(h);n(p)}catch(p){l(p.message||"Failed to fetch ledger")}finally{i(!1)}},[]),d=g.useCallback(async(h,p,m)=>{i(!0),l(null);try{const y=await fee({childId:h,minutesDelta:p,idempotencyKey:m});return await u(h),y}catch(y){throw l(y.message||"Failed to grant screen time"),y}finally{i(!1)}},[u]),f=g.useCallback(async h=>{i(!0),l(null);try{const p=await uee(h);return await c(),p}catch(p){throw l(p.message||"Failed to connect account"),p}finally{i(!1)}},[c]);return{children:e,ledger:r,loading:s,error:a,loadChildren:c,loadLedger:u,grant:d,connect:f}}function mee(){const{children:e,ledger:t,loading:r,error:n,loadChildren:s,loadLedger:i,grant:a,connect:l}=pee(),[c,u]=g.useState(null),[d,f]=g.useState(0),[h,p]=g.useState("APPLE");return g.useEffect(()=>{s()},[s]),g.useEffect(()=>{c&&i(c)},[c,i]),o.jsxs("div",{className:"rounded-2xl shadow-card bg-white dark:bg-neutral-800 p-6 mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4",children:"Screen Time Management"}),n&&o.jsx("div",{className:"text-error-600 bg-error-50 dark:bg-error-900/30 rounded-xl px-4 py-2 mb-4",children:n}),o.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Provider"}),o.jsxs("select",{value:h,onChange:m=>p(m.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"APPLE",children:"Apple"}),o.jsx("option",{value:"GOOGLE",children:"Google"})]})]}),o.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",onClick:()=>l(h),disabled:r,children:"Connect Account"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Child"}),r?o.jsx("div",{className:"text-neutral-500",children:"Loading children..."}):e.length===0?o.jsx("div",{className:"text-neutral-500",children:"No children found. Please connect an account or add children."}):o.jsxs("select",{value:c||"",onChange:m=>u(m.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"",children:"Select..."}),e.map(m=>o.jsx("option",{value:m.id,children:m.name||m.id},m.id))]})]}),o.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:items-center gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Minutes"}),o.jsx("input",{type:"number",value:d,onChange:m=>f(Number(m.target.value)),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),o.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-green-500 hover:bg-green-600 rounded-xl mt-2 md:mt-0",onClick:()=>c&&a(c,d),disabled:r||!c,children:"Grant"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-white mb-2",children:"Ledger"}),r?o.jsx("div",{className:"text-neutral-500",children:"Loading ledger..."}):t.length===0?o.jsx("div",{className:"text-neutral-500",children:"No ledger entries found."}):o.jsxs("table",{className:"w-full border rounded-xl overflow-hidden",children:[o.jsx("thead",{className:"bg-neutral-100 dark:bg-neutral-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border px-2 py-1 text-left",children:"Date"}),o.jsx("th",{className:"border px-2 py-1 text-left",children:"Minutes"}),o.jsx("th",{className:"border px-2 py-1 text-left",children:"Status"})]})}),o.jsx("tbody",{children:t.map(m=>o.jsxs("tr",{className:"bg-white dark:bg-neutral-800",children:[o.jsx("td",{className:"border px-2 py-1",children:m.awardedAt||m.appliedAt||m.createdAt}),o.jsx("td",{className:"border px-2 py-1",children:m.screenMinutes||m.minutesDelta}),o.jsx("td",{className:"border px-2 py-1",children:m.status||"APPLIED"})]},m.id))})]})]})]})}const iN=()=>{const{user:e,logout:t}=Ot(),r=zn(),n=Nn(),{rewardMode:s}=Lr(),[i,a]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,h]=g.useState(null),[p,m]=g.useState(!0),[y,b]=g.useState(null),[v,x]=g.useState(!1),[w,k]=g.useState(!1),[S,E]=g.useState([]);g.useEffect(()=>{x(window.matchMedia("(display-mode: standalone)").matches),k(/iPad|iPhone|iPod/.test(navigator.userAgent))},[]),g.useEffect(()=>{(async()=>{try{m(!0);const L=await K.get("/vapid-public-key");if(h(L.data.publicKey),"serviceWorker"in navigator&&navigator.serviceWorker.ready){const O=await(await navigator.serviceWorker.ready).pushManager.getSubscription();d(!!O)}}catch(L){console.error("Error fetching VAPID key or checking subscription:",L),b(L.message||"Failed to load push notification status.")}finally{m(!1)}})()},[]),g.useEffect(()=>{d_().then(E).catch(L=>{console.error("Failed to fetch integration status",L),ie.error("Could not load integration status.")});const H=new URLSearchParams(n.search);H.get("integration")==="instacart_success"?(ie.success("Successfully connected to Instacart!"),r("/settings",{replace:!0})):H.get("integration")==="shipt_success"?(ie.success("Successfully connected to Shipt!"),r("/settings",{replace:!0})):H.get("integration")==="kroger_success"&&(ie.success("Successfully connected to Kroger!"),r("/settings",{replace:!0}))},[n.search,r]);const N=g.useCallback(async()=>{},[f]),C=g.useCallback(async()=>{},[]),T=async H=>{try{H.toUpperCase()==="INSTACART"?(await PQ(),ie.success("Disconnected from Instacart."),E(L=>L.filter(D=>D!=="INSTACART"))):H.toUpperCase()==="SHIPT"?(await disconnectShipt(),ie.success("Disconnected from Shipt."),E(L=>L.filter(D=>D!=="SHIPT"))):H.toUpperCase()==="KROGER"&&(await disconnectKroger(),ie.success("Disconnected from Kroger."),E(L=>L.filter(D=>D!=="KROGER")))}catch{ie.error(`Failed to disconnect from ${H}.`)}},j=g.useCallback(async()=>{var L,D;const H=(e==null?void 0:e.id)??(e==null?void 0:e.UserID)??null;if(!H){ie.error("Unable to determine which account to delete.");return}c(!0);try{await cee(String(H)),ie.success("Your account has been deleted."),a(!1),await t(),r("/login",{replace:!0})}catch(O){console.error("Failed to delete account",O);const P=((D=(L=O==null?void 0:O.response)==null?void 0:L.data)==null?void 0:D.error)||(O==null?void 0:O.message)||"Failed to delete account.";ie.error(P)}finally{c(!1)}},[t,r,e]),I=g.useCallback(async()=>{await t(),r("/login",{replace:!0})},[t,r]);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-1",children:"Settings"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Manage your account preferences and settings"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1",children:[o.jsx("nav",{className:"space-y-1",children:o.jsxs(br,{to:"/profile",className:"flex items-center px-4 py-3 text-neutral-900 dark:text-white bg-white dark:bg-neutral-800 rounded-2xl shadow-card",children:[o.jsx(k6,{className:"h-5 w-5 text-primary-500"}),o.jsx("span",{className:"ml-3",children:"Profile"}),o.jsx(Wx,{className:"ml-auto h-5 w-5 text-neutral-400"})]})}),o.jsxs("div",{className:"mt-6 space-y-4",children:[o.jsxs("button",{type:"button",onClick:I,className:"flex items-center w-full px-4 py-3 text-neutral-700 dark:text-neutral-300 hover:bg-white dark:hover:bg-neutral-800 rounded-2xl transition-colors",children:[o.jsx(b2,{className:"h-5 w-5 text-neutral-500"}),o.jsx("span",{className:"ml-3",children:"Sign out"})]}),o.jsxs("button",{onClick:()=>a(!0),disabled:l,className:"flex items-center w-full px-4 py-3 text-error-600 hover:bg-error-50 dark:hover:bg-error-900/30 rounded-2xl transition-colors disabled:cursor-not-allowed disabled:opacity-70",children:[o.jsx(Ek,{className:"h-5 w-5"}),o.jsx("span",{className:"ml-3",children:"Delete Account"})]})]})]}),o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs("section",{id:"push-notifications",className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-6",children:"Push Notifications"}),w&&!v?o.jsxs("div",{children:[o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"To enable push notifications, you need to add this web app to your Home Screen."}),o.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400 mt-2",children:["Tap the ",o.jsx("span",{className:"font-bold",children:"Share"})," button ( ",o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-box-arrow-up inline-block",viewBox:"0 0 16 16",children:[o.jsx("path",{"fill-rule":"evenodd",d:"M3.5 6a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 1 0-1h2A1.5 1.5 0 0 1 14 6.5v8a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-8A1.5 1.5 0 0 1 3.5 5h2a.5.5 0 0 1 0 1h-2z"}),o.jsx("path",{"fill-rule":"evenodd",d:"M7.646.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 1.707V10.5a.5.5 0 0 1-1 0V1.707L5.354 3.854a.5.5 0 1 1-.708-.708l3-3z"})]})," ) in Safari and then select 'Add to Home Screen'."]})]}):p?o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Loading push notification status..."}):y?o.jsx("p",{className:"text-red-500",children:y}):o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{htmlFor:"push-toggle",className:"text-neutral-700 dark:text-neutral-300",children:"Enable Push Notifications"}),o.jsx("input",{type:"checkbox",id:"push-toggle",checked:u,onChange:()=>{u?C():N()},className:`relative w-10 h-5 transition-colors duration-200 ease-in-out bg-neutral-200 dark:bg-neutral-700 rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 cursor-pointer appearance-none
                  checked:bg-primary-500 checked:after:translate-x-full checked:after:border-white
                  after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:h-4 after:w-4 after:rounded-full after:bg-white after:shadow-md after:transition-transform after:duration-200 after:ease-in-out`})]})]}),o.jsxs("section",{id:"integrations",className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-6",children:"Integrations"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:"Instacart"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Connect your Instacart account to add shopping lists directly to your cart."})]}),S.includes("INSTACART")?o.jsx("button",{onClick:()=>T("INSTACART"),className:"px-4 py-2 text-sm font-medium text-white bg-red-500 hover:bg-red-600 rounded-xl",children:"Disconnect"}):o.jsx("a",{href:`${K.defaults.baseURL}/integrations/instacart/connect`,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",children:"Connect"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:"Shipt"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Connect your Shipt account to add shopping lists directly to your cart."})]}),S.includes("SHIPT")?o.jsx("button",{onClick:()=>T("SHIPT"),className:"px-4 py-2 text-sm font-medium text-white bg-red-500 hover:bg-red-600 rounded-xl",children:"Disconnect"}):o.jsx("a",{href:`${K.defaults.baseURL}/integrations/shipt/connect`,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",children:"Connect"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-neutral-900 dark:text-white",children:"Kroger"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Connect your Kroger account to add shopping lists directly to your cart."})]}),S.includes("KROGER")?o.jsx("button",{onClick:()=>T("KROGER"),className:"px-4 py-2 text-sm font-medium text-white bg-red-500 hover:bg-red-600 rounded-xl",children:"Disconnect"}):o.jsx("a",{href:`${K.defaults.baseURL}/integrations/kroger/connect`,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-xl",children:"Connect"})]})]})]}),(s==="screenTime"||s==="hybrid")&&o.jsx("section",{id:"screen-time",className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:o.jsx(mee,{})})]})]}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4",children:o.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl dark:bg-neutral-800",children:[o.jsxs("div",{className:"mb-4 flex items-center",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-error-100 text-error-600 dark:bg-error-900/40 dark:text-error-300",children:o.jsx(Ek,{className:"h-5 w-5"})}),o.jsx("h2",{className:"ml-3 text-lg font-semibold text-neutral-900 dark:text-white",children:"Delete account"})]}),o.jsx("p",{className:"mb-6 text-sm text-neutral-600 dark:text-neutral-300",children:"Deleting your FamConomy account removes your personal data and access. This action cannot be undone."}),o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[o.jsx("button",{type:"button",onClick:()=>a(!1),className:"w-full rounded-xl border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-700 transition-colors hover:bg-neutral-50 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-700/60 sm:w-auto",disabled:l,children:"Cancel"}),o.jsx("button",{type:"button",onClick:j,className:"w-full rounded-xl bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-red-500 dark:hover:bg-red-400 sm:w-auto",disabled:l,children:l?"Deleting...":"Delete account"})]})]})})]})},gee=mr("profile-page"),aN=()=>{const{user:e,setUser:t}=Ot(),[r,n]=g.useState((e==null?void 0:e.firstName)||""),[s,i]=g.useState((e==null?void 0:e.lastName)||""),[a,l]=g.useState((e==null?void 0:e.email)||""),[c,u]=g.useState((e==null?void 0:e.phoneNumber)||"");g.useEffect(()=>{if(e){const[h,...p]=e.fullName.split(" ");n(h||""),i(p.join(" ")||""),l(e.email),u(e.phoneNumber||"")}},[e]);const d=async()=>{if(!e)return;const h={FirstName:r,LastName:s,Email:a,PhoneNumber:c};try{const p=await oee(e.id,h);t(p),alert("Profile updated successfully!")}catch(p){gee.error("Failed to update profile:",p.response||p),alert("Failed to update profile.")}},f=async h=>{if(h.target.files&&h.target.files[0]&&e)try{const p=await lee(e.id,h.target.files[0]);t(p),alert("Profile photo updated successfully!")}catch{alert("Failed to upload profile photo.")}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(br,{to:"/settings",className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-500 dark:text-neutral-400",children:o.jsx(tp,{size:24})}),o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Profile"})]}),o.jsxs("section",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-6",children:"Profile Information"}),o.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[o.jsx("img",{src:(e==null?void 0:e.profilePhotoUrl)||"https://i.pravatar.cc/100",alt:"Profile",className:"h-20 w-20 rounded-full object-cover"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Profile Photo"}),o.jsx("input",{type:"file",id:"profile-photo-upload",className:"hidden",onChange:f}),o.jsx("label",{htmlFor:"profile-photo-upload",className:"cursor-pointer text-sm text-primary-500 hover:text-primary-600",children:"Upload new photo"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Full Name"}),o.jsx("input",{type:"text",value:`${r} ${s}`,onChange:h=>{const[p,...m]=h.target.value.split(" ");n(p||""),i(m.join(" ")||"")},className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Email Address"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"email",value:a,onChange:h=>l(h.target.value),className:"flex-1 px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),o.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-success-100 text-success-800 dark:bg-success-900/30 dark:text-success-400",children:"Verified"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Phone Number"}),o.jsx("input",{type:"tel",value:c,onChange:h=>u(h.target.value),className:"w-full px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),o.jsx("div",{className:"pt-4 border-t border-neutral-200 dark:border-neutral-700",children:o.jsx("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 dark:hover:bg-primary-400 rounded-xl",children:"Save Changes"})})]})]})]})},Z_=({size:e="md",color:t="white"})=>{const r={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return o.jsx("div",{className:"flex justify-center items-center",children:o.jsx("div",{className:`animate-spin rounded-full border-2 border-t-transparent ${r[e]}`,style:{borderColor:`${t} transparent transparent transparent`}})})},yee=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(""),[s,i]=g.useState(!1),{login:a,loginWithProvider:l,isLoading:c,error:u}=Ot(),d=zn(),f=async h=>{h.preventDefault();try{await a({email:e,password:r}),d("/app")}catch(p){const m=p.message||"";m.includes("User not found")?d("/join",{state:{email:e,password:r}}):m.includes("Invalid credentials")&&setError("Invalid email or password.")}};return o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[u&&o.jsx("div",{className:"p-3 bg-error-50 border border-error-200 text-error-700 rounded-md text-sm",children:u}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Email address"}),o.jsx("input",{id:"email",type:"email",required:!0,value:e,onChange:h=>t(h.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"admin@example.com"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",type:s?"text":"password",required:!0,value:r,onChange:h=>n(h.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:""}),o.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-2 text-neutral-500",children:s?o.jsx(S6,{size:18}):o.jsx(E6,{size:18})})]}),o.jsx("div",{className:"flex justify-end mt-1",children:o.jsx(br,{to:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-700",children:"Forgot password?"})})]}),o.jsx("button",{type:"submit",disabled:c,className:"w-full bg-primary-600 hover:bg-primary-700 text-white rounded-md px-4 py-3 font-medium transition-colors disabled:opacity-70",children:c?o.jsx(Z_,{size:"sm"}):"Sign in"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-neutral-300"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 text-neutral-500 bg-white",children:"Or continue with"})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{type:"button",onClick:()=>l("google"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:[o.jsx("path",{d:"M21.4 10.2c0-.7-.1-1.4-.2-2.1h-9.2v4h5.2c-.2 1.3-1 2.5-2.2 3.3v2.7h3.5c2-1.9 3.2-4.7 3.2-7.9z"}),o.jsx("path",{d:"M12 21c2.8 0 5.2-1 6.9-2.6l-3.5-2.7c-.9.6-2.1 1-3.4 1-2.6 0-4.8-1.8-5.6-4.2H2.9v2.8C4.7 18.5 8.1 21 12 21z"}),o.jsx("path",{d:"M6.4 12.9c-.1-.6-.1-1.2 0-1.8V8.3H2.9c-1.5 3-1.5 6.4 0 9.4l3.5-2.8z"}),o.jsx("path",{d:"M12 3.9c1.5 0 2.9.5 3.9 1.5l3.1-3.1C17.2.6 14.8 0 12 0 8.1 0 4.7 2.5 2.9 6.2l3.5 2.8c.8-2.4 3-4.1 5.6-4.1z"})]}),"Google"]}),o.jsxs("button",{type:"button",onClick:()=>l("facebook"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:o.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})}),"Facebook"]}),o.jsxs("button",{type:"button",onClick:()=>l("apple"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:o.jsx("path",{d:"M12 20.94c1.5 0 2.75-1.12 2.75-2.63 0-1.5-1.25-2.62-2.75-2.62s-2.75 1.12-2.75 2.62c0 1.51 1.25 2.63 2.75 2.63zM12 4.38c-2.25 0-4.25 1.5-4.25 3.5 0 1.5 1 2.62 2.25 3.12-1.25.5-2.25 1.62-2.25 3.12 0 2 2 3.5 4.25 3.5s4.25-1.5 4.25-3.5c0-1.5-1-2.62-2.25-3.12 1.25-.5 2.25-1.62 2.25-3.12 0-2-2-3.5-4.25-3.5z"})}),"Apple"]}),o.jsxs("button",{type:"button",onClick:()=>l("microsoft"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:[o.jsx("rect",{x:"2",y:"2",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"13",y:"2",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"2",y:"13",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"13",y:"13",width:"9",height:"9",rx:"1"})]}),"Microsoft"]})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-sm text-neutral-600",children:["Don't have an account? "," ",o.jsx(br,{to:"/join",className:"font-medium text-primary-600 hover:text-primary-500",children:"Join FamConomy"})]})})]})},xee=()=>o.jsxs("div",{className:"min-h-screen bg-neutral-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(Ua,{size:"lg"})}),o.jsx("p",{className:"mt-2 text-center text-sm text-neutral-600",children:"Sign in to your account to access the dashboard"})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsx("div",{className:"bg-white py-8 px-4 shadow-card sm:rounded-lg sm:px-10",children:o.jsx(yee,{})})})]}),vee=()=>{var E,N;const[e]=Hh(),t=zn(),{login:r,loginWithProvider:n}=Ot(),s=Nn(),[i,a]=g.useState(((E=s.state)==null?void 0:E.email)||""),[l,c]=g.useState(((N=s.state)==null?void 0:N.password)||""),[u,d]=g.useState(""),[f,h]=g.useState(""),[p,m]=g.useState(""),[y,b]=g.useState(null),[v,x]=g.useState(!1),[w,k]=g.useState(!1);g.useEffect(()=>{const C=e.get("token");C&&(x(!0),m("Checking invitation..."),(async()=>{try{const j=await K.get(`/invitations/details?token=${C}`),{email:I}=j.data;(await K.get(`/auth/check-email?email=${I}`)).data.exists?(m("You already have an account. Please log in to accept the invitation."),t("/login",{state:{email:I,from:s}})):(a(I),k(!0),m("Welcome to the family! Please complete your registration."))}catch(j){const I=j instanceof Error?j.message:"Failed to process invitation.";b(I),m(`Error: ${I}`)}})())},[e,t,s]);const S=async C=>{C.preventDefault(),b(null),m("");try{await K.post("/auth/register",{email:i,password:l,firstName:u,lastName:f}),m("Registration successful! Redirecting..."),await r({email:i,password:l}),v&&w?t("/",{replace:!0}):t("/onboarding",{replace:!0})}catch(T){const j=T instanceof Error?T.message:"Registration failed.";b(j),m(`Registration failed: ${j}`)}};return o.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-800 p-8 rounded-lg shadow-lg text-center w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-6",children:v&&w?"Welcome to the Family!":"Join FamConomy"}),p&&o.jsx("p",{className:`mb-4 ${y?"text-red-500":"text-green-500"}`,children:p}),(!v||w||y)&&o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[o.jsx("div",{children:o.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:C=>a(C.target.value),required:!0,className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:v&&w})}),o.jsx("div",{children:o.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:C=>c(C.target.value),required:!0,className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})}),o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"First Name",value:u,onChange:C=>d(C.target.value),required:!0,className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})}),o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"Last Name",value:f,onChange:C=>h(C.target.value),required:!0,className:"w-full px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})}),o.jsx("button",{type:"submit",className:"w-full bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Register"})]}),o.jsxs("div",{className:"relative mt-6",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-neutral-300 dark:border-neutral-600"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 text-neutral-500 dark:text-neutral-400 bg-white dark:bg-neutral-800",children:"Or continue with"})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[o.jsxs("button",{type:"button",onClick:()=>n("google"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:[o.jsx("path",{d:"M21.4 10.2c0-.7-.1-1.4-.2-2.1h-9.2v4h5.2c-.2 1.3-1 2.5-2.2 3.3v2.7h3.5c2-1.9 3.2-4.7 3.2-7.9z"}),o.jsx("path",{d:"M12 21c2.8 0 5.2-1 6.9-2.6l-3.5-2.7c-.9.6-2.1 1-3.4 1-2.6 0-4.8-1.8-5.6-4.2H2.9v2.8C4.7 18.5 8.1 21 12 21z"}),o.jsx("path",{d:"M6.4 12.9c-.1-.6-.1-1.2 0-1.8V8.3H2.9c-1.5 3-1.5 6.4 0 9.4l3.5-2.8z"}),o.jsx("path",{d:"M12 3.9c1.5 0 2.9.5 3.9 1.5l3.1-3.1C17.2.6 14.8 0 12 0 8.1 0 4.7 2.5 2.9 6.2l3.5 2.8c.8-2.4 3-4.1 5.6-4.1z"})]}),"Google"]}),o.jsxs("button",{type:"button",onClick:()=>n("facebook"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:o.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})}),"Facebook"]}),o.jsxs("button",{type:"button",onClick:()=>n("apple"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:o.jsx("path",{d:"M12 20.94c1.5 0 2.75-1.12 2.75-2.63 0-1.5-1.25-2.62-2.75-2.62s-2.75 1.12-2.75 2.62c0 1.51 1.25 2.63 2.75 2.63zM12 4.38c-2.25 0-4.25 1.5-4.25 3.5 0 1.5 1 2.62 2.25 3.12-1.25.5-2.25 1.62-2.25 3.12 0 2 2 3.5 4.25 3.5s4.25-1.5 4.25-3.5c0-1.5-1-2.62-2.25-3.12 1.25-.5 2.25-1.62 2.25-3.12 0-2-2-3.5-4.25-3.5z"})}),"Apple"]}),o.jsxs("button",{type:"button",onClick:()=>n("microsoft"),className:"flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2",children:[o.jsx("rect",{x:"2",y:"2",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"13",y:"2",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"2",y:"13",width:"9",height:"9",rx:"1"}),o.jsx("rect",{x:"13",y:"13",width:"9",height:"9",rx:"1"})]}),"Microsoft"]})]})]})})},rt=[{label:"Next stop",action:"tour.advance",tone:"primary"},{label:"Skip tour",action:"tour.skip",tone:"secondary"}],X_=[{label:"Wrap up",action:"tour.finish",tone:"primary"},{label:"Start over",action:"tour.restart",tone:"secondary"}],bee=[{id:"orientation",title:"Getting Around",intro:"Let me show you how the FamConomy home base is laid out.",steps:[{id:"welcome-intro",target:"body",placement:"center",disableBeacon:!0,message:"Welcome to FamConomy! I'll point out the spots that keep your crew organized.",suggestions:rt,ensureSidebar:!1},{id:"orientation-sidebar",target:"#nav-dashboard",route:"/",message:"The sidebar is your launchpad. Dashboard brings you back to home at any time.",suggestions:rt,ensureSidebar:!0},{id:"orientation-dashboard",target:"#dashboard-overview",route:"/",message:"Your dashboard summarizes today's wins, tasks, and quick jumps into each feature.",suggestions:rt,ensureSidebar:!1}]},{id:"family",title:"Family Setup",intro:"Let's make sure everyone's invited and organized.",steps:[{id:"family-nav",target:"#nav-family",route:"/family",message:"Head to the Family hub to invite members, assign roles, and manage households.",suggestions:rt,ensureSidebar:!0},{id:"family-members-panel",target:"#family-members-panel",route:"/family",message:"This panel lists everyone in your household along with their roles and access.",suggestions:rt,ensureSidebar:!1}]},{id:"tasks",title:"Tasks & Gigs",intro:"Let's organize chores and rewards.",steps:[{id:"tasks-nav",target:"#nav-tasks",route:"/tasks",message:"Tasks keeps assignments organized by persongreat for quick check-ins.",suggestions:rt,ensureSidebar:!0},{id:"tasks-board",target:"#tasks-board",route:"/tasks",message:"Create, assign, and review progress here. Tap a task to edit details or approve completions.",suggestions:rt,ensureSidebar:!1},{id:"gigs-nav",target:"#nav-gigs",route:"/gigs",message:"Gigs layer in cadence, rewards, and who claims each responsibility.",suggestions:rt,ensureSidebar:!0},{id:"gigs-board",target:"#gigs-board",route:"/gigs",message:"Use gigs to define repeating jobs, payouts, and claim rules for your crew.",suggestions:rt,ensureSidebar:!1}]},{id:"money",title:"Finance & Shopping",intro:"Time to check on the family finances and lists.",steps:[{id:"budget-nav",target:"#nav-budget",route:"/budget",message:"The Finance area tracks allowance, savings goals, and spending trends.",suggestions:rt,ensureSidebar:!0},{id:"budget-overview",target:"#budget-overview",route:"/budget",message:"Review categories, see progress, and plan upcoming expenses here.",suggestions:rt,ensureSidebar:!1},{id:"shopping-nav",target:"#nav-shopping",route:"/shopping",message:"Shopping lists keep errands in sync so nothing gets missed.",suggestions:rt,ensureSidebar:!0},{id:"shopping-lists",target:"#shopping-lists-panel",route:"/shopping",message:"Create lists, assign items, and check things off together in real time.",suggestions:rt,ensureSidebar:!1}]},{id:"planning",title:"Plan & Communicate",intro:"Stay aligned with schedules and conversations.",steps:[{id:"calendar-nav",target:"#nav-calendar",route:"/calendar",message:"The shared calendar keeps practices, appointments, and reminders lined up.",suggestions:rt,ensureSidebar:!0},{id:"calendar-board",target:"#calendar-board",route:"/calendar",message:"Switch between views, add events, and approve suggestions in this workspace.",suggestions:rt,ensureSidebar:!1},{id:"messages-nav",target:"#nav-messages",route:"/messages",message:"Messages gather family chats, announcements, and assistant updates in one feed.",suggestions:rt,ensureSidebar:!0},{id:"messages-thread",target:"#messages-thread",route:"/messages",message:"Use threads to keep conversations tidy. Pin important chats so everyone sees them.",suggestions:rt,ensureSidebar:!1}]},{id:"reflection",title:"Journal & Feedback",intro:"Capture memories and share what's working.",steps:[{id:"journal-nav",target:"#nav-journal",route:"/journal",message:"The family journal is perfect for milestones, gratitude, and reflections.",suggestions:rt,ensureSidebar:!0},{id:"journal-board",target:"#journal-board",route:"/journal",message:"Start entries, add comments, and keep private notes as needed.",suggestions:rt,ensureSidebar:!1},{id:"feedback-entry",target:"#sidebar-feedback",route:"/",message:"Tap Feedback anytime to share ideas or flag bugseverything reaches the FamConomy team.",suggestions:rt,ensureSidebar:!0}]},{id:"assistant",title:"LinZ at Your Side",intro:"Last stopyour co-pilot.",steps:[{id:"linz-toggle",target:"#linz-chat-toggle",route:"/",message:"Ping me from this buttonI can revisit parts of the tour or answer questions anytime.",suggestions:X_,ensureSidebar:!1}]}],wee=[{id:"orientation-child",title:"Getting Started",intro:"Here's what matters most for you.",steps:[{id:"child-dashboard",target:"#nav-dashboard",route:"/",message:"Dashboard shows your day at a glancetasks, rewards, and quick wins.",suggestions:rt,ensureSidebar:!0},{id:"child-dashboard-widgets",target:"#dashboard-overview",route:"/",message:"Jump into tasks, messages, or journal entries from these tiles.",suggestions:rt,ensureSidebar:!1}]},{id:"child-tasks",title:"Tasks & Gigs",intro:"Stay on top of what's assigned to you.",steps:[{id:"child-tasks-nav",target:"#nav-tasks",route:"/tasks",message:"Tasks lists everything you need to complete. Filter by what's due next.",suggestions:rt,ensureSidebar:!0},{id:"child-tasks-board",target:"#tasks-board",route:"/tasks",message:"Open a task to see notes, claim rewards, or mark it done.",suggestions:rt,ensureSidebar:!1},{id:"child-gigs-nav",target:"#nav-gigs",route:"/gigs",message:"Gigs show repeating responsibilities and the rewards you can earn.",suggestions:rt,ensureSidebar:!0},{id:"child-gigs-board",target:"#gigs-board",route:"/gigs",message:"Claim a gig when you are ready so everyone knows who's on it.",suggestions:rt,ensureSidebar:!1}]},{id:"child-money",title:"Money & Shopping",intro:"Track your rewards and shared lists.",steps:[{id:"child-budget-nav",target:"#nav-budget",route:"/budget",message:"See allowances, savings goals, and how close you are to each reward.",suggestions:rt,ensureSidebar:!0},{id:"child-budget-overview",target:"#budget-overview",route:"/budget",message:"Watch your progress bars climb as you complete gigs and save.",suggestions:rt,ensureSidebar:!1},{id:"child-shopping-nav",target:"#nav-shopping",route:"/shopping",message:"Help with shopping listscheck items off or add what you need.",suggestions:rt,ensureSidebar:!0},{id:"child-shopping-panel",target:"#shopping-lists-panel",route:"/shopping",message:"Each list shows who added the item and any notes.",suggestions:rt,ensureSidebar:!1}]},{id:"child-communication",title:"Stay Connected",intro:"Keep in touch with family updates.",steps:[{id:"child-calendar-nav",target:"#nav-calendar",route:"/calendar",message:"Check the calendar to know what's coming up for the family.",suggestions:rt,ensureSidebar:!0},{id:"child-calendar-board",target:"#calendar-board",route:"/calendar",message:"Tap any event to see details or reminders you need to follow.",suggestions:rt,ensureSidebar:!1},{id:"child-messages-nav",target:"#nav-messages",route:"/messages",message:"Messages keep you in the loopshare updates or ask for help.",suggestions:rt,ensureSidebar:!0},{id:"child-messages-thread",target:"#messages-thread",route:"/messages",message:"Reply in the thread so everyone stays on the same page.",suggestions:rt,ensureSidebar:!1},{id:"child-journal-nav",target:"#nav-journal",route:"/journal",message:"Use the journal to celebrate wins or jot down what happened today.",suggestions:rt,ensureSidebar:!0},{id:"child-journal-board",target:"#journal-board",route:"/journal",message:"Start a new entry or add reactions to a family moment.",suggestions:X_,ensureSidebar:!1}]}],kee=e=>{const t=e==="guardian"?"parent":e;return{welcomeMessage:t==="child"?"Nice work joining the family hub! Want me to walk you through the highlights?":"Welcome aboard! Ready for a quick guided tour of FamConomy? I can point out the big wins.",inviteMessage:"I can always revisit parts of the tour laterjust ask me for help.",modules:t==="child"?wee:bee}},oN={default:[{label:"Next stop",action:"tour.advance",tone:"primary"},{label:"Skip tour",action:"tour.skip",tone:"secondary"}],final:[{label:"Finish up",action:"tour.finish",tone:"primary"},{label:"Start over",action:"tour.restart",tone:"secondary"}]},See=[{label:"Let's do it",action:"tour.accept",tone:"primary"},{label:"Maybe later",action:"tour.dismiss",tone:"secondary"}],Eee=e=>`${e}-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,7)}`,lN=2e3,Nee=400,Cee="app-shell:openSidebar",jee="app-shell:closeSidebar",Tee=e=>!e||e==="guardian"?"parent":e,Aee=e=>{if(e===!0)return{seen:!0,status:"completed"};if(typeof e=="object"&&e!==null){const t=e,r=typeof t.status=="string"?t.status:void 0,n=typeof t.value=="string"?t.value:void 0,s=r??n,i=typeof t.seenAt=="string"?t.seenAt:void 0;if(s==="completed"||s==="skipped")return{seen:!0,status:s,seenAt:i}}return{seen:!1}},J_=({familyId:e,userId:t,audience:r,offerTrigger:n=!1,extraSteps:s=[]})=>{const i=Tee(r),a=g.useMemo(()=>kee(i),[i]),l=g.useMemo(()=>oN.default,[]),c=g.useMemo(()=>oN.final,[]),u=g.useMemo(()=>a.modules.flatMap(Q=>Q.steps.map((_,A)=>({..._,moduleId:Q.id,sequenceId:`${Q.id}-${A}`,content:_.content??_.message}))),[a.modules]),d=g.useMemo(()=>s.map((R,Q)=>({...R,moduleId:R.moduleId??"extra",sequenceId:R.sequenceId??`extra-${Q}`,content:R.content??R.message??(typeof R.content=="string"?R.content:"")})),[s]),f=g.useMemo(()=>d.length?[...u,...d]:u,[u,d]),h=g.useMemo(()=>{const R=new Map;return a.modules.forEach(Q=>{R.set(Q.id,{intro:Q.intro,outro:Q.outro,title:Q.title})}),R},[a.modules]),[p,m]=g.useState(null),[y,b]=g.useState("unknown"),[v,x]=g.useState(!1),[w,k]=g.useState({run:!1,steps:f,stepIndex:0}),S=g.useRef(null),E=g.useRef(new Set),N=g.useRef(!1),C=g.useRef(null),T=g.useRef(null),j=g.useRef({}),I=u8(),H=zn(),L=Nn(),{appendLinZMessage:D,openChat:O,registerActionHandler:P}=ai(),U=g.useMemo(()=>mr("onboarding-tour"),[]),z=g.useCallback(R=>{if(!I){U.log("openSidebar: controls unavailable, dispatching event",{delay:R}),typeof window<"u"&&window.dispatchEvent(new CustomEvent(Cee,{detail:{delay:R??0}}));return}const Q=()=>{var _,A;U.log("openSidebar: activating controls"),(_=I.ensureSidebarExpanded)==null||_.call(I),I.isMobile&&(U.log("openSidebar: invoking openMobileMenu"),(A=I.openMobileMenu)==null||A.call(I))};R&&R>0?(U.log("openSidebar: scheduling with delay",{delay:R}),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{Q(),C.current=null},R)):(U.log("openSidebar: immediate activation"),Q())},[I,U]),$=g.useCallback(R=>{if(!I){U.log("closeSidebar: controls unavailable, dispatching event",{delay:R}),typeof window<"u"&&window.dispatchEvent(new CustomEvent(jee,{detail:{delay:R??0}}));return}const Q=()=>{var _,A;U.log("closeSidebar: collapsing sidebar"),(_=I.setSidebarCollapsed)==null||_.call(I,!0),I.isMobile&&(U.log("closeSidebar: closing mobile menu"),(A=I.closeMobileMenu)==null||A.call(I))};R&&R>0?(U.log("closeSidebar: scheduling with delay",{delay:R}),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{Q(),C.current=null},R)):(U.log("closeSidebar: immediate"),Q())},[I,U]),ne=g.useRef(null),X=g.useRef(null),fe=g.useRef(null),de=g.useCallback(()=>{ne.current&&(clearTimeout(ne.current),ne.current=null),X.current&&(clearTimeout(X.current),X.current=null),fe.current&&(fe.current.classList.remove("tour-highlight"),fe.current=null)},[]),ge=g.useCallback((R,Q=0)=>{if(typeof document>"u"||!(R!=null&&R.target))return;let _=null;if(typeof R.target=="string"){const A=R.target.trim();if(!A||A==="body")return;_=document.querySelector(A)}else R.target instanceof HTMLElement&&(_=R.target);_?(fe.current&&fe.current!==_&&fe.current.classList.remove("tour-highlight"),fe.current=_,_.classList.add("tour-highlight"),_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})):Q<12&&(X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{ge(R,Q+1)},150))},[]),se=g.useCallback((R,Q=0)=>{de(),R!=null&&R.target&&(ne.current&&clearTimeout(ne.current),ne.current=setTimeout(()=>{ge(R)},Math.max(Q,0)))},[de,ge]),M=g.useCallback(()=>{if(!I)return U.log("isSidebarClosed: controls unavailable"),!0;const R={isMobile:I.isMobile,isMobileMenuOpen:I.isMobileMenuOpen,isSidebarCollapsed:I.isSidebarCollapsed};return U.log("isSidebarClosed: controls state",R),I.isMobile?!I.isMobileMenuOpen:I.isSidebarCollapsed},[I,U]),re=g.useCallback(R=>{const Q=f[R];if(!Q)return;const _=Q.ensureSidebar!==!1,A=I!=null&&I.isMobile?250:0,q=Q.route?Q.route.startsWith("/")?Q.route:"/"+Q.route:void 0;U.log("ensureStepContext: evaluating step context",{index:R,needsSidebar:_,route:q}),_?(U.log("ensureStepContext: opening sidebar for step",{index:R}),z()):(U.log("ensureStepContext: closing sidebar for step",{index:R}),$()),q&&L.pathname!==q?(T.current&&(clearTimeout(T.current),T.current=null),_?(U.log("ensureStepContext: delaying navigation for sidebar step",{targetRoute:q,delay:lN}),T.current=setTimeout(()=>{U.log("ensureStepContext: navigating to route",{targetRoute:q}),H(q),U.log("ensureStepContext: reopening sidebar after navigation",{reopenDelay:A}),z(A),se(Q,200),T.current=null},lN)):(U.log("ensureStepContext: immediate navigation for content step",{targetRoute:q}),H(q),se(Q,200))):se(Q,_?200:120)},[$,I==null?void 0:I.isMobile,L.pathname,f,H,z,se,U]),F=g.useCallback((R,Q="default")=>(R&&R.length?R:Q==="final"?c:l).map(A=>({id:Eee(A.action),label:A.label,action:A.action,payload:A.payload,tone:A.tone})),[l,c]),le=g.useCallback(async R=>{if(!(!e||!t))try{await OQ([{familyId:e,userId:t,key:"onboarding.tour_seen",value:{status:R,seenAt:new Date().toISOString()},confidence:1,source:"onboarding-tour"}]),b(R),m(!0)}catch(Q){U.error("Failed to persist tour status",Q)}},[e,t,U]);g.useEffect(()=>{let R=!0;return(async()=>{if(!e||!t){R&&(m(!1),b("unknown"));return}try{const A=(await MQ(e,{userId:t,keys:["onboarding.tour_seen"]})).find(me=>me.key==="onboarding.tour_seen");if(!R)return;const q=Aee(A==null?void 0:A.value);m(q.seen),b(q.status??"unknown")}catch(_){U.error("Failed to fetch tour status",_),R&&(m(!0),b("unknown"))}})(),()=>{R=!1}},[e,t,U]),g.useEffect(()=>{k(R=>({...R,steps:f}))},[f]);const ee=g.useCallback(R=>{if(!R||E.current.has(R))return;const Q=h.get(R);Q!=null&&Q.intro&&(E.current.add(R),D(Q.intro,{autoOpen:!0,suggestions:F(void 0,"default"),meta:{source:"tour",module:R,type:"intro"}}))},[h,D,F]),we=g.useCallback(R=>{const Q=f[R];if(!Q)return;re(R),ee(Q.moduleId);const _=Q.message??(typeof Q.content=="string"?Q.content:"");if(!(_!=null&&_.trim()))return;const A=R===f.length-1,q=F(Q.suggestions,A?"final":"default");D(_,{autoOpen:!0,suggestions:q,meta:{source:"tour",step:Q.id??Q.sequenceId??R,module:Q.moduleId}})},[D,F,re,f,ee]),ke=g.useCallback(()=>{E.current.clear(),S.current=null,j.current={},de(),C.current&&(clearTimeout(C.current),C.current=null),T.current&&(clearTimeout(T.current),T.current=null)},[de]),Ie=g.useCallback((R=0)=>{if(!f.length)return;ke();const Q=Math.max(0,Math.min(R,f.length-1));x(!0),k({run:!0,steps:f,stepIndex:Q})},[f,ke]),Pe=g.useCallback(()=>{v&&(x(!1),k(R=>({...R,run:!1,stepIndex:0})),ke(),le("completed"),D("That's the grand tour! Ask me anytime if you want to revisit a section.",{autoOpen:!0,suggestions:F([{label:"Replay tour",action:"tour.restart",tone:"primary"},{label:"Ask a question",action:"chat.open",tone:"secondary"}],"final"),meta:{source:"tour",type:"complete"}}))},[D,F,v,le,ke]),We=g.useCallback(()=>{v&&(x(!1),k(R=>({...R,run:!1,stepIndex:0}))),ke(),le("skipped"),D("No problem! I'll be here if you want the walkthrough later.",{autoOpen:!0,suggestions:F([{label:"Start the tour",action:"tour.restart",tone:"primary"}],"default"),meta:{source:"tour",type:"skipped"}})},[D,F,v,le,ke]),Ze=g.useCallback(()=>{Ie(0)},[Ie]),it=g.useCallback(()=>{const R=w.stepIndex+1;if(R>=f.length){Pe();return}const Q=f[R],_=(Q==null?void 0:Q.ensureSidebar)!==!1;_&&M()?(U.log("advanceStep: sidebar closed, attempting to open",{nextIndex:R}),z(),setTimeout(()=>{U.log("advanceStep: moving to next step after sidebar open attempt",{nextIndex:R}),k(A=>({...A,stepIndex:R}))},500)):(_||(U.log("advanceStep: closing sidebar for next step",{nextIndex:R}),$()),U.log("advanceStep: advancing immediately",{nextIndex:R}),k(A=>({...A,stepIndex:R})))},[$,Pe,f,w.stepIndex,M,z]),Ue=g.useCallback(()=>{Ie(0)},[Ie]);g.useEffect(()=>{if(!w.run||!v)return;const R=w.stepIndex;S.current!==R&&(S.current=R,we(R))},[w.run,w.stepIndex,v,we]);const Ne=g.useCallback(()=>{N.current||p||(N.current=!0,O({greet:!1}),D(a.welcomeMessage,{autoOpen:!0,suggestions:F(See,"default"),meta:{source:"tour",type:"invite"}}),a.inviteMessage&&D(a.inviteMessage,{autoOpen:!1,meta:{source:"tour",type:"invite-followup"}}))},[D,F,p,O,a.inviteMessage,a.welcomeMessage]);g.useEffect(()=>{const R=[P("tour.accept",()=>{N.current=!0,Ze()}),P("tour.dismiss",()=>{N.current=!0,We()}),P("tour.offer",()=>{Ne()}),P("tour.advance",()=>{v?it():Ze()}),P("tour.skip",()=>{We()}),P("tour.finish",()=>{Pe()}),P("tour.restart",()=>{Ue()}),P("chat.open",()=>{O({greet:!0})})];return()=>{R.forEach(Q=>Q())}},[it,Pe,v,Ne,P,Ue,We,Ze]),g.useEffect(()=>{n&&p!==null&&(p||Ne())},[n,p,Ne]),g.useEffect(()=>()=>{x(!1),k(R=>({...R,run:!1,stepIndex:0})),ke(),de()},[de,ke]);const ze=g.useCallback(R=>{const{status:Q,type:_,index:A,action:q}=R;if(U.log("handleJoyrideCallback: received event",{type:_,status:Q,index:A,action:q}),_==="error:target_not_found"){const me=f[A],ye=(me==null?void 0:me.ensureSidebar)!==!1,gt=me!=null&&me.route?me.route.startsWith("/")?me.route:"/"+me.route:void 0;if(!!(T.current&&gt&&L.pathname!==gt)){U.log("handleJoyrideCallback: navigation pending, waiting",{index:A,targetRoute:gt});return}const qt=ye&&M(),ot=j.current[A]??0;if(qt||ot<4){const tr=ot+1;j.current[A]=tr;const un=qt?Nee:600;U.log("handleJoyrideCallback: retrying step",{index:A,attempt:tr,sidebarClosed:qt,delay:un}),re(A),setTimeout(()=>{U.log("handleJoyrideCallback: re-checking step after retry delay",{index:A,attempt:tr,delay:un}),k(cs=>({...cs,stepIndex:A}))},un);return}delete j.current[A];const Vt=q==="prev"?Math.max(0,A-1):Math.min(f.length-1,A+1);U.log("handleJoyrideCallback: retries exhausted, moving on",{from:A,to:Vt}),k(tr=>({...tr,stepIndex:Vt}));return}if(Q==="skipped"){U.log("handleJoyrideCallback: tour skipped"),We();return}if(Q==="finished"){U.log("handleJoyrideCallback: tour finished"),Pe();return}},[re,Pe,M,L.pathname,f,We,U]);return{tourState:w,startTour:Ze,skipTour:We,handleJoyrideCallback:ze,hasSeenTour:p,isTourRunning:v}},Dee=()=>{const{state:e,sendUserMessage:t,commitOnboardingData:r,resetOnboarding:n}=Mp(),s=Ot(),i=s.user,a=s.isAuthenticated,l=!!s.isLoading,c=(i==null?void 0:i.UserID)??(i==null?void 0:i.id)??null,{family:u}=Lr(),d=(u==null?void 0:u.FamilyID)??null,{startTour:f,hasSeenTour:h}=J_({familyId:d,userId:c}),p=zn(),[m]=Hh(),[y,b]=g.useState(""),v=g.useRef(null),{toggleChat:x,isOpen:w}=ai(),k=g.useRef(!1),S=()=>{var j;(j=v.current)==null||j.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{S()},[e.messages,e.streamingMessage]),g.useEffect(()=>{if(e.loading||k.current)return;const j=m.get("focus"),I=sessionStorage.getItem("onboarding-focus");(j==="rooms"||I==="rooms")&&e.currentStep!=="committed"&&(k.current=!0,sessionStorage.removeItem("onboarding-focus"),t("We just reset our floor plan and need help designing a fresh layout for our home."))},[e.loading,e.currentStep,m,t]),g.useEffect(()=>{!l&&!a&&p("/login",{replace:!0})},[l,a,p]);const E=j=>{j.key==="Enter"&&y.trim()&&(t(y),b(""))};if(e.loading)return o.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:[o.jsx(Z_,{}),o.jsx("p",{className:"ml-2 text-neutral-600",children:"Loading onboarding data..."})]});const N=async()=>{e.loading||e.currentStep!=="committed"&&e.currentStep!=="completed"&&!await r()||(h===!1&&f(),p("/app"))},C=async()=>{e.loading||(await n(),b(""))},T=e.awaitingResetConfirmation||e.currentStep!=="committed"&&e.currentStep!=="completed";return o.jsxs("div",{className:"relative min-h-screen bg-neutral-50 flex flex-col items-center justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Ua,{size:"lg"}),o.jsx("p",{className:"mt-2 text-neutral-600",children:"Let's get your family space ready together."})]}),o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-card w-full max-w-md flex flex-col",style:{height:"70vh"},children:[o.jsxs("div",{className:"flex-grow overflow-y-auto mb-4",children:[e.messages.map((j,I)=>o.jsx("div",{className:`mb-2 ${j.sender==="user"?"text-right":"text-left"}`,children:o.jsx("div",{className:`inline-block p-2 rounded-lg ${j.sender==="user"?"bg-primary-100 text-primary-800":"bg-primary-600 text-white"}`,children:j.text})},I)),e.streamingMessage!==null&&o.jsx("div",{className:"mb-2 text-left",children:o.jsx("div",{className:"inline-block p-2 rounded-lg bg-primary-600 text-white",children:e.streamingMessage?e.streamingMessage:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"w-2 h-2 bg-white/80 rounded-full animate-bounce"}),o.jsx("span",{className:"w-2 h-2 bg-white/80 rounded-full animate-bounce [animation-delay:-0.15s]"}),o.jsx("span",{className:"w-2 h-2 bg-white/80 rounded-full animate-bounce [animation-delay:-0.3s]"})]})})}),o.jsx("div",{ref:v})]}),T&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"text",placeholder:"Type your response...",className:"flex-grow px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:y,onChange:j=>b(j.target.value),onKeyDown:E}),o.jsx("button",{onClick:()=>{y.trim()&&(t(y),b(""))},className:"ml-2 px-4 py-2 bg-primary-600 text-white rounded-md",children:"Send"})]}),e.currentStep==="committed"&&o.jsxs("div",{className:"text-center mt-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"All set "}),o.jsx("p",{className:"mb-4",children:"Your family space is ready!"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[o.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary-600 text-white rounded-md",children:"Go to Dashboard"}),o.jsx("button",{onClick:()=>void C(),className:"px-4 py-2 border border-neutral-300 text-neutral-700 rounded-md",children:"Start Over"})]})]}),e.currentStep==="completed"&&o.jsxs("div",{className:"text-center mt-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Onboarding Complete!"}),o.jsx("p",{className:"mb-4",children:"You can now explore FamConomy."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[o.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary-600 text-white rounded-md",children:"Go to Dashboard"}),o.jsx("button",{onClick:()=>void C(),className:"px-4 py-2 border border-neutral-300 text-neutral-700 rounded-md",children:"Restart Onboarding"})]})]})]}),o.jsx("button",{type:"button",onClick:()=>x({greet:!0}),className:"fixed bottom-6 right-6 z-50 bg-gradient-to-r from-primary-500 via-secondary-500 to-accent-500 text-white rounded-full p-4 shadow-lg hover:opacity-90 transition-opacity","aria-label":w?"Close LinZ chat":"Open LinZ chat",children:w?o.jsx(ti,{size:28}):o.jsx(x2,{size:28})})]})},Ree=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(!1),[s,i]=g.useState(""),[a,l]=g.useState(""),c=async u=>{var d,f;if(u.preventDefault(),!e){l("Please enter the email address associated with your account."),i("");return}n(!0),l(""),i("");try{await K.post("/auth/forgot-password",{email:e}),i("If an account exists for that email, we've sent instructions to reset your password."),t("")}catch(h){l(((f=(d=h.response)==null?void 0:d.data)==null?void 0:f.message)||"Something went wrong. Please try again in a few minutes.")}finally{n(!1)}};return o.jsxs("div",{className:"min-h-screen bg-neutral-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(Ua,{size:"lg"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-neutral-900",children:"Reset your password"}),o.jsx("p",{className:"mt-2 text-center text-sm text-neutral-600",children:"Enter the email associated with your FamConomy account and we\\'ll send reset instructions."})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow-card sm:rounded-lg sm:px-10",children:[o.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s&&o.jsx("div",{className:"rounded-md bg-success-50 border border-success-200 px-4 py-3 text-sm text-success-800",children:s}),a&&o.jsx("div",{className:"rounded-md bg-error-50 border border-error-200 px-4 py-3 text-sm text-error-700",children:a}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700",children:"Email address"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:u=>t(u.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"you@example.com"})})]}),o.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center rounded-md border border-transparent bg-primary-600 py-3 px-4 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-70",children:r?"Sending instructions":"Send reset link"})]}),o.jsx("div",{className:"mt-6 text-center text-sm text-neutral-600",children:o.jsx(br,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Back to sign in"})})]})})]})},_ee=()=>{const[e]=Hh(),t=g.useMemo(()=>e.get("token")||"",[e]),r=g.useMemo(()=>e.get("email")||"",[e]),[n,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(!1),[u,d]=g.useState(""),[f,h]=g.useState(""),p=!t||!r,m=async y=>{var b,v;if(y.preventDefault(),p){h("This reset link is missing required information. Please request a new one.");return}if(!n||n.length<8){h("Please enter a password that is at least 8 characters long.");return}if(n!==i){h("Passwords do not match. Please try again.");return}c(!0),h(""),d("");try{await K.post("/auth/reset-password",{token:t,email:r,password:n}),d("Your password has been reset. You can now sign in with your new password."),s(""),a("")}catch(x){h(((v=(b=x.response)==null?void 0:b.data)==null?void 0:v.message)||"Unable to reset password. The link may have expired.")}finally{c(!1)}};return o.jsxs("div",{className:"min-h-screen bg-neutral-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(Ua,{size:"lg"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-neutral-900",children:"Set a new password"}),o.jsx("p",{className:"mt-2 text-center text-sm text-neutral-600",children:"Enter and confirm your new password below."})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow-card sm:rounded-lg sm:px-10",children:[p?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"rounded-md bg-error-50 border border-error-200 px-4 py-3 text-sm text-error-700",children:"This reset link is invalid or incomplete. Please request a new password reset email."}),o.jsx("div",{className:"text-center text-sm text-neutral-600",children:o.jsx(br,{to:"/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500",children:"Request a new reset link"})})]}):o.jsxs("form",{onSubmit:m,className:"space-y-6",children:[u&&o.jsx("div",{className:"rounded-md bg-success-50 border border-success-200 px-4 py-3 text-sm text-success-800",children:u}),f&&o.jsx("div",{className:"rounded-md bg-error-50 border border-error-200 px-4 py-3 text-sm text-error-700",children:f}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700",children:"New password"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"password",type:"password",autoComplete:"new-password",required:!0,value:n,onChange:y=>s(y.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter a strong password"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-neutral-700",children:"Confirm password"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"confirm-password",type:"password",autoComplete:"new-password",required:!0,value:i,onChange:y=>a(y.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Re-enter your new password"})})]}),o.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center rounded-md border border-transparent bg-primary-600 py-3 px-4 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-70",children:l?"Updating password":"Update password"})]}),o.jsx("div",{className:"mt-6 text-center text-sm text-neutral-600",children:o.jsx(br,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Back to sign in"})})]})})]})},Iee=()=>{const{token:e}=Lj(),[t,r]=g.useState(null),[n,s]=g.useState(!0),[i,a]=g.useState(null);return g.useEffect(()=>{if(!e){a("Missing share token"),s(!1);return}(async()=>{try{s(!0),a(null);const c=await iee(e);r(c)}catch(c){a(c instanceof Error?c.message:"Unable to load wishlist")}finally{s(!1)}})()},[e]),n?o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:o.jsx(on,{className:"h-10 w-10 animate-spin text-primary-500"})}):i||!t?o.jsxs("div",{className:"max-w-2xl mx-auto py-16 text-center",children:[o.jsx(Da,{className:"mx-auto h-12 w-12 text-primary-500"}),o.jsx("h1",{className:"mt-4 text-2xl font-semibold text-neutral-900 dark:text-white",children:"Wishlist unavailable"}),o.jsx("p",{className:"mt-2 text-neutral-600 dark:text-neutral-400",children:i||"This wishlist link may have expired or been revoked."})]}):o.jsxs("div",{className:"max-w-3xl mx-auto py-12 space-y-6",children:[o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-6 shadow-card dark:border-neutral-700 dark:bg-neutral-800",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 dark:bg-primary-900/30",children:o.jsx(Da,{className:"h-6 w-6"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:t.Title}),t.Owner?o.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["Curated for ",t.Owner.FirstName||t.Owner.UserID]}):null,t.Description?o.jsx("p",{className:"mt-2 text-neutral-700 dark:text-neutral-300",children:t.Description}):null]})]})}),o.jsx("div",{className:"space-y-4",children:t.Items.length===0?o.jsx("div",{className:"rounded-xl border border-dashed border-neutral-300 p-6 text-center text-neutral-500 dark:border-neutral-700 dark:text-neutral-400",children:"No ideas to share yet."}):t.Items.map(l=>o.jsx("div",{className:"rounded-xl border border-neutral-200 bg-white p-5 shadow-sm dark:border-neutral-700 dark:bg-neutral-900/30",children:o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:l.Name}),l.Details?o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:l.Details}):null,o.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-neutral-500 dark:text-neutral-400",children:[l.PriceMin||l.PriceMax?o.jsxs("span",{children:[l.PriceMin?l.PriceMin:"",l.PriceMin&&l.PriceMax?" - ":"",l.PriceMax?l.PriceMax:""]}):null,l.TargetUrl?o.jsxs("a",{href:l.TargetUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary-600 hover:underline dark:text-primary-300",children:[o.jsx(F0,{className:"h-3 w-3"})," View link"]}):null]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("span",{className:"rounded-full bg-neutral-100 px-3 py-1 text-xs font-medium text-neutral-700 dark:bg-neutral-700/40 dark:text-neutral-200",children:l.Status==="IDEA"?"Idea":l.Status==="RESERVED"?"Reserved":"Purchased"}),l.claimedBy?o.jsxs("span",{className:"rounded-full bg-accent-100 px-3 py-1 text-xs font-medium text-accent-700 dark:bg-accent-900/30 dark:text-accent-200",children:["Reserved by ",l.claimedBy.FirstName||"someone"]}):null]})]})},l.WishListItemID))})]})},Kl=(e,t)=>t.length?o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:e}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(r=>o.jsx("span",{className:"rounded-full bg-neutral-100 px-3 py-1 text-xs text-neutral-700 dark:bg-neutral-700/30 dark:text-neutral-200",children:r},r))})]}):null,Mee=()=>{const{token:e}=Lj(),[t,r]=g.useState(null),[n,s]=g.useState(!0),[i,a]=g.useState(null);if(g.useEffect(()=>{if(!e){a("Missing share token"),s(!1);return}(async()=>{try{s(!0),a(null);const d=await rJ(e);r(d)}catch(d){a(d instanceof Error?d.message:"Unable to load shared profile")}finally{s(!1)}})()},[e]),n)return o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:o.jsx(on,{className:"h-10 w-10 animate-spin text-primary-500"})});if(i||!t||!t.profile)return o.jsxs("div",{className:"max-w-2xl mx-auto py-16 text-center",children:[o.jsx(E2,{className:"mx-auto h-12 w-12 text-primary-500"}),o.jsx("h1",{className:"mt-4 text-2xl font-semibold text-neutral-900 dark:text-white",children:"Care profile unavailable"}),o.jsx("p",{className:"mt-2 text-neutral-600 dark:text-neutral-400",children:i||"This shared profile may have expired or been revoked."})]});const l=t.profile,c=Object.entries(l.clothingSizes||{});return o.jsxs("div",{className:"max-w-3xl mx-auto py-12 space-y-6",children:[o.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-6 shadow-card dark:border-neutral-700 dark:bg-neutral-800",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 dark:bg-primary-900/30",children:o.jsx(_u,{className:"h-6 w-6"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Care profile"}),t.user?o.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["Shared for ",t.user.FirstName||t.user.UserID]}):null,t.family?o.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Family: ",t.family.FamilyName]}):null]})]})}),o.jsxs("div",{className:"space-y-4",children:[c.length?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-5 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Clothing sizes"}),o.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2 sm:grid-cols-2",children:c.map(([u,d])=>o.jsxs("div",{className:"rounded-lg bg-neutral-100 px-3 py-2 text-sm text-neutral-700 dark:bg-neutral-800 dark:text-neutral-200",children:[o.jsxs("span",{className:"font-medium",children:[u,": "]}),o.jsx("span",{children:String(d)})]},u))})]}):null,Kl("Favorite colors",l.favoriteColors||[]),Kl("Favorite foods",l.favoriteFoods||[]),Kl("Interests",l.interests||[]),Kl("Allergies",l.allergies||[]),Kl("Favorite brands",l.favoriteBrands||[]),l.notes?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-5 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Notes"}),o.jsx("p",{className:"mt-2 text-sm text-neutral-700 dark:text-neutral-200",children:l.notes})]}):null,l.wishlistSummary?o.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white p-5 dark:border-neutral-700 dark:bg-neutral-900/30",children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Wishlist summary"}),o.jsx("p",{className:"mt-2 text-sm text-neutral-700 dark:text-neutral-200",children:l.wishlistSummary})]}):null]})]})},Oee=[{id:"kids-1",title:"What is Money?",type:"interactive",category:"kids",summary:"An interactive lesson on the basics of money, where it comes from, and what it is used for.",thumbnail:"/placeholders/kids-money.png",tags:["money","basics","kids"]},{id:"kids-2",title:"Saving for a Goal",type:"video",category:"kids",summary:"A short video on how to save money for a toy, a game, or anything else you want.",thumbnail:"/placeholders/kids-saving.png",tags:["saving","goals","kids"]},{id:"kids-3",title:"Needs vs. Wants",type:"article",category:"kids",summary:"Learn the difference between things you need and things you want, and how to make smart choices.",thumbnail:"/placeholders/kids-needs-wants.png",tags:["needs","wants","choices","kids"]},{id:"parents-1",title:"Teaching Kids About Money",type:"article",category:"parents",summary:"A guide for parents on how to introduce financial concepts to children at different ages.",thumbnail:"/placeholders/parents-teaching.png",tags:["parenting","finance","education"]},{id:"parents-2",title:"Family Budgeting 101",type:"video",category:"parents",summary:"Learn how to create a family budget that works for everyone and helps you achieve your financial goals together.",thumbnail:"/placeholders/parents-budgeting.png",tags:["budgeting","family","finance"]},{id:"parents-3",title:"The Power of Allowance",type:"interactive",category:"parents",summary:"An interactive guide to setting up an allowance system that teaches responsibility and financial literacy.",thumbnail:"/placeholders/parents-allowance.png",tags:["allowance","parenting","chores"]}],cN=()=>{const[e,t]=g.useState("kids"),[r,n]=g.useState(""),[s,i]=g.useState("all"),a=Oee.filter(c=>{const u=c.category===e,d=c.title.toLowerCase().includes(r.toLowerCase())||c.summary.toLowerCase().includes(r.toLowerCase()),f=s==="all"||c.type===s;return u&&d&&f}),l=c=>{switch(c){case"article":return o.jsx(Uf,{className:"h-6 w-6 text-primary-600"});case"video":return o.jsx(F6,{className:"h-6 w-6 text-secondary-600"});case"interactive":return o.jsx(O6,{className:"h-6 w-6 text-accent-600"})}};return o.jsxs("div",{className:"space-y-8 p-4 md:p-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:"Resources"}),o.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Financial education for the whole family."})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex space-x-1 bg-neutral-100 dark:bg-neutral-800 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>t("kids"),className:`px-4 py-2 rounded-lg text-sm font-medium ${e==="kids"?"bg-white dark:bg-neutral-700 shadow":"text-neutral-600 dark:text-neutral-300"}`,children:"For Kids"}),o.jsx("button",{onClick:()=>t("parents"),className:`px-4 py-2 rounded-lg text-sm font-medium ${e==="parents"?"bg-white dark:bg-neutral-700 shadow":"text-neutral-600 dark:text-neutral-300"}`,children:"For Parents"})]}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(rp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",size:18}),o.jsx("input",{type:"text",placeholder:"Search...",value:r,onChange:c=>n(c.target.value),className:"pl-10 pr-4 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800"})]}),o.jsxs("select",{value:s,onChange:c=>i(c.target.value),className:"px-4 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[o.jsx("option",{value:"all",children:"All Types"}),o.jsx("option",{value:"article",children:"Articles"}),o.jsx("option",{value:"video",children:"Videos"}),o.jsx("option",{value:"interactive",children:"Interactive"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(c=>o.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform",children:[o.jsx("img",{src:c.thumbnail,alt:c.title,className:"w-full h-40 object-cover"}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:`text-xs font-semibold uppercase tracking-wider ${c.type==="article"?"text-primary-600":c.type==="video"?"text-secondary-600":"text-accent-600"}`,children:c.type}),l(c.type)]}),o.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-2",children:c.title}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:c.summary}),o.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(u=>o.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-100 dark:bg-neutral-700 rounded-full",children:u},u))})]})]},c.id))})]})},Pee=async(e,t)=>(await K.get(`/recipes/${e}/recipes`,{params:t})).data,Lee=async(e,t)=>(await K.get(`/recipes/${e}/recipes/${t}`)).data,Fee=async(e,t)=>(await K.post(`/recipes/${e}/recipes`,t)).data,Bee=async(e,t,r)=>(await K.put(`/recipes/${e}/recipes/${t}`,r)).data,zee=async(e,t)=>{await K.delete(`/recipes/${e}/recipes/${t}`)},Uee=async(e,t)=>(await K.post(`/recipes/${e}/recipes/import`,{url:t})).data,Hee=async(e,t)=>{const r=new FormData;return r.append("scan",t),(await K.post(`/recipes/${e}/recipes/import/scan`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},Vee=async(e,t,r)=>(await K.post(`/recipes/${e}/recipes/${t}/share`,{visibility:r})).data,Wee=async(e,t,r)=>(await K.post(`/recipes/${e}/recipes/${t}/memories`,r)).data,$ee=async(e,t)=>(await K.get(`/recipes/${e}/recipes/${t}/memories`)).data,Yee=async(e,t)=>(await K.post(`/recipes/${e}/recipes/${t}/favorite`)).data,Gee=({isOpen:e,onClose:t,onSubmit:r,submitting:n})=>{const[s,i]=g.useState("");g.useEffect(()=>{e||i("")},[e]);const a=async l=>{if(l.preventDefault(),!s.trim()){ie.error("Paste a recipe link to import.");return}await r(s.trim())};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/60 backdrop-blur-sm p-4",children:o.jsxs(vt.form,{onSubmit:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-xl rounded-3xl bg-white dark:bg-neutral-900 shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-5 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white flex items-center gap-2",children:[o.jsx(Yx,{size:18})," Import from the web"]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:"LinZ will invite Mealie to gently gather the ingredients and steps from the recipe you share."})]}),o.jsxs("div",{className:"px-6 py-6 space-y-4",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300",children:"Recipe URL"}),o.jsx("input",{type:"url",value:s,onChange:l=>i(l.target.value),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"https://example.com/best-family-lasagna",required:!0}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"We respect original creatorsimported recipes stay private to your family unless you choose to share."})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:t,className:"text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-secondary-600 text-white px-5 py-2 text-sm font-medium hover:bg-secondary-700 disabled:bg-secondary-300",children:[n&&o.jsx(on,{size:16,className:"animate-spin"}),"Import recipe"]})]})]})}):null},qee=({isOpen:e,onClose:t,onSubmit:r,submitting:n})=>{const[s,i]=g.useState(null),[a,l]=g.useState(null);g.useEffect(()=>{e||(i(null),a&&(URL.revokeObjectURL(a),l(null)))},[e,a]);const c=d=>{var h;const f=((h=d.target.files)==null?void 0:h[0])??null;a&&(URL.revokeObjectURL(a),l(null)),f?(i(f),l(URL.createObjectURL(f))):i(null)},u=async d=>{if(d.preventDefault(),!s){ie.error("Choose a photo of the recipe to continue.");return}await r(s)};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/60 backdrop-blur-sm p-4",children:o.jsxs(vt.form,{onSubmit:u,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-xl rounded-3xl bg-white dark:bg-neutral-900 shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-5 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white flex items-center gap-2",children:[o.jsx(Yx,{size:18})," Import from a photo"]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:"Upload a clear picture of a recipe card or magazine clipping. We will transcribe it and let you review before saving."})]}),o.jsxs("div",{className:"px-6 py-6 space-y-4",children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300",children:"Recipe image"}),o.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/webp",onChange:c,className:"w-full text-sm text-neutral-600 dark:text-neutral-300"}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Tip: take the photo straight on, in good lighting, so the handwriting or print is easy to read."}),a&&o.jsx("div",{className:"rounded-2xl overflow-hidden border border-neutral-200 dark:border-neutral-700",children:o.jsx("img",{src:a,alt:"Recipe preview",className:"w-full max-h-64 object-cover"})})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:t,className:"text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:n||!s,className:"inline-flex items-center gap-2 rounded-full bg-secondary-600 text-white px-5 py-2 text-sm font-medium hover:bg-secondary-700 disabled:bg-secondary-300",children:[n&&o.jsx(on,{size:16,className:"animate-spin"}),"Import scan"]})]})]})}):null},Kee=({isOpen:e,onClose:t,onSubmit:r,submitting:n})=>{const[s,i]=g.useState(""),[a,l]=g.useState("");g.useEffect(()=>{e||(i(""),l(""))},[e]);const c=async u=>{if(u.preventDefault(),!a.trim()){ie.error("Share a memory to save it.");return}await r({Message:a.trim(),StoryTitle:s.trim()||void 0})};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/60 backdrop-blur-sm p-4",children:o.jsxs(vt.form,{onSubmit:c,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-lg rounded-3xl bg-white dark:bg-neutral-900 shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-5 border-b border-neutral-200 dark:border-neutral-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white flex items-center gap-2",children:[o.jsx(B0,{size:18})," Add a family memory"]}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:"Your words become part of the recipes story for future generations."})]}),o.jsxs("div",{className:"px-6 py-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Memory title"}),o.jsx("input",{type:"text",value:s,onChange:u=>i(u.target.value),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-highlight-teal",placeholder:"First snow day stew, 1998"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Memory"}),o.jsx("textarea",{value:a,onChange:u=>l(u.target.value),rows:4,className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-highlight-teal",placeholder:"Share the laughter, the smell in the kitchen, the person who taught you the trick.",required:!0})]})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:t,className:"text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-highlight-teal text-white px-5 py-2 text-sm font-medium hover:bg-highlight-teal/80 disabled:bg-highlight-teal/50",children:[n&&o.jsx(on,{size:16,className:"animate-spin"}),"Save memory"]})]})]})}):null},uN=()=>{const{family:e}=Lr(),t=e==null?void 0:e.FamilyID,[r,n]=g.useState([]),[s,i]=g.useState(null),[a,l]=g.useState([]),[c,u]=g.useState(!0),[d,f]=g.useState(!1),[h,p]=g.useState(null),[m,y]=g.useState(!1),[b,v]=g.useState(null),[x,w]=g.useState(!1),[k,S]=g.useState(!1),[E,N]=g.useState(!1),[C,T]=g.useState(!1),[j,I]=g.useState(!1),[H,L]=g.useState(!1),D=g.useCallback(async()=>{if(t)try{u(!0);const M=await Pee(t);if(n(M),M.length){const re=M[0];i(re),l(re.Memories??[])}else i(null),l([]);p(null)}catch(M){console.error("Failed to fetch recipes",M),p("We had trouble loading your recipes.")}finally{u(!1)}},[t]);g.useEffect(()=>{D()},[D]);const O=g.useCallback(async M=>{if(t)try{f(!0);const re=await Lee(t,M);if(i(re),re.Memories)l(re.Memories);else{const F=await $ee(t,M);l(F)}}catch(re){console.error("Failed to load recipe",re),ie.error("Could not open this recipe right now.")}finally{f(!1)}},[t]),P=async M=>{if(t)try{T(!0);const re=await Fee(t,M);ie.success("Recipe tucked safely into your family collection."),n(F=>[re,...F]),i(re),l(re.Memories??[]),y(!1),v(null)}catch(re){console.error("Create recipe failed",re),ie.error("We couldnt save that recipe yet. Try again in a moment.")}finally{T(!1)}},U=async M=>{const re=b??s;if(!(!t||!re))try{T(!0);const F=await Bee(t,re.RecipeID,M);ie.success("Updates saved. Your family history just grew richer."),n(le=>le.map(ee=>ee.RecipeID===F.RecipeID?F:ee)),i(F),l(F.Memories??[]),y(!1),v(null)}catch(F){console.error("Update recipe failed",F),ie.error("Could not update the recipe yet.")}finally{T(!1)}},z=async M=>{if(t)try{T(!0);const re=await Uee(t,M);ie.success("Recipe imported! Give it a quick glance and make it yours."),n(F=>[re,...F.filter(le=>le.RecipeID!==re.RecipeID)]),i(re),l(re.Memories??[]),w(!1)}catch(re){console.error("Import recipe failed",re),ie.error("We couldnt gather that recipe. Double-check the link and try again.")}finally{T(!1)}},$=async M=>{if(t)try{I(!0);const re=await Hee(t,M);ie.success("Recipe scanned! Give it a review before serving."),n(F=>[re,...F.filter(le=>le.RecipeID!==re.RecipeID)]),i(re),l(re.Memories??[]),S(!1)}catch(re){console.error("Scan recipe failed",re),ie.error("We couldnt read that photo. Try a clearer, well-lit picture.")}finally{I(!1)}},ne=async M=>{if(t)try{const{isFavorite:re}=await Yee(t,M.RecipeID);n(F=>F.map(le=>le.RecipeID===M.RecipeID?{...le,isFavorite:re}:le)),(s==null?void 0:s.RecipeID)===M.RecipeID&&i(F=>F&&{...F,isFavorite:re}),ie.success(re?"Saved to your favorites.":"Removed from favorites.")}catch(re){console.error("Toggle favorite failed",re),ie.error("Favorites are unavailable right now.")}},X=async(M,re)=>{if(t)try{const F=await Vee(t,M.RecipeID,re),le=F.shareToken?`${window.location.origin}/share/recipes/${F.shareToken}`:void 0;n(ee=>ee.map(we=>we.RecipeID===M.RecipeID?{...we,Visibility:F.visibility,ShareToken:F.shareToken}:we)),(s==null?void 0:s.RecipeID)===M.RecipeID&&i(ee=>ee&&{...ee,Visibility:F.visibility,ShareToken:F.shareToken??null}),le?(await navigator.clipboard.writeText(le).catch(()=>{}),ie.success("Link ready! We copied it so you can share with loved ones.")):ie.success("Sharing set to family only.")}catch(F){console.error("Share recipe failed",F),ie.error("We couldnt adjust sharing right now.")}},fe=async M=>{if(t&&window.confirm(`Remove ${M.Title} from your family cookbook?`))try{await zee(t,M.RecipeID),ie.success("Recipe removed. You can always add it back."),n(re=>re.filter(F=>F.RecipeID!==M.RecipeID)),(s==null?void 0:s.RecipeID)===M.RecipeID&&(i(null),l([]))}catch(re){console.error("Delete recipe failed",re),ie.error("We couldnt remove that recipe yet.")}},de=async M=>{if(!(!t||!s))try{L(!0);const re=await Wee(t,s.RecipeID,M);ie.success("Memory saved. Future generations will smile reading this."),l(F=>[re,...F]),N(!1)}catch(re){console.error("Create memory failed",re),ie.error("We couldnt save that memory yet.")}finally{L(!1)}},ge=g.useMemo(()=>r.filter(M=>M.isFavorite).length,[r]),se=s??r[0]??null;return o.jsxs("div",{className:"space-y-8",id:"recipes-page",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-amber-200 via-rose-200 to-sky-200 dark:from-amber-600/30 dark:via-rose-600/30 dark:to-sky-600/30 p-6 md:p-10",children:[o.jsxs("div",{className:"max-w-3xl space-y-4",children:[o.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 dark:bg-neutral-900/70 px-4 py-1 text-xs font-semibold uppercase tracking-wider text-amber-600 dark:text-amber-200 shadow-sm",children:[o.jsx(Uf,{size:14})," Family Recipes"]}),o.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-neutral-900 dark:text-white",children:"Preserve the dishes that taste like home."}),o.jsx("p",{className:"text-neutral-600 dark:text-neutral-200 text-sm md:text-base",children:"Capture ingredients, memories, and little whispered tips so every generation can recreate the moments that matter."}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("button",{onClick:()=>{v(null),y(!0)},className:"inline-flex items-center gap-2 rounded-full bg-primary-600 text-white px-5 py-2 text-sm font-medium hover:bg-primary-700",children:[o.jsx(Jt,{size:16})," Start a new recipe"]}),o.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center gap-2 rounded-full bg-white/90 text-primary-600 px-5 py-2 text-sm font-medium hover:bg-white shadow-sm",children:[o.jsx(Yx,{size:16})," Import from URL"]}),o.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center gap-2 rounded-full bg-white/80 text-secondary-600 px-5 py-2 text-sm font-medium hover:bg-white shadow-sm",children:[o.jsx(Po,{size:16})," Scan recipe card"]}),o.jsxs("button",{onClick:()=>N(!0),disabled:!s,className:"inline-flex items-center gap-2 rounded-full border border-white/60 text-white px-5 py-2 text-sm font-medium hover:bg-white/10 disabled:opacity-60",children:[o.jsx(B0,{size:16})," Share a memory"]})]})]}),se&&o.jsx("div",{className:"mt-8 md:absolute md:top-8 md:right-8 md:w-72",children:o.jsxs("div",{className:"rounded-2xl bg-white/90 dark:bg-neutral-900/80 p-4 shadow-xl border border-white/40 dark:border-neutral-700",children:[o.jsx("p",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"Spotlight"}),o.jsx("p",{className:"text-lg font-semibold text-primary-600 dark:text-primary-300 mt-1",children:se.Title}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-2 line-clamp-3",children:se.Description??"A treasured family favorite."}),o.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(za,{size:14})," Serves ",se.Servings??""]}),o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(qd,{size:14})," Prep ",se.PrepMinutes??""," min"]})]})]})})]}),o.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr,3fr]",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Kitchen heirlooms"}),o.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[r.length," recipes  ",ge," favorites"]})]})}),c?o.jsxs("div",{className:"flex items-center justify-center rounded-2xl border border-dashed border-neutral-300 dark:border-neutral-700 p-10 text-neutral-500",children:[o.jsx(on,{size:20,className:"animate-spin mr-2"})," Gathering your family recipes..."]}):h?o.jsx("div",{className:"rounded-2xl border border-error-300 bg-error-50 px-4 py-6 text-error-600",children:h}):r.length===0?o.jsxs("div",{className:"rounded-2xl border border-dashed border-neutral-300 dark:border-neutral-700 p-10 text-center space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-100",children:"Start your family cookbook"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Add the first recipe that your family reaches for when comfort is needed."}),o.jsxs("button",{onClick:()=>{v(null),y(!0)},className:"inline-flex items-center gap-2 rounded-full bg-primary-600 text-white px-5 py-2 text-sm font-medium hover:bg-primary-700",children:[o.jsx(Jt,{size:16})," Add a treasured recipe"]}),o.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center gap-2 rounded-full bg-white text-secondary-600 px-5 py-2 text-sm font-medium hover:bg-secondary-50 dark:bg-neutral-800 dark:text-secondary-300 dark:hover:bg-neutral-700",children:[o.jsx(Po,{size:16})," Scan a recipe card"]})]}):o.jsx("div",{className:"grid gap-3",children:r.map(M=>{const re=(s==null?void 0:s.RecipeID)===M.RecipeID;return o.jsx("button",{onClick:()=>O(M.RecipeID),className:`w-full text-left rounded-2xl border px-4 py-3 transition-colors ${re?"border-primary-500 bg-primary-50 dark:bg-primary-900/40":"border-transparent hover:border-primary-200 dark:hover:border-primary-600/40"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:M.Title}),M.isFavorite&&o.jsx(g6,{size:16,className:"text-primary-500"})]}),M.Subtitle&&o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:M.Subtitle}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-2 line-clamp-2",children:M.Description??"A family staple."})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsx(el,{size:14})," ",yg(M.FirstCookedAt)]}),o.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsx(qd,{size:14})," ",M.PrepMinutes??""," min prep"]}),o.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),ne(M)},className:`rounded-full border px-2 py-1 text-xs font-medium transition-colors ${M.isFavorite?"border-primary-400 text-primary-600 bg-primary-50 dark:bg-primary-900/40":"border-neutral-200 text-neutral-500 hover:border-primary-200 hover:text-primary-600 dark:border-neutral-700 dark:hover:border-primary-600/40"}`,children:M.isFavorite?"Favorited":"Favorite"})]})]})},M.RecipeID)})})]}),o.jsx("div",{className:"rounded-3xl bg-white dark:bg-neutral-900 shadow-lg border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:s?o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"relative",children:[s.CoverImageUrl?o.jsx("img",{src:s.CoverImageUrl,alt:s.Title,className:"h-56 w-full object-cover"}):o.jsx("div",{className:"h-56 w-full bg-gradient-to-br from-primary-100 via-secondary-100 to-amber-100 dark:from-primary-900/30 dark:via-secondary-900/30 dark:to-amber-900/30 flex items-center justify-center",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(kk,{size:36,className:"text-primary-500 mx-auto"}),o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"Add a cover photo to bring this story to life."})]})}),o.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[o.jsxs("button",{onClick:()=>ne(s),className:"inline-flex items-center gap-2 rounded-full bg-white/90 backdrop-blur px-3 py-1 text-xs font-medium text-primary-600 shadow",children:[s.isFavorite?o.jsx(Sk,{size:14,className:"fill-primary-500 text-primary-500"}):o.jsx(Sk,{size:14})," Favorite"]}),o.jsxs("button",{onClick:()=>X(s,s.Visibility==="LINK"?"FAMILY":"LINK"),className:"inline-flex items-center gap-2 rounded-full bg-white/90 backdrop-blur px-3 py-1 text-xs font-medium text-secondary-600 shadow",children:[o.jsx(_u,{size:14})," ",s.Visibility==="LINK"?"Stop sharing link":"Share link"]})]})]}),o.jsxs("div",{className:"px-6 py-6 space-y-6 flex-1 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:s.Title}),s.Subtitle&&o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:s.Subtitle}),o.jsxs("div",{className:"mt-3 flex flex-wrap gap-3 text-xs text-neutral-500 dark:text-neutral-400",children:[o.jsxs("span",{className:"inline-flex items-center gap-1 bg-neutral-100 dark:bg-neutral-800 px-3 py-1 rounded-full",children:[o.jsx(za,{size:14})," Serves ",s.Servings??""]}),o.jsxs("span",{className:"inline-flex items-center gap-1 bg-neutral-100 dark:bg-neutral-800 px-3 py-1 rounded-full",children:[o.jsx(qd,{size:14})," Prep ",s.PrepMinutes??""," min"]}),o.jsxs("span",{className:"inline-flex items-center gap-1 bg-neutral-100 dark:bg-neutral-800 px-3 py-1 rounded-full",children:[o.jsx(el,{size:14})," First shared ",yg(s.FirstCookedAt)]}),s.SourceUrl&&o.jsxs("a",{href:s.SourceUrl,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 bg-neutral-100 dark:bg-neutral-800 px-3 py-1 rounded-full text-primary-600 dark:text-primary-400 hover:underline",children:[o.jsx(C6,{size:14})," Original source"]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("button",{onClick:()=>{v(s),y(!0)},className:"inline-flex items-center gap-2 rounded-full border border-neutral-300 dark:border-neutral-600 px-4 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-300 hover:border-primary-300 hover:text-primary-600",children:[o.jsx(P6,{size:14})," Edit"]}),o.jsxs("button",{onClick:()=>fe(s),className:"inline-flex items-center gap-2 rounded-full border border-error-300 px-4 py-1.5 text-xs font-medium text-error-500 hover:bg-error-50",children:[o.jsx(ei,{size:14})," Remove"]})]})]}),s.Description&&o.jsx("div",{className:"rounded-2xl bg-neutral-50 dark:bg-neutral-800/60 px-4 py-3 text-sm text-neutral-600 dark:text-neutral-300 border border-neutral-100 dark:border-neutral-700",children:s.Description}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-[1fr_1fr]",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Ingredients"}),o.jsx("div",{className:"space-y-2",children:s.Ingredients.sort((M,re)=>(M.SortOrder??0)-(re.SortOrder??0)).map(M=>o.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-800/70 border border-neutral-200 dark:border-neutral-700 px-3 py-2",children:[M.SectionTitle&&o.jsx("p",{className:"text-[10px] uppercase tracking-wide text-secondary-500 dark:text-secondary-300",children:M.SectionTitle}),o.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100",children:M.Name}),(M.Quantity||M.Notes)&&o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[M.Quantity,M.Notes].filter(Boolean).join("  ")})]},`${M.RecipeIngredientID}-${M.Name}`))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Steps"}),o.jsx("div",{className:"space-y-2",children:s.Steps.sort((M,re)=>(M.SortOrder??0)-(re.SortOrder??0)).map((M,re)=>o.jsx("div",{className:"rounded-xl border border-neutral-200 dark:border-neutral-700 px-3 py-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-primary-100 text-primary-600 dark:bg-primary-900/40 dark:text-primary-300 text-xs font-semibold",children:re+1}),o.jsxs("div",{className:"space-y-1",children:[M.SectionTitle&&o.jsx("p",{className:"text-[10px] uppercase tracking-wide text-secondary-500 dark:text-secondary-300",children:M.SectionTitle}),o.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-200 whitespace-pre-wrap",children:M.Instruction}),M.Tip&&o.jsxs("p",{className:"text-xs text-secondary-600 dark:text-secondary-300 flex items-center gap-1",children:[o.jsx(Po,{size:12})," ",M.Tip]})]})]})},`${M.RecipeStepID}-${re}`))})]})]}),(s.OriginStory||s.TraditionNotes)&&o.jsxs("div",{className:"rounded-2xl bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-800 px-4 py-4 space-y-2",children:[o.jsxs("h3",{className:"text-sm font-semibold text-amber-700 dark:text-amber-200 inline-flex items-center gap-2",children:[o.jsx(Uf,{size:16})," The story"]}),s.OriginStory&&o.jsx("p",{className:"text-sm text-amber-800/90 dark:text-amber-100 whitespace-pre-wrap",children:s.OriginStory}),s.TraditionNotes&&o.jsx("p",{className:"text-xs text-amber-700/70 dark:text-amber-200/80 whitespace-pre-wrap border-t border-amber-200/60 dark:border-amber-800/80 pt-2",children:s.TraditionNotes})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Family memories"}),o.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700",children:[o.jsx(B0,{size:14})," Add memory"]})]}),a.length===0?o.jsx("div",{className:"rounded-2xl border border-dashed border-neutral-300 dark:border-neutral-700 px-4 py-6 text-center text-sm text-neutral-500 dark:text-neutral-400",children:"Be the first to share what this dish means to you."}):o.jsx("div",{className:"space-y-3",children:a.map(M=>o.jsx("div",{className:"rounded-2xl border border-neutral-200 dark:border-neutral-700 px-4 py-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(B6,{size:18,className:"text-primary-500"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"flex items-center gap-2 text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:M.StoryTitle??"Shared memory"}),o.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 whitespace-pre-wrap",children:M.Message}),o.jsxs("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[M.SharedBy?`${M.SharedBy.FirstName} ${M.SharedBy.LastName}`:"Family member","  ",yg(M.SharedAt)]})]})]})},M.RecipeMemoryID))})]})]})]}):o.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 p-10 text-center",children:[o.jsx(kk,{size:48,className:"text-primary-500"}),o.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-100",children:"Select a recipe to see its story"}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 max-w-sm",children:"Choose a recipe from the left to revisit ingredients, instructions, and the memories your family has shared."})]})})]}),o.jsx(Xt,{children:m&&o.jsx(Xee,{title:b?"Edit recipe":"Add a family recipe",isOpen:m,onClose:()=>{y(!1),v(null)},onSubmit:b?U:P,submitting:C,initialRecipe:b??void 0,familyName:e==null?void 0:e.FamilyName})}),o.jsx(Xt,{children:x&&o.jsx(Gee,{isOpen:x,onClose:()=>w(!1),onSubmit:z,submitting:C})}),o.jsx(Xt,{children:k&&o.jsx(qee,{isOpen:k,onClose:()=>S(!1),onSubmit:$,submitting:j})}),o.jsx(Xt,{children:E&&o.jsx(Kee,{isOpen:E,onClose:()=>N(!1),onSubmit:de,submitting:H})})]})},dN=e=>({Title:"",Subtitle:"",Description:e?`A beloved ${e} original.`:"",OriginStory:"",TraditionNotes:"",FirstCookedAt:"",Servings:"",PrepMinutes:"",CookMinutes:"",CoverImageUrl:"",Visibility:"FAMILY",Ingredients:[{SectionTitle:"",Name:"",Quantity:"",Notes:""}],Steps:[{SectionTitle:"",Instruction:"",Tip:""}]}),yg=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString()}catch{return e}},Qee=e=>{const t=(n,s)=>s(n)?n:void 0,r=n=>{if(!n)return;const s=Number(n);return Number.isNaN(s)?void 0:s};return{Title:e.Title.trim(),Subtitle:t(e.Subtitle.trim(),Boolean),Description:t(e.Description.trim(),Boolean),OriginStory:t(e.OriginStory.trim(),Boolean),TraditionNotes:t(e.TraditionNotes.trim(),Boolean),FirstCookedAt:e.FirstCookedAt?new Date(e.FirstCookedAt).toISOString():void 0,Servings:r(e.Servings),PrepMinutes:r(e.PrepMinutes),CookMinutes:r(e.CookMinutes),Visibility:e.Visibility,CoverImageUrl:t(e.CoverImageUrl.trim(),Boolean),Ingredients:e.Ingredients.map((n,s)=>({SectionTitle:t(n.SectionTitle.trim(),Boolean),Name:n.Name.trim(),Quantity:t(n.Quantity.trim(),Boolean),Notes:t(n.Notes.trim(),Boolean),SortOrder:s})).filter(n=>n.Name.length>0),Steps:e.Steps.map((n,s)=>({SectionTitle:t(n.SectionTitle.trim(),Boolean),Instruction:n.Instruction.trim(),Tip:t(n.Tip.trim(),Boolean),SortOrder:s})).filter(n=>n.Instruction.length>0)}},Zee=e=>({Title:e.Title??"",Subtitle:e.Subtitle??"",Description:e.Description??"",OriginStory:e.OriginStory??"",TraditionNotes:e.TraditionNotes??"",FirstCookedAt:e.FirstCookedAt?e.FirstCookedAt.split("T")[0]:"",Servings:e.Servings?String(e.Servings):"",PrepMinutes:e.PrepMinutes?String(e.PrepMinutes):"",CookMinutes:e.CookMinutes?String(e.CookMinutes):"",CoverImageUrl:e.CoverImageUrl??"",Visibility:e.Visibility??"FAMILY",Ingredients:(e.Ingredients||[]).length?e.Ingredients.sort((t,r)=>(t.SortOrder??0)-(r.SortOrder??0)).map(t=>({SectionTitle:t.SectionTitle??"",Name:t.Name??"",Quantity:t.Quantity??"",Notes:t.Notes??""})):[{SectionTitle:"",Name:"",Quantity:"",Notes:""}],Steps:(e.Steps||[]).length?e.Steps.sort((t,r)=>(t.SortOrder??0)-(r.SortOrder??0)).map(t=>({SectionTitle:t.SectionTitle??"",Instruction:t.Instruction??"",Tip:t.Tip??""})):[{SectionTitle:"",Instruction:"",Tip:""}]}),Xee=({title:e,isOpen:t,onClose:r,onSubmit:n,submitting:s,initialRecipe:i,familyName:a})=>{const[l,c]=g.useState(()=>dN(a)),[u,d]=g.useState({});g.useEffect(()=>{if(!t){d({});return}c(i?Zee(i):dN(a))},[a,i,t]);const f=(y,b)=>{c(v=>{const x=[...v.Ingredients];return x[y]={...x[y],...b},{...v,Ingredients:x}})},h=(y,b)=>{c(v=>{const x=[...v.Steps];return x[y]={...x[y],...b},{...v,Steps:x}})},p=()=>{const y={};return l.Title.trim()||(y.Title="Please give this recipe a name."),l.Ingredients.some(b=>b.Name.trim().length>0)||(y.Ingredients="Add at least one ingredient so everyone can recreate it."),l.Steps.some(b=>b.Instruction.trim().length>0)||(y.Steps="Share at least one instruction to guide future cooks."),d(y),Object.keys(y).length===0},m=async y=>{y.preventDefault(),p()&&await n(Qee(l))};return t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/60 backdrop-blur-sm p-4",children:o.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-3xl rounded-3xl bg-white dark:bg-neutral-900 shadow-2xl overflow-hidden",children:o.jsxs("form",{onSubmit:m,className:"max-h-[85vh] overflow-y-auto",children:[o.jsxs("div",{className:"px-6 py-5 border-b border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:e}),o.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Capture the ingredients, story, and little secrets that make this dish family-famous."})]}),o.jsx("button",{type:"button",onClick:r,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:""})]}),o.jsxs("div",{className:"px-6 py-6 space-y-6",children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Recipe title"}),o.jsx("input",{type:"text",value:l.Title,onChange:y=>c(b=>({...b,Title:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Grandma's Sunday Roast",required:!0}),u.Title&&o.jsx("p",{className:"mt-1 text-xs text-error-500",children:u.Title})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Subtitle"}),o.jsx("input",{type:"text",value:l.Subtitle,onChange:y=>c(b=>({...b,Subtitle:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Comfort in a casserole dish"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Servings"}),o.jsx("input",{type:"number",min:1,value:l.Servings,onChange:y=>c(b=>({...b,Servings:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"6"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Prep (min)"}),o.jsx("input",{type:"number",min:0,value:l.PrepMinutes,onChange:y=>c(b=>({...b,PrepMinutes:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"20"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Cook (min)"}),o.jsx("input",{type:"number",min:0,value:l.CookMinutes,onChange:y=>c(b=>({...b,CookMinutes:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"45"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"First cooked"}),o.jsx("input",{type:"date",value:l.FirstCookedAt,max:new Date().toISOString().split("T")[0],onChange:y=>c(b=>({...b,FirstCookedAt:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Cover image URL"}),o.jsx("input",{type:"url",value:l.CoverImageUrl,onChange:y=>c(b=>({...b,CoverImageUrl:y.target.value})),className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"https://..."})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-2",children:"Description"}),o.jsx("textarea",{value:l.Description,onChange:y=>c(b=>({...b,Description:y.target.value})),rows:3,className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"A cozy classic requested at every family gathering."})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-2",children:"Origin story"}),o.jsx("textarea",{value:l.OriginStory,onChange:y=>c(b=>({...b,OriginStory:y.target.value})),rows:3,className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Grandma Bea created this when the garden overflowed with tomatoes..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-2",children:"Tradition notes"}),o.jsx("textarea",{value:l.TraditionNotes,onChange:y=>c(b=>({...b,TraditionNotes:y.target.value})),rows:3,className:"w-full rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Served every Christmas Eve with sparkling cider and board games."})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Ingredients"}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Group ingredients by section and note helpful brands or measurements."})]}),o.jsxs("button",{type:"button",onClick:()=>c(y=>({...y,Ingredients:[...y.Ingredients,{SectionTitle:"",Name:"",Quantity:"",Notes:""}]})),className:"inline-flex items-center gap-2 rounded-full bg-primary-100 text-primary-600 px-3 py-1.5 text-xs font-medium hover:bg-primary-200",children:[o.jsx(Jt,{size:14})," Ingredient"]})]}),u.Ingredients&&o.jsx("p",{className:"text-xs text-error-500",children:u.Ingredients}),o.jsx("div",{className:"space-y-3",children:l.Ingredients.map((y,b)=>o.jsxs("div",{className:"rounded-2xl border border-neutral-200 dark:border-neutral-700 p-4 space-y-3",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-[2fr_1fr]",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Name *"}),o.jsx("input",{type:"text",value:y.Name,onChange:v=>f(b,{Name:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Sweet onion, diced"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Quantity"}),o.jsx("input",{type:"text",value:y.Quantity,onChange:v=>f(b,{Quantity:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"2 cups"})]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Section"}),o.jsx("input",{type:"text",value:y.SectionTitle,onChange:v=>f(b,{SectionTitle:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Sauce"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Notes"}),o.jsx("input",{type:"text",value:y.Notes,onChange:v=>f(b,{Notes:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Use Vidalia if in season"})]})]}),l.Ingredients.length>1&&o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",onClick:()=>c(v=>({...v,Ingredients:v.Ingredients.filter((x,w)=>w!==b)})),className:"text-xs text-error-500 hover:text-error-600",children:"Remove"})})]},b))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 uppercase tracking-wide",children:"Steps"}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Share the little cues and tips that keep the dish true to its roots."})]}),o.jsxs("button",{type:"button",onClick:()=>c(y=>({...y,Steps:[...y.Steps,{SectionTitle:"",Instruction:"",Tip:""}]})),className:"inline-flex items-center gap-2 rounded-full bg-secondary-100 text-secondary-600 px-3 py-1.5 text-xs font-medium hover:bg-secondary-200",children:[o.jsx(Jt,{size:14})," Step"]})]}),u.Steps&&o.jsx("p",{className:"text-xs text-error-500",children:u.Steps}),o.jsx("div",{className:"space-y-3",children:l.Steps.map((y,b)=>o.jsxs("div",{className:"rounded-2xl border border-neutral-200 dark:border-neutral-700 p-4 space-y-3",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Section"}),o.jsx("input",{type:"text",value:y.SectionTitle,onChange:v=>h(b,{SectionTitle:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-secondary-500",placeholder:"Prepare sauce"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Whispered tip"}),o.jsx("input",{type:"text",value:y.Tip,onChange:v=>h(b,{Tip:v.target.value}),className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-secondary-500",placeholder:"Stir clockwise for luck"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-neutral-500 dark:text-neutral-400 mb-1",children:"Instruction *"}),o.jsx("textarea",{value:y.Instruction,onChange:v=>h(b,{Instruction:v.target.value}),rows:2,className:"w-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-secondary-500",placeholder:"Saut onions in butter until translucent, humming dad's favorite tune."})]}),l.Steps.length>1&&o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",onClick:()=>c(v=>({...v,Steps:v.Steps.filter((x,w)=>w!==b)})),className:"text-xs text-error-500 hover:text-error-600",children:"Remove"})})]},b))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-600 dark:text-neutral-300 mb-2",children:"Sharing"}),o.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-3",children:"Choose who can see this recipe. You can share a link later if you change your mind."}),o.jsx("div",{className:"flex gap-3",children:["FAMILY","LINK"].map(y=>o.jsx("button",{type:"button",onClick:()=>c(b=>({...b,Visibility:y})),className:`flex-1 rounded-2xl border px-4 py-2 text-sm font-medium transition-colors ${l.Visibility===y?"border-primary-500 bg-primary-50 text-primary-600 dark:bg-primary-900/40 dark:text-primary-300":"border-neutral-200 text-neutral-600 hover:border-primary-400 dark:border-neutral-700 dark:text-neutral-400"}`,children:y==="FAMILY"?"Family only":"Family + anyone with link"},y))})]})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:r,className:"text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200",children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:s,className:"inline-flex items-center gap-2 rounded-full bg-primary-600 text-white px-5 py-2 text-sm font-medium hover:bg-primary-700 disabled:bg-primary-300",children:[s&&o.jsx(on,{size:16,className:"animate-spin"}),"Save recipe"]})]})]})})}):null},fN=({familyId:e,userId:t,audience:r,offerTrigger:n,extraSteps:s,onboardingState:i,markCompleted:a})=>{const{tourState:l,handleJoyrideCallback:c,hasSeenTour:u}=J_({familyId:e,userId:t,audience:r,offerTrigger:n,extraSteps:s});return te.useEffect(()=>{i.currentStep==="committed"&&u===!0&&a()},[u,a,i.currentStep]),o.jsxs(o.Fragment,{children:[o.jsx(c6,{...l,callback:c,disableOverlayClose:!0,disableScrollParentFix:!0,spotlightClicks:!0,spotlightPadding:14,tooltipComponent:()=>o.jsx("div",{style:{display:"none"}}),locale:{back:"",close:"",last:"",next:"",skip:""},styles:{options:{zIndex:12e3,overlayColor:"rgba(17, 24, 39, 0.65)",primaryColor:"#6366F1"},overlay:{mixBlendMode:"normal",pointerEvents:"auto"},spotlight:{borderRadius:16,boxShadow:"0 0 0 3px rgba(99, 102, 241, 0.75)"},buttonBack:{display:"none"},buttonClose:{display:"none"},buttonNext:{display:"none"},buttonSkip:{display:"none"},tooltip:{display:"none",background:"transparent",boxShadow:"none"},tooltipContainer:{display:"none"},tooltipTitle:{display:"none"},tooltipContent:{display:"none"},tooltipFooter:{display:"none"}}}),o.jsx(d8,{})]})},hN=({children:e,hasExistingFamily:t=!1,isFamilyContextReady:r=!1})=>{const{isAuthenticated:n,isLoading:s}=Ot(),{state:i}=Mp(),a=Nn(),[l,c]=te.useState(!1);return te.useEffect(()=>{i.hydrated&&c(!0)},[i.hydrated]),s?o.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!l||i.loading?o.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n?r?!(i.currentStep==="committed"||i.currentStep==="completed")&&a.pathname!=="/onboarding"?o.jsx(kw,{to:"/onboarding",replace:!0,state:{from:a.pathname}}):o.jsx(o.Fragment,{children:e}):o.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsx(kw,{to:"/login"})},Jee=({familyId:e,hasExistingFamily:t,isFamilyContextReady:r})=>{const n=Ot(),s=n.user,i=n.isAuthenticated,a=!!n.isLoading,l=Nn(),c=zn(),u=(s==null?void 0:s.UserID)??(s==null?void 0:s.id)??null,d=Mp(),{state:f,markCompleted:h}=d,p=f.members.some(w=>{var S;const k=(S=w.email)==null?void 0:S.toLowerCase();return!k||k.endsWith("@famc.local")}),m=g.useMemo(()=>p?[{target:"#placeholder-members-callout",content:"These placeholders were added during onboarding. Tap Send Invitation to replace them with real accounts.",ensureSidebar:!1}]:[],[p]),y=g.useMemo(()=>{var E;const w=(s==null?void 0:s.role)??(s==null?void 0:s.Role)??(s==null?void 0:s.UserRole);if(typeof w=="string"){const N=w.toLowerCase();if(N.includes("child")||N.includes("kid"))return"child";if(N.includes("guardian"))return"guardian"}const k=f.members.find(N=>!N.email||!(s!=null&&s.email)?!1:N.email.toLowerCase()===s.email.toLowerCase()),S=(E=k==null?void 0:k.role)==null?void 0:E.toLowerCase();if(S){if(S.includes("child")||S.includes("kid"))return"child";if(S.includes("guardian"))return"guardian"}return"parent"},[f.members,s]),b=te.useMemo(()=>{const w=l.pathname;return w==="/"||w==="/app"||w.startsWith("/app/")},[l.pathname]),v=g.useMemo(()=>b&&["committed","completed"].includes(f.currentStep),[b,f.currentStep]),x=g.useMemo(()=>!(!i||a||!b||!f.hydrated||f.loading||typeof r<"u"&&!r||f.currentStep==="committed"||f.currentStep==="completed"||t||l.pathname.startsWith("/onboarding")),[t,b,i,a,f.currentStep,f.hydrated,f.loading,l.pathname]);return te.useEffect(()=>{x&&c("/onboarding",{replace:!0})},[x,c]),o.jsx(o.Fragment,{children:o.jsxs(TP,{children:[o.jsx($e,{path:"/login",element:o.jsx(xee,{})}),o.jsx($e,{path:"/join",element:o.jsx(vee,{})}),o.jsx($e,{path:"/onboarding",element:o.jsx(Dee,{})}),o.jsx($e,{path:"/forgot-password",element:o.jsx(Ree,{})}),o.jsx($e,{path:"/reset-password",element:o.jsx(_ee,{})}),o.jsx($e,{path:"/share/wishlists/:token",element:o.jsx(Iee,{})}),o.jsx($e,{path:"/share/profiles/:token",element:o.jsx(Mee,{})}),o.jsxs($e,{path:"/",element:o.jsx(hN,{hasExistingFamily:t,isFamilyContextReady:r,children:o.jsx(fN,{familyId:e,userId:u,audience:y,offerTrigger:v,extraSteps:m,onboardingState:f,markCompleted:h})}),children:[o.jsx($e,{index:!0,element:o.jsx(OS,{})}),o.jsx($e,{path:"calendar",element:o.jsx(sE,{})}),o.jsx($e,{path:"tasks",element:o.jsx(iE,{})}),o.jsx($e,{path:"gigs",element:o.jsx(aE,{})}),o.jsx($e,{path:"gigs/settings",element:o.jsx(oE,{})}),o.jsx($e,{path:"messages",element:o.jsx(lE,{})}),o.jsx($e,{path:"recipes",element:o.jsx(uN,{})}),o.jsx($e,{path:"shopping",element:o.jsx(dE,{})}),o.jsx($e,{path:"wishlists",element:o.jsx(sN,{})}),o.jsx($e,{path:"budget",element:o.jsx(UE,{})}),o.jsx($e,{path:"family",element:o.jsx(ZE,{})}),o.jsx($e,{path:"family/values",element:o.jsx(tN,{})}),o.jsx($e,{path:"journal",element:o.jsx(rN,{})}),o.jsx($e,{path:"settings",element:o.jsx(iN,{})}),o.jsx($e,{path:"profile",element:o.jsx(aN,{})}),o.jsx($e,{path:"resources",element:o.jsx(cN,{})})]}),o.jsxs($e,{path:"/app",element:o.jsx(hN,{hasExistingFamily:t,isFamilyContextReady:r,children:o.jsx(fN,{familyId:e,userId:u,audience:y,offerTrigger:v,extraSteps:m,onboardingState:f,markCompleted:h})}),children:[o.jsx($e,{index:!0,element:o.jsx(OS,{})}),o.jsx($e,{path:"calendar",element:o.jsx(sE,{})}),o.jsx($e,{path:"tasks",element:o.jsx(iE,{})}),o.jsx($e,{path:"gigs",element:o.jsx(aE,{})}),o.jsx($e,{path:"gigs/settings",element:o.jsx(oE,{})}),o.jsx($e,{path:"messages",element:o.jsx(lE,{})}),o.jsx($e,{path:"recipes",element:o.jsx(uN,{})}),o.jsx($e,{path:"shopping",element:o.jsx(dE,{})}),o.jsx($e,{path:"wishlists",element:o.jsx(sN,{})}),o.jsx($e,{path:"budget",element:o.jsx(UE,{})}),o.jsx($e,{path:"family",element:o.jsx(ZE,{})}),o.jsx($e,{path:"family/values",element:o.jsx(tN,{})}),o.jsx($e,{path:"journal",element:o.jsx(rN,{})}),o.jsx($e,{path:"settings",element:o.jsx(iN,{})}),o.jsx($e,{path:"profile",element:o.jsx(aN,{})}),o.jsx($e,{path:"resources",element:o.jsx(cN,{})})]})]})})},ete=()=>{const{user:e}=Ot(),t=(e==null?void 0:e.UserID)??(e==null?void 0:e.id)??null,{activeFamilyId:r,family:n,families:s,isLoading:i}=Lr(),a=(e==null?void 0:e.FamilyID)??(e==null?void 0:e.familyId)??null,l=r??(n==null?void 0:n.FamilyID)??a??null,c=!!l||((s==null?void 0:s.length)??0)>0,u=!!l||!i;return o.jsx(a8,{familyId:l,userId:t,children:o.jsx(zJ,{familyId:l,userId:t,children:o.jsx(Jee,{familyId:l,hasExistingFamily:c,isFamilyContextReady:u})})})};function tte(){return o.jsx(kL,{children:o.jsx(x4,{children:o.jsx(v4,{children:o.jsx(ete,{})})})})}const pN=mr("app-entry");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/app/service-worker.js").then(e=>{pN.log("Service Worker registered with scope:",e.scope)}).catch(e=>{pN.error("Service Worker registration failed:",e)})});jj(document.getElementById("root")).render(o.jsx(g.StrictMode,{children:o.jsx(LP,{basename:"/app",children:o.jsx(tte,{})})}));export{Xt as A,o as j,vt as m,g as r};
//# sourceMappingURL=index-D5mY-Acz.js.map
